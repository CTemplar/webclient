<div class="mailbox-sub-content">

    <ngb-tabset>

        <!-- Dashboard and Plans -->
        <ngb-tab>
            <ng-template ngbTabTitle>Dashboard and plans</ng-template>
            <ng-template ngbTabContent>

                <!-- Overview Section -->
                <section class="mailbox-section mt-4">

                    <div class="mailbox-section-body pt-0">
                        <div class="desc-card-holder mt-sm-3 mt-md-0">
                            <div class="row">
                                <div class="col-md-6 mb-4 mb-md-0">
                                    <div class="desc-card">
                                        <div class="desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0">
                                            <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.overview">Overview</strong>
                                            </h5>
                                        </div>
                                        <div class="desc-card-body">
                                            <ul class="info-list list-styled text-dark">
                                                <li class="info-list-item">
                                                    <div class="info-list-text info-list-label" translate="settings.username">
                                                        Username
                                                    </div>
                                                    <div class="info-list-text info-list-val">{{userState.username}}</div>
                                                </li>
                                                <li class="info-list-item">
                                                    <div class="info-list-text info-list-label" translate="settings.domains">
                                                        Domains
                                                    </div>
                                                    <div class="info-list-text info-list-val">
                                                        <span *ngIf="userState.isPrime" translate="settings.feature_coming_soon">Feature
                                                            coming soon!</span>
                                                        <span *ngIf="!userState.isPrime" translate="settings.none">None</span>
                                                    </div>
                                                </li>
                                                <li class="info-list-item align-items-start">
                                                    <div class="info-list-text info-list-label" translate="settings.addresses">
                                                        Addresses
                                                    </div>
                                                    <div class="info-list-text info-list-val">
                                                        <div *ngIf="userState.isPrime" class="ng-tooltips-holder d-inline-block"
                                                            placement="top">
                                                            <div class="info-list-val-text" translate="settings.address_tooltip">
                                                                {{settings?.email_count}}
                                                            </div>
                                                        </div>
                                                        <div *ngIf="!userState.isPrime" class="d-inline-block">
                                                            <div class="info-list-val-text" translate="settings.address_one">
                                                                One
                                                            </div>
                                                        </div>

                                                    </div>
                                                </li>
                                                <li class="info-list-item">
                                                    <div class="info-list-text info-list-label" translate="settings.storage">
                                                        Storage
                                                    </div>

                                                    <div class="info-list-text info-list-val">
                                                        <div class="info-list-val-text"> {{(settings?.used_storage *
                                                            1024) | filesize}} of {{(settings?.allocated_storage *
                                                            1024) | filesize}}</div>
                                                        <div class="progress progress-secondary progress-lg">
                                                            <div class="progress-bar" role="progressbar"
                                                                [style.width.%]="(settings.used_storage/(settings.allocated_storage * 1024))*100"
                                                                [attr.aria-valuenow]="settings.used_storage"
                                                                aria-valuemin="0" [attr.aria-valuemax]="settings.allocated_storage * 1024"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="desc-card">
                                        <div class="desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0">
                                            <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.my_subscription">My
                                                    Subscription</strong></h5>
                                        </div>
                                        <div class="desc-card-body">
                                            <ul class="info-list info-list-lg list-styled text-dark" *ngIf="payment">
                                                <li class="info-list-item">
                                                    <div class="info-list-item-row">
                                                        <div class="info-list-text info-list-label">
                                                            <span class="info-list-label-text" translate="settings.plans">Plans</span>
                                                            <span *ngIf="userState.isPrime" translate="settings.prime_plan">Prime
                                                                Plan</span>
                                                            <span *ngIf="!userState.isPrime" translate="settings.free_plan">Free
                                                                Plan</span>
                                                        </div>
                                                        <div *ngIf="userState.isPrime" class="info-list-text info-list-val">
                                                            <strong>{{8|currency:payment.currency}}</strong>
                                                            <span class="text-muted">/month</span>
                                                        </div>
                                                    </div>
                                                    <ng-container *ngIf="userState.isPrime">
                                                        <div *ngIf="extraStorage > 0" class="info-list-item-row">
                                                            <div class="info-list-text info-list-label">
                                                                <span class="info-list-label-text text-muted ml-6">+{{extraStorage}} GB</span>
                                                            </div>
                                                            <div class="info-list-text info-list-val">
                                                                +{{extraStorage|currency:payment.currency}}/month
                                                            </div>
                                                        </div>
                                                        <div *ngIf="extraEmailAddress > 0" class="info-list-item-row">
                                                            <div class="info-list-text info-list-label">
                                                                <span class="info-list-label-text text-muted ml-6">
                                                                    +{{extraEmailAddress}} Addresses
                                                                </span>
                                                            </div>
                                                            <div class="info-list-text info-list-val">
                                                                +{{extraEmailAddress / 3|currency:payment.currency}}/month
                                                            </div>
                                                        </div>
                                                    </ng-container>

                                                </li>
                                                <ng-container *ngIf="userState.isPrime">
                                                    <li class="info-list-item">
                                                        <div class="info-list-text info-list-label">Billing</div>
                                                        <div class="info-list-text info-list-val">
                                                            {{payment.payment_type}}
                                                        </div>
                                                    </li>
                                                    <li class="info-list-item">
                                                        <div class="info-list-text info-list-label"
                                                             translate="settings.total_price">Total Price
                                                        </div>
                                                        <div class="info-list-text info-list-val">
                                                            {{annualTotalPrice|currency:payment.currency}}/annually
                                                        </div>
                                                    </li>
                                                    <li class="info-list-item" *ngIf="payment.payment_type === paymentType.ANNUALLY">
                                                        <div class="info-list-text info-list-label">Discounted Price
                                                        </div>
                                                        <div class="info-list-text info-list-val">
                                                            {{annualDiscountedPrice|currency:payment.currency}}/annually
                                                            <span class="text-primary">&nbsp;(-25%)</span>
                                                        </div>
                                                    </li>
                                                    <li class="info-list-item">
                                                        <div class="info-list-text info-list-label"
                                                             translate="settings.billing_cycle_end">Billing
                                                            Cycle End
                                                        </div>
                                                        <div class="info-list-text info-list-val">
                                                            {{payment.billing_cycle_ends | momentDate:'mediumDate'}}
                                                        </div>
                                                    </li>
                                                    <li class="info-list-item">
                                                        <div class="info-list-text info-list-label"
                                                             translate="settings.payment">Payment
                                                        </div>
                                                        <div class="info-list-text info-list-val text-capitalize">
                                                            {{payment.payment_method}}
                                                        </div>
                                                    </li>
                                                </ng-container>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


                <!-- Account Type Section -->
                <section class="mailbox-section">
                    <div class="ui-header ui-header-bordered position-relative">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.account_type">Account
                                Type</strong></h5>
                    </div>
                    <app-pricing-plans hideHeader="true" blockGapsZero="true"
                                       [showCurrentPlan]="true"
                                       [isPrime]="userState.isPrime"
                                       [selectedCurrency]="payment.currency"
                                       [paymentType]="payment.payment_type"
                                       [paymentMethod]="payment.payment_method === 'stripe' ? paymentMethod.STRIPE :
                                                        payment.payment_method === 'bitcoin' ? paymentMethod.BITCOIN :
                                                        payment.payment_method"
                                       [selectedStorage]="defaultStorage + extraStorage"
                                       [selectedEmailAddress]="defaultEmailAddress + extraEmailAddress"
                                       [openBillingInfoInModal]="true"></app-pricing-plans>

                </section>


            </ng-template>
        </ngb-tab>

        <!-- General -->
        <ngb-tab>
            <ng-template ngbTabTitle>General</ng-template>
            <ng-template ngbTabContent>

                <!-- General Settings -->
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.general_settings">General
                                settings</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-0" translate="settings.language">Language</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="btn-dropdown btn-dropdown-select">
                                            <div ngbDropdown class="dropdown-sm">
                                                <button ngbDropdownToggle role="button" id="langDropdownMenuButton">
                                                    {{selectedLanguage?.name}} ({{selectedLanguage?.locale}})
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="langDropdownMenuButton">
                                                    <a class="dropdown-item" *ngFor="let language of languages" (click)="updateLanguage(language)">
                                                        {{language.name}} ({{language.locale}})
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-0" translate="settings.current_time_zone">Current
                                            time zone</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="btn-dropdown btn-dropdown-select">
                                            <div ngbDropdown class="dropdown-sm">
                                                <button ngbDropdownToggle class="dropdown-toggle" id="timeZoneDropdownMenuButton"
                                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    {{settings.timezone}}
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="timeZoneDropdownMenuButton" class="generic-dropdown-list">
                                                    <a class="dropdown-item" *ngFor="let timezone of timezones" (click)="updateSettings('timezone',timezone.value)">{{timezone.value}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-0" translate="settings.automatically_save_contact">Automatically
                                            save contacts</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="autoSaveField1"
                                                        name="[1]" type="radio" (click)="updateSettings('save_contacts', true)"
                                                        [checked]="settings.save_contacts" />
                                                    <label for="autoSaveField1" translate="common.enabled">Enabled</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="autoSaveField2"
                                                        name="[1]" type="radio" (click)="updateSettings('save_contacts', false)"
                                                        [checked]="!settings.save_contacts" />
                                                    <label for="autoSaveField2" translate="common.disabled">Disabled</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Will be used later -->
                            <div class="form-content-row" *ngIf="false">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-0" translate="settings.vacation_responder">Vacation
                                            responder</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="responderField1"
                                                        name="[2]" type="radio" (click)="updateSettings('autoresponder', true)"
                                                        [checked]="settings.autoresponder" />
                                                    <label for="responderField1" translate="common.enabled">Enabled</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="responderField2"
                                                        name="[2]" type="radio" (click)="updateSettings('autoresponder', false)"
                                                        [checked]="!settings.autoresponder" />
                                                    <label for="responderField2" translate="common.disabled">Disabled</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Appreance Section -->
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.appearance">Appearance</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-row">
                            <div class="row align-items-center">
                                <div class="col-sm-5">
                                    <label class="form-label mb-sm-0" translate="settings.emails_per_page">Emails
                                        per page</label>
                                </div>
                                <div class="col-sm-7">
                                    <div class="row row-sm">
                                        <div class="col-6 flex-auto-col">
                                            <div class="fancy-field-group">
                                                <input class="d-none fancy-field-control fancy-field-control-sm" id="emailCoutField1"
                                                    name="[5]" type="radio" (click)="updateSettings('emails_per_page', 20)"
                                                    [checked]="settings?.emails_per_page===20" />
                                                <label for="emailCoutField1">20</label>
                                            </div>
                                        </div>
                                        <div class="col-6 flex-auto-col">
                                            <div class="fancy-field-group">
                                                <input class="d-none fancy-field-control fancy-field-control-sm" id="emailCoutField2"
                                                    name="[5]" type="radio" (click)="updateSettings('emails_per_page', 50)"
                                                    [checked]="settings?.emails_per_page===50" />
                                                <label for="emailCoutField2">50</label>
                                            </div>
                                        </div>
                                        <div class="col-6 flex-auto-col">
                                            <div class="fancy-field-group">
                                                <input class="d-none fancy-field-control fancy-field-control-sm" id="emailCoutField3"
                                                    name="[5]" type="radio" (click)="updateSettings('emails_per_page', 100)"
                                                    [checked]="settings?.emails_per_page===100" />
                                                <label for="emailCoutField3">100</label>
                                            </div>
                                        </div>
                                        <div class="col-6 flex-auto-col">
                                            <div class="fancy-field-group">
                                                <input class="d-none fancy-field-control fancy-field-control-sm" id="emailCoutField4"
                                                    name="[5]" type="radio" (click)="updateSettings('emails_per_page', 200)"
                                                    [checked]="settings?.emails_per_page===200" />
                                                <label for="emailCoutField4">200</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </section>

                <!-- Payments Section -->
                <section class="mailbox-section" *ngIf="payment?.payment_method === 'stripe'">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong
                                translate="settings.payments">Payments</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-0">Reoccurring Billing</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm"
                                                           id="enableRecurringBilling"
                                                           name="recurringBilling" type="radio"
                                                           (click)="updateSettings('recurrence_billing', true)"
                                                           [checked]="settings.recurrence_billing"/>
                                                    <label for="enableRecurringBilling"
                                                           translate="common.yes">Yes</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm"
                                                           id="disableRecurringBilling"
                                                           name="recurringBilling" type="radio"
                                                           (click)="updateSettings('recurrence_billing', false)"
                                                           [checked]="!settings.recurrence_billing"/>
                                                    <label for="disableRecurringBilling"
                                                           translate="common.no">No</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </section>
                <!-- Payments Section Ends -->

            </ng-template>
        </ngb-tab>

        <!-- Filtered and blocked addresses -->
        <ngb-tab>
            <ng-template ngbTabTitle>Filtered and blocked addresses</ng-template>
            <ng-template ngbTabContent>

                <!-- Whitelist settings -->
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.whitelist.name">Whitelist</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <ul class="ui-list ui-list-styled list-styled">
                                <li class="ui-list-item ui-list-item-xs-full" *ngFor="let item of userState.whiteList">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="form-label text-dark mb-0">{{item.email}}</div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li><a (click)="deleteWhiteList(item.id)" role="button"><i class="icon icon-garbage"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="info-card">
                                <p [innerHTML]="'settings.whitelist.info' | translate">Messages from contacts in the
                                    whitelist
                                    always go to <strong>Inbox folder</strong>. Marking a
                                    message as not spam adds the address to the Whitelist.</p>
                                <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="newListContact={show: true, type: 'Whitelist'};"><strong><u
                                            translate="settings.whitelist.add_whitelist_contact">Add whitelist
                                            contact</u></strong></a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Blacklist settings -->
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.blacklist.name">Blacklist</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <ul class="ui-list ui-list-styled list-styled">
                                <li class="ui-list-item ui-list-item-xs-full" *ngFor="let item of userState.blackList">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="form-label text-dark mb-0">{{item.email}}</div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li>
                                                    <a (click)="deleteBlackList(item.id)" role="button">
                                                        <i class="icon icon-garbage"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="info-card">
                                <p [innerHTML]="'settings.blacklist.info' | translate">Messages from contacts in the
                                    blacklist
                                    always go to <strong>Spam folder</strong>. Marking a
                                    message as spam adds the address to the Blacklist.</p>
                                <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="newListContact={show: true, type: 'Blacklist'};"><strong><u
                                            translate="settings.blacklist.add_blacklist_contact">Add blacklist
                                            contact</u></strong></a>
                            </div>
                        </div>
                    </div>
                </section>
            </ng-template>
        </ngb-tab>

        <!-- Addresses and Signatures -->
        <ngb-tab>
            <ng-template ngbTabTitle>Addresses and signatures</ng-template>
            <ng-template ngbTabContent>
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.signature">Signature</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label for="displayName" class="form-label mb-sm-0" translate="settings.display_name">Display
                                            name</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <input class="form-control form-control-sm" id="displayName" type="text"
                                            [(ngModel)]="currentMailBox.display_name" [ngModelOptions]="{ updateOn: 'blur'}"
                                            (change)="updateMailboxSettings('display_name', $event.target.value)" placeholder="John Simpson" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label for="signature" class="form-label mb-sm-0" translate="settings.signature">Signature</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <textarea class="form-control form-control-sm form-control-contenteditable" id="signature"
                                            [(ngModel)]="currentMailBox.signature" [ngModelOptions]="{ updateOn: 'blur'}"
                                            (change)="updateMailboxSettings('signature', $event.target.value)" contenteditable="true">
                                        </textarea>
                                    </div>
                                </div>
                            </div>


                            <!-- Will be used later -->
                            <div class="form-content-row" *ngIf="false">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-sm-0" translate="settings.load_embedded_content">Load
                                            embedded
                                            content</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="embeddedContentField1"
                                                        name="[6]" type="radio" (click)="updateSettings('embed_content', true)"
                                                        [checked]="settings?.embed_content" />
                                                    <label for="embeddedContentField1" translate="common.yes">Yes</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="embeddedContentField2"
                                                        name="[6]" type="radio" (click)="updateSettings('embed_content', false)"
                                                        [checked]="!settings?.embed_content" />
                                                    <label for="embeddedContentField2" translate="common.no">No</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="embeddedContentField3"
                                                        name="[6]" type="radio" disabled />
                                                    <label for="embeddedContentField3" translate="settings.only_images">Only
                                                        images</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Will be used later -->
                            <div class="form-content-row" *ngIf="false">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-sm-0" translate="settings.show_snippets">Show
                                            snippets</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="showSnippetsField1"
                                                        name="[7]" type="radio" (click)="updateSettings('show_snippets', true)"
                                                        [checked]="settings?.show_snippets" />
                                                    <label for="showSnippetsField1" translate="common.yes">Yes</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="showSnippetsField2"
                                                        name="[7]" type="radio" (click)="updateSettings('show_snippets', false)"
                                                        [checked]="!settings?.show_snippets" />
                                                    <label for="showSnippetsField2" translate="common.no">No</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </section>
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0">
                            <strong translate="settings.addresses">Addresses</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                          <button type="button" (click)="onAddNewAddress()" class="btn btn-link right">Add Address</button>
                            <ul class="ui-list ui-list-styled list-styled">
                              <li *ngIf="newAddressOptions.isAddingNew" class="ui-list-item ui-list-item-xs-full">
                                <form class="signup-form" [formGroup]="newAddressForm" #form="ngForm" (ngSubmit)="submitNewAddress()">
                                  <div class="row row-xs align-items-center">
                                    <div class="col-sm-10">
                                      <div class="form-group mb-0">
                                        <div class="form-inline userame-field-group"
                                             [ngClass]="{'is-validate': newAddressForm.controls.username.invalid &&
                                             (newAddressForm.controls.username.touched || newAddressOptions.isSubmitted)}">
                                          <input class="form-control text-dark mb-3 mb-sm-0" id="new-address-username"
                                                 [placeholder]="'create_account.choose_username' | translate"
                                                 type="text" name="username"
                                                 formControlName="username"/>
                                          <span class="domain-separator text-center text-dark">@</span>
                                          <input class="form-control text-dark is-readonly border-0 px-0 email-input"
                                                 value="ctemplar.com" type="text" readonly tabindex="-1"/>
                                          <ng-container *ngIf="newAddressOptions.isBusy || mailBoxesState?.inProgress; else showIcons">
                                            <app-loading-spinner [showSpinner]="true"></app-loading-spinner>
                                          </ng-container>
                                          <ng-template #showIcons>
                                            <i class="fas fa-check green"
                                               *ngIf="newAddressOptions.usernameExists === false && !newAddressForm.controls['username'].errors"></i>
                                            <i class="fas fa-times text-danger"
                                               *ngIf="newAddressOptions.usernameExists === true ||
                                               (newAddressForm.controls['username'].errors &&
                                               (newAddressForm.controls['username'].touched ||
                                               newAddressOptions.isSubmitted))"></i>
                                          </ng-template>
                                        </div>
                                        <ng-container
                                                *ngIf="newAddressForm.controls['username'].errors &&
                                                (newAddressForm.controls['username'].touched ||
                                                newAddressOptions.isSubmitted); else usernameExistsBlock">
                                          <span class="validate-message"
                                                *ngIf="newAddressForm.controls['username'].errors; else usernameRequiredError">
                                            <ng-container *ngIf="newAddressForm.controls['username'].errors.pattern; else usernameLengthBlock">
                                              The username must start with an alphabet and can only contain
                                              <em>a-z</em>, <em>A-Z</em>, <em>0-9</em> or <em>._-</em> characters, and minimum length should be 4 characters.
                                            </ng-container>
                                            <ng-template #usernameLengthBlock>
                                              <ng-container
                                                      *ngIf="newAddressForm.controls['username'].errors.minlength ||
                                                      newAddressForm.controls['username'].errors.maxlength">
                                                The username must be between 4 and 64 characters.
                                              </ng-container>
                                            </ng-template>
                                          </span>
                                          <ng-template #usernameRequiredError>
                                            <span class="validate-message">The username is required.</span>
                                          </ng-template>
                                        </ng-container>
                                        <ng-template #usernameExistsBlock>
                                          <span *ngIf="newAddressOptions.usernameExists === true"
                                                class="validate-message">Username already exists.
                                          </span>
                                        </ng-template>
                                      </div>
                                    </div>
                                    <div class="col-sm-2">
                                      <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                        <li><button type="submit" class="btn-link cursor-pointer"
                                                    [disabled]="newAddressOptions.isBusy">Add</button></li>
                                        <li><a (click)="onDiscardNewAddress()" role="button"><i
                                                class="icon icon-garbage"></i></a></li>
                                      </ul>
                                    </div>
                                  </div>
                                </form>
                              </li>
                              <li class="ui-list-item ui-list-item-xs-full" *ngFor="let mailbox of mailboxes">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="form-label text-dark mb-0">
                                                {{mailbox.email}}
                                                <span *ngIf="mailbox.is_default" class="badge badge-default">Default</span>
                                            </div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li *ngIf="!mailbox.is_default"><a href="" role="button">Make Default</a></li>
                                                <li><a href="" role="button"><i class="icon icon-garbage"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.keys.name">Keys</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-sm-0" translate="settings.keys.email_address">Email
                                            address</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="btn-dropdown btn-dropdown-select">
                                            <div ngbDropdown class="dropdown-sm">
                                                <button ngbDropdownToggle class="dropdown-toggle" id="emailAddressDropdownMenuButton"
                                                    role="button">
                                                    {{selectedMailboxForKey?.email}}
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="emailAddressDropdownMenuButton">
                                                    <a class="dropdown-item" *ngFor="let mailbox of userState.mailboxes"
                                                        (click)="selectedMailboxForKey=mailbox;">{{mailbox.email}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label for="fingerPrint" class="form-label mb-sm-0" translate="settings.keys.fingerprint">Fingerprint</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <input class="form-control form-control-sm" id="fingerPrint" type="text" value="o8bg359348b24p08gn34408g4p389gbpq938g"
                                            readonly="" />
                                        <span class="form-label-text mt-1">
                                            <a [href]="publicKey | safe: 'url'"><strong><u>
                                                        <span translate="settings.download_public_kay">Download public
                                                            key </span>
                                                        (4096 Bit)</u></strong>
                                            </a>
                                        </span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

            </ng-template>
        </ngb-tab>

        <!-- Security -->
        <ngb-tab>
            <ng-template ngbTabTitle>Security</ng-template>
            <ng-template ngbTabContent>
                <section class="mailbox-section">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.security_settings">Security
                                settings</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label for="securityPassword" class="form-label mb-sm-0" translate="settings.password">Password</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <input class="form-control form-control-sm" id="securityPassword" type="password"
                                            placeholder="********" />
                                        <span class="form-label-text mt-1">
                                            <a href="javascript:void(0);" role="button" class="text-uppercase btn-link"
                                                (click)="openChangePasswordModal()"><strong>
                                                    <u translate="settings.change_now">Change now</u></strong></a></span>
                                        <input style="visibility: hidden;" id="username" type="text" name="username" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-content-row">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label for="recoveryMail" class="form-label mb-sm-0" translate="settings.recovery_email">Recovery
                                            email</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <input class="form-control form-control-sm" id="recoveryMail" type="email"
                                            autocomplete="off" [(ngModel)]="settings.recovery_email" [ngModelOptions]="{ updateOn: 'blur'}"
                                            (change)="updateSettings('recovery_email', $event.target.value)"
                                            placeholder="johnsimpson@gmail.com" />
                                    </div>
                                </div>
                            </div>

                            <!-- Will be used later -->
                            <div class="form-content-row" *ngIf="false">
                                <div class="row align-items-center">
                                    <div class="col-sm-5">
                                        <label class="form-label mb-sm-0" translate="settings.security_alerts">Security
                                            alerts</label>
                                    </div>
                                    <div class="col-sm-7">
                                        <div class="row row-sm">
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="securityField1"
                                                        name="[4]" type="radio" (click)="updateSettings('newsletter', true)"
                                                        [checked]="settings.newsletter" />
                                                    <label for="securityField1" translate="common.enabled">Enabled</label>
                                                </div>
                                            </div>
                                            <div class="col-6 flex-auto-col">
                                                <div class="fancy-field-group">
                                                    <input class="d-none fancy-field-control fancy-field-control-sm" id="securityField2"
                                                        name="[4]" type="radio" (click)="updateSettings('newsletter', false)"
                                                        [checked]="!settings.newsletter" />
                                                    <label for="securityField2" translate="common.disabled">Disabled</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </ng-template>
        </ngb-tab>

        <!-- Forwarding and auto responder -->
        <ngb-tab *ngIf="false">
            <ng-template ngbTabTitle>Forwarding and autoresponder</ng-template>
            <ng-template ngbTabContent>

                <!--This section is hidden for now, will be used in dev pack 1.-->
                <section class="mailbox-section" *ngIf="false">
                    <header class="ui-header ui-header-bordered">
                        <h5 class="ui-header-subtitle text-dark mb-0"><strong>Filters</strong></h5>
                    </header>
                    <div class="mailbox-section-body mailbox-section-body-sm">
                        <div class="form-content-holder">
                            <ul class="ui-list ui-list-styled list-styled">
                                <li class="ui-list-item ui-list-item-xs-full">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="toggle-switcher">
                                                <input class="d-none toggle-switcher-control" id="switcherField1" name=""
                                                    type="checkbox" checked />
                                                <label for="switcherField1"></label>
                                                <span class="toggle-switcher-text">My spam filter</span>
                                            </div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                                <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                                <li class="ui-list-item ui-list-item-xs-full">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="toggle-switcher">
                                                <input class="d-none toggle-switcher-control" id="switcherField3" name=""
                                                    type="checkbox" checked />
                                                <label for="switcherField3"></label>
                                                <span class="toggle-switcher-text">Important messages filter</span>
                                            </div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                                <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                                <li class="ui-list-item ui-list-item-xs-full">
                                    <div class="row row-xs align-items-center">
                                        <div class="col-10 col-sm-8">
                                            <div class="toggle-switcher">
                                                <input class="d-none toggle-switcher-control" id="switcherField2" name=""
                                                    type="checkbox" />
                                                <label for="switcherField2"></label>
                                                <span class="toggle-switcher-text">Auto-labeling test</span>
                                            </div>
                                        </div>
                                        <div class="col-2 col-sm-4">
                                            <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                                <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                                <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="info-card">
                                <p>Add a filter to perform actions such as automatically labeling or archiving.</p>
                                <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="addCustomFilterModalOpen(customFilterContent)"><strong><u>Add
                                            custom filter</u></strong></a>
                            </div>
                        </div>
                    </div>
                </section>
            </ng-template>
        </ngb-tab>
    </ngb-tabset>

    <!-- Save Button -->
    <button mat-fab color="warn" class="fab-bottom" (click)="onUpdateSettingsBtnClick()">
        <i class="icon icon-save-disk"></i>
    </button>



    <!--This section is hidden for now, will be used in dev pack 1.-->
    <section class="mailbox-section" *ngIf="false">
        <header class="ui-header ui-header-bordered">
            <h5 class="ui-header-subtitle text-dark mb-0"><strong>Multi-users</strong></h5>
        </header>
        <div class="mailbox-section-body mailbox-section-body-sm">
            <div class="form-content-holder">
                <div class="info-card">
                    <p>Create and administer sub-accounts and assign them email addresses on your custom domain. To
                        enable this feature, upgrade your account.</p>
                    <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="billingInfoModalOpen(billingInfoContent)"><strong><u>Upgrade
                                account</u></strong></a>
                </div>
            </div>
        </div>
    </section>

    <!--This section is hidden for now, will be used in dev pack 1.-->
    <section class="mailbox-section" *ngIf="false">
        <header class="ui-header ui-header-bordered">
            <h5 class="ui-header-subtitle text-dark mb-0"><strong>Domains</strong></h5>
        </header>
        <div class="mailbox-section-body mailbox-section-body-sm">
            <div class="form-content-holder">
                <ul class="ui-list ui-list-styled list-styled">
                    <li class="ui-list-item ui-list-item-xs-full">
                        <div class="row row-xs align-items-center">
                            <div class="col-10 col-sm-8">
                                <div class="form-label text-dark mb-0">@demo.com</div>
                            </div>
                            <div class="col-2 col-sm-4">
                                <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                    <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                    <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="ui-list-item ui-list-item-xs-full">
                        <div class="row row-xs align-items-center">
                            <div class="col-10 col-sm-8">
                                <div class="form-label text-dark mb-0">@example.com</div>
                            </div>
                            <div class="col-2 col-sm-4">
                                <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                    <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                    <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="info-card">
                    <p>Use your own domain with CTemplar and use your own email address, e.g. name@domain.com.</p>
                    <!-- <a  class="text-uppercase btn-link"><strong><u>Add custom domain</u></strong></a> -->
                </div>
            </div>
        </div>
    </section>

    <!-- Will be used later -->
    <section class="mailbox-section" *ngIf="false">
        <header class="ui-header ui-header-bordered">
            <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.payment">Payments</strong></h5>
        </header>
        <div class="mailbox-section-body mailbox-section-body-sm">
            <div class="form-content-holder">
                <ul class="ui-list ui-list-styled list-styled">
                    <li class="ui-list-item ui-list-item-xs-full">
                        <div class="row row-xs align-items-center">
                            <div class="col-10 col-sm-8">
                                <div class="form-label text-dark mb-0">xxxx xxxx xxxx 8634</div>
                            </div>
                            <div class="col-2 col-sm-4">
                                <ul class="setting-actions-list d-flex align-items-center justify-content-end list-styled text-right">
                                    <li><a role="button"><i class="icon icon-edit"></i></a></li>
                                    <li><a role="button"><i class="icon icon-garbage"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="info-card">
                    <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="newPaymentMethodModalOpen(newPaymentMethodContent)"><strong><u
                                translate="settings.add_new_method">Add new
                                method</u></strong></a>
                </div>
            </div>
        </div>
    </section>


    <!-- Will be used later -->
    <section class="mailbox-section" *ngIf="false">
        <header class="ui-header ui-header-bordered">
            <h5 class="ui-header-subtitle text-dark mb-0"><strong translate="settings.donate.name">Donate</strong></h5>
        </header>
        <div class="mailbox-section-body mailbox-section-body-sm">
            <div class="form-content-holder">
                <div class="info-card">
                    <p translate="settings.donate.info">Your donation helps us support more users and continue to
                        develop CTemplar as free and open
                        source software.</p>
                    <a href="javascript:void(0);" class="text-uppercase btn-link" role="button" (click)="makeDonationModalOpen(makeDonationContent)"><strong><u
                                translate="settings.donate.make_a_donation">Make a donation</u></strong></a>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Modal groups -->

<!-- Change password Modal -->
<ng-template #changePasswordModal let-c="close" let-d="dismiss">
    <div class="modal-header justify-content-sm-center align-items-center text-sm-center">
        <h3 class="modal-title w-100 text-dark" id="changePasswordModalLabel"><strong>Change Password</strong></h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body bg-faded">
        <div class="text-holder text-dark text-medium">
            <p>Your encryption key is connected to your password. Because of this you will not be able to decrypt old
                emails if you reset your password.</p>

            <div class="login-content-holder mx-auto mt-2 pt-sm-2">
                <div class="form">
                    <form [formGroup]="changePasswordForm" (submit)="changePassword()">
                        <div class="form-group form-group-sm">
                            <label for="oldPassword" class="d-block text-muted text-left hidden-sm-up">Old
                                Password</label>
                            <div class="input-group">
                                <input #oldPasswordInput class="form-control form-control-lg" id="oldPassword"
                                    formControlName="oldPassword" placeholder="Old Password" type="password" />
                                <span class="input-group-addon password-toggle bg-white text-muted" (click)="togglePassword(oldPasswordInput)">
                                    <i class="fa fa-eye"></i>
                                </span>
                            </div>
                            <span *ngIf="changePasswordForm.controls['oldPassword'].errors && showChangePasswordFormErrors"
                                class="validate-message">
                                <span *ngIf="changePasswordForm.controls['oldPassword'].errors.required">Old password
                                    is required.</span>
                            </span>
                        </div>
                        <div class="form-group form-group-sm">
                            <label for="newPassword" class="d-block text-muted text-left hidden-sm-up">New
                                Password</label>
                            <div class="input-group">
                                <input #newPasswordInput class="form-control form-control-lg" id="newPassword"
                                    formControlName="password" placeholder="New Password" type="password" />
                                <span class="input-group-addon password-toggle bg-white text-muted" (click)="togglePassword(newPasswordInput)">
                                    <i class="fa fa-eye"></i>
                                </span>
                            </div>
                            <span *ngIf="changePasswordForm.controls['password'].errors && showChangePasswordFormErrors"
                                class="validate-message">
                                <span *ngIf="changePasswordForm.controls['password'].errors.required">New password is
                                    required.</span>
                            </span>
                        </div>
                        <div class="form-group form-group-sm">
                            <label for="confirmNewPassword" class="d-block text-muted text-left hidden-sm-up">Confirm
                                New Password</label>
                            <div class="input-group">
                                <input #confirmNewPasswordInput class="form-control form-control-lg" id="confirmNewPassword"
                                    formControlName="confirmPwd" placeholder="Confirm New Password" type="password" />
                                <span class="input-group-addon password-toggle bg-white text-muted" (click)="togglePassword(confirmNewPasswordInput)">
                                    <i class="fa fa-eye"></i>
                                </span>
                            </div>
                            <span *ngIf="changePasswordForm.controls['confirmPwd'].errors && showChangePasswordFormErrors"
                                class="validate-message">
                                <span translate="create_account.passwords_not_match">Passwords do not match.</span>
                            </span>
                        </div>
                        <div class="form-group form-user-actions text-center mb-0">
                            <button class="btn btn-gradient-primary btn-sm reset-btn" role="button" type="submit">
                                Submit
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</ng-template><!-- /.Change password Modal ends -->

<!-- Add custom filter Modal -->
<ng-template #customFilterContent let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h3 class="modal-title w-100 text-dark" id="customFilterModalLabel"><strong>Add custom filter</strong></h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body bg-faded">
        <div class="form-content-holder">
            <div class="form-group">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="filterName">Filter name:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="filterName" type="text" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0">Condition:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row form-content-row-sm">
                            <div class="btn-dropdown btn-dropdown-select">
                                <div ngbDropdown class="dropdown-sm">
                                    <button ngbDropdownToggle id="subjectDropdownMenuButton" role="button">If the
                                        subject
                                    </button>
                                    <div ngbDropdownMenu aria-labelledby="subjectDropdownMenuButton">
                                        <a class="dropdown-item">If the subject</a>
                                        <a class="dropdown-item">If the subject</a>
                                        <a class="dropdown-item">If the subject</a>
                                        <a class="dropdown-item">If the subject</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-content-row form-content-row-sm">
                            <div class="btn-dropdown btn-dropdown-select">
                                <div ngbDropdown class="dropdown-sm">
                                    <button ngbDropdownToggle id="containsDropdownMenuButton" role="button">contains
                                    </button>
                                    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="containsDropdownMenuButton">
                                        <a class="dropdown-item">contains</a>
                                        <a class="dropdown-item">contains</a>
                                        <a class="dropdown-item">contains</a>
                                        <a class="dropdown-item">contains</a>
                                        <a class="dropdown-item">contains</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="patternField" type="text" placeholder="text or pattern" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group mb-0">
                <div class="row">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0">Actions:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row form-content-row-sm">
                            <div class="row row-sm align-items-center">
                                <div class="col-6 flex-auto-col">
                                    <div class="fancy-field-group">
                                        <input class="d-none fancy-field-control fancy-field-control-sm" id="moveToField1"
                                            name="[1]" type="checkbox" checked />
                                        <label for="moveToField1">move to</label>
                                    </div>
                                </div>
                                <div class="col-8 add-filter-moveto-col">
                                    <div class="btn-dropdown btn-dropdown-select">
                                        <div ngbDropdown class="dropdown-sm">
                                            <button ngbDropdownToggle class="has-icon" id="moveToDropdownMenuButton"
                                                role="button"><i class="icon icon-inbox"></i>Inbox
                                            </button>
                                            <div ngbDropdownMenu aria-labelledby="moveToDropdownMenuButton">
                                                <a class="dropdown-item has-icon"><i class="icon icon-inbox"></i>Inbox</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-draft"></i>Draft</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-archive"></i>Archivex</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-paper-plane"></i>Sent</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-garbage"></i>Trash</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-content-row form-content-row-sm">
                            <div class="row row-sm align-items-center">
                                <div class="col-6 flex-auto-col">
                                    <div class="fancy-field-group">
                                        <input class="d-none fancy-field-control fancy-field-control-sm" id="applyLabelField1"
                                            name="[1]" type="checkbox" disabled="" />
                                        <label for="applyLabelField1">apply label</label>
                                    </div>
                                </div>
                                <div class="col-8 add-filter-applylabel-col">
                                    <div class="btn-dropdown btn-dropdown-select">
                                        <div ngbDropdown class="dropdown-sm">
                                            <button ngbDropdownToggle class="has-icon" id="applyDropdownMenuButton"
                                                role="button" disabled></button>
                                            <div ngbDropdownMenu aria-labelledby="applyDropdownMenuButton">
                                                <a class="dropdown-item has-icon"><i class="icon icon-inbox"></i>Inbox</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-draft"></i>Draft</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-archive"></i>Archivex</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-paper-plane"></i>Sent</a>
                                                <a class="dropdown-item has-icon"><i class="icon icon-garbage"></i>Trash</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-content-row">
                            <div class="row row-sm align-items-center">
                                <div class="col-6 flex-auto-col">
                                    <div class="fancy-field-group">
                                        <input class="d-none fancy-field-control fancy-field-control-sm" id="markReadField1"
                                            name="[1]" type="checkbox" />
                                        <label for="markReadField1">mark as read</label>
                                    </div>
                                </div>
                                <div class="col-8 flex-auto-col">
                                    <div class="fancy-field-group">
                                        <input class="d-none fancy-field-control fancy-field-control-sm" id="markStarredField1"
                                            name="[1]" type="checkbox" />
                                        <label for="markStarredField1">mark as starred</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="modal-footer justify-content-center justify-content-sm-end">
        <a class="btn btn-secondary btn-sm" role="button">Add filter</a>
    </div>
</ng-template><!-- /.Add custom filter ends -->

<app-save-list-contact *ngIf="newListContact.show" [contactType]="newListContact.type" (closed)="newListContact.show=false;"></app-save-list-contact>


<!-- Billing Information Modal -->
<ng-template #billingInfoContent let-c="close" let-d="dismiss">
    <div class="modal-header text-sm-center justify-content-sm-center">
        <h3 class="modal-title w-100 text-dark" id="billingInformationModalLabel"><strong>Billing Information</strong>
        </h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body bg-faded">
        <div class="form-card-holder mx-auto">
            <div class="form">
                <form>
                    <div class="form-card-holder billing-form-card-holder">
                        <div class="form-step-card">
                            <h3 class="form-step-card-title text-dark mb-3"><strong>Overview</strong></h3>
                            <div class="billing-overview">
                                <div class="billing-overview-row">
                                    <label class="billing-overview-label mb-0">Plan</label>
                                    <div class="billing-overview-val text-secondary"><strong>Ctemplar PRIME</strong>
                                    </div>
                                </div>
                                <div class="billing-overview-row">
                                    <label class="billing-overview-label mb-0">Billing</label>
                                    <div class="billing-overview-val text-secondary"><strong>Annually</strong></div>
                                </div>
                                <div class="billing-overview-row">
                                    <label class="billing-overview-label mb-0">Price</label>
                                    <div class="billing-overview-val text-secondary"><strong>48.00  </strong>(4.00/month)
                                    </div>
                                </div>
                                <div class="billing-overview-row payment-method-row">
                                    <label class="billing-overview-label">Payment Method: </label>
                                    <div class="billing-overview-val text-secondary">
                                        <div class="btn-dropdown btn-dropdown-lg btn-dropdown-select">
                                            <div ngbDropdown class="payment-select-dropdown">
                                                <button ngbDropdownToggle id="paymentDropdownMenuButton" role="button">
                                                    Stripe
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="paymentDropdownMenuButton">
                                                    <a class="dropdown-item text-muted"><em>Stripe</em></a>
                                                    <a class="dropdown-item text-muted"><em>Credit/Debit
                                                            card</em></a>
                                                    <a class="dropdown-item text-muted"><em>Bitcoin</em></a>
                                                    <a class="dropdown-item text-muted"><em>Monero</em></a>
                                                    <a class="dropdown-item text-muted"><em>Ethereum</em></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-step-card">
                            <h3 class="form-step-card-title text-dark mb-3"><strong>Payment Information</strong></h3>
                            <div class="form-group">
                                <label for="personName" class="d-block text-muted text-left hidden-sm-up" translate="settings.donate.name_on_card">Name
                                    on Card</label>
                                <input class="form-control" id="personName" placeholder="Name on Card" value="John"
                                    type="text">
                            </div>
                            <div class="form-group has-error">
                                <span class="d-block text-right error-msg">Required field</span>
                                <label for="cardName" class="d-block text-muted text-left hidden-sm-up">Card
                                    Number</label>
                                <input class="form-control error" id="cardName" placeholder="Card Number" type="text">
                            </div>
                            <div class="form-group form-group-3-col">
                                <div class="form-group-row">
                                    <div class="form-group-col">
                                        <label class="d-block text-muted text-left hidden-sm-up">Date</label>
                                        <div class="btn-dropdown btn-dropdown-lg btn-dropdown-select">
                                            <div ngbDropdown class="date-select-dropdown">
                                                <button ngbDropdownToggle id="dateDropdownMenuButton" role="button">
                                                    Date
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="dateDropdownMenuButton">
                                                    <a class="dropdown-item text-muted"><em>Date</em></a>
                                                    <a class="dropdown-item text-muted"><em>01</em></a>
                                                    <a class="dropdown-item text-muted"><em>02</em></a>
                                                    <a class="dropdown-item text-muted"><em>03</em></a>
                                                    <a class="dropdown-item text-muted"><em>04</em></a>
                                                    <a class="dropdown-item text-muted"><em>05</em></a>
                                                    <a class="dropdown-item text-muted"><em>06</em></a>
                                                    <a class="dropdown-item text-muted"><em>07</em></a>
                                                    <a class="dropdown-item text-muted"><em>08</em></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group-col">
                                        <label class="d-block text-muted text-left hidden-sm-up">Year</label>
                                        <div class="btn-dropdown btn-dropdown-lg btn-dropdown-select">
                                            <div ngbDropdown class="year-select-dropdown">
                                                <button ngbDropdownToggle id="yearDropdownMenuButton" role="button">
                                                    Year
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="yearDropdownMenuButton">
                                                    <a class="dropdown-item text-muted"><em>Year</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                    <a class="dropdown-item text-muted"><em>2018</em></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group-col">
                                        <label for="securityCode" class="d-block text-muted text-left hidden-sm-up">Security
                                            Code</label>
                                        <input class="form-control" id="securityCode" placeholder="Security Code" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group form-group-2-col">
                                <div class="form-group-row">
                                    <div class="form-group-col">
                                        <label for="zipCode" class="d-block text-muted text-left hidden-sm-up">ZIP /
                                            Postal Code</label>
                                        <input class="form-control" id="zipCode" placeholder="ZIP / Postal Code" value="ZIP / Postal Code"
                                            type="text">
                                    </div>
                                    <div class="form-group-col">
                                        <label class="d-block text-muted text-left hidden-sm-up">Country</label>
                                        <div class="btn-dropdown btn-dropdown-lg btn-dropdown-select">
                                            <div ngbDropdown class="country-select-dropdown">
                                                <button ngbDropdownToggle id="countryDropdownMenuButton" role="button">
                                                    Country
                                                </button>
                                                <div ngbDropdownMenu aria-labelledby="countryDropdownMenuButton">
                                                    <a class="dropdown-item text-muted"><em>Country</em></a>
                                                    <a class="dropdown-item text-muted"><em>Afghanistan</em></a>
                                                    <a class="dropdown-item text-muted"><em>Belgium</em></a>
                                                    <a class="dropdown-item text-muted"><em>Canada</em></a>
                                                    <a class="dropdown-item text-muted"><em>Denmark</em></a>
                                                    <a class="dropdown-item text-muted"><em>Egypt</em></a>
                                                    <a class="dropdown-item text-muted"><em>France</em></a>
                                                    <a class="dropdown-item text-muted"><em>Germany</em></a>
                                                    <a class="dropdown-item text-muted"><em>Ireland</em></a>
                                                    <a class="dropdown-item text-muted"><em>USA</em></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-step-card mt-4 mt-sm-5">
                            <h3 class="form-step-card-title text-dark mb-3"><strong>Promo Code</strong></h3>
                            <div class="form-group position-relative type-code-holder">
                                <label for="promoCode" class="d-block text-muted text-left hidden-sm-up">Promo
                                    Code</label>
                                <input class="form-control" id="promoCode" placeholder="Type Your Code" type="text">
                                <button class="btn code-apply-btn" role="button" disabled>Apply</button>
                            </div>
                        </div>
                        <div class="form-group text-center mt-3 mt-sm-4 mb-0">
                            <button class="btn btn-lg btn-secondary billing-submit-btn" type="submit" role="button">
                                Submit
                            </button>
                        </div>

                        <div class="text-holder mt-2 text-center"><a>Cancel</a></div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template><!-- /.Billing Information Modal ends -->

<!-- Add new payment method Modal -->
<ng-template #newPaymentMethodContent let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h3 class="modal-title w-100 text-dark" id="addPaymentMethodModalLabel"><strong translate="settings.add_new_method">Add
                payment method</strong></h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body bg-faded">
        <div class="form-content-holder">
            <div class="form-group">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" translate="settings.type">Type:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="btn-dropdown btn-dropdown-select">
                            <div ngbDropdown class="dropdown-sm">
                                <button ngbDropdownToggle id="paymentTypeDropdownMenuButton" role="button">credit card
                                </button>
                                <div ngbDropdownMenu aria-labelledby="paymentTypeDropdownMenuButton">
                                    <a class="dropdown-item">credit card</a>
                                    <a class="dropdown-item">debit card</a>
                                    <a class="dropdown-item">credit card</a>
                                    <a class="dropdown-item">debit card</a>
                                    <a class="dropdown-item">credit card</a>
                                    <a class="dropdown-item">debit card</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="nameoncardField" translate="settings.donate.name_on_card">Name
                            on card:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="nameoncardField" type="text" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="cardNumberField" translate="settings.donate.card_number">Card
                            number:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="cardNumberField" placeholder="0000-0000-0000-0000"
                                type="text" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="blacklistName" translate="settings.donate.expiry_date">Expiry
                            date:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="row row-xs-sm align-items-center">
                            <div class="col-sm-6 mb-3 mb-sm-0">
                                <div class="btn-dropdown btn-dropdown-select">
                                    <div ngbDropdown class="dropdown-sm">
                                        <button ngbDropdownToggle id="expiryMonthDropdownMenuButton" role="button">01
                                        </button>
                                        <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="expiryMonthDropdownMenuButton">
                                            <a class="dropdown-item">01</a>
                                            <a class="dropdown-item">02</a>
                                            <a class="dropdown-item">03</a>
                                            <a class="dropdown-item">04</a>
                                            <a class="dropdown-item">05</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="btn-dropdown btn-dropdown-select">
                                    <div ngbDropdown class="dropdown-sm">
                                        <button ngbDropdownToggle id="expiryYearDropdownMenuButton" role="button">2018
                                        </button>
                                        <div ngbDropdownMenu aria-labelledby="expiryYearDropdownMenuButton">
                                            <a class="dropdown-item">2018</a>
                                            <a class="dropdown-item">2017</a>
                                            <a class="dropdown-item">2016</a>
                                            <a class="dropdown-item">2015</a>
                                            <a class="dropdown-item">2014</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group mb-0">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="securityCardField" translate="settings.donate.security_code">Security
                            code:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <div class="row row-xs-sm align-items-center">
                                <div class="col-sm-6">
                                    <div class="form-field-has-icon position-relative">
                                        <input class="form-control form-control-sm" id="securityCardField" placeholder=""
                                            type="text" />
                                        <i class="icon icon-warning"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="modal-footer justify-content-center justify-content-sm-end">
        <a class="btn btn-secondary btn-sm" role="button" translate="settings.add">Add</a>
    </div>
</ng-template><!-- /.Add new payment method Modal ends -->

<!-- Make a donation Modal -->
<ng-template #makeDonationContent let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h3 class="modal-title w-100 text-dark" id="makeDonationModalLabel"><strong translate="settings.donate.make_a_donation">Make
                a donation</strong></h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body bg-faded">
        <div class="form-content-holder">
            <div class="form-group">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" translate="settings.donate.select_amount">Select amount:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="btn-dropdown btn-dropdown-select">
                            <div ngbDropdown class="dropdown-sm">
                                <button ngbDropdownToggle id="paymentTypeDropdownMenuButton" role="button">10$</button>
                                <div ngbDropdownMenu aria-labelledby="paymentTypeDropdownMenuButton">
                                    <a class="dropdown-item">10$</a>
                                    <a class="dropdown-item">10$</a>
                                    <a class="dropdown-item">10$</a>
                                    <a class="dropdown-item">10$</a>
                                    <a class="dropdown-item">10$</a>
                                    <a class="dropdown-item">10$</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="nameoncardField" translate="settings.donate.name_on_card">Name
                            on card:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="nameoncardField" type="text" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="cardNumberField" translate="settings.donate.card_number">Card
                            number:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <input class="form-control form-control-sm" id="cardNumberField" placeholder="0000-0000-0000-0000"
                                type="text" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group form-group-sm">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="blacklistName" translate="settings.donate.expiry_date">Expiry
                            date:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="row row-xs-sm align-items-center">
                            <div class="col-sm-6 mb-3 mb-sm-0">
                                <div class="btn-dropdown btn-dropdown-select">
                                    <div ngbDropdown class="dropdown-sm">
                                        <button ngbDropdownToggle id="expiryMonthDropdownMenuButton2" role="button">01
                                        </button>
                                        <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="expiryMonthDropdownMenuButton">
                                            <a class="dropdown-item">01</a>
                                            <a class="dropdown-item">02</a>
                                            <a class="dropdown-item">03</a>
                                            <a class="dropdown-item">04</a>
                                            <a class="dropdown-item">05</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="btn-dropdown btn-dropdown-select">
                                    <div ngbDropdown class="dropdown-sm">
                                        <button ngbDropdownToggle id="expiryYearDropdownMenuButton" role="button">2018
                                        </button>
                                        <div ngbDropdownMenu aria-labelledby="expiryYearDropdownMenuButton">
                                            <a class="dropdown-item">2018</a>
                                            <a class="dropdown-item">2017</a>
                                            <a class="dropdown-item">2016</a>
                                            <a class="dropdown-item">2015</a>
                                            <a class="dropdown-item">2014</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group mb-0">
                <div class="row align-items-center">
                    <div class="col-sm-3">
                        <label class="form-label mb-sm-0" for="securityCardField" translate="settings.donate.security_code">Security
                            code:</label>
                    </div>
                    <div class="col-sm-9">
                        <div class="form-content-row mb-0">
                            <div class="row row-xs-sm align-items-center">
                                <div class="col-sm-6">
                                    <div class="form-field-has-icon position-relative">
                                        <input class="form-control form-control-sm" id="securityCardField" placeholder=""
                                            type="text" />
                                        <i class="icon icon-warning"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="modal-footer justify-content-center justify-content-sm-end">
        <a class="btn btn-secondary btn-sm" role="button" translate="settings.add">Add</a>
    </div>
</ng-template><!-- /.Make a donation Modal ends -->