{"version":3,"sources":["webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///(webpack)/buildin/global.js","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/footer/footer.component.ts","webpack:///src/app/footer/footer.component.html","webpack:///src/app/footer/footer.module.ts","webpack:///src/app/header/header.component.html","webpack:///src/app/header/header.component.ts","webpack:///src/app/header/header.module.ts","webpack:///src/app/mail/dialogs/create-folder/create-folder.component.html","webpack:///src/app/mail/dialogs/create-folder/create-folder.component.ts","webpack:///src/app/mail/dialogs/import-private-key/import-private-key.component.html","webpack:///src/app/mail/dialogs/import-private-key/import-private-key.component.ts","webpack:///src/app/mail/dialogs/payment-failure-notice/payment-failure-notice.component.ts","webpack:///src/app/mail/dialogs/payment-failure-notice/payment-failure-notice.component.html","webpack:///src/app/mail/mail-contact/mail-contact.component.html","webpack:///src/app/mail/mail-contact/mail-contact.component.ts","webpack:///src/app/mail/mail-contact/save-contact/save-contact.component.html","webpack:///src/app/mail/mail-contact/save-contact/save-contact.component.ts","webpack:///src/app/mail/mail-detail/mail-detail-decryption-error/mail-detail-decryption-error.component.ts","webpack:///src/app/mail/mail-detail/mail-detail-decryption-error/mail-detail-decryption-error.component.html","webpack:///src/app/mail/mail-detail/mail-detail-encryption-type-icon/mail-detail-encryption-type-icon.component.ts","webpack:///src/app/mail/mail-detail/mail-detail-encryption-type-icon/mail-detail-encryption-type-icon.component.html","webpack:///src/app/mail/mail-detail/mail-detail.component.html","webpack:///src/app/mail/mail-detail/mail-detail.component.ts","webpack:///src/app/mail/mail-footer/mail-footer.component.html","webpack:///src/app/mail/mail-footer/mail-footer.component.ts","webpack:///src/app/mail/mail-header/mail-header.component.html","webpack:///src/app/mail/mail-header/mail-header.component.ts","webpack:///src/app/mail/mail-list/mail-folder/generic-folder/generic-folder.component.html","webpack:///src/app/mail/mail-list/mail-folder/generic-folder/generic-folder.component.ts","webpack:///src/app/mail/mail-list/mail-list.component.html","webpack:///src/app/mail/mail-list/mail-list.component.ts","webpack:///src/app/mail/mail-routing.module.ts","webpack:///src/app/mail/mail-settings/addresses-signature/addresses-signature.component.html","webpack:///src/app/mail/mail-settings/addresses-signature/addresses-signature.component.ts","webpack:///src/app/mail/mail-settings/custom-domains/custom-domains.component.html","webpack:///src/app/mail/mail-settings/custom-domains/custom-domains.component.ts","webpack:///src/app/mail/mail-settings/folders/folders.component.html","webpack:///src/app/mail/mail-settings/folders/folders.component.ts","webpack:///src/app/mail/mail-settings/invite-codes/invite-codes.component.html","webpack:///src/app/mail/mail-settings/invite-codes/invite-codes.component.ts","webpack:///src/app/mail/mail-settings/mail-autoresponder/mail-autoresponder.component.html","webpack:///src/app/mail/mail-settings/mail-autoresponder/mail-autoresponder.component.ts","webpack:///src/app/mail/mail-settings/mail-filters/mail-filters.component.html","webpack:///src/app/mail/mail-settings/mail-filters/mail-filters.component.ts","webpack:///src/app/mail/mail-settings/mail-forwarding/mail-forwarding.component.html","webpack:///src/app/mail/mail-settings/mail-forwarding/mail-forwarding.component.ts","webpack:///src/app/mail/mail-settings/mail-settings.component.html","webpack:///src/app/mail/mail-settings/mail-settings.component.ts","webpack:///src/app/mail/mail-settings/organization/organization-users/organization-users.component.html","webpack:///src/app/mail/mail-settings/organization/organization-users/organization-users.component.ts","webpack:///src/app/mail/mail-settings/save-list-contact/save-list-contact.component.html","webpack:///src/app/mail/mail-settings/save-list-contact/save-list-contact.component.ts","webpack:///src/app/mail/mail-settings/security/security.component.html","webpack:///src/app/mail/mail-settings/security/security.component.ts","webpack:///src/app/mail/mail-sidebar/compose-mail-dialog/compose-mail-dialog.component.html","webpack:///src/app/mail/mail-sidebar/compose-mail-dialog/compose-mail-dialog.component.ts","webpack:///src/app/mail/mail-sidebar/compose-mail/compose-mail.component.html","webpack:///src/app/mail/mail-sidebar/compose-mail/compose-mail.component.ts","webpack:///src/app/mail/mail-sidebar/compose-mail/composer-encryption-type-icon/composer-encryption-type-icon.component.ts","webpack:///src/app/mail/mail-sidebar/compose-mail/composer-encryption-type-icon/composer-encryption-type-icon.component.html","webpack:///src/app/mail/mail-sidebar/compose-mail/receiver-email-chip/receiver-email-chip.component.ts","webpack:///src/app/mail/mail-sidebar/compose-mail/receiver-email-chip/receiver-email-chip.component.html","webpack:///src/app/mail/mail-sidebar/mail-sidebar.component.html","webpack:///src/app/mail/mail-sidebar/mail-sidebar.component.ts","webpack:///src/app/mail/mail.component.html","webpack:///src/app/mail/mail.component.ts","webpack:///src/app/mail/mail.module.ts","webpack:///src/app/pages/pages-donate/pages-donate.component.ts","webpack:///src/app/pages/pages-donate/pages-donate.component.html","webpack:///src/app/pages/pages-donate/payment-options/payment-options.component.ts","webpack:///src/app/pages/pages-donate/payment-options/payment-options.component.html","webpack:///src/app/pages/pages-routing.module.ts","webpack:///src/app/pages/pages.module.ts","webpack:///src/app/shared/circle-bar-spinner/circle-bar-spinner.component.ts","webpack:///src/app/shared/circle-bar-spinner/circle-bar-spinner.component.html","webpack:///src/app/shared/components/bitcoin-form/bitcoin-form.component.ts","webpack:///src/app/shared/components/bitcoin-form/bitcoin-form.component.html","webpack:///src/app/shared/components/countdown-timer/countdown-timer.component.ts","webpack:///src/app/shared/components/countdown-timer/countdown-timer.component.html","webpack:///src/app/shared/components/pricing-plans/pricing-plans.component.ts","webpack:///src/app/shared/components/pricing-plans/pricing-plans.component.html","webpack:///src/app/shared/components/stripe-form/stripe-form.component.ts","webpack:///src/app/shared/components/stripe-form/stripe-form.component.html","webpack:///src/app/shared/components/users-billing-info/users-billing-info.component.html","webpack:///src/app/shared/components/users-billing-info/users-billing-info.component.ts","webpack:///src/app/shared/config.ts","webpack:///src/app/shared/directives/click-outside.directive.ts","webpack:///src/app/shared/directives/is-ie.directive.ts","webpack:///src/app/shared/loading-spinner/loading-spinner.component.ts","webpack:///src/app/shared/loading-spinner/loading-spinner.component.html","webpack:///src/app/shared/loading/loading.component.ts","webpack:///src/app/shared/loading/loading.component.html","webpack:///src/app/shared/pipes/creditcard-number.pipe.ts","webpack:///src/app/shared/pipes/email-formatting.pipe.ts","webpack:///src/app/shared/pipes/filename.pipe.ts","webpack:///src/app/shared/pipes/filesize.pipe.ts","webpack:///src/app/shared/pipes/last-action.pipe.ts","webpack:///src/app/shared/pipes/moment-date.pipe.ts","webpack:///src/app/shared/pipes/remaining-time.pipe.ts","webpack:///src/app/shared/pipes/replace-linebreak-brtag.pipe.ts","webpack:///src/app/shared/pipes/safe.pipe.ts","webpack:///src/app/shared/progress-bar/progress-bar.component.ts","webpack:///src/app/shared/progress-bar/progress-bar.component.html","webpack:///src/app/shared/services/browser-detector.service.ts","webpack:///src/app/shared/services/dynamic-script-loader.service.ts","webpack:///src/app/shared/services/logger.service.ts","webpack:///src/app/shared/services/push-notification.service.ts","webpack:///src/app/shared/services/theme-toggle-service.ts","webpack:///src/app/shared/services/websocket.service.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/spinner-image/spinner-image.component.ts","webpack:///src/app/shared/spinner-image/spinner-image.component.html","webpack:///src/app/shared/spinner/components/spinner.component.ts","webpack:///src/app/shared/spinner/components/spinner.component.html","webpack:///src/app/shared/spinner/services/spinner.service.ts","webpack:///src/app/shared/validators/no-whitespace.validator.ts","webpack:///src/app/store/actions/auth.action.ts","webpack:///src/app/store/actions/bitcoin.action.ts","webpack:///src/app/store/actions/compose-mail.actions.ts","webpack:///src/app/store/actions/contacts.action.ts","webpack:///src/app/store/actions/donate.actions.ts","webpack:///src/app/store/actions/index.ts","webpack:///src/app/store/actions/keyboard.action.ts","webpack:///src/app/store/actions/loading.action.ts","webpack:///src/app/store/actions/mail.actions.ts","webpack:///src/app/store/actions/router.action.ts","webpack:///src/app/store/actions/search.action.ts","webpack:///src/app/store/actions/secure-message.actions.ts","webpack:///src/app/store/actions/timezone.action.ts","webpack:///src/app/store/actions/users.action.ts","webpack:///src/app/store/datatypes.ts","webpack:///src/app/store/effects/auth.effects.ts","webpack:///src/app/store/effects/bitcoin.effects.ts","webpack:///src/app/store/effects/compose-mail.effects.ts","webpack:///src/app/store/effects/contacts.effects.ts","webpack:///src/app/store/effects/donate.effects.ts","webpack:///src/app/store/effects/index.ts","webpack:///src/app/store/effects/mail.effects.ts","webpack:///src/app/store/effects/mailbox.effects.ts","webpack:///src/app/store/effects/router.effect.ts","webpack:///src/app/store/effects/secure-message.effects.ts","webpack:///src/app/store/effects/timezone.effects.ts","webpack:///src/app/store/effects/users.effects.ts","webpack:///src/app/store/index.ts","webpack:///src/app/store/models/filter.model.ts","webpack:///src/app/store/models/index.ts","webpack:///src/app/store/models/mail.model.ts","webpack:///src/app/store/models/users.model.ts","webpack:///src/app/store/organization.store.ts","webpack:///src/app/store/quotes.ts","webpack:///src/app/store/reducers/auth.reducers.ts","webpack:///src/app/store/reducers/bitcoin.reducers.ts","webpack:///src/app/store/reducers/compose-mail.reducers.ts","webpack:///src/app/store/reducers/contacts.reducers.ts","webpack:///src/app/store/reducers/index.ts","webpack:///src/app/store/reducers/keyboard.reducers.ts","webpack:///src/app/store/reducers/loading.reducers.ts","webpack:///src/app/store/reducers/mail.reducers.ts","webpack:///src/app/store/reducers/mailboxes.reducers.ts","webpack:///src/app/store/reducers/search.reducers.ts","webpack:///src/app/store/reducers/secure-message.reducers.ts","webpack:///src/app/store/reducers/timezone.reducer.ts","webpack:///src/app/store/reducers/users.reducers.ts","webpack:///src/app/store/selectors/index.ts","webpack:///src/app/store/services/auth.guard.ts","webpack:///src/app/store/services/autocrypt.process.service.ts","webpack:///src/app/store/services/bitcoin.service.ts","webpack:///src/app/store/services/breakpoint.service.ts","webpack:///src/app/store/services/cancel.request.interceptor.ts","webpack:///src/app/store/services/cancel.request.service.ts","webpack:///src/app/store/services/compose-mail.service.ts","webpack:///src/app/store/services/datetime-util.service.ts","webpack:///src/app/store/services/donation.service.ts","webpack:///src/app/store/services/index.ts","webpack:///src/app/store/services/mail-settings.service.ts","webpack:///src/app/store/services/mail.service.ts","webpack:///src/app/store/services/message.builder.service.ts","webpack:///src/app/store/services/message.decrypt.service.ts","webpack:///src/app/store/services/notification.service.ts","webpack:///src/app/store/services/openpgp.service.ts","webpack:///src/app/store/services/shared.service.ts","webpack:///src/app/store/services/timezone.service.ts","webpack:///src/app/store/services/token.interceptor.ts","webpack:///src/app/store/services/users.service.ts","webpack:///src/app/store/store.module.ts","webpack:///src/app/store/websocket.store.ts","webpack:///src/app/users/decrypt/decrypt-message.component.html","webpack:///src/app/users/decrypt/decrypt-message.component.ts","webpack:///src/app/users/dialogs/display-name-dialog/display-name-dialog.component.html","webpack:///src/app/users/dialogs/display-name-dialog/display-name-dialog.component.ts","webpack:///src/app/users/dialogs/use-cache-dialog/use-cache-dialog.component.ts","webpack:///src/app/users/dialogs/use-cache-dialog/use-cache-dialog.component.html","webpack:///src/app/users/dialogs/user-account-init-dialog/user-account-init-dialog.component.html","webpack:///src/app/users/dialogs/user-account-init-dialog/user-account-init-dialog.component.ts","webpack:///src/app/users/display-secure-message/display-secure-message.component.ts","webpack:///src/app/users/display-secure-message/display-secure-message.component.html","webpack:///src/app/users/reply-secure-message/reply-secure-message.component.html","webpack:///src/app/users/reply-secure-message/reply-secure-message.component.ts","webpack:///src/app/users/users-create-account/users-create-account.component.html","webpack:///src/app/users/users-create-account/users-create-account.component.ts","webpack:///src/app/users/users-routing.module.ts","webpack:///src/app/users/users-sign-in/users-sign-in.component.html","webpack:///src/app/users/users-sign-in/users-sign-in.component.ts","webpack:///src/app/users/users-sign-up/users-sign-up.component.ts","webpack:///src/app/users/users-sign-up/users-sign-up.component.html","webpack:///src/app/users/users.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///util (ignored)?913b","webpack:///buffer (ignored)?5791","webpack:///buffer (ignored)?2388","webpack:///buffer (ignored)","webpack:///buffer (ignored)?1198","webpack:///buffer (ignored)?2a28","webpack:///buffer (ignored)?9b21","webpack:///readable-stream (ignored)","webpack:///util (ignored)?27e0","webpack:///util (ignored)","webpack:///util (ignored)?752d","webpack:///buffer (ignored)?52be","webpack:///buffer (ignored)?1934","webpack:///crypto (ignored)","webpack:///util (ignored)?901d","webpack:///util (ignored)?52f1"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","webpackContextKeys","Object","resolve","module","exports","g","Function","window","webpackEmptyAsyncContext","Promise","then","AppComponent","router","sharedService","activatedRoute","store","translate","hideFooter","hideHeader","windowIsResized","isLoading","isMail","cookieEnabled","dispatch","loadingState","subscribe","data","setDefaultLang","setTimeout","updateLoadingStatus","queryParams","pipe","parameters","referral_code","localStorage","setItem","refferalId","toUpperCase","promoCode","checkCookie","quote","Math","floor","length","select","state","auth","authState","isAuthenticated","loading","Loading","cookieLawEl","dismiss","navigator","document","cookie","indexOf","selector","templateUrl","styleUrls","HttpLoaderFactory","http","SentryErrorHandler","error","originalError","providedIn","AppModule","provide","useClass","multi","forRoot","loader","useFactory","deps","declarations","imports","providers","bootstrap","FooterComponent","primaryWebsite","FooterModule","HeaderComponent","usersService","navIsFixed","menuIsOpened","externalPageCallToAction","selectedLanguage","name","locale","languages","isExternalPage","isLoggedIn","getUserKey","lang","use","bool","number","scrollY","documentElement","scrollTop","body","getElementById","offsetHeight","toggleState","closeMenu","changeDetection","OnPush","HeaderModule","CreateFolderComponent","fb","activeModal","folder","color","edit","folderColors","selectedColorIndex","customFolderForm","group","folderName","required","maxLength","user","userState","inProgress","callback","self","method","value","close","get","valueChanges","checkFolderExist","submitted","invalid","customFolder","customFolders","filter","toLowerCase","duplicateFoldername","onHide","onSubmit","ImportPrivateKeyStep","ImportPrivateKeyComponent","openpgp","cdr","mailboxes","currentStep","SELECT_MAILBOX","decryptError","mailboxKeyInProgress$","mailboxKeyFailure$","selectedMailbox","mailBoxesState","mailboxKeyInProgress","mailboxKeyFailure","next","mailboxKeysMap","files","file","currentFile","assign","reader","FileReader","addEventListener","event","currentFileContent","target","result","validatePrivateKey","fingerprint","has","find","key","message","undefined","detectChanges","readAsText","keyData","mailbox","keyType","algorithmInfo","bits","curve","key_type","password","getHashPurePasswordWithUserName","passphrase","decryptPrivateKey","encryptPrivateKey","uploadImportedKey","INPUT_PRIVATE_KEY_PASSWORD","parsePrivateKey","INPUT_USER_PASSWORD","encryptWithCurrentPassword","inputID","input","type","onNext","PaymentFailureNoticeComponent","navigateByUrl","updatePayment","$event","preventDefault","ContactsProviderType","MailContactComponent","modalService","breakpointsService","composeMailService","translateService","config","contactsProviderType","selectedContacts","isLayoutSplitted","checkAll","notifyContactsMail","MAX_EMAIL_PAGE_LIMIT","LIMIT","OFFSET","PAGE","autoClose","updateUsersStatus","searchText","search","limit","offset","q","isMobile","innerWidth","currentPlan","settings","plan_type","FREE","contacts","contactsState","totalContacts","contactsCount","currentMailbox","isSM","isXS","isMenuOpened","classList","remove","contains","isNewContact","selectedContact","addUserContent","open","centered","windowClass","beforeDismiss","contact","addUserContactModalOpen","initSplitContactLayout","selectAll","markForDelete","item","modalReference","confirmModalRef","status","toggleSelectAll","deleteContacts","join","receiverEmails","email","openComposeMailDialog","receivers","isFullScreen","is_composer_full_screen","forEach","selectedContactsProvider","importContactsError","importContactsModalRef","importContactsModal","notifyContactsModalRef","display_name","sender","receiver","notifyContactsModal","provider","closeImportContactsModal","toggleMenu","editContact","openNotifyContactsModal","showComposeMailDialog","openConfirmDeleteModal","openImportContactsModal","destroySplitContactLayout","Document","SaveContactComponent","userSaved","newContactModel","address","note","phone","enabled_encryption","advancedSettingInProgress","isUpdatedPrimaryKey","isImportingKey","keyMatchStatusForEmail","downloadUrls","selectedContactPulbicKeys","handleUserState","contactEmail","emailDomain","substring","internalUser","isContactsEncrypted","is_contacts_encrypted","isError","advancedSettingsModalRef","emit","selectedContactKeys","parsed_emails","includes","btoa","public_key","isCheckForm","newContactForm","toLocaleLowerCase","encryptContact","advancedSettingsModal","backdrop","isEncrypt","encryption_type","PGP_MIME","scheme","PGP_INLINE","getKeyInfoFromPublicKey","keyInfo","newKeyInfo","getMailboxKeyModelFromParsedInfo","is_primary","makeCallForAddKeys","mailboxKey","emails","remainedKeys","originKey","prefer_encrypt","NOPREFERENCE","createNewContact","MUTUAL","MailDetailDecryptionErrorComponent","MailDetailEncryptionTypeIconComponent","mail","lastAction","last_action","encryption","password_hint","encryptionType","PGP_PASSWORD","PGP_MIME_INLINE","PGP_END_TO_END","externalLinkConfirmModalRef","MailDetailComponent","route","pgpService","shareService","dateTimeUtilService","mailService","messageDecryptService","composeMailData","mailFolderTypes","decryptedContents","decryptedContentsPlain","decryptedAttachments","decryptedHeaders","isDecryptingError","mailOptions","isDecrypting","externalLinkChecked","loadingImage","showRawContent","xssPipe","hasDraft","plainTextViewState","isPasswordEncrypted","mailExpandedStatus","errorMessageForDecryptingWithPassword","canScroll","mails","shouldChangeMail","isShowTrashRelatedChildren","isSecureMessage","isContainTrashRelatedChildren","properFolderLastChildIndex","hasExternalImages","webSocket","webSocketState","isClosed","parent_id","read","markAsRead","mailState","loaded","changeMail","mailDetail","noUnreadCountChange","is_subject_encrypted","scrambleText","has_children","children","decryptedContent","OUTBOX","is_encrypted","content","decryptMessage","decrypt","is_html","replace","content_plain","confirmExternalLinks","subject","parseHeaders","incomingHeaders","handleEmailLinks","scrollTo","querySelector","markedAsRead","child","filteredChildren","mailFolder","TRASH","lastFilteredChild","decryptChildEmails","backupChildDecryptedContent","mailDetailLoaded","progressBar","total_mail_count","currentMailIndex","findIndex","currentMailNumber","EMAILS_PER_PAGE","page","SEARCH","draft_children","params","disableMoveTo","DRAFT","getMailDetail","isDarkMode","is_night_mode","isConversationView","is_conversation_mode","emails_per_page","disableExternalImages","is_disable_loading_images","includeOriginMessage","include_original_message","forceLightMode","lightMode","emailContacts","decryptPasswordEncryptedContent","exLinks","querySelectorAll","i","innerHTML","getAttribute","externalLinkConfirmModal","link","createElement","href","rel","click","elementId","Scrambler","random","speed","text","index","forceReload","anchorElements","hasOwnProperty","split","win","location","focus","starred","some","showGmailExtraContent","childDecryptedContent","headers","JSON","parse","headersArray","header","push","messageId","attachments","decryptAttachment","attachment","downloadAttachment","getAttachment","response","tranformToFilename","fileInfo","file_type","decryptedAttachment","errorResponse","downloadFile","decryptedDocument","withChildren","ids","mailID","toString","goBack","selectedHeaders","incomingHeadersModal","isChildMail","mainReply","action_parent_id","previousMails","getPreviousMail","allRecipients","Set","cc","bcc","parentId","parent","getMessageHistory","reply_to","lastSender","lastReceiver","selectedMailToInclude","action","REPLY","setActionParent","includeAttachmentsModalRef","includeAttachmentsModal","confirmIncludeAttachments","Array","isArray","REPLY_ALL","shouldInclude","forwardAttachmentsMessageId","isComposeMailVisible","getForwardMessageSummary","FORWARD","selectedMailToForward","forwardAttachmentsModalRef","forwardAttachmentsModal","confirmForwardAttachments","shouldForward","parent_only","goBackAfterDelete","sourceFolder","allowUndo","onDeleteCollapseMail","excepted_children","isMailDetailPage","SPAM","INBOX","stopPropagation","has_starred_children","fromTrash","delayed_delivery","updatedMail","draft","wait","openCreateFolderDialog","isPrime","popupWin","from","to","date","hasCC","write","elementReference","scrollIntoView","behavior","isForwarding","previousMail","history","getMessageSummary","formattedDateTime","sent_at","formatDateTimeStr","created_at","transformToFormattedEmail","sender_display","receiver_display","onDelete","MailFooterComponent","searchInput","MailHeaderComponent","httpCancelService","searchPlaceholder","language","setSearchPlaceholder","url","events","searchState","setValue","emitEvent","emitModelToViewChange","emitViewToModelChange","isContactsPage","navigate","add","cancelPendingRequests","logoutModal","logout","GenericFolderComponent","authService","noEmailSelected","MAX_DECRYPT_NUMBER","queueForDecryptSubject","isEnabledToDecryptSubject","isDeleteDraftClicked","showProgress","fetchMails","getMailReceiverList","isMailsMoved","refresh","setIsSelectAll","is_subject_auto_decrypt","decryptAllSubjects","isSomeEmailsSelected","isInitialized","isNeedFetchMails","paramMap","parametersMap","charAt","slice","removeEventListener","onBeforeLoader","receiver_list","nameToCombine","markAllMails","marked","count","isRead","getMailIDs","getMarkedMails","starred_mails","moveToFolder","decryptingMail","isExistMatchMail","processDecryptSubject","queuedMail","mailId","mailToDecrypt","confirmEmptyTrashModalRef","confirmEmptyTrashModal","delateDraftModalRef","delateDraftModal","isExist","allString","markedMails","curFolderMap","folderMap","is_not_first_page","is_dirty","isTooltip","info","sender_display_name","SENT","send","markReadMails","markUnreadMails","markStarredMails","markUnstarredMails","moveToTrash","MailListComponent","routes","path","component","canActivate","redirectTo","pathMatch","MailRoutingModule","forChild","register","AddKeyStep","AddressesSignatureComponent","formBuilder","openPgpService","settingsService","newAddressOptions","reorderInProgress","signatureChanged","quillModules","aliasKeyExpandedStatus","isGeneratingKeys","Map","currentAddKeyStep","mailboxesState","isUpdatingOrder","reorder","isBusy","onDiscardNewAddress","fill","currentMailBox","selectedMailboxForSignature","selectedMailboxForKey","onSelectedMailboxForKeyChanged","addNewKeyModalRef","userPassword","deleteKeyConfirmModalRef","setPrimaryKeyConfirmModalRef","setAutocryptConfirmModalRef","customDomains","is_domain_verified","is_mx_verified","domain","newAddressForm","username","pattern","minLength","updateMailboxSettings","handleUsernameAvailability","customDomain","reset","isCustomDomainSelected","setValidators","updateValueAndValidity","isAddingNew","isSubmitted","newUserName","controls","valid","usernameExists","currentDomain","generateUserKeys","atob","getUserKeys","addNewAddress","waitForPGPKeys","requestData","getEmail","selectedMailboxPublicKey","selectedMailboxPrivateKey","private_key","isQuillEditorOpen","processSanitization","sortOrder","sort_order","sort","a","b","unmodifiedMailboxes","x","payload","mailbox_list","mailbox_id","errors","checkUsernameAvailability","exists","updateSettings","pickedMailboxKeyForUpdate","pickedMailboxForUpdate","downloadKeyModalRef","downloadKeyModal","deleteKeyConfirmString","deleteKeyConfirmModal","setPrimaryKeyConfirmModal","selectedMailboxForAutocrypt","setAutocryptConfirmModal","isAutocrypt","is_autocrypt_enabled","selectedMailboxForAddNewKey","selectedKeyTypeForAddNewKey","ECC","addNewKeyModal","onGenerateKeys","generateUserKeysWithEmail","keyDataKeydata","RSA_4096","options","componentInstance","onAddNewKey","onImportKey","CustomDomainsComponent","onGotoTab","domains","isAddingNewDomain","mailboxesForCustomDomains","newDomain","newCustomDomain","newDomainError","newCustomDomainError","currentCreationStep","prepareMapForDomainAlias","domainNameForm","domainNameCtrl","verifyForm","mxForm","spfForm","dkimForm","dmarcForm","aliases","indexDomain","aliasesForDomain","alias","domainForAlias","is_enabled","catch_all_email","set","isEditing","copyToClipboard","gotoNextStep","reverify","updateDomain","confirmDeleteModal","FoldersComponent","notificationService","folders","sortedWithAlphabetic","mergeById","a1","a2","itm","customFolderMessageCount","confirmationModal","selectedFolder","unmodifiedFolders","folder_list","folder_id","f","s","localeCompare","saveOrder","previousIndex","currentIndex","addFolder","onFolderDrop","InviteCodesComponent","inviteCodes","isLoaded","generateCode","MailAutoresponderComponent","autoresponder","startTime","hour","minute","second","endTime","initData","errorMessage","autoResponderErrorMessage","start_time","getNgbTimeStructFromTimeStr","end_time","startDate","start_date","getNgbDateStructFromDateStr","endDate","end_date","startDatePicker","navigateTo","endDatePicker","is_time_range_restricted","createTimeStrFromNgbTimeStruct","isBefore","vacationautoresponder_active","createDateStrFromNgbDateStruct","editorFocused","save","MailFiltersComponent","folderIcons","ARCHIVE","mailFolderType","filterCondition","filterParameter","inSetPriority","filters","customFilterModalRef","filtersError","createFilterForm","filterText","moveTo","markAsStarred","checkFilterExist","createFilterData","selectedFilter","hasDuplicateFilterName","filter_text","move_to","mark_as_read","mark_as_starred","customFilterModal","condition","parameter","deleteFilterModalRef","deleteFilterModal","priorityOrder","priority_order","unmodifiedFilters","filter_list","filter_id","onFilterDrop","MailForwardingComponent","isVerificationCodeSent","isForwardingVerificationCodeSent","emailForwardingErrorMessage","isCodeFormSubmitted","addAddressModalRef","emailForm","codeForm","showFormErrorMessages","addAddressModal","onAddAddress","forwarding_address","confirmDeleteAddressModalRef","confirmDeleteAddressModal","enable_forwarding","enable_copy_forwarding","searchWhitelistInput","searchBlacklistInput","MailSettingsComponent","pushNotificationService","creditcardnumber","fonts","colors","sizes","defaultFontSize","backgrounds","autosaveDurations","planType","selectedIndex","cards","payment","paymentMethod","userPlanType","newListContact","show","searchWhitelistPlaceholder","searchBlacklistPlaceholder","deleteAccountOptions","autosave_duration","WhitelistItems","BlacklistItems","notificationPermissionType","selectedTabQueryParams","isAddNewCard","isCardUpdateMode","timeZoneFilter","initAutoSaving","notificationsPermission","Notification","permission","loadPricingPlans","whiteList","blackList","notificationEmail","notification_email","timezone","payment_transaction","invoices","PRICING_PLANS","duration","Number","newDuration","timezonesState","timezones","deleteAccountInfoForm","contact_email","timeZoneFilteredOptions","_filterTimeZone","currentSettingsTab","changeUrlParams","tabSet","option","isEditingRecoveryEmail","autosave_durations","perduration","autosave_duration_list","tabSelected","nextId","billingInfoModal","card","billingInfoContent","dsn","enabled","validateEmail","re","test","deleteAccountInfoModalRef","deleteAccountInfoModal","showErrors","confirmDeleteAccountModalRef","confirmDeleteAccountModal","requestPermission","element","scroll","icon","create","notif","notification","invoice","viewInvoice","print","invoiceItems","items","invoice_date","format","payment_method","description","quantity","amount","toFixed","invoiceData","invoice_id","payment_type","total_amount","storage","email_addresses","custom_domains","navigateToTab","onUpdateSettingsBtnClick","OrganizationUsersComponent","addUserForm","confirmPwd","recoveryEmail","validator","MatchPassword","organization","organizationState","users","isAddingUserInProgress","closeAddUserModal","isDeleteInProgress","cancelDelete","isAddingUser","addUserModalRef","addUserModal","addUserModalClosed","addNewUser","unmodifiedUser","selectedUser","confirmDeleteModalRef","userExistError","SaveListContactComponent","contactType","closed","contactForm","openModal","showSnackBar","modalRef","modalContent","showFormErrors","enable_2fa","SecurityComponent","showChangePasswordFormErrors","apiUrl","auth2FAForm","planTypeEnum","passwordChangeInProgress","auth2FA","changePasswordModalRef","isChangePasswordError","decryptAllPrivateKeys","changePasswordForm","clearData","oldPassword","isUsingLocalStorage","getItem","is_anti_phishing_enabled","anti_phishing_phrase","auth2FAModal","passcode","auth2FAStep","decryptContactsModalRef","decryptContactsModal","reason","isDecryptingContacts","confirmEncryptContactsModal","clearCount","decryptAllContacts","contactsToDecrypt","deleteData","changePasswordModal","changePassphrase","changePasswordConfirmed","updatedKeys","updatedPrivateKeys","new_keys","extra_keys","mailboxId","mailbox_key_id","old_password","confirm_password","delete_data","isUsing","openChangePasswordModal","openConfirmEncryptContactsModal","openDecryptContactsModal","updateUsingLocalStorage","updateAntiPhishing","ComposeMailDialogComponent","hide","minimize","fullScreen","mailSubject","appState","isPopupClosed","isComposerPopUp","composeMail","hasData","saveInDrafts","draftMail","discardEmail","closeCompose","hideMailComposeDialog","isMinimized","toggleMinimized","toggleFullScreen","onClose","subjectChanged","valueChanged$","Quill","BlockEmbed","keepHTML","node","blotName","className","FontAttributor","whitelist","SizeAttributor","updatedSizes","size","QuillBlockEmbed","Inline","Delta","ImageBlot","setAttribute","content_id","tagName","SignatureBlot","innerText","OriginalBlot","PasswordValidation","AC","confirmPassword","setErrors","ComposeMailComponent","filesizePipe","filenamePipe","autocryptService","showSaveButton","popUpChange","usersKeys","mailData","inputTextValue","ccInputTextValue","bccInputTextValue","selfDestruct","delayedDelivery","deadManTimer","isTrialPrimeFeaturesAvailable","isDownloadingAttachmentCounter","insertLinkData","mailAction","isPasted","ccIsPasted","bccIsPasted","isMailSent","isSavedInDraft","defaultLocale","attachmentsQueue","downloadingAttachments","inlineAttachmentContentIds","isSignatureAdded","encryptionData","loadContacts","isPreparingToSendEmail","pgpEncryptionType","receiverEncryptTypeMap","blacklist","clonedContacts","encryptForm","passwordHint","days","min","max","hours","resetMailData","initializeDraft","drafts","draftId","isProcessingAttachments","closeConfirmModalRef","encryptAttachment","handleAttachment","anaylizeUsersKeysWithContact","receiversToFetchKey","rec","isFetching","night_mode","is_html_disabled","display","loadEmailContacts","saveDraftOnLogout","updateEmail","updateSignature","addDecryptedContent","now","Date","datePickerMinDate","year","getFullYear","month","getMonth","day","getDate","isSelfDestructionEnable","initializeAutoSave","String","receiverInputRange","nativeElement","ccReceiverInputRange","bccReceiverInputRange","initializeComposeMail","editor","initializeQuillEditor","firstChild","getPlainText","html","textContent","is_inline","expiryHours","expiry_hours","progress","transform","attachmentId","performance","decryptAttachments","uint8Array","base64ToUint8Array","newDocument","File","buffer","byteOffset","byteLength","newAttachment","quill","modules","toolbar","clipboard","matchVisual","scrollingContainer","on","dangerouslyPasteHTML","formatContent","allowedTags","xssValue","onTag","tag","isClosing","htmlAttributes","reg","match","exec","trim","attributesHtml","attributeName","attributeValue","outputHtml","default_color","default_size","default_background","default_font","qlEditor","setSelection","updateContents","retain","getSelection","insert","insertLinkModal","autoSaveSubscription","isSaving","firstSaveSubscription","attachImagesModalRef","attachImagesModal","oldMailbox","FR","readAsDataURL","uploadAttachment","isInline","checkAttachmentSizeLimit","attachmentHolder","actual_size","attachmentLimitInMBs","attachment_size_limit","attachment_size_error","isUploadingAttachment","isRemoved","is_forwarded","embedImageInQuill","resetValues","closeConfirmationModal","removeAttachment","isSelfDestruction","getDomain","clearSelfDestructValue","regex","contents","getText","filtered","hyperLink","position","invalidAddress","isRFCStandardValidEmail","sendEmailCheck","addHyperLink","sendEmail","setMailData","shouldSave","shouldSend","signature","oldSig","newSig","container","RegExp","setText","getNgbDateTimeStructsFromDateTimeStr","resetSelfDestructValues","selfDestructModalRef","selfDestructModal","resetDelayedDeliveryValues","delayedDeliveryModalRef","delayedDeliveryModal","resetDeadManTimerValues","deadManTimerModalRef","deadManTimerModal","encryptionModalRef","encryptionModal","time","dateTimeString","createDateTimeStrFromNgbDateTimeStruct","selfDestructTimeString","isDateTimeInPast","closeSelfDestructModal","clearDelayedDeliveryValue","clearDeadManTimerValue","delayDeliverTimeString","closeDelayedDeliveryModal","isNaN","closeDeadManTimerModal","showEncryptFormErrors","closeEncryptionModal","getLength","source","contentId","selection","insertEmbed","encrypt","destruct_date","dead_man_duration","tokens","last_action_parent_id","action_parent","forward_attachments_of_message","checkInlineAttachments","isPGPInProgress","getContents","ops","currentAttachments","image","attachmentToRemove","unSubscribeAutoSave","unsubscribe","isCcVisible","isBccVisible","meridian","onFilesSelected","dataTransfer","parsedEmail","local","token","splice","receiversForKey","localReceivers","autocryptInfo","decideAutocryptDefaultEncryption","parseUserKey","isExistKey","isCTemplarKey","COMPOSER_ENCRYPTION_TYPE_END_TO_END","COMPOSER_ENCRYPTION_TYPE_PGP_MIME_INLINE","COMPOSER_ENCRYPTION_TYPE_NONE","senderAutocryptEnabled","isPGPInline","every","contactInfo","isPGPMime","setHtmlEditor","onAddingReceiver","onRemoveCc","ccUpdateInputTextValue","ccOnPaste","ccOnTagEdited","onCcClick","onRemoveBcc","bccUpdateInputTextValue","bccOnPaste","bccOnTagEdited","onBccClick","onSubjectChange","onFilesDrop","onImagesSelected","openEncryptionModal","ComposerEncryptionTypeIconComponent","changes","isAutocryptEncrypt","encryptTotally","COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT","recommendationValue","DISCOURAGE","COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT_DISCOURAGE","ENCRYPT","AVAILABLE","COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT","senderPreferEncrypt","COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_MUTUAL","COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NOPREERENCE","selectedEmail","encryptionTypeMap","ReceiverEmailChipComponent","composePopover","isMyMailbox","isValidEmail","isBlacklisted","isWhitelisted","myDisplayName","blacklistItem","whitelistItem","popOver","passingContact","whitelistedItem","blacklistedItem","isOpen","MailSidebarComponent","websocketService","titleService","themeToggleService","EMAIL_LIMIT","starredCount","isComposeVisible","isloading","nextPage","currentRoute","connect","total_count","is_from_socket","GRANTED","showNotification","updateUnreadCount","is_outbox_mail_sent","unread_count","currentFolder","marked_as_read","author","isDefault","handleCustomCss","custom_css","starredFolderCount","updateTitle","capitalize","forceLightModeTheme","title","unreadMailsCount","setTitle","customCss","totalItems","isMD","isSidebarOpened","selectedFolderForRemove","changeAsideExpand","createFolder","MailComponent","autoresponder_status","canLoadNotification","currentDate","isLoadedData","is_enable_report_bugs","autoresponder_active","vacationautoresponder_message","has_notification","notifications","notificationMessage","hideEntireFooter","getWindowWidth","initComposeMailContainer","composeMailContainer","destroyAllComposeMailDialogs","encapsulation","None","MailModule","entryComponents","PagesDonateComponent","dynamicScriptLoader","loadStripeScripts","load","PaymentOptionsComponent","PagesRoutingModule","PagesModule","CircleBarSpinnerComponent","BitcoinFormComponent","CountdownTimerComponent","finished","res","calculate","durationCopy","minutes","seconds","PricingPlansComponent","paymentType","ANNUALLY","availableStorage","availableEmailAddress","availableCustomDomain","pricingPlans","paymentTypeEnum","selectedPaymentType","MONTHLY","STRIPE","selectedCurrency","setPricingPlans","PRICING_PLANS_ARRAY","plan","selectedPlan","currency","openBillingInfoInModal","billingInfoModalRef","StripeFormComponent","_zone","donationService","stripePaymentValidation","param","expiryMonth","expiryYear","months","years","billingForm","cardNumber","checkStripeValidation","Stripe","validateCardNumber","validateExpiry","validateCVC","cvc","createToken","exp_month","exp_year","run","performStripeDonationTransaction","stripe_token","donationAmount","submitStripeForm","UsersBillingInfoComponent","closeBillingInfo","paymentMethodType","isUpgradeAccount","upgradeAmount","new_amount","signupState","snapshot","PRIME","billing","validatePromoCode","bitcoin","bitcoinState","is_valid","bitcoinRequired","new_amount_btc","checkTransactionResponse","RECEIVED","paymentSuccess","validateSignupData","timerObservable","timerReference","t","getUpgradeAmount","btcTimer","isScriptsLoading","isScriptsLoaded","stripeKeyLoaded","cardNumberFormControl","stripeSignup","is_renew","isRenew","getToken","bitcoinSignup","getSignupData","openAccountInitModal","newWalletAddress","from_address","userKeys","pgpKeyGenerationCompleted","promo_code","currentLocale","currentLang","pgpGenerationCompleted","forceLoad","BITCOIN","selectPaymentType","showPaymentPending","timer","createNewWallet","checkTransaction","MONERO","keyboard","removeStripeFromDOM","onCancel","IS_ELECTRON","protocol","getBaseUrl","PRIMARY_DOMAIN","production","PRIMARY_WEBSITE","SENTRY_DSN","COLORS","FOLDER_COLORS","LANGUAGES","ESCAPE_KEYCODE","MAX_FOLDERS_COUNT","VALID_EMAIL_REGEX","FONTS","COMPOSE_COLORS","SIZES","BACKGROUNDS","AUTOSAVE_DURATION","DEFAULT_FONT_SIZE","REFFERAL_CODE_KEY","PROMO_CODE_KEY","REFFERAL_ID_KEY","JWT_AUTH_COOKIE","REMEMBER_ME","SYNC_DATA_WITH_STORE","NOT_FIRST_LOGIN","SummarySeparator","QUILL_FORMATTING_MODULES","list","indent","direction","background","align","imageResize","getWindowConfig","host","hostname","getEmailDomain","ClickOutsideDirective","clickOutside","targetElement","clickedInside","IsIeDirective","templateReference","viewContainer","browserDetector","isIEBrowser","createEmbeddedView","clear","LoadingSpinnerComponent","optionalClasses","width","height","LoadingComponent","CreditCardNumberPipe","plainCreditCard","defaultCardNumberLength","padStart","EmailFormatPipe","displayName","isHtmlFormat","isTruncate","formattedEmail","getTrucatedString","MAX_LENGTH_EMAIL","FilenamePipe","arguments_","filePathTokens","FilesizePipe","units","bytes","preferredUnit","precision","parseFloat","isFinite","unit","LastActionPipe","MomentDatePipe","isSame","RemainingTimePipe","hoursOnly","getTimeRemainingFromHours","getTimeRemaining","getFormattedTime","end","diff","asSeconds","hrs","mnts","padLeft","LineBreakToBrTag","mailContent","SafePipe","sanitizer","fromEmail","removeTitle","cssFilter","onIgnoreAttr","styleName","styleValue","blackValueList","value_","safeAttributeValue","stripIgnoreTag","stripIgnoreTagBody","containsTargetAttribute","whiteAttributeList","isWhiteAttribute","returnValue1","returnValue2","onIgnoreTagAttr","onTagAttr","replaceLinksInText","bypassSecurityTrustHtml","bypassSecurityTrustUrl","inputText","urlPattern","pseudoUrlPattern","emailAddressPattern","br","div","font","h1","h2","h3","h4","h5","h6","hr","img","label","li","ol","p","span","strong","table","td","th","tr","u","ul","headingAttributes","allowedAttributes","attribute","attributeWhitelist","ProgressBarComponent","BrowserDetectorService","checkIEVersion","ua","userAgent","msie","parseInt","trident","rv","ScriptStore","src","DynamicScriptLoaderService","scripts","script","promises","loadScript","all","reject","append","removeChild","stripe","LoggerService","optionalParameters","console","log","PushNotificationService","isSupported","obs","_notify","onclose","complete","alertContent","notify","PushNotificationOptions","ThemeMode","ThemeToggleService","LIGHT_THEME_CLASS_NAME","DARK_THEME_CLASS_NAME","isForceLightMode","theme$","LIGHT","updateTheme","DARK","WebsocketService","retryCount","userId","WebSocket","onmessage","disconnect","SharedModule","SpinnerImageComponent","SpinnerComponent","spinnerService","isShowing","showChange","unregister","SpinnerService","spinnerCache","spinner","spinnerName","spinnerGroup","showing","spinnerToRemove","NoWhiteSpaceValidator","control","AuthActionTypes","LogIn","LOGIN","LogInSuccess","LOGIN_SUCCESS","LogInFailure","LOGIN_FAILURE","SignUp","SIGNUP","SignUpSuccess","SIGNUP_SUCCESS","SignUpFailure","SIGNUP_FAILURE","Logout","LOGOUT","SaveDraftOnLogout","SAVE_DRAFT_ON_LOGOUT","GetStatus","GET_STATUS","UpdateSignupData","UPDATE_SIGNUP_DATA","CheckUsernameAvailability","CHECK_USERNAME_AVAILABILITY","CheckUsernameAvailabilitySuccess","CHECK_USERNAME_AVAILABILITY_SUCCESS","CheckUsernameAvailabilityError","CHECK_USERNAME_AVAILABILITY_ERROR","RecoverPassword","RECOVER_PASSWORD","RecoverPasswordSuccess","RECOVER_PASSWORD_SUCCESS","RecoverPasswordFailure","RECOVER_PASSWORD_FAILURE","ResetPassword","RESET_PASSWORD","ResetPasswordSuccess","RESET_PASSWORD_SUCCESS","ResetPasswordFailure","RESET_PASSWORD_FAILURE","UpgradeAccount","UPGRADE_ACCOUNT","UpgradeAccountSuccess","UPGRADE_ACCOUNT_SUCCESS","UpgradeAccountFailure","UPGRADE_ACCOUNT_FAILURE","ChangePassword","CHANGE_PASSWORD","ChangePasswordSuccess","CHANGE_PASSWORD_SUCCESS","ChangePasswordFailed","CHANGE_PASSWORD_FAILED","ChangePassphraseSuccess","CHANGE_PASSPHRASE_SUCCESS","DeleteAccount","DELETE_ACCOUNT","DeleteAccountSuccess","DELETE_ACCOUNT_SUCCESS","DeleteAccountFailure","DELETE_ACCOUNT_FAILURE","ClearSignUpState","CLEAR_SIGNUP_STATE","ClearAuthErrorMessage","CLEAR_AUTH_ERROR_MESSAGE","GetCaptcha","GET_CAPTCHA","GetCaptchaSuccess","GET_CAPTCHA_SUCCESS","VerifyCaptcha","VERIFY_CAPTCHA","VerifyCaptchaSuccess","VERIFY_CAPTCHA_SUCCESS","VerifyCaptchaFailure","VERIFY_CAPTCHA_FAILURE","ExpireSession","EXPIRE_SESSION","Get2FASecret","GET_2FA_SECRET","Get2FASecretSuccess","GET_2FA_SECRET_SUCCESS","Update2FA","UPDATE_2FA","Update2FASuccess","UPDATE_2FA_SUCCESS","RefreshToken","REFRESH_TOKEN","SetAuthenticatedState","SET_AUTHENTICATED","BitcoinActionTypes","CreateNewWallet","CREATE_NEW_WALLET","CheckTransaction","CHECK_TRANSACTION","CheckTransactionSuccess","CHECK_TRANSACTION_SUCCESS","CreateNewWalletSuccess","CREATE_NEW_WALLET_SUCCESS","ClearWallet","CLEAR_WALLET","ComposeMailActionTypes","CreateMail","CREATE_MAIL","CreateMailSuccess","CREATE_MAIL_SUCCESS","UpdateLocalDraft","UPDATE_LOCAL_DRAFT","CloseMailbox","CLOSE_MAILBOX","SendMail","SEND_MAIL","SendMailSuccess","SEND_MAIL_SUCCESS","SendMailFailure","SEND_MAIL_FAILURE","UpdatePGPEncryptedContent","UPDATE_PGP_ENCRYPTED_CONTENT","UpdatePGPMimeEncrytion","UPDATE_PGP_MIME_ENCRYPTED","UpdatePGPSshKeys","UPDATE_PGP_SSH_KEYS","UploadAttachment","UPLOAD_ATTACHMENT","UploadAttachmentProgress","UPLOAD_ATTACHMENT_PROGRESS","UploadAttachmentRequest","UPLOAD_ATTACHMENT_REQUEST","UploadAttachmentSuccess","UPLOAD_ATTACHMENT_SUCCESS","UploadAttachmentFailure","UPLOAD_ATTACHMENT_FAILURE","DeleteAttachment","DELETE_ATTACHMENT","DeleteAttachmentSuccess","DELETE_ATTACHMENT_SUCCESS","DeleteAttachmentFailure","DELETE_ATTACHMENT_FAILURE","StartAttachmentEncryption","START_ATTACHMENT_ENCRYPTION","GetUsersKeys","GET_USERS_KEYS","GetUsersKeysSuccess","GET_USERS_KEYS_SUCCESS","NewDraft","NEW_DRAFT","ClearDraft","CLEAR_DRAFT","UpdateDraftAttachment","UPDATE_DRAFT_ATTACHMENT","MatchContactUserKeys","MATCH_CONTACT_USER_KEYS","ContactsActionTypes","ContactsGet","CONTACT_GET","ContactGetSuccess","CONTACT_GET_SUCCESS","ContactGetFailure","CONTACT_GET_FAILURE","ContactAdd","CONTACT_ADD","ContactAddSuccess","CONTACT_ADD_SUCCESS","ContactAddError","CONTACT_ADD_ERROR","ContactDelete","CONTACT_DELETE","ContactDeleteSuccess","CONTACT_DELETE_SUCCESS","ContactNotify","CONTACT_NOTIFY","ContactNotifySuccess","CONTACT_NOTIFY_SUCCESS","ContactNotifyFailure","CONTACT_NOTIFY_FAILURE","ContactImport","CONTACT_IMPORT","ContactImportSuccess","CONTACT_IMPORT_SUCCESS","ContactImportFailure","CONTACT_IMPORT_FAILURE","ContactDecryptSuccess","CONTACT_DECRYPT_SUCCESS","GetEmailContacts","GET_EMAIL_CONTACTS","GetEmailContactsSuccess","GET_EMAIL_CONTACTS_SUCCESS","ClearContactsToDecrypt","CLEAR_CONTACTS_TO_DECRYPT","UpdateBatchContacts","CONTACT_BATCH_UPDATE","UpdateBatchContactsSuccess","CONTACT_BATCH_UPDATE_SUCCESS","ContactFetchKeys","CONTACT_FETCH_KEYS","ContactFetchKeysSuccess","CONTACT_FETCH_KEYS_SUCCESS","ContactFetchKeysFailure","CONTACT_FETCH_KEYS_FAILURE","ContactAddKeys","CONTACT_ADD_KEYS","ContactAddKeysSuccess","CONTACT_ADD_KEYS_SUCCESS","ContactAddKeysFailure","CONTACT_ADD_KEYS_FAILURE","ContactRemoveKeys","CONTACT_REMOVE_KEYS","ContactRemoveKeysSuccess","CONTACT_REMOVE_KEYS_SUCCESS","ContactRemoveKeysFailure","CONTACT_REMOVE_KEYS_FAILURE","ContactBulkUpdateKeys","CONTACT_BULK_UPDATE_KEYS","ContactBulkUpdateKeysSuccess","CONTACT_BULK_UPDATE_KEYS_SUCCESS","ContactBulkUpdateKeysFailure","CONTACT_BULK_UPDATE_KEYS_FAILURE","DonationActionTypes","MakeStripDonation","MAKE_STRIPE_DONATION","MakeStripeDonationSuccess","MAKE_STRIPE_DONATION_SUCCESS","MakeStripeDonationFailure","MAKE_STRIPE_DONATION_FAILURE","KeyboardActionTypes","KeyboardFocus","KEYBOARD_FOCUSED","KeyboardFocusOut","KEYBOARD_FOCUSED_OUT","KeyPressed","KEY_PRESSED","FocusedInputID","FOCUSED_INPUT","LoadingActionTypes","RelatedBlogLoading","RELATED_LOADING","RecentBlogLoading","RECENT_LOADING","FinalLoading","FINAL_LOADING","MailActionTypes","GetMails","GET_MAILS","StarredFolderCountUpdate","STARRED_FOLDER_COUNT_UPDATE","GetMailsSuccess","GET_MAILS_SUCCESS","SetIsComposerPopUp","SET_IS_COMPOSER_POPUP","GetUnreadMailsCount","GET_UNREAD_MAILS_COUNT","GetUnreadMailsCountSuccess","GET_UNREAD_MAILS_COUNT_SUCCESS","GetCustomFolderMessageCount","GET_CUSTOMFOLDER_MESSAGE_COUNT","GetCustomFolderMessageCountSuccess","GET_CUSTOMFOLDER_MESSAGE_COUNT_SUCCESS","StopGettingUnreadMailsCount","STOP_GETTING_UNREAD_MAILS_COUNT","GetMailboxes","GET_MAILBOXES","GetMailboxesSuccess","GET_MAILBOXES_SUCCESS","GetMailDetail","GET_MAIL_DETAIL","ClearMailsOnConversationModeChange","CLEAR_MAILS_ON_CONVERSATION_MODE_CHANGE","ClearMailsOnLogout","CLEAR_MAILS_ON_LOGOUT","ClearMailDetail","CLEAR_MAIL_DETAIL","GetMailDetailSuccess","GET_MAIL_DETAIL_SUCCESS","GetMailDetailFailure","GET_MAIL_DETAIL_FAILURE","UpdateMailDetailChildren","UPDATE_MAIL_DETAIL_CHILDREN","MoveMail","MOVE_MAIL","MoveMailSuccess","MOVE_MAIL_SUCCESS","RevertMailsMoved","REVERT_MAILS_MOVED","DeleteMail","DELETE_MAIL","ReadMail","READ_MAIL","ReadMailSuccess","READ_MAIL_SUCCESS","StarMail","STAR_MAIL","StarMailSuccess","STAR_MAIL_SUCCESS","DeleteMailSuccess","DELETE_MAIL_SUCCESS","SetDecryptInProgress","SET_DECRYPT_INPROGRESS","SetDecryptedKey","SET_DECRYPTED_KEY","SetCurrentMailbox","SET_CURRENT_MAILBOX","UndoDeleteMail","UNDO_DELETE_MAIL","UndoDeleteMailSuccess","UNDO_DELETE_MAIL_SUCCESS","SetCurrentFolder","SET_CURRENT_FOLDER","UpdatePGPDecryptedContent","UPDATE_PGP_DECRYPTED_CONTENT","UpdateCurrentFolder","UPDATE_CURRENT_FOLDER","MailboxSettingsUpdate","MAILBOX_SETTINGS_UPDATE","MailboxSettingsUpdateSuccess","MAILBOX_SETTINGS_UPDATE_SUCCESS","MailboxSettingsUpdateFailure","MAILBOX_SETTINGS_UPDATE_FAILURE","CreateMailbox","CREATE_MAILBOX","CreateMailboxSuccess","CREATE_MAILBOX_SUCCESS","CreateMailboxFailure","CREATE_MAILBOX_FAILURE","SetDefaultMailbox","SET_DEFAULT_MAILBOX","SetDefaultMailboxSuccess","SET_DEFAULT_MAILBOX_SUCCESS","UpdateMailboxOrder","UPDATE_MAILBOX_ORDER","UpdateMailboxOrderSuccess","UPDATE_MAILBOX_ORDER_SUCCESS","EmptyFolder","EMPTY_FOLDER","EmptyFolderSuccess","EMPTY_FOLDER_SUCCESS","EmptyFolderFailure","EMPTY_FOLDER_FAILURE","DeleteMailForAll","DELETE_MAIL_FOR_ALL","DeleteMailForAllSuccess","DELETE_MAIL_FOR_ALL_SUCCESS","DeleteMailbox","DELETE_MAILBOX","DeleteMailboxSuccess","DELETE_MAILBOX_SUCCESS","MoveTab","MOVE_TAB","EmptyOnlyFolder","EMPTY_ONLY_FOLDER","FetchMailboxKeys","FETCH_MAILBOX_KEYS","FetchMailboxKeysSuccess","FETCH_MAILBOX_KEYS_SUCCESS","FetchMailboxKeysFailure","FETCH_MAILBOX_KEYS_FAILURE","AddMailboxKeys","ADD_MAILBOX_KEYS","AddMailboxKeysSuccess","ADD_MAILBOX_KEYS_SUCCESS","AddMailboxKeysFailure","ADD_MAILBOX_KEYS_FAILURE","DeleteMailboxKeys","DELETE_MAILBOX_KEYS","DeleteMailboxKeysSuccess","DELETE_MAILBOX_KEYS_SUCCESS","DeleteMailboxKeysFailure","DELETE_MAILBOX_KEYS_FAILURE","SetMailboxKeyPrimary","SET_PRIMARY_MAILBOX_KEYS","SetMailboxKeyPrimarySuccess","SET_PRIMARY_MAILBOX_KEYS_SUCCESS","SetMailboxKeyPrimaryFailure","SET_PRIMARY_MAILBOX_KEYS_FAILURE","SetAttachmentsForPGPMime","SET_ATTACHMENTS_FOR_PGP_MIME","ResetMailboxKeyOperationState","RESET_MAILBOX_KEY_OPERATION_STATE","GO","BACK","Go","Back","Forward","SearchActionTypes","ClearSearch","CLEAR_SEARCH","SecureMessageActionTypes","GetMessage","GET_MESSAGE","GetMessageSuccess","GET_MESSAGE_SUCCESS","GetMessageFailure","GET_MESSAGE_FAILURE","UpdateSecureMessageKey","UPDATE_SECURE_MESSAGE_KEY","UpdateSecureMessageContent","UPDATE_SECURE_MESSAGE_CONTENT","UpdateSecureMessageEncryptedContent","UPDATE_SECURE_MESSAGE_ENCRYPTED_CONTENT","SendSecureMessageReply","SEND_SECURE_MESSAGE_REPLY","SendSecureMessageReplySuccess","SEND_SECURE_MESSAGE_REPLY_SUCCESS","SendSecureMessageReplyFailure","SEND_SECURE_MESSAGE_REPLY_FAILURE","GetSecureMessageUserKeys","GET_SECURE_MESSAGE_USERS_KEYS","GetSecureMessageUserKeysSuccess","GET_SECURE_MESSAGE_USERS_KEYS_SUCCESS","TimezoneActionTypes","TimezoneGet","TIMEZONE_GET","TimezoneGetSuccess","TIMEZONE_GET_SUCCESS","UsersActionTypes","GetNotification","GET_NOTIFICATION","GetNotificationSuccess","GET_NOTIFICATION_SUCCESS","Accounts","ACCOUNTS","AccountsReadSuccess","ACCOUNTS_READ_SUCCESS","CardGet","CARD_GET","CardReadSuccess","CARD_READ_SUCCESS","CardAdd","CARD_ADD","CardAddSuccess","CARD_ADD_SUCCESS","CardAddError","CARD_ADD_ERROR","CardDelete","CARD_DELETE","CardDeleteSuccess","CARD_DELETE_SUCCESS","CardMakePrimary","CARD_MAKE_PRIMARY","CardMakePrimarySuccess","CARD_MAKE_PRIMARY_SUCCESS","WhiteListGet","WHITELIST_GET","WhiteListsReadSuccess","WHITELIST_READ_SUCCESS","WhiteListAdd","WHITELIST_ADD","MoveToBlacklist","MOVE_TO_BLACKLIST","MoveToWhitelist","MOVE_TO_WHITELIST","WhiteListAddSuccess","WHITELIST_ADD_SUCCESS","WhiteListAddError","WHITELIST_ADD_ERROR","WhiteListDelete","WHITELIST_DELETE","WhiteListDeleteSuccess","WHITELIST_DELETE_SUCCESS","BlackListGet","BLACKLIST_GET","BlackListsReadSuccess","BLACKLIST_READ_SUCCESS","BlackListAdd","BLACKLIST_ADD","BlackListAddSuccess","BLACKLIST_ADD_SUCCESS","BlackListAddError","BLACKLIST_ADD_ERROR","BlackListDelete","BLACKLIST_DELETE","BlackListDeleteSuccess","BLACKLIST_DELETE_SUCCESS","AccountDetailsGet","ACCOUNT_DETAILS_GET","AccountDetailsGetSuccess","ACCOUNT_DETAILS_GET_SUCCESS","SnackPush","SNACK_PUSH","SnackPushSuccess","SNACK_PUSH_SUCCESS","SnackErrorPush","SNACK_ERROR_PUSH","SnackErrorPushSuccess","SNACK_ERROR_PUSH_SUCCESS","MembershipUpdate","MEMBERSHIP_UPDATE","SettingsUpdate","SETTINGS_UPDATE","SettingsUpdateSuccess","SETTINGS_UPDATE_SUCCESS","SettingsUpdateUsedStorage","SETTINGS_UPDATE_USED_STORAGE","CreateFolder","CREATE_FOLDER","CreateFolderSuccess","CREATE_FOLDER_SUCCESS","CreateFolderFailure","CREATE_FOLDER_FAILURE","DeleteFolder","DELETE_FOLDER","DeleteFolderSuccess","DELETE_FOLDER_SUCCESS","GetFilters","GET_FILTERS","GetFiltersSuccess","GET_FILTERS_SUCCESS","CreateFilter","CREATE_FILTER","CreateFilterSuccess","CREATE_FILTER_SUCCESS","CreateFilterFailure","CREATE_FILTER_FAILURE","UpdateFilter","UPDATE_FILTER","UpdateFilterSuccess","UPDATE_FILTER_SUCCESS","UpdateFilterFailure","UPDATE_FILTER_FAILURE","UpdateFilterOrder","UPDATE_FILTER_ORDER","UpdateFilterOrderSuccess","UPDATE_FILTER_ORDER_SUCCESS","UpdateFilterOrderFailure","UPDATE_FILTER_ORDER_FAILURE","DeleteFilter","DELETE_FILTER","DeleteFilterSuccess","DELETE_FILTER_SUCCESS","DeleteFilterFailure","DELETE_FILTER_FAILURE","GetDomains","GET_DOMAINS","GetDomainsSuccess","GET_DOMAINS_SUCCESS","CreateDomain","CREATE_DOMAIN","CreateDomainSuccess","CREATE_DOMAIN_SUCCESS","CreateDomainFailure","CREATE_DOMAIN_FAILURE","UpdateDomain","UPDATE_DOMAIN","UpdateDomainSuccess","UPDATE_DOMAIN_SUCCESS","UpdateDomainFailure","UPDATE_DOMAIN_FAILURE","ReadDomain","READ_DOMAIN","ReadDomainSuccess","READ_DOMAIN_SUCCESS","ReadDomainFailure","READ_DOMAIN_FAILURE","DeleteDomain","DELETE_DOMAIN","DeleteDomainSuccess","DELETE_DOMAIN_SUCCESS","DeleteDomainFailure","DELETE_DOMAIN_FAILURE","VerifyDomain","VERIFY_DOMAIN","VerifyDomainSuccess","VERIFY_DOMAIN_SUCCESS","VerifyDomainFailure","VERIFY_DOMAIN_FAILURE","PaymentFailure","PAYMENT_FAILURE","SendEmailForwardingCode","SEND_EMAIL_FORWARDING_CODE","SendEmailForwardingCodeSuccess","SEND_EMAIL_FORWARDING_CODE_SUCCESS","SendEmailForwardingCodeFailure","SEND_EMAIL_FORWARDING_CODE_FAILURE","VerifyEmailForwardingCode","VERIFY_EMAIL_FORWARDING_CODE","VerifyEmailForwardingCodeSuccess","VERIFY_EMAIL_FORWARDING_CODE_SUCCESS","VerifyEmailForwardingCodeFailure","VERIFY_EMAIL_FORWARDING_CODE_FAILURE","UpdateFolderOrder","UPDATE_FOLDER_ORDER","UpdateFolderOrderSuccess","UPDATE_FOLDER_ORDER_SUCCESS","SaveAutoResponder","SAVE_AUTORESPONDER","SaveAutoResponderSuccess","SAVE_AUTORESPONDER_SUCCESS","SaveAutoResponderFailure","SAVE_AUTORESPONDER_FAILURE","GetInvoices","GET_INVOICES","GetInvoicesSuccess","GET_INVOICES_SUCCESS","GetUpgradeAmount","GET_UPGRADE_AMOUNT","GetUpgradeAmountSuccess","GET_UPGRADE_AMOUNT_SUCCESS","ValidatePromoCode","VALIDATE_PROMO_CODE","ValidatePromoCodeSuccess","VALIDATE_PROMO_CODE_SUCCESS","ClearPromoCode","CLEAR_PROMO_CODE","GetInviteCodes","INVITE_CODE_GET","GetInviteCodesSuccess","INVITE_CODE_GET_SUCCESS","GenerateInviteCode","INVITE_CODE_GENERATE","GenerateInviteCodeSuccess","INVITE_CODE_GENERATE_SUCCESS","GenerateInviteCodeFailure","INVITE_CODE_GENERATE_FAILURE","Auth2FA","secret","secret_url","encodeURIComponent","UserState","PromoCode","Settings","Payment","SecureContent","incoming_headers","isSubjectEncrypted","TransactionStatus","PaymentMethod","PaymentType","PlanType","NotificationPermission","MailAction","PGPEncryptionType","EncryptionType","AutocryptPreferEncryptType","UIRecommendationValue","PGPKeyType","EmailContentType","PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME","PGP_MIME_DEFAULT_CONTENT","ComposerEncryptionType","AuthEffects","actions","signIn","rememberMe","fromLoginRequest","is_2fa_enabled","openUseCacheConfirmDialog","refreshToken","monthlyPrice","annualPricePerMonth","annualPriceTotal","removeItem","sessionStorage","signUp","LogOut","signOut","expireSession","recoverPassword","resetPassword","upgradeAccount","changePassword","deleteAccount","detail","getCaptcha","verifyCaptcha","get2FASecret","enable2FA","update2FA","ngbModalOptions","BitcoinEffects","bitcoinService","createWalletAddress","checkPendingTransaction","ComposeMailEffects","createMailEffect","createMail","uploadAttachmentEffect","observer","request","uploadFile","UploadProgress","round","total","isPGPMimeMessage","deleteAttachmentEffect","deleteAttachment","sendMailEffect","last_action_data","isDraft","getUsersKeysEffect","getUsersPublicKeys","isBlind","ContactsEffects","userService","Contact","getContact","results","is_decryptionInProgress","decryptContact","encrypted_data","addContact","isUpdating","deleteContact","notifyContact","msg","importContacts","success_count","fail_count","getEmailsContactsEffect","getEmailContacts","updateBatchContacts","contactFetchKeys","contactAddKeys","contactRemoveKeys","contactBulkUpdateKeys","DonateEffects","makeStripeDonation","payment_success","makeStripeDonationSuccess","effects","MailEffects","getMailsEffect","getMessages","previous","getUnreadMailsCountEffect","getUnreadMailsCount","getCustomFolderMessageCountEffect","getCustomFolderMessageCount","moveMailEffect","moveMail","updateFolderActions","shouldDeleteFolder","folderToDelete","deleteMailEffect","deleteMails","deleteMailForAllEffect","deleteMailForAll","readMailEffect","starMailEffect","getMailDetailEffect","getMessage","undoDeleteDraftMailEffect","emptyTrashEffect","emptyFolder","MailboxEffects","getMailboxesEffect","getMailboxes","mailboxSettingsUpdate","updateMailBoxSettings","successMsg","createMailbox","setDefaultMailbox","is_default","updateMailboxOrder","deleteMailbox","fetchMailboxKeys","addMailboxKeys","deleteMailboxKeys","setPrimaryMailboxKeys","RouterEffects","actions$","navigate$","query","extras","navigateBack$","back","navigateForward$","forward","SecureMessageEffects","getMessageEffect","getSecureMessage","hash","sendReplyEffect","secureReply","getSecureMessageKeys","TimezoneEffects","timezoneService","getTimezones","UsersEffects","getAccounts","AccountDetails","getAccountDetails","WhiteLists","getWhiteList","addWhiteList","deleteWhiteList","deleteBlackList","CardLists","getPaymentMethods","cardList","addPaymentMethod","deletePaymentMethod","makePaymentPrimary","BlackLists","getBlackList","addBlackList","settingsUpdate","requestSnacks$","showUndo","requestErrorSnacks$","snackPushAction","createFolderEffect","deleteFolderEffect","deleteFolder","updateFoldersOrder","getFiltersEffect","getFilters","createFilterEffect","createFilter","updateFilterEffect","updateFilterOrderEffect","updateFilterOrder","deleteFilterEffect","deleteFilter","Domains","getDomains","emailDomains","DomainCreate","createDomain","DomainRead","readDomain","err","DomainDelete","deleteDomain","DomainVerify","verifyDomain","step","paymentFailureEffect","showPaymentFailureDialog","sendEmailForwardingCode","verifyEmailForwardingCode","saveAutoResponder","getInvoicesEffect","getInvoices","getUpgradeAmountEffect","getInviteCodes","generateInviteCode","generateInviteCodes","GetNotificationsEffect","getUserNotifications","resp","FilterParameter","FilterCondition","EncryptionNonCTemplar","MailFolderType","Membership","User","OrganizationUser","user_id","recovery_email","StorageData","price","PaymentData","annualDiscountRate","classId","monthlyDiscountRate","monthlyFee","selected","totalAnnualFee","OrganizationActionTypes","GetOrganizationUsers","GET_ORGANIZATION_USERS","GetOrganizationUsersSuccess","GET_ORGANIZATION_USERS_SUCCESS","GetOrganizationUsersFailure","GET_ORGANIZATION_USERS_FAILURE","AddOrganizationUser","ADD_ORGANIZATION_USER","AddOrganizationUserSuccess","ADD_ORGANIZATION_USER_SUCCESS","AddOrganizationUserFailure","ADD_ORGANIZATION_USER_FAILURE","DeleteOrganizationUser","DELETE_ORGANIZATION_USER","DeleteOrganizationUserSuccess","DELETE_ORGANIZATION_USER_SUCCESS","DeleteOrganizationUserFailure","DELETE_ORGANIZATION_USER_FAILURE","UpdateOrganizationUser","UPDATE_ORGANIZATION_USER","UpdateOrganizationUserSuccess","UPDATE_ORGANIZATION_USER_SUCCESS","UpdateOrganizationUserFailure","UPDATE_ORGANIZATION_USER_FAILURE","OrganizationEffects","getOrganizationUsers","addOrganizationUser","deleteOrganizationUser","updateOrganizationUser","reducer","quotes","initialState","recaptcha","resetPasswordErrorMessage","isRecoveryCodeSent","captcha","logoutReducer","reducerAction","show2FALogin","recovery_key","isInvalid","verified","WAITING","updateDraftMailForPGPMimeMessage","oldAttachment","newDraftMail","is_autocrypt_encrypted","encryptedContent","pgpMimeContent","isSent","oldDraft","getUserKeyInProgress","isPGPMimeInProgress","contactKeyAdd","contactKeyUpdate","contactKeyRemove","contactAdd","noOfDecryptedContacts","contact_list","phone2","concat","isDecryptedFrontend","filteredKeys","newContactKeys","reducers","secureMessage","keyboardFocused","keyPressed","focusedInput","transformFilename","sortByDueDateWithID","sortArray","mailMap","sorted","next_updated","updated","previous_updated","getTotalUnreadCount","STARRED","updateMailMap","currentMap","temporaryMailMap","filterAndMergeMailIDs","newMails","originalMailIDs","checkUnread","mailIDs","newMailsMap","newMail","originMailID","getUpdatesFolderMap","originalFolderState","isConversationViewMode","duplicatedMailIDS","parentWithChild","prepareMails","folderInfo","children_folder_info","thread_count","trash_children_count","non_trash_children_count","inbox","canGetUnreadCount","decryptedSubjects","pageLimit","decryptedAttachmentsMap","payloadMails","oldFolderInfo","mailIDS","folderState","UNREAD","basicFolderState","ALL_EMAILS","currentFolderMap","starred_count","totalUnreadMailCount","unreadMailData","total_unread_count","listOfIDs","sourceFolderName","sourceFolderState","targetFolderName","targetFolderState","movedMails","movedID","folder_keys","mailMapKeys","children_count","incomeMails","parentID","currentMailFolder","sourceFolderChildren","undo_mails","oldFolderMap","curMailFolder","allIDS","unreadFolderMap","currentFolderInfo","updatedMailCount","updatedCurrentFolderMails","starredFolderMap","isDecryptingAllSubjects","targetFolderMap","messageID","decryptKeyInProgress","encryptionInProgress","primaryKey","temporaryKeys","decryptedKey","updatedCurrentMailBox","previousDefaultMailBox","updateKeyMap","keyMap","mailboxKeys","specificKeys","originKeys","newKey","deletedKey","newPrimaryKey","currentPrimaryMailbox","isKeyDecryptionInProgress","isContentDecryptionInProgress","isEncryptionInProgress","membership","cardsPayload","autoresponder_message","is_prime","joinedDate","joined_date","custom_folders","customDomainsLoaded","isInvoiceLoaded","prorated_price","discount_amount","CustomSerializer","routerState","root","AuthGuard","AutocryptProcessService","senderMailbox","DISABLE","receiversStatus","everyContact","CTEMPLAR","processResult","launchProcessForCheckAutocryptPossible","isCourage","MAX_DISCOURAGE_DAY","autocryptTimestamp","autocrypt_timestamp","lastSeen","last_seen","dateDiffInDays","start","utc1","UTC","utc2","MS_PER_DAY","BitcoinService","post","defaultBreakpoints","xs","sm","md","lg","BreakpointsService","breakpoints","currentSize","MAX_SAFE_INTEGER","getBreakpoint","CancelPendingRequestInterceptor","handle","onCancelPendingRequests","HttpCancelService","cancelPendingRequests$","asObservable","ComposeMailService","componentFactoryResolver","messageBuilderService","autocryptProcessService","componentRefList","minimizedWidth","originWidth","maxComposeCount","setEncryptedContent","processPGPMimeMessage","publicKeys","getShouldBeEncrypted","getPublicKeys","encryptionTypeForExternal","getEncryptionTypeForExternal","encryptAttachmentWithOnlyPassword","encryptWithOnlyPassword","determinedAutocryptStatus","decideAutocryptDefaultEncryptionWithDraft","buildPGPMimeMessageAndEncrypt","sendEmailWithDecryptedData","isEncryptMessageContent","encryptedAttachments","responses","attachmentToUpload","is_pgp_mime","draftMailId","getMimeData","mimeData","encryptForPGPMime","windowWidth","countCommonCompose","trunc","composesWidth","instance","temporaryWidth","componentReference","inputData","oldComponentReference","factory","resolveComponentFactory","newComponentReference","createComponent","getComposesWidth","destroyComponent","temporaryCount","destroy","countNewCompose","DateTimeUtilService","ISO8601_DATETIME_FORMAT","preDefinedFormats","medium","full","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","fullTime","setDefault","utc","datetime","dateString","timeString","DonationService","MailSettingsService","MailService","searchMessages","newData","patch","isMailRead","isMailStarred","with_children","from_trash","formData","FormData","reportProgress","randomSecret","mailboxkey_id","operation","MessageBuilderService","isHtml","isBase64EncodeForBody","isPGPMessage","contentType","MULTIPART_MIXED","unescape","contentEntity","TEXT_HTML_CHARSET_UTF8","PLAIN_TEXT_CHARSET_UTF8","processAttachments","attachmentsEntities","readFileAsync","contentBuffer","attachmentsEntity","APPLICATION_OCTET_STREAM","contentTransferEncoding","arrayBufferToBase64","readAsArrayBuffer","MessageDecryptService","openpgpService","currentDecryptingMail","encryptedDotAsc","decryptPGPMessageProcess","PostalMime","parser","decryptedData","parseEmail","messageObject","callerId","parsedAttachment","URL","createObjectURL","Blob","mimeType","filename","NotificationService","snackBar","snackBarReference","onAction","OpenPgpService","subjects","messageForPGPMimeInProcess","pgpWorker","Worker","listenWorkerPostMessages","privateKeys","primaryMailbox","mailboxKeysInProgress","decryptInProgress","userSettings","privKeys","userKey","postMessage","user_key","pgpEncryptionTypeForExternal","pubKeys","subjectId","decryptedAllPrivKeys","decryptProcess","isAddContact","stringify","allPublicKeysArray","encryptJson","decryptJson","isContact","isContactsArray","Uint8Array","fileData","userIds","numBits","generateKeys","isSshInProgress","sshKeys","forEmail","callbackFn","revertPassphrase","encryptWithPassword","encryptAttachmentWithPassword","encryptSecureMessageReply","decryptSecureMessageContent","decryptSecureMessageAttachment","privateKey","publicKey","generateKeysForEmail","pgpMimeData","encryptForPGPMimeContent","decrypted","decryptedPGPMime","isSubjectDecryptedError","decryptSecureMessageKey","properPublicKey","pubKey","handleObservable","encrypted","encryptedAttachment","oldDocument","lastModified","decryptedSecureMessageAttachment","array","totalDecryptedContacts","encryptedForPGPMimeContent","decryptedPrivateKey","validatedPrivateKey","encryptedPrivateKey","BaseImageFormat","ImageFormatAttributesList","ImageFormat","domNode","removeAttribute","reduce","formats","hasAttribute","SharedService","isReady","sortField","getTime","salt","createSalt","hashSync","modal","PARAGON","paymentFailureModalRef","selBox","style","left","top","opacity","execCommand","base64Data","decodedData","charCodeAt","download","revokeObjectURL","binary","fromCharCode","parsedData","keyObject","internal","rejectTLD","sortByString","field","isComposeEditorOpen","getCryptoRandom","Uint32Array","pow","randomValue","crypto","getRandomValues","LOADING_IMAGE","TimezoneService","TokenInterceptor","injector","clone","withCredentials","ok","session_expired","UsersService","current","expiration","doesHttpOnlyCookieExist","setTokenExpiration","trimUsername","hashData","setLoginData","confirmationMessage","returnValue","timezone_offset","getTimezoneOffset","referralCode","updateSignupDataWithPromo","authenticatedUrls","authenticated","referralId","row","startsWith","filterId","autoResponder","card_id","contact_key_list","cookiename","d","setTime","expires","toUTCString","localStorageSyncReducer","nextState","isNeedSync","isRememberMe","strDecryptedSubjects","rehydrateMetaReducer","storageValue","parsedStorageValue","retVal","metaReducers","AppStoreModule","instrument","maxAge","logOnly","WebSocketActionTypes","WebSocketNewMessage","WEB_SOCKET_NEW_MESSAGE","WebSocketClose","WEB_SOCKET_CLOSE","WebSocketEffects","webSocketNewMessage","webSocketClose","DecryptMessageComponent","decryptForm","senderId","decodeURIComponent","isMessageExpired","decryptedSubject","decryptWithOnlyPassword","isReplying","DisplayNameDialogComponent","changeDisplayNameForm","noWhiteSpaceValidator","recoveryKey","dispName","submitDisplayNameForm","UseCacheDialogComponent","onDismissSaveDecryptedSubject","onFlagSaveDecryptedSubject","UserAccountInitDialogComponent","isDisplayNameOpened","isAccountCreationComplete","isPgpGenerationComplete","onAnimationStart","onAnimationDone","animations","DisplaySecureMessageComponent","reply","expired","expiryDurationInSeconds","getDiffFromCurrentDateTime","getSecureMessageAttachment","decryptAttachmentWithOnlyPassword","onExpired","onReply","ReplySecureMessageComponent","cancel","replySuccess","secureMessageState","encryptSecureMessageContent","sourceMessage","onSend","UsersCreateAccountComponent","isTextToggled","isRecoveryEmail","isConfirmedPrivacy","signupInProgress","signupForm","values","navigateToBillingPage","inviteCode","signupFormCompleted","instant","captchaResponse","invite_code","signup","togglePassword","toggleText","UsersRoutingModule","UsersSignInComponent","showResetPasswordFormErrors","layout","inputFields","InputFields","loginForm","recoverPasswordForm","resetPasswordForm","isRecoverFormSubmitted","resetModalRef","otpInput","isRecoveryKeyMode","resetPasswordModal","otp","isOtp","resetPasswordConfirmed","onChange","onKeyPress","button","USERNAME","isKeyboardOpened","getInput","onInputChange","PASSWORD","currentInput","handleShift","setInput","currentLayout","layoutName","shiftToggle","setOptions","passwordVC","usernameVC","openOSK","keyCode","UsersSignUpComponent","selectedPayment","storageList","selectedStorage","mainPayments","checked","moMoney","totalMoney","makePayments","UsersModule","AppConfig","debug","preserveWhitespaces"],"mappings":"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;AACA;;AACE;;AACE;;AACE;;AAA+B;;AAAqB;;AACtD;;AACA;;AACE;;AACE;;AACE;;AACE;;AAKE;AAAA;;AAAA;;AAAA,yCAAwB,yBAAxB,EAAmD,KAAnD;AAAwD,SAAxD;;AALF;;AAQA;;AAA2B;;AAAY;;AACzC;;AACF;;AACA;;AACE;;AACE;;AAKE;AAAA;;AAAA;;AAAA,yCAAwB,yBAAxB,EAAmD,IAAnD;AAAuD,SAAvD;;AALF;;AAQA;;AAA2B;;AAAW;;AACxC;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAME;;AACF;;AACA;;AACE;;AAOF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAME;;AAIA;;AAIF;;AACA;;AACE;;AAUF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAME;;AAIA;;AAIF;;AACA;;AACE;;AAUF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAME;;AAQA;;AAGF;;AACA;;AACE;;AAUF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAME;;AACF;;AACA;;AACE;;AAOF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAIE;;AAA+B;;AAAqB;;AACtD;;AACA;;AACE;;AACE;;AACE;;AACE;;AAKE;AAAA;;AAAA;;AAAA,yCAAwB,2BAAxB,EAAqD,IAArD;AAAyD,SAAzD;;AALF;;AAQA;;AAAiE;;AAAO;;AAC1E;;AACF;;AACA;;AACE;;AACE;;AAKE;AAAA;;AAAA;;AAAA,yCAAwB,2BAAxB,EAAqD,KA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AA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAA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AAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAYC,eAAZ;;AAAA,eAAYA,eAAZ,EAA2B;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,K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A;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACaA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAY0hF,eAAZ;;AAAA,eAAYA,eAAZ,EAA2B;AACzB;AACA;AACA;AACD,KAJD,EAAYA,eAAe,KAAfA,eAAe,MAA3B;;AAMA,QAAYC,eAAZ;;AAAA,eAAYA,eAAZ,EAA2B;AACzB;AACA;AACD,KAHD,EAAYA,eAAe,KAAfA,eAAe,MAA3B;;;;;;;;;;;;;;;;;ACnBA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACyDA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAAaC,qB,GAAb;AAAA;;AAKE,WAAAz5C,YAAA,GAAe,GAAf;AAOD,K;;AA8BD,QAAY05C,cAAZ;;AAAA,eAAYA,cAAZ,EAA0B;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAZD,EAAYA,cAAc,KAAdA,cAAc,MAA1B;;;;;;;;;;;;;;;;;ACnGA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAAaC,U;;;;QAsBAC,I;;;;QAoBAC,gB,GAqBX,4BAA4B;AAAA,UAAhBvkF,IAAgB,uEAAJ,EAAI;;AAAA;;AAC1B,WAAKwkF,OAAL,GAAexkF,IAAI,CAACwkF,OAAL,IAAgBxkF,IAAI,CAAClC,EAApC;AACA,WAAKysB,QAAL,GAAgBvqB,IAAI,CAACuqB,QAArB;AACA,WAAKF,MAAL,GAAcrqB,IAAI,CAACqqB,MAAnB;AACA,WAAKvgB,QAAL,GAAgB9J,IAAI,CAAC8J,QAArB;AACA,WAAK26E,cAAL,GAAsBzkF,IAAI,CAACykF,cAAL,IAAuBzkF,IAAI,CAAC09B,aAA5B,IAA6C,EAAnE;AACA,WAAKzR,WAAL,GAAmBjsB,IAAI,CAACisB,WAAxB;AACA,WAAKha,UAAL,GAAkBjS,IAAI,CAACiS,UAAvB;AACA,WAAKlJ,WAAL,GAAmB/I,IAAI,CAAC+I,WAAxB;AACD,K;;AAyBI,QAAM27E,WAAW,GAAc,CACpC;AAAE5mF,QAAE,EAAE,CAAN;AAAS4M,UAAI,EAAE,cAAf;AAA+Bi6E,WAAK,EAAE;AAAtC,KADoC,EAEpC;AAAE7mF,QAAE,EAAE,CAAN;AAAS4M,UAAI,EAAE,eAAf;AAAgCi6E,WAAK,EAAE;AAAvC,KAFoC,EAGpC;AAAE7mF,QAAE,EAAE,CAAN;AAAS4M,UAAI,EAAE,eAAf;AAAgCi6E,WAAK,EAAE;AAAvC,KAHoC,EAIpC;AAAE7mF,QAAE,EAAE,CAAN;AAAS4M,UAAI,EAAE,eAAf;AAAgCi6E,WAAK,EAAE;AAAvC,KAJoC,EAKpC;AAAE7mF,QAAE,EAAE,CAAN;AAAS4M,UAAI,EAAE,eAAf;AAAgCi6E,WAAK,EAAE;AAAvC,KALoC,CAA/B;AAQA,QAAMC,WAAW,GAAc,CACpC;AACE9mF,QAAE,EAAE,CADN;AAEE+mF,wBAAkB,EAAE,GAFtB;AAGEC,aAAO,EAAE,aAHX;AAIEC,yBAAmB,EAAE,GAJvB;AAKEC,gBAAU,EAAE,CALd;AAMEC,cAAQ,EAAE,IANZ;AAOExrC,WAAK,EAAE,aAPT;AAQEyrC,oBAAc,EAAE;AARlB,KADoC,EAWpC;AACEpnF,QAAE,EAAE,CADN;AAEE+mF,wBAAkB,EAAE,GAFtB;AAGEC,aAAO,EAAE,aAHX;AAIEC,yBAAmB,EAAE,GAJvB;AAKEC,gBAAU,EAAE,CALd;AAMEC,cAAQ,EAAE,KANZ;AAOExrC,WAAK,EAAE,cAPT;AAQEyrC,oBAAc,EAAE;AARlB,KAXoC,CAA/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9FP,QAAYC,uBAAZ;;AAAA,eAAYA,uBAAZ,EAAmC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAbD,EAAYA,uBAAuB,KAAvBA,uBAAuB,MAAnC;;QAeaC,oB,GAGX,gCAAsC;AAAA,UAAnBz4D,OAAmB,uEAAJ,EAAI;;AAAA;;AAAnB,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACE,sBAA/B;AAE+B,K;;QAG7BC,2B,GAGX,qCAAmB34D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACI,8BAA/B;AAE0B,K;;QAGxBC,2B,GAGX,qCAAmB74D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACM,8BAA/B;AAE0B,K;;QAGxBC,mB,GAGX,6BAAmB/4D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACQ,qBAA/B;AAE0B,K;;QAGxBC,0B,GAGX,oCAAmBj5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACU,6BAA/B;AAE0B,K;;QAGxBC,0B,GAGX,oCAAmBn5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACY,6BAA/B;AAE0B,K;;QAGxBC,sB,GAGX,gCAAmBr5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACc,wBAA/B;AAE0B,K;;QAGxBC,6B,GAGX,uCAAmBv5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACgB,gCAA/B;AAE0B,K;;QAGxBC,6B,GAGX,uCAAmBz5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACkB,gCAA/B;AAE0B,K;;QAGxBC,sB,GAGX,gCAAmB35D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACoB,wBAA/B;AAE0B,K;;QAGxBC,6B,GAGX,uCAAmB75D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACsB,gCAA/B;AAE0B,K;;QAGxBC,6B,GAGX,uCAAmB/5D,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAOy6E,uBAAuB,CAACwB,gCAA/B;AAE0B,K;;QAoBxBC,mB,GACX,6BAAoBnP,OAApB,EAA8CoD,WAA9C,EAAyE;AAAA;;AAAA;;AAArD,WAAApD,OAAA,GAAAA,OAAA;AAA0B,WAAAoD,WAAA,GAAAA,WAAA;AAG9C,WAAAgM,oBAAA,GAAwC,KAAKpP,OAAL,CAAap3E,IAAb,CACtC,6DAAO8kF,uBAAuB,CAACE,sBAA/B,CADsC,EAEtC,2DAAI,UAACpmE,MAAD;AAAA,eAAkCA,MAAM,CAAC0N,OAAzC;AAAA,OAAJ,CAFsC,EAGtC,iEAAU,UAAAA,OAAO,EAAI;AACnB,eAAO,QAAI,CAACkuD,WAAL,CAAiBgM,oBAAjB,CAAsCl6D,OAAO,CAACtgB,KAA9C,EAAqDsgB,OAAO,CAACrgB,MAA7D,EAAqEjM,IAArE,CACL,iEAAU,UAAC6c,QAAD,EAAmB;AAC3B,iBAAO,uEAAG,IAAIooE,2BAAJ,CAAgCpoE,QAAQ,CAAC89D,OAAzC,CAAH,CAAP;AACD,SAFD,CADK,EAIL,kEAAW,UAAA99D,QAAQ;AAAA,iBACjB,uEACE,IAAIsoE,2BAAJ,CAAgCtoE,QAAQ,CAAC7a,KAAzC,CADF,EAEE,IAAI,uDAAJ,CAAmB;AAAE8G,mBAAO,EAAE;AAAX,WAAnB,CAFF,CADiB;AAAA,SAAnB,CAJK,CAAP;AAWD,OAZD,CAHsC,CAAxC;AAmBA,WAAA29E,mBAAA,GAAuC,KAAKrP,OAAL,CAAap3E,IAAb,CACrC,6DAAO8kF,uBAAuB,CAACQ,qBAA/B,CADqC,EAErC,2DAAI,UAAC1mE,MAAD;AAAA,eAAiCA,MAAM,CAAC0N,OAAxC;AAAA,OAAJ,CAFqC,EAGrC,iEAAU,UAAAA,OAAO,EAAI;AACnB,eAAO,QAAI,CAACkuD,WAAL,CAAiBiM,mBAAjB,CAAqCn6D,OAArC,EAA8CtsB,IAA9C,CACL,iEAAU,UAAC6c,QAAD,EAAmB;AAC3B,iBAAO,uEACL,IAAI0oE,0BAAJ,CAA+B,MAAD,OAAC,CAAD,kBAAMj5D,OAAN,CAAC,EAAiBzP,QAAjB,CAA/B,CADK,EAEL,IAAI,uDAAJ,CAAmB;AAAE/T,mBAAO,kBAAWwjB,OAAO,CAACpC,QAAnB;AAAT,WAAnB,CAFK,EAGL,IAAI,mDAAJ,EAHK,CAAP;AAKD,SAND,CADK,EAQL,kEAAW,UAAArN,QAAQ;AAAA,iBAAI,uEAAG,IAAI4oE,0BAAJ,CAA+B5oE,QAAQ,CAAC7a,KAAxC,CAAH,CAAJ;AAAA,SAAnB,CARK,CAAP;AAUD,OAXD,CAHqC,CAAvC;AAkBA,WAAA0kF,sBAAA,GAA0C,KAAKtP,OAAL,CAAap3E,IAAb,CACxC,6DAAO8kF,uBAAuB,CAACc,wBAA/B,CADwC,EAExC,2DAAI,UAAChnE,MAAD;AAAA,eAAoCA,MAAM,CAAC0N,OAA3C;AAAA,OAAJ,CAFwC,EAGxC,iEAAU,UAAAA,OAAO,EAAI;AACnB,eAAO,QAAI,CAACkuD,WAAL,CAAiBkM,sBAAjB,CAAwCp6D,OAAxC,EAAiDtsB,IAAjD,CACL,iEAAU,UAAC6c,QAAD,EAAmB;AAC3B,iBAAO,uEACL,IAAIgpE,6BAAJ,CAAkCv5D,OAAlC,CADK,EAEL,IAAI,uDAAJ,CAAmB;AAAExjB,mBAAO,kBAAWwjB,OAAO,CAACpC,QAAnB;AAAT,WAAnB,CAFK,EAGL,IAAI,mDAAJ,EAHK,CAAP;AAKD,SAND,CADK,EAQL,kEAAW,UAAArN,QAAQ;AAAA,iBAAI,uEAAG,IAAIkpE,6BAAJ,CAAkClpE,QAAQ,CAAC7a,KAA3C,CAAH,CAAJ;AAAA,SAAnB,CARK,CAAP;AAUD,OAXD,CAHwC,CAA1C;AAkBA,WAAA2kF,sBAAA,GAA0C,KAAKvP,OAAL,CAAap3E,IAAb,CACxC,6DAAO8kF,uBAAuB,CAACoB,wBAA/B,CADwC,EAExC,2DAAI,UAACtnE,MAAD;AAAA,eAAoCA,MAAM,CAAC0N,OAA3C;AAAA,OAAJ,CAFwC,EAGxC,iEAAU,UAAAA,OAAO,EAAI;AACnB,eAAO,QAAI,CAACkuD,WAAL,CAAiBmM,sBAAjB,CAAwCr6D,OAAxC,EAAiDtsB,IAAjD,CACL,iEAAU,YAAM;AACd,iBAAO,uEACL,IAAImmF,6BAAJ,CAAkC75D,OAAlC,CADK,EAEL,IAAI,uDAAJ,CAAmB;AAAExjB,mBAAO,sCAA+BwjB,OAAO,CAACpC,QAAvC;AAAT,WAAnB,CAFK,CAAP;AAID,SALD,CADK,EAOL,kEAAW,UAAArN,QAAQ;AAAA,iBACjB,uEACE,IAAIwpE,6BAAJ,CAAkC;AAAE3gF,gBAAI,EAAE4mB,OAAR;AAAiBtqB,iBAAK,EAAE6a,QAAQ,CAAC7a;AAAjC,WAAlC,CADF,EAEE,IAAI,uDAAJ,CAAmB;AAAE8G,mBAAO,6CAAsC+T,QAAQ,CAAC7a,KAA/C;AAAT,WAAnB,CAFF,CADiB;AAAA,SAAnB,CAPK,CAAP;AAcD,OAfD,CAHwC,CAA1C;AA1D2E,K;;;uBADhEukF,mB,EAAmB,6G,EAAA,8G;AAAA,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;AAMZ,gBADC,8DACD,G,6BAAA,E,sBAAA,E,MAAA;;AAmBA,gBADC,8DACD,G,6BAAA,E,qBAAA,E,MAAA;;AAkBA,gBADC,8DACD,G,6BAAA,E,wBAAA,E,MAAA;;AAkBA,gBADC,8DACD,G,6BAAA,E,wBAAA,E,MAAA;;;sEA3DWA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACVrkF,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;AA0FzB,aAAS0kF,OAAT,GAA0F;AAAA,UAAzE9lF,KAAyE,uEAA9C;AAAE48B,aAAK,EAAE;AAAT,OAA8C;AAAA,UAA/B9e,MAA+B;;AAC/F,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAKy6E,uBAAuB,CAACE,sBAA7B;AAAqD;AACnD,mBAAO,MAAP,OAAO,CAAP,kBAAYlkF,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAKk/E,uBAAuB,CAACI,8BAA7B;AAA6D;AAC3D,mBAAO,MAAP,OAAO,CAAP,kBACKpkF,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAER83B,mBAAK,EAAE,+DAAa9e,MAAM,CAAC0N,OAApB,EAA6B,UAA7B;AAFC,aADH,CAAP;AAKD;;AAED,aAAKw4D,uBAAuB,CAACM,8BAA7B;AAA6D;AAC3D,mBAAO,MAAP,OAAO,CAAP,kBAAYtkF,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAKk/E,uBAAuB,CAACQ,qBAA7B;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBAAYxkF,KAAZ,CAAO,EAAU;AAAE68B,oCAAsB,EAAE,IAA1B;AAAgCtsB,qBAAO,EAAE;AAAzC,aAAV,CAAP;AACD;;AAED,aAAKyzE,uBAAuB,CAACU,6BAA7B;AAA4D;AAC1D,mBAAO,MAAP,OAAO,CAAP,kBACK1kF,KADL,CAAO,EACG;AACR68B,oCAAsB,EAAE,KADhB;AAERD,mBAAK,EAAE,4FAAiB58B,KAAK,CAAC48B,KAAvB,IAA8B,IAAI,wDAAJ,CAAqB9e,MAAM,CAAC0N,OAA5B,CAA9B,IAAqE,UAArE,CAFC;AAGRjb,qBAAO,EAAE;AAHD,aADH,CAAP;AAMD;;AAED,aAAKyzE,uBAAuB,CAACY,6BAA7B;AAA4D;AAC1D,mBAAO,MAAP,OAAO,CAAP,kBAAY5kF,KAAZ,CAAO,EAAU;AAAE68B,oCAAsB,EAAE,KAA1B;AAAiC37B,mBAAK,EAAE4c,MAAM,CAAC0N,OAA/C;AAAwDjb,qBAAO,EAAE;AAAjE,aAAV,CAAP;AACD;;AAED,aAAKyzE,uBAAuB,CAACc,wBAA7B;AAAuD;AACrD,mBAAO,MAAP,OAAO,CAAP,kBAAY9kF,KAAZ,CAAO,EAAU;AAAE+8B,gCAAkB,EAAE;AAAtB,aAAV,CAAP;AACD;;AAED,aAAKinD,uBAAuB,CAACgB,gCAA7B;AAA+D;AAC7D,mBAAO,MAAP,OAAO,CAAP,kBACKhlF,KADL,CAAO,EACG;AACR+8B,gCAAkB,EAAE,KADZ;AAERH,mBAAK,EAAE58B,KAAK,CAAC48B,KAAN,CAAYj3B,MAAZ,CAAmB,UAAAf,IAAI;AAAA,uBAAIA,IAAI,CAACwkB,QAAL,KAAkBtL,MAAM,CAAC0N,OAAP,CAAepC,QAArC;AAAA,eAAvB;AAFC,aADH,CAAP;AAKD;;AAED,aAAK46D,uBAAuB,CAACoB,wBAA7B;AAAuD;AACrD,mBAAO,MAAP,OAAO,CAAP,kBAAYplF,KAAZ,CAAO,EAAU;AAAE68B,oCAAsB,EAAE,IAA1B;AAAgCtsB,qBAAO,EAAE;AAAzC,aAAV,CAAP;AACD;;AAED,aAAKyzE,uBAAuB,CAACsB,gCAA7B;AAA+D;AAC7D,mBAAO,MAAP,OAAO,CAAP,kBACKtlF,KADL,CAAO,EACG;AACR68B,oCAAsB,EAAE,KADhB;AAERD,mBAAK,EAAE58B,KAAK,CAAC48B,KAAN,CAAYpgC,GAAZ,CAAgB,UAAAoI,IAAI,EAAI;AAC7B,oBAAIA,IAAI,CAACy+E,OAAL,KAAiBvlE,MAAM,CAAC0N,OAAP,CAAe63D,OAApC,EAA6C;AAC3Cz+E,sBAAI,GAAGkZ,MAAM,CAAC0N,OAAd;AACD;;AACD,uBAAO5mB,IAAP;AACD,eALM,CAFC;AAQR2L,qBAAO,EAAE;AARD,aADH,CAAP;AAWD;;AAED,aAAKyzE,uBAAuB,CAACwB,gCAA7B;AAA+D;AAC7D,mBAAO,MAAP,OAAO,CAAP,kBACKxlF,KADL,CAAO,EACG;AACR68B,oCAAsB,EAAE,KADhB;AAERD,mBAAK,EAAE58B,KAAK,CAAC48B,KAAN,CAAYpgC,GAAZ,CAAgB,UAAAoI,IAAI,EAAI;AAC7B,oBAAIA,IAAI,CAACy+E,OAAL,KAAiBvlE,MAAM,CAAC0N,OAAP,CAAe5mB,IAAf,CAAoBy+E,OAAzC,EAAkD;AAChDz+E,sBAAI,GAAGkZ,MAAM,CAAC0N,OAAP,CAAe5mB,IAAf,CAAoB04B,cAA3B;AACD;;AACD,uBAAO14B,IAAP;AACD,eALM,CAFC;AAQR1D,mBAAK,EAAE4c,MAAM,CAAC0N,OAAP,CAAetqB,KARd;AASRqP,qBAAO,EAAE;AATD,aADH,CAAP;AAYD;;AAED;AAAS;AACP,mBAAOvQ,KAAP;AACD;AAjFH;AAmFD;;;;;;;;;;;;;;;;;AC5RD;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAM+lF,MAAM,GAAG,CACpB;AACExvE,aAAO,EAAE,uDADX;AAEEuhC,YAAM,EAAE;AAFV,KADoB,EAKpB;AACEvhC,aAAO,EAAE,qEADX;AAEEuhC,YAAM,EAAE;AAFV,KALoB,EASpB;AACEvhC,aAAO,EAAE,wBADX;AAEEuhC,YAAM,EAAE;AAFV,KAToB,EAapB;AACEvhC,aAAO,EAAE,cADX;AAEEuhC,YAAM,EAAE;AAFV,KAboB,EAiBpB;AACEvhC,aAAO,EAAE,0EADX;AAEEuhC,YAAM,EAAE;AAFV,KAjBoB,EAqBpB;AACEvhC,aAAO,EAAE,kEADX;AAEEuhC,YAAM,EAAE;AAFV,KArBoB,EAyBpB;AACEvhC,aAAO,EAAE,yEADX;AAEEuhC,YAAM,EAAE;AAFV,KAzBoB,EA6BpB;AACEvhC,aAAO,EAAE,4CADX;AAEEuhC,YAAM,EAAE;AAFV,KA7BoB,EAiCpB;AACEvhC,aAAO,EAAE,0EADX;AAEEuhC,YAAM,EAAE;AAFV,KAjCoB,EAqCpB;AACEvhC,aAAO,EAAE,kEADX;AAEEuhC,YAAM,EAAE;AAFV,KArCoB,EAyCpB;AACEvhC,aAAO,EAAE,+EADX;AAEEuhC,YAAM,EAAE;AAFV,KAzCoB,EA6CpB;AACEvhC,aAAO,EAAE,qDADX;AAEEuhC,YAAM,EAAE;AAFV,KA7CoB,EAiDpB;AACEvhC,aAAO,EAAE,6CADX;AAEEuhC,YAAM,EAAE;AAFV,KAjDoB,EAqDpB;AACEvhC,aAAO,EAAE,yEADX;AAEEuhC,YAAM,EAAE;AAFV,KArDoB,EAyDpB;AACEvhC,aAAO,EAAE,oFADX;AAEEuhC,YAAM,EAAE;AAFV,KAzDoB,EA6DpB;AACEvhC,aAAO,EACL,uHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA7DoB,EAkEpB;AACEvhC,aAAO,EAAE,2DADX;AAEEuhC,YAAM,EAAE;AAFV,KAlEoB,EAsEpB;AACEvhC,aAAO,EACL,oHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KAtEoB,EA2EpB;AACEvhC,aAAO,EAAE,iEADX;AAEEuhC,YAAM,EAAE;AAFV,KA3EoB,EA+EpB;AACEvhC,aAAO,EAAE,oGADX;AAEEuhC,YAAM,EAAE;AAFV,KA/EoB,EAmFpB;AACEvhC,aAAO,EAAE,gEADX;AAEEuhC,YAAM,EAAE;AAFV,KAnFoB,EAuFpB;AACEvhC,aAAO,EAAE,qEADX;AAEEuhC,YAAM,EAAE;AAFV,KAvFoB,EA2FpB;AACEvhC,aAAO,EACL,gHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA3FoB,EAgGpB;AACEvhC,aAAO,EACL,4GAFJ;AAGEuhC,YAAM,EAAE;AAHV,KAhGoB,EAqGpB;AACEvhC,aAAO,EAAE,0EADX;AAEEuhC,YAAM,EAAE;AAFV,KArGoB,EAyGpB;AACEvhC,aAAO,EAAE,2DADX;AAEEuhC,YAAM,EAAE;AAFV,KAzGoB,EA6GpB;AACEvhC,aAAO,EACL,8GAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA7GoB,EAkHpB;AACEvhC,aAAO,EAAE,4CADX;AAEEuhC,YAAM,EAAE;AAFV,KAlHoB,EAsHpB;AACEvhC,aAAO,EAAE,4DADX;AAEEuhC,YAAM,EAAE;AAFV,KAtHoB,EA0HpB;AACEvhC,aAAO,EAAE,2EADX;AAEEuhC,YAAM,EAAE;AAFV,KA1HoB,EA8HpB;AACEvhC,aAAO,EACL,gHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA9HoB,EAmIpB;AACEvhC,aAAO,EAAE,+EADX;AAEEuhC,YAAM,EAAE;AAFV,KAnIoB,EAuIpB;AACEvhC,aAAO,EAAE,8DADX;AAEEuhC,YAAM,EAAE;AAFV,KAvIoB,EA2IpB;AACEvhC,aAAO,EAAE,8BADX;AAEEuhC,YAAM,EAAE;AAFV,KA3IoB,EA+IpB;AACEvhC,aAAO,EAAE,kEADX;AAEEuhC,YAAM,EAAE;AAFV,KA/IoB,EAmJpB;AACEvhC,aAAO,EAAE,oFADX;AAEEuhC,YAAM,EAAE;AAFV,KAnJoB,EAuJpB;AACEvhC,aAAO,EAAE,iEADX;AAEEuhC,YAAM,EAAE;AAFV,KAvJoB,EA2JpB;AACEvhC,aAAO,EAAE,2DADX;AAEEuhC,YAAM,EAAE;AAFV,KA3JoB,EA+JpB;AACEvhC,aAAO,EACL,oHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA/JoB,EAoKpB;AACEvhC,aAAO,EAAE,mFADX;AAEEuhC,YAAM,EAAE;AAFV,KApKoB,EAwKpB;AACEvhC,aAAO,EAAE,uDADX;AAEEuhC,YAAM,EAAE;AAFV,KAxKoB,EA4KpB;AACEvhC,aAAO,EAAE,iEADX;AAEEuhC,YAAM,EAAE;AAFV,KA5KoB,EAgLpB;AACEvhC,aAAO,EAAE,gFADX;AAEEuhC,YAAM,EAAE;AAFV,KAhLoB,EAoLpB;AACEvhC,aAAO,EAAE,mCADX;AAEEuhC,YAAM,EAAE;AAFV,KApLoB,EAwLpB;AACEvhC,aAAO,EAAE,gDADX;AAEEuhC,YAAM,EAAE;AAFV,KAxLoB,EA4LpB;AACEvhC,aAAO,EAAE,uDADX;AAEEuhC,YAAM,EAAE;AAFV,KA5LoB,EAgMpB;AACEvhC,aAAO,EAAE,oGADX;AAEEuhC,YAAM,EAAE;AAFV,KAhMoB,EAoMpB;AACEvhC,aAAO,EAAE,kFADX;AAEEuhC,YAAM,EAAE;AAFV,KApMoB,EAwMpB;AACEvhC,aAAO,EAAE,oFADX;AAEEuhC,YAAM,EAAE;AAFV,KAxMoB,EA4MpB;AACEvhC,aAAO,EACL,kKAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA5MoB,EAiNpB;AACEvhC,aAAO,EAAE,kDADX;AAEEuhC,YAAM,EAAE;AAFV,KAjNoB,EAqNpB;AACEvhC,aAAO,EAAE,mCADX;AAEEuhC,YAAM,EAAE;AAFV,KArNoB,EAyNpB;AACEvhC,aAAO,EAAE,kDADX;AAEEuhC,YAAM,EAAE;AAFV,KAzNoB,EA6NpB;AACEvhC,aAAO,EAAE,sDADX;AAEEuhC,YAAM,EAAE;AAFV,KA7NoB,EAiOpB;AACEvhC,aAAO,EAAE,0EADX;AAEEuhC,YAAM,EAAE;AAFV,KAjOoB,EAqOpB;AACEvhC,aAAO,EAAE,kDADX;AAEEuhC,YAAM,EAAE;AAFV,KArOoB,EAyOpB;AACEvhC,aAAO,EACL,oHAFJ;AAGEuhC,YAAM,EAAE;AAHV,KAzOoB,EA8OpB;AACEvhC,aAAO,EACL,gIAFJ;AAGEuhC,YAAM,EAAE;AAHV,KA9OoB,EAmPpB;AACEvhC,aAAO,EAAE,+DADX;AAEEuhC,YAAM,EAAE;AAFV,KAnPoB,EAuPpB;AACEvhC,aAAO,EAAE,qFADX;AAEEuhC,YAAM,EAAE;AAFV,KAvPoB,EA2PpB;AACEvhC,aAAO,EAAE,4DADX;AAEEuhC,YAAM,EAAE;AAFV,KA3PoB,EA+PpB;AACEvhC,aAAO,EAAE,oGADX;AAEEuhC,YAAM,EAAE;AAFV,KA/PoB,EAmQpB;AACEvhC,aAAO,EACL,6HAFJ;AAGEuhC,YAAM,EAAE;AAHV,KAnQoB,EAwQpB;AACEvhC,aAAO,EAAE,+CADX;AAEEuhC,YAAM,EAAE;AAFV,KAxQoB,EA4QpB;AACEvhC,aAAO,EAAE,mCADX;AAEEuhC,YAAM,EAAE;AAFV,KA5QoB,EAgRpB;AACEvhC,aAAO,EAAE,kDADX;AAEEuhC,YAAM,EAAE;AAFV,KAhRoB,EAoRpB;AACEvhC,aAAO,EAAE,2CADX;AAEEuhC,YAAM,EAAE;AAFV,KApRoB,CAAf;;;;;;;;;;;;;;;;ACLP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIO,QAAMkuC,YAAY,GAAc;AACrC7lF,qBAAe,EAAE,KADoB;AAErCyE,UAAI,EAAE,IAF+B;AAGrC4sB,kBAAY,EAAE,IAHuB;AAIrC1sB,gBAAU,EAAE,KAJyB;AAKrCw5C,iBAAW,EAAE;AACXl1B,gBAAQ,EAAE,IADC;AAEXzgB,gBAAQ,EAAE,IAFC;AAGXs9E,iBAAS,EAAE,IAHA;AAIX7pC,gBAAQ,EAAE;AAJC,OALwB;AAWrC8pC,+BAAyB,EAAE,IAXU;AAYrCC,wBAAkB,EAAE,KAZiB;AAarCC,aAAO,EAAE,EAb4B;AAcrC1nD,aAAO,EAAE,EAd4B;AAerCgJ,uBAAiB,EAAE,KAfkB;AAgBrCjJ,8BAAwB,EAAE;AAhBW,KAAhC;;AAmBA,aAAS4nD,aAAT,CAAuBC,aAAvB,EAA2C;AAChD,aAAO,UAAUtmF,KAAV,EAAsB8d,MAAtB,EAAmC;AACxC,eAAOwoE,aAAa,CAACxoE,MAAM,CAACvU,IAAP,KAAgB,yDAAgBimD,MAAhC,GAAyCvnD,SAAzC,GAAqDjI,KAAtD,EAA6D8d,MAA7D,CAApB;AACD,OAFD;AAGD;;AAEM,aAASgoE,OAAT,GAA4D;AAAA,UAA3C9lF,KAA2C,uEAAnCgmF,YAAmC;AAAA,UAArBloE,MAAqB;;AACjE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,yDAAgBqlD,KAArB;AAA4B;AAC1B,mBAAO,MAAP,OAAO,CAAP,kBACK5uD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,IADN;AAER1sB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgB4qD,oBAArB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACK1vD,KADL,CAAO,EACG;AACR0nC,+BAAiB,EAAE;AADX,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBonB,aAArB;AAAoC;AAClC,gBAAIhxC,MAAM,CAAC0N,OAAP,CAAemnB,KAAnB,EAA0B;AACxBtzC,0BAAY,CAAC23E,UAAb,CAAwB,gEAAxB;AACA,qBAAO,MAAP,OAAO,CAAP,kBACKh3E,KADL,CAAO,EACG;AACRG,+BAAe,EAAE,IADT;AAERyE,oBAAI,EAAEkZ,MAAM,CAAC0N,OAFL;AAGRgG,4BAAY,EAAE,IAHN;AAIR1sB,0BAAU,EAAE,KAJJ;AAKR45B,uBAAO,EAAE;AAAEg4C,gCAAc,EAAE54D,MAAM,CAAC0N,OAAP,CAAekrD,cAAjC;AAAiD6P,8BAAY,EAAE;AAA/D,iBALD;AAMRnnD,oCAAoB,EAAEthB,MAAM,CAAC0N,OAAP,CAAekrD,cAAf,GAAgC,EAAhC,GAAqC54D,MAAM,CAAC0N,OAAP,CAAe4T;AANlE,eADH,CAAP;AASD;;AACD,gBAAIthB,MAAM,CAAC0N,OAAP,CAAekrD,cAAnB,EAAmC;AACjC,qBAAO,MAAP,OAAO,CAAP,kBACK12E,KADL,CAAO,EACG;AACR8E,0BAAU,EAAE,KADJ;AAER0sB,4BAAY,EAAE,IAFN;AAGRkN,uBAAO,EAAE;AAAEg4C,gCAAc,EAAE,IAAlB;AAAwB6P,8BAAY,EAAE;AAAtC,iBAHD;AAIRnnD,oCAAoB,EAAEthB,MAAM,CAAC0N,OAAP,CAAe4T;AAJ7B,eADH,CAAP;AAOD;;AACD,mBAAO,MAAP,OAAO,CAAP,EAAO,EAAKp/B,KAAL,CAAP;AACD;;AACD,aAAK,yDAAgBgvD,aAArB;AAAoC;AAClC,mBAAO,MAAP,OAAO,CAAP,kBACKhvD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE1T,MAAM,CAAC0N,OAAP,IAAkB,iCADxB;AAER1mB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBkvD,iBAArB;AAAwC;AACtC,gBAAIh0D,KAAK,CAACG,eAAV,EAA2B;AACzB,qBAAO,MAAP,OAAO,CAAP,EAAO,EAAKH,KAAL,CAAP;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKA,KADL,CAAO,EACG;AACRG,6BAAe,EAAE2d,MAAM,CAAC0N,OAAP,CAAerrB;AADxB,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBivD,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACKpvD,KADL,CAAO,EACG;AACR4E,kBAAI,EAAEkZ,MAAM,CAAC0N,OADL;AAERgG,0BAAY,EAAE,IAFN;AAGR1sB,wBAAU,EAAE,KAHJ;AAIRw5C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEx5C,0BAAU,EAAE;AAAd,eAAtB,CAJL;AAKR0hF,0BAAY,EAAE1oE,MAAM,CAAC0N,OAAP,CAAeg7D;AALrB,aADH,CAAP;AAQD;;AACD,aAAK,yDAAgBl3B,cAArB;AAAqC;AACnC,gBAAMpuD,KAAK,GAAG4c,MAAM,CAAC0N,OAAP,GAAiB1N,MAAM,CAAC0N,OAAxB,GAAkC,qCAAhD;AAEA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAEtwB,KADN;AAER4D,wBAAU,EAAE,KAFJ;AAGRw5C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEx5C,0BAAU,EAAE;AAAd,eAAtB;AAHL,aADH,CAAP;AAMD;;AACD,aAAK,yDAAgBoqD,MAArB;AAA6B;AAC3B,mBAAO,MAAP,OAAO,CAAP,kBACKlvD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,IADJ;AAERw5C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEx5C,0BAAU,EAAE;AAAd,eAAtB;AAFL,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBgrD,kBAArB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBACK9vD,KADL,CAAO,EACG;AACRs+C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAA2BxgC,MAAM,CAAC0N,OAAlC;AADL,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBwkC,2BAArB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBACKhwD,KADL,CAAO,EACG;AACRs+C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEx5C,0BAAU,EAAE;AAAd,eAAtB;AADL,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBorD,mCAArB;AAA0D;AACxD,mBAAO,MAAP,OAAO,CAAP,kBACKlwD,KADL,CAAO,EACG;AACRs+C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEn0B,8BAAc,EAAErM,MAAM,CAAC0N,OAAP,CAAeK,MAAjC;AAAyC/mB,0BAAU,EAAE;AAArD,eAAtB;AADL,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBsrD,iCAArB;AAAwD;AACtD,mBAAO,MAAP,OAAO,CAAP,kBACKpwD,KADL,CAAO,EACG;AACRs+C,yBAAW,EAAE,MAAF,OAAE,CAAF,kBAAOt+C,KAAK,CAACs+C,WAAb,CAAE,EAAsB;AAAEn0B,8BAAc,EAAE,IAAlB;AAAwBrlB,0BAAU,EAAE;AAApC,eAAtB;AADL,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBwrD,gBAArB;AAAuC;AACrC,mBAAO,MAAP,OAAO,CAAP,kBACKtwD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,IADN;AAER1sB,wBAAU,EAAE,IAFJ;AAGRohF,uCAAyB,EAAE,IAHnB;AAIRC,gCAAkB,EAAE;AAJZ,aADH,CAAP;AAOD;;AAED,aAAK,yDAAgB31B,wBAArB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACKxwD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERohF,uCAAyB,EAAE,IAFnB;AAGRC,gCAAkB,EAAE;AAHZ,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgBz1B,wBAArB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACK1wD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERohF,uCAAyB,EAAEpoE,MAAM,CAAC0N,OAAP,IAAkB,kDAFrC;AAGR26D,gCAAkB,EAAE;AAHZ,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgBv1B,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACK5wD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,IADN;AAER1sB,wBAAU,EAAE,IAFJ;AAGRqhF,gCAAkB,EAAE,IAHZ;AAIRD,uCAAyB,EAAE;AAJnB,aADH,CAAP;AAOD;;AAED,aAAK,yDAAgBp1B,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACK9wD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERohF,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBl1B,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKhxD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERohF,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBh1B,eAArB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBACKlxD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,IADN;AAER1sB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBssD,uBAArB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACKpxD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,IADN;AAER1sB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBwsD,uBAArB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACKtxD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE,8CADN;AAER1sB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBktD,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACKhyD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBotD,sBAArB;AACA,aAAK,yDAAgBE,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKpyD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBwtD,kBAArB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBACKtyD,KADL,CAAO,EACG;AACRs+C,yBAAW,EAAE0nC,YAAY,CAAC1nC;AADlB,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBkU,wBAArB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACKxyD,KADL,CAAO,EACG;AACRwxB,0BAAY,EAAE;AADN,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBsgC,yBAArB;AAAgD;AAC9C,mBAAO,MAAP,OAAO,CAAP,kBACK9xD,KADL,CAAO,EACG;AACRqgC,gCAAkB,EAAEviB,MAAM,CAAC0N;AADnB,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBgmC,eAArB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBACKxxD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,IADJ;AAER25B,sCAAwB,EAAE,IAFlB;AAGRG,mCAAqB,EAAE;AAHf,aADH,CAAP;AAMD;;AACD,aAAK,yDAAgB8yB,uBAArB;AAA8C;AAC5C,gBAAIryD,YAAY,CAAC6/B,OAAb,CAAqB,UAArB,CAAJ,EAAsC;AACpC7/B,0BAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCuR,IAAI,CAACiN,MAAM,CAAC0N,OAAP,CAAe7iB,QAAhB,CAArC;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK3I,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAER25B,sCAAwB,EAAE,KAFlB;AAGRG,mCAAqB,EAAE;AAHf,aADH,CAAP;AAMD;;AACD,aAAK,yDAAgBgzB,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACK5xD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAER25B,sCAAwB,EAAE,KAFlB;AAGRG,mCAAqB,EAAE;AAHf,aADH,CAAP;AAMD;;AACD,aAAK,yDAAgB8zB,WAArB;AAAkC;AAChC,mBAAO,MAAP,OAAO,CAAP,kBACK1yD,KADL,CAAO,EACG;AACRomF,qBAAO,EAAE,MAAF,OAAE,CAAF,kBAAOpmF,KAAK,CAAComF,OAAb,CAAE,EAAkB;AAAEthF,0BAAU,EAAE;AAAd,eAAlB;AADD,aADH,CAAP;AAID;;AACD,aAAK,yDAAgB8tD,mBAArB;AAA0C;AACxC,mBAAO,MAAP,OAAO,CAAP,kBACK5yD,KADL,CAAO,EACG;AACRomF,qBAAO,EAAE,MAAF,OAAE,CAAF,gCAAOpmF,KAAK,CAAComF,OAAb,GAAyBtoE,MAAM,CAAC0N,OAAhC,CAAE,EAAqC;AAAE1mB,0BAAU,EAAE;AAAd,eAArC;AADD,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBguD,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACK9yD,KADL,CAAO,EACG;AACRomF,qBAAO,EAAE,MAAF,OAAE,CAAF,kBAAOpmF,KAAK,CAAComF,OAAb,CAAE,EAAkB;AAAEK,yBAAS,EAAE,IAAb;AAAmB3hF,0BAAU,EAAE;AAA/B,eAAlB;AADD,aADH,CAAP;AAID;;AACD,aAAK,yDAAgBkuD,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKhzD,KADL,CAAO,EACG;AACRomF,qBAAO,EAAE,MAAF,OAAE,CAAF,kBACFpmF,KAAK,CAAComF,OADJ,CAAE,EACS;AAChBthF,0BAAU,EAAE,KADI;AAEhB2hF,yBAAS,EAAE,CAAC3oE,MAAM,CAAC0N,OAAP,CAAene,MAFX;AAGhBq5E,wBAAQ,EAAE5oE,MAAM,CAAC0N,OAAP,CAAene,MAHT;AAIhBnI,qBAAK,EAAE4Y,MAAM,CAAC0N,OAAP,CAAene,MAAf,GAAwBrN,KAAK,CAAComF,OAAN,CAAclhF,KAAtC,GAA8C;AAJrC,eADT;AADD,aADH,CAAP;AAUD;;AAED,aAAK,yDAAgBouD,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBAAYtzD,KAAZ,CAAO,EAAU;AAAE0+B,qBAAO,EAAE;AAAE55B,0BAAU,EAAE;AAAd;AAAX,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB0uD,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAYxzD,KAAZ,CAAO,EAAU;AAAE0+B,qBAAO,EAAE,IAAI,kDAAJ,CAAY,MAAD,OAAC,CAAD,kBAAM5gB,MAAM,CAAC0N,OAAb,CAAC,EAAmB;AAAE1mB,0BAAU,EAAE;AAAd,eAAnB,CAAZ;AAAX,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB0qD,MAArB;AAA6B;AAC3B,mBAAOw2B,YAAP;AACD;;AACD;AAAS;AACP,mBAAOhmF,KAAP;AACD;AA5RH;AA8RD;;;;;;;;;;;;;;;;;AC5TD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGO,QAAMgmF,YAAY,GAAiB;AACxClnC,qBAAe,EAAE,MADuB;AAExCsB,sBAAgB,EAAE,IAFsB;AAGxCxqC,YAAM,EAAE,KAHgC;AAIxCopC,8BAAwB,EAAE;AAAE3xC,cAAM,EAAE,6DAAkBs5E;AAA5B;AAJc,KAAnC;;AAOA,aAASb,OAAT,GAA+D;AAAA,UAA9C9lF,KAA8C,uEAAtCgmF,YAAsC;AAAA,UAAxBloE,MAAwB;;AACpE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,2EAAmB4qD,iBAAxB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACKn0D,KADL,CAAO,EACG;AACR4V,oBAAM,EAAE;AADA,aADH,CAAP;AAID;;AACD,aAAK,2EAAmB6+C,yBAAxB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBACKz0D,KADL,CAAO,EACG;AACR4V,oBAAM,EAAE,IADA;AAERwqC,8BAAgB,EAAEtiC,MAAM,CAAC0N,OAAP,CAAelc,OAFzB;AAGRwvC,6BAAe,EAAEhhC,MAAM,CAAC0N,OAAP,CAAeiQ;AAHxB,aADH,CAAP;AAMD;;AACD,aAAK,2EAAmB84B,yBAAxB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBACKv0D,KADL,CAAO,EACG;AACRg/C,sCAAwB,EAAElhC,MAAM,CAAC0N;AADzB,aADH,CAAP;AAID;;AACD,aAAK,2EAAmBmpC,YAAxB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,EAAO,EACFqxB,YADE,CAAP;AAGD;;AAED;AAAS;AACP,mBAAOhmF,KAAP;AACD;AA7BH;AA+BD;;;;;;;;;;;;;;;;;AC1CD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAoBA,aAAS4mF,gCAAT,CACE9kD,SADF,EAEE+kD,aAFF,EAGEz8C,aAHF,EAG2B;AAEzB,UAAM08C,YAAY,GAAG,MAAH,OAAG,CAAH,EAAG,EAAKhlD,SAAL,CAArB;AACAglD,kBAAY,CAAC/mE,KAAb,CAAmBxJ,OAAnB,GAA6B,mEAA7B;AACAuwE,kBAAY,CAAC/mE,KAAb,CAAmBnJ,aAAnB,GAAmC,mEAAnC;AACAkwE,kBAAY,CAAC/mE,KAAb,CAAmBzJ,YAAnB,GAAkC,KAAlC;AACAwwE,kBAAY,CAAC/mE,KAAb,CAAmB/J,oBAAnB,GAA0C,KAA1C;AACA8wE,kBAAY,CAAC/mE,KAAb,CAAmBgnE,sBAAnB,GAA4C,KAA5C;AACAD,kBAAY,CAAC/mE,KAAb,CAAmBzO,eAAnB,GAAqC,6DAAkBC,QAAvD;AACAu1E,kBAAY,CAAC/mE,KAAb,CAAmBrE,WAAnB,GAAiC,CAAC,MAAD,OAAC,CAAD,kBAAM0uB,aAAN,CAAC,EAAkB;AAAEf,iBAAS,EAAE;AAAb,OAAlB,CAAD,CAAjC;AACAy9C,kBAAY,CAACprE,WAAb,GAA2B,CAAC,MAAD,OAAC,CAAD,kBAAM0uB,aAAN,CAAC,EAAkB;AAAEf,iBAAS,EAAE;AAAb,OAAlB,CAAD,CAA3B;AACAy9C,kBAAY,CAAChgD,uBAAb,GAAuC,KAAvC;AACAggD,kBAAY,CAACE,gBAAb,GAAgC/+E,SAAhC;AACA6+E,kBAAY,CAACG,cAAb,GAA8Bh/E,SAA9B;AACA6+E,kBAAY,CAAC9N,gBAAb,GAAgC,IAAhC;AACA,aAAO8N,YAAP;AACD;;AAEM,aAAShB,OAAT,GAEqB;AAAA,UAD1B9lF,KAC0B,uEADA;AAAE4mC,cAAM,EAAE,EAAV;AAAcrC,iBAAS,EAAE,IAAIzc,GAAJ;AAAzB,OACA;AAAA,UAA1BhK,MAA0B;;AAE1B,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,gEAAuB+rD,SAA5B;AACA,aAAK,gEAAuBR,WAA5B;AAAyC;AACvC90D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,IAAkC,MAAH,OAAG,CAAH,kBAC1BqD,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAD0B,CAAG,EACE;AAClC6vC,sBAAQ,EAAE,IADwB;AAElC1nC,wBAAU,EAAE,IAFsB;AAGlCgqC,wBAAU,EAAE,KAHsB;AAIlCD,wBAAU,EAAE,KAJsB;AAKlCq4C,oBAAM,EAAE;AAL0B,aADF,CAAlC;AAQA,mBAAO,MAAP,OAAO,CAAP,kBAAYlnF,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBouB,mBAA5B;AAAiD;AAC/C,gBAAMmyB,QAAQ,GAAGnnF,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAezL,KAAf,CAAqBpjB,EAAlC,CAAjB;AACA,gBAAMmlC,SAAS,GAAGhkB,MAAM,CAAC0N,OAAP,CAAezP,QAAjC;;AACA,gBAAI+B,MAAM,CAAC0N,OAAP,CAAezL,KAAf,CAAqBA,KAArB,CAA2B2xB,8BAA/B,EAA+D;AAC7Dy1C,sBAAQ,CAACzrE,WAAT,GAAuBomB,SAAS,CAACpmB,WAAV,CAAsBlf,GAAtB,CAA0B,UAACof,UAAD,EAAqB;AACpEA,0BAAU,CAAC4tB,QAAX,GAAsB,GAAtB;;AACA,oBAAI,CAAC5tB,UAAU,CAAClZ,IAAhB,EAAsB;AACpBkZ,4BAAU,CAAClZ,IAAX,GAAkB,yEAAasZ,kBAAb,CAAgCJ,UAAU,CAACnb,QAA3C,CAAlB;AACD;;AACDmb,0BAAU,CAACirB,OAAX,GAAqBsgD,QAAQ,CAACxqF,EAA9B;AACAif,0BAAU,CAAC8tB,YAAX,GAA0BC,WAAW,CAAC7B,GAAZ,KAAoBloC,IAAI,CAACC,KAAL,CAAW,sEAAoB,IAA/B,CAA9C;AACA,uBAAO+b,UAAP;AACD,eARsB,CAAvB;AASD;;AACDkmB,qBAAS,CAACprB,OAAV,GAAoBywE,QAAQ,CAACpnE,KAAT,CAAerJ,OAAnC;AACA1W,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAezL,KAAf,CAAqBpjB,EAAlC,IAAwC,MAAH,OAAG,CAAH,kBAChCwqF,QADgC,CAAG,EAC3B;AACXriF,wBAAU,EAAE,KADD;AAEXoiF,oBAAM,EAAE,KAFG;AAGXnnE,mBAAK,EAAE+hB,SAHI;AAIX0K,sBAAQ,EAAE;AAJC,aAD2B,CAAxC;AAOA,mBAAO,MAAP,OAAO,CAAP,kBAAYxsC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB4uB,iBAA5B;AAA+C;AAC7C,mBAAOx1D,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAAP;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYqD,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB8uB,iBAA5B;AAA+C;AAC7C11D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,IAAkC,MAAH,OAAG,CAAH,kBAC1BqD,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAD0B,CAAG,EACE;AAClCojB,mBAAK,EAAE,MAAF,OAAE,CAAF,kBAAO/f,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,EAAgCojB,KAAvC,CAAE,EAA0C;AAAEoG,oBAAI,EAAE,KAAR;AAAejiB,sBAAM,EAAE,uDAAesU;AAAtC,eAA1C,CAD2B;AAElC1T,wBAAU,EAAE,KAFsB;AAGlCoiF,oBAAM,EAAE;AAH0B,aADF,CAAlC;AAMA,mBAAO,MAAP,OAAO,CAAP,kBAAYlnF,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBsuB,kBAA5B;AAAgD;AAC9Cl1D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,IAAkC,MAAH,OAAG,CAAH,gCAAQqD,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAAR,GAA4CmhB,MAAM,CAAC0N,OAAnD,CAAG,EAAuD;AAAE1mB,wBAAU,EAAE;AAAd,aAAvD,CAAlC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9E,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBwwB,cAA5B;AAA4C;AAC1C,gBAAIt5C,MAAM,CAAC0N,OAAP,CAAeqb,OAAf,IAA0B/oB,MAAM,CAAC0N,OAAP,CAAezL,KAA7C,EAAoD;AAClD/f,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,gCAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,GAE/B/oB,MAAM,CAAC0N,OAAP,CAAezL,KAFgB,CAAG,EAEd;AAEvBqnE,oCAAoB,EAAE;AAFC,eAFc,CAAvC;AAMD;;AACD,gBAAI7iD,SAAS,GAAGvkC,KAAK,CAACukC,SAAtB;AACAzmB,kBAAM,CAAC0N,OAAP,CAAevZ,MAAf,CAAsBlE,OAAtB,CAA8B,UAACL,KAAD,EAAmB;AAC/C62B,uBAAS,CAACxV,GAAV,CAAcrhB,KAAd,EAAqB;AAAE3F,mBAAG,EAAE,IAAP;AAAas/B,0BAAU,EAAE;AAAzB,eAArB;AACD,aAFD;AAGA,mBAAO,MAAP,OAAO,CAAP,kBAAYrnC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX,CAAV;AAA+BrC,uBAAS,EAATA;AAA/B,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB+yB,sBAA5B;AAAoD;AAClD,gBAAIx5C,MAAM,CAAC0N,OAAP,CAAeqb,OAAnB,EAA4B;AAE1B7mC,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvCugD,oCAAoB,EAAE,KADiB;AAEvC7iD,yBAAS,EAAE,CAACzmB,MAAM,CAAC0N,OAAP,CAAeguD,OAAhB,GAA0B17D,MAAM,CAAC0N,OAAP,CAAe3sB,IAAzC,GAAgDmB,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCtC;AAFzD,eADF,CAAvC;AAKD;;AAED,gBAAIA,UAAS,GAAGvkC,KAAK,CAACukC,SAAtB;;AACA,gBAAI,CAACzmB,MAAM,CAAC0N,OAAP,CAAeguD,OAAhB,IAA2B17D,MAAM,CAAC0N,OAAP,CAAe3sB,IAA1C,IAAkDif,MAAM,CAAC0N,OAAP,CAAe3sB,IAAf,CAAoB3B,IAA1E,EAAgF;AAC9E4gB,oBAAM,CAAC0N,OAAP,CAAe3sB,IAAf,CAAoB3B,IAApB,CAAyB6Q,OAAzB,CAAiC,UAAChG,GAAD,EAAc;AAC7Cw8B,0BAAS,CAACxV,GAAV,CAAchnB,GAAG,CAAC2F,KAAlB,EAAyB;AACvB3F,qBAAG,EACDw8B,UAAS,CAAC18B,GAAV,CAAcE,GAAG,CAAC2F,KAAlB,KAA4B62B,UAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GAArD,IAA4Dw8B,UAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GAAzB,CAA6BjI,MAA7B,GAAsC,CAAlG,gCACQykC,UAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GADjC,IACsCA,GADtC,KAEI,CAACA,GAAD,CAJiB;AAKvBs/B,4BAAU,EAAE;AALW,iBAAzB;AAOD,eARD;AASD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKrnC,KADL,CAAO,EACG;AACR4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX,CADA;AAERrC,uBAAS,EAATA;AAFQ,aADH,CAAP;AAKD;;AAED,aAAK,gEAAuBqxB,4BAA5B;AAA0D;AACxD,gBAAI93C,MAAM,CAAC0N,OAAP,CAAeqb,OAAnB,EAA4B;AAC1B7mC,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvC+K,+BAAe,EAAE9zB,MAAM,CAAC0N,OAAP,CAAeomB,eADO;AAEvCo1C,gCAAgB,EAAElpE,MAAM,CAAC0N,OAAP,CAAew7D;AAFM,eADF,CAAvC;AAKD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKhnF,KADL,CAAO,EACG;AACR4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AADA,aADH,CAAP;AAID;;AAED,aAAK,gEAAuBkvB,yBAA5B;AAAuD;AACrD,gBAAIh4C,MAAM,CAAC0N,OAAP,CAAeqb,OAAnB,EAA4B;AAC1B7mC,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvCwgD,mCAAmB,EAAEvpE,MAAM,CAAC0N,OAAP,CAAe67D,mBADG;AAEvCJ,8BAAc,EAAEnpE,MAAM,CAAC0N,OAAP,CAAew7D;AAFQ,eADF,CAAvC;AAKD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKhnF,KADL,CAAO,EACG;AACR4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AADA,aADH,CAAP;AAID;;AAED,aAAK,gEAAuBovB,mBAA5B;AAAiD;AAC/C,gBAAIl4C,MAAM,CAAC0N,OAAP,CAAeqb,OAAnB,EAA4B;AAC1B7mC,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,EAAG,EAClC7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CADkC,CAAvC;;AAIA,kBAAI/oB,MAAM,CAAC0N,OAAP,CAAetuB,IAAnB,EAAyB;AACvB8C,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqC9mB,KAArC,GAA6C,MAAH,OAAG,CAAH,kBACrC/f,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqC9mB,KADA,CAAG,EACE;AAC7ClN,4BAAU,EAAE,MAAF,OAAE,CAAF,EAAE,EACP7S,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqC9mB,KAArC,CAA2ClN,UADpC;AADiC,iBADF,CAA7C;AAQD;AACF;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK7S,KADL,CAAO,EACG;AACR4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AADA,aADH,CAAP;AAID;;AAED,aAAK,gEAAuBwuB,aAA5B;AAA2C;AACzC,gBAAIt3C,MAAM,CAAC0N,OAAP,IAAkBxrB,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAAtB,EAAuD;AACrDqD,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,IAAkC,MAAH,OAAG,CAAH,kBAAQqD,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAAR,CAAG,EAAoC;AAAE4Y,wBAAQ,EAAE;AAAZ,eAApC,CAAlC;AACA,qBAAO,MAAP,OAAO,CAAP,kBAAYvV,KAAZ,CAAO,EAAU;AAAE4mC,sBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,eAAV,CAAP;AACD;;AACD,mBAAO5mC,KAAP;AACD;;AAED,aAAK,gEAAuB03D,WAA5B;AAAyC;AACvC,mBAAO13D,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,CAAP;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYqD,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBswB,2BAA5B;AAAyD;AACvDl3D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1DzV,4BAAU,EAAE;AAD8C,iBADF,CAA1D;AAIA9E,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvCC,yCAAuB,EAAE;AADc,iBADF,CAAvC;AAID;AACF,aAXD;AAYA,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBsvB,iBAA5B;AAA+C;AAC7C,gBAAIp4C,MAAM,CAAC0N,OAAP,CAAe7uB,EAAnB,EAAuB;AACrBqD,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,oBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,uBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1DzV,8BAAU,EAAE;AAD8C,mBADF,CAA1D;AAIA9E,uBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvCC,2CAAuB,EAAE;AADc,mBADF,CAAvC;AAID;AACF,eAXD;AAYD,aAbD,MAaO;AACL9mC,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,gCACK1b,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAD1C,I,gCAEOoC,MAAM,CAAC0N,O,GAAO;AAAE1mB,0BAAU,EAAE;AAAd,e,CAFrB;AAIA9E,mBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAC/B7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAD+B,CAAG,EACE;AACvCC,uCAAuB,EAAE;AADc,eADF,CAAvC;AAID;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBwvB,0BAA5B;AAAwD;AACtDp2D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1DivB,0BAAQ,EAAE1rB,MAAM,CAAC0N,OAAP,CAAege;AADiC,iBADF,CAA1D;AAID;AACF,aAPD;AAQA,mBAAO,MAAP,OAAO,CAAP,kBAAYxpC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB0vB,yBAA5B;AAAuD;AACrDt2D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1Do+D,yBAAO,EAAE76D,MAAM,CAAC0N,OAAP,CAAemtD;AADkC,iBADF,CAA1D;AAID;AACF,aAPD;AAQA,mBAAO,MAAP,OAAO,CAAP,kBAAY34E,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB4vB,yBAA5B;AAAuD;AAAA,kCAClB14C,MAAM,CAAC0N,OADW;AAAA,gBAC7C3sB,IAD6C,mBAC7CA,IAD6C;AAAA,gBACvCm6E,gBADuC,mBACvCA,gBADuC;AAErDh5E,iBAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,EAA2BnrB,WAA3B,CAAuC3N,OAAvC,CAA+C,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AACpE,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B7qC,IAAI,CAAC6qC,YAArC,EAAmD;AACjD1pC,qBAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,EAA2BnrB,WAA3B,CAAuCnB,KAAvC,IAAgD,MAAH,OAAG,CAAH,kBACxCva,KAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,EAA2BnrB,WAA3B,CAAuCnB,KAAvC,CADwC,CAAG,EACE;AAChD5d,oBAAE,EAAEmhB,MAAM,CAAC0N,OAAP,CAAezP,QAAf,CAAwBpf,EADoB;AAEhD8D,0BAAQ,EAAEqd,MAAM,CAAC0N,OAAP,CAAezP,QAAf,CAAwBtb,QAFc;AAGhD+iC,4BAAU,EAAE1lB,MAAM,CAAC0N,OAAP,CAAezP,QAAf,CAAwBynB,UAHY;AAIhD1+B,4BAAU,EAAE,KAJoC;AAKhD6zE,yBAAO,EAAE;AALuC,iBADF,CAAhD;AAQD;AACF,aAXD;AAYA,gBAAM7xC,uBAAuB,GAAG,CAAC,CAAC9mC,KAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,EAA2BnrB,WAA3B,CAAuC5T,IAAvC,CAChC,UAAA8T,UAAU;AAAA,qBAAIA,UAAU,CAAC9W,UAAf;AAAA,aADsB,CAAlC;AAGA9E,iBAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,IAA6B,MAAH,OAAG,CAAH,kBAAQ7mC,KAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,CAAR,CAAG,EAA+B;AAAEC,qCAAuB,EAAvBA;AAAF,aAA/B,CAA7B;;AACA,gBAAIkyC,gBAAgB,IAAIn6E,IAAI,CAAC6D,IAAL,KAAc,gFAAtC,EAA6E;AAE3E1C,mBAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,IAA6B+/C,gCAAgC,CAC3D5mF,KAAK,CAAC4mC,MAAN,CAAa/nC,IAAI,CAACgoC,OAAlB,CAD2D,EAE3DhoC,IAF2D,EAG3Dif,MAAM,CAAC0N,OAAP,CAAezP,QAH4C,CAA7D;AAKD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAY/b,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB8vB,yBAA5B;AAAuD;AACrD12D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,GAAmD1b,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD/V,MAAjD,CACjD,UAAAiW,UAAU;AAAA,qBAAIA,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C;AAAA,aADuC,CAAnD;;AAGA,gBAAM5C,wBAAuB,GAAG,CAAC,CAAC9mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD5T,IAAjD,CAChC,UAAA8T,UAAU;AAAA,qBAAIA,UAAU,CAAC9W,UAAf;AAAA,aADsB,CAAlC;;AAGA9E,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAAQ7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAAR,CAAG,EAAyC;AAAEC,qCAAuB,EAAvBA;AAAF,aAAzC,CAAvC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBgwB,iBAA5B;AAA+C;AAC7C52D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1DizB,2BAAS,EAAE,IAD+C;AAE1D1oC,4BAAU,EAAE;AAF8C,iBADF,CAA1D;AAKD;AACF,aARD;AASA9E,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAAQ7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAAR,CAAG,EAAyC;AAAEC,qCAAuB,EAAE;AAA3B,aAAzC,CAAvC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBkwB,yBAA5B;AAAuD;AACrD92D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,GAAmD1b,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD/V,MAAjD,CACjD,UAAAiW,UAAU,EAAI;AACZ,kBAAIA,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D,oBAAI,CAAC9tB,UAAU,CAACjf,EAAhB,EAAoB;AAClBif,4BAAU,CAAC+8D,OAAX,CAAmBxmC,WAAnB;AACD;;AACD,uBAAO,KAAP;AACD;;AACD,qBAAO,IAAP;AACD,aATgD,CAAnD;;AAWA,gBAAMrL,yBAAuB,GAAG,CAAC,CAAC9mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD5T,IAAjD,CAChC,UAAA8T,UAAU;AAAA,qBAAIA,UAAU,CAAC9W,UAAf;AAAA,aADsB,CAAlC;;AAGA9E,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAAQ7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAAR,CAAG,EAAyC;AAAEC,qCAAuB,EAAvBA;AAAF,aAAzC,CAAvC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBowB,yBAA5B;AAAuD;AACrDh3D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAeke,YAA/C,EAA6D;AAC3D1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EACE;AAC1DizB,2BAAS,EAAE,KAD+C;AAE1D1oC,4BAAU,EAAE;AAF8C,iBADF,CAA1D;AAKD;AACF,aARD;;AASA,gBAAMgiC,yBAAuB,GAAG,CAAC,CAAC9mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD5T,IAAjD,CAChC,UAAA8T,UAAU;AAAA,qBAAIA,UAAU,CAAC9W,UAAf;AAAA,aADsB,CAAlC;;AAGA9E,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,IAAuC,MAAH,OAAG,CAAH,kBAAQ7mC,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,CAAR,CAAG,EAAyC;AAAEC,qCAAuB,EAAvBA;AAAF,aAAzC,CAAvC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9mC,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuB4wB,SAA5B;AAAuC;AACrCx3D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA5B,IAAkCmhB,MAAM,CAAC0N,OAAzC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYxrB,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBgxB,uBAA5B;AAAqD;AACnD53D,iBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiD3N,OAAjD,CAAyD,UAAC6N,UAAD,EAAarB,KAAb,EAAuB;AAC9E,kBAAIqB,UAAU,CAAC8tB,YAAX,KAA4B5rB,MAAM,CAAC0N,OAAP,CAAe5P,UAAf,CAA0B8tB,YAA1D,EAAwE;AACtE1pC,qBAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,IAA0D,MAAH,OAAG,CAAH,kBAClDva,KAAK,CAAC4mC,MAAN,CAAa9oB,MAAM,CAAC0N,OAAP,CAAeqb,OAA5B,EAAqCnrB,WAArC,CAAiDnB,KAAjD,CADkD,CAAG,EAErDuD,MAAM,CAAC0N,OAAP,CAAe5P,UAFsC,CAA1D;AAID;AACF,aAPD;AAQA,mBAAO,MAAP,OAAO,CAAP,kBAAY5b,KAAZ,CAAO,EAAU;AAAE4mC,oBAAM,EAAE,MAAF,OAAE,CAAF,EAAE,EAAK5mC,KAAK,CAAC4mC,MAAX;AAAV,aAAV,CAAP;AACD;;AAED,aAAK,gEAAuBkxB,uBAA5B;AAAqD;AACnD,gBAAMvzB,WAAS,GAAGvkC,KAAK,CAACukC,SAAxB;;AACA,gBAAIzmB,MAAM,CAAC0N,OAAP,CAAe87D,aAAnB,EAAkC;AAChC,kBAAMv/E,GAAG,GAAG+V,MAAM,CAAC0N,OAAnB;;AACA+Y,yBAAS,CAACxV,GAAV,CAAchnB,GAAG,CAAC2F,KAAlB,EAAyB;AACvB3F,mBAAG,EACDw8B,WAAS,CAAC18B,GAAV,CAAcE,GAAG,CAAC2F,KAAlB,KAA4B62B,WAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GAArD,IAA4Dw8B,WAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GAAzB,CAA6BjI,MAA7B,GAAsC,CAAlG,gCACQykC,WAAS,CAACn/B,GAAV,CAAc2C,GAAG,CAAC2F,KAAlB,EAAyB3F,GADjC,IACsC;AAAE2F,uBAAK,EAAE3F,GAAG,CAAC2F,KAAb;AAAoBoD,4BAAU,EAAE/I,GAAG,CAAC+I;AAApC,iBADtC,KAEI,CAAC;AAAEpD,uBAAK,EAAE3F,GAAG,CAAC2F,KAAb;AAAoBoD,4BAAU,EAAE/I,GAAG,CAAC+I;AAApC,iBAAD,CAJiB;AAKvBu2B,0BAAU,EAAE;AALW,eAAzB;AAOD,aATD,MASO,IAAIvpB,MAAM,CAAC0N,OAAP,CAAe+7D,gBAAnB,EAAqC,CAC3C,CADM,MACA,IAAIzpE,MAAM,CAAC0N,OAAP,CAAeg8D,gBAAnB,EAAqC,CAC3C,CADM,MACA,IAAI1pE,MAAM,CAAC0N,OAAP,CAAei8D,UAAnB,EAA+B;AAEpC,kBAAM/5E,KAAK,GAAGoQ,MAAM,CAAC0N,OAAP,CAAe9d,KAA7B;;AACA,kBAAI62B,WAAS,CAAC18B,GAAV,CAAc6F,KAAd,KAAwB62B,WAAS,CAACn/B,GAAV,CAAcsI,KAAd,EAAqB3F,GAA7C,IAAoDw8B,WAAS,CAACn/B,GAAV,CAAcsI,KAAd,EAAqB3F,GAArB,CAAyBjI,MAAzB,GAAkC,CAA1F,EAA6F;AAC3FykC,2BAAS,CAACxV,GAAV,CAAcrhB,KAAd,EAAqB,MAAF,OAAE,CAAF,kBACd62B,WAAS,CAACn/B,GAAV,CAAcsI,KAAd,CADc,CAAE,EACI;AACvBs4B,mCAAiB,EAAEloB,MAAM,CAAC0N,OAAP,CAAe/b,kBAAf,GAAoCqO,MAAM,CAAC0N,OAAP,CAAela,eAAnD,GAAqE;AADjE,iBADJ,CAArB;AAID;AACF;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAYtR,KAAZ,CAAO,EAAU;AAAEukC,uBAAS,EAATA;AAAF,aAAV,CAAP;AACD;;AAED;AAAS;AACP,mBAAOvkC,KAAP;AACD;AAlXH;AAoXD;;;;;;;;;;;;;;;;;AChaD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGO,QAAMgmF,YAAY,GAAkB;AACzCr6E,cAAQ,EAAE,EAD+B;AAEzCE,mBAAa,EAAE,CAF0B;AAGzC67E,2BAAqB,EAAE,CAHkB;AAIzC9xE,YAAM,EAAE,KAJiC;AAKzCmqB,uBAAiB,EAAE,EALsB;AAMzCrvB,yBAAmB,EAAE;AANoB,KAApC;;AASA,aAASo1E,OAAT,GAAgE;AAAA,UAA/C9lF,KAA+C,uEAAvCgmF,YAAuC;AAAA,UAAzBloE,MAAyB;;AACrE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,6EAAoB0uD,WAAzB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBAAYj4D,KAAZ,CAAO,EAAU;AAAE4V,oBAAM,EAAE,KAAV;AAAiB9Q,wBAAU,EAAE,IAA7B;AAAmCi7B,+BAAiB,EAAE;AAAtD,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBo4B,mBAAzB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACKn4D,KADL,CAAO,EACG;AACR2L,sBAAQ,EAAEmS,MAAM,CAAC0N,OAAP,CAAequD,OADjB;AAER95C,+BAAiB,EAAEjiB,MAAM,CAAC0N,OAAP,CAAerX,YAAf,GAA8B2J,MAAM,CAAC0N,OAAP,CAAequD,OAA7C,GAAuD,EAFlE;AAGRhuE,2BAAa,EAAEiS,MAAM,CAAC0N,OAAP,CAAe6rB,WAHtB;AAIRzhC,oBAAM,EAAE,IAJA;AAKR9Q,wBAAU,EAAE;AALJ,aADH,CAAP;AAQD;;AAED,aAAK,6EAAoBuzD,mBAAzB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACKr4D,KADL,CAAO,EACG;AACR4V,oBAAM,EAAE,IADA;AAER9Q,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,6EAAoBq1D,yBAAzB;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBACKn6D,KADL,CAAO,EACG;AACR+/B,+BAAiB,EAAE,EADX;AAER2nD,mCAAqB,EAAE5pE,MAAM,CAAC0N,OAAP,IAAkB1N,MAAM,CAAC0N,OAAP,CAAeqU,UAAjC,GAA8C,CAA9C,GAAkD7/B,KAAK,CAAC0nF;AAFvE,aADH,CAAP;AAKD;;AAED,aAAK,6EAAoBrtB,oBAAzB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBAAYr6D,KAAZ,CAAO,EAAU;AAAE0nF,mCAAqB,EAAE1nF,KAAK,CAAC0nF,qBAAN,GAA8B5pE,MAAM,CAAC0N,OAAP,CAAem8D,YAAf,CAA4B7nF;AAAnF,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBm5D,cAAzB;AACA,aAAK,6EAAoBJ,cAAzB;AACA,aAAK,6EAAoBN,WAAzB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBAAYv4D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoByL,qBAAO,EAAE;AAA7B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoB4oD,sBAAzB;AACA,aAAK,6EAAoBE,sBAAzB;AAAiD;AAC/C,mBAAO,MAAP,OAAO,CAAP,kBAAYr5D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqByL,qBAAO,EAAE;AAA9B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoBkoD,mBAAzB;AAA8C;AAC5C,gBAAI36C,MAAM,CAAC0N,OAAP,CAAe0uD,UAAnB,EAA+B;AAC7B,kBAAMrtE,OAAO,GAAG7M,KAAK,CAAC2L,QAAN,CAAe7D,IAAf,CAAoB,UAAAoF,IAAI;AAAA,uBAAIA,IAAI,CAACvQ,EAAL,KAAYmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA/B;AAAA,eAAxB,CAAhB;AACAkQ,qBAAO,CAAC0C,IAAR,GAAeuO,MAAM,CAAC0N,OAAP,CAAejc,IAA9B;AACA1C,qBAAO,CAACyC,OAAR,GAAkBwO,MAAM,CAAC0N,OAAP,CAAelc,OAAjC;AACAzC,qBAAO,CAAC2C,KAAR,GAAgBsO,MAAM,CAAC0N,OAAP,CAAehc,KAA/B;AACA3C,qBAAO,CAAC+6E,MAAR,GAAiB9pE,MAAM,CAAC0N,OAAP,CAAeo8D,MAAhC;AACA/6E,qBAAO,CAACa,KAAR,GAAgBoQ,MAAM,CAAC0N,OAAP,CAAe9d,KAA/B;AACAb,qBAAO,CAACnK,IAAR,GAAeob,MAAM,CAAC0N,OAAP,CAAe9oB,IAA9B;AACAmK,qBAAO,CAAC4C,kBAAR,GAA6BqO,MAAM,CAAC0N,OAAP,CAAe/b,kBAA5C;AACA5C,qBAAO,CAACyE,eAAR,GAA0BwM,MAAM,CAAC0N,OAAP,CAAela,eAAzC;AAGA,qBAAO,MAAP,OAAO,CAAP,kBAAYtR,KAAZ,CAAO,EAAU;AAAE8E,0BAAU,EAAE,KAAd;AAAqByL,uBAAO,EAAE;AAA9B,eAAV,CAAP;AACD;;AACDvQ,iBAAK,CAAC6L,aAAN,IAAuB,CAAvB;AAEA,mBAAO,MAAP,OAAO,CAAP,kBACK7L,KADL,CAAO,EACG;AACR2L,sBAAQ,EAAE,+DAAa3L,KAAK,CAAC2L,QAAN,CAAek8E,MAAf,CAAsB,CAAC/pE,MAAM,CAAC0N,OAAR,CAAtB,CAAb,EAAsD,MAAtD,CADF;AAER1mB,wBAAU,EAAE,KAFJ;AAGRyL,qBAAO,EAAE;AAHD,aADH,CAAP;AAMD;;AACD,aAAK,6EAAoBooD,iBAAzB;AAA4C;AAC1C,mBAAO,MAAP,OAAO,CAAP,kBAAY34D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqByL,qBAAO,EAAE;AAA9B,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBwoD,sBAAzB;AAAiD;AAC/C,gBAAMv8C,GAAG,GAAGsB,MAAM,CAAC0N,OAAP,CAAe7Q,KAAf,CAAqB,GAArB,CAAZ;AACA,gBAAMhP,QAAQ,GAAG3L,KAAK,CAAC2L,QAAN,CAAehG,MAAf,CAAsB,UAAAuH,IAAI;AAAA,qBAAIsP,GAAG,CAAC5L,QAAJ,WAAgB1D,IAAI,CAACvQ,EAArB,EAAJ;AAAA,aAA1B,CAAjB;AACAgP,oBAAQ,CAACoC,OAAT,CAAiB,UAAAlB,OAAO,EAAI;AAC1B7M,mBAAK,CAAC2L,QAAN,CAAeinC,MAAf,CAAsB5yC,KAAK,CAAC2L,QAAN,CAAehL,OAAf,CAAuBkM,OAAvB,CAAtB,EAAuD,CAAvD;AACD,aAFD;AAGA7M,iBAAK,CAAC6L,aAAN,IAAuB2Q,GAAG,CAAC1c,MAA3B;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqByL,qBAAO,EAAE;AAA9B,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBgpD,cAAzB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBAAYv5D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoB20D,sBAAzB;AAAiD;AAC/C,mBAAO,MAAP,OAAO,CAAP,kBAAYz5D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoB60D,sBAAzB;AAAiD;AAC/C,mBAAO,MAAP,OAAO,CAAP,kBAAY35D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBi1D,kBAAzB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAY/5D,KAAZ,CAAO,EAAU;AAAEqZ,2BAAa,EAAE;AAAjB,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoB4gD,0BAAzB;AAAqD;AACnD,mBAAO,MAAP,OAAO,CAAP,kBAAYj6D,KAAZ,CAAO,EAAU;AAAEqZ,2BAAa,EAAEyE,MAAM,CAAC0N;AAAxB,aAAV,CAAP;AACD;;AAED,aAAK,6EAAoBquC,uBAAzB;AAAkD;AAChD,gBAAMluD,SAAQ,GAAG3L,KAAK,CAAC2L,QAAN,CAAenP,GAAf,CAAmB,UAAAqQ,OAAO,EAAI;AAC7C,kBAAIA,OAAO,CAAClQ,EAAR,KAAemhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAlC,EAAsC;AACpCkQ,uBAAO,GAAGiR,MAAM,CAAC0N,OAAjB;AACA3e,uBAAO,CAACi7E,mBAAR,GAA8B,IAA9B;AACAj7E,uBAAO,CAACitE,uBAAR,GAAkC,KAAlC;AACD;;AACD,qBAAOjtE,OAAP;AACD,aAPgB,CAAjB;;AAQA,mBAAO,MAAP,OAAO,CAAP,kBAAY7M,KAAZ,CAAO,EAAU;AAAE2L,sBAAQ,EAARA;AAAF,aAAV,CAAP;AACD;;AAGD,aAAK,6EAAoB8uD,kBAAzB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAYz6D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoBirD,0BAAzB;AAAqD;AACnD,gBAAMjqD,mBAAmB,GAAGoN,MAAM,CAAC0N,OAAP,CAAequD,OAA3C;AACA,mBAAO,MAAP,OAAO,CAAP,kBACK75E,KADL,CAAO,EACG;AACR0Q,iCAAmB,EAAnBA,mBADQ;AAERhB,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AACD,aAAK,6EAAoBmrD,0BAAzB;AAAqD;AACnD,mBAAO,MAAP,OAAO,CAAP,kBAAY76D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AAGD,aAAK,6EAAoBqrD,gBAAzB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAY/6D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoBurD,wBAAzB;AAAmD;AACjD,gBAAMvqD,oBAAmB,GAAG1Q,KAAK,CAAC0Q,mBAAlC;;AACA,gBAAIq3E,YAAY,GAAGr3E,oBAAmB,CAAC/K,MAApB,CAA2B,UAAAoC,GAAG;AAAA,qBAAIA,GAAG,CAACH,WAAJ,KAAoBkW,MAAM,CAAC0N,OAAP,CAAe5jB,WAAvC;AAAA,aAA9B,CAAnB;;AACAmgF,wBAAY,gCAAOA,YAAP,IAAqBjqE,MAAM,CAAC0N,OAA5B,EAAZ;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR0Q,iCAAmB,EAAEq3E,YADb;AAERr4E,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AACD,aAAK,6EAAoByrD,wBAAzB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBAAYn7D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AAGD,aAAK,6EAAoB2rD,mBAAzB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBAAYr7D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoB6rD,2BAAzB;AAAsD;AACpD,gBAAMysB,cAAc,GAAGhoF,KAAK,CAAC0Q,mBAAN,CAA0B/K,MAA1B,CAAiC,UAAAoC,GAAG;AAAA,qBAAIA,GAAG,CAACH,WAAJ,KAAoBkW,MAAM,CAAC0N,OAAP,CAAe5jB,WAAvC;AAAA,aAApC,CAAvB;AACA,mBAAO,MAAP,OAAO,CAAP,kBACK5H,KADL,CAAO,EACG;AACR0Q,iCAAmB,EAAEs3E,cADb;AAERt4E,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AACD,aAAK,6EAAoB+rD,2BAAzB;AAAsD;AACpD,mBAAO,MAAP,OAAO,CAAP,kBAAYz7D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AAGD,aAAK,6EAAoBisD,wBAAzB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBAAY37D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AACD,aAAK,6EAAoBmsD,gCAAzB;AAA2D;AACzD,gBAAMlwD,UAAQ,GAAG3L,KAAK,CAAC2L,QAAvB;;AACAA,sBAAQ,CAACoC,OAAT,CAAiB,UAAAlB,OAAO,EAAI;AAC1B,kBAAIA,OAAO,CAAClQ,EAAR,KAAemhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAlC,EAAsC;AACpCkQ,uBAAO,CAACyE,eAAR,GAA0BwM,MAAM,CAAC0N,OAAP,CAAela,eAAzC;AACD;AACF,aAJD;;AAKA,mBAAO,MAAP,OAAO,CAAP,kBACKtR,KADL,CAAO,EACG;AACR0Q,iCAAmB,EAAEoN,MAAM,CAAC0N,OADpB;AAER9b,uCAAyB,EAAE;AAFnB,aADH,CAAP;AAKD;;AACD,aAAK,6EAAoBqsD,gCAAzB;AAA2D;AACzD,mBAAO,MAAP,OAAO,CAAP,kBAAY/7D,KAAZ,CAAO,EAAU;AAAE0P,uCAAyB,EAAE;AAA7B,aAAV,CAAP;AACD;;AAED;AAAS;AACP,mBAAO1P,KAAP;AACD;AA5LH;AA8LD;;;;;;;;;;;;;;;;;ACzMD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAgBO,QAAMioF,QAAQ,GAA+B;AAClDhoF,UAAI,EAAE,sDAD4C;AAElDyS,UAAI,EAAE,sDAF4C;AAGlDtM,eAAS,EAAE,2DAHuC;AAIlDhG,aAAO,EAAE,yDAJyC;AAKlDghD,cAAQ,EAAE,0DALwC;AAMlDx8C,UAAI,EAAE,uDAN4C;AAOlD+G,cAAQ,EAAE,2DAPwC;AAQlDysB,cAAQ,EAAE,yDARwC;AASlDumB,aAAO,EAAE,yDATyC;AAUlDhd,iBAAW,EAAE,+DAVqC;AAWlD12B,YAAM,EAAE,yDAX0C;AAYlDi9E,mBAAa,EAAE,iEAZmC;AAalD7yE,eAAS,EAAE,wDAbuC;AAclDqnB,kBAAY,EAAE;AAdoC,KAA7C;;;;;;;;;;;;;;;;ACnBP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGO,QAAMspD,YAAY,GAAkB;AAAEmC,qBAAe,EAAE,KAAnB;AAA0BC,gBAAU,EAAE;AAAErgF,WAAG,EAAE;AAAP,OAAtC;AAAmDsgF,kBAAY,EAAE;AAAjE,KAApC;;AAEA,aAASvC,OAAT,GAAgE;AAAA,UAA/C9lF,KAA+C,uEAAvCgmF,YAAuC;AAAA,UAAzBloE,MAAyB;;AACrE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,6DAAoBkzD,gBAAzB;AAA2C;AACzC,gBAAI3+C,MAAM,CAAC0N,OAAP,CAAe41B,QAAf,KAA4B,KAAhC,EAAuC;AACrC,qBAAO,MAAP,OAAO,CAAP,kBAAYphD,KAAZ,CAAO,EAAU;AAAEmoF,+BAAe,EAAE;AAAnB,eAAV,CAAP;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAYnoF,KAAZ,CAAO,EAAU;AAAEmoF,6BAAe,EAAE,CAACnoF,KAAK,CAACmoF;AAA1B,aAAV,CAAP;AACD;;AACD,aAAK,6DAAoBxrB,oBAAzB;AAA+C;AAC7C,mBAAOqpB,YAAP;AACD;;AACD,aAAK,6DAAoBnpB,WAAzB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBAAY78D,KAAZ,CAAO,EAAU;AAAEooF,wBAAU,EAAEtqE,MAAM,CAAC0N;AAArB,aAAV,CAAP;AACD;;AACD,aAAK,6DAAoBuxC,aAAzB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBAAY/8D,KAAZ,CAAO,EAAU;AAAEqoF,0BAAY,EAAEvqE,MAAM,CAAC0N;AAAvB,aAAV,CAAP;AACD;;AACD;AAAS;AACP,mBAAOxrB,KAAP;AACD;AAlBH;AAoBD;;;;;;;;;;;;;;;;;AC1BD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGO,QAAMgmF,YAAY,GAAiB;AACxC7oB,uBAAiB,EAAE,KADqB;AAExCF,wBAAkB,EAAE,KAFoB;AAGxC58D,aAAO,EAAE;AAH+B,KAAnC;;AAMA,aAASylF,OAAT,GAA+D;AAAA,UAA9C9lF,KAA8C,uEAAtCgmF,YAAsC;AAAA,UAAxBloE,MAAwB;;AACpE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,4DAAmB6zD,cAAxB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBAAYp9D,KAAZ,CAAO,EAAU;AAAEm9D,+BAAiB,EAAEr/C,MAAM,CAAC0N,OAAP,CAAe7sB;AAApC,aAAV,CAAP;AACD;;AACD,aAAK,4DAAmBu+D,eAAxB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBAAYl9D,KAAZ,CAAO,EAAU;AAAEi9D,gCAAkB,EAAEn/C,MAAM,CAAC0N,OAAP,CAAe7sB;AAArC,aAAV,CAAP;AACD;;AACD,aAAK,4DAAmB2+D,aAAxB;AAAuC;AACrC,mBAAO,MAAP,OAAO,CAAP,kBAAYt9D,KAAZ,CAAO,EAAU;AAAEK,qBAAO,EAAEyd,MAAM,CAAC0N,OAAP,CAAe7sB;AAA1B,aAAV,CAAP;AACD;;AACD;AAAS;AACP,mBAAOqB,KAAP;AACD;AAZH;AAcD;;;;;;;;;;;;;;;;;ACxBD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAQA,aAASsoF,iBAAT,CAA2B5sE,WAA3B,EAAsD;AACpD,UAAIA,WAAW,IAAIA,WAAW,CAAC5b,MAAZ,GAAqB,CAAxC,EAA2C;AACzC4b,mBAAW,GAAGA,WAAW,CAAClf,GAAZ,CAAgB,UAAAof,UAAU,EAAI;AAC1C,cAAI,CAACA,UAAU,CAAClZ,IAAhB,EAAsB;AACpBkZ,sBAAU,CAAClZ,IAAX,GAAkB,yEAAasZ,kBAAb,CAAgCJ,UAAU,CAACnb,QAA3C,CAAlB;AACD;;AACD,iBAAOmb,UAAP;AACD,SALa,CAAd;AAMD;;AACD,aAAOF,WAAP;AACD;;AAED,aAAS6sE,mBAAT,CAA6BC,SAA7B,EAAuDC,OAAvD,EAAmE;AACjE,UAAM3zE,KAAK,GAAG0zE,SAAS,CACpBhsF,GADW,CACP,UAAAigB,MAAM,EAAI;AACb,YAAIgsE,OAAO,CAAC/tE,cAAR,CAAuB+B,MAAvB,CAAJ,EAAoC;AAClC,iBAAOgsE,OAAO,CAAChsE,MAAD,CAAd;AACD;;AACD,eAAO,IAAP;AACD,OANW,EAOX9W,MAPW,CAOJ,UAAA+M,IAAI;AAAA,eAAI,CAAC,CAACA,IAAN;AAAA,OAPA,CAAd;AAQA,UAAMg2E,MAAM,GAAG5zE,KAAK,CACjBqW,IADY,CACP,UAACqwD,QAAD,EAAgB10E,IAAhB,EAA8B;AAClC,YAAM6hF,YAAY,GAAG7hF,IAAI,CAAC8hF,OAAL,IAAgB,CAArC;AACA,YAAMC,gBAAgB,GAAGrN,QAAQ,CAACoN,OAAT,IAAoB,CAA7C;AACA,eAAY,IAAI7gD,IAAJ,CAAS4gD,YAAT,IAA8B,IAAI5gD,IAAJ,CAAS8gD,gBAAT,CAA1C;AACD,OALY,EAMZrsF,GANY,CAMR,UAAAkW,IAAI;AAAA,eAAIA,IAAI,CAAC/V,EAAT;AAAA,OANI,CAAf;AAOA,aAAO+rF,MAAP;AACD;;AAED,aAASI,mBAAT,CAA6BjqF,IAA7B,EAAsC;AACpC,UAAIA,IAAJ,EAAU;AACR,YAAIw4C,WAAW,GAAG,CAAlB;AACAj6C,cAAM,CAACF,IAAP,CAAY2B,IAAZ,EAAkBkP,OAAlB,CAA0B,UAAAhG,GAAG,EAAI;AAC/B,cACEA,GAAG,KAAK,uDAAeme,IAAvB,IACAne,GAAG,KAAK,uDAAeyP,KADvB,IAEAzP,GAAG,KAAK,uDAAeyQ,KAFvB,IAGAzQ,GAAG,KAAK,uDAAesO,MAHvB,IAIAtO,GAAG,KAAK,uDAAeyX,IAJvB,IAKAzX,GAAG,KAAK,oBALR,IAMAA,GAAG,KAAK,uDAAeghF,OANvB,IAOAhhF,GAAG,KAAK,mBAPR,IAQAA,GAAG,KAAK,yBARR,IASAA,GAAG,KAAK,iCATR,IAUAA,GAAG,KAAK,8BAXV,EAYE;AACA,gBAAI,CAAC4oC,KAAK,CAAC9xC,IAAI,WAAIkJ,GAAJ,EAAL,CAAV,EAA4B;AAC1BsvC,yBAAW,IAAIx4C,IAAI,WAAIkJ,GAAJ,EAAnB;AACD;AACF;AACF,SAlBD;AAoBA,eAAOsvC,WAAP;AACD;;AACD,aAAO,CAAP;AACD;;AAED,aAAS2xC,aAAT,CAAuBC,UAAvB,EAAwCn0E,KAAxC,EAAqD;AACnD,UAAIA,KAAK,IAAIA,KAAK,CAAChV,MAAN,GAAe,CAA5B,EAA+B;AAC7B,YAAIopF,gBAAgB,GAAG,EAAvB;AACAp0E,aAAK,CAAC/G,OAAN,CAAc,UAAA2E,IAAI,EAAI;AACpBw2E,0BAAgB,GAAG,MAAH,OAAG,CAAH,kBAAQA,gBAAR,CAAG,sBAAwBx2E,IAAI,CAAC/V,EAA7B,EAAkC+V,IAAlC,EAAnB;AACD,SAFD;AAGA,eAAO,MAAP,OAAO,CAAP,kBAAYu2E,UAAZ,CAAO,EAAoBC,gBAApB,CAAP;AACD;;AACD,aAAOD,UAAP;AACD;;AAED,aAASE,qBAAT,CACEC,QADF,EAEEC,eAFF,EAGEn+E,KAHF,EAIqB;AAAA,UAAnBo+E,WAAmB,uEAAL,KAAK;AAEnB,UAAIC,OAAO,GAAGH,QAAQ,CAACzjF,MAAT,CAAgB,UAAA+M,IAAI;AAAA,eAAK42E,WAAW,GAAG,CAAC52E,IAAI,CAAC+C,IAAT,GAAgB,IAAhC;AAAA,OAApB,EAA2DjZ,GAA3D,CAA+D,UAAAkW,IAAI;AAAA,eAAIA,IAAI,CAAC/V,EAAT;AAAA,OAAnE,CAAd;AACA,UAAM6sF,WAAW,GAAQ,EAAzB;AACAJ,cAAQ,CAACr7E,OAAT,CAAiB,UAAA2E,IAAI,EAAI;AACvB82E,mBAAW,CAAC92E,IAAI,CAAC/V,EAAN,CAAX,GAAuB+V,IAAvB;AACD,OAFD;;AAGA,UAAI22E,eAAe,IAAIA,eAAe,CAACvpF,MAAhB,GAAyB,CAAhD,EAAmD;AACjDupF,uBAAe,GAAGA,eAAe,CAAC1jF,MAAhB,CAAuB,UAAAhJ,EAAE;AAAA,iBAAI,CAAC4sF,OAAO,CAAC34E,QAAR,CAAiBjU,EAAjB,CAAL;AAAA,SAAzB,CAAlB;AACA4sF,eAAO,GAAGA,OAAO,CAAC/sF,GAAR,CAAY,UAAAigB,MAAM,EAAI;AAC9B,cAAMgtE,OAAO,GAAGD,WAAW,CAAC/sE,MAAD,CAA3B;;AACA,cAAIgtE,OAAO,CAACjsE,MAAR,IAAkB6rE,eAAe,CAACz4E,QAAhB,CAAyB64E,OAAO,CAACjsE,MAAjC,CAAtB,EAAgE;AAC9D6rE,2BAAe,GAAGA,eAAe,CAAC1jF,MAAhB,CAAuB,UAAA+jF,YAAY;AAAA,qBAAIA,YAAY,KAAKD,OAAO,CAACjsE,MAA7B;AAAA,aAAnC,CAAlB;AACA,mBAAOisE,OAAO,CAACjsE,MAAf;AACD;;AACD,iBAAOf,MAAP;AACD,SAPS,CAAV;AAQA4sE,uBAAe,gCAAOE,OAAP,sBAAmBF,eAAnB,EAAf;;AACA,YAAIA,eAAe,CAACvpF,MAAhB,GAAyBoL,KAA7B,EAAoC;AAClCm+E,yBAAe,GAAGA,eAAe,CAACplE,KAAhB,CAAsB,CAAtB,EAAyB/Y,KAAzB,CAAlB;AACD;;AACD,eAAOm+E,eAAP;AACD;;AACD,aAAOE,OAAP;AACD;;AAED,aAASI,mBAAT,CACEP,QADF,EAEEQ,mBAFF,EAGE1+E,KAHF,EAK+B;AAAA,UAD7Bo+E,WAC6B,uEADf,KACe;AAAA,UAA7BO,sBAA6B,uEAAJ,IAAI;AAE7B,UAAIR,eAAe,GAAGO,mBAAmB,CAAC90E,KAA1C;AACA,UAAIy0E,OAAO,GAAGH,QAAQ,CAACzjF,MAAT,CAAgB,UAAA+M,IAAI;AAAA,eAAK42E,WAAW,GAAG,CAAC52E,IAAI,CAAC+C,IAAT,GAAgB,IAAhC;AAAA,OAApB,EAA2DjZ,GAA3D,CAA+D,UAAAkW,IAAI;AAAA,eAAIA,IAAI,CAAC/V,EAAT;AAAA,OAAnE,CAAd;AACA,UAAM6sF,WAAW,GAAQ,EAAzB;AACAJ,cAAQ,CAACr7E,OAAT,CAAiB,UAAA2E,IAAI,EAAI;AACvB82E,mBAAW,CAAC92E,IAAI,CAAC/V,EAAN,CAAX,GAAuB+V,IAAvB;AACD,OAFD;;AAGA,UAAI22E,eAAe,IAAIA,eAAe,CAACvpF,MAAhB,GAAyB,CAAhD,EAAmD;AAEjD,YAAIgqF,iBAAiB,GAAQ,EAA7B;AACAT,uBAAe,GAAGA,eAAe,CAAC1jF,MAAhB,CAAuB,UAAAhJ,EAAE,EAAI;AAC7C,cAAI,CAAC4sF,OAAO,CAAC34E,QAAR,CAAiBjU,EAAjB,CAAL,EAA2B;AACzB,mBAAO,IAAP;AACD;;AACDmtF,2BAAiB,gCAAOA,iBAAP,IAA0BntF,EAA1B,EAAjB;AACA,iBAAO,KAAP;AACD,SANiB,CAAlB;AAUA,YAAIotF,eAAe,GAAQ,EAA3B;;AACA,YAAIF,sBAAJ,EAA4B;AAC1BN,iBAAO,GAAGA,OAAO,CAAC/sF,GAAR,CAAY,UAAAigB,MAAM,EAAI;AAC9B,gBAAMgtE,OAAO,GAAGD,WAAW,CAAC/sE,MAAD,CAA3B;;AACA,gBAAIgtE,OAAO,CAACjsE,MAAR,IAAkB6rE,eAAe,CAACz4E,QAAhB,CAAyB64E,OAAO,CAACjsE,MAAjC,CAAtB,EAAgE;AAC9D6rE,6BAAe,GAAGA,eAAe,CAAC1jF,MAAhB,CAAuB,UAAA+jF,YAAY;AAAA,uBAAIA,YAAY,KAAKD,OAAO,CAACjsE,MAA7B;AAAA,eAAnC,CAAlB;AACAusE,6BAAe,gCAAOA,eAAe,CAACpkF,MAAhB,CAAuB,UAACuH,IAAD;AAAA,uBAAeu8E,OAAO,CAACjsE,MAAR,KAAmBtQ,IAAlC;AAAA,eAAvB,CAAP,IAAuEu8E,OAAO,CAACjsE,MAA/E,EAAf;AACA,qBAAOisE,OAAO,CAACjsE,MAAf;AACD;;AACD,mBAAOf,MAAP;AACD,WARS,CAAV;AASD;;AAED4sE,uBAAe,gCAAOE,OAAP,sBAAmBF,eAAnB,EAAf;;AAEA,YAAIA,eAAe,CAACvpF,MAAhB,GAAyBoL,KAA7B,EAAoC;AAClCm+E,yBAAe,GAAGA,eAAe,CAACplE,KAAhB,CAAsB,CAAtB,EAAyB/Y,KAAzB,CAAlB;AACD;;AACD,YAAM4M,gBAAgB,GACpB8xE,mBAAmB,CAAC9xE,gBAApB,GAAuCyxE,OAAO,CAACzpF,MAA/C,GAAwDiqF,eAAe,CAACjqF,MAAxE,GAAiFgqF,iBAAiB,CAAChqF,MAAnG,IAA6G,CAA7G,GACI8pF,mBAAmB,CAAC9xE,gBAApB,GAAuCyxE,OAAO,CAACzpF,MAA/C,GAAwDiqF,eAAe,CAACjqF,MAAxE,GAAiFgqF,iBAAiB,CAAChqF,MADvG,GAEI,CAHN;AAIA,eAAO;AACLgV,eAAK,EAAEu0E,eADF;AAELvxE,0BAAgB,EAAhBA;AAFK,SAAP;AAID;;AACD,aAAO;AACLhD,aAAK,EAAEy0E,OADF;AAELzxE,wBAAgB,EAAEyxE,OAAO,CAACzpF;AAFrB,OAAP;AAID;;AAED,aAASkqF,YAAT,CAAsBvlF,UAAtB,EAAkD+qB,OAAlD,EAAqFi5D,OAArF,EAAiG;AAC/F,UAAIj5D,OAAO,CAAC3nB,GAAR,CAAYpD,UAAZ,CAAJ,EAA6B;AAC3B,YAAMwlF,UAAU,GAAGz6D,OAAO,CAACpqB,GAAR,CAAYX,UAAZ,CAAnB;AACA,YAAMqQ,KAAK,GAAGm1E,UAAU,CAACn1E,KAAX,CACXtY,GADW,CACP,UAAAigB,MAAM,EAAI;AACb,cAAM/J,IAAI,GAAG+1E,OAAO,CAAChsE,MAAD,CAAP,GAAkBgsE,OAAO,CAAChsE,MAAD,CAAzB,GAAoC,IAAjD;;AACA,cAAI/J,IAAJ,EAAU;AACRA,gBAAI,CAAC0R,aAAL,GAAqB1R,IAAI,CAAC4O,gBAAL,CAAsB9kB,GAAtB,CAA0B,UAAC0Q,IAAD;AAAA,qBAAwBA,IAAI,CAACxK,IAA7B;AAAA,aAA1B,EAA6D8K,IAA7D,CAAkE,IAAlE,CAArB;;AACA,gBAAIkF,IAAI,CAACw3E,oBAAT,EAA+B;AAC7B,kBAAIzlF,UAAU,KAAK,uDAAe+S,KAA9B,IAAuC9E,IAAI,CAACxO,MAAL,KAAgB,uDAAesT,KAA1E,EAAiF;AAC/E9E,oBAAI,CAACy3E,YAAL,GAAoBz3E,IAAI,CAACw3E,oBAAL,GAA4Bx3E,IAAI,CAACw3E,oBAAL,CAA0BE,oBAA1B,GAAiD,CAA7E,GAAiF,CAArG;AACD,eAFD,MAEO,IAAI3lF,UAAU,KAAK,uDAAe+S,KAA9B,IAAuC9E,IAAI,CAACxO,MAAL,KAAgB,uDAAesT,KAA1E,EAAiF;AACtF9E,oBAAI,CAACy3E,YAAL,GAAoBz3E,IAAI,CAACw3E,oBAAL,GAA4Bx3E,IAAI,CAACw3E,oBAAL,CAA0BE,oBAAtD,GAA6E,CAAjG;AACD,eAFM,MAEA,IAAI3lF,UAAU,KAAK,uDAAe+S,KAA9B,IAAuC9E,IAAI,CAACxO,MAAL,KAAgB,uDAAesT,KAA1E,EAAiF;AACtF9E,oBAAI,CAACy3E,YAAL,GAAoBz3E,IAAI,CAACw3E,oBAAL,GAChBx3E,IAAI,CAACw3E,oBAAL,CAA0BG,wBAA1B,GAAqD,CADrC,GAEhB,CAFJ;AAGD,eAJM,MAIA,IAAI5lF,UAAU,KAAK,uDAAe+S,KAA9B,IAAuC9E,IAAI,CAACxO,MAAL,KAAgB,uDAAesT,KAA1E,EAAiF;AACtF9E,oBAAI,CAACy3E,YAAL,GAAoBz3E,IAAI,CAACw3E,oBAAL,GAA4Bx3E,IAAI,CAACw3E,oBAAL,CAA0BG,wBAAtD,GAAiF,CAArG;AACD;AACF;AACF;;AACD,iBAAO33E,IAAP;AACD,SApBW,EAqBX/M,MArBW,CAqBJ,UAAA+M,IAAI;AAAA,iBAAIA,IAAI,KAAK,IAAb;AAAA,SArBA,CAAd;AAsBA,eAAOoC,KAAP;AACD;;AACD,aAAO,EAAP;AACD;;AAMM,aAASgxE,OAAT,GAoBc;AAAA,UAnBnB9lF,KAmBmB,uEAnBA;AACjB8U,aAAK,EAAE,EADU;AAEjBgD,wBAAgB,EAAE,CAFD;AAGjBhC,kBAAU,EAAE7N,SAHK;AAIjBiwC,0BAAkB,EAAE,CAJH;AAKjBtiC,cAAM,EAAE,KALS;AAMjB/B,yBAAiB,EAAE,EANF;AAOjB0kC,wBAAgB,EAAE;AAAE+xC,eAAK,EAAE;AAAT,SAPD;AAQjBv0E,2BAAmB,EAAE,IARJ;AASjBw0E,yBAAiB,EAAE,IATF;AAUjBC,yBAAiB,EAAE,EAVF;AAWjBlnE,oBAAY,EAAE,KAXG;AAYjBwM,gCAAwB,EAAE,EAZT;AAajB4R,uBAAe,EAAE,KAbA;AAcjB+mD,eAAO,EAAE,EAdQ;AAejB7iE,iBAAS,EAAE,IAAIkC,GAAJ,EAfM;AAgBjB2iE,iBAAS,EAAE,EAhBM;AAiBjBC,+BAAuB,EAAE,IAAI5iE,GAAJ;AAjBR,OAmBA;AAAA,UAAnBhK,MAAmB;;;;AAEnB,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,yDAAgBk0D,SAArB;AAAgC;AAC9B,gBAAI3oD,KAAK,GAAGk1E,YAAY,CAAClsE,MAAM,CAAC0N,OAAP,CAAetnB,MAAhB,EAAwBlE,KAAK,CAAC4lB,SAA9B,EAAyC5lB,KAAK,CAACyoF,OAA/C,CAAxB;;AACA,gBAAI3zE,KAAK,IAAIA,KAAK,CAAChV,MAAN,KAAiB,CAA9B,EAAiC;AAC/BgV,mBAAK,GAAG7M,SAAR;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKjI,KADL,CAAO,EACG;AACR4V,oBAAM,EAAE,CAAC,EAAEd,KAAK,IAAI,CAACgJ,MAAM,CAAC0N,OAAP,CAAehR,WAA3B,CADD;AAER1V,wBAAU,EAAE,CAAC,CAACgZ,MAAM,CAAC0N,OAAP,CAAe1mB,UAFrB;AAGR8yC,2BAAa,EAAE95B,MAAM,CAAC0N,OAAP,CAAetnB,MAHtB;AAIR4Q,mBAAK,EAAEA,KAAK,IAAI,EAJR;AAKRiB,iCAAmB,EAAE;AALb,aADH,CAAP;AAQD;;AAED,aAAK,yDAAgB8nD,iBAArB;AAAwC;AACtC,gBAAM8sB,YAAY,GAAG7sE,MAAM,CAAC0N,OAAP,CAAe1W,KAApC;AACA,gBAAM2zE,OAAO,GAAGO,aAAa,CAAChpF,KAAK,CAACyoF,OAAP,EAAgBkC,YAAhB,CAA7B;AACA,gBAAM/kE,SAAS,GAAG,IAAIkC,GAAJ,CAAQ9nB,KAAK,CAAC4lB,SAAd,CAAlB;;AAEA,gBAAI,CAAC9H,MAAM,CAAC0N,OAAP,CAAe8rB,cAAhB,IAAmCx5B,MAAM,CAAC0N,OAAP,CAAe8rB,cAAf,IAAiC1xB,SAAS,CAAC/d,GAAV,CAAciW,MAAM,CAAC0N,OAAP,CAAetnB,MAA7B,CAAxE,EAA+G;AAC7G,kBAAM0mF,aAAa,GAAGhlE,SAAS,CAACxgB,GAAV,CAAc0Y,MAAM,CAAC0N,OAAP,CAAetnB,MAA7B,CAAtB;AACA,kBAAM2mF,OAAO,GAAG/sE,MAAM,CAAC0N,OAAP,CAAe8rB,cAAf,GACZszC,aAAa,IAAI,CAACA,aAAa,CAAC/kE,iBAAhC,GACEsjE,qBAAqB,CAACwB,YAAD,EAAeC,aAAa,CAAC91E,KAA7B,EAAoCgJ,MAAM,CAAC0N,OAAP,CAAetgB,KAAnD,CADvB,GAEE0/E,aAAa,CAAC91E,KAHJ,GAIZ61E,YAAY,CAACnuF,GAAb,CAAiB,UAACkW,IAAD;AAAA,uBAAeA,IAAI,CAAC/V,EAApB;AAAA,eAAjB,CAJJ;AAKA,kBAAMmuF,WAAW,GAAG;AAClBh2E,qBAAK,EAAE+1E,OADW;AAElB/yE,gCAAgB,EAAEgG,MAAM,CAAC0N,OAAP,CAAe1T,gBAFf;AAGlB+N,iCAAiB,EAAE/H,MAAM,CAAC0N,OAAP,CAAe8rB,cAAf,GACfszC,aAAa,IAAIA,aAAa,CAAC/kE,iBADhB,GAEf/H,MAAM,CAAC0N,OAAP,CAAe3F,iBALD;AAMlB1a,sBAAM,EAAE2S,MAAM,CAAC0N,OAAP,CAAergB,MANL;AAOlB2a,wBAAQ,EAAE;AAPQ,eAApB;AASAF,uBAAS,CAACmJ,GAAV,WAAiBjR,MAAM,CAAC0N,OAAP,CAAetnB,MAAhC,GAA0C4mF,WAA1C;AACD;;AAGD,gBACEhtE,MAAM,CAAC0N,OAAP,CAAe8rB,cAAf,IACAx5B,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAe6mF,MADzC,IAEAjtE,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAesb,IAFzC,IAGAoG,SAAS,CAAC/d,GAAV,CAAc,uDAAekjF,MAA7B,CAJF,EAKE;AACA,kBAAMH,cAAa,GAAGhlE,SAAS,CAACxgB,GAAV,CAAc,uDAAe2lF,MAA7B,CAAtB;;AACA,kBAAMC,gBAAgB,GAAGrB,mBAAmB,CAACgB,YAAD,EAAeC,cAAf,EAA8B9sE,MAAM,CAAC0N,OAAP,CAAetgB,KAA7C,EAAoD,IAApD,CAA5C;;AACA,kBAAM4/E,YAAW,GAAG,MAAH,OAAG,CAAH,kBACZF,cADY,CAAG,EACF;AAChB91E,qBAAK,EAAEk2E,gBAAgB,CAACl2E,KADR;AAEhBgD,gCAAgB,EAAEkzE,gBAAgB,CAAClzE;AAFnB,eADE,CAApB;;AAKA8N,uBAAS,CAACmJ,GAAV,CAAc,uDAAeg8D,MAA7B,EAAqCD,YAArC;AACD;;AAED,gBACEhtE,MAAM,CAAC0N,OAAP,CAAe8rB,cAAf,IACAx5B,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAe+mF,UADzC,IAEAntE,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAesb,IAFzC,IAGAoG,SAAS,CAAC/d,GAAV,CAAc,uDAAeojF,UAA7B,CAJF,EAKE;AACA,kBAAML,eAAa,GAAGhlE,SAAS,CAACxgB,GAAV,CAAc,uDAAe6lF,UAA7B,CAAtB;;AACA,kBAAMD,iBAAgB,GAAGrB,mBAAmB,CAACgB,YAAD,EAAeC,eAAf,EAA8B9sE,MAAM,CAAC0N,OAAP,CAAetgB,KAA7C,CAA5C;;AACA,kBAAM4/E,aAAW,GAAG,MAAH,OAAG,CAAH,kBACZF,eADY,CAAG,EACF;AAChB91E,qBAAK,EAAEk2E,iBAAgB,CAACl2E,KADR;AAEhBgD,gCAAgB,EAAEkzE,iBAAgB,CAAClzE;AAFnB,eADE,CAApB;;AAKA8N,uBAAS,CAACmJ,GAAV,CAAc,uDAAek8D,UAA7B,EAAyCH,aAAzC;AACD;;AAED,gBAAMh2E,MAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,SAAtB,EAAiC6iE,OAAjC,CAA1B;;AACA,gBAAMyC,gBAAgB,GAAGtlE,SAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAzB;AACA53C,iBAAK,CAAC8X,gBAAN,GAAyBozE,gBAAgB,CAACpzE,gBAA1C;;AACAhD,kBAAK,CAAC/G,OAAN,CAAc,UAAC2E,IAAD,EAAgB;AAC5BA,kBAAI,CAAC0R,aAAL,GAAqB1R,IAAI,CAAC4O,gBAAL,CAAsB9kB,GAAtB,CAA0B,UAAC0Q,IAAD;AAAA,uBAAwBA,IAAI,CAACxK,IAA7B;AAAA,eAA1B,EAA6D8K,IAA7D,CAAkE,IAAlE,CAArB;;AACA,kBAAIkF,IAAI,CAACsD,oBAAL,IAA6BhW,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAjC,EAAmE;AACjE+V,oBAAI,CAACoE,OAAL,GAAe9W,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAf;AACA+V,oBAAI,CAACsD,oBAAL,GAA4B,KAA5B;AACD;AACF,aAND;;AAOAhW,iBAAK,CAACyqF,SAAN,GAAkB3sE,MAAM,CAAC0N,OAAP,CAAetgB,KAAjC;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKlL,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,MADQ;AAERc,oBAAM,EAAE,IAFA;AAGR9Q,wBAAU,EAAE,KAHJ;AAIRiR,iCAAmB,EAAE,IAJb;AAKR0yE,qBAAO,EAAPA,OALQ;AAMR7iE,uBAAS,EAATA;AANQ,aADH,CAAP;AASD;;AAED,aAAK,yDAAgB64C,+BAArB;AAAsD;AACpD,mBAAO,MAAP,OAAO,CAAP,kBACKz+D,KADL,CAAO,EACG;AACRuqF,+BAAiB,EAAE;AADX,aADH,CAAP;AAID;;AAED,aAAK,yDAAgB5sB,2BAArB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBAAY39D,KAAZ,CAAO,EAAU;AAAEk4C,gCAAkB,EAAEp6B,MAAM,CAAC0N,OAAP,CAAe2/D;AAArC,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBltB,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAYj+D,KAAZ,CAAO,EAAU;AAAE+V,iCAAmB,EAAE;AAAvB,aAAV,CAAP;AACD;;AACD,aAAK,yDAAgBooD,8BAArB;AAAqD;AACnD,gBAAIrgD,MAAM,CAAC0N,OAAP,CAAeisB,iBAAnB,EAAsC;AACpC,kBAAM2zC,oBAAoB,GAAGtC,mBAAmB,CAAC,MAAD,OAAC,CAAD,kBAAM9oF,KAAK,CAACu4C,gBAAZ,CAAC,EAAgCz6B,MAAM,CAAC0N,OAAvC,CAAD,CAAhD;AACA,kBAAM6/D,cAAc,GAAG,MAAH,OAAG,CAAH,gCACfrrF,KAAK,CAACu4C,gBADS,GAEfz6B,MAAM,CAAC0N,OAFQ,CAAG,EAEJ;AACjB8/D,kCAAkB,EAAEF;AADH,eAFI,CAAvB;AAKA,qBAAO,MAAP,OAAO,CAAP,kBACKprF,KADL,CAAO,EACG;AACRu4C,gCAAgB,EAAE8yC,cADV;AAERt1E,mCAAmB,EAAE;AAFb,eADH,CAAP;AAKD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK/V,KADL,CAAO,EACG;AACRu4C,8BAAgB,EAAE,MAAF,OAAE,CAAF,kBAAOz6B,MAAM,CAAC0N,OAAd,CAAE,EAAmB;AAAE8/D,kCAAkB,EAAExC,mBAAmB,CAAChrE,MAAM,CAAC0N,OAAR;AAAzC,eAAnB,CADV;AAERzV,iCAAmB,EAAE;AAFb,aADH,CAAP;AAKD;;AACD,aAAK,yDAAgBwoD,sCAArB;AAA6D;AAC3D,mBAAO,MAAP,OAAO,CAAP,kBAAYv+D,KAAZ,CAAO,EAAU;AAAE8vB,sCAAwB,EAAEhS,MAAM,CAAC0N;AAAnC,aAAV,CAAP;AACD;;AACD,aAAK,yDAAgBuyC,qBAArB;AAA4C;AAC1C/9D,iBAAK,CAAC0hC,eAAN,GAAwB5jB,MAAM,CAAC0N,OAA/B;AACA,mBAAO,MAAP,OAAO,CAAP,EAAO,EACFxrB,KADE,CAAP;AAGD;;AACD,aAAK,yDAAgB6/D,SAArB;AAAgC;AAC9B,mBAAO,MAAP,OAAO,CAAP,kBAAY7/D,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBiR,iCAAmB,EAAE,IAAzC;AAA+CuN,0BAAY,EAAE;AAA7D,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB28C,kBAArB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBAAYjgE,KAAZ,CAAO,EAAU;AAAEsjB,0BAAY,EAAE;AAAhB,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBy8C,iBAArB;AAAwC;AACtC,gBAAMwrB,SAAS,GAAGztE,MAAM,CAAC0N,OAAP,CAAehP,GAAf,CAAmBE,QAAnB,GAA8B/B,KAA9B,CAAoC,GAApC,CAAlB;AADsC,gBAE9BiL,UAF8B,GAEhB5lB,KAFgB,CAE9B4lB,SAF8B;AAAA,gBAG9B6iE,QAH8B,GAGlBzoF,KAHkB,CAG9ByoF,OAH8B;AAMtC,gBAAM+C,gBAAgB,GAAG1tE,MAAM,CAAC0N,OAAP,CAAerM,YAAxC;;AACA,gBAAIqsE,gBAAgB,IAAI5lE,UAAS,CAAC/d,GAAV,CAAc2jF,gBAAd,CAAxB,EAAyD;AACvD,kBAAMC,iBAAiB,GAAG7lE,UAAS,CAACxgB,GAAV,CAAcomF,gBAAd,CAA1B;;AACAC,+BAAiB,CAAC32E,KAAlB,GAA0B22E,iBAAiB,CAAC32E,KAAlB,CAAwBnP,MAAxB,CAA+B,UAAA+M,IAAI;AAAA,uBAAI,CAAC64E,SAAS,CAAC36E,QAAV,CAAmB8B,IAAI,CAACgK,QAAL,EAAnB,CAAL;AAAA,eAAnC,CAA1B;AACA+uE,+BAAiB,CAAC3zE,gBAAlB,GACE2zE,iBAAiB,CAAC3zE,gBAAlB,IAAsCyzE,SAAS,CAACzrF,MAAhD,GACI2rF,iBAAiB,CAAC3zE,gBAAlB,GAAqCyzE,SAAS,CAACzrF,MADnD,GAEI,CAHN;;AAIA8lB,wBAAS,CAACmJ,GAAV,CAAcy8D,gBAAd,EAAgCC,iBAAhC;AACD;;AAED,gBAAMC,gBAAgB,GAAG5tE,MAAM,CAAC0N,OAAP,CAAetnB,MAAxC;;AACA,gBAAIwnF,gBAAgB,IAAI9lE,UAAS,CAAC/d,GAAV,CAAc6jF,gBAAd,CAAxB,EAAyD;AACvD,kBAAMC,iBAAiB,GAAG/lE,UAAS,CAACxgB,GAAV,CAAcsmF,gBAAd,CAA1B;;AACA,kBAAME,UAAU,GAAGL,SAAS,CACzB/uF,GADgB,CACZ,UAACqvF,OAAD;AAAA,uBAAmBpD,QAAO,CAACoD,OAAD,CAAP,GAAmBpD,QAAO,CAACoD,OAAD,CAA1B,GAAsC,IAAzD;AAAA,eADY,EAEhBlmF,MAFgB,CAET,UAAC+M,IAAD;AAAA,uBAAe,CAAC,CAACA,IAAjB;AAAA,eAFS,CAAnB;;AAGA,kBAAMs4E,kBAAgB,GAAGrB,mBAAmB,CAACiC,UAAD,EAAaD,iBAAb,EAAgC3rF,KAAK,CAACyqF,SAAtC,CAA5C;;AACA,kBAAMK,aAAW,GAAG,MAAH,OAAG,CAAH,kBACZa,iBADY,CAAG,EACE;AACpB72E,qBAAK,EAAEyzE,mBAAmB,CAACyC,kBAAgB,CAACl2E,KAAlB,EAAyB9U,KAAK,CAACyoF,OAA/B,CADN;AAEpB3wE,gCAAgB,EAAEkzE,kBAAgB,CAAClzE;AAFf,eADF,CAApB;;AAKA8N,wBAAS,CAACmJ,GAAV,CAAc28D,gBAAd,EAAgCZ,aAAhC;AACD;;AAED,gBAAMgB,WAAW,GAAG,mBAAIlmE,UAAS,CAAC1oB,IAAV,EAAJ,EAAsByI,MAAtB,CAClB,UAAAoC,GAAG;AAAA,qBAAIA,GAAG,KAAKyjF,gBAAR,IAA4BzjF,GAAG,KAAK2jF,gBAApC,IAAwD3jF,GAAG,KAAK/H,KAAK,CAAC43C,aAA1E;AAAA,aADe,CAApB;;AAGAk0C,uBAAW,CAAC/9E,OAAZ,CAAoB,UAAAhG,GAAG,EAAI;AACzB,kBAAMkiF,UAAU,GAAGrkE,UAAS,CAACxgB,GAAV,CAAc2C,GAAd,CAAnB;;AACAkiF,wBAAU,CAACnkE,QAAX,GAAsB,IAAtB;AACAmkE,wBAAU,CAACn1E,KAAX,GAAmB,EAAnB;;AACA8Q,wBAAS,CAACmJ,GAAV,CAAchnB,GAAd,EAAmBkiF,UAAnB;AACD,aALD;AAOA,gBAAM8B,WAAW,GAAG3uF,MAAM,CAACF,IAAP,CAAYurF,QAAZ,CAApB;AACAsD,uBAAW,CAACh+E,OAAZ,CAAoB,UAAAhG,GAAG,EAAI;AACzB,kBAAIwjF,SAAS,CAAC36E,QAAV,CAAmB63E,QAAO,CAAC1gF,GAAD,CAAP,CAAapL,EAAb,CAAgB+f,QAAhB,EAAnB,CAAJ,EAAoD;AAClD+rE,wBAAO,CAAC1gF,GAAD,CAAP,GAAe,MAAH,OAAG,CAAH,kBAAQ0gF,QAAO,CAAC1gF,GAAD,CAAf,CAAG,EAAiB;AAAE7D,wBAAM,EAAE4Z,MAAM,CAAC0N,OAAP,CAAetnB;AAAzB,iBAAjB,CAAf;;AACA,oBACE4Z,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAesT,KAAzC,IACAixE,QAAO,CAAC1gF,GAAD,CAAP,CAAamO,YADb,IAEAuyE,QAAO,CAAC1gF,GAAD,CAAP,CAAaikF,cAAb,GAA8B,CAF9B,IAGAluE,MAAM,CAAC0N,OAAP,CAAejP,YAAf,KAAgC,KAJlC,EAKE;AAEAksE,0BAAO,CAAC1gF,GAAD,CAAP,CAAamiF,oBAAb,GAAoC;AAClCE,wCAAoB,EAAE3B,QAAO,CAAC1gF,GAAD,CAAP,CAAaikF,cADD;AAElC3B,4CAAwB,EAAE;AAFQ,mBAApC;AAID,iBAXD,MAWO,IACLvsE,MAAM,CAAC0N,OAAP,CAAerM,YAAf,KAAgC,uDAAe3H,KAA/C,IACAixE,QAAO,CAAC1gF,GAAD,CAAP,CAAamO,YADb,IAEAuyE,QAAO,CAAC1gF,GAAD,CAAP,CAAaikF,cAAb,GAA8B,CAHzB,EAIL;AAEAvD,0BAAO,CAAC1gF,GAAD,CAAP,CAAamiF,oBAAb,GAAoC;AAClCE,wCAAoB,EAAE,CADY;AAElCC,4CAAwB,EAAE5B,QAAO,CAAC1gF,GAAD,CAAP,CAAaikF;AAFL,mBAApC;AAID;AACF;AACF,aA1BD;AA6BA,gBAAMC,WAAW,GAAG7tE,KAAK,CAACC,OAAN,CAAcP,MAAM,CAAC0N,OAAP,CAAe9Y,IAA7B,IAAqCoL,MAAM,CAAC0N,OAAP,CAAe9Y,IAApD,GAA2D,CAACoL,MAAM,CAAC0N,OAAP,CAAe9Y,IAAhB,CAA/E;AACAu5E,uBAAW,CAACl+E,OAAZ,CAAoB,UAAC2E,IAAD,EAAe;AACjC,kBAAIoL,MAAM,CAAC0N,OAAP,CAAetnB,MAAf,KAA0B,uDAAesT,KAAzC,IAAkD9E,IAAI,CAAC8K,MAA3D,EAAmE;AACjE,oBAAM0uE,QAAQ,GAAGx5E,IAAI,CAAC8K,MAAtB;;AACA,oBAAIirE,QAAO,CAACyD,QAAD,CAAP,IAAqBzD,QAAO,CAACyD,QAAD,CAAP,CAAkBhC,oBAA3C,EAAiE;AAC/DzB,0BAAO,CAACyD,QAAD,CAAP,CAAkBhC,oBAAlB,GAAyC;AACvCE,wCAAoB,EAAE3B,QAAO,CAACyD,QAAD,CAAP,CAAkBhC,oBAAlB,CAAuCE,oBAAvC,GAA8D,CAD7C;AAEvCC,4CAAwB,EACtB5B,QAAO,CAACyD,QAAD,CAAP,CAAkBhC,oBAAlB,CAAuCG,wBAAvC,GAAkE,CAAlE,GACI5B,QAAO,CAACyD,QAAD,CAAP,CAAkBhC,oBAAlB,CAAuCG,wBAAvC,GAAkE,CADtE,GAEI;AALiC,mBAAzC;AAOD;AACF;AACF,aAbD;;AAcA,gBAAMv1E,OAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,UAAtB,EAAiC6iE,QAAjC,CAA1B;;AACA,gBAAM0D,iBAAiB,GAAGvmE,UAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAA1B;;AACA53C,iBAAK,CAAC8X,gBAAN,GAAyBq0E,iBAAiB,GAAGA,iBAAiB,CAACr0E,gBAArB,GAAwC,CAAlF;;AACA,gBACE9X,KAAK,CAAC8V,UAAN,IACA9V,KAAK,CAAC8V,UAAN,CAAiBK,QADjB,IAEAnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0B6E,IAA1B,CAA+B,UAAA3D,KAAK;AAAA,qBAAIk0E,SAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ;AAAA,aAApC,CAHF,EAIE;AACA1c,mBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BpI,OAA1B,CAAkC,UAACsJ,KAAD,EAAQkD,KAAR,EAAkB;AAClD,oBAAIgxE,SAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ,EAA6C;AAC3C1c,uBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BoE,KAA1B,IAAmC,MAAH,OAAG,CAAH,kBAAQva,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BoE,KAA1B,CAAR,CAAG,EAAqC;AAAErW,0BAAM,EAAE4Z,MAAM,CAAC0N,OAAP,CAAetnB;AAAzB,mBAArC,CAAnC;AACAlE,uBAAK,CAAC8V,UAAN,CAAiBk2E,cAAjB,GAAkChsF,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BrW,MAA5D;AACD;AACF,eALD;AAMA,kBAAMssF,oBAAoB,GAAGpsF,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BxQ,MAA1B,CAAiC,UAAA0R,KAAK;AAAA,uBAAIA,KAAK,CAACnT,MAAN,KAAiBsnF,gBAArB;AAAA,eAAtC,CAA7B;;AACA,kBAAIA,gBAAgB,IAAI5lE,UAAS,CAAC/d,GAAV,CAAc2jF,gBAAd,CAAxB,EAAyD;AACvD,oBAAMC,kBAAiB,GAAG7lE,UAAS,CAACxgB,GAAV,CAAcomF,gBAAd,CAA1B;;AACAC,kCAAiB,CAAC32E,KAAlB,GAA0B22E,kBAAiB,CAAC32E,KAAlB,CAAwBnP,MAAxB,CAA+B,UAAA8W,MAAM,EAAI;AACjE,sBAAIA,MAAM,KAAKzc,KAAK,CAAC8V,UAAN,CAAiBnZ,EAA5B,IAAkCyvF,oBAAoB,CAACtsF,MAArB,KAAgC,CAAtE,EAAyE;AACvE,2BAAO,KAAP;AACD;;AACD,yBAAO,IAAP;AACD,iBALyB,CAA1B;;AAMA8lB,0BAAS,CAACmJ,GAAV,CAAcy8D,gBAAd,EAAgCC,kBAAhC;AACD;AACF;;AACD,gBAAIzrF,KAAK,CAAC8V,UAAN,IAAoBy1E,SAAS,CAAC36E,QAAV,CAAmB5Q,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,CAAoB+f,QAApB,EAAnB,CAAxB,EAA4E;AAC1E1c,mBAAK,CAAC8V,UAAN,GAAmB,MAAH,OAAG,CAAH,kBAAQ9V,KAAK,CAAC8V,UAAd,CAAG,EAAqB;AAAE5R,sBAAM,EAAE4Z,MAAM,CAAC0N,OAAP,CAAetnB;AAAzB,eAArB,CAAnB;AACD;;AAED,mBAAO,MAAP,OAAO,CAAP,kBACKlE,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER2zE,qBAAO,EAAPA,QAFQ;AAGR7iE,uBAAS,EAATA,UAHQ;AAIR9gB,wBAAU,EAAE,KAJJ;AAKRiR,iCAAmB,EAAE,IALb;AAMRuN,0BAAY,EAAE;AANN,aADH,CAAP;AASD;;AAED,aAAK,yDAAgBi+C,wBAArB;AAA+C;AAAA,gBACvCzsD,OADuC,GAC7B9U,KAD6B,CACvC8U,KADuC;AAAA,gBAErC2zE,SAFqC,GAEzBzoF,KAFyB,CAErCyoF,OAFqC;AAG7C,gBAAM4D,UAAU,GAAGjuE,KAAK,CAACC,OAAN,CAAcP,MAAM,CAAC0N,OAAP,CAAe9Y,IAA7B,IAAqCoL,MAAM,CAAC0N,OAAP,CAAe9Y,IAApD,GAA2D,CAACoL,MAAM,CAAC0N,OAAP,CAAe9Y,IAAhB,CAA9E;AAH6C,gBAIrCkT,WAJqC,GAIvB5lB,KAJuB,CAIrC4lB,SAJqC;;AAM7C,gBAAI5lB,KAAK,CAAC4lB,SAAN,CAAgB/d,GAAhB,CAAoBiW,MAAM,CAAC0N,OAAP,CAAerM,YAAnC,CAAJ,EAAsD;AACpD,kBAAMmtE,YAAY,GAAG1mE,WAAS,CAACxgB,GAAV,CAAc0Y,MAAM,CAAC0N,OAAP,CAAerM,YAA7B,CAArB;;AACA,kBAAM6rE,kBAAgB,GAAGrB,mBAAmB,CAAC0C,UAAD,EAAaC,YAAb,EAA2BtsF,KAAK,CAACyqF,SAAjC,CAA5C;;AACAO,gCAAgB,CAACl2E,KAAjB,GAAyByzE,mBAAmB,CAACyC,kBAAgB,CAACl2E,KAAlB,EAAyB2zE,SAAzB,CAA5C;;AACA7iE,yBAAS,CAACmJ,GAAV,CAAcjR,MAAM,CAAC0N,OAAP,CAAerM,YAA7B,EAA2C6rE,kBAA3C;AACD;;AAED,gBAAIhrF,KAAK,CAAC4lB,SAAN,CAAgB/d,GAAhB,CAAoBiW,MAAM,CAAC0N,OAAP,CAAetnB,MAAnC,CAAJ,EAAgD;AAC9C,kBAAMooF,aAAY,GAAG1mE,WAAS,CAACxgB,GAAV,CAAc0Y,MAAM,CAAC0N,OAAP,CAAetnB,MAA7B,CAArB;;AACAooF,2BAAY,CAACx3E,KAAb,GAAqB,EAArB;AACAw3E,2BAAY,CAACxmE,QAAb,GAAwB,IAAxB;;AACAF,yBAAS,CAACmJ,GAAV,CAAcjR,MAAM,CAAC0N,OAAP,CAAetnB,MAA7B,EAAqCooF,aAArC;AACD;;AAEDD,sBAAU,CAACt+E,OAAX,CAAmB,UAAC2E,IAAD,EAAe;AAChC,kBAAIoL,MAAM,CAAC0N,OAAP,CAAerM,YAAf,KAAgC,uDAAe3H,KAA/C,IAAwD9E,IAAI,CAACwD,YAA7D,IAA6ExD,IAAI,CAACs5E,cAAL,GAAsB,CAAvG,EAA0G;AAIxG,oBAAIvD,SAAO,CAAC/1E,IAAI,CAAC/V,EAAN,CAAX,EAAsB;AACpB8rF,2BAAO,CAAC/1E,IAAI,CAAC/V,EAAN,CAAP,CAAiButF,oBAAjB,GAAwC;AACtCE,wCAAoB,EAAE3B,SAAO,CAAC/1E,IAAI,CAAC/V,EAAN,CAAP,CAAiBqvF,cADD;AAEtC3B,4CAAwB,EAAE;AAFY,mBAAxC;AAID;AACF;AACF,aAZD;;AAcA,gBAAIvsE,MAAM,CAAC0N,OAAP,CAAerM,YAAf,KAAgCnf,KAAK,CAAC43C,aAA1C,EAAyD;AACvD9iC,qBAAK,GAAGk1E,YAAY,CAAClsE,MAAM,CAAC0N,OAAP,CAAerM,YAAhB,EAA8ByG,WAA9B,EAAyC5lB,KAAK,CAACyoF,OAA/C,CAApB;;AACA,kBAAM8D,aAAa,GAAG3mE,WAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAtB;;AACA53C,mBAAK,CAAC8X,gBAAN,GAAyBy0E,aAAa,GAAGA,aAAa,CAACz0E,gBAAjB,GAAoC,CAA1E;AACD;;AACD,gBAAMyzE,UAAS,GAAGztE,MAAM,CAAC0N,OAAP,CAAehP,GAAf,CAAmBE,QAAnB,GAA8B/B,KAA9B,CAAoC,GAApC,CAAlB;;AACA,gBACE3a,KAAK,CAAC8V,UAAN,IACA9V,KAAK,CAAC8V,UAAN,CAAiBK,QADjB,IAEAnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0B6E,IAA1B,CAA+B,UAAA3D,KAAK;AAAA,qBAAIk0E,UAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ;AAAA,aAApC,CAHF,EAIE;AACA1c,mBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BpI,OAA1B,CAAkC,UAACsJ,KAAD,EAAQkD,KAAR,EAAkB;AAClD,oBAAIgxE,UAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ,EAA6C;AAC3C1c,uBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BoE,KAA1B,IAAmC,MAAH,OAAG,CAAH,kBAC3Bva,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BoE,KAA1B,CAD2B,CAAG,EACE;AACnCrW,0BAAM,EAAE4Z,MAAM,CAAC0N,OAAP,CAAerM;AADY,mBADF,CAAnC;AAID;AACF,eAPD;AAQD;;AACD,gBAAInf,KAAK,CAAC8V,UAAN,IAAoBy1E,UAAS,CAAC36E,QAAV,CAAmB5Q,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,CAAoB+f,QAApB,EAAnB,CAAxB,EAA4E;AAC1E1c,mBAAK,CAAC8V,UAAN,GAAmB,MAAH,OAAG,CAAH,kBAAQ9V,KAAK,CAAC8V,UAAd,CAAG,EAAqB;AAAE5R,sBAAM,EAAE4Z,MAAM,CAAC0N,OAAP,CAAerM;AAAzB,eAArB,CAAnB;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKnf,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER8Q,uBAAS,EAATA,WAFQ;AAGR7P,iCAAmB,EAAE;AAHb,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgBwqD,iBAArB;AAAwC;AACtC,gBAAMgrB,WAAS,GAAGztE,MAAM,CAAC0N,OAAP,CAAehP,GAAf,CAAmB7B,KAAnB,CAAyB,GAAzB,CAAlB;;AADsC,gBAE9BiL,WAF8B,GAEhB5lB,KAFgB,CAE9B4lB,SAF8B;AAAA,gBAG9B6iE,SAH8B,GAGlBzoF,KAHkB,CAG9ByoF,OAH8B;AAItC,gBAAM+D,MAAM,GAAGpvF,MAAM,CAACF,IAAP,CAAYurF,SAAZ,CAAf;AACA+D,kBAAM,CAACz+E,OAAP,CAAe,UAAA0O,MAAM,EAAI;AACvB,kBAAI8uE,WAAS,CAAC36E,QAAV,CAAmB6L,MAAM,CAACC,QAAP,EAAnB,CAAJ,EAA2C;AACzC+rE,yBAAO,CAAChsE,MAAD,CAAP,GAAkB,MAAH,OAAG,CAAH,kBAAQgsE,SAAO,CAAChsE,MAAD,CAAf,CAAG,EAAoB;AAAEhH,sBAAI,EAAEqI,MAAM,CAAC0N,OAAP,CAAe/V;AAAvB,iBAApB,CAAlB;AACD;AACF,aAJD;;AAOA,gBAAIzV,KAAK,CAAC43C,aAAN,KAAwB,uDAAemzC,MAA3C,EAAmD;AACjD,kBAAInlE,WAAS,CAAC/d,GAAV,CAAc,uDAAekjF,MAA7B,CAAJ,EAA0C;AAExC,oBAAM0B,eAAe,GAAG7mE,WAAS,CAACxgB,GAAV,CAAc,uDAAe2lF,MAA7B,CAAxB;;AACA0B,+BAAe,CAAC3mE,QAAhB,GAA2B,IAA3B;;AACAF,2BAAS,CAACmJ,GAAV,CAAc,uDAAeg8D,MAA7B,EAAqC0B,eAArC;AACD;AACF,aAPD,MAOO;AACL,kBAAMC,iBAAiB,GAAG9mE,WAAS,CAACxgB,GAAV,CAAc,uDAAe2lF,MAA7B,CAA1B;;AACA,kBAAI4B,gBAAgB,GAAG,CAAvB;AACA,kBAAMC,yBAAyB,GAAGF,iBAAiB,CAAC53E,KAAlB,CAAwBnP,MAAxB,CAA+B,UAAA8W,MAAM,EAAI;AACzE,oBAAI8uE,WAAS,CAAC36E,QAAV,CAAmB6L,MAAM,CAACC,QAAP,EAAnB,KAAyCoB,MAAM,CAAC0N,OAAP,CAAe/V,IAA5D,EAAkE;AAChEk3E,kCAAgB;AAChB,yBAAO,KAAP;AACD;;AACD,uBAAO,IAAP;AACD,eANiC,CAAlC;AAOAD,+BAAiB,CAAC53E,KAAlB,GAA0B83E,yBAA1B;;AACA,kBAAI9uE,MAAM,CAAC0N,OAAP,CAAe/V,IAAnB,EAAyB;AACvBi3E,iCAAiB,CAAC50E,gBAAlB,GACE40E,iBAAiB,CAAC50E,gBAAlB,IAAsC60E,gBAAtC,GACID,iBAAiB,CAAC50E,gBAAlB,GAAqC60E,gBADzC,GAEI,CAHN;AAID;;AACD/mE,yBAAS,CAACmJ,GAAV,CAAc,uDAAeg8D,MAA7B,EAAqC2B,iBAArC;AACD;;AACD,gBAAM53E,OAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,WAAtB,EAAiC6iE,SAAjC,CAA1B;;AACA,gBAAM8D,cAAa,GAAG3mE,WAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAtB;;AACA53C,iBAAK,CAAC8X,gBAAN,GAAyBy0E,cAAa,GAAGA,cAAa,CAACz0E,gBAAjB,GAAoC,CAA1E;;AAEA,gBAAI9X,KAAK,CAAC8V,UAAN,IAAoBy1E,WAAS,CAAC36E,QAAV,CAAmB5Q,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,CAAoB+f,QAApB,EAAnB,CAAxB,EAA4E;AAC1E1c,mBAAK,CAAC8V,UAAN,GAAmB,MAAH,OAAG,CAAH,kBAAQ9V,KAAK,CAAC8V,UAAd,CAAG,EAAqB;AAAEL,oBAAI,EAAEqI,MAAM,CAAC0N,OAAP,CAAe/V;AAAvB,eAArB,CAAnB;AACD;;AAED,mBAAO,MAAP,OAAO,CAAP,kBACKzV,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER2zE,qBAAO,EAAPA,SAFQ;AAGR7iE,uBAAS,EAATA,WAHQ;AAIR9gB,wBAAU,EAAE,KAJJ;AAKRiR,iCAAmB,EAAE;AALb,aADH,CAAP;AAQD;;AAED,aAAK,yDAAgB4qD,iBAArB;AAAwC;AACtC,gBAAM4qB,WAAS,GAAGztE,MAAM,CAAC0N,OAAP,CAAehP,GAAf,CAAmB7B,KAAnB,CAAyB,GAAzB,CAAlB;;AADsC,gBAE9BiL,WAF8B,GAEhB5lB,KAFgB,CAE9B4lB,SAF8B;AAAA,gBAG9B6iE,SAH8B,GAGlBzoF,KAHkB,CAG9ByoF,OAH8B;;AAItC,gBAAM+D,OAAM,GAAGpvF,MAAM,CAACF,IAAP,CAAYurF,SAAZ,CAAf;;AACA+D,mBAAM,CAACz+E,OAAP,CAAe,UAAA0O,MAAM,EAAI;AACvB,kBAAI8uE,WAAS,CAAC36E,QAAV,CAAmB6L,MAAM,CAACC,QAAP,EAAnB,CAAJ,EAA2C;AACzC,oBAAMiD,oBAAoB,GAAG,EAAE,CAAC7B,MAAM,CAAC0N,OAAP,CAAezQ,OAAhB,IAA2B+C,MAAM,CAAC0N,OAAP,CAAejP,YAA5C,CAA7B;AACAksE,yBAAO,CAAChsE,MAAD,CAAP,GAAkB,MAAH,OAAG,CAAH,kBAAQgsE,SAAO,CAAChsE,MAAD,CAAf,CAAG,EAAoB;AAAE1B,yBAAO,EAAE+C,MAAM,CAAC0N,OAAP,CAAezQ,OAA1B;AAAmC4E,sCAAoB,EAApBA;AAAnC,iBAApB,CAAlB;AACD;AACF,aALD;;AAQA,gBAAI3f,KAAK,CAAC43C,aAAN,KAAwB,uDAAemxC,OAA3C,EAAoD;AAClD,kBAAInjE,WAAS,CAAC/d,GAAV,CAAc,uDAAekhF,OAA7B,CAAJ,EAA2C;AAEzC,oBAAM8D,gBAAgB,GAAGjnE,WAAS,CAACxgB,GAAV,CAAc,uDAAe2jF,OAA7B,CAAzB;;AACA8D,gCAAgB,CAAC/mE,QAAjB,GAA4B,IAA5B;;AACAF,2BAAS,CAACmJ,GAAV,CAAc,uDAAeg6D,OAA7B,EAAsC8D,gBAAtC;AACD;AACF,aAPD,MAOO;AACL,kBAAMH,kBAAiB,GAAG9mE,WAAS,CAACxgB,GAAV,CAAc,uDAAe2jF,OAA7B,CAA1B;;AACA,kBAAI4D,iBAAgB,GAAG,CAAvB;;AACA,kBAAMC,0BAAyB,GAAGF,kBAAiB,CAAC53E,KAAlB,CAAwBnP,MAAxB,CAA+B,UAAA8W,MAAM,EAAI;AACzE,oBAAI8uE,WAAS,CAAC36E,QAAV,CAAmB6L,MAAM,CAACC,QAAP,EAAnB,KAAyC,CAACoB,MAAM,CAAC0N,OAAP,CAAezQ,OAA7D,EAAsE;AACpE4xE,mCAAgB;AAChB,yBAAO,KAAP;AACD;;AACD,oBAAI3sF,KAAK,CAAC8V,UAAN,IAAoB2G,MAAM,KAAKzc,KAAK,CAAC8V,UAAN,CAAiBnZ,EAApD,EAAwD;AAAA,sBAC9CwZ,QAD8C,GACjCnW,KAAK,CAAC8V,UAD2B,CAC9CK,QAD8C;;AAEtD,sBAAIA,QAAQ,IAAIA,QAAQ,CAACrW,MAAT,GAAkB,CAAlC,EAAqC;AACnCqW,4BAAQ,CAACpI,OAAT,CAAiB,UAACsJ,KAAD,EAAQkD,KAAR,EAAkB;AACjC,0BAAIgxE,WAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ,EAA6C;AAC3CvG,gCAAQ,CAACoE,KAAD,CAAR,GAAkB,MAAH,OAAG,CAAH,kBAAQlD,KAAR,CAAG,EAAU;AAAE0D,iCAAO,EAAE+C,MAAM,CAAC0N,OAAP,CAAezQ;AAA1B,yBAAV,CAAlB;AACD;AACF,qBAJD;AAKA,2BAAO5E,QAAQ,CAAC6E,IAAT,CAAc,UAAA3D,KAAK;AAAA,6BAAIA,KAAK,CAAC0D,OAAV;AAAA,qBAAnB,CAAP;AACD;AACF;;AACD,uBAAO,IAAP;AACD,eAjBiC,CAAlC;;AAkBA,kBAAI,CAAC+C,MAAM,CAAC0N,OAAP,CAAezQ,OAApB,EAA6B;AAC3B2xE,kCAAiB,CAAC50E,gBAAlB,GACE40E,kBAAiB,CAAC50E,gBAAlB,IAAsC60E,iBAAtC,GACID,kBAAiB,CAAC50E,gBAAlB,GAAqC60E,iBADzC,GAEI,CAHN;AAID;;AACDD,gCAAiB,CAAC53E,KAAlB,GAA0B83E,0BAA1B;;AACAhnE,yBAAS,CAACmJ,GAAV,CAAc,uDAAeg6D,OAA7B,EAAsC2D,kBAAtC;AACD;;AAED,gBAAI1sF,KAAK,CAAC8V,UAAV,EAAsB;AAAA,kBACZK,QADY,GACCnW,KAAK,CAAC8V,UADP,CACZK,QADY;;AAEpB,kBAAIo1E,WAAS,CAAC36E,QAAV,CAAmB5Q,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,CAAoB+f,QAApB,EAAnB,CAAJ,EAAwD;AACtD,oBAAIoB,MAAM,CAAC0N,OAAP,CAAejP,YAAf,IAA+BpG,QAA/B,IAA2CA,QAAQ,CAACrW,MAAT,GAAkB,CAAjE,EAAoE;AAClEqW,0BAAQ,CAACpI,OAAT,CAAiB,UAACsJ,KAAD,EAAQkD,KAAR;AAAA,2BAAmBpE,QAAQ,CAACoE,KAAD,CAAR,CAAgBQ,OAAhB,GAA0B+C,MAAM,CAAC0N,OAAP,CAAezQ,OAA5D;AAAA,mBAAjB;AACD;;AACD,oBAAM4E,oBAAoB,GACxBxJ,QAAQ,IAAIA,QAAQ,CAACrW,MAAT,GAAkB,CAA9B,GACIqW,QAAQ,CAAC6E,IAAT,CAAc,UAAA3D,KAAK;AAAA,yBAAIA,KAAK,CAAC0D,OAAV;AAAA,iBAAnB,KAAyC+C,MAAM,CAAC0N,OAAP,CAAezQ,OAD5D,GAEI+C,MAAM,CAAC0N,OAAP,CAAezQ,OAHrB;AAIA/a,qBAAK,CAAC8V,UAAN,GAAmB,MAAH,OAAG,CAAH,kBAAQ9V,KAAK,CAAC8V,UAAd,CAAG,EAAqB;AAAEiF,yBAAO,EAAE+C,MAAM,CAAC0N,OAAP,CAAezQ,OAA1B;AAAmC5E,0BAAQ,EAARA,QAAnC;AAA6CwJ,sCAAoB,EAApBA;AAA7C,iBAArB,CAAnB;AACD,eATD,MASO,IAAIxJ,QAAQ,IAAIA,QAAQ,CAACrW,MAAT,GAAkB,CAAlC,EAAqC;AAC1CqW,wBAAQ,CAACpI,OAAT,CAAiB,UAACsJ,KAAD,EAAQkD,KAAR,EAAkB;AACjC,sBAAIgxE,WAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ,EAA6C;AAC3CvG,4BAAQ,CAACoE,KAAD,CAAR,GAAkB,MAAH,OAAG,CAAH,kBAAQlD,KAAR,CAAG,EAAU;AAAE0D,6BAAO,EAAE+C,MAAM,CAAC0N,OAAP,CAAezQ;AAA1B,qBAAV,CAAlB;AACD;AACF,iBAJD;;AAKA,oBAAM4E,qBAAoB,GAAGxJ,QAAQ,CAAC6E,IAAT,CAAc,UAAA3D,KAAK;AAAA,yBAAIA,KAAK,CAAC0D,OAAV;AAAA,iBAAnB,KAAyC/a,KAAK,CAAC8V,UAAN,CAAiBiF,OAAvF;;AACA/a,qBAAK,CAAC8V,UAAN,GAAmB,MAAH,OAAG,CAAH,kBAAQ9V,KAAK,CAAC8V,UAAd,CAAG,EAAqB;AAAEK,0BAAQ,EAARA,QAAF;AAAYwJ,sCAAoB,EAApBA;AAAZ,iBAArB,CAAnB;;AACA,oBAAI3f,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,IAAuB8rF,SAA3B,EAAoC;AAClCA,2BAAO,CAACzoF,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAlB,CAAP,GAA+B,MAAH,OAAG,CAAH,kBAAQ8rF,SAAO,CAACzoF,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAlB,CAAf,CAAG,EAAiC;AAAEgjB,wCAAoB,EAApBA;AAAF,mBAAjC,CAA/B;AACD;AACF;AACF;;AAED,gBAAM7K,OAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,WAAtB,EAAiC6iE,SAAjC,CAA1B;;AACA,gBAAM8D,eAAa,GAAG3mE,WAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAtB;;AACA53C,iBAAK,CAAC8X,gBAAN,GAAyBy0E,eAAa,GAAGA,eAAa,CAACz0E,gBAAjB,GAAoC,CAA1E;AAEA,mBAAO,MAAP,OAAO,CAAP,kBACK9X,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER2zE,qBAAO,EAAPA,SAFQ;AAGR7iE,uBAAS,EAATA,WAHQ;AAIR9gB,wBAAU,EAAE,KAJJ;AAKRiR,iCAAmB,EAAE;AALb,aADH,CAAP;AAQD;;AAED,aAAK,yDAAgB4tD,2BAArB;AACA,aAAK,yDAAgB9C,mBAArB;AAA0C;AACxC,gBAAM0qB,WAAS,GAAGztE,MAAM,CAAC0N,OAAP,CAAehP,GAAf,CAAmB7B,KAAnB,CAAyB,GAAzB,CAAlB;;AACA,gBAAMiL,WAAS,GAAG,IAAIkC,GAAJ,CAAQ9nB,KAAK,CAAC4lB,SAAd,CAAlB;;AACA,gBAAM6iE,SAAO,GAAG,MAAH,OAAG,CAAH,EAAG,EAAKzoF,KAAK,CAACyoF,OAAX,CAAhB;;AACA,gBAAMqD,YAAW,GAAG,CAAC,uDAAetzE,KAAhB,EAAuB,uDAAehB,KAAtC,EAA6C,uDAAegI,IAA5D,CAApB;;AACAssE,wBAAW,CAAC/9E,OAAZ,CAAoB,UAAAhG,GAAG,EAAI;AACzB,kBAAI6d,WAAS,CAAC/d,GAAV,CAAcE,GAAd,CAAJ,EAAwB;AACtB,oBAAMkiF,UAAU,GAAGrkE,WAAS,CAACxgB,GAAV,CAAc2C,GAAd,CAAnB;;AACAkiF,0BAAU,CAACn1E,KAAX,GAAmBm1E,UAAU,CAACn1E,KAAX,CAAiBnP,MAAjB,CAAwB,UAAA8W,MAAM;AAAA,yBAAI,CAAC8uE,WAAS,CAAC36E,QAAV,CAAmB6L,MAAM,CAACC,QAAP,EAAnB,CAAL;AAAA,iBAA9B,CAAnB;AACAutE,0BAAU,CAACnyE,gBAAX,GAA8BmyE,UAAU,CAACnyE,gBAAX,GAA8B,CAA9B,GAAkCmyE,UAAU,CAACnyE,gBAAX,GAA8B,CAAhE,GAAoE,CAAlG;AACAmyE,0BAAU,CAACnkE,QAAX,GAAsB,IAAtB;;AACAF,2BAAS,CAACmJ,GAAV,CAAchnB,GAAd,EAAmBkiF,UAAnB;AACD;AACF,aARD;;AASA,gBAAInsE,MAAM,CAAC0N,OAAP,CAAejM,gBAAnB,EAAqC;AACnC,qBAAO,MAAP,OAAO,CAAP,kBACKvf,KADL,CAAO,EACG;AACR4lB,yBAAS,EAATA;AADQ,eADH,CAAP;AAID;;AACD,gBAAM9Q,OAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,WAAtB,EAAiC6iE,SAAjC,CAA1B;;AACA,gBAAM8D,eAAa,GAAG3mE,WAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAtB;;AACA53C,iBAAK,CAAC8X,gBAAN,GAAyBy0E,eAAa,GAAGA,eAAa,CAACz0E,gBAAjB,GAAoC,CAA1E;;AACA,gBACE9X,KAAK,CAAC8V,UAAN,IACA9V,KAAK,CAAC8V,UAAN,CAAiBK,QADjB,IAEAnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0B6E,IAA1B,CAA+B,UAAA3D,KAAK;AAAA,qBAAIk0E,WAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAJ;AAAA,aAApC,CAHF,EAIE;AACA1c,mBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,GAA4BnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BxQ,MAA1B,CAAiC,UAAA0R,KAAK;AAAA,uBAAI,CAACk0E,WAAS,CAAC36E,QAAV,CAAmByG,KAAK,CAAC1a,EAAN,CAAS+f,QAAT,EAAnB,CAAL;AAAA,eAAtC,CAA5B;AACA1c,mBAAK,CAAC8V,UAAN,CAAiBk2E,cAAjB,GAAkChsF,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BrW,MAA5D;AACD;;AAED,mBAAO,MAAP,OAAO,CAAP,kBACKE,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER8Q,uBAAS,EAATA,WAFQ;AAGR6iE,qBAAO,EAAPA,SAHQ;AAIR3jF,wBAAU,EAAE,KAJJ;AAKRiR,iCAAmB,EAAE;AALb,aADH,CAAP;AAQD;;AAED,aAAK,yDAAgBwpD,uBAArB;AAA8C;AAAA,gBACpCmrB,uBADoC,GACR1qF,KADQ,CACpC0qF,uBADoC;AAE5C,gBAAMh4E,IAAI,GAASoL,MAAM,CAAC0N,OAA1B;;AACA,gBAAI9Y,IAAJ,EAAU;AACR,kBAAIA,IAAI,CAACsD,oBAAL,IAA6BhW,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAjC,EAAmE;AACjE+V,oBAAI,CAACsD,oBAAL,GAA4B,KAA5B;AACAtD,oBAAI,CAACoE,OAAL,GAAe9W,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAf;AACD;;AACD,kBACE+V,IAAI,CAACpB,eAAL,KAAyB,6DAAkBC,QAA3C,IACAm5E,uBAAuB,CAAC7iF,GAAxB,CAA4B6K,IAAI,CAAC/V,EAAjC,CADA,IAEA+tF,uBAAuB,CAACtlF,GAAxB,CAA4BsN,IAAI,CAAC/V,EAAjC,EAAqCmD,MAArC,GAA8C,CAHhD,EAIE;AACA4S,oBAAI,CAACgJ,WAAL,GAAmBgvE,uBAAuB,CAACtlF,GAAxB,CAA4BsN,IAAI,CAAC/V,EAAjC,CAAnB;AACD,eAND,MAMO;AACL+V,oBAAI,CAACgJ,WAAL,GAAmB4sE,iBAAiB,CAAC51E,IAAI,CAACgJ,WAAN,CAApC;AACD;;AACD,kBAAIhJ,IAAI,CAACyD,QAAL,IAAiBzD,IAAI,CAACyD,QAAL,CAAcrW,MAAd,GAAuB,CAA5C,EAA+C;AAC7C4S,oBAAI,CAACyD,QAAL,CAAcpI,OAAd,CAAsB,UAAAb,IAAI,EAAI;AAC5B,sBACEA,IAAI,CAACoE,eAAL,KAAyB,6DAAkBC,QAA3C,IACAm5E,uBAAuB,CAAC7iF,GAAxB,CAA4BqF,IAAI,CAACvQ,EAAjC,CADA,IAEA+tF,uBAAuB,CAACtlF,GAAxB,CAA4B8H,IAAI,CAACvQ,EAAjC,EAAqCmD,MAArC,GAA8C,CAHhD,EAIE;AACAoN,wBAAI,CAACwO,WAAL,GAAmBgvE,uBAAuB,CAACtlF,GAAxB,CAA4B8H,IAAI,CAACvQ,EAAjC,CAAnB;AACD,mBAND,MAMO;AACLuQ,wBAAI,CAACwO,WAAL,GAAmB4sE,iBAAiB,CAACp7E,IAAI,CAACwO,WAAN,CAApC;AACD;AACF,iBAVD;AAWD;AACF;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK1b,KADL,CAAO,EACG;AACR8V,wBAAU,EAAEgI,MAAM,CAAC0N,OADX;AAER5T,8BAAgB,EAAE,IAFV;AAGR7B,iCAAmB,EAAE;AAHb,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgB0pD,uBAArB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACKz/D,KADL,CAAO,EACG;AACR4X,8BAAgB,EAAE;AADV,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBmnD,eAArB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBACK/+D,KADL,CAAO,EACG;AACR8V,wBAAU,EAAE,IADJ;AAERC,iCAAmB,EAAE;AAFb,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBkpD,uCAArB;AAA8D;AAC5D,mBAAO,MAAP,OAAO,CAAP,kBACKj/D,KADL,CAAO,EACG;AACR8U,mBAAK,EAAE,EADC;AAERgD,8BAAgB,EAAE,CAFV;AAGRhC,wBAAU,EAAE,IAHJ;AAIRF,oBAAM,EAAE,KAJA;AAKR2iC,8BAAgB,EAAE;AAAE+xC,qBAAK,EAAE;AAAT,eALV;AAMRv0E,iCAAmB,EAAE,IANb;AAORw0E,+BAAiB,EAAE,IAPX;AAQR9B,qBAAO,EAAE,EARD;AASR7iE,uBAAS,EAAE,IAAIkC,GAAJ;AATH,aADH,CAAP;AAYD;;AAED,aAAK,yDAAgBq3C,qBAArB;AAA4C;AAC1C,mBAAO;AACLrqD,mBAAK,EAAE,EADF;AAELgD,8BAAgB,EAAE,CAFb;AAGLhC,wBAAU,EAAE,IAHP;AAILF,oBAAM,EAAE,KAJH;AAKLsiC,gCAAkB,EAAE,CALf;AAMLrkC,+BAAiB,EAAE,EANd;AAOL0kC,8BAAgB,EAAE;AAAE+xC,qBAAK,EAAE;AAAT,eAPb;AAQLv0E,iCAAmB,EAAE,IARhB;AASLw0E,+BAAiB,EAAE,IATd;AAULC,+BAAiB,EAAE,EAVd;AAWL16D,sCAAwB,EAAE,EAXrB;AAYL24D,qBAAO,EAAE,EAZJ;AAaL7iE,uBAAS,EAAE,IAAIkC,GAAJ;AAbN,aAAP;AAeD;;AAED,aAAK,yDAAgBu3C,iBAArB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBACKr/D,KADL,CAAO,EACG;AACR8V,wBAAU,EAAE,IADJ;AAERC,iCAAmB,EAAE;AAFb,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgB4pD,2BAArB;AAAkD;AAChD,gBAAI3/D,KAAK,CAAC8V,UAAV,EAAsB;AACpB,kBAAIgI,MAAM,CAAC0N,OAAP,CAAe4tD,gBAAf,CAAgCxmE,WAApC,EAAiD;AAC/C,oBAAI5S,KAAK,CAAC8V,UAAN,CAAiBnZ,EAAjB,KAAwBmhB,MAAM,CAAC0N,OAAP,CAAe4tD,gBAAf,CAAgC5nC,qBAA5D,EAAmF;AACjFxxC,uBAAK,CAAC8V,UAAN,CAAiBlD,WAAjB,GAA+BkL,MAAM,CAAC0N,OAAP,CAAe4tD,gBAAf,CAAgCxmE,WAA/D;AACD,iBAFD,MAEO;AACL5S,uBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,GAA4BnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0B3Z,GAA1B,CAA8B,UAAAkW,IAAI,EAAI;AAChE,wBAAIA,IAAI,CAAC/V,EAAL,KAAYmhB,MAAM,CAAC0N,OAAP,CAAe4tD,gBAAf,CAAgC5nC,qBAAhD,EAAuE;AACrE9+B,0BAAI,CAACE,WAAL,GAAmBkL,MAAM,CAAC0N,OAAP,CAAe4tD,gBAAf,CAAgCxmE,WAAnD;AACD;;AACD,2BAAOF,IAAP;AACD,mBAL2B,CAA5B;AAMD;AACF;;AACD,kBAAIoL,MAAM,CAAC0N,OAAP,CAAehO,MAAf,KAA0Bxd,KAAK,CAAC8V,UAAN,CAAiBnZ,EAA/C,EAAmD;AACjDqD,qBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,GAA4BnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,IAA6B,EAAzD;AACAnW,qBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,GAA4BnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BxQ,MAA1B,CAAiC,UAAA0R,KAAK;AAAA,yBAAI,EAAEA,KAAK,CAAC1a,EAAN,KAAamhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA9B,CAAJ;AAAA,iBAAtC,CAA5B;AACAqD,qBAAK,CAAC8V,UAAN,CAAiBK,QAAjB,gCAAgCnW,KAAK,CAAC8V,UAAN,CAAiBK,QAAjD,IAA2D2H,MAAM,CAAC0N,OAAlE;AACAxrB,qBAAK,CAAC8V,UAAN,CAAiBk2E,cAAjB,GAAkChsF,KAAK,CAAC8V,UAAN,CAAiBK,QAAjB,CAA0BrW,MAA5D;AACD;AACF;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAYE,KAAZ,CAAO,EAAU;AAAE+V,iCAAmB,EAAE;AAAvB,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB0rD,kBAArB;AAAyC;AAAA,gBAC/B77C,WAD+B,GACjB5lB,KADiB,CAC/B4lB,SAD+B;AAAA,gBAE/B6iE,SAF+B,GAEnBzoF,KAFmB,CAE/ByoF,OAF+B;;AAGvC,gBAAM3zE,OAAK,GAAGk1E,YAAY,CAAClsE,MAAM,CAAC0N,OAAR,EAAiB5F,WAAjB,EAA4B5lB,KAAK,CAACyoF,OAAlC,CAA1B;;AACA,gBAAM3wE,gBAAgB,GAAG8N,WAAS,CAAC/d,GAAV,CAAciW,MAAM,CAAC0N,OAArB,IAAgC5F,WAAS,CAACxgB,GAAV,CAAc0Y,MAAM,CAAC0N,OAArB,EAA8B1T,gBAA9D,GAAiF,CAA1G;AACA1a,kBAAM,CAACF,IAAP,CAAYurF,SAAZ,EAAqB16E,OAArB,CAA6B,UAAAhG,GAAG,EAAI;AAClC,kBAAM2K,IAAI,GAAG+1E,SAAO,CAAC1gF,GAAD,CAApB;AACA2K,kBAAI,CAAC6R,MAAL,GAAc,KAAd;AACAkkE,uBAAO,CAAC1gF,GAAD,CAAP,GAAe,MAAH,OAAG,CAAH,EAAG,EAAK2K,IAAL,CAAf;AACD,aAJD;;AAKAoC,mBAAK,CAAC/G,OAAN,CAAc,UAAA2E,IAAI,EAAI;AACpB,kBAAI1S,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAJ,EAAsC;AACpC+V,oBAAI,CAACoE,OAAL,GAAe9W,KAAK,CAACwqF,iBAAN,CAAwB93E,IAAI,CAAC/V,EAA7B,CAAf;AACA+V,oBAAI,CAACsD,oBAAL,GAA4B,KAA5B;AACD;AACF,aALD;;AAMA,mBAAO,MAAP,OAAO,CAAP,kBACKhW,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER2zE,qBAAO,EAAPA,SAFQ;AAGR3wE,8BAAgB,EAAhBA,gBAHQ;AAIR8/B,2BAAa,EAAE95B,MAAM,CAAC0N;AAJd,aADH,CAAP;AAOD;;AAED,aAAK,yDAAgBm2C,4BAArB;AAAmD;AACjD,gBAAI7jD,MAAM,CAAC0N,OAAP,CAAeshE,uBAAnB,EAA4C;AAC1C,kBAAI,CAAChvE,MAAM,CAAC0N,OAAP,CAAeomB,eAApB,EAAqC;AACnC5xC,qBAAK,CAAC8U,KAAN,GAAc9U,KAAK,CAAC8U,KAAN,CAAYtY,GAAZ,CAAgB,UAAAkW,IAAI,EAAI;AACpC,sBAAIA,IAAI,CAAC/V,EAAL,KAAYmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAA/B,EAAmC;AACjC+V,wBAAI,CAACoE,OAAL,GAAegH,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCU,OAA/C;AACApE,wBAAI,CAACsD,oBAAL,GAA4B,KAA5B;AACD;;AACD,yBAAOtD,IAAP;AACD,iBANa,CAAd;AAOA1S,qBAAK,CAACwqF,iBAAN,CAAwB1sE,MAAM,CAAC0N,OAAP,CAAe7uB,EAAvC,IAA6CmhB,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCU,OAA7E;AACD;;AACD,qBAAO,MAAP,OAAO,CAAP,EAAO,EAAK9W,KAAL,CAAP;AACD;;AAbgD,gBAczC6T,iBAdyC,GAcnB7T,KAdmB,CAczC6T,iBAdyC;AAejD,gBAAIuC,gBAAgB,GAAkBvC,iBAAiB,CAACiK,MAAM,CAAC0N,OAAP,CAAe7uB,EAAhB,CAAjB,IAAwC,EAA9E;AACAyZ,4BAAgB,GAAG,MAAH,OAAG,CAAH,kBACXA,gBADW,CAAG,EACE;AACnBzZ,gBAAE,EAAEmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EADA;AAEnB4Z,qBAAO,EAAEuH,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCG,OAFtB;AAGnBK,2BAAa,EAAEkH,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCQ,aAH5B;AAInBE,qBAAO,EAAEgH,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCU,OAJtB;AAKnBhS,wBAAU,EAAEgZ,MAAM,CAAC0N,OAAP,CAAeomB,eALR;AAMnB56B,6BAAe,EAAE8G,MAAM,CAAC0N,OAAP,CAAepV,gBAAf,CAAgCY,eAN9B;AAOnBzQ,0BAAY,EAAEuX,MAAM,CAAC0N,OAAP,CAAejlB;AAPV,aADF,CAAnB;AAUAsN,6BAAiB,CAACiK,MAAM,CAAC0N,OAAP,CAAe7uB,EAAhB,CAAjB,GAAuCyZ,gBAAvC;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYpW,KAAZ,CAAO,EAAU;AAAE6T,+BAAiB,EAAjBA,iBAAF;AAAqBkC,iCAAmB,EAAE;AAA1C,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB8rD,qBAArB;AAA4C;AAC1C,gBAAI4mB,SAAO,GAAG,MAAH,OAAG,CAAH,EAAG,EAAKzoF,KAAK,CAACyoF,OAAX,CAAd;;AACA,gBAAM7iE,WAAS,GAAG,IAAIkC,GAAJ,CAAQ9nB,KAAK,CAAC4lB,SAAd,CAAlB;;AACA,gBAAM6jE,OAAO,GAAG,MAAH,OAAG,CAAH,EAAG,EAAK3rE,MAAM,CAAC0N,OAAZ,CAAhB;AAEAi9D,qBAAO,GAAGO,aAAa,CAACP,SAAD,EAAU,CAACgB,OAAD,CAAV,CAAvB;;AACA,gBAAIA,OAAO,CAACjsE,MAAZ,EAAoB;AAClB,kBAAM+rE,OAAO,GAAGnsF,MAAM,CAACF,IAAP,CAAYurF,SAAZ,CAAhB;AACAc,qBAAO,CAACx7E,OAAR,CAAgB,UAAA0O,MAAM,EAAI;AACxB,oBAAIgsE,SAAO,CAAChsE,MAAD,CAAP,CAAgB9f,EAAhB,KAAuB8sF,OAAO,CAACjsE,MAAnC,EAA2C;AACzCirE,2BAAO,CAAChsE,MAAD,CAAP,CAAgBvG,YAAhB,GAA+B,IAA/B;AACAuyE,2BAAO,CAAChsE,MAAD,CAAP,CAAgBuvE,cAAhB,GAAiCvD,SAAO,CAAChsE,MAAD,CAAP,CAAgBuvE,cAAhB,GAAiC,CAAlE;;AACA,sBAAIvD,SAAO,CAAChsE,MAAD,CAAP,CAAgBytE,oBAApB,EAA0C;AACxCzB,6BAAO,CAAChsE,MAAD,CAAP,CAAgBytE,oBAAhB,GAAuC,MAAH,OAAG,CAAH,kBAC/BzB,SAAO,CAAChsE,MAAD,CAAP,CAAgBytE,oBADe,CAAG,EACE;AACvCG,8CAAwB,EAAE5B,SAAO,CAAChsE,MAAD,CAAP,CAAgBytE,oBAAhB,CAAqCG,wBAArC,GAAgE;AADnD,qBADF,CAAvC;AAID,mBALD,MAKO;AACL5B,6BAAO,CAAChsE,MAAD,CAAP,CAAgBytE,oBAAhB,GAAuC;AACrCE,0CAAoB,EAAE,CADe;AAErCC,8CAAwB,EAAE;AAFW,qBAAvC;AAID;AACF;AACF,eAhBD;AAiBD;;AAED,gBAAIzkE,WAAS,CAAC/d,GAAV,CAAc4hF,OAAO,CAACvlF,MAAtB,CAAJ,EAAmC;AACjC,kBAAM6oF,eAAe,GAAGnnE,WAAS,CAACxgB,GAAV,CAAcqkF,OAAO,CAACvlF,MAAtB,CAAxB;;AACA,kBAAM8mF,kBAAgB,GAAGrB,mBAAmB,CAAC,CAACF,OAAD,CAAD,EAAYsD,eAAZ,EAA6B/sF,KAAK,CAACyqF,SAAnC,CAA5C;;AACA7kE,yBAAS,CAACmJ,GAAV,CAAc06D,OAAO,CAACvlF,MAAtB,EAA8B8mF,kBAA9B;AACD;;AACD,gBAAMl2E,OAAK,GAAGk1E,YAAY,CAAChqF,KAAK,CAAC43C,aAAP,EAAsBhyB,WAAtB,EAAiC6iE,SAAjC,CAA1B;;AACA,gBAAIzoF,KAAK,CAAC43C,aAAV,EAAyB;AACvB,kBAAM20C,eAAa,GAAG3mE,WAAS,CAACxgB,GAAV,CAAcpF,KAAK,CAAC43C,aAApB,CAAtB;;AACA53C,mBAAK,CAAC8X,gBAAN,GAAyBy0E,eAAa,GAAGA,eAAa,CAACz0E,gBAAjB,GAAoC,CAA1E;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK9X,KADL,CAAO,EACG;AACR8U,mBAAK,EAALA,OADQ;AAER2zE,qBAAO,EAAPA,SAFQ;AAGR7iE,uBAAS,EAATA,WAHQ;AAIR7P,iCAAmB,EAAE;AAJb,aADH,CAAP;AAOD;;AAED,aAAK,yDAAgBotD,YAArB;AAAmC;AACjC,mBAAO,MAAP,OAAO,CAAP,kBAAYnjE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBiR,iCAAmB,EAAE;AAAzC,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBstD,oBAArB;AAA2C;AACzC,gBAAIrjE,KAAK,CAAC4lB,SAAN,CAAgB/d,GAAhB,CAAoBiW,MAAM,CAAC0N,OAAP,CAAetnB,MAAnC,CAAJ,EAAgD;AAC9ClE,mBAAK,CAAC4lB,SAAN,WAAuB9H,MAAM,CAAC0N,OAAP,CAAetnB,MAAtC;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAYlE,KAAZ,CAAO,EAAU;AAAE8U,mBAAK,EAAE,EAAT;AAAahQ,wBAAU,EAAE;AAAzB,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBy+D,oBAArB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAYvjE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBm/D,QAArB;AAA+B;AAC7B,mBAAO,MAAP,OAAO,CAAP,kBAAYjkE,KAAZ,CAAO,EAAU;AAAEi5B,gCAAkB,EAAEnb,MAAM,CAAC0N;AAA7B,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB24C,iBAArB;AAAwC;AACtC,gBAAInkE,KAAK,CAAC4lB,SAAN,CAAgB/d,GAAhB,CAAoBiW,MAAM,CAAC0N,OAAP,CAAetnB,MAAnC,CAAJ,EAAgD;AAC9ClE,mBAAK,CAAC4lB,SAAN,WAAuB9H,MAAM,CAAC0N,OAAP,CAAetnB,MAAtC;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBAAYlE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB+gE,4BAArB;AAAmD;AAAA,gBACzC/vD,UADyC,GACQ9V,KADR,CACzC8V,UADyC;AAAA,gBAC7B2yE,SAD6B,GACQzoF,KADR,CAC7ByoF,OAD6B;AAAA,gBACpBiC,wBADoB,GACQ1qF,KADR,CACpB0qF,uBADoB;AAAA,mCAEd5sE,MAAM,CAAC0N,OAFO;AAAA,gBAEzC9P,WAFyC,oBAEzCA,WAFyC;AAAA,gBAE5BsxE,SAF4B,oBAE5BA,SAF4B;;AAGjD,gBAAIl3E,UAAJ,EAAgB;AACd,kBAAIk3E,SAAS,KAAKl3E,UAAU,CAACnZ,EAA7B,EAAiC;AAC/BmZ,0BAAU,CAAC4F,WAAX,GAAyBA,WAAzB;AACD,eAFD,MAEO,IAAI,OAAA5F,UAAU,CAACK,QAAX,MAAmB,IAAnB,IAAmB,aAAnB,GAAmB,MAAnB,GAAmB,GAAErW,MAArB,IAA8B,CAAlC,EAAqC;AAC1CgW,0BAAU,CAACK,QAAX,CAAoBpI,OAApB,CAA4B,UAAAsJ,KAAK,EAAI;AACnC,sBAAIA,KAAK,CAAC1a,EAAN,KAAaqwF,SAAjB,EAA4B;AAC1B31E,yBAAK,CAACqE,WAAN,GAAoBA,WAApB;AACD;AACF,iBAJD;AAKD;AACF;;AACDte,kBAAM,CAACF,IAAP,CAAYurF,SAAZ,EAAqB16E,OAArB,CAA6B,UAAA0O,MAAM,EAAI;AACrC,kBAAIA,MAAM,KAAKuwE,SAAS,CAACtwE,QAAV,EAAf,EAAqC;AACnC+rE,yBAAO,CAAChsE,MAAD,CAAP,CAAgBf,WAAhB,GAA8BA,WAA9B;AACD;AACF,aAJD;;AAKAgvE,oCAAuB,CAAC37D,GAAxB,CAA4Bi+D,SAA5B,EAAuCtxE,WAAvC;;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY1b,KAAZ,CAAO,EAAU;AAAE8V,wBAAU,EAAVA,UAAF;AAAc2yE,qBAAO,EAAPA,SAAd;AAAuBiC,qCAAuB,EAAvBA;AAAvB,aAAV,CAAP;AACD;;AAED;AAAS;AACP,mBAAO1qF,KAAP;AACD;AA/xBH;AAiyBD;;;;;;;;;;;;;;;;;AChgCD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAKO,aAAS8lF,OAAT,GAQc;AAAA,UAPnB9lF,KAOmB,uEAPK;AACtBoG,iBAAS,EAAE,EADW;AAEtB2F,sBAAc,EAAE,IAFM;AAGtBkhF,4BAAoB,EAAE,KAHA;AAItBC,4BAAoB,EAAE,KAJA;AAKtBnmF,sBAAc,EAAE,IAAI+gB,GAAJ;AALM,OAOL;AAAA,UAAnBhK,MAAmB;;AAEnB,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,yDAAgBo1D,aAArB;AAAoC;AAClC,mBAAO,MAAP,OAAO,CAAP,kBACK3+D,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AACD,aAAK,yDAAgB+5D,qBAArB;AAA4C;AAC1C,gBAAMz4D,SAAS,GAAG0X,MAAM,CAAC0N,OAAzB;AAEA,gBAAMzkB,cAAc,GAAG,IAAI+gB,GAAJ,EAAvB;AACA1hB,qBAAS,CAAC2H,OAAV,CAAkB,UAAC1F,OAAD,EAAsB;AACtC,kBAAM8kF,UAAU,GAAe,EAA/B;AACAA,wBAAU,CAACr8E,UAAX,GAAwBzI,OAAO,CAACyI,UAAhC;AACAq8E,wBAAU,CAACriE,WAAX,GAAyBziB,OAAO,CAACyiB,WAAjC;AACAqiE,wBAAU,CAACvlF,WAAX,GAAyBS,OAAO,CAACT,WAAjC;AACAulF,wBAAU,CAACzkF,QAAX,GAAsBL,OAAO,CAACK,QAA9B;AACAykF,wBAAU,CAACr7E,UAAX,GAAwB,IAAxB;;AACA,kBAAI/K,cAAc,CAACc,GAAf,CAAmBQ,OAAO,CAAC1L,EAA3B,KAAkCoK,cAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,EAA+BmD,MAA/B,GAAwC,CAA9E,EAAiF;AAC/E,oBAAMstF,aAAa,GAAGrmF,cAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,EAA+BgJ,MAA/B,CAAsC,UAACoC,GAAD,EAAkBwS,KAAlB;AAAA,yBAAoCA,KAAK,KAAK,CAA9C;AAAA,iBAAtC,CAAtB;AACAxT,8BAAc,CAACgoB,GAAf,CAAmB1mB,OAAO,CAAC1L,EAA3B,GAAgCwwF,UAAhC,4BAA+CC,aAA/C;AACD,eAHD,MAGO;AACLrmF,8BAAc,CAACgoB,GAAf,CAAmB1mB,OAAO,CAAC1L,EAA3B,EAA+B,CAACwwF,UAAD,CAA/B;AACD;AACF,aAbD;AAcA,mBAAO,MAAP,OAAO,CAAP,kBACKntF,KADL,CAAO,EACG;AACRoG,uBAAS,EAAE0X,MAAM,CAAC0N,OAAP,CAAehvB,GAAf,CAAmB,UAAC0Q,IAAD,EAAYqN,KAAZ,EAA8B;AAC1DrN,oBAAI,CAACge,UAAL,GAAkBhe,IAAI,CAACge,UAAL,GAAkBhe,IAAI,CAACge,UAAvB,GAAoC3Q,KAAK,GAAG,CAA9D;AACArN,oBAAI,CAACmB,YAAL,GAAoB,iEAAS2c,mBAAT,CAA6B9d,IAAI,CAACmB,YAAlC,EAAgD,KAAhD,CAApB;AACAnB,oBAAI,CAAC6hC,SAAL,GAAiB,iEAAS/jB,mBAAT,CAA6B9d,IAAI,CAAC6hC,SAAlC,EAA6C,KAA7C,CAAjB;AACA,uBAAO7hC,IAAP;AACD,eALU,CADH;AAORnG,4BAAc,EAAdA,cAPQ;AAQRjC,wBAAU,EAAE,KARJ;AASRiH,4BAAc,EAAE+R,MAAM,CAAC0N,OAAP,CAAe1jB,IAAf,CAAoB,UAACoF,IAAD;AAAA,uBAAmBA,IAAI,CAAC2hB,UAAxB;AAAA,eAApB;AATR,aADH,CAAP;AAYD;;AAED,aAAK,yDAAgBkyC,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACK/gE,KADL,CAAO,EACG;AACRitF,kCAAoB,EAAEnvE,MAAM,CAAC0N;AADrB,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBy1C,iBAArB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBACKjhE,KADL,CAAO,EACG;AACRitF,kCAAoB,EAAE,KADd;AAERI,0BAAY,EAAEvvE,MAAM,CAAC0N,OAAP,CAAe6hE;AAFrB,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBlsB,mBAArB;AAA0C;AACxC,mBAAO,MAAP,OAAO,CAAP,kBACKnhE,KADL,CAAO,EACG;AACR+L,4BAAc,EAAE+R,MAAM,CAAC0N;AADf,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBu2C,uBAArB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBACK/hE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBm9D,+BAArB;AAAsD;AACpD,gBAAMqrB,qBAAqB,GAAYxvE,MAAM,CAAC0N,OAA9C;AACA8hE,iCAAqB,CAACxoF,UAAtB,GAAmC,KAAnC;AAFoD,gBAG9CsB,UAH8C,GAGhCpG,KAHgC,CAG9CoG,SAH8C;AAKpDA,sBAAS,GAAGA,UAAS,CAAC5J,GAAV,CAAc,UAAA6L,OAAO,EAAI;AACnC,kBAAIA,OAAO,CAAC1L,EAAR,KAAe2wF,qBAAqB,CAAC3wF,EAAzC,EAA6C;AAC3C,uBAAO,MAAP,OAAO,CAAP,EAAO,EAAK2wF,qBAAL,CAAP;AACD;;AACD,qBAAOjlF,OAAP;AACD,aALW,CAAZ;;AAOA,gBAAIilF,qBAAqB,CAAC3wF,EAAtB,KAA6BqD,KAAK,CAAC+L,cAAN,CAAqBpP,EAAtD,EAA0D;AACxDqD,mBAAK,CAAC+L,cAAN,GAAuB,MAAH,OAAG,CAAH,EAAG,EAAKuhF,qBAAL,CAAvB;AACD;;AAED,mBAAO,MAAP,OAAO,CAAP,kBACKttF,KADL,CAAO,EACG;AACRoG,uBAAS,EAATA,UADQ;AAERtB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBq9D,+BAArB;AAAsD;AACpD,mBAAO,MAAP,OAAO,CAAP,kBACKniE,KADL,CAAO,EACG;AACRoG,uBAAS,EAAEpG,KAAK,CAACoG,SAAN,CAAgB5J,GAAhB,CAAoB,UAAA6L,OAAO,EAAI;AACxC,oBAAIA,OAAO,CAAC1L,EAAR,KAAemhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAlC,EAAsC;AACpC0L,yBAAO,CAACvD,UAAR,GAAqB,KAArB;AACD;;AACD,uBAAOuD,OAAP;AACD,eALU;AADH,aADH,CAAP;AASD;;AAED,aAAK,yDAAgBg6D,cAArB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBAAYriE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBy9D,sBAArB;AAA6C;AAC3CviE,iBAAK,CAACoG,SAAN,gCAAsBpG,KAAK,CAACoG,SAA5B,IAAuC0X,MAAM,CAAC0N,OAA9C;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYxrB,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB29D,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAYziE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB+9D,2BAArB;AAAkD;AAChD,gBAAMyqB,sBAAqB,GAAYxvE,MAAM,CAAC0N,OAA9C;AACA,gBAAM+hE,sBAAsB,GAAGvtF,KAAK,CAACoG,SAAN,CAAgB0B,IAAhB,CAAqB,UAAAO,OAAO;AAAA,qBAAI,CAAC,CAACA,OAAO,CAACg1E,UAAd;AAAA,aAA5B,CAA/B;AAFgD,gBAG1Cj3E,WAH0C,GAG5BpG,KAH4B,CAG1CoG,SAH0C;AAIhDA,uBAAS,GAAGA,WAAS,CAAC5J,GAAV,CAAc,UAAA6L,OAAO,EAAI;AACnC,kBAAIA,OAAO,CAAC1L,EAAR,KAAe2wF,sBAAqB,CAAC3wF,EAAzC,EAA6C;AAC3C,uBAAO,MAAP,OAAO,CAAP,EAAO,EAAK2wF,sBAAL,CAAP;AACD;;AACD,kBAAIjlF,OAAO,CAAC1L,EAAR,KAAe4wF,sBAAsB,CAAC5wF,EAA1C,EAA8C;AAC5C,uBAAO,MAAP,OAAO,CAAP,kBAAY0L,OAAZ,CAAO,EAAY;AAAEg1E,4BAAU,EAAE;AAAd,iBAAZ,CAAP;AACD;;AACD,qBAAOh1E,OAAP;AACD,aARW,CAAZ;;AAUA,gBAAIilF,sBAAqB,CAAC3wF,EAAtB,KAA6BqD,KAAK,CAAC+L,cAAN,CAAqBpP,EAAtD,EAA0D;AACxDqD,mBAAK,CAAC+L,cAAN,GAAuB,MAAH,OAAG,CAAH,EAAG,EAAKuhF,sBAAL,CAAvB;AACD,aAFD,MAEO,IAAIC,sBAAsB,CAAC5wF,EAAvB,KAA8BqD,KAAK,CAAC+L,cAAN,CAAqBpP,EAAvD,EAA2D;AAChEqD,mBAAK,CAAC+L,cAAN,GAAuB,MAAH,OAAG,CAAH,kBAAQ/L,KAAK,CAAC+L,cAAd,CAAG,EAAyB;AAAEsxE,0BAAU,EAAE;AAAd,eAAzB,CAAvB;AACD;;AAED,mBAAO,MAAP,OAAO,CAAP,kBACKr9E,KADL,CAAO,EACG;AACRoG,uBAAS,EAATA;AADQ,aADH,CAAP;AAID;;AAED,aAAK,yDAAgB28D,oBAArB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAY/iE,KAAZ,CAAO,EAAU;AAAEioB,6BAAe,EAAE;AAAnB,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgBg7C,4BAArB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBACKjjE,KADL,CAAO,EACG;AACRoG,uBAAS,EAAE0X,MAAM,CAAC0N,OAAP,CAAeplB,SADlB;AAER2F,4BAAc,EAAE+R,MAAM,CAAC0N,OAAP,CAAeplB,SAAf,CAAyB,CAAzB,CAFR;AAGR6hB,6BAAe,EAAE;AAHT,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgB87C,sBAArB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAY/jE,KAAZ,CAAO,EAAU;AAAEoG,uBAAS,EAAEpG,KAAK,CAACoG,SAAN,CAAgBT,MAAhB,CAAuB,UAAA0C,OAAO;AAAA,uBAAIA,OAAO,CAAC1L,EAAR,KAAemhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAlC;AAAA,eAA9B;AAAb,aAAV,CAAP;AACD;;AAED,aAAK,yDAAgB0nE,kBAArB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBACKrkE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE;AADd,aADH,CAAP;AAID;;AAED,aAAK,yDAAgB29D,0BAArB;AAAiD;AAAA,gBACvCx9D,eADuC,GACpB/G,KADoB,CACvC+G,cADuC;;AAE/C,gBAAI+W,MAAM,CAAC0N,OAAP,CAAegiE,YAAnB,EAAiC;AAAA,kBACvBC,MADuB,GACZ3vE,MAAM,CAAC0N,OADK,CACvBiiE,MADuB;;AAE/B,iCAAI1mF,eAAc,CAAC7J,IAAf,EAAJ,EAA2B6Q,OAA3B,CAAmC,UAAAyyB,SAAS,EAAI;AAC9C,oBAAIz5B,eAAc,CAAC3B,GAAf,CAAmBo7B,SAAnB,EAA8B1gC,MAA9B,GAAuC,CAAvC,IAA4C2tF,MAAM,CAACjtD,SAAD,CAAlD,IAAiEitD,MAAM,CAACjtD,SAAD,CAAN,CAAkB1gC,MAAlB,GAA2B,CAAhG,EAAmG;AACjG,sBAAMsgC,WAAW,GAAGr5B,eAAc,CAAC3B,GAAf,CAAmBo7B,SAAnB,EAA8BhkC,GAA9B,CAAkC,UAACuL,GAAD,EAAMwS,KAAN,EAAgB;AACpE,wBAAIkzE,MAAM,CAACjtD,SAAD,CAAN,CAAkB1gC,MAAlB,GAA2Bya,KAAK,GAAG,CAAvC,EAA0C;AACxC,6BAAO,MAAP,OAAO,CAAP,kBACKxS,GADL,CAAO,EACC;AACN+iB,mCAAW,EAAE2iE,MAAM,CAACjtD,SAAD,CAAN,CAAkBjmB,KAAlB,EAAyBuQ,WADhC;AAENha,kCAAU,EAAE28E,MAAM,CAACjtD,SAAD,CAAN,CAAkBjmB,KAAlB,EAAyBzJ;AAF/B,uBADD,CAAP;AAKD;;AACD,2BAAO/I,GAAP;AACD,mBATmB,CAApB;;AAUAhB,iCAAc,CAACgoB,GAAf,CAAmByR,SAAnB,EAA8BJ,WAA9B;AACD;AACF,eAdD;;AAeA,qBAAO,MAAP,OAAO,CAAP,kBACKpgC,KADL,CAAO,EACG;AACR+G,8BAAc,EAAdA,eADQ;AAERH,oCAAoB,EAAE;AAFd,eADH,CAAP;AAKD;;AACD,gBAAM8mF,WAAW,GAAG5vE,MAAM,CAAC0N,OAAP,CAAequD,OAAnC;AAzB+C,gBA0BvCzzE,WA1BuC,GA0BzBpG,KA1ByB,CA0BvCoG,SA1BuC;;AA2B/C,gBAAIsnF,WAAW,IAAIA,WAAW,CAAC5tF,MAAZ,GAAqB,CAAxC,EAA2C;AACzCsG,yBAAS,CAAC2H,OAAV,CAAkB,UAAC1F,OAAD,EAAsB;AACtC,oBAAMslF,YAAY,GAAGD,WAAW,CAAC/nF,MAAZ,CAAmB,UAACoC,GAAD;AAAA,yBAAqBA,GAAG,CAACM,OAAJ,KAAgBA,OAAO,CAAC1L,EAA7C;AAAA,iBAAnB,CAArB;;AACA,oBAAIoK,eAAc,CAACc,GAAf,CAAmBQ,OAAO,CAAC1L,EAA3B,CAAJ,EAAoC;AAClC,sBAAMixF,UAAU,GAAG7mF,eAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,CAAnB;;AACAoK,iCAAc,CAACgoB,GAAf,CAAmB1mB,OAAO,CAAC1L,EAA3B,+BAAmCixF,UAAnC,sBAAkDD,YAAlD;AACD,iBAHD,MAGO;AACL5mF,iCAAc,CAACgoB,GAAf,CAAmB1mB,OAAO,CAAC1L,EAA3B,EAA+BgxF,YAA/B;AACD;AACF,eARD;AASD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK3tF,KADL,CAAO,EACG;AACR+G,4BAAc,EAAdA,eADQ;AAERH,kCAAoB,EAAE;AAFd,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgB69D,0BAArB;AAAiD;AAC/C,mBAAO,MAAP,OAAO,CAAP,kBACKzkE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE;AADd,aADH,CAAP;AAID;;AAED,aAAK,yDAAgB+9D,gBAArB;AAAuC;AACrC,mBAAO,MAAP,OAAO,CAAP,kBACK3kE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE,IADd;AAERC,+BAAiB,EAAE;AAFX,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBg+D,wBAArB;AAA+C;AAC7C,gBAAMgpB,MAAM,GAAG/vE,MAAM,CAAC0N,OAAtB;AAD6C,gBAErCzkB,gBAFqC,GAElB/G,KAFkB,CAErC+G,cAFqC;;AAG7C,gBAAIA,gBAAc,CAACc,GAAf,CAAmBgmF,MAAM,CAACxlF,OAA1B,CAAJ,EAAwC;AACtC,kBAAMulF,UAAU,GAAG7mF,gBAAc,CAAC3B,GAAf,CAAmByoF,MAAM,CAACxlF,OAA1B,CAAnB;;AACAtB,8BAAc,CAACgoB,GAAf,CAAmB8+D,MAAM,CAACxlF,OAA1B,+BAAuCulF,UAAvC,IAAmDC,MAAnD;AACD,aAHD,MAGO;AACL9mF,8BAAc,CAACgoB,GAAf,CAAmB8+D,MAAM,CAACxlF,OAA1B,EAAmC,CAACwlF,MAAD,CAAnC;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK7tF,KADL,CAAO,EACG;AACR+G,4BAAc,EAAdA,gBADQ;AAERH,kCAAoB,EAAE,KAFd;AAGRC,+BAAiB,EAAE;AAHX,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgBk+D,wBAArB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACK/kE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE,KADd;AAERC,+BAAiB,EAAE;AAFX,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBo+D,mBAArB;AAA0C;AACxC,mBAAO,MAAP,OAAO,CAAP,kBACKjlE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE,IADd;AAERC,+BAAiB,EAAE;AAFX,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgBs+D,2BAArB;AAAkD;AAChD,gBAAM2oB,UAAU,GAAGhwE,MAAM,CAAC0N,OAA1B;AADgD,gBAExCzkB,gBAFwC,GAErB/G,KAFqB,CAExC+G,cAFwC;;AAGhD,gBAAIA,gBAAc,CAACc,GAAf,CAAmBimF,UAAU,CAACzlF,OAA9B,CAAJ,EAA4C;AAC1C,kBAAMulF,WAAU,GAAG7mF,gBAAc,CAAC3B,GAAf,CAAmB0oF,UAAU,CAACzlF,OAA9B,CAAnB;;AACAtB,8BAAc,CAACgoB,GAAf,CACE++D,UAAU,CAACzlF,OADb,EAEEulF,WAAU,CAACjoF,MAAX,CAAkB,UAAAoC,GAAG;AAAA,uBAAI+lF,UAAU,CAACnxF,EAAX,KAAkBoL,GAAG,CAACpL,EAA1B;AAAA,eAArB,CAFF;AAID;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKqD,KADL,CAAO,EACG;AACR+G,4BAAc,EAAdA,gBADQ;AAERH,kCAAoB,EAAE,KAFd;AAGRC,+BAAiB,EAAE;AAHX,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgBw+D,2BAArB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBACKrlE,KADL,CAAO,EACG;AACR6G,+BAAiB,EAAE,IADX;AAERD,kCAAoB,EAAE;AAFd,aADH,CAAP;AAKD;;AAED,aAAK,yDAAgB2+D,wBAArB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACKvlE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE;AADd,aADH,CAAP;AAID;;AAED,aAAK,yDAAgB6+D,gCAArB;AAAuD;AACrD,gBAAMsoB,aAAa,GAAejwE,MAAM,CAAC0N,OAAzC;AADqD,gBAG7CplB,WAH6C,GAG/BpG,KAH+B,CAG7CoG,SAH6C;AAIrD,gBAAI4nF,qBAAJ;;AACA5nF,uBAAS,CAAC2H,OAAV,CAAkB,UAAA1F,OAAO,EAAI;AAC3B,kBAAIA,OAAO,CAAC1L,EAAR,KAAeoxF,aAAa,CAAC1lF,OAAjC,EAA0C;AACxC2lF,qCAAqB,GAAG,MAAH,OAAG,CAAH,EAAG,EAAK3lF,OAAL,CAAxB;AACAA,uBAAO,CAACyI,UAAR,GAAqBi9E,aAAa,CAACj9E,UAAnC;AACAzI,uBAAO,CAACyiB,WAAR,GAAsBijE,aAAa,CAACjjE,WAApC;AACAziB,uBAAO,CAACT,WAAR,GAAsBmmF,aAAa,CAACnmF,WAApC;AACAS,uBAAO,CAACK,QAAR,GAAmBqlF,aAAa,CAACrlF,QAAjC;AACD;AACF,aARD;;AALqD,gBAgB7C3B,gBAhB6C,GAgB1B/G,KAhB0B,CAgB7C+G,cAhB6C;;AAiBrD,gBAAIA,gBAAc,CAACc,GAAf,CAAmBkmF,aAAa,CAAC1lF,OAAjC,KAA6CtB,gBAAc,CAAC3B,GAAf,CAAmB2oF,aAAa,CAAC1lF,OAAjC,EAA0CvI,MAA1C,GAAmD,CAApG,EAAuG;AACrGiH,8BAAc,CAAC3B,GAAf,CAAmB2oF,aAAa,CAAC1lF,OAAjC,EAA0C0F,OAA1C,CAAkD,UAAChG,GAAD,EAAMwS,KAAN,EAAgB;AAChE,oBAAIA,KAAK,KAAK,CAAd,EAAiB;AACfxS,qBAAG,CAAC+iB,WAAJ,GAAkBijE,aAAa,CAACjjE,WAAhC;AACA/iB,qBAAG,CAAC+I,UAAJ,GAAiBi9E,aAAa,CAACj9E,UAA/B;AACA/I,qBAAG,CAACH,WAAJ,GAAkBmmF,aAAa,CAACnmF,WAAhC;AACAG,qBAAG,CAACW,QAAJ,GAAeqlF,aAAa,CAACrlF,QAA7B;AACD;;AACD,oBAAIX,GAAG,CAACpL,EAAJ,KAAWoxF,aAAa,CAACpxF,EAA7B,EAAiC;AAC/BoL,qBAAG,CAAC+iB,WAAJ,GAAkBkjE,qBAAqB,CAACljE,WAAxC;AACA/iB,qBAAG,CAAC+I,UAAJ,GAAiBk9E,qBAAqB,CAACl9E,UAAvC;AACA/I,qBAAG,CAACH,WAAJ,GAAkBomF,qBAAqB,CAACpmF,WAAxC;AACAG,qBAAG,CAACW,QAAJ,GAAeslF,qBAAqB,CAACtlF,QAArC;AACD;AACF,eAbD;AAcD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACK1I,KADL,CAAO,EACG;AACRoG,uBAAS,EAATA,WADQ;AAERW,4BAAc,EAAdA,gBAFQ;AAGRH,kCAAoB,EAAE;AAHd,aADH,CAAP;AAMD;;AAED,aAAK,yDAAgB++D,gCAArB;AAAuD;AACrD,mBAAO,MAAP,OAAO,CAAP,kBACK3lE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE;AADd,aADH,CAAP;AAID;;AAED,aAAK,yDAAgBm/D,iCAArB;AAAwD;AACtD,mBAAO,MAAP,OAAO,CAAP,kBACK/lE,KADL,CAAO,EACG;AACR4G,kCAAoB,EAAE,KADd;AAERC,+BAAiB,EAAE;AAFX,aADH,CAAP;AAKD;;AAED;AAAS;AACP,mBAAO7G,KAAP;AACD;AA9VH;AAgWD;;;;;;;;;;;;;;;;;AC/WD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMO,QAAMgmF,YAAY,GAAgB;AAAEh7E,gBAAU,EAAE;AAAd,KAAlC;;AAEA,aAAS86E,OAAT,GAA8D;AAAA,UAA7C9lF,KAA6C,uEAArCgmF,YAAqC;AAAA,UAAvBloE,MAAuB;;AACnE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,yEAAkBg9D,YAAvB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,EAAO,EAAKvmE,KAAL,CAAP;AACD;;AACD;AAAS;AACP,mBAAOA,KAAP;AACD;AANH;AAQD;;;;;;;;;;;;;;;;;ACjBD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGO,aAAS8lF,OAAT,GAKuB;AAAA,UAJ5B9lF,KAI4B,uEAJA;AAC1BgI,eAAO,EAAE,IADiB;AAE1BlD,kBAAU,EAAE;AAFc,OAIA;AAAA,UAA5BgZ,MAA4B;;AAE5B,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,kEAAyBq9D,mBAA9B;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBAAY5mE,KAAZ,CAAO,EAAU;AAAEgI,qBAAO,EAAE8V,MAAM,CAAC0N,OAAlB;AAA2B1mB,wBAAU,EAAE,KAAvC;AAA8C0sB,0BAAY,EAAE;AAA5D,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBs1C,mBAA9B;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBAAY9mE,KAAZ,CAAO,EAAU;AAAEgI,qBAAO,EAAE,IAAX;AAAiBlD,wBAAU,EAAE,KAA7B;AAAoC0sB,0BAAY,EAAE;AAAlD,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBw1C,yBAA9B;AAAyD;AACvD,mBAAO,MAAP,OAAO,CAAP,kBACKhnE,KADL,CAAO,EACG;AACRqtF,0BAAY,EAAEvvE,MAAM,CAAC0N,OAAP,CAAe6hE,YADrB;AAERY,uCAAyB,EAAEnwE,MAAM,CAAC0N,OAAP,CAAe1mB,UAFlC;AAGR0sB,0BAAY,EAAE1T,MAAM,CAAC0N,OAAP,CAAetqB,KAAf,GAAuB,8CAAvB,GAAwE;AAH9E,aADH,CAAP;AAMD;;AACD,aAAK,kEAAyBgmE,6BAA9B;AAA6D;AAC3D,mBAAO,MAAP,OAAO,CAAP,kBACKlnE,KADL,CAAO,EACG;AACRoW,8BAAgB,EAAE0H,MAAM,CAAC0N,OAAP,CAAepV,gBADzB;AAER83E,2CAA6B,EAAEpwE,MAAM,CAAC0N,OAAP,CAAe1mB;AAFtC,aADH,CAAP;AAKD;;AACD,aAAK,kEAAyBsiE,uCAA9B;AAAuE;AACrE,mBAAO,MAAP,OAAO,CAAP,kBACKpnE,KADL,CAAO,EACG;AACRmuF,oCAAsB,EAAErwE,MAAM,CAAC0N,OAAP,CAAe1mB,UAD/B;AAERkiF,8BAAgB,EAAElpE,MAAM,CAAC0N,OAAP,CAAew7D;AAFzB,aADH,CAAP;AAKD;;AACD,aAAK,kEAAyB1f,yBAA9B;AAAyD;AACvD,mBAAO,MAAP,OAAO,CAAP,kBAAYtnE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoB0sB,0BAAY,EAAE;AAAlC,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBg2C,iCAA9B;AAAiE;AAC/D,mBAAO,MAAP,OAAO,CAAP,kBAAYxnE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqB0sB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBk2C,iCAA9B;AAAiE;AAC/D,mBAAO,MAAP,OAAO,CAAP,kBAAY1nE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqB0sB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBo2C,6BAA9B;AAA6D;AAC3D,mBAAO,MAAP,OAAO,CAAP,kBAAY5nE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBsiF,kCAAoB,EAAE;AAA1C,aAAV,CAAP;AACD;;AACD,aAAK,kEAAyBtf,qCAA9B;AAAqE;AACnE,mBAAO,MAAP,OAAO,CAAP,kBAAY9nE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBsiF,kCAAoB,EAAE,KAA3C;AAAkD7iD,uBAAS,EAAEzmB,MAAM,CAAC0N;AAApE,aAAV,CAAP;AACD;;AACD;AAAS;AACP,mBAAOxrB,KAAP;AACD;AA9CH;AAgDD;;;;;;;;;;;;;;;;;ACzDD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAEO,aAAS8lF,OAAT,GAA0E;AAAA,UAAzD9lF,KAAyD,uEAA5C;AAAE44B,iBAAS,EAAE;AAAb,OAA4C;AAAA,UAAzB9a,MAAyB;;AAC/E,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,6EAAoB4+D,oBAAzB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACKnoE,KADL,CAAO,EACG;AACR44B,uBAAS,EAAE9a,MAAM,CAAC0N;AADV,aADH,CAAP;AAID;;AACD;AAAS;AACP,mBAAOxrB,KAAP;AACD;AATH;AAWD;;;;;;;;;;;;;;;;;ACfD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIO,QAAMgmF,YAAY,GAAc;AACrC58D,cAAQ,EAAE,IAD2B;AAErCzsB,QAAE,EAAE,IAFiC;AAGrCujB,aAAO,EAAE,KAH4B;AAIrC8X,eAAS,EAAE,EAJ0B;AAKrCC,eAAS,EAAE,EAL0B;AAMrCzsB,cAAQ,EAAE,IAAI,mDAAJ,EAN2B;AAOrC4iF,gBAAU,EAAE,EAPyB;AAQrChoF,eAAS,EAAE,EAR0B;AASrCiyB,yBAAmB,EAAE,EATgB;AAUrC3yB,mBAAa,EAAE,EAVsB;AAWrCytB,aAAO,EAAE,EAX4B;AAYrCpK,mBAAa,EAAE,EAZsB;AAarCgF,yBAAmB,EAAE,CAbgB;AAcrCuK,cAAQ,EAAE,EAd2B;AAerC74B,eAAS,EAAE,IAAI,oDAAJ,EAf0B;AAgBrCoxB,iBAAW,EAAE,EAhBwB;AAiBrC4oB,mBAAa,EAAE,IAjBsB;AAkBrC/iB,WAAK,EAAE;AAlB8B,KAAhC;;AAqBA,aAASovD,OAAT,GAA6D;AAAA,UAA5C9lF,KAA4C,uEAApCgmF,YAAoC;AAAA,UAAtBloE,MAAsB;;AAClE,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK,0DAAiBq/D,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBAAY5oE,KAAZ,CAAO,EAAU;AAAErD,gBAAE,EAAEmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAArB;AAAyBysB,sBAAQ,EAAEtL,MAAM,CAAC0N,OAAP,CAAepC;AAAlD,aAAV,CAAP;AACD;;AACD,aAAK,0DAAiB8gD,sBAAtB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBAAYlqE,KAAZ,CAAO,EAAU;AAAEg4B,uBAAS,EAAEla,MAAM,CAAC0N;AAApB,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBw9C,iBAAtB;AAAyC;AACvC,gBAAMqlB,YAAY,GAAGvwE,MAAM,CAAC0N,OAAP,CAAekL,KAApC;AACA,gBAAMA,KAAK,GAAU,EAArB;AACA23D,wBAAY,CAACtgF,OAAb,CAAqB,UAAC6rB,IAAD,EAAe;AAClClD,mBAAK,CAAClb,IAAN,CAAWoe,IAAX;AACD,aAFD;AAGA,mBAAO,MAAP,OAAO,CAAP,kBACK55B,KADL,CAAO,EACG;AACR02B,mBAAK,EAALA,KADQ;AAER5xB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,0DAAiBskE,gBAAtB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBACKppE,KADL,CAAO,EACG;AACR02B,mBAAK,+BAAM12B,KAAK,CAAC02B,KAAZ,IAAmB5Y,MAAM,CAAC0N,OAA1B,EADG;AAER1mB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,0DAAiBwkE,cAAtB;AAAsC;AACpC,mBAAO,MAAP,OAAO,CAAP,kBACKtpE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB4kE,mBAAtB;AAA2C;AAAA,gBACnChzC,MADmC,GACzB12B,KADyB,CACnC02B,KADmC;AAEzCA,kBAAK,GAAGA,MAAK,CAAC/wB,MAAN,CAAa,UAAAi0B,IAAI;AAAA,qBAAI9b,MAAM,CAAC0N,OAAP,KAAmBoO,IAAI,CAACj9B,EAA5B;AAAA,aAAjB,CAAR;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKqD,KADL,CAAO,EACG;AACR02B,mBAAK,EAALA,MADQ;AAER5xB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,0DAAiBglE,yBAAtB;AAAiD;AAAA,gBACvCpzC,OADuC,GAC7B12B,KAD6B,CACvC02B,KADuC;;AAE/CA,mBAAK,CAAC3oB,OAAN,CAAc,UAAA6rB,IAAI;AAAA,qBAAKA,IAAI,CAAC9nB,UAAL,GAAkBgM,MAAM,CAAC0N,OAAP,KAAmBoO,IAAI,CAACj9B,EAA/C;AAAA,aAAlB;;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKqD,KADL,CAAO,EACG;AACR02B,mBAAK,EAALA,OADQ;AAER5xB,wBAAU,EAAE;AAFJ,aADH,CAAP;AAKD;;AAED,aAAK,0DAAiBokE,QAAtB;AACA,aAAK,0DAAiBM,WAAtB;AACA,aAAK,0DAAiBI,iBAAtB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBACK5pE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiBslE,aAAtB;AACA,aAAK,0DAAiBkB,aAAtB;AACA,aAAK,0DAAiBR,gBAAtB;AACA,aAAK,0DAAiBc,gBAAtB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBAAY5rE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoByL,qBAAO,EAAE,KAA7B;AAAoCrP,mBAAK,EAAE;AAA3C,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBwpE,qBAAtB;AAA6C;AAC3C,gBAAI,CAAC1qE,KAAK,CAACg4B,SAAX,EAAsB;AACpBh4B,mBAAK,CAACg4B,SAAN,GAAkB,EAAlB;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKh4B,KADL,CAAO,EACG;AACRg4B,uBAAS,EAAEh4B,KAAK,CAACg4B,SAAN,CAAgB6vD,MAAhB,CAAuB/pE,MAAM,CAAC0N,OAA9B,CADH;AAER1mB,wBAAU,EAAE,KAFJ;AAGRyL,qBAAO,EAAE,KAHD;AAIRrP,mBAAK,EAAE;AAJC,aADH,CAAP;AAOD;;AAED,aAAK,0DAAiBsqE,qBAAtB;AAA6C;AAC3C,gBAAI,CAACxrE,KAAK,CAACi4B,SAAX,EAAsB;AACpBj4B,mBAAK,CAACi4B,SAAN,GAAkB,EAAlB;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKj4B,KADL,CAAO,EACG;AACRi4B,uBAAS,EAAEj4B,KAAK,CAACi4B,SAAN,CAAgB4vD,MAAhB,CAAuB/pE,MAAM,CAAC0N,OAA9B,CADH;AAER1mB,wBAAU,EAAE,KAFJ;AAGRyL,qBAAO,EAAE;AAHD,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiBy6D,wBAAtB;AAAgD;AAC9ChrE,iBAAK,CAACg4B,SAAN,CAAgB4a,MAAhB,CAAuB5yC,KAAK,CAACg4B,SAAN,CAAgBr3B,OAAhB,CAAwBX,KAAK,CAACg4B,SAAN,CAAgBlwB,IAAhB,CAAqB,UAAAoF,IAAI;AAAA,qBAAIA,IAAI,CAACvQ,EAAL,KAAYmhB,MAAM,CAAC0N,OAAvB;AAAA,aAAzB,CAAxB,CAAvB,EAA0G,CAA1G;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRrP,mBAAK,EAAE;AAHC,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiB4qE,wBAAtB;AAAgD;AAC9C9rE,iBAAK,CAACi4B,SAAN,CAAgB2a,MAAhB,CAAuB5yC,KAAK,CAACi4B,SAAN,CAAgBt3B,OAAhB,CAAwBX,KAAK,CAACi4B,SAAN,CAAgBnwB,IAAhB,CAAqB,UAAAoF,IAAI;AAAA,qBAAIA,IAAI,CAACvQ,EAAL,KAAYmhB,MAAM,CAAC0N,OAAvB;AAAA,aAAzB,CAAxB,CAAvB,EAA0G,CAA1G;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRrP,mBAAK,EAAE;AAHC,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiB0pE,mBAAtB;AACA,aAAK,0DAAiBc,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACK1rE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,IAFD;AAGRrP,mBAAK,EAAE4c,MAAM,CAAC0N;AAHN,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiB4/C,sBAAtB;AAA8C;AAC5C,mBAAO,MAAP,OAAO,CAAP,kBAAYprE,KAAZ,CAAO,EAAU;AAAEi4B,uBAAS,EAAEna,MAAM,CAAC0N;AAApB,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBwgD,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAYhsE,KAAZ,CAAO,EAAU;AAAE8wB,sBAAQ,EAAE;AAAZ,aAAV,CAAP;AACD;;AACD,aAAK,0DAAiBo7C,2BAAtB;AAAmD;AAEjD,gBAAIpuD,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,IAAgCnT,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6Bq9D,qBAAjE,EAAwF;AACtFxwE,oBAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6Bq9D,qBAA7B,GAAqD,iEAAStjE,mBAAT,CACnDlN,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6Bq9D,qBADsB,EAEnD,KAFmD,CAArD;AAID;;AACD,gBAAIxwE,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,IAAgCnT,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6BsoB,6BAAjE,EAAgG;AAC9Fz7B,oBAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6BsoB,6BAA7B,GAA6D,iEAASvuB,mBAAT,CAC3DlN,MAAM,CAAC0N,OAAP,CAAeyF,aAAf,CAA6BsoB,6BAD8B,EAE3D,KAF2D,CAA7D;AAID;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKv5C,KADL,CAAO,EACG;AACRrD,gBAAE,EAAEmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EADX;AAERysB,sBAAQ,EAAEtL,MAAM,CAAC0N,OAAP,CAAepC,QAFjB;AAGRlJ,qBAAO,EAAEpC,MAAM,CAAC0N,OAAP,CAAe+iE,QAHhB;AAIRC,wBAAU,EAAE1wE,MAAM,CAAC0N,OAAP,CAAeijE,WAJnB;AAKRjjF,sBAAQ,EAAEsS,MAAM,CAAC0N,OAAP,CAAehgB,QALjB;AAMRpF,uBAAS,EAAE0X,MAAM,CAAC0N,OAAP,CAAeplB,SAAf,CAAyB5J,GAAzB,CAA6B,UAAC0Q,IAAD,EAAYqN,KAAZ,EAA8B;AACpErN,oBAAI,CAACge,UAAL,GAAkBhe,IAAI,CAACge,UAAL,IAAmB3Q,KAAK,GAAG,CAA7C;AACA,uBAAOrN,IAAP;AACD,eAHU,CANH;AAURmrB,iCAAmB,EAAEva,MAAM,CAAC0N,OAAP,CAAe6M,mBAAf,GAAqCva,MAAM,CAAC0N,OAAP,CAAe6M,mBAApD,GAA0E,EAVvF;AAWR3yB,2BAAa,EAAEoY,MAAM,CAAC0N,OAAP,CAAekjE,cAAf,CAA8BlyF,GAA9B,CAAkC,UAAC0Q,IAAD,EAAYqN,KAAZ,EAA8B;AAC7ErN,oBAAI,CAACge,UAAL,GAAkBhe,IAAI,CAACge,UAAL,IAAmB3Q,KAAK,GAAG,CAA7C;AACA,uBAAOrN,IAAP;AACD,eAHc,CAXP;AAeR+jB,2BAAa,EAAEnT,MAAM,CAAC0N,OAAP,CAAeyF,aAftB;AAgBRH,sBAAQ,EAAE,IAhBF;AAiBR0oB,8BAAgB,EAAE17B,MAAM,CAAC0N,OAAP,CAAeguB;AAjBzB,aADH,CAAP;AAoBD;;AAED,aAAK,0DAAiBwzB,uBAAtB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBACKhtE,KADL,CAAO,EACG;AACRwL,sBAAQ,EAAEsS,MAAM,CAAC0N;AADT,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB0hD,4BAAtB;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBACKltE,KADL,CAAO,EACG;AACRwL,sBAAQ,EAAE,MAAF,OAAE,CAAF,kBAAOxL,KAAK,CAACwL,QAAb,CAAE,EAAwBsS,MAAM,CAAC0N,OAA/B;AADF,aADH,CAAP;AAID;;AAED,aAAK,0DAAiBohD,iBAAtB;AAAyC;AACvC,mBAAO,MAAP,OAAO,CAAP,kBAAY5sE,KAAZ,CAAO,EAAU;AAAEouF,wBAAU,EAAEtwE,MAAM,CAAC0N;AAArB,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB4hD,aAAtB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACKptE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiBwoE,qBAAtB;AAA6C;AAC3C,gBAAI/yD,KAAK,GAAG,CAAC,CAAb;AACAuD,kBAAM,CAAC0N,OAAP,CAAeN,UAAf,GAA4BpN,MAAM,CAAC0N,OAAP,CAAeN,UAAf,IAA6BlrB,KAAK,CAAC+oB,aAAN,CAAoBjpB,MAA7E;AACAE,iBAAK,CAAC0F,aAAN,CAAoBqI,OAApB,CAA4B,UAAC7J,MAAD,EAASuV,CAAT,EAAe;AACzC,kBAAIvV,MAAM,CAACvH,EAAP,KAAcmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAjC,EAAqC;AACnC4d,qBAAK,GAAGd,CAAR;AACD;AACF,aAJD;;AAKA,gBAAIc,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdva,mBAAK,CAAC0F,aAAN,CAAoB6U,KAApB,IAA6BuD,MAAM,CAAC0N,OAApC;AACD,aAFD,MAEO;AACLxrB,mBAAK,CAAC0F,aAAN,gCAA0B1F,KAAK,CAAC0F,aAAhC,IAA+CoY,MAAM,CAAC0N,OAAtD;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB0oE,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKxtE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB4oE,aAAtB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACK1tE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB8oE,qBAAtB;AAA6C;AAC3C5tE,iBAAK,CAAC0F,aAAN,GAAsB1F,KAAK,CAAC0F,aAAN,CAAoBC,MAApB,CAA2B,UAAAzB,MAAM;AAAA,qBAAIA,MAAM,CAACvH,EAAP,KAAcmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAjC;AAAA,aAAjC,CAAtB;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKqD,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB4tE,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACK1yE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB8tE,2BAAtB;AAAmD;AACjD,mBAAO,MAAP,OAAO,CAAP,kBACK5yE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERY,2BAAa,EAAEoY,MAAM,CAAC0N,OAAP,CAAegE;AAFtB,aADH,CAAP;AAKD;;AAED,aAAK,0DAAiBw+C,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAYhuE,KAAZ,CAAO,EAAU;AAAEmzB,qBAAO,EAAErV,MAAM,CAAC0N;AAAlB,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB0iD,aAAtB;AACA,aAAK,0DAAiBM,aAAtB;AACA,aAAK,0DAAiBY,aAAtB;AACA,aAAK,0DAAiBN,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAY9uE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBuuB,0BAAY,EAAE;AAAlC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB+6C,qBAAtB;AAA6C;AAC3CpuE,iBAAK,CAACmzB,OAAN,gCAAoBnzB,KAAK,CAACmzB,OAA1B,IAAmCrV,MAAM,CAAC0N,OAA1C;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYxrB,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBuuB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBq7C,qBAAtB;AAA6C;AAC3C1uE,iBAAK,CAACmzB,OAAN,GAAgBnzB,KAAK,CAACmzB,OAAN,CAAc32B,GAAd,CAAkB,UAAAmJ,MAAM,EAAI;AAC1C,kBAAIA,MAAM,CAAChJ,EAAP,KAAcmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAjC,EAAqC;AACnC,uBAAO,MAAP,OAAO,CAAP,EAAO,EAAKmhB,MAAM,CAAC0N,OAAZ,CAAP;AACD;;AACD,qBAAO7lB,MAAP;AACD,aALe,CAAhB;AAMA,mBAAO,MAAP,OAAO,CAAP,kBAAY3F,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBuuB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB27C,2BAAtB;AAAmD;AACjDhvE,iBAAK,CAACmzB,OAAN,GAAgBnzB,KAAK,CAACmzB,OAAN,CAAc32B,GAAd,CAAkB,UAAAmJ,MAAM,EAAI;AAC1C,kBAAIA,MAAM,CAAChJ,EAAP,KAAcmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAjC,EAAqC;AACnC,uBAAO,MAAP,OAAO,CAAP,EAAO,EAAKmhB,MAAM,CAAC0N,OAAZ,CAAP;AACD;;AACD,qBAAO7lB,MAAP;AACD,aALe,CAAhB;AAMA,mBAAO,MAAP,OAAO,CAAP,kBAAY3F,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBuuB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBi8C,qBAAtB;AAA6C;AAC3CtvE,iBAAK,CAACmzB,OAAN,GAAgBnzB,KAAK,CAACmzB,OAAN,CAAcxtB,MAAd,CAAqB,UAAAA,MAAM;AAAA,qBAAIA,MAAM,CAAChJ,EAAP,KAAcmhB,MAAM,CAAC0N,OAAP,CAAe7uB,EAAjC;AAAA,aAA3B,CAAhB;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYqD,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBuuB,0BAAY,EAAE;AAAnC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBi7C,qBAAtB;AACA,aAAK,0DAAiBM,qBAAtB;AACA,aAAK,0DAAiBY,qBAAtB;AACA,aAAK,0DAAiBN,2BAAtB;AAAmD;AACjD,gBAAMhuE,KAAK,GAAG9D,MAAM,CAACF,IAAP,CAAY4gB,MAAM,CAAC0N,OAAnB,EACXhvB,GADW,CACP,UAAAuL,GAAG;AAAA,+BAAOA,GAAP,eAAe+V,MAAM,CAAC0N,OAAP,CAAezjB,GAAf,CAAf;AAAA,aADI,EAEXyF,IAFW,CAEN,IAFM,CAAd;AAGA,mBAAO,MAAP,OAAO,CAAP,kBAAYxN,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBuuB,0BAAY,EAAEnyB;AAAnC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBwuE,WAAtB;AAAmC;AACjC,mBAAO,MAAP,OAAO,CAAP,kBACK1vE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,IADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRo+E,iCAAmB,EAAE,KAHb;AAIR7gE,kCAAoB,EAAE;AAJd,aADH,CAAP;AAOD;;AACD,aAAK,0DAAiB8hD,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACK5vE,KADL,CAAO,EACG;AACR+oB,2BAAa,EAAEjL,MAAM,CAAC0N,OADd;AAERmjE,iCAAmB,EAAE,IAFb;AAGR7pF,wBAAU,EAAE;AAHJ,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiB4rE,WAAtB;AACA,aAAK,0DAAiBM,aAAtB;AACA,aAAK,0DAAiBM,aAAtB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACKtxE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,IADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRrP,mBAAK,EAAE,EAHC;AAIR4sB,kCAAoB,EAAE,IAJd;AAKRC,iCAAmB,EAAEjQ,MAAM,CAAC0N,OAAP,CAAenlB;AAL5B,aADH,CAAP;AAQD;;AAED,aAAK,0DAAiBypE,aAAtB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACK9vE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,IADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRrP,mBAAK,EAAE,EAHC;AAIR4sB,kCAAoB,EAAE,IAJd;AAKRC,iCAAmB,EAAE;AALb,aADH,CAAP;AAQD;;AAED,aAAK,0DAAiBqiD,aAAtB;AAAqC;AACnC,mBAAO,MAAP,OAAO,CAAP,kBACKpwE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiBwrE,qBAAtB;AACA,aAAK,0DAAiBE,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKxwE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiB8rE,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBACK5wE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRqd,6BAAe,EAAE9P,MAAM,CAAC0N;AAHhB,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiBgmD,qBAAtB;AAA6C;AAC3C,gBAAMtoD,MAAM,GAAWpL,MAAM,CAAC0N,OAAP,CAAeuvB,GAAtC;AACA,gBAAIxqC,OAAO,GAAG,KAAd;AAF2C,gBAGrCwxE,IAHqC,GAG5BjkE,MAAM,CAAC0N,OAHqB,CAGrCu2D,IAHqC;;AAI3C,gBAAI74D,MAAM,CAACF,kBAAX,EAA+B;AAC7B,kBAAIlL,MAAM,CAAC0N,OAAP,CAAe0D,YAAnB,EAAiC;AAC/B6yD,oBAAI;AACL;AACF,aAJD,MAIO;AACLxxE,qBAAO,GAAG,IAAV;AACD;;AACD,mBAAO,MAAP,OAAO,CAAP,kBACKvQ,KADL,CAAO,EACG;AACR+oB,2BAAa,EAAEjL,MAAM,CAAC0N,OAAP,CAAe2D,QAAf,GACXnvB,KAAK,CAAC+oB,aAAN,CAAoBvsB,GAApB,CAAwB,UAAA0Q,IAAI,EAAI;AAC9B,oBAAIA,IAAI,CAACvQ,EAAL,KAAYusB,MAAM,CAACvsB,EAAvB,EAA2B;AACzB,yBAAOusB,MAAP;AACD;;AACD,uBAAOhc,IAAP;AACD,eALD,CADW,GAOXlN,KAAK,CAAC+oB,aARF;AASRxY,qBAAO,EAAPA,OATQ;AAURzL,wBAAU,EAAE,KAVJ;AAWR8oB,6BAAe,EAAE9P,MAAM,CAAC0N,OAAP,CAAeuvB,GAXxB;AAYRhtB,iCAAmB,EAAEg0D;AAZb,aADH,CAAP;AAeD;;AAED,aAAK,0DAAiB/R,qBAAtB;AAA6C;AAC3ChwE,iBAAK,CAAC+oB,aAAN,gCAA0B/oB,KAAK,CAAC+oB,aAAhC,IAA+CjL,MAAM,CAAC0N,OAAtD;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,KAFD;AAGRqd,6BAAe,EAAE9P,MAAM,CAAC0N,OAHhB;AAIRuC,iCAAmB,EAAE;AAJb,aADH,CAAP;AAOD;;AAED,aAAK,0DAAiBmiD,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKlwE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,IAFD;AAGRud,kCAAoB,EAAEhQ,MAAM,CAAC0N,OAHrB;AAIRuC,iCAAmB,EAAE;AAJb,aADH,CAAP;AAOD;;AAED,aAAK,0DAAiB+iD,mBAAtB;AACA,aAAK,0DAAiBY,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACK1xE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,IAFD;AAGRrP,mBAAK,EAAE9D,MAAM,CAACF,IAAP,CAAY4gB,MAAM,CAAC0N,OAAP,CAAek2D,GAA3B,EACJllF,GADI,CACA,UAAAuL,GAAG;AAAA,iCAAOA,GAAP,eAAe+V,MAAM,CAAC0N,OAAP,CAAek2D,GAAf,CAAmB35E,GAAnB,CAAf;AAAA,eADH,EAEJyF,IAFI,CAEC,IAFD,CAHC;AAMRugB,iCAAmB,EAAEjQ,MAAM,CAAC0N,OAAP,CAAeu2D;AAN5B,aADH,CAAP;AASD;;AAED,aAAK,0DAAiB7Q,qBAAtB;AAA6C;AAC3ClxE,iBAAK,CAAC+oB,aAAN,GAAsB/oB,KAAK,CAAC+oB,aAAN,CAAoBpjB,MAApB,CAA2B,UAAAujB,MAAM;AAAA,qBAAIA,MAAM,CAACvsB,EAAP,KAAcmhB,MAAM,CAAC0N,OAAzB;AAAA,aAAjC,CAAtB;AACA,mBAAO,MAAP,OAAO,CAAP,kBACKxrB,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE;AADJ,aADH,CAAP;AAID;;AAED,aAAK,0DAAiBssE,qBAAtB;AAA6C;AAC3C,mBAAO,MAAP,OAAO,CAAP,kBACKpxE,KADL,CAAO,EACG;AACR8E,wBAAU,EAAE,KADJ;AAERyL,qBAAO,EAAE,IAFD;AAGRrP,mBAAK,EAAE4c,MAAM,CAAC0N,OAAP,CAAemsD;AAHd,aADH,CAAP;AAMD;;AAED,aAAK,0DAAiB7F,0BAAtB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBAAY9xE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBkwB,yCAA2B,EAAE,IAAjD;AAAuDD,8CAAgC,EAAE;AAAzF,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBi9C,kCAAtB;AAA0D;AACxD,mBAAO,MAAP,OAAO,CAAP,kBAAYhyE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBkwB,yCAA2B,EAAE,IAAlD;AAAwDD,8CAAgC,EAAE;AAA1F,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBm9C,kCAAtB;AACA,aAAK,0DAAiBM,oCAAtB;AAA4D;AAC1D,mBAAO,MAAP,OAAO,CAAP,kBAAYxyE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBkwB,yCAA2B,EAAElX,MAAM,CAAC0N;AAAzD,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB4mD,4BAAtB;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBAAYpyE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBkwB,yCAA2B,EAAE,IAAjD;AAAuDD,8CAAgC,EAAE;AAAzF,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBu9C,oCAAtB;AAA4D;AAC1D,mBAAO,MAAP,OAAO,CAAP,kBAAYtyE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBkwB,yCAA2B,EAAE;AAAlD,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB89C,kBAAtB;AAA0C;AACxC,mBAAO,MAAP,OAAO,CAAP,kBAAY9yE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,IAAd;AAAoBmsB,2BAAa,EAAEnT,MAAM,CAAC0N,OAA1C;AAAmDiG,uCAAyB,EAAE;AAA9E,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBuhD,0BAAtB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBAAYhzE,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqBmsB,2BAAa,EAAEnT,MAAM,CAAC0N,OAA3C;AAAoDiG,uCAAyB,EAAE;AAA/E,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiByhD,0BAAtB;AAAkD;AAChDlzE,iBAAK,CAACixB,aAAN,CAAoBqoB,oBAApB,GAA2C,KAA3C;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAYt5C,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqB2sB,uCAAyB,EAAE3T,MAAM,CAAC0N;AAAvD,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB4nD,YAAtB;AAAoC;AAClC,mBAAO,MAAP,OAAO,CAAP,kBAAYpzE,KAAZ,CAAO,EAAU;AAAEs4B,sBAAQ,EAAE,EAAZ;AAAgBs2D,6BAAe,EAAE;AAAjC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBtb,oBAAtB;AAA4C;AAC1C,mBAAO,MAAP,OAAO,CAAP,kBAAYtzE,KAAZ,CAAO,EAAU;AAAEs4B,sBAAQ,EAAExa,MAAM,CAAC0N,OAAnB;AAA4BojE,6BAAe,EAAE;AAA7C,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBpb,kBAAtB;AAA0C;AACxC,mBAAO,MAAP,OAAO,CAAP,kBAAYxzE,KAAZ,CAAO,EAAU;AAAEo+C,2BAAa,EAAE;AAAjB,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBs1B,0BAAtB;AAAkD;AAChD,mBAAO,MAAP,OAAO,CAAP,kBAAY1zE,KAAZ,CAAO,EAAU;AAAEo+C,2BAAa,EAAEtgC,MAAM,CAAC0N,OAAP,CAAeqjE,cAAf,GAAgC;AAAjD,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBjb,mBAAtB;AAA2C;AACzC,mBAAO,MAAP,OAAO,CAAP,kBAAY5zE,KAAZ,CAAO,EAAU;AAAEP,uBAAS,EAAE,MAAF,OAAE,CAAF,kBAAOO,KAAK,CAACP,SAAb,CAAE,EAAoB;AAAE4+C,0BAAU,EAAE,IAAd;AAAoBQ,wBAAQ,EAAE,IAA9B;AAAoC/5C,0BAAU,EAAE;AAAhD,eAApB;AAAb,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBgvE,2BAAtB;AAAmD;AACjD,gBAAMr0E,SAAS,iDAAmBO,KAAK,CAACP,SAAzB,GAAuCqe,MAAM,CAAC0N,OAA9C,GAAqD;AAAE1mB,wBAAU,EAAE;AAAd,aAArD,CAAf;AACArF,qBAAS,CAAC4+C,UAAV,IAAwB,GAAxB;AACA5+C,qBAAS,CAACqvF,eAAV,IAA6B,GAA7B;AACA,mBAAO,MAAP,OAAO,CAAP,kBAAY9uF,KAAZ,CAAO,EAAU;AAAEP,uBAAS,EAATA;AAAF,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBu0E,gBAAtB;AAAwC;AACtC,mBAAO,MAAP,OAAO,CAAP,kBAAYh0E,KAAZ,CAAO,EAAU;AAAEP,uBAAS,EAAE,IAAI,oDAAJ;AAAb,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBy0E,eAAtB;AAAuC;AACrC,mBAAO,MAAP,OAAO,CAAP,kBAAYl0E,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBsvE,uBAAtB;AAA+C;AAC7C,mBAAO,MAAP,OAAO,CAAP,kBAAYp0E,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqB+rB,yBAAW,EAAE/S,MAAM,CAAC0N;AAAzC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB8oD,oBAAtB;AAA4C;AAC1C,mBAAO,MAAP,OAAO,CAAP,kBAAYt0E,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB0vE,4BAAtB;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBAAYx0E,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE,KAAd;AAAqB+rB,yBAAW,+BAAM7wB,KAAK,CAAC6wB,WAAZ,IAAyB/S,MAAM,CAAC0N,OAAhC;AAAhC,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiBkpD,4BAAtB;AAAoD;AAClD,mBAAO,MAAP,OAAO,CAAP,kBAAY10E,KAAZ,CAAO,EAAU;AAAE8E,wBAAU,EAAE;AAAd,aAAV,CAAP;AACD;;AAED,aAAK,0DAAiB0jE,wBAAtB;AAAgD;AAC9C,mBAAO,MAAP,OAAO,CAAP,kBAAYxoE,KAAZ,CAAO,EAAU;AAAEy5C,2BAAa,EAAE37B,MAAM,CAAC0N;AAAxB,aAAV,CAAP;AACD;;AAED;AAAS;AACP,mBAAOxrB,KAAP;AACD;AA1hBH;AA4hBD;;;;;;;;;;;;;;;;;ACpjBD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOa+uF,gB;;;;;;;kCACDC,W,EAAgC;AAAA,cAChCjtE,GADgC,GACxBitE,WADwB,CAChCjtE,GADgC;AAAA,cAEhC9iB,WAFgC,GAEhB+vF,WAAW,CAACC,IAFI,CAEhChwF,WAFgC;AAIxC,cAAIe,KAAK,GAA2BgvF,WAAW,CAACC,IAAhD;;AACA,iBAAOjvF,KAAK,CAACipC,UAAb,EAAyB;AACvBjpC,iBAAK,GAAGA,KAAK,CAACipC,UAAd;AACD;;AAPuC,uBAQrBjpC,KARqB;AAAA,cAQhCsY,MARgC,UAQhCA,MARgC;AAUxC,iBAAO;AAAEyJ,eAAG,EAAHA,GAAF;AAAO9iB,uBAAW,EAAXA,WAAP;AAAoBqZ,kBAAM,EAANA,MAApB;AAA4BtY,iBAAK,EAALA;AAA5B,WAAP;AACD;;;;;;;uBAZU+uF,gB;AAAgB,K;;;aAAhBA,gB;AAAgB,eAAhBA,gBAAgB,K;AAAA,kBAFf;;;;sEAEDA,gB,EAAgB;cAH5B,wDAG4B;eAHjB;AACV3tF,oBAAU,EAAE;AADF,S;AAGiB,Q;;;;;;;;;;;;;;;;;;ACR7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOa8tF,S;AACX,yBAAoB7sF,YAApB,EAAwDtE,MAAxD,EAAwE;AAAA;;AAApD,aAAAsE,YAAA,GAAAA,YAAA;AAAoC,aAAAtE,MAAA,GAAAA,MAAA;AAAkB;;;;oCAE9DsV,K,EAA+BrT,K,EAA4B;AACrE,cAAI,KAAKqC,YAAL,CAAkBU,UAAlB,EAAJ,EAAoC;AAClC,gBAAI/C,KAAK,CAAC+hB,GAAN,KAAc,SAAlB,EAA6B;AAC3B,mBAAKhkB,MAAL,CAAY2L,aAAZ,CAA0B,OAA1B;AACD;;AACD,mBAAO,IAAP;AACD;;AACD,cAAI1J,KAAK,CAAC+hB,GAAN,KAAc,SAAlB,EAA6B;AAC3B,mBAAO,IAAP;AACD;;AACD,cAAI/hB,KAAK,CAAC+hB,GAAN,CAAUnR,QAAV,CAAmB,QAAnB,CAAJ,EAAkC;AAChCvR,wBAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCU,KAAK,CAAC+hB,GAAvC;AACD;;AACD,eAAKhkB,MAAL,CAAY2L,aAAZ,CAA0B,SAA1B;AACA,iBAAO,KAAP;AACD;;;;;;;uBAlBUwlF,S,EAAS,mH,EAAA,8G;AAAA,K;;;aAATA,S;AAAS,eAATA,SAAS,K;AAAA,kBAFR;;;;sEAEDA,S,EAAS;cAHrB,wDAGqB;eAHV;AACV9tF,oBAAU,EAAE;AADF,S;AAGU,Q;;;;;;;;;;;;;;;;;;;;;;;;ACRtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAoBa+tF,uB;AAKX,uCAAoBjxF,KAApB,EAAoDF,aAApD,EAAkF;AAAA;;AAAA;;AAA9D,aAAAE,KAAA,GAAAA,KAAA;AAAgC,aAAAF,aAAA,GAAAA,aAAA;AAJ5C,aAAAoI,SAAA,GAAuB,EAAvB;AAEA,aAAAuF,QAAA,GAAsB,EAAtB;AAGN,aAAKzN,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACoG,SAAV;AAAA,SADf,EAEGxH,SAFH,CAEa,UAAC+H,cAAD,EAAoC;AAC7C,kBAAI,CAACP,SAAL,GAAiBO,cAAc,CAACP,SAAhC;AACD,SAJH;AAKA,aAAKlI,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAAC2L,QAAV;AAAA,SADf,EAEG/M,SAFH,CAEa,UAACgN,aAAD,EAAkC;AAC3C,kBAAI,CAACD,QAAL,GAAgBC,aAAa,CAACD,QAA9B;AACD,SAJH;AAKD;;;;kEAGCm2B,S,EACAyC,S,EAAuC;AAEvC,cAAIzC,SAAS,CAAC/hB,KAAd,EAAqB;AACnB,gBAAMqvE,aAAa,GAAY,KAAKhpF,SAAL,CAAe0B,IAAf,CAAoB,UAAAO,OAAO;AAAA,qBAAIy5B,SAAS,CAAC/hB,KAAV,CAAgB1X,OAAhB,KAA4BA,OAAO,CAAC1L,EAAxC;AAAA,aAA3B,CAA/B;AACA,gBAAMiR,SAAS,gCACVk0B,SAAS,CAAC/hB,KAAV,CAAgBxR,QAAhB,CAAyB/R,GAAzB,CACD,UAAA+R,QAAQ;AAAA,qBAAK,gEAA2BA,QAA3B,EAAkEe,OAAvE;AAAA,aADP,CADU,sBAIVwyB,SAAS,CAAC/hB,KAAV,CAAgB1C,EAAhB,CAAmB7gB,GAAnB,CAAuB,UAAA6gB,EAAE;AAAA,qBAAK,gEAA2BA,EAA3B,EAA4D/N,OAAjE;AAAA,aAAzB,CAJU,sBAKVwyB,SAAS,CAAC/hB,KAAV,CAAgBzC,GAAhB,CAAoB9gB,GAApB,CAAwB,UAAA8gB,GAAG;AAAA,qBAAK,gEAA2BA,GAA3B,EAA6DhO,OAAlE;AAAA,aAA3B,CALU,EAAf;AAOA,mBAAO,KAAK0jC,gCAAL,CAAsCo8C,aAAtC,EAAqDxhF,SAArD,EAAgE22B,SAAhE,CAAP;AACD;;AACD,iBAAO;AACLwQ,0BAAc,EAAE,KADX;AAELxB,kCAAsB,EAAE,KAFnB;AAGLgC,+BAAmB,EAAE,sEAA2BljC,YAH3C;AAIL4iC,+BAAmB,EAAE,iEAAsBo6C;AAJtC,WAAP;AAMD;;;yDASCD,a,EACAxhF,S,EACA22B,S,EAAuC;AAAA;;AAGvC,cAAI,CAAC6qD,aAAa,CAAC3iE,oBAAnB,EAAyC;AACvC,mBAAO;AACLsoB,4BAAc,EAAE,KADX;AAELxB,oCAAsB,EAAE,KAFnB;AAGLgC,iCAAmB,EAAE,sEAA2BljC,YAH3C;AAIL4iC,iCAAmB,EAAE,iEAAsBo6C;AAJtC,aAAP;AAMD;;AACD,cAAI,CAACzhF,SAAD,IAAcA,SAAS,CAAC9N,MAAV,KAAqB,CAAvC,EAA0C;AACxC,mBAAO;AACLi1C,4BAAc,EAAEq6C,aAAa,CAACh9E,cAAd,KAAiC,QAD5C;AAELmhC,oCAAsB,EAAE,IAFnB;AAGLgC,iCAAmB,EACjB65C,aAAa,CAACh9E,cAAd,KAAiC,QAAjC,GACI,sEAA2BG,MAD/B,GAEI,sEAA2BF,YAN5B;AAOL4iC,iCAAmB,EAAE,iEAAsBI;AAPtC,aAAP;AASD;;AACD,cAAMi6C,eAAe,GAAG,IAAIxnE,GAAJ,EAAxB;AACAla,mBAAS,CAACG,OAAV,CAAkB,UAAAQ,QAAQ,EAAI;AAC5B,gBAAMkkC,WAAW,GAAG,gEAA2BlkC,QAA3B,CAApB;;AACA,gBAAI,CAACkkC,WAAL,EAAkB;AAChB68C,6BAAe,CAACvgE,GAAhB,CAAoBxgB,QAApB,EAA8B;AAC5B0mC,mCAAmB,EAAE,iEAAsBo6C,OADf;AAE5Bj+C,uBAAO,EAAE;AAFmB,eAA9B;AAID,aALD,MAKO;AACL,kBAAMvkC,OAAO,GAAG,QAAI,CAAClB,QAAL,CAAc7D,IAAd,CAAmB,UAAAynF,YAAY;AAAA,uBAAIA,YAAY,CAAC7hF,KAAb,KAAuB+kC,WAAW,CAACnjC,OAAvC;AAAA,eAA/B,CAAhB;;AACA,kBAAI,CAACzC,OAAL,EAAc;AACZyiF,+BAAe,CAACvgE,GAAhB,CAAoB0jB,WAAW,CAACnjC,OAAhC,EAAyC;AACvC2lC,qCAAmB,EAAE,iEAAsBo6C,OADJ;AAEvCj+C,yBAAO,EAAE;AAF8B,iBAAzC;AAID,eALD,MAKO;AACL,oBAAMz/B,OAAO,GAAG,QAAI,CAAC3T,aAAL,CAAmBi1C,YAAnB,CAAgC1O,SAAhC,EAA2Ch2B,QAA3C,CAAhB;;AACA,oBAAIoD,OAAO,CAACwhC,aAAZ,EAA2B;AACzBm8C,iCAAe,CAACvgE,GAAhB,CAAoBliB,OAAO,CAACa,KAA5B,EAAmC;AACjCunC,uCAAmB,EAAE,iEAAsBu6C,QADV;AAEjCp+C,2BAAO,EAAE;AAFwB,mBAAnC;AAID,iBALD,MAKO,IAAIz/B,OAAO,CAACuhC,UAAZ,EAAwB;AAI7B,sBAAMu8C,aAAa,GAAG,QAAI,CAACC,sCAAL,CAA4CN,aAA5C,EAA2DviF,OAA3D,CAAtB;;AACAyiF,iCAAe,CAACvgE,GAAhB,CAAoBliB,OAAO,CAACa,KAA5B,EAAmC+hF,aAAnC;AACD,iBANM,MAMA;AACLH,iCAAe,CAACvgE,GAAhB,CAAoBliB,OAAO,CAACa,KAA5B,EAAmC;AACjCunC,uCAAmB,EAAE,iEAAsBo6C,OADV;AAEjCj+C,2BAAO,EAAE;AAFwB,mBAAnC;AAID;AACF;AACF;AACF,WAnCD;;AAoCA,cAAM2D,cAAc,GAAG,mBAAIu6C,eAAe,CAACpyF,IAAhB,EAAJ,EAA4Bu2C,KAA5B,CAAkC,UAAA1rC,GAAG;AAAA,mBAAIunF,eAAe,CAAClqF,GAAhB,CAAoB2C,GAApB,EAAyBqpC,OAA7B;AAAA,WAArC,CAAvB;;AACA,cAAI6D,mBAAmB,GAAG,iEAAsBo6C,OAAhD;;AACA,cAAIt6C,cAAJ,EAAoB;AAClB,gBAAM46C,SAAS,GAAG,mBAAIL,eAAe,CAACpyF,IAAhB,EAAJ,EAA4Bu2C,KAA5B,CAChB,UAAA1rC,GAAG;AAAA,qBACDunF,eAAe,CAAClqF,GAAhB,CAAoB2C,GAApB,EAAyBktC,mBAAzB,KAAiD,iEAAsBG,OAAvE,IACAk6C,eAAe,CAAClqF,GAAhB,CAAoB2C,GAApB,EAAyBktC,mBAAzB,KAAiD,iEAAsBI,SAFtE;AAAA,aADa,CAAlB;;AAKAJ,+BAAmB,GAAG06C,SAAS,GAAG,iEAAsBv6C,OAAzB,GAAmC,iEAAsBF,UAAxF;AACD;;AACD,iBAAO;AACLH,0BAAc,EAAdA,cADK;AAELE,+BAAmB,EAAnBA,mBAFK;AAGLM,+BAAmB,EACjB65C,aAAa,CAACh9E,cAAd,KAAiC,QAAjC,GACI,sEAA2BG,MAD/B,GAEI,sEAA2BF,YAN5B;AAOLkhC,kCAAsB,EAAE,IAPnB;AAQL+7C,2BAAe,EAAfA;AARK,WAAP;AAUD;;;+DAE8CF,a,EAAwBviF,O,EAAgB;AAOrF,cAAIooC,mBAAmB,GAAG,iEAAsBI,SAAhD;AACA,cAAMu6C,kBAAkB,GAAG,EAA3B;AACA,cAAMC,kBAAkB,GAAS,IAAI9nD,IAAJ,CAASl7B,OAAO,CAACijF,mBAAjB,CAAjC;AACA,cAAMC,QAAQ,GAAS,IAAIhoD,IAAJ,CAASl7B,OAAO,CAACmjF,SAAjB,CAAvB;;AACA,cAAI,CAACnjF,OAAO,CAACmjF,SAAT,IAAsB,KAAKC,cAAL,CAAoBJ,kBAApB,EAAwCE,QAAxC,KAAqDH,kBAA/E,EAAmG;AACjG36C,+BAAmB,GAAG,iEAAsBC,UAA5C;AACD;;AASD,cAAI9D,OAAO,GAAG,KAAd;;AAGA,cACEg+C,aAAa,CAAC3iE,oBAAd,IACA2iE,aAAa,CAACh9E,cAAd,KAAiC,sEAA2BG,MAD5D,IAEA1F,OAAO,CAACuF,cAAR,KAA2B,sEAA2BG,MAHxD,EAIE;AACA6+B,mBAAO,GAAG,IAAV;AACD;;AACD,iBAAO;AACL6D,+BAAmB,EAAnBA,mBADK;AAEL7D,mBAAO,EAAPA;AAFK,WAAP;AAID;;;uCAEc8+C,K,EAAavpC,G,EAAW;AAErC,cAAMwpC,IAAI,GAAGpoD,IAAI,CAACqoD,GAAL,CAASF,KAAK,CAAChoD,WAAN,EAAT,EAA8BgoD,KAAK,CAAC9nD,QAAN,EAA9B,EAAgD8nD,KAAK,CAAC5nD,OAAN,EAAhD,CAAb;AACA,cAAM+nD,IAAI,GAAGtoD,IAAI,CAACqoD,GAAL,CAASzpC,GAAG,CAACze,WAAJ,EAAT,EAA4Bye,GAAG,CAACve,QAAJ,EAA5B,EAA4Cue,GAAG,CAACre,OAAJ,EAA5C,CAAb;AACA,cAAMgoD,UAAU,GAAG,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAApC;AACA,iBAAO1wF,IAAI,CAACC,KAAL,CAAW,CAACwwF,IAAI,GAAGF,IAAR,IAAgBG,UAA3B,CAAP;AACD;;;;;;;uBA/KUnB,uB,EAAuB,yG,EAAA,qH;AAAA,K;;;aAAvBA,uB;AAAuB,eAAvBA,uBAAuB;;;;sEAAvBA,uB,EAAuB;cADnC;AACmC,Q;;;;;;;;;;;;;;;;;;;;;;;;ACpBpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAQaoB,c;AACX,8BAAoBvvF,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAAoB;;;;wCAExBnC,I,EAAW;AACzB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,yBAAmD3xF,IAAnD,CAAP;AACD;;;yCAEgBA,I,EAAW;AAC1B,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WACF,qDADE,uCACiCvG,IAAI,CAACwhD,YADtC,SAEHxhD,IAAI,CAAC2hD,UAAL,yBAAiC3hD,IAAI,CAAC2hD,UAAtC,IAAqD,EAFlD,EAAP;AAKD;;;;;;;uBAbU+vC,c,EAAc,uH;AAAA,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBAFb;;;;sEAEDA,c,EAAc;cAH1B,wDAG0B;eAHf;AACVnvF,oBAAU,EAAE;AADF,S;AAGe,Q;;;;;;;;;;;;;;;;;;;;;;ACR3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWO,QAAMqvF,kBAAkB,GAAqB;AAClDC,QAAE,EAAE;AAAElqD,WAAG,EAAE;AAAP,OAD8C;AAElDmqD,QAAE,EAAE;AAAEpqD,WAAG,EAAE,GAAP;AAAYC,WAAG,EAAE;AAAjB,OAF8C;AAGlDoqD,QAAE,EAAE;AAAErqD,WAAG,EAAE,GAAP;AAAYC,WAAG,EAAE;AAAjB,OAH8C;AAIlDqqD,QAAE,EAAE;AAAEtqD,WAAG,EAAE;AAAP;AAJ8C,KAA7C;;QAUMuqD,kB;AAHb;AAAA;;AAIU,aAAAC,WAAA,GAAgCN,kBAAhC;AAiDT;;;;wCA/CqB;AAClB,cAAMO,WAAW,GAAWtzF,MAAM,CAAC4N,UAAnC;AACA,cAAMpO,IAAI,GAAGE,MAAM,CAACF,IAAP,CAAY,KAAK6zF,WAAjB,CAAb;;AACA,oCAAkB7zF,IAAlB,6BAAwB;AAAnB,gBAAM6K,GAAG,aAAT;AACH,gBAAM7C,KAAK,GAAG,KAAK6rF,WAAL,CAAiBhpF,GAAjB,CAAd;AACA,gBAAMw+B,GAAG,GAAGrhC,KAAK,CAACqhC,GAAN,IAAa,CAAzB;AACA,gBAAMC,GAAG,GAAGthC,KAAK,CAACshC,GAAN,IAAa/N,MAAM,CAACw4D,gBAAhC;;AAEA,gBAAID,WAAW,IAAIzqD,GAAf,IAAsByqD,WAAW,GAAGxqD,GAAxC,EAA6C;AAC3C,qBAAOz+B,GAAP;AACD;AACF;;AAED,iBAAO,IAAP;AACD;;;+BAMa;AACZ,iBAAO,KAAKmpF,aAAL,OAAyB,IAAhC;AACD;;;+BAMa;AACZ,iBAAO,KAAKA,aAAL,OAAyB,IAAhC;AACD;;;+BAMa;AACZ,iBAAO,KAAKA,aAAL,OAAyB,IAAhC;AACD;;;+BAMa;AACZ,iBAAO,KAAKA,aAAL,OAAyB,IAAhC;AACD;;;;;;;uBAjDUJ,kB;AAAkB,K;;;aAAlBA,kB;AAAkB,eAAlBA,kBAAkB,K;AAAA,kBAFjB;;;;sEAEDA,kB,EAAkB;cAH9B,wDAG8B;eAHnB;AACV1vF,oBAAU,EAAE;AADF,S;AAGmB,Q;;;;;;;;;;;;;;;;;;ACnB/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa+vF,+B;AACX,+CAAoBxvE,iBAApB,EAA0D;AAAA;;AAAtC,aAAAA,iBAAA,GAAAA,iBAAA;AAAwC;;;;kCAElDg3D,O,EAA2B7xE,I,EAAiB;AACpD,iBAAOA,IAAI,CAACsqF,MAAL,CAAYzY,OAAZ,EAAqBz5E,IAArB,CAA0B,iEAAU,KAAKyiB,iBAAL,CAAuB0vE,uBAAvB,EAAV,CAA1B,CAAP;AACD;;;;;;;uBALUF,+B,EAA+B,iI;AAAA,K;;;aAA/BA,+B;AAA+B,eAA/BA,+BAA+B,K;AAAA,kBAF9B;;;;sEAEDA,+B,EAA+B;cAH3C,wDAG2C;eAHhC;AACV/vF,oBAAU,EAAE;AADF,S;AAGgC,Q;;;;;;;;;;;;;;;;;;;;;;ACX5C;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMakwF,iB;AAGX,mCAAc;AAAA;;AAFN,aAAAC,sBAAA,GAAyB,IAAI,6DAAJ,EAAzB;AAEQ;;;;gDAGe;AAC7B,eAAKA,sBAAL,CAA4BzqF,IAA5B;AACD;;;kDAEgC;AAC/B,iBAAO,KAAKyqF,sBAAL,CAA4BC,YAA5B,EAAP;AACD;;;;;;;uBAZUF,iB;AAAiB,K;;;aAAjBA,iB;AAAiB,eAAjBA,iBAAiB,K;AAAA,kBAFhB;;;;sEAEDA,iB,EAAiB;cAH7B,wDAG6B;eAHlB;AACVlwF,oBAAU,EAAE;AADF,S;AAGkB,Q;;;;;;;;;;;;;;;;;;;;ACN9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAiCaqwF,kB;AAuBX,kCACUvzF,KADV,EAEUopB,cAFV,EAGU7T,WAHV,EAIUi+E,wBAJV,EAKUC,qBALV,EAMUC,uBANV,EAM0D;AAAA;;AAAA;;AALhD,aAAA1zF,KAAA,GAAAA,KAAA;AACA,aAAAopB,cAAA,GAAAA,cAAA;AACA,aAAA7T,WAAA,GAAAA,WAAA;AACA,aAAAi+E,wBAAA,GAAAA,wBAAA;AACA,aAAAC,qBAAA,GAAAA,qBAAA;AACA,aAAAC,uBAAA,GAAAA,uBAAA;AAxBF,aAAAC,gBAAA,GAAoE,EAApE;AAIR,aAAAC,cAAA,GAAiB,GAAjB;AAEA,aAAAC,WAAA,GAAc,GAAd;AAIA,aAAAC,eAAA,GAAkB,CAAlB;AAMA,aAAArmF,QAAA,GAAsB,EAAtB;AAUE,aAAKzN,KAAL,CACG6B,MADH,CACU,UAACC,KAAD;AAAA,iBAAqBA,KAAK,CAAC2hC,WAA3B;AAAA,SADV,EAEG/iC,SAFH,CAEa,UAACmd,QAAD,EAAgC;AACzC3e,gBAAM,CAACF,IAAP,CAAY6e,QAAQ,CAAC6qB,MAArB,EAA6B74B,OAA7B,CAAqC,UAAChG,GAAD,EAAc;AACjD,gBAAM+5B,SAAS,GAAU/lB,QAAQ,CAAC6qB,MAAT,CAAgB7+B,GAAhB,CAAzB;AADiD,gBAEzCw8B,SAFyC,GAE3BxoB,QAF2B,CAEzCwoB,SAFyC;;AAGjD,gBAAIzC,SAAS,CAAC/hB,KAAd,EAAqB;AACnB,kBACE+hB,SAAS,CAAC+M,UAAV,IACA,QAAI,CAACjI,MAAL,CAAY7+B,GAAZ,CADA,IAEA,QAAI,CAAC6+B,MAAL,CAAY7+B,GAAZ,EAAiB6pC,eAFjB,IAGA,CAAC9P,SAAS,CAAC8P,eAJb,EAKE;AACA,wBAAI,CAACqgD,mBAAL,CAAyBnwD,SAAzB;;AACA,wBAAI,CAAC5jC,KAAL,CAAWQ,QAAX,CAAoB,IAAI,mDAAJ,CAAe,MAAD,OAAC,CAAD,EAAC,EAAKojC,SAAL,CAAf,CAApB;AACD,eARD,MAQO,IAAIA,SAAS,CAACgN,UAAV,IAAwB,QAAI,CAAClI,MAAL,CAAY7+B,GAAZ,CAA5B,EAA8C;AACnD,oBACG,QAAI,CAAC6+B,MAAL,CAAY7+B,GAAZ,EAAiB6pC,eAAjB,IACC,CAAC9P,SAAS,CAAC8P,eADZ,IAEC,CAAC9P,SAAS,CAACgF,uBAFb,IAGC,QAAI,CAACF,MAAL,CAAY7+B,GAAZ,EAAiB++B,uBAAjB,IACC,CAAChF,SAAS,CAACgF,uBADZ,IAEC,CAAChF,SAAS,CAAC8P,eANf,EAOE;AAEA,sBAAI,CAAC9P,SAAS,CAACk3C,gBAAf,EAAiC;AAC/B,4BAAI,CAACiZ,mBAAL,CAAyBnwD,SAAzB;AACD;;AACD,sBAAI,CAACA,SAAS,CAAC0K,QAAf,EAAyB;AACvB,wBAAI1K,SAAS,CAAC/hB,KAAV,IAAmB+hB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAnC,IAAiDivB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAAhF,EAA0F;AACxFm5B,+BAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAA3B,GAAsC,EAAtC;AACD;;AACD,4BAAI,CAACzK,KAAL,CAAWQ,QAAX,CAAoB,IAAI,iDAAJ,CAAa,MAAD,OAAC,CAAD,EAAC,EAAKojC,SAAL,CAAb,CAApB;AACD,mBALD,MAKO;AACL,4BAAI,CAAC5jC,KAAL,CAAWQ,QAAX,CACE,IAAI,kDAAJ,CAAc;AACZsJ,6BAAO,EAAE;AADG,qBAAd,CADF;AAKD;AACF,iBAxBD,MAwBO,IAAI,QAAI,CAAC4+B,MAAL,CAAY7+B,GAAZ,EAAiBs/E,mBAAjB,IAAwC,CAACvlD,SAAS,CAACulD,mBAAvD,EAA4E;AAEjF,sBAAIvlD,SAAS,CAACmlD,cAAd,EAA8B;AAC5B,4BAAI,CAACiL,qBAAL,CAA2BpwD,SAA3B;AACD,mBAFD,MAEO;AACL,4BAAI,CAAC5jC,KAAL,CAAWQ,QAAX,CACE,IAAI,kDAAJ,CAAc;AACZsJ,6BAAO,EAAE;AADG,qBAAd,CADF;AAKD;AACF,iBAXM,MAWA,IAAI,QAAI,CAAC4+B,MAAL,CAAY7+B,GAAZ,EAAiBq/E,oBAAjB,IAAyC,CAACtlD,SAAS,CAACslD,oBAAxD,EAA8E;AAEnF,sBAAI+K,UAAU,GAAU,EAAxB;;AACA,sBAAI,QAAI,CAACC,oBAAL,CAA0BtwD,SAA1B,EAAqCyC,SAArC,CAAJ,EAAqD;AACnDzC,6BAAS,CAAC/hB,KAAV,CAAgBzJ,YAAhB,GAA+B,IAA/B;AACA67E,8BAAU,GAAG,QAAI,CAACE,aAAL,CAAmBvwD,SAAnB,EAA8ByC,SAA9B,EAAyC/nC,GAAzC,CAA6C,UAAA0Q,IAAI;AAAA,6BAAIA,IAAI,CAAC4D,UAAT;AAAA,qBAAjD,CAAb;AACD;;AACD,sBAAMwhF,yBAAyB,GAAG,QAAI,CAACC,4BAAL,CAAkCzwD,SAAlC,EAA6CyC,SAA7C,CAAlC;;AACA,sBAAI+tD,yBAAyB,KAAK,IAA9B,IAAsCH,UAAU,CAACryF,MAAX,GAAoB,CAA9D,EAAiE;AAC/DgiC,6BAAS,CAAC/hB,KAAV,CAAgBzJ,YAAhB,GAA+B,KAA/B;AACAwrB,6BAAS,CAAC/hB,KAAV,CAAgB/J,oBAAhB,GAAuC,KAAvC;;AACA,wBAAIs8E,yBAAyB,KAAK,6DAAkB7gF,UAApD,EAAgE;AAC9DqwB,+BAAS,CAAC/hB,KAAV,CAAgBzO,eAAhB,GAAkC,6DAAkBG,UAApD;AACD;AACF;;AACD,sBAAIqwB,SAAS,CAAC/hB,KAAV,IAAmB+hB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAnC,IAAiDivB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAAhF,EAA0F;AACxFm5B,6BAAS,CAACpmB,WAAV,CAAsB3N,OAAtB,CAA8B,UAAA6N,UAAU,EAAI;AAC1C,8BAAI,CAAC0L,cAAL,CAAoBkrE,iCAApB,CACE52E,UADF,EAEEkmB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAF7B;AAID,qBALD;;AAMA,4BAAI,CAAC2e,cAAL,CAAoBmrE,uBAApB,CACE3wD,SAAS,CAACnlC,EADZ,EAEE,IAAI,wDAAJ,CAAkBmlC,SAAS,CAAC/hB,KAA5B,CAFF,EAGE+hB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAH7B;AAKD,mBAZD,MAYO,IAAIwpF,UAAU,CAACryF,MAAX,GAAoB,CAAxB,EAA2B;AAChC,wBAAM4yF,yBAAyB,GAAGd,uBAAuB,CAACe,yCAAxB,CAChC7wD,SADgC,EAEhCyC,SAFgC,CAAlC;;AAIA,wBAAImuD,yBAAyB,CAAC39C,cAA9B,EAA8C;AAC5C,8BAAI,CAAC69C,6BAAL,CAAmC9wD,SAAS,CAACnlC,EAA7C,EAAiDw1F,UAAjD;AACD,qBAFD,MAEO,IAAIO,yBAAyB,CAACn/C,sBAA9B,EAAsD;AAC3DzR,+BAAS,CAAC/hB,KAAV,CAAgBzJ,YAAhB,GAA+B,KAA/B;AACAwrB,+BAAS,CAAC/hB,KAAV,CAAgB/J,oBAAhB,GAAuC,KAAvC;;AACA,8BAAI,CAAC68E,0BAAL,CAAgC,KAAhC,EAAuC/wD,SAAvC,EAAkDqwD,UAAlD,EAA8DG,yBAA9D;AACD,qBAJM,MAIA,IAAIA,yBAAyB,KAAK,6DAAkB/gF,QAApD,EAA8D;AACnE,8BAAI,CAACqhF,6BAAL,CAAmC9wD,SAAS,CAACnlC,EAA7C,EAAiDw1F,UAAjD;AACD,qBAFM,MAEA;AACLrwD,+BAAS,CAACpmB,WAAV,CAAsB3N,OAAtB,CAA8B,UAAA6N,UAAU,EAAI;AAC1C,gCAAI,CAAC0L,cAAL,CAAoB0f,iBAApB,CAAsClF,SAAS,CAAC/hB,KAAV,CAAgB1X,OAAtD,EAA+DuT,UAA/D,EAA2Eu2E,UAA3E;AACD,uBAFD;;AAGA,8BAAI,CAAC7qE,cAAL,CAAoB8pB,OAApB,CACEtP,SAAS,CAAC/hB,KAAV,CAAgB1X,OADlB,EAEEy5B,SAAS,CAACnlC,EAFZ,EAGE,IAAI,wDAAJ,CAAkBmlC,SAAS,CAAC/hB,KAA5B,CAHF,EAIEoyE,UAJF,EAKEG,yBALF;AAOD;AACF,mBAzBM,MAyBA,IAAI,CAACxwD,SAAS,CAAC0K,QAAf,EAAyB;AAC9B,4BAAI,CAACqmD,0BAAL,CAAgC,IAAhC,EAAsC/wD,SAAtC,EAAiDqwD,UAAjD,EAA6DG,yBAA7D;AACD,mBAFM,MAEA;AACL,4BAAI,CAACp0F,KAAL,CAAWQ,QAAX,CACE,IAAI,kDAAJ,CAAc;AACZsJ,6BAAO,EAAE;AADG,qBAAd,CADF;AAKD;AAEF;AACF;AACF;;AACD,gBAAI85B,SAAS,CAACvsB,QAAV,IAAsB,CAACusB,SAAS,CAACgN,UAAjC,IAA+C,CAAChN,SAAS,CAAC+M,UAA1D,IAAwE,CAAC/M,SAAS,CAACh9B,UAAvF,EAAmG;AACjG,sBAAI,CAAC5G,KAAL,CAAWQ,QAAX,CAAoB,IAAI,mDAAJ,CAAeojC,SAAf,CAApB;AACD;AACF,WApHD;AAsHA,kBAAI,CAAC8E,MAAL,GAAc,MAAH,OAAG,CAAH,EAAG,EAAK7qB,QAAQ,CAAC6qB,MAAd,CAAd;AACD,SA1HH;AA4HA,aAAK1oC,KAAL,CACG6B,MADH,CACU,UAACC,KAAD;AAAA,iBAAqBA,KAAK,CAAC4E,IAA3B;AAAA,SADV,EAEGhG,SAFH,CAEa,UAACgG,IAAD,EAAqB;AAC9B,kBAAI,CAACC,SAAL,GAAiBD,IAAjB;AACD,SAJH;AAMA,aAAK1G,KAAL,CACG6B,MADH,CACU,UAACC,KAAD;AAAA,iBAAqBA,KAAK,CAAC2L,QAA3B;AAAA,SADV,EAEG/M,SAFH,CAEa,UAACgN,aAAD,EAAkC;AAC3C,kBAAI,CAACD,QAAL,GAAgBC,aAAa,CAACD,QAA9B;AACD,SAJH;AAKD;;;;6CAE4Bm2B,S,EAAkByC,S,EAAuC;AACpF,cAAIzC,SAAS,CAAC/hB,KAAd,EAAqB;AACnB,gBAAM7iB,IAAI,GAAG,KAAKm1F,aAAL,CAAmBvwD,SAAnB,EAA8ByC,SAA9B,CAAb;AACA,mBAAOrnC,IAAI,CAACu2C,KAAL,CAAW,UAAA1rC,GAAG;AAAA,qBAAIA,GAAG,CAAC+I,UAAR;AAAA,aAAd,CAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;sCAEqBgxB,S,EAAkByC,S,EAAuC;AAC7E,cAAIzC,SAAS,CAAC/hB,KAAd,EAAqB;AACnB,gBAAMnS,SAAS,gCACVk0B,SAAS,CAAC/hB,KAAV,CAAgBxR,QAAhB,CAAyB/R,GAAzB,CAA6B,UAAA+R,QAAQ;AAAA,qBAAIA,QAAJ;AAAA,aAArC,CADU,sBAEVuzB,SAAS,CAAC/hB,KAAV,CAAgB1C,EAAhB,CAAmB7gB,GAAnB,CAAuB,UAAA6gB,EAAE;AAAA,qBAAIA,EAAJ;AAAA,aAAzB,CAFU,sBAGVykB,SAAS,CAAC/hB,KAAV,CAAgBzC,GAAhB,CAAoB9gB,GAApB,CAAwB,UAAA8gB,GAAG;AAAA,qBAAIA,GAAJ;AAAA,aAA3B,CAHU,EAAf;AAKA,gBAAIpgB,IAAI,GAAU,EAAlB;AACA0Q,qBAAS,CAACG,OAAV,CAAkB,UAAAQ,QAAQ,EAAI;AAC5B,kBAAMkkC,WAAW,GAAG,gEAA2BlkC,QAA3B,CAApB;;AACA,kBAAIg2B,SAAS,CAAC18B,GAAV,CAAc4qC,WAAW,CAACnjC,OAA1B,CAAJ,EAAwC;AACtCpS,oBAAI,gCAAOA,IAAP,sBAAgBqnC,SAAS,CAACn/B,GAAV,CAAcqtC,WAAW,CAACnjC,OAA1B,EAAmCvH,GAAnD,EAAJ;AACD;AACF,aALD;AAMA,mBAAO7K,IAAP;AACD;;AACD,iBAAO,EAAP;AACD;;;qDAEoC4kC,S,EAAkByC,S,EAAuC;AAAA;;AAC5F,cAAIzC,SAAS,CAAC/hB,KAAd,EAAqB;AACnB,gBAAMnS,SAAS,gCACVk0B,SAAS,CAAC/hB,KAAV,CAAgBxR,QAAhB,CAAyB/R,GAAzB,CACD,UAAA+R,QAAQ;AAAA,qBAAK,gEAA2BA,QAA3B,EAAkEe,OAAvE;AAAA,aADP,CADU,sBAIVwyB,SAAS,CAAC/hB,KAAV,CAAgB1C,EAAhB,CAAmB7gB,GAAnB,CAAuB,UAAA6gB,EAAE;AAAA,qBAAK,gEAA2BA,EAA3B,EAA4D/N,OAAjE;AAAA,aAAzB,CAJU,sBAKVwyB,SAAS,CAAC/hB,KAAV,CAAgBzC,GAAhB,CAAoB9gB,GAApB,CAAwB,UAAA8gB,GAAG;AAAA,qBAAK,gEAA2BA,GAA3B,EAA6DhO,OAAlE;AAAA,aAA3B,CALU,EAAf;AAOA,gBAAMkkC,WAAW,GAAG5lC,SAAS,CAAC6lC,KAAV,CAAgB,UAAArM,GAAG,EAAI;AACzC,kBAAI7C,SAAS,CAAC18B,GAAV,CAAcu/B,GAAd,KAAsB,CAAC7C,SAAS,CAACn/B,GAAV,CAAcgiC,GAAd,EAAmBC,UAA9C,EAA0D;AACxD,oBAAMqM,WAAW,GAAY,QAAI,CAAC/nC,QAAL,CAAc7D,IAAd,CAAmB,UAAC+E,OAAD;AAAA,yBAAsBA,OAAO,CAACa,KAAR,KAAkB05B,GAAxC;AAAA,iBAAnB,CAA7B;;AACA,oBACEsM,WAAW,IACXA,WAAW,CAACjkC,kBADZ,IAEAikC,WAAW,CAACpiC,eAAZ,KAAgC,6DAAkBG,UAHpD,EAIE;AACA,yBAAO,IAAP;AACD;AACF;;AACD,qBAAO,KAAP;AACD,aAZmB,CAApB;;AAaA,gBAAI+hC,WAAJ,EAAiB;AACf,qBAAO,6DAAkB/hC,UAAzB;AACD;;AACD,gBAAMkiC,SAAS,GAAG/lC,SAAS,CAAC6lC,KAAV,CAAgB,UAAArM,GAAG,EAAI;AACvC,kBAAI7C,SAAS,CAAC18B,GAAV,CAAcu/B,GAAd,KAAsB,CAAC7C,SAAS,CAACn/B,GAAV,CAAcgiC,GAAd,EAAmBC,UAA9C,EAA0D;AACxD,oBAAMqM,WAAW,GAAY,QAAI,CAAC/nC,QAAL,CAAc7D,IAAd,CAAmB,UAAC+E,OAAD;AAAA,yBAAsBA,OAAO,CAACa,KAAR,KAAkB05B,GAAxC;AAAA,iBAAnB,CAA7B;;AACA,oBACEsM,WAAW,IACXA,WAAW,CAACjkC,kBADZ,IAEAikC,WAAW,CAACpiC,eAAZ,KAAgC,6DAAkBC,QAHpD,EAIE;AACA,yBAAO,IAAP;AACD;AACF;;AACD,qBAAO,KAAP;AACD,aAZiB,CAAlB;;AAaA,gBAAIoiC,SAAJ,EAAe;AACb,qBAAO,6DAAkBpiC,QAAzB;AACD;;AACD,mBAAO,IAAP;AACD;;AACD,iBAAO,IAAP;AACD;;;4CAE2BuwB,S,EAAkB;AAC5CA,mBAAS,CAAC/hB,KAAV,CAAgBxJ,OAAhB,GAA0BurB,SAAS,CAACklD,gBAAV,CAA2BzwE,OAArD;;AACA,cAAI,KAAK1R,SAAL,CAAe2G,QAAnB,EAA6B;AAC3Bs2B,qBAAS,CAAC/hB,KAAV,CAAgBjJ,OAAhB,GAA0BgrB,SAAS,CAACklD,gBAAV,CAA2BlwE,OAArD;AACD;;AACD,cAAIgrB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,IAA8BivB,SAAS,CAAC/hB,KAAV,CAAgBlN,UAAhB,CAA2BlK,QAA7D,EAAuE;AACrEm5B,qBAAS,CAAC/hB,KAAV,CAAgB/J,oBAAhB,GAAuC,IAAvC;AACA8rB,qBAAS,CAAC/hB,KAAV,CAAgBzJ,YAAhB,GAA+B,IAA/B;AACD;AACF;;;mDAaCw8E,uB,EACAhxD,S,EAE4C;AAAA;;AAAA,cAD5CqwD,UAC4C,uEADxB,EACwB;AAAA,cAA5CG,yBAA4C;AAE5C,cAAMS,oBAAoB,GAAGjxD,SAAS,CAACpmB,WAAV,CAAsB/V,MAAtB,CAA6B,UAAAiW,UAAU;AAAA,mBAAI,CAAC,CAACA,UAAU,CAACtF,YAAjB;AAAA,WAAvC,CAA7B;;AACA,cAAIy8E,oBAAoB,CAACjzF,MAArB,GAA8B,CAAlC,EAAqC;AACnC,mGACKizF,oBAAoB,CAACv2F,GAArB,CAAyB,UAAAof,UAAU,EAAI;AACxCA,wBAAU,CAACtF,YAAX,GAA0B,KAA1B;AACAsF,wBAAU,CAACnb,QAAX,GAAsBmb,UAAU,CAACU,iBAAjC;AACA,qBAAO,gDAAWse,MAAX,CAAkB,UAAC89C,QAAD,EAAmB;AAC1C,wBAAI,CAACjlE,WAAL,CACGmlE,UADH,CACch9D,UADd,EAEG1c,IAFH,CAEQ,gEAAS;AAAA,yBAAMw5E,QAAQ,CAACnsB,QAAT,EAAN;AAAA,iBAAT,CAFR,EAGG3tD,SAHH,CAII,UAAA2I,KAAK,EAAI;AACP,sBAAIA,KAAK,YAAY,iEAArB,EAAmC;AACjCmxE,4BAAQ,CAAC5xE,IAAT,CAAcS,KAAK,CAAChE,IAApB;AACD;AACF,iBARL,EASI,UAAArC,KAAK;AAAA,yBAAIw3E,QAAQ,CAACx3E,KAAT,CAAeA,KAAf,CAAJ;AAAA,iBATT;AAWD,eAZM,CAAP;AAaD,aAhBE,CADL,GAmBGhC,IAnBH,CAmBQ,4DAAK,CAAL,CAnBR,EAoBGN,SApBH,CAqBI,UAAAo0F,SAAS,EAAI;AACX,kBAAI,CAACF,uBAAD,IAA4BX,UAAU,CAACryF,MAAX,KAAsB,CAAtD,EAAyD;AACvD,wBAAI,CAAC5B,KAAL,CAAWQ,QAAX,CAAoB,IAAI,iDAAJ,CAAa,MAAD,OAAC,CAAD,EAAC,EAAKojC,SAAL,CAAb,CAApB;AACD,eAFD,MAEO;AACL,wBAAI,CAACxa,cAAL,CAAoB8pB,OAApB,CACEtP,SAAS,CAAC/hB,KAAV,CAAgB1X,OADlB,EAEEy5B,SAAS,CAACnlC,EAFZ,EAGE,IAAI,wDAAJ,CAAkBmlC,SAAS,CAAC/hB,KAA5B,CAHF,EAIEoyE,UAJF;AAMD;AACF,aAhCL,EAiCI,UAAAjxF,KAAK;AAAA,qBACH,QAAI,CAAChD,KAAL,CAAWQ,QAAX,CACE,IAAI,kDAAJ,CAAc;AACZsJ,uBAAO,EAAE;AADG,eAAd,CADF,CADG;AAAA,aAjCT;AAwCD,WAzCD,MAyCO,IAAI,CAAC8qF,uBAAD,IAA4BX,UAAU,CAACryF,MAAX,KAAsB,CAAtD,EAAyD;AAC9D,iBAAK5B,KAAL,CAAWQ,QAAX,CAAoB,IAAI,iDAAJ,CAAa,MAAD,OAAC,CAAD,EAAC,EAAKojC,SAAL,CAAb,CAApB;AACD,WAFM,MAEA;AACL,iBAAKxa,cAAL,CAAoB8pB,OAApB,CACEtP,SAAS,CAAC/hB,KAAV,CAAgB1X,OADlB,EAEEy5B,SAAS,CAACnlC,EAFZ,EAGE,IAAI,wDAAJ,CAAkBmlC,SAAS,CAAC/hB,KAA5B,CAHF,EAIEoyE,UAJF;AAMD;AACF;;;8CAO6BrwD,S,EAAkB;AAAA,cACtCmlD,cADsC,GACnBnlD,SADmB,CACtCmlD,cADsC;AAE9C,cAAMl9C,WAAW,GAAG,IAAIC,IAAJ,CAAS,CAACi9C,cAAD,CAAT,EAA2B,gFAA3B,EAAkE;AACpF19E,gBAAI,EAAE;AAD8E,WAAlE,CAApB;AAGA,cAAM0pF,kBAAkB,GAAe;AACrCxyF,oBAAQ,EAAEspC,WAD2B;AAErClD,mBAAO,EAAE/E,SAAS,CAACnlC,EAFkB;AAGrCmI,sBAAU,EAAE,KAHyB;AAIrCukC,qBAAS,EAAE,KAJ0B;AAKrC/yB,wBAAY,EAAE,KALuB;AAMrCtO,mBAAO,EAAE85B,SAAS,CAAC/hB,KAAV,CAAgBpjB,EANY;AAOrC+F,gBAAI,EAAE,gFAP+B;AAQrCwgC,gBAAI,EAAE6G,WAAW,CAAC7G,IAAZ,CAAiBxmB,QAAjB,EAR+B;AASrCywB,uBAAW,EAAEpD,WAAW,CAAC7G,IATY;AAUrCgwD,uBAAW,EAAE;AAVwB,WAAvC;AAYA,eAAKh1F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,yDAAJ,CAAqB,MAAD,OAAC,CAAD,kBAAMu0F,kBAAN,CAAC,EAAuB;AAAEja,4BAAgB,EAAE;AAApB,WAAvB,CAArB,CAApB;AACD;;;sDAO6Bma,W,EAAqBhB,U,EAAwB;AAAA;;;;AACzE,cAAMrwD,SAAS,GAAU,KAAK8E,MAAL,CAAYusD,WAAZ,CAAzB;;AACA,cAAI,CAAJ,KAAIrxD,SAAS,SAAT,IAAAA,SAAS,WAAT,GAAS,MAAT,GAAAA,SAAS,CAAE/hB,KAAX,MAAgB,IAAhB,IAAgB,aAAhB,GAAgB,MAAhB,GAAgB,GAAEpjB,EAAtB,EAA0B;AACxB,iBAAKg1F,qBAAL,CACGyB,WADH,CAEI,IAAI,wDAAJ,CAAkBtxD,SAAS,CAAC/hB,KAA5B,CAFJ,EAGI+hB,SAAS,CAACpmB,WAHd,EAII,IAJJ,EAKI,IALJ,EAMI,IANJ,EAOI,6DAAkBnK,QAPtB,EASG1T,IATH,CASQ,UAAAw1F,QAAQ,EAAI;AAChB,sBAAI,CAAC/rE,cAAL,CAAoBgsE,iBAApB,CAAsCD,QAAtC,EAAgDvxD,SAAS,CAAC/hB,KAAV,CAAgB1X,OAAhE,EAAyEy5B,SAAS,CAACnlC,EAAnF,EAAuFw1F,UAAvF;AACD,aAXH,WAYS,UAAAjxF,KAAK,EAAI;AACd,sBAAI,CAAChD,KAAL,CAAWQ,QAAX,CACE,IAAI,kDAAJ,CAAc;AACZsJ,uBAAO,EAAE;AADG,eAAd,CADF;AAKD,aAlBH;AAmBD,WApBD,MAoBO;AACLjJ,sBAAU,CAAC,YAAM;AACf,sBAAI,CAAC6zF,6BAAL,CAAmCO,WAAnC,EAAgDhB,UAAhD;AACD,aAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;iDAEwBjjD,S,EAA6B;AACpD,eAAK4K,oBAAL,GAA4B5K,SAA5B;AACA,eAAK2iD,gBAAL,GAAwB,EAAxB;AACD;;;yCAE+B;AAAA,cAAjBntC,KAAiB,uEAAJ,EAAI;AAE9B,eAAK6uC,WAAL,GAAmB7uC,KAAK,GAAG,GAAR,IAAeA,KAAK,GAAG,GAAvB,GAA6BA,KAAK,GAAG,EAArC,GAA0CA,KAA7D;;AACA,cAAI,KAAK6uC,WAAL,GAAmB,KAAKxB,WAA5B,EAAyC;AACvC,iBAAKyB,kBAAL,GACE5zF,IAAI,CAAC6zF,KAAL,CAAW,CAAC,KAAKF,WAAL,GAAmB,KAAKxB,WAAzB,IAAwC,KAAKD,cAAxD,IAA0E,CAA1E,GAA8E,KAAKE,eAAnF,GACI,KAAKA,eADT,GAEIpyF,IAAI,CAAC6zF,KAAL,CAAW,CAAC,KAAKF,WAAL,GAAmB,KAAKxB,WAAzB,IAAwC,KAAKD,cAAxD,IAA0E,CAHhF;AAID,WALD,MAKO;AACL,iBAAK0B,kBAAL,GAA0B,CAA1B;AACD;;AACD,cAAIE,aAAa,GAAG,CAApB;;AACA,cAAI,KAAK7B,gBAAL,CAAsB/xF,MAAtB,GAA+B,CAAnC,EAAsC;AACpC,iBAAK,IAAI2Z,CAAC,GAAG,KAAKo4E,gBAAL,CAAsB/xF,MAAtB,GAA+B,CAA5C,EAA+C2Z,CAAC,GAAG,CAAC,CAApD,EAAuDA,CAAC,EAAxD,EAA4D;AAC1Di6E,2BAAa,IAAI,KAAK7B,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkCzxD,WAAlC,GAAgD,KAAK4vD,cAArD,GAAsE,KAAKC,WAA5F;;AACA,kBAAI2B,aAAa,GAAG,KAAKH,WAAzB,EAAsC;AACpC,oBAAI,CAAC,KAAK1B,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkCzxD,WAAvC,EAAoD;AAClD,uBAAK2vD,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkC38C,gBAAlC,GAAqD,IAArD;AACA,uBAAK66C,gBAAL,CAAsBp4E,CAAC,GAAG,CAA1B,EAA6Bk6E,QAA7B,CAAsC38C,gBAAtC,GAAyD,KAAzD;AACD,iBAHD,MAGO;AACL,uBAAK66C,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkC38C,gBAAlC,GAAqD,KAArD;AACD;;AACD;AACD,eARD,MAQO;AACL,qBAAK66C,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkC38C,gBAAlC,GAAqD,IAArD;AACD;AACF;AACF;AACF;;;2CAEkB;AAAA;;AAEjB,cAAI48C,cAAc,GAAG,CAArB;AACA,eAAK/B,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClD,gBAAIA,kBAAkB,CAACF,QAAnB,CAA4B38C,gBAAhC,EAAkD;AAChD48C,4BAAc,IAAIC,kBAAkB,CAACF,QAAnB,CAA4BzxD,WAA5B,GAA0C,QAAI,CAAC4vD,cAA/C,GAAgE,QAAI,CAACC,WAAvF;AACD;AACF,WAJD;AAKA,eAAK2B,aAAL,GAAqBE,cAArB;AACD;;;gDAE0C;AAAA;;AAAA,cAArBE,SAAqB,uEAAJ,EAAI;;AACzC,cAAI,KAAKjvF,SAAL,IAAkB,KAAKgtF,gBAAL,CAAsB/xF,MAAtB,GAA+B,KAAKkyF,eAA1D,EAA2E;AACzE,iBAAKH,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClDA,gCAAkB,CAACF,QAAnB,CAA4BzxD,WAA5B,GAA0C,IAA1C;AACD,aAFD;;AAIA,gBAAI4xD,SAAS,CAAC/zE,KAAd,EAAqB;AACnB,kBAAMg0E,qBAAqB,GAAG,KAAKlC,gBAAL,CAAsB/pF,IAAtB,CAA2B,UAAA+rF,kBAAkB,EAAI;AAC7E,uBACEA,kBAAkB,CAACF,QAAnB,CAA4BhyD,WAA5B,CAAwCG,SAAxC,IACA+xD,kBAAkB,CAACF,QAAnB,CAA4BhyD,WAA5B,CAAwCG,SAAxC,CAAkDnlC,EAAlD,KAAyDm3F,SAAS,CAAC/zE,KAAV,CAAgBpjB,EAF3E;AAID,eAL6B,CAA9B;;AAMA,kBAAIo3F,qBAAJ,EAA2B;AACzBA,qCAAqB,CAACJ,QAAtB,CAA+BzxD,WAA/B,GAA6C,KAA7C;AACA;AACD;AACF;;AACD,gBAAM8xD,OAAO,GAAG,KAAKtC,wBAAL,CAA8BuC,uBAA9B,CAAsD,+HAAtD,CAAhB;AACA,gBAAMC,qBAAqB,GAA6C,KAAKp6C,oBAAL,CAA0Bq6C,eAA1B,CACtEH,OADsE,CAAxE;AAGA,iBAAKnC,gBAAL,CAAsBr2E,IAAtB,CAA2B04E,qBAA3B;AACA92F,kBAAM,CAACF,IAAP,CAAY42F,SAAZ,EAAuB/lF,OAAvB,CAA+B,UAAAhG,GAAG,EAAI;AACnCmsF,mCAA6B,CAACP,QAA9B,CAAuC5rF,GAAvC,IAA8C+rF,SAAS,CAAC/rF,GAAD,CAAvD;AACF,aAFD;AAGAmsF,iCAAqB,CAACP,QAAtB,CAA+B38C,gBAA/B,GAAkD,IAAlD;AACAk9C,iCAAqB,CAACP,QAAtB,CAA+BzxD,WAA/B,GAA6C,KAA7C;AACA,iBAAKkyD,gBAAL;AACAF,iCAAqB,CAACP,QAAtB,CAA+BvyD,IAA/B,CAAoCxiC,SAApC,CAA8C,YAAM;AAClD,kBAAM2b,KAAK,GAAG,QAAI,CAACs3E,gBAAL,CAAsBlxF,OAAtB,CAA8BuzF,qBAA9B,CAAd;;AACA,sBAAI,CAACG,gBAAL,CAAsBH,qBAAtB,EAA6C35E,KAA7C;AACD,aAHD;AAIA25E,iCAAqB,CAACP,QAAtB,CAA+BtyD,QAA/B,CAAwCziC,SAAxC,CAAkD,UAACsjC,WAAD,EAA0B;AAC1E,kBAAI,CAACA,WAAL,EAAkB;AAEhB,wBAAI,CAAC2vD,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClDA,oCAAkB,CAACF,QAAnB,CAA4BzxD,WAA5B,GAA0C,IAA1C;AACA2xD,oCAAkB,CAACF,QAAnB,CAA4B9lF,YAA5B,GAA2C,KAA3C;AACAgmF,oCAAkB,CAACF,QAAnB,CAA4B38C,gBAA5B,GAA+C,IAA/C;AACD,iBAJD;;AAKAk9C,qCAAqB,CAACP,QAAtB,CAA+BzxD,WAA/B,GAA6C,KAA7C;;AACA,oBAAI,QAAI,CAACqxD,WAAL,GAAmB,QAAI,CAACzB,cAAL,IAAuB,QAAI,CAACD,gBAAL,CAAsB/xF,MAAtB,GAA+B,CAAtD,IAA2D,QAAI,CAACiyF,WAAvF,EAAoG;AAClG,sBAAIuC,cAAc,GAAG,CAArB;;AACA,uBAAK,IAAI76E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,QAAI,CAACo4E,gBAAL,CAAsB/xF,MAA1C,EAAkD2Z,CAAC,EAAnD,EAAuD;AACrD,wBAAI66E,cAAc,KAAK,QAAI,CAACzC,gBAAL,CAAsB/xF,MAAtB,GAA+B,QAAI,CAAC0zF,kBAA3D,EAA+E;AAC7E;AACD;;AACD,wBAAI,QAAI,CAAC3B,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkCzxD,WAAtC,EAAmD;AACjDoyD,oCAAc,IAAI,CAAlB;AACA,8BAAI,CAACzC,gBAAL,CAAsBp4E,CAAtB,EAAyBk6E,QAAzB,CAAkC38C,gBAAlC,GAAqD,KAArD;AACD;AACF;AACF;AACF,eApBD,MAoBO;AAEL,wBAAI,CAAC66C,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClDA,oCAAkB,CAACF,QAAnB,CAA4BzxD,WAA5B,GAA0C,IAA1C;AACA2xD,oCAAkB,CAACF,QAAnB,CAA4B38C,gBAA5B,GAA+C,KAA/C;AACD,iBAHD;;AAIA,oBAAIxyB,KAAK,GAAG5kB,IAAI,CAAC6zF,KAAL,CAAW,QAAI,CAACF,WAAL,GAAmB,QAAI,CAACzB,cAAnC,CAAZ;;AACA,oBAAI,QAAI,CAACD,gBAAL,CAAsB/xF,MAAtB,GAA+B0kB,KAAnC,EAA0C;AACxCA,uBAAK,GAAG,QAAI,CAACqtE,gBAAL,CAAsB/xF,MAA9B;AACD;;AACD,qBAAK,IAAI2Z,GAAC,GAAG,QAAI,CAACo4E,gBAAL,CAAsB/xF,MAAtB,GAA+B,CAA5C,EAA+C2Z,GAAC,IAAI,QAAI,CAACo4E,gBAAL,CAAsB/xF,MAAtB,GAA+B0kB,KAAnF,EAA0F/K,GAAC,EAA3F,EAA+F;AAC7F,0BAAI,CAACo4E,gBAAL,CAAsBp4E,GAAtB,EAAyBk6E,QAAzB,CAAkC38C,gBAAlC,GAAqD,IAArD;AACD;AACF;AACF,aAnCD;AAoCAk9C,iCAAqB,CAACP,QAAtB,CAA+BryD,UAA/B,CAA0C1iC,SAA1C,CAAoD,UAACiP,YAAD,EAA2B;AAC7E,kBAAIA,YAAJ,EAAkB;AAChB,wBAAI,CAACgkF,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClDA,oCAAkB,CAACF,QAAnB,CAA4B9lF,YAA5B,GAA2C,KAA3C;AACAgmF,oCAAkB,CAACF,QAAnB,CAA4BzxD,WAA5B,GAA0C,IAA1C;AACD,iBAHD;;AAIAgyD,qCAAqB,CAACP,QAAtB,CAA+B9lF,YAA/B,GAA8C,IAA9C;AACD;AACF,aARD;AASD,WA7ED,MA6EO;AAEL,iBAAK3P,KAAL,CAAWQ,QAAX,CAAoB,IAAI,kDAAJ,CAAc;AAAEsJ,qBAAO,EAAE,2BAAX;AAAwCwwB,sBAAQ,EAAE;AAAlD,aAAd,CAApB;AACD;AACF;;;uDAE2B;AAC1B,eAAKq5D,gBAAL,CAAsB9jF,OAAtB,CAA8B,UAAA8lF,kBAAkB,EAAI;AAClDA,8BAAkB,CAACU,OAAnB;AACD,WAFD;AAGA,eAAK1C,gBAAL,GAAwB,EAAxB;AACD;;;yCAEwBqC,qB,EAAiE35E,K,EAAe;AACvG25E,+BAAqB,CAACK,OAAtB;AACA,eAAK1C,gBAAL,CAAsBj/C,MAAtB,CAA6Br4B,KAA7B,EAAoC,CAApC;AACA,eAAK65E,gBAAL;AACA,cAAII,eAAe,GAAG,CAAC,KAAKjB,WAAL,GAAmB,KAAKG,aAAzB,IAA0C,KAAK5B,cAArE;;AACA,eAAK,IAAIr4E,CAAC,GAAG,KAAKo4E,gBAAL,CAAsB/xF,MAAnC,EAA2C2Z,CAAC,GAAG,CAA/C,EAAkDA,CAAC,EAAnD,EAAuD;AACrD,gBAAI,CAAC,KAAKo4E,gBAAL,CAAsBp4E,CAAC,GAAG,CAA1B,EAA6Bk6E,QAA7B,CAAsC38C,gBAAvC,IAA2Dw9C,eAAe,IAAI,CAAlF,EAAqF;AACnFA,6BAAe,IAAI,CAAnB;AACA,mBAAK3C,gBAAL,CAAsBp4E,CAAC,GAAG,CAA1B,EAA6Bk6E,QAA7B,CAAsC38C,gBAAtC,GAAyD,IAAzD;AACD;AACF;AACF;;;;;;;uBAjhBUy6C,kB,EAAkB,yG,EAAA,uH,EAAA,kH,EAAA,8H,EAAA,uI,EAAA,2I;AAAA,K;;;aAAlBA,kB;AAAkB,eAAlBA,kBAAkB,K;AAAA,kBAFjB;;;;sEAEDA,kB,EAAkB;cAH9B,wDAG8B;eAHnB;AACVrwF,oBAAU,EAAE;AADF,S;AAGmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjC/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaqzF,mB;AAoBX,mCAAoBv2F,KAApB,EAA4C;AAAA;;AAAA;;AAAxB,aAAAA,KAAA,GAAAA,KAAA;AAnBX,aAAAw2F,uBAAA,GAA0B,0BAA1B;AAEA,aAAAC,iBAAA,GAAyB;AAChC,mBAAO,gBADyB;AAEhCC,gBAAM,EAAE,wBAFwB;AAGhC,kBAAM,2BAH0B;AAIhCC,cAAI,EAAE,iCAJ0B;AAKhCC,mBAAS,EAAE,QALqB;AAMhCC,oBAAU,EAAE,aANoB;AAOhCC,kBAAQ,EAAE,cAPsB;AAQhCC,kBAAQ,EAAE,oBARsB;AAShCC,mBAAS,EAAE,QATqB;AAUhCC,oBAAU,EAAE,WAVoB;AAWhCC,kBAAQ,EAAE,aAXsB;AAYhCC,kBAAQ,EAAE;AAZsB,SAAzB;AAkBP,aAAKn3F,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAAC4E,IAAV;AAAA,SADf,EAEGhG,SAFH,CAEa,UAACgG,IAAD,EAAqB;AAC9B,cAAIA,IAAI,CAAC4G,QAAL,IAAiB5G,IAAI,CAAC4G,QAAL,CAAc4sB,QAAd,KAA2B,QAAI,CAACA,QAArD,EAA+D;AAC7D,oBAAI,CAACA,QAAL,GAAgBxzB,IAAI,CAAC4G,QAAL,CAAc4sB,QAA9B;;AACA,gBAAI,QAAI,CAACA,QAAT,EAAmB;AACjB,iEAAUk9D,UAAV,CAAqB,QAAI,CAACl9D,QAA1B;AACD,aAFD,MAEO;AACL,iEAAUk9D,UAAV;AACD;AACF;AACF,SAXH;AAYD;;;;+DAEsCh1E,I,EAAqB2vB,I,EAAmB;AAC7E,iBAAO,4CAAM,CAAC,CAAC3vB,IAAI,CAAC2nB,IAAN,EAAY3nB,IAAI,CAAC6nB,KAAL,GAAa,CAAzB,EAA4B7nB,IAAI,CAAC+nB,GAAjC,EAAsC4H,IAAI,CAAC9e,IAA3C,EAAiD8e,IAAI,CAAC7e,MAAtD,EAA8D6e,IAAI,CAAC5e,MAAnE,CAAD,CAAN,CACJkkE,GADI,GAEJl6D,MAFI,CAEG,KAAKq5D,uBAFR,CAAP;AAGD;;;4DAEmCp0E,I,EAAqB2vB,I,EAAmB;AAC1E,iBAAO,4CAAM,CAAC,CAAC3vB,IAAI,CAAC2nB,IAAN,EAAY3nB,IAAI,CAAC6nB,KAAL,GAAa,CAAzB,EAA4B7nB,IAAI,CAAC+nB,GAAjC,EAAsC4H,IAAI,CAAC9e,IAA3C,EAAiD8e,IAAI,CAAC7e,MAAtD,EAA8D6e,IAAI,CAAC5e,MAAnE,CAAD,CAAN,CAAmFkkE,GAAnF,EAAP;AACD;;;6DAEoCrlD,c,EAAsB;AACzD,cAAMslD,QAAQ,GAAG,4CAAM,CAACtlD,cAAD,CAAvB;;AACA,cAAIslD,QAAJ,EAAc;AACZ,mBAAO;AACLl1E,kBAAI,EAAE;AACJ2nB,oBAAI,EAAEutD,QAAQ,CAACvtD,IAAT,EADF;AAEJE,qBAAK,EAAEqtD,QAAQ,CAACrtD,KAAT,KAAmB,CAFtB;AAGJE,mBAAG,EAAEmtD,QAAQ,CAACl1E,IAAT;AAHD,eADD;AAML2vB,kBAAI,EAAE;AACJ9e,oBAAI,EAAEqkE,QAAQ,CAACrkE,IAAT,EADF;AAEJC,sBAAM,EAAEokE,QAAQ,CAACpkE,MAAT,EAFJ;AAGJC,sBAAM,EAAEmkE,QAAQ,CAACnkE,MAAT;AAHJ;AAND,aAAP;AAYD;;AACD,iBAAO;AAAE/Q,gBAAI,EAAE,IAAR;AAAc2vB,gBAAI,EAAE;AAApB,WAAP;AACD;;;oDAE2BwlD,U,EAAoBp6D,M,EAAc;AAC5D,cAAMm6D,QAAQ,GAAG,4CAAM,CAACC,UAAD,EAAap6D,MAAb,CAAvB;;AACA,cAAIm6D,QAAJ,EAAc;AACZ,mBAAO;AAAEvtD,kBAAI,EAAEutD,QAAQ,CAACvtD,IAAT,EAAR;AAAyBE,mBAAK,EAAEqtD,QAAQ,CAACrtD,KAAT,KAAmB,CAAnD;AAAsDE,iBAAG,EAAEmtD,QAAQ,CAACl1E,IAAT;AAA3D,aAAP;AACD;;AACD,iBAAO,IAAP;AACD;;;oDAE2Bo1E,U,EAAoBr6D,M,EAAc;AAC5D,cAAMm6D,QAAQ,GAAG,4CAAM,CAACE,UAAD,EAAar6D,MAAb,CAAvB;;AACA,cAAIm6D,QAAJ,EAAc;AACZ,mBAAO;AAAErkE,kBAAI,EAAEqkE,QAAQ,CAACrkE,IAAT,EAAR;AAAyBC,oBAAM,EAAEokE,QAAQ,CAACpkE,MAAT,EAAjC;AAAoDC,oBAAM,EAAEmkE,QAAQ,CAACnkE,MAAT;AAA5D,aAAP;AACD;;AACD,iBAAO,IAAP;AACD;;;uDAE8B/Q,I,EAAqB+a,M,EAAc;AAChE,iBAAO,4CAAM,CAAC;AAAE4M,gBAAI,EAAE3nB,IAAI,CAAC2nB,IAAb;AAAmBE,iBAAK,EAAE7nB,IAAI,CAAC6nB,KAAL,GAAa,CAAvC;AAA0CE,eAAG,EAAE/nB,IAAI,CAAC+nB;AAApD,WAAD,CAAN,CAAkEhN,MAAlE,CAAyEA,MAAzE,CAAP;AACD;;;uDAE8B4U,I,EAAqB5U,M,EAAc;AAChE,iBAAO,4CAAM,CAAC;AAAElK,gBAAI,EAAE8e,IAAI,CAAC9e,IAAb;AAAmBC,kBAAM,EAAE6e,IAAI,CAAC7e,MAAhC;AAAwCC,kBAAM,EAAE4e,IAAI,CAAC5e;AAArD,WAAD,CAAN,CAAsEgK,MAAtE,CAA6EA,MAA7E,CAAP;AACD;;;yCAEgB6U,c,EAAsB;AACrC,iBAAO,4CAAM,GAAG0W,IAAT,CAAc,4CAAM,CAAC1W,cAAD,CAApB,KAAyC,CAAhD;AACD;;;iCAEQggD,K,EAAevpC,G,EAAatrB,M,EAAe;AAClD,iBAAO,4CAAM,CAAC60D,KAAD,EAAQ70D,MAAR,CAAN,CAAsB9I,QAAtB,CAA+B,4CAAM,CAACo0B,GAAD,EAAMtrB,MAAN,CAArC,CAAP;AACD;;;mDAE0B6U,c,EAAwBgW,I,EAAU;AAC3D,iBAAO,4CAAM,CAAChW,cAAD,CAAN,CAAuB0W,IAAvB,CAA4B,4CAAM,EAAlC,EAAsCV,IAAtC,CAAP;AACD;;;iDAEwBhW,c,EAAwBgW,I,EAAU;AACzD,iBAAO,4CAAM,GAAGU,IAAT,CAAc,4CAAM,CAAC1W,cAAD,CAApB,EAAsCgW,IAAtC,CAAP;AACD;;;0CAEiBhW,c,EAAwB7U,M,EAAgBjD,Q,EAAiB;AACzE,cAAI,KAAKu8D,iBAAL,CAAuBt5D,MAAvB,CAAJ,EAAoC;AAClCA,kBAAM,GAAG,KAAKs5D,iBAAL,CAAuBt5D,MAAvB,CAAT;AACD;;AACD,cAAIjD,QAAJ,EAAc;AACZ,mBAAO,4CAAM,CAAC8X,cAAD,EAAiB9X,QAAjB,CAAN,CAAiCiD,MAAjC,CAAwCA,MAAxC,CAAP;AACD;;AACD,iBAAO,4CAAM,CAAC6U,cAAD,CAAN,CAAuB7U,MAAvB,CAA8BA,MAA9B,CAAP;AACD;;;;;;;uBAhHUo5D,mB,EAAmB,yG;AAAA,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;;sEAEDA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACVrzF,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;;;;;;;;;ACVhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASau0F,e;AACX,+BAAoB30F,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAAoB;;;;2CAQrBnC,I,EAAS;AAC1B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,qBAA+C3xF,IAA/C,CAAP;AACD;;;;;;;uBAXU82F,e,EAAe,uH;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBAFd;;;;sEAEDA,e,EAAe;cAH3B,wDAG2B;eAHhB;AACVv0F,oBAAU,EAAE;AADF,S;AAGgB,Q;;;;;;;;;;;;;;;;;;;;;;ACT5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaw0F,mB;AACX,mCAAoB13F,KAApB,EAA4C;AAAA;;AAAxB,aAAAA,KAAA,GAAAA,KAAA;AAA0B;;;;uCAE/BsN,Q,EAAezD,G,EAAc7C,K,EAAa;AACvD,cAAI6C,GAAJ,EAAS;AACP,gBAAIyD,QAAQ,CAACzD,GAAD,CAAR,KAAkB7C,KAAtB,EAA6B;AAC3BsG,sBAAQ,CAACzD,GAAD,CAAR,GAAgB7C,KAAhB;AACA,mBAAKhH,KAAL,CAAWQ,QAAX,CAAoB,IAAI,uDAAJ,CAAmB8M,QAAnB,CAApB;AACD;AACF,WALD,MAKO;AACL,iBAAKtN,KAAL,CAAWQ,QAAX,CAAoB,IAAI,uDAAJ,CAAmB8M,QAAnB,CAApB;AACD;AACF;;;;;;;uBAZUoqF,mB,EAAmB,yG;AAAA,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;;sEAEDA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACVx0F,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;;;;;;;;;ACThC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcay0F,W;AACX,2BAAoB70F,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAAoB;;;;oCAE5BwqB,O,EAOX;AACCA,iBAAO,CAACtgB,KAAR,GAAgBsgB,OAAO,CAACtgB,KAAR,GAAgBsgB,OAAO,CAACtgB,KAAxB,GAAgC,EAAhD;;AACA,cAAIsgB,OAAO,CAACxgB,UAAR,IAAsBwgB,OAAO,CAACtnB,MAAR,KAAmB,kEAAekU,MAA5D,EAAoE;AAClE,mBAAO,KAAK09E,cAAL,CAAoBtqE,OAApB,CAAP;AACD;;AACD,cAAIzJ,GAAG,aAAM,qDAAN,oCAAsCyJ,OAAO,CAACtgB,KAA9C,qBAA8DsgB,OAAO,CAACrgB,MAAtE,CAAP;;AACA,cAAI,CAACqgB,OAAO,CAACtnB,MAAb,EAAqB;AACnBsnB,mBAAO,CAACtnB,MAAR,GAAiB,kEAAeub,KAAhC;AACD;;AACD,cAAI+L,OAAO,CAACtnB,MAAR,KAAmB,kEAAe6kF,OAAtC,EAA+C;AAC7ChnE,eAAG,aAAMA,GAAN,kBAAH;AACD,WAFD,MAEO;AACLA,eAAG,aAAMA,GAAN,qBAAoByJ,OAAO,CAACtnB,MAA5B,CAAH;AACD;;AACD,cAAIsnB,OAAO,CAAC/V,IAAR,KAAiB,KAAjB,IAA0B+V,OAAO,CAAC/V,IAAR,KAAiB,IAA/C,EAAqD;AACnDsM,eAAG,aAAMA,GAAN,mBAAkByJ,OAAO,CAAC/V,IAA1B,CAAH;AACD;;AACD,cAAI+V,OAAO,CAAC2vB,OAAZ,EAAqB;AACnBp5B,eAAG,aAAMA,GAAN,sBAAqByJ,OAAO,CAAC2vB,OAA7B,CAAH;AACD;;AACD,iBAAO,KAAKn6C,IAAL,CAAUoE,GAAV,CAAsB2c,GAAtB,CAAP;AACD;;;uCAEcyJ,O,EAOd;AACC,cAAMzJ,GAAG,aAAM,qDAAN,gCAAkCyJ,OAAO,CAACxgB,UAA1C,oBAA8DwgB,OAAO,CAACtgB,KAAtE,qBAAsFsgB,OAAO,CAACrgB,MAA9F,CAAT;AACA,iBAAO,KAAKnK,IAAL,CAAUoE,GAAV,CAAsB2c,GAAtB,CAAP;AACD;;;mCAEUyJ,O,EAA8C;AACvD,cAAMzJ,GAAG,aAAM,qDAAN,qCAAuCyJ,OAAO,CAAC/P,SAA/C,qBAAmE+P,OAAO,CAACtnB,MAA3E,CAAT;AACA,iBAAO,KAAKlD,IAAL,CAAUoE,GAAV,CAAoB2c,GAApB,EAAyB7iB,IAAzB,CACL,2DAAI,UAACL,IAAD,EAAe;AACjB,mBAAOA,IAAI,CAAC,SAAD,CAAJ,GAAkBA,IAAI,CAAC,SAAD,CAAJ,CAAgB,CAAhB,CAAlB,GAAuC,IAA9C;AACD,WAFD,CADK,CAAP;AAKD;;;8CAEkB;AACjB,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAuB,qDAAvB,oBAAP;AACD;;;sDAE0B;AACzB,iBAAO,KAAKpE,IAAL,CAAUoE,GAAV,WAAuB,qDAAvB,wCAAP;AACD;;;uCAEkC;AAAA,cAAtB8F,KAAsB,uEAAd,EAAc;AAAA,cAAVC,MAAU,uEAAD,CAAC;AACjC,cAAM4W,GAAG,aAAM,qDAAN,qCAAuC7W,KAAvC,qBAAuDC,MAAvD,CAAT;AACA,iBAAO,KAAKnK,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwB7iB,IAAxB,CACL,2DAAI,UAAAL,IAAI,EAAI;AACV,gBAAMk3F,OAAO,GAAGl3F,IAAI,CAACg7E,OAAL,CAAar9E,GAAb,CAAiB,UAAC6L,OAAD,EAAkB;AACjDA,qBAAO,CAAC3C,aAAR,GAAwB2C,OAAO,CAACqmF,cAAhC;AACA,qBAAOrmF,OAAP;AACD,aAHe,CAAhB;AAIA,mBAAO0tF,OAAP;AACD,WAND,CADK,CAAP;AASD;;;2CAEkB9jF,M,EAAqB;AACtC,cAAM1O,IAAI,GAAG;AAAE0O,kBAAM,EAANA;AAAF,WAAb;AACA,iBAAO,KAAKjR,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,mBAA6CjtF,IAA7C,CAAP;AACD;;;yCAEgBi7E,I,EAAc5J,M,EAAc;AAC3C,cAAM7yD,GAAG,aAAM,qDAAN,mCAAqCy8D,IAArC,cAA6C5J,MAA7C,MAAT;AACA,iBAAO,KAAK5zE,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,CAAP;AACD;;;6CAEoBy8D,I,EAAc5J,M,EAAc;AAC/C,cAAM7yD,GAAG,aAAM,qDAAN,mCAAqCy8D,IAArC,cAA6C5J,MAA7C,WAAT;AACA,iBAAO,KAAK5zE,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,CAAP;AACD;;;qCAEY7d,M,EAAc;AACzB,cAAIA,MAAM,CAACvH,EAAX,EAAe;AACb,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,kCAAsD9xF,MAAM,CAACvH,EAA7D,QAAoEuH,MAApE,CAAP;AACD;;AACD,iBAAO,KAAKlD,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,4BAAsDtsF,MAAtD,CAAP;AACD;;;2CAEkBrF,I,EAAW;AAC5B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD3xF,IAArD,CAAP;AACD;;;mCAEUA,I,EAAS;AAClB,cAAIkjB,GAAG,aAAM,qDAAN,qBAAP;;AACA,cAAIljB,IAAI,CAAClC,EAAT,EAAa;AACXolB,eAAG,aAAMA,GAAN,SAAYljB,IAAI,CAAClC,EAAjB,MAAH;AACA,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,CAAqBj0E,GAArB,EAA0BljB,IAA1B,CAAP;AACD;;AACD,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBljB,IAAzB,CAAP;AACD;;;oCAEW2/E,I,EAAc5J,M,EAAgB/1E,I,EAAS;AACjD,cAAMkjB,GAAG,aAAM,qDAAN,mCAAqCy8D,IAArC,cAA6C5J,MAA7C,YAAT;AACA,iBAAO,KAAK5zE,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBljB,IAAzB,CAAP;AACD;;;mCAEU2d,G,EAAay5E,U,EAAqB/xF,M,EAAc;AACzD,cAAIsY,GAAG,KAAK,KAAZ,EAAmB;AACjB,mBAAO,KAAKxb,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyD9xF,MAAzD,GAAmE;AAAEuR,kBAAI,EAAEwgF;AAAR,aAAnE,CAAP;AACD;;AACD,iBAAO,KAAKj1F,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyDx5E,GAAzD,GAAgE;AAAE/G,gBAAI,EAAEwgF;AAAR,WAAhE,CAAP;AACD;;;sCAEaz5E,G,EAAa05E,a,EAAwBhyF,M,EAAgBqY,Y,EAAqB;AACtF,cAAIC,GAAG,KAAK,KAAZ,EAAmB;AACjB,mBAAO,KAAKxb,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyD9xF,MAAzD,GAAmE;AACxE6W,qBAAO,EAAEm7E,aAD+D;AAExEC,2BAAa,EAAE55E;AAFyD,aAAnE,CAAP;AAID;;AACD,iBAAO,KAAKvb,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyDx5E,GAAzD,GAAgE;AACrEzB,mBAAO,EAAEm7E,aAD4D;AAErEC,yBAAa,EAAE55E;AAFsD,WAAhE,CAAP;AAID;;;iCAGCC,G,EACAtY,M,EACAib,Y,EAEiB;AAAA,cADjB5C,YACiB,uEADF,IACE;AAAA,cAAjBqD,SAAiB,uEAAL,KAAK;;AAEjB,cAAIpD,GAAG,KAAK,KAAZ,EAAmB;AACjB,mBAAO,KAAKxb,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyD72E,YAAzD,GAAyE;AAC9Ejb,oBAAM,EAANA,MAD8E;AAE9EiyF,2BAAa,EAAE55E,YAF+D;AAG9E65E,wBAAU,EAAEx2E;AAHkE,aAAzE,CAAP;AAKD;;AACD,iBAAO,KAAK5e,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,qCAAyDx5E,GAAzD,GAAgE;AACrEtY,kBAAM,EAANA,MADqE;AAErEiyF,yBAAa,EAAE55E,YAFsD;AAGrE65E,sBAAU,EAAEx2E;AAHyD,WAAhE,CAAP;AAKD;;;oCAEWpD,G,EAAatY,M,EAAmC;AAAA,cAAnB+a,WAAmB,uEAAL,KAAK;;AAC1D,cAAIzC,GAAG,KAAK,KAAZ,EAAmB;AACjB,mBAAO,KAAKxb,IAAL,qBAAyB,qDAAzB,qCAA0DkD,MAA1D,0BAAgF+a,WAAW,GAAG,CAAH,GAAO,CAAlG,EAAP;AACD;;AACD,iBAAO,KAAKje,IAAL,qBAAyB,qDAAzB,qCAA0Dwb,GAA1D,0BAA6EyC,WAAW,GAAG,CAAH,GAAO,CAA/F,EAAP;AACD;;;yCAEgBtiB,E,EAAU;AACzB,iBAAO,KAAKqE,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,mCAAsD7zF,EAAtD,QAA6D,EAA7D,CAAP;AACD;;;qCAEYA,E,EAAU;AACrB,iBAAO,KAAKqE,IAAL,qBAAyB,qDAAzB,kCAAuDrE,EAAvD,OAAP;AACD;;;mCAEUif,U,EAAsB;AAC/B,cAAMy6E,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,kBAAQ,CAAC1qC,MAAT,CAAgB,UAAhB,EAA4B/vC,UAAU,CAACnb,QAAvC;AACA41F,kBAAQ,CAAC1qC,MAAT,CAAgB,SAAhB,EAA2B/vC,UAAU,CAAC5T,OAAX,CAAmB0U,QAAnB,EAA3B;AACA25E,kBAAQ,CAAC1qC,MAAT,CAAgB,WAAhB,EAA6B/vC,UAAU,CAACytB,SAAX,CAAqB3sB,QAArB,EAA7B;AACA25E,kBAAQ,CAAC1qC,MAAT,CAAgB,cAAhB,EAAgC/vC,UAAU,CAACtF,YAAX,CAAwBoG,QAAxB,EAAhC;AACA25E,kBAAQ,CAAC1qC,MAAT,CAAgB,WAAhB,EAA6B/vC,UAAU,CAACnb,QAAX,CAAoB8I,IAApB,CAAyBmT,QAAzB,EAA7B;AACA25E,kBAAQ,CAAC1qC,MAAT,CAAgB,MAAhB,EAAwB/vC,UAAU,CAAClZ,IAAX,CAAgBga,QAAhB,EAAxB;AACA25E,kBAAQ,CAAC1qC,MAAT,CAAgB,aAAhB,EAA+B/vC,UAAU,CAACuxB,WAAX,CAAuBzwB,QAAvB,EAA/B;;AACA,cAAId,UAAU,CAACs3E,WAAf,EAA4B;AAC1BmD,oBAAQ,CAAC1qC,MAAT,CAAgB,aAAhB,EAA+B/vC,UAAU,CAACs3E,WAAX,CAAuBx2E,QAAvB,EAA/B;AACD;;AACD,cAAIi8D,OAAJ;;AACA,cAAI/8D,UAAU,CAACjf,EAAf,EAAmB;AACjBg8E,mBAAO,GAAG,IAAI,gEAAJ,CAAgB,OAAhB,YAA4B,qDAA5B,uCAA+D/8D,UAAU,CAACjf,EAA1E,QAAiF05F,QAAjF,EAA2F;AACnGE,4BAAc,EAAE;AADmF,aAA3F,CAAV;AAGD,WAJD,MAIO;AACL5d,mBAAO,GAAG,IAAI,gEAAJ,CAAgB,MAAhB,YAA2B,qDAA3B,iCAA+D0d,QAA/D,EAAyE;AACjFE,4BAAc,EAAE;AADiE,aAAzE,CAAV;AAGD;;AAED,iBAAO,KAAKv1F,IAAL,CAAU23E,OAAV,CAAkBA,OAAlB,CAAP;AACD;;;yCAEgB/8D,U,EAAsB;AACrC,iBAAO,KAAK5a,IAAL,qBAAyB,qDAAzB,gCAAqD4a,UAAU,CAACjf,EAAhE,OAAP;AACD;;;sCAEaif,U,EAAsB;AAClC,iBAAO,KAAK5a,IAAL,CAAUoE,GAAV,WAAiB,qDAAjB,gCAA6CwW,UAAU,CAACjf,EAAxD,OAAP;AACD;;;mDAE0Bif,U,EAAwB4iE,I,EAAcgY,Y,EAAoB;AACnF,iBAAO,KAAKx1F,IAAL,CAAUoE,GAAV,WAAiB,qDAAjB,mCAAgDo5E,IAAhD,cAAwDgY,YAAxD,yBAAmF56E,UAAU,CAACjf,EAA9F,OAAP;AACD;;;8CAEqBkC,I,EAAe;AACnC,iBAAO,KAAKmC,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,8BAAkDn3F,IAAI,CAAClC,EAAvD,QAA8DkC,IAA9D,CAAP;AACD;;;sCAEaA,I,EAAW;AACvB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,wBAAkD3xF,IAAlD,CAAP;AACD;;;2CAEkBA,I,EAAW;AAC5B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,4BAAsD3xF,IAAtD,CAAP;AACD;;;sCAEalC,E,EAAY;AACxB,iBAAO,KAAKqE,IAAL,qBAAyB,qDAAzB,8BAAmDrE,EAAnD,OAAP;AACD;;;oCAEWkC,I,EAAW;AACrB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD3xF,IAArD,CAAP;AACD;;;2CAEkB;AACjB,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAiB,qDAAjB,0BAAP;AACD;;;uCAEcvG,I,EAAkB;AAC/B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAkB,qDAAlB,2BAAgD3xF,IAAhD,CAAP;AACD;;;0CAEiBA,I,EAAkB;AAClC,cAAMquB,OAAO,GAAG;AACd/R,mBAAO,EAAE,IAAI,gEAAJ,CAAgB;AACvB,8BAAgB;AADO,aAAhB,CADK;AAId5X,gBAAI,EAAE;AAAEoF,sBAAQ,EAAE9J,IAAI,CAAC8J;AAAjB;AAJQ,WAAhB;AAMA,iBAAO,KAAK3H,IAAL,qBAAyB,qDAAzB,iCAAsDnC,IAAI,CAAClC,EAA3D,GAAiEuwB,OAAjE,CAAP;AACD;;;8CAEqBruB,I,EAAkB;AACtC,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,uCAAiE;AACtE9kE,sBAAU,EAAE7sB,IAAI,CAACwJ,OADqD;AAEtEouF,yBAAa,EAAE53F,IAAI,CAAClC;AAFkD,WAAjE,CAAP;AAID;;;sCAE2D;AAAA,cAArC+5F,SAAqC,uEAAzB,WAAyB;AAAA,cAAZhvF,MAAY;AAC1D,iBAAO,UAACxG,KAAD,EAA+B;AAEpC,6EAAwBA,KAAK,CAACC,aAAN,IAAuBD,KAA/C;;AAGA,mBAAO,gDAAGwG,MAAH,CAAP;AACD,WAND;AAOD;;;;;;;uBAtQUmuF,W,EAAW,uH;AAAA,K;;;aAAXA,W;AAAW,eAAXA,WAAW,K;AAAA,kBAFV;;;;sEAEDA,W,EAAW;cAHvB,wDAGuB;eAHZ;AACVz0F,oBAAU,EAAE;AADF,S;AAGY,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCLXu1F,qB;AACX,qCAAoB34F,aAApB,EAAkD;AAAA;;AAA9B,aAAAA,aAAA,GAAAA,aAAA;AAAgC;;;;oCAWlDwmC,Q,EAKoC;AAAA,cAJpC9oB,WAIoC,uEAJR,EAIQ;AAAA,cAHpCk7E,MAGoC;AAAA,cAFpCC,qBAEoC,uEAFZ,KAEY;AAAA,cADpCC,YACoC,uEADrB,KACqB;AAAA,cAApC9wD,iBAAoC;;;;;;;yBAEhC8wD,Y;;;;;AACI9uF,2B,GAAU,oDAAoB;AAClC+uF,iCAAW,EAAE,4DAAiBC,eADI;AAElCzzF,0BAAI,EAAE;AAF4B,qBAApB,C;AAKVgT,2B,GAAUqgF,MAAM,GAClBC,qBAAqB,GACnBhmF,IAAI,CAAComF,QAAQ,CAACniB,kBAAkB,CAACtwC,QAAQ,CAACjuB,OAAV,CAAnB,CAAT,CADe,GAEnBiuB,QAAQ,CAACjuB,OAHO,GAIlB,CAACsgF,qBAAqB,GAClBhmF,IAAI,CAAComF,QAAQ,CAACniB,kBAAkB,CAACtwC,QAAQ,CAAC5tB,aAAV,CAAnB,CAAT,CADc,GAElB4tB,QAAQ,CAAC5tB,aAFb,KAE+B,E;AAC7BsgF,iC,GAAgB,oDAAoB;AACxCH,iCAAW,EAAEH,MAAM,GAAG,4DAAiBO,sBAApB,GAA6C,4DAAiBC,uBADzC;AAExC7zF,0BAAI,EAAEgT;AAFkC,qBAApB,C;;AAItB,wBAAIsgF,qBAAJ,EAA2B;AACzBK,mCAAa,CAAC37E,MAAd,CAAqB,2BAArB,EAAkD,QAAlD;AACD;;;AAC2B,2BAAM,KAAK87E,kBAAL,CAAwB37E,WAAxB,CAAN;;;AAAtB47E,uC;AACNtvF,2BAAO,CAACzE,IAAR,IAAgB2zF,aAAhB,4BAAkCI,mBAAlC;qDACOtvF,OAAO,CAAC0U,QAAR,E;;;;;;;;;AAEV;;;2CAEgChB,W,EAA8B;;;;;;;;AACvD47E,uC,GAA6B,E;2DAEV57E,W;;;;;;;;;;;AAAdE,8B;;AAEa,2BAAM,KAAK27E,aAAL,CAAmB37E,UAAU,CAACU,iBAA9B,CAAN;;;AAAhBk7E,iC;AACAC,qC,GAAoB,oDAAoB;AAC5CV,iCAAW,YAAK,4DAAiBW,wBAAtB,sBAAyD97E,UAAU,CAAClZ,IAApE,OADiC;AAE5Ci1F,6CAAuB,EAAE,QAFmB;AAG5Cp0F,0BAAI,EAAEi0F;AAHsC,qBAApB,C;AAK1BC,qCAAiB,CAACl8E,MAAlB,CAAyB,qBAAzB,mCAAyEK,UAAU,CAAClZ,IAApF;AACA40F,uCAAmB,CAAC97E,IAApB,CAAyBi8E,iBAAzB;;;;;;;;;;;;;;;;;;;;;;;;sDAEKH,mB;;;;;;;;;AACR;;;sCAEqBrwF,I,EAAU;AAAA;;AAC9B,iBAAO,IAAIrJ,OAAJ,CAAY,UAACP,OAAD,EAAUquD,MAAV,EAAqB;AACtC,gBAAMtkD,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,kBAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,UAACC,KAAD,EAAgB;AAC9ClK,qBAAO,CAAC,QAAI,CAACW,aAAL,CAAmB45F,mBAAnB,CAAuCrwF,KAAK,CAACE,MAAN,CAAaC,MAApD,CAAD,CAAP;AACD,aAFD;AAGAN,kBAAM,CAACE,gBAAP,CAAwB,OAAxB,EAAiCokD,MAAjC;AACAtkD,kBAAM,CAACywF,iBAAP,CAAyB5wF,IAAzB;AACD,WAPM,CAAP;AAQD;;;;;;;uBAvEU0vF,qB,EAAqB,qH;AAAA,K;;;aAArBA,qB;AAAqB,eAArBA,qBAAqB;;;;sEAArBA,qB,EAAqB;cADjC;AACiC,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCQrBmB,qB;AAGX,qCACUC,cADV,EAEU75F,KAFV,EAGUuV,WAHV,EAGkC;AAAA;;AAFxB,aAAAskF,cAAA,GAAAA,cAAA;AACA,aAAA75F,KAAA,GAAAA,KAAA;AACA,aAAAuV,WAAA,GAAAA,WAAA;AACN;;;;uCAcWf,I,EAA0D;AAAA;;AAAA,cAA9Co6E,uBAA8C,uEAApB,KAAoB;AAAA,cAAbnkF,QAAa,uEAAF,EAAE;AACvE,eAAKqvF,qBAAL,GAA6BtlF,IAA7B;AACA,cAAMoE,OAAO,GAAG,IAAI,4CAAJ,EAAhB;;AACA,cAAIpE,IAAI,CAACpB,eAAL,KAAyB,6DAAkBC,QAA/C,EAAyD;AACvD,gBAAImB,IAAI,CAAC6D,OAAL,KAAiB,EAAjB,IAAuB7D,IAAI,CAAC6D,OAAL,KAAiB,mEAA5C,EAAsE;AACpE,kBAAI7D,IAAI,CAACgJ,WAAL,CAAiB5b,MAAjB,GAA0B,CAA9B,EAAiC;AAE/B,oBAAMm4F,eAAe,GAAGvlF,IAAI,CAACgJ,WAAL,CAAiB,CAAjB,CAAxB;AACA,qBAAKjI,WAAL,CAAiBqI,aAAjB,CAA+Bm8E,eAA/B,EAAgDr5F,SAAhD,CACE,UAAAmd,QAAQ,EAAI;AACV,0BAAI,CAACm8E,wBAAL,CACEphF,OADF,EACS,gCACFpE,IADE,GACE;AAAE6D,2BAAO,EAAE+T,IAAI,CAACvO,QAAQ,CAACld,IAAV,CAAf;AAAgC+X,iCAAa,EAAE;AAA/C,mBADF,CADT,EAGEk2E,uBAHF;AAKD,iBAPH,EAQE,UAAA1wE,aAAa,EAAI;AACf,0BAAI,CAACle,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,sBAAE,EAAE+V,IAAI,CAAC/V,EADmB;AAE5Bi1C,mCAAe,EAAE,KAFW;AAG5Bx7B,oCAAgB,EAAE,EAHU;AAI5B02E,2CAAuB,EAAE,KAJG;AAK5BvmF,gCAAY,EAAE;AALc,mBAA9B,CADF;;AASAuQ,yBAAO,CAAC5V,KAAR,CAAc,CAAd;AACD,iBAnBH;AAqBD,eAxBD,MAwBO;AAEL,qBAAKhD,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,oBAAE,EAAE+V,IAAI,CAAC/V,EADmB;AAE5Bi1C,iCAAe,EAAE,KAFW;AAG5Bx7B,kCAAgB,EAAE,EAHU;AAI5B02E,yCAAuB,EAAE,KAJG;AAK5BvmF,8BAAY,EAAE;AALc,iBAA9B,CADF;AASAuQ,uBAAO,CAAC5V,KAAR,CAAc,CAAd;AACD;AACF,aAtCD,MAsCO;AACL,mBAAKg3F,wBAAL,CAA8BphF,OAA9B,EAAuCpE,IAAvC,EAA6Co6E,uBAA7C;AACD;AACF;;AACD,iBAAOh2E,OAAO,CAAC06E,YAAR,EAAP;AACD;;;mCAOgBxpF,O,EAAe;;;;;;;AACxBmwF,8B,GAAa,kD;AACbC,0B,GAAS,IAAID,UAAJ,E;;AACD,2BAAMC,MAAM,CAAC/8E,KAAP,CAAarT,OAAb,CAAN;;;AAAR0F,yB;sDACCA,K;;;;;;;;;AACR;;;iDAEwBoJ,O,EAAuBpE,I,EAAYo6E,uB,EAAkC;AAAA;;AAC5F,eAAKiL,cAAL,CACGthF,OADH,CACW/D,IAAI,CAACrK,OADhB,EACyBqK,IAAI,CAAC/V,EAD9B,EACkC,IAAI,wDAAJ,CAAkB+V,IAAlB,CADlC,EAC2Do6E,uBAD3D,EACoF,IADpF,EAEGluF,SAFH,CAGI,UAACy5F,aAAD,EAAwB;AACtB,oBAAI,CAACC,UAAL,CAAgBD,aAAa,CAACjiF,gBAAd,CAA+BG,OAA/C,EACG1Y,IADH,CACQ,UAAA06F,aAAa,EAAI;;;AACrB,kBAAMniF,gBAAgB,GAAkB;AACtCG,uBAAO,EAAEgiF,aAAa,CAACpvD,IAAd,GAAqBovD,aAAa,CAACpvD,IAAnC,GAA0CovD,aAAa,CAACj+E,IAD3B;AAEtC1D,6BAAa,EAAE2hF,aAAa,CAACj+E,IAFS;AAGtCtD,+BAAe,EAAE,EAHqB;AAItCF,uBAAO,EAAEuhF,aAAa,CAACjiF,gBAAd,CAA+BU;AAJF,eAAxC;;AAMA,sBAAI,CAAC5Y,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,kBAAE,EAAE07F,aAAa,CAACG,QADU;AAE5B5mD,+BAAe,EAAE,KAFW;AAG5Bx7B,gCAAgB,EAAhBA,gBAH4B;AAI5B02E,uCAAuB,EAAEuL,aAAa,CAACvL,uBAJX;AAK5BvmF,4BAAY,EAAE;AALc,eAA9B,CADF;;AASA,kBAAI,OAAAgyF,aAAa,CAAC78E,WAAd,MAAyB,IAAzB,IAAyB,aAAzB,GAAyB,MAAzB,GAAyB,GAAE5b,MAA3B,IAAoC,CAAxC,EAA2C;AACzC,oBAAI4b,WAAW,GAAiB,EAAhC;AACA68E,6BAAa,CAAC78E,WAAd,CAA0B3N,OAA1B,CAAkC,UAAC0qF,gBAAD,EAA2B;AAC3D,sBAAM78E,UAAU,GAAe;AAC7BsnB,wBAAI,EAAE,EADuB;AAE7B2D,2BAAO,EAAE,CAFoB;AAG7BpmC,4BAAQ,EAAEi4F,GAAG,CAACC,eAAJ,CACR,IAAIC,IAAJ,CAAS,CAACH,gBAAgB,CAACliF,OAAlB,CAAT,EAAqC;AAAEhN,0BAAI,EAAEkvF,gBAAgB,CAACI;AAAzB,qBAArC,CADQ,CAHmB;AAM7Br1D,8BAAU,EAAEi1D,gBAAgB,CAACxnD,SANA;AAO7B36B,gCAAY,EAAE,KAPe;AAQ7B5T,wBAAI,EAAE+1F,gBAAgB,CAACK,QAAjB,IAA6B,YARN;AAS7BzvD,6BAAS,EAAE,KATkB;AAU7BvkC,8BAAU,EAAE,KAViB;AAW7BkD,2BAAO,EAAEqwF,aAAa,CAACG;AAXM,mBAA/B;AAaA98E,6BAAW,gCAAOA,WAAP,IAAoBE,UAApB,EAAX;AACD,iBAfD;;AAgBA,wBAAI,CAAC1d,KAAL,CAAWQ,QAAX,CAAoB,IAAI,iEAAJ,CAA6B;AAAEgd,6BAAW,EAAXA,WAAF;AAAesxE,2BAAS,EAAEqL,aAAa,CAACG;AAAxC,iBAA7B,CAApB;AACD,eAnBD,MAmBO;AACL,wBAAI,CAACt6F,KAAL,CAAWQ,QAAX,CACE,IAAI,iEAAJ,CAA6B;AAAEgd,6BAAW,EAAE,EAAf;AAAmBsxE,2BAAS,EAAEqL,aAAa,CAACG;AAA5C,iBAA7B,CADF;AAGD;;AACD1hF,qBAAO,CAAChQ,IAAR;AACAgQ,qBAAO,CAACy1C,QAAR;AACD,aA3CH,WA4CS,UAAArrD,KAAK,EAAI;AACd,sBAAI,CAAChD,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,kBAAE,EAAEuE,KAAK,CAACs3F,QADkB;AAE5B5mD,+BAAe,EAAE,KAFW;AAG5Bx7B,gCAAgB,EAAElV,KAAK,CAACkV,gBAHI;AAI5B02E,uCAAuB,EAAE5rF,KAAK,CAAC4rF,uBAJH;AAK5BvmF,4BAAY,EAAE;AALc,eAA9B,CADF;;AASAuQ,qBAAO,CAAC5V,KAAR,CAAcA,KAAd;AACD,aAvDH;AAwDD,WA5DL,EA6DI,UAAAA,KAAK,EAAI;AACP,oBAAI,CAAChD,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,gBAAE,EAAEuE,KAAK,CAACs3F,QADkB;AAE5B5mD,6BAAe,EAAE,KAFW;AAG5Bx7B,8BAAgB,EAAElV,KAAK,CAACkV,gBAHI;AAI5B02E,qCAAuB,EAAE5rF,KAAK,CAAC4rF,uBAJH;AAK5BvmF,0BAAY,EAAE;AALc,aAA9B,CADF;;AASAuQ,mBAAO,CAAC5V,KAAR,CAAcA,KAAd;AACD,WAxEL;AA0ED;;;;;;;uBA7JU42F,qB,EAAqB,uH,EAAA,yG,EAAA,iH;AAAA,K;;;aAArBA,qB;AAAqB,eAArBA,qBAAqB;;;;sEAArBA,qB,EAAqB;cADjC;AACiC,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaiB,mB;AACX,mCAAoBC,QAApB,EAAmD96F,KAAnD,EAA2E;AAAA;;AAAvD,aAAA86F,QAAA,GAAAA,QAAA;AAA+B,aAAA96F,KAAA,GAAAA,KAAA;AAA0B;;;;qCAEhE8J,O,EAAmF;AAAA,cAAlE8V,MAAkE,uEAAzD,OAAyD;AAAA,cAAhD1T,MAAgD,uEAApB;AAAEouB,oBAAQ,EAAE;AAAZ,WAAoB;AAC9F,eAAKwgE,QAAL,CAAcvsF,IAAd,CAAmBzE,OAAnB,EAA4B8V,MAA5B,EAAoC1T,MAApC;AACD;;;iCAEQohB,O,EAAc;AAAA;;AACrB,cAAIA,OAAO,CAACrM,YAAZ,EAA0B;AACxB,gBAAM85E,iBAAiB,GAAG,KAAKD,QAAL,CAAcvsF,IAAd,CAAmB+e,OAAO,CAACxjB,OAA3B,EAAoC,MAApC,EAA4C;AAAEwwB,sBAAQ,EAAE;AAAZ,aAA5C,CAA1B;AAEAygE,6BAAiB,CAACC,QAAlB,GAA6Bt6F,SAA7B,CAAuC,YAAM;AAC3C,sBAAI,CAACV,KAAL,CAAWQ,QAAX,CAAoB,IAAI,uDAAJ,CAAmB8sB,OAAnB,CAApB;AACD,aAFD;AAGD,WAND,MAMO;AACL,iBAAKuS,YAAL,CAAkBvS,OAAO,CAACxjB,OAA1B;AACD;AACF;;;;;;;uBAjBU+wF,mB,EAAmB,+H,EAAA,yG;AAAA,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;;sEAEDA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACV33F,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;;;;;;;;;;;ACThC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA4Ca+3F,c;AA0EX,8BAAoBj7F,KAApB,EAAoDmE,YAApD,EAAgF;AAAA;;AAAA;;AAA5D,aAAAnE,KAAA,GAAAA,KAAA;AAAgC,aAAAmE,YAAA,GAAAA,YAAA;AAb5C,aAAA+2F,QAAA,GAAgB,EAAhB;AAQA,aAAAC,0BAAA,GAAuE,IAAIvxE,GAAJ,EAAvE;AAMN,aAAKwxE,SAAL,GAAiB,IAAIC,MAAJ,CAAW,6BAAX,CAAjB;AACA,aAAKC,wBAAL;AAEA,aAAKt7F,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACoG,SAAV;AAAA,SADf,EAEGxH,SAFH,CAEa,UAAC+H,cAAD,EAAoC;AAC7C,cAAIA,cAAc,CAACP,SAAf,CAAyBtG,MAAzB,GAAkC,CAAtC,EAAyC;AACvC,oBAAI,CAACsG,SAAL,GAAiBO,cAAc,CAACP,SAAhC;AACA,oBAAI,CAACqzF,WAAL,GAAmB,QAAI,CAACA,WAAL,IAAoB,EAAvC;AACA,oBAAI,CAACtH,UAAL,GAAkB,QAAI,CAACA,UAAL,IAAmB,EAArC;AAHuC,gBAI/BprF,cAJ+B,GAIZJ,cAJY,CAI/BI,cAJ+B;AAKvCJ,0BAAc,CAACP,SAAf,CAAyB2H,OAAzB,CAAiC,UAAA1F,OAAO,EAAI;AAC1C,kBAAItB,cAAc,CAACc,GAAf,CAAmBQ,OAAO,CAAC1L,EAA3B,KAAkCoK,cAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,EAA+BmD,MAA/B,GAAwC,CAA9E,EAAiF;AAC/E,wBAAI,CAAC25F,WAAL,CAAiBpxF,OAAO,CAAC1L,EAAzB,IAA+BoK,cAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,EAA+BH,GAA/B,CAAmC,UAAAuL,GAAG,EAAI;AACvE,yBAAO;AACL+iB,+BAAW,EAAE/iB,GAAG,CAAC+iB,WADZ;AAELhZ,8BAAU,EAAE/J,GAAG,CAAC+J,UAFX;AAGL2uB,kCAAc,EAAE14B,GAAG,CAACpL;AAHf,mBAAP;AAKD,iBAN8B,CAA/B;AAOA,wBAAI,CAACw1F,UAAL,CAAgB9pF,OAAO,CAAC1L,EAAxB,IAA8BoK,cAAc,CAAC3B,GAAf,CAAmBiD,OAAO,CAAC1L,EAA3B,EAA+BH,GAA/B,CAAmC,UAAAuL,GAAG,EAAI;AACtE,yBAAO;AACL+I,8BAAU,EAAE/I,GAAG,CAAC+I,UADX;AAELgB,8BAAU,EAAE/J,GAAG,CAAC+J,UAFX;AAGL2uB,kCAAc,EAAE14B,GAAG,CAACpL;AAHf,mBAAP;AAKD,iBAN6B,CAA9B;AAOD;;AACD,kBAAI0L,OAAO,CAACg1E,UAAR,IAAsB,CAAC,QAAI,CAACqc,cAAhC,EAAgD;AAC9C,wBAAI,CAACA,cAAL,GAAsBrxF,OAAtB;AACD;AACF,aApBD;;AAqBA,gBAAI,QAAI,CAACsxF,qBAAL,IAA8B,CAAChzF,cAAc,CAACC,oBAA9C,IAAsE,QAAI,CAAC6yF,WAA/E,EAA4F;AAC1F,sBAAI,CAAC56D,qBAAL;AACD;AACF;;AACD,kBAAI,CAAC+6D,iBAAL,GAAyBjzF,cAAc,CAACsmF,oBAAxC;AACA,kBAAI,CAAC0M,qBAAL,GAA6BhzF,cAAc,CAACC,oBAA5C;AACD,SAnCH;AAqCA,aAAK1I,KAAL,CACG6B,MADH,CACU,UAACC,KAAD;AAAA,iBAAqBA,KAAK,CAACC,IAA3B;AAAA,SADV,EAEGrB,SAFH,CAEa,UAACsB,SAAD,EAA0B;AACnC,cAAI,QAAI,CAACC,eAAL,IAAwB,CAACD,SAAS,CAACC,eAAvC,EAAwD;AACtD,oBAAI,CAAC4+B,SAAL;AACD;;AACD,kBAAI,CAAC5+B,eAAL,GAAuBD,SAAS,CAACC,eAAjC;AACD,SAPH;AAQA,aAAKjC,KAAL,CACG6B,MADH,CACU,UAACC,KAAD;AAAA,iBAAqBA,KAAK,CAAC4E,IAA3B;AAAA,SADV,EAEGhG,SAFH,CAEa,UAACiG,SAAD,EAA0B;AACnC,kBAAI,CAACg1F,YAAL,GAAoBh1F,SAAS,CAAC2G,QAA9B;AACD,SAJH;AAKD;;;;8CAEqBsuF,Q,EAAgBnxF,Q,EAAmB;AACvD,cAAMoxF,OAAO,GAAGpxF,QAAQ,GAAGkI,IAAI,CAAClI,QAAD,CAAP,GAAoB,KAAKtG,YAAL,CAAkBU,UAAlB,EAA5C;;AACA,cAAI,CAACg3F,OAAL,EAAc;AACZ,iBAAK77F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,+CAAJ,EAApB;AACA;AACD;;AACD,eAAK+6F,WAAL,GAAmBK,QAAQ,IAAI,KAAKL,WAApC;AACA,eAAKv7F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,6DAAJ,CAAyB,IAAzB,CAApB;AACA,eAAK46F,SAAL,CAAeU,WAAf,CAA2B;AACzBn7D,iCAAqB,EAAE,IADE;AAEzB46D,uBAAW,EAAE,KAAKA,WAFO;AAGzBQ,oBAAQ,EAAE3vE,IAAI,CAACyvE,OAAD;AAHW,WAA3B;AAKD;;;gCAICv5D,S,EACAqG,O,EACArC,Q,EAEsD;AAAA,cADtD2tD,UACsD,uEADlC,EACkC;AAAA,cAAtD+H,4BAAsD,uEAAJ,IAAI;AAEtD,eAAKh8F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,kEAAJ,CAA8B;AAAEkzC,2BAAe,EAAE,IAAnB;AAAyBo1C,4BAAgB,EAAE,EAA3C;AAA+CngD,mBAAO,EAAPA;AAA/C,WAA9B,CAApB;AACA,cAAMszD,OAAO,GACXhI,UAAU,CAACryF,MAAX,GAAoB,CAApB,GACIqyF,UAAU,CAACtK,MAAX,CAAkB,KAAKsK,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,mBAAcA,GAAG,CAAC+I,UAAlB;AAAA,WAA/B,CAAlB,CADJ,GAEI,KAAKqhF,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,mBAAcA,GAAG,CAAC+I,UAAlB;AAAA,WAA/B,CAHN;AAIA,eAAKwoF,SAAL,CAAeU,WAAf,CAA2B;AACzBx1D,oBAAQ,EAARA,QADyB;AAEzB2tD,sBAAU,EAAEgI,OAFa;AAGzB/oD,mBAAO,EAAE,IAHgB;AAIzBonD,oBAAQ,EAAE3xD,OAJe;AAKzBqzD,wCAA4B,EAA5BA;AALyB,WAA3B;AAOD;;;uCAGC15D,S,EACAtb,M,EACAsf,Q,EAGiB;AAAA;;AAAA,cAFjBsoD,uBAEiB,uEAFS,KAET;AAAA,cADjBsN,SACiB;AAAA,cAAjBzmD,SAAiB,uEAAL,KAAK;;AAEjB,cAAI,KAAK0mD,oBAAT,EAA+B;AAC7B,gBAAI,CAAC71D,QAAQ,CAAC6wC,kBAAd,EAAkC;AAChC7wC,sBAAQ,CAAC1tB,OAAT,GAAmB,IAAnB;AACD;;AACD,iBAAK5Y,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5BouF,qCAAuB,EAAvBA,uBAD4B;AAE5BnwF,gBAAE,EAAEuoB,MAFwB;AAG5B0sB,6BAAe,EAAE,IAHW;AAI5Bx7B,8BAAgB,EAAE;AAJU,aAA9B,CADF;AAQA,iBAAKkjF,SAAL,CAAeU,WAAf,CAA2B;AACzBx5D,uBAAS,EAATA,SADyB;AAEzBgE,sBAAQ,EAARA,QAFyB;AAGzBsoD,qCAAuB,EAAvBA,uBAHyB;AAIzBr2E,qBAAO,EAAE,IAJgB;AAKzB+hF,sBAAQ,EAAEtzE,MALe;AAMzBk1E,uBAAS,EAATA,SANyB;AAOzBzmD,uBAAS,EAATA;AAPyB,aAA3B;AASD,WArBD,MAqBO;AACL50C,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACu7F,cAAL,CAAoB95D,SAApB,EAA+Btb,MAA/B,EAAuCsf,QAAvC,EAAiDsoD,uBAAjD,EAA0EsN,SAA1E,EAAqFzmD,SAArF;AACD,aAFS,EAEP,IAFO,CAAV;AAGD;AACF;;;gCAGCnT,S,EACAtb,M,EACAsf,Q,EAEiB;AAAA,cADjBsoD,uBACiB,uEADS,KACT;AAAA,cAAjBn5C,SAAiB,uEAAL,KAAK;AAEjB,cAAM78B,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwjF,cAAL,CAAoB95D,SAApB,EAA+Btb,MAA/B,EAAuCsf,QAAvC,EAAiDsoD,uBAAjD,EAA0EsN,SAA1E,EAAqFzmD,SAArF;AACA,iBAAO78B,OAAO,CAAC06E,YAAR,EAAP;AACD;;;uCAGc3kF,O,EAAuC;AAAA;;AAAA,cAArB0tF,YAAqB,uEAAN,IAAM;AACpD1tF,iBAAO,CAACyJ,YAAR,GAAuB,IAAvB;AACA,cAAMC,OAAO,GAAG6E,IAAI,CAACo/E,SAAL,CAAe3tF,OAAf,CAAhB;AACA,cAAM4tF,kBAAkB,GAAU,EAAlC;AACAr9F,gBAAM,CAACF,IAAP,CAAY,KAAKi1F,UAAjB,EAA6BpkF,OAA7B,CAAqC,UAAAyyB,SAAS,EAAI;AAChD,oBAAI,CAAC2xD,UAAL,CAAgB3xD,SAAhB,EAA2BzyB,OAA3B,CAAmC,UAAChG,GAAD,EAAc;AAC/C0yF,gCAAkB,CAACj/E,IAAnB,CAAwBzT,GAAG,CAAC+I,UAA5B;AACD,aAFD;AAGD,WAJD;AAKA,eAAKwoF,SAAL,CAAeU,WAAf,CAA2B;AACzBzjF,mBAAO,EAAPA,OADyB;AAEzBgkF,wBAAY,EAAZA,YAFyB;AAGzB7sF,iBAAK,EAAEb,OAAO,CAACa,KAHU;AAIzBykF,sBAAU,EAAEsI,kBAJa;AAKzBC,uBAAW,EAAE,IALY;AAMzB/9F,cAAE,EAAEkQ,OAAO,CAAClQ;AANa,WAA3B;AAQD;;;uCAEc4Z,O,EAAiB5Z,E,EAAY;AAAA;;AAC1C,cAAI,KAAK09F,oBAAT,EAA+B;AAC7B,iBAAKf,SAAL,CAAeU,WAAf,CAA2B;AACzBr9F,gBAAE,EAAFA,EADyB;AAEzB4Z,qBAAO,EAAPA,OAFyB;AAGzBiqB,uBAAS,EAAE,KAAKk5D,cAAL,CAAoB/8F,EAHN;AAIzBg+F,yBAAW,EAAE,IAJY;AAKzBC,uBAAS,EAAE;AALc,aAA3B;AAOD,WARD,MAQO;AACL77F,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACg7E,cAAL,CAAoBxjE,OAApB,EAA6B5Z,EAA7B;AACD,aAFS,EAEP,IAFO,CAAV;AAGD;AACF;;;6CAEoB;AAAA;;AACnB,cAAI,CAAC,KAAKiP,aAAV,EAAyB;AACvB,iBAAK1N,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAAC2L,QAAV;AAAA,aADf,EAEG/M,SAFH,CAEa,UAACgN,aAAD,EAAkC;AAC3C,sBAAI,CAACA,aAAL,GAAqBA,aAArB;;AACA,kBAAIA,aAAa,CAACm0B,iBAAd,CAAgCjgC,MAAhC,GAAyC,CAA7C,EAAgD;AAC9C,wBAAI,CAAC5B,KAAL,CAAWQ,QAAX,CAAoB,IAAI,+DAAJ,EAApB;;AACA,oBAAMiN,QAAQ,GAAG,QAAI,CAACC,aAAL,CAAmBD,QAAnB,CAA4BhG,MAA5B,CAAmC,UAAAkH,OAAO;AAAA,yBAAIA,OAAO,CAACyJ,YAAZ;AAAA,iBAA1C,CAAjB;;AACA,wBAAI,CAACgjF,SAAL,CAAeU,WAAf,CAA2B;AACzBruF,0BAAQ,EAARA,QADyB;AAEzB60B,2BAAS,EAAE,QAAI,CAACk5D,cAAL,CAAoB/8F,EAFN;AAGzBg+F,6BAAW,EAAE,IAHY;AAIzBE,iCAAe,EAAE;AAJQ,iBAA3B;AAMD;AACF,aAdH;AAeD;AACF;;;0CAGiBr6D,S,EAAmB5kB,U,EAAgD;AAAA;;AAAA,cAAxBu2E,UAAwB,uEAAJ,EAAI;AACnF,eAAKj0F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,kEAAJ,CAA8B,MAAD,OAAC,CAAD,EAAC,EAAKkd,UAAL,CAA9B,CAApB;AACA,cAAMu+E,OAAO,GACXhI,UAAU,CAACryF,MAAX,GAAoB,CAApB,GACIqyF,UAAU,CAACtK,MAAX,CAAkB,KAAKsK,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,mBAAcA,GAAG,CAAC+I,UAAlB;AAAA,WAA/B,CAAlB,CADJ,GAEI,KAAKqhF,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,mBAAcA,GAAG,CAAC+I,UAAlB;AAAA,WAA/B,CAHN;AAIA,cAAM1J,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,gBAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,UAACC,KAAD,EAAgB;AAC9C,gBAAM0iC,MAAM,GAAG1iC,KAAK,CAACE,MAAN,CAAaC,MAA5B;AACA,gBAAMmiC,UAAU,GAAG,IAAIixD,UAAJ,CAAe7wD,MAAf,CAAnB;;AACA,oBAAI,CAACqvD,SAAL,CAAeU,WAAf,CAA2B;AAAEe,sBAAQ,EAAElxD,UAAZ;AAAwBsoD,wBAAU,EAAEgI,OAApC;AAA6CnzD,+BAAiB,EAAE,IAAhE;AAAsEprB,wBAAU,EAAVA;AAAtE,aAA3B;AACD,WAJD;AAKAxU,gBAAM,CAACywF,iBAAP,CAAyBj8E,UAAU,CAACU,iBAApC;AACD;;;0CAEiBkkB,S,EAAmBu6D,Q,EAAkB9+E,Q,EAAa;AAClE,cAAMnF,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAEx5D,qBAAS,EAATA,SAAF;AAAau6D,oBAAQ,EAARA,QAAb;AAAuBp/E,6BAAiB,EAAE,IAA1C;AAAgDM,oBAAQ,EAARA,QAAhD;AAA0Dm+E,qBAAS,EAATA;AAA1D,WAA3B;AACA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;kCAES/D,M,EAAc;AACtB,eAAK4M,oBAAL,GAA4B,IAA5B;AACA,eAAKlI,UAAL,GAAkB,IAAlB;AACA,eAAK7xC,QAAL,GAAgB,IAAhB;AACA,eAAKo5C,cAAL,GAAsB,IAAtB;AACA,eAAKD,WAAL,GAAmB,IAAnB;AACA,eAAKv7F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,wDAAJ,CAAoB;AAAE2uF,wBAAY,EAAE;AAAhB,WAApB,CAApB;AACA,eAAKiM,SAAL,CAAeU,WAAf,CAA2B;AAAEz1C,iBAAK,EAAE;AAAT,WAA3B;;AAEA,cAAIkpC,MAAJ,EAAY;AACV,iBAAKvvF,KAAL,CAAWQ,QAAX,CAAoB,IAAI,gEAAJ,CAA4B;AAAE+uF,oBAAM,EAANA,MAAF;AAAUD,0BAAY,EAAE;AAAxB,aAA5B,CAApB;AACD;AACF;;;yCAGCpkE,Q,EACAzgB,Q,EAEqC;AAAA,cADrCugB,MACqC,uEADpB,6DACoB;AAAA,cAArCxgB,QAAqC,uEAAd,sDAAWkkB,GAAG;;AAErC,cAAIxD,QAAQ,CAACzO,KAAT,CAAe,GAAf,EAAoB7a,MAApB,GAA6B,CAAjC,EAAoC;AAClCopB,kBAAM,GAAGE,QAAQ,CAACzO,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAT;AACAyO,oBAAQ,GAAGA,QAAQ,CAACzO,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAX;AACD;;AACD,eAAK2lC,QAAL,GAAgB,IAAhB;AACA,cAAIpzB,OAAO,GAAG,EAAd;;AACA,cAAIxkB,QAAQ,KAAK,sDAAWkkB,GAA5B,EAAiC;AAC/BM,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,YAAK0b,QAAL,cAAiBF,MAAjB;AAAP,eAAD,CADD;AAERzgB,mBAAK,EAAE,SAFC;AAGRI,wBAAU,EAAEF;AAHJ,aAAV;AAKD,WAND,MAMO,IAAID,QAAQ,KAAK,sDAAWukB,QAA5B,EAAsC;AAC3CC,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,YAAK0b,QAAL,cAAiBF,MAAjB;AAAP,eAAD,CADD;AAER+xE,qBAAO,EAAE,IAFD;AAGRpyF,wBAAU,EAAEF;AAHJ,aAAV;AAKD,WANM,MAMA;AACLukB,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,YAAK0b,QAAL,cAAiBF,MAAjB;AAAP,eAAD,CADD;AAER+xE,qBAAO,EAAE,IAFD;AAGRpyF,wBAAU,EAAEF;AAHJ,aAAV;AAKD;;AACD,eAAK2wF,SAAL,CAAeU,WAAf,CAA2B;AAAE9sE,mBAAO,EAAPA,OAAF;AAAWguE,wBAAY,EAAE;AAAzB,WAA3B;AACD;;;6CAEoBvyF,Q,EAAkBk+B,O,EAAiB;AACtD,eAAK3oC,KAAL,CAAWQ,QAAX,CAAoB,IAAI,yDAAJ,CAAqB;AAAEy8F,2BAAe,EAAE,IAAnB;AAAyBC,mBAAO,EAAE,IAAlC;AAAwCv0D,mBAAO,EAAPA;AAAxC,WAArB,CAApB;AACA,cAAM3Z,OAAO,GAAG;AACd8tE,mBAAO,EAAE,CAAC;AAAEt4F,kBAAI,YAAKmkC,OAAL;AAAN,aAAD,CADK;AAEdo0D,mBAAO,EAAE,IAFK;AAGdpyF,sBAAU,EAAEF;AAHE,WAAhB;AAKA,eAAK2wF,SAAL,CAAeU,WAAf,CAA2B;AAAE9sE,mBAAO,EAAPA,OAAF;AAAWguE,wBAAY,EAAE,IAAzB;AAA+BG,oBAAQ,EAAE,IAAzC;AAA+C7C,oBAAQ,EAAE3xD;AAAzD,WAA3B;AACD;;;sCAEa;AACZ,iBAAO,KAAKyZ,QAAZ;AACD;;;uCAEct7C,I,EAAWs2F,U,EAAoB;AAAA;;AAC5Cv8F,oBAAU,CAAC,YAAM;AACf,gBAAI,QAAI,CAACwrB,WAAL,EAAJ,EAAwB;AACtBvlB,kBAAI,CAACs2F,UAAD,CAAJ;AACA;AACD;;AACD,oBAAI,CAAC7wE,cAAL,CAAoBzlB,IAApB,EAA0Bs2F,UAA1B;AACD,WANS,EAMP,GANO,CAAV;AAOD;;;yCAEgBzyF,U,EAAoBm3B,U,EAAqB5W,Q,EAAkB;AAC1E,cAAMtS,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AACzBnxF,sBAAU,EAAVA,UADyB;AAEzBm3B,sBAAU,EAAVA,UAFyB;AAGzB5W,oBAAQ,EAARA,QAHyB;AAIzBhjB,qBAAS,EAAE,KAAKA,SAJS;AAKzB85B,4BAAgB,EAAE,IALO;AAMzBk6D,qBAAS,EAATA;AANyB,WAA3B;AAQA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;gDAEuB3oF,U,EAAoBm3B,U,EAAqB;AAC/D,cAAI,CAACA,UAAL,EAAiB;AACf,iBAAKs5D,SAAL,CAAeU,WAAf,CAA2B;AAAEnxF,wBAAU,EAAVA,UAAF;AAAc0yF,8BAAgB,EAAE;AAAhC,aAA3B;AACD;AACF;;;gDAGuB10D,O,EAAiBrC,Q,EAAyB77B,Q,EAAkB;AAClF,eAAKzK,KAAL,CAAWQ,QAAX,CAAoB,IAAI,kEAAJ,CAA8B;AAAEkzC,2BAAe,EAAE,IAAnB;AAAyBo1C,4BAAgB,EAAE,EAA3C;AAA+CngD,mBAAO,EAAPA;AAA/C,WAA9B,CAApB;AACA,eAAKyyD,SAAL,CAAeU,WAAf,CAA2B;AAAEx1D,oBAAQ,EAARA,QAAF;AAAYg3D,+BAAmB,EAAE,IAAjC;AAAuChD,oBAAQ,EAAE3xD,OAAjD;AAA0Dl+B,oBAAQ,EAARA;AAA1D,WAA3B;AACD;;;0DAEiCiT,U,EAAwBjT,Q,EAAkB;AAAA;;AAC1E,eAAKzK,KAAL,CAAWQ,QAAX,CAAoB,IAAI,kEAAJ,CAA8B,MAAD,OAAC,CAAD,EAAC,EAAKkd,UAAL,CAA9B,CAApB;AACA,cAAMxU,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,gBAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,UAACC,KAAD,EAAgB;AAC9C,gBAAM0iC,MAAM,GAAG1iC,KAAK,CAACE,MAAN,CAAaC,MAA5B;AACA,gBAAMmiC,UAAU,GAAG,IAAIixD,UAAJ,CAAe7wD,MAAf,CAAnB;;AACA,oBAAI,CAACqvD,SAAL,CAAeU,WAAf,CAA2B;AAAEe,sBAAQ,EAAElxD,UAAZ;AAAwBlhC,sBAAQ,EAARA,QAAxB;AAAkC8yF,2CAA6B,EAAE,IAAjE;AAAuE7/E,wBAAU,EAAVA;AAAvE,aAA3B;AACD,WAJD;AAKAxU,gBAAM,CAACywF,iBAAP,CAAyBj8E,UAAU,CAACU,iBAApC;AACD;;;wDAG+BkkB,S,EAAmBtb,M,EAAgBsf,Q,EAAyB77B,Q,EAAkB;AAC5G,cAAI,CAAC67B,QAAQ,CAAC6wC,kBAAd,EAAkC;AAChC7wC,oBAAQ,CAAC1tB,OAAT,GAAmB,IAAnB;AACD;;AAED,cAAMA,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AAEA,eAAK5Y,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,cAAE,EAAEuoB,MADwB;AAE5B0sB,2BAAe,EAAE,IAFW;AAG5Bx7B,4BAAgB,EAAE;AAHU,WAA9B,CADF;AAOA,eAAKkjF,SAAL,CAAeU,WAAf,CAA2B;AACzBx5D,qBAAS,EAATA,SADyB;AAEzBgE,oBAAQ,EAARA,QAFyB;AAGzBlrB,2CAA+B,EAAE,IAHR;AAIzBk/E,oBAAQ,EAAEtzE,MAJe;AAKzBvc,oBAAQ,EAARA,QALyB;AAMzByxF,qBAAS,EAATA;AANyB,WAA3B;AAQA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;oDAG2Bj7E,O,EAAiB47E,U,EAAmB;AAC9D,eAAKj0F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,4EAAJ,CAAwC;AAAEoG,sBAAU,EAAE,IAAd;AAAoBkiF,4BAAgB,EAAE;AAAtC,WAAxC,CAApB;AACA,eAAKsS,SAAL,CAAeU,WAAf,CAA2B;AAAEzjF,mBAAO,EAAPA,OAAF;AAAW47E,sBAAU,EAAVA,UAAX;AAAuBuJ,qCAAyB,EAAE;AAAlD,WAA3B;AACD;;;gDAEuBl3D,Q,EAAyB77B,Q,EAAkB;AACjE,cAAI,CAAC67B,QAAQ,CAAC6wC,kBAAd,EAAkC;AAChC7wC,oBAAQ,CAAC1tB,OAAT,GAAmB,IAAnB;AACD;;AACD,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAE2B,uCAA2B,EAAE,IAA/B;AAAqChzF,oBAAQ,EAARA,QAArC;AAA+C67B,oBAAQ,EAARA;AAA/C,WAA3B;AACA,eAAKtmC,KAAL,CAAWQ,QAAX,CAAoB,IAAI,mEAAJ,CAA+B;AAAE0X,4BAAgB,EAAE,IAApB;AAA0BtR,sBAAU,EAAE;AAAtC,WAA/B,CAApB;AACD;;;0DAEiCi2F,Q,EAAkB9+E,Q,EAAetT,Q,EAAgB;AACjF,cAAMmO,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AACzBrxF,oBAAQ,EAARA,QADyB;AAEzBoyF,oBAAQ,EAARA,QAFyB;AAGzBa,0CAA8B,EAAE,IAHP;AAIzB3/E,oBAAQ,EAARA,QAJyB;AAKzBm+E,qBAAS,EAATA;AALyB,WAA3B;AAOA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;2CAEkBqK,U,EAAoB;AACrC,cAAM/kF,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAE6B,sBAAU,EAAVA,UAAF;AAAcl0F,8BAAkB,EAAE,IAAlC;AAAwCyyF,qBAAS,EAATA;AAAxC,WAA3B;AACA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;0CAEiBqK,U,EAAoBhzF,U,EAAoB;AACxD,cAAMiO,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAE6B,sBAAU,EAAVA,UAAF;AAAc/yF,6BAAiB,EAAE,IAAjC;AAAuCsxF,qBAAS,EAATA,SAAvC;AAAkDvxF,sBAAU,EAAVA;AAAlD,WAA3B;AACA,iBAAOiO,OAAO,CAAC06E,YAAR,EAAP;AACD;;;0CAEiBqK,U,EAAoBlzF,Q,EAAkBE,U,EAAoB;AAC1E,cAAMiO,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAE6B,sBAAU,EAAVA,UAAF;AAAc9yF,6BAAiB,EAAE,IAAjC;AAAuCqxF,qBAAS,EAATA,SAAvC;AAAkDzxF,oBAAQ,EAARA,QAAlD;AAA4DE,sBAAU,EAAVA;AAA5D,WAA3B;AACA,iBAAOiO,OAAO,CAAC06E,YAAR,EAAP;AACD;;;gDAEuBsK,S,EAAmB;AACzC,cAAMhlF,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,eAAKwiF,SAAL,CAAeU,WAAf,CAA2B;AAAE8B,qBAAS,EAATA,SAAF;AAAapqF,mCAAuB,EAAE,IAAtC;AAA4C0oF,qBAAS,EAATA;AAA5C,WAA3B;AACA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;kDAGyB9jF,K,EAAe/E,Q,EAAkBD,Q,EAAsB;AAC/E,cAAMoO,OAAO,GAAG,IAAI,4CAAJ,EAAhB;AACA,cAAMsjF,SAAS,GAAGzwD,WAAW,CAAC7B,GAAZ,EAAlB;AACA,eAAKsxD,QAAL,CAAcgB,SAAd,IAA2BtjF,OAA3B;AACA,cAAIoW,OAAO,GAAG,EAAd;;AACA,cAAIxkB,QAAQ,KAAK,sDAAWkkB,GAA5B,EAAiC;AAC/BM,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,EAALA;AAAF,eAAD,CADD;AAERjF,mBAAK,EAAE,SAFC;AAGRI,wBAAU,EAAEF;AAHJ,aAAV;AAKD,WAND,MAMO,IAAID,QAAQ,KAAK,sDAAWukB,QAA5B,EAAsC;AAC3CC,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,EAALA;AAAF,eAAD,CADD;AAERutF,qBAAO,EAAE,IAFD;AAGRpyF,wBAAU,EAAEF;AAHJ,aAAV;AAKD,WANM,MAMA;AACLukB,mBAAO,GAAG;AACR8tE,qBAAO,EAAE,CAAC;AAAEttF,qBAAK,EAALA;AAAF,eAAD,CADD;AAERutF,qBAAO,EAAE,IAFD;AAGRpyF,wBAAU,EAAEF;AAHJ,aAAV;AAKD;;AAED,eAAK2wF,SAAL,CAAeU,WAAf,CAA2B;AAAE9sE,mBAAO,EAAPA,OAAF;AAAW6uE,gCAAoB,EAAE,IAAjC;AAAuC3B,qBAAS,EAATA;AAAvC,WAA3B;AACA,iBAAOtjF,OAAO,CAAC06E,YAAR,EAAP;AACD;;;0CAMiBwK,W,EAAqBx7D,S,EAAmBqG,O,EAAyC;AAAA,cAAxBsrD,UAAwB,uEAAJ,EAAI;AACjG,eAAKj0F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,+DAAJ,CAA2B;AAAE2oF,+BAAmB,EAAE,IAAvB;AAA6BL,4BAAgB,EAAE,EAA/C;AAAmDngD,mBAAO,EAAPA;AAAnD,WAA3B,CAApB;;AACA,cAAIm1D,WAAJ,EAAiB;AACf,gBAAM7B,OAAO,GACXhI,UAAU,CAACryF,MAAX,GAAoB,CAApB,GACIqyF,UAAU,CAACtK,MAAX,CAAkB,KAAKsK,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,qBAAcA,GAAG,CAAC+I,UAAlB;AAAA,aAA/B,CAAlB,CADJ,GAEI,KAAKqhF,UAAL,CAAgB3xD,SAAhB,EAA2BhkC,GAA3B,CAA+B,UAACuL,GAAD;AAAA,qBAAcA,GAAG,CAAC+I,UAAlB;AAAA,aAA/B,CAHN;AAIA,iBAAKwoF,SAAL,CAAeU,WAAf,CAA2B;AAAEgC,yBAAW,EAAXA,WAAF;AAAe7J,wBAAU,EAAEgI,OAA3B;AAAoC8B,sCAAwB,EAAE,IAA9D;AAAoEp1D,qBAAO,EAAPA;AAApE,aAA3B;AACD;AACF;;;yCAEgBuzD,S,EAAmBv7F,I,EAAW;AAC7C,cAAI,KAAKu6F,QAAL,CAAcgB,SAAd,CAAJ,EAA8B;AAC5B,gBAAIv7F,IAAI,CAACqC,KAAT,EAAgB;AACd,mBAAKk4F,QAAL,CAAcgB,SAAd,EAAyBl5F,KAAzB,CAA+BrC,IAA/B;AACD,aAFD,MAEO;AACL,mBAAKu6F,QAAL,CAAcgB,SAAd,EAAyBtzF,IAAzB,CAA8BjI,IAA9B;AACA,mBAAKu6F,QAAL,CAAcgB,SAAd,EAAyB7tC,QAAzB;AACD;;AACD,mBAAO,KAAK6sC,QAAL,CAAcgB,SAAd,CAAP;AACD;AACF;;;mDAE0B;AAAA;;AACzB,eAAKd,SAAL,CAAe9rC,SAAf,GAA2B,UAACjmD,KAAD,EAAyB;AAElD,gBAAIA,KAAK,CAAC1I,IAAN,CAAWq8F,YAAf,EAA6B;AAC3B,kBAAI3zF,KAAK,CAAC1I,IAAN,CAAWw8F,QAAf,EAAyB;AACvB,wBAAI,CAACn9F,KAAL,CAAWQ,QAAX,CACE,IAAI,yDAAJ,CAAqB;AACnBy8F,iCAAe,EAAE,KADE;AAEnBj+F,sBAAI,EAAEqK,KAAK,CAAC1I,IAAN,CAAW3B,IAFE;AAGnB2pC,yBAAO,EAAEt/B,KAAK,CAAC1I,IAAN,CAAW25F;AAHD,iBAArB,CADF;AAOD,eARD,MAQO;AACL,wBAAI,CAACl4C,QAAL,GAAgB/4C,KAAK,CAAC1I,IAAN,CAAW3B,IAA3B;AACD;AACF,aAZD,MAYO,IAAIqK,KAAK,CAAC1I,IAAN,CAAWggC,qBAAf,EAAsC;AAC3C,sBAAI,CAACw7D,oBAAL,GAA4B9yF,KAAK,CAAC1I,IAAN,CAAW3B,IAAvC;;AACA,sBAAI,CAACgB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,wDAAJ,CAAoB;AAAE2uF,4BAAY,EAAE,QAAI,CAACgN;AAArB,eAApB,CAApB;AACD,aAHM,MAGA,IAAI9yF,KAAK,CAAC1I,IAAN,CAAWq9F,SAAf,EAA0B;AAG/B,kBAAI30F,KAAK,CAAC1I,IAAN,CAAWs9F,gBAAf,EAAiC;AAC/B,oBAAI,QAAI,CAAC/C,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AACvC,sBAAI7yF,KAAK,CAAC1I,IAAN,CAAWqC,KAAf,EAAsB;AACpB,4BAAI,CAACk4F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCl5F,KAApC,CAA0CqG,KAAK,CAAC1I,IAAhD;AACD,mBAFD,MAEO;AACL,4BAAI,CAACu6F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCtzF,IAApC,CAAyCS,KAAK,CAAC1I,IAA/C;;AACA,4BAAI,CAACu6F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoC7tC,QAApC;AACD;;AACD,yBAAO,QAAI,CAAC6sC,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAP;AACD;AACF,eAVD,MAUO;AACL,wBAAI,CAACl8F,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5B/B,oBAAE,EAAE4K,KAAK,CAAC1I,IAAN,CAAW25F,QADa;AAE5B5mD,iCAAe,EAAE,KAFW;AAG5Bx7B,kCAAgB,EAAE7O,KAAK,CAAC1I,IAAN,CAAWuX,gBAHD;AAI5B02E,yCAAuB,EAAEvlF,KAAK,CAAC1I,IAAN,CAAWiuF,uBAJR;AAK5BvmF,8BAAY,EAAEgB,KAAK,CAAC1I,IAAN,CAAWqC,KALG;AAM5Bk7F,yCAAuB,EAAE70F,KAAK,CAAC1I,IAAN,CAAWu9F;AANR,iBAA9B,CADF;;AAUA,oBAAI,QAAI,CAAChD,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AACvC,sBAAI7yF,KAAK,CAAC1I,IAAN,CAAWqC,KAAf,EAAsB;AACpB,4BAAI,CAACk4F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCl5F,KAApC;AACD,mBAFD,MAEO;AACL,4BAAI,CAACk4F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCtzF,IAApC;;AACA,4BAAI,CAACsyF,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoC7tC,QAApC;AACD;;AACD,yBAAO,QAAI,CAAC6sC,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAP;AACD;AACF;AACF,aAlCM,MAkCA,IAAI7yF,KAAK,CAAC1I,IAAN,CAAWw9F,uBAAf,EAAwC;AAC7C,sBAAI,CAACn+F,KAAL,CAAWQ,QAAX,CACE,IAAI,+DAAJ,CAA2B;AACzB2uF,4BAAY,EAAE9lF,KAAK,CAAC1I,IAAN,CAAWwuF,YADA;AAEzBvoF,0BAAU,EAAE,KAFa;AAGzB5D,qBAAK,EAAEqG,KAAK,CAAC1I,IAAN,CAAWqC;AAHO,eAA3B,CADF;AAOD,aARM,MAQA,IAAIqG,KAAK,CAAC1I,IAAN,CAAW88F,2BAAf,EAA4C;AACjD,sBAAI,CAACz9F,KAAL,CAAWQ,QAAX,CACE,IAAI,mEAAJ,CAA+B;AAAE0X,gCAAgB,EAAE7O,KAAK,CAAC1I,IAAN,CAAW2lC,QAA/B;AAAyC1/B,0BAAU,EAAE;AAArD,eAA/B,CADF;AAGD,aAJM,MAIA,IAAIyC,KAAK,CAAC1I,IAAN,CAAWqhC,gBAAf,EAAiC;AACtC9iC,oBAAM,CAACF,IAAP,CAAYqK,KAAK,CAAC1I,IAAN,CAAW3B,IAAvB,EAA6B6Q,OAA7B,CAAqC,UAAAyyB,SAAS,EAAI;AAChDj5B,qBAAK,CAAC1I,IAAN,CAAW3B,IAAX,CAAgBsjC,SAAhB,EAA2BzyB,OAA3B,CAAmC,UAAChG,GAAD,EAAc;AAC/C,sBAAI,CAACA,GAAG,CAAC+I,UAAT,EAAqB;AACnB,wBAAMwrF,eAAe,GAAG,QAAI,CAACnK,UAAL,CAAgB3xD,SAAhB,EAA2B14B,IAA3B,CAAgC,UAACy0F,MAAD;AAAA,6BACtDx0F,GAAG,CAAC+J,UAAJ,GAAiByqF,MAAM,CAACzqF,UAAxB,GAAqC/J,GAAG,CAACpL,EAAJ,KAAW4/F,MAAM,CAAC5/F,EADD;AAAA,qBAAhC,CAAxB;;AAIAoL,uBAAG,CAAC+I,UAAJ,GAAiBwrF,eAAe,GAAGA,eAAe,CAACxrF,UAAnB,GAAgC,EAAhE;AACD;;AACD,sBAAIvJ,KAAK,CAAC1I,IAAN,CAAWmhC,UAAf,EAA2B;AAEzBj4B,uBAAG,CAAC+J,UAAJ,GAAiB,IAAjB;AACD;AACF,iBAZD;AAaD,eAdD;;AAeA,sBAAI,CAAC0qF,gBAAL,CAAsBj1F,KAAK,CAAC1I,IAAN,CAAWu7F,SAAjC,EAA4C7yF,KAAK,CAAC1I,IAAlD;;AACA,sBAAI,CAACX,KAAL,CAAWQ,QAAX,CAAoB,IAAI,gEAAJ,CAA4B6I,KAAK,CAAC1I,IAAN,CAAW3B,IAAvC,CAApB;AACD,aAlBM,MAkBA,IAAIqK,KAAK,CAAC1I,IAAN,CAAW49F,SAAf,EAA0B;AAC/B,sBAAI,CAACv+F,KAAL,CAAWQ,QAAX,CACE,IAAI,kEAAJ,CAA8B;AAC5BkzC,+BAAe,EAAE,KADW;AAE5Bo1C,gCAAgB,EAAEz/E,KAAK,CAAC1I,IAAN,CAAWmoF,gBAFD;AAG5BngD,uBAAO,EAAEt/B,KAAK,CAAC1I,IAAN,CAAW25F;AAHQ,eAA9B,CADF;AAOD,aARM,MAQA,IAAIjxF,KAAK,CAAC1I,IAAN,CAAW69F,mBAAf,EAAoC;AACzC,kBAAMC,WAAW,GAAGp1F,KAAK,CAAC1I,IAAN,CAAW+c,UAAX,CAAsBU,iBAA1C;AACA,kBAAMytB,WAAW,GAAG,IAAIC,IAAJ,CAAS,CAACziC,KAAK,CAAC1I,IAAN,CAAWmoF,gBAAZ,CAAT,EAAwC2V,WAAW,CAACj6F,IAApD,EAA0D;AAC5E6G,oBAAI,EAAEozF,WAAW,CAACpzF,IAD0D;AAE5EqzF,4BAAY,EAAED,WAAW,CAACC;AAFkD,eAA1D,CAApB;AAIA,kBAAMhhF,UAAU,mCAAoBrU,KAAK,CAAC1I,IAAN,CAAW+c,UAA/B,GAAyC;AAAEnb,wBAAQ,EAAEspC,WAAZ;AAAyBzzB,4BAAY,EAAE;AAAvC,eAAzC,CAAhB;;AACA,sBAAI,CAACpY,KAAL,CAAWQ,QAAX,CAAoB,IAAI,yDAAJ,CAAqB,MAAD,OAAC,CAAD,EAAC,EAAKkd,UAAL,CAArB,CAApB;AACD,aARM,MAQA,IAAIrU,KAAK,CAAC1I,IAAN,CAAWsd,mBAAX,IAAkC5U,KAAK,CAAC1I,IAAN,CAAWg+F,gCAAjD,EAAmF;AACxF,kBAAMC,KAAK,GAAGv1F,KAAK,CAAC1I,IAAN,CAAWuX,gBAAzB;;AACA,kBAAM2zB,YAAW,GAAG,IAAIC,IAAJ,CAClB,CAAC8yD,KAAK,CAAC7yD,MAAN,CAAahmB,KAAb,CAAmB64E,KAAK,CAAC5yD,UAAzB,EAAqC4yD,KAAK,CAAC3yD,UAAN,GAAmB2yD,KAAK,CAAC5yD,UAA9D,CAAD,CADkB,EAElB3iC,KAAK,CAAC1I,IAAN,CAAWod,QAAX,CAAoBL,UAApB,CAA+BlZ,IAFb,EAGlB;AAAE6G,oBAAI,EAAEhC,KAAK,CAAC1I,IAAN,CAAWod,QAAX,CAAoB1S;AAA5B,eAHkB,CAApB;;AAKA,kBAAM6gC,aAAa,mCAAoB7iC,KAAK,CAAC1I,IAAN,CAAWod,QAAX,CAAoBL,UAAxC,GAAkD;AAAEU,iCAAiB,EAAEytB;AAArB,eAAlD,CAAnB;;AACA,sBAAI,CAACqvD,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCtzF,IAApC,CAAyCsjC,aAAzC;;AACA,sBAAI,CAACgvD,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoC7tC,QAApC;;AACA,qBAAO,QAAI,CAAC6sC,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAP;AACD,aAXM,MAWA,IAAI7yF,KAAK,CAAC1I,IAAN,CAAW68F,yBAAf,EAA0C;AAC/C,sBAAI,CAACx9F,KAAL,CAAWQ,QAAX,CACE,IAAI,4EAAJ,CAAwC;AACtCoG,0BAAU,EAAE,KAD0B;AAEtCkiF,gCAAgB,EAAEz/E,KAAK,CAAC1I,IAAN,CAAWmoF;AAFS,eAAxC,CADF;AAMD,aAPM,MAOA,IAAIz/E,KAAK,CAAC1I,IAAN,CAAW67F,WAAf,EAA4B;AACjC,kBAAInzF,KAAK,CAAC1I,IAAN,CAAW07F,YAAf,EAA6B;AAC3B,wBAAI,CAACr8F,KAAL,CAAWQ,QAAX,CACE,IAAI,mDAAJ,CAAe;AACb/B,oBAAE,EAAE4K,KAAK,CAAC1I,IAAN,CAAWlC,EADF;AAEbq9E,gCAAc,EAAEzyE,KAAK,CAAC1I,IAAN,CAAWmoF,gBAFd;AAGb1wE,8BAAY,EAAE;AAHD,iBAAf,CADF;AAOD;AACF,aAVM,MAUA,IAAI/O,KAAK,CAAC1I,IAAN,CAAW87F,WAAf,EAA4B;AACjC,kBAAIpzF,KAAK,CAAC1I,IAAN,CAAW+7F,SAAf,EAA0B;AACxB,wBAAI,CAAC18F,KAAL,CAAWQ,QAAX,CAAoB,IAAI,8DAAJ,CAA0B,MAAD,OAAC,CAAD,kBAAM0c,IAAI,CAACC,KAAL,CAAW9T,KAAK,CAAC1I,IAAN,CAAW0X,OAAtB,CAAN,CAAC,EAAmC;AAAE5Z,oBAAE,EAAE4K,KAAK,CAAC1I,IAAN,CAAWlC;AAAjB,iBAAnC,CAA1B,CAApB;AACD,eAFD,MAEO,IAAI4K,KAAK,CAAC1I,IAAN,CAAWg8F,eAAf,EAAgC;AACrC,oBAAMkC,sBAAsB,GAAG,QAAI,CAACnxF,aAAL,CAAmB87E,qBAAnB,GAA2CngF,KAAK,CAAC1I,IAAN,CAAW8M,QAAX,CAAoB7L,MAA9F;;AACA,wBAAI,CAAC5B,KAAL,CAAWQ,QAAX,CAAoB,IAAI,4DAAJ,CAAwB;AAAEipF,8BAAY,EAAEpgF,KAAK,CAAC1I,IAAN,CAAW8M;AAA3B,iBAAxB,CAApB;;AACA,oBAAI,QAAI,CAACC,aAAL,CAAmBC,aAAnB,GAAmCkxF,sBAAvC,EAA+D;AAC7D,0BAAI,CAAC7+F,KAAL,CAAWQ,QAAX,CACE,IAAI,oDAAJ,CAAgB;AACdwM,yBAAK,EAAE,EADO;AAEdC,0BAAM,EAAE4xF,sBAFM;AAGd5oF,gCAAY,EAAE;AAHA,mBAAhB,CADF;AAOD;AACF;AACF,aAhBM,MAgBA,IAAI5M,KAAK,CAAC1I,IAAN,CAAW6S,uBAAf,EAAwC;AAE7C,kBAAInK,KAAK,CAAC1I,IAAN,CAAWqC,KAAf,EAAsB;AACpB,oBAAI,QAAI,CAACk4F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AACvC,0BAAI,CAAChB,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCl5F,KAApC,CAA0CqG,KAAK,CAAC1I,IAAN,CAAW2yB,YAArD;AACD;AACF,eAJD,MAIO,IAAI,QAAI,CAAC4nE,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AAC9C,wBAAI,CAAChB,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCtzF,IAApC,CAAyCS,KAAK,CAAC1I,IAAN,CAAW8S,OAApD;;AACA,wBAAI,CAACynF,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoC7tC,QAApC;;AACA,uBAAO,QAAI,CAAC6sC,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAP;AACD;AACF,aAXM,MAWA,IAAI7yF,KAAK,CAAC1I,IAAN,CAAWk9F,oBAAf,EAAqC;AAE1C,kBAAIx0F,KAAK,CAAC1I,IAAN,CAAWqC,KAAf,EAAsB;AACpB,oBAAI,QAAI,CAACk4F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AACvC,0BAAI,CAAChB,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCl5F,KAApC,CAA0CqG,KAAK,CAAC1I,IAAN,CAAW2yB,YAArD;AACD;AACF,eAJD,MAIO,IAAI,QAAI,CAAC4nE,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAJ,EAAyC;AAC9C,wBAAI,CAAChB,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoCtzF,IAApC,CAAyCS,KAAK,CAAC1I,IAAN,CAAW3B,IAApD;;AACA,wBAAI,CAACk8F,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,EAAoC7tC,QAApC;;AACA,uBAAO,QAAI,CAAC6sC,QAAL,CAAc7xF,KAAK,CAAC1I,IAAN,CAAWu7F,SAAzB,CAAP;AACD;AACF,aAXM,MAWA,IAAI7yF,KAAK,CAAC1I,IAAN,CAAWm+F,0BAAf,EAA2C;AAChD,sBAAI,CAAC9+F,KAAL,CAAWQ,QAAX,CACE,IAAI,+DAAJ,CAA2B;AACzB2oF,mCAAmB,EAAE,KADI;AAEzBL,gCAAgB,EAAEz/E,KAAK,CAAC1I,IAAN,CAAWA,IAFJ;AAGzBgoC,uBAAO,EAAEt/B,KAAK,CAAC1I,IAAN,CAAWgoC;AAHK,eAA3B,CADF;AAOD,aARM,MAQA,IAAIt/B,KAAK,CAAC1I,IAAN,CAAWo+F,mBAAf,EAAoC;AACzC,sBAAI,CAACT,gBAAL,CAAsBj1F,KAAK,CAAC1I,IAAN,CAAWu7F,SAAjC,EAA4C7yF,KAAK,CAAC1I,IAAlD;AACD,aAFM,MAEA,IAAI0I,KAAK,CAAC1I,IAAN,CAAWq+F,mBAAf,EAAoC;AACzC,sBAAI,CAACV,gBAAL,CAAsBj1F,KAAK,CAAC1I,IAAN,CAAWu7F,SAAjC,EAA4C7yF,KAAK,CAAC1I,IAAlD;AACD,aAFM,MAEA,IAAI0I,KAAK,CAAC1I,IAAN,CAAWs+F,mBAAf,EAAoC;AACzC,sBAAI,CAACX,gBAAL,CAAsBj1F,KAAK,CAAC1I,IAAN,CAAWu7F,SAAjC,EAA4C7yF,KAAK,CAAC1I,IAAlD;AACD;AACF,WAlLD;AAmLD;;;;;;;uBA5tBUs6F,c,EAAc,yG,EAAA,mH;AAAA,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBAFb;;;;sEAEDA,c,EAAc;cAH1B,wDAG0B;eAHf;AACV/3F,oBAAU,EAAE;AADF,S;AAGe,Q;;;;;;;;;;;;;;;;;;;;;;;;AC7C3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAiBA,QAAMg8F,eAAe,GAAG,uDAAa,eAAb,CAAxB;AACA,QAAMC,yBAAyB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,OAAlB,EAA2B,OAA3B,CAAlC;;QAEaC,W;;;;;;;;;;;;;+BAUJ56F,I,EAAcwC,K,EAAY;AAC/B,cAAIm4F,yBAAyB,CAACzsF,QAA1B,CAAmClO,IAAnC,CAAJ,EAA8C;AAC5C,gBAAIwC,KAAJ,EAAW;AACT,mBAAKq4F,OAAL,CAAah6D,YAAb,CAA0B7gC,IAA1B,EAAgCwC,KAAhC;AACD,aAFD,MAEO;AACL,mBAAKq4F,OAAL,CAAaC,eAAb,CAA6B96F,IAA7B;AACD;AACF,WAND,MAMO;AACL,oFAAaA,IAAb,EAAmBwC,KAAnB;AACD;AACF;;;gCAnBcq4F,O,EAAc;AAC3B,iBAAOF,yBAAyB,CAACI,MAA1B,CAAiC,UAAUC,OAAV,EAAwBnzC,SAAxB,EAAmC;AACzE,gBAAIgzC,OAAO,CAACI,YAAR,CAAqBpzC,SAArB,CAAJ,EAAqC;AACnCmzC,qBAAO,CAACnzC,SAAD,CAAP,GAAqBgzC,OAAO,CAAC5jF,YAAR,CAAqB4wC,SAArB,CAArB;AACD;;AACD,mBAAOmzC,OAAP;AACD,WALM,EAKJ,EALI,CAAP;AAMD;;;;MAR8BN,e;;QA0BpBQ,a;AA0BX,6BACU58F,IADV,EAEUgJ,YAFV,EAGUulB,mBAHV,EAIUrxB,KAJV,EAIgC;AAAA;;AAAA;;AAHtB,aAAA8C,IAAA,GAAAA,IAAA;AACA,aAAAgJ,YAAA,GAAAA,YAAA;AACA,aAAAulB,mBAAA,GAAAA,mBAAA;AACA,aAAArxB,KAAA,GAAAA,KAAA;AAvBV,aAAA2/F,OAAA,GAAiC,IAAI,0DAAJ,EAAjC;AAEA,aAAAz/F,UAAA,GAAoC,IAAI,0DAAJ,EAApC;AAEA,aAAAC,UAAA,GAAoC,IAAI,0DAAJ,EAApC;AAEA,aAAAs7C,gBAAA,GAA0C,IAAI,0DAAJ,EAA1C;AAEA,aAAAyuC,UAAA,GAAgC,IAAI,0DAAJ,EAAhC;AAEA,aAAA5pF,MAAA,GAAgC,IAAI,0DAAJ,EAAhC;AAEA,aAAAqE,cAAA,GAAwC,IAAI,0DAAJ,EAAxC;AAgBE,aAAK3E,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAAC4E,IAAV;AAAA,SADf,EAEGhG,SAFH,CAEa,UAACgG,IAAD,EAAqB;AAC9B,kBAAI,CAACwkB,QAAL,GAAgBxkB,IAAI,CAACwkB,QAArB;AACD,SAJH;AAKD;;;;mCAEUvqB,I,EAAai/F,S,EAAiB;AACvC,iBAAOj/F,IAAI,CAACssB,IAAL,CAAU,UAACC,CAAD,EAASC,CAAT;AAAA,mBAAoB,IAAI0c,IAAJ,CAAS1c,CAAC,CAACyyE,SAAD,CAAV,EAAuBC,OAAvB,KAAmC,IAAIh2D,IAAJ,CAAS3c,CAAC,CAAC0yE,SAAD,CAAV,EAAuBC,OAAvB,EAAvD;AAAA,WAAV,CAAP;AACD;;;wDAE+Bp1F,Q,EAAgB;AAC9C,cAAMygB,QAAQ,GAAG,KAAKA,QAAL,CAAcxjB,WAAd,EAAjB;AACA,cAAMo4F,IAAI,GAAG,KAAKC,UAAL,CAAgB,SAAhB,EAA2B70E,QAA3B,CAAb;AACA,iBAAO,gDAAO80E,QAAP,CAAgBv1F,QAAhB,EAA0Bq1F,IAA1B,CAAP;AACD;;;mCAEkBA,I,EAAc50E,Q,EAAgB;AAC/CA,kBAAQ,GAAGA,QAAQ,CAACzS,OAAT,CAAiB,aAAjB,EAAgC,EAAhC,CAAX;AACAyS,kBAAQ,GAAGA,QAAQ,IAAI,MAAvB;;AACA,cAAI40E,IAAI,CAACl+F,MAAL,GAAc,EAAlB,EAAsB;AACpB,mBAAO,KAAKm+F,UAAL,CAAgBD,IAAI,GAAG50E,QAAvB,EAAiCA,QAAjC,CAAP;AACD;;AACD,iBAAO40E,IAAI,CAAC/5E,KAAL,CAAW,CAAX,EAAc,EAAd,CAAP;AACD;;;+CAMsB/D,O,EAAkBxa,a,EAAyE;AAAA,cAAhDX,QAAgD,uEAAN,IAAM;AAChH,eAAK+4B,SAAL,CAAe/4B,QAAf;AACD;;;oCAEiE;AAAA,cAAhDA,QAAgD,uEAAN,IAAM;AAChE,cAAMo5F,KAAK,GAAgB,KAAKn0F,YAAL,CAAkByC,IAAlB,CAAuB,yGAAvB,EAA8C;AACvEC,oBAAQ,EAAE,IAD6D;AAEvEC,uBAAW,EAAE;AAF0D,WAA9C,CAA3B;AAIwBwxF,eAAK,CAAChxE,iBAAN,CAAyBpoB,QAAzB,GAAoCA,QAApC;AACzB;;;2CAEkB;AACjB,cAAI64F,aAAa,CAACrlE,aAAlB,EAAiC;AAC/B;AACD;;AACD,eAAKv3B,IAAL,CAAUoE,GAAV,CAAc,oCAAd,EAAoDxG,SAApD,CAA8D,UAACC,IAAD,EAAe;AAC3E++F,yBAAa,CAACrlE,aAAd,GAA8B15B,IAA9B;AACA++F,yBAAa,CAAC3hD,mBAAd,GAAoC,EAApC;AACA7+C,kBAAM,CAACF,IAAP,CAAY2B,IAAZ,EAAkBkP,OAAlB,CAA0B,UAAAhG,GAAG,EAAI;AAC/B,kBAAIA,GAAG,KAAK,oDAASq2F,OAArB,EAA8B;AAC5Bv/F,oBAAI,CAACkJ,GAAD,CAAJ,CAAUrF,IAAV,GAAiBqF,GAAjB;AACA61F,6BAAa,CAAC3hD,mBAAd,CAAkCzgC,IAAlC,CAAuC3c,IAAI,CAACkJ,GAAD,CAA3C;AACD;AACF,aALD;AAMD,WATD;AAUD;;;mDAE0B;AAAA;;AACzB,cAAI,CAAC,KAAKs2F,sBAAV,EAAkC;AAChC,iBAAKA,sBAAL,GAA8B,KAAKr0F,YAAL,CAAkByC,IAAlB,CAAuB,mIAAvB,EAAsD;AAClFC,sBAAQ,EAAE,IADwE;AAElFC,yBAAW,EAAE,UAFqE;AAGlFyE,sBAAQ,EAAE,QAHwE;AAIlFgwC,sBAAQ,EAAE;AAJwE,aAAtD,CAA9B;AAMA,iBAAKi9C,sBAAL,CAA4B32F,MAA5B,CAAmC7J,IAAnC,CAAwC;AAAA,qBAAO,QAAI,CAACwgG,sBAAL,GAA8B,IAArC;AAAA,aAAxC;AACD;AACF;;;wCAEen5F,K,EAAe;AAC7B,cAAMo5F,MAAM,GAAG79F,QAAQ,CAACqZ,aAAT,CAAuB,UAAvB,CAAf;AACAwkF,gBAAM,CAACC,KAAP,CAAajwD,QAAb,GAAwB,OAAxB;AACAgwD,gBAAM,CAACC,KAAP,CAAaC,IAAb,GAAoB,GAApB;AACAF,gBAAM,CAACC,KAAP,CAAaE,GAAb,GAAmB,GAAnB;AACAH,gBAAM,CAACC,KAAP,CAAaG,OAAb,GAAuB,GAAvB;AACAJ,gBAAM,CAACp5F,KAAP,GAAeA,KAAf;AACAzE,kBAAQ,CAAC8C,IAAT,CAAcooD,MAAd,CAAqB2yC,MAArB;AACAA,gBAAM,CAACxjF,KAAP;AACAwjF,gBAAM,CAACv+F,MAAP;AACAU,kBAAQ,CAACk+F,WAAT,CAAqB,MAArB;AACAL,gBAAM,CAAClyF,MAAP;AACA,eAAKmjB,mBAAL,CAAyBwO,YAAzB,CAAsC,mCAAtC;AACD;;;2CAEkB6gE,U,EAAkB;AACnC,cAAMC,WAAW,GAAQv0E,IAAI,CAACs0E,UAAD,CAA7B;AADmC,cAE3B9+F,MAF2B,GAEhB++F,WAFgB,CAE3B/+F,MAF2B;AAGnC,cAAM+pC,UAAU,GAAG,IAAIixD,UAAJ,CAAeh7F,MAAf,CAAnB;;AACA,eAAK,IAAI2Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3Z,MAApB,EAA4B2Z,CAAC,EAA7B,EAAiC;AAC/BowB,sBAAU,CAACpwB,CAAD,CAAV,GAAgBolF,WAAW,CAACC,UAAZ,CAAuBrlF,CAAvB,CAAhB;AACD;;AACD,iBAAOowB,UAAP;AACD;;;qCAEY5iC,I,EAAY;AACvB,cAAMmkB,CAAC,GAAG3qB,QAAQ,CAACqZ,aAAT,CAAuB,GAAvB,CAAV;AACAsR,WAAC,CAACmzE,KAAF,CAAQ/2D,OAAR,GAAkB,MAAlB;AACA,cAAMzlB,GAAG,GAAGrkB,MAAM,CAACg7F,GAAP,CAAWC,eAAX,CAA2B1xF,IAA3B,CAAZ;AACAmkB,WAAC,CAACrR,IAAF,GAASgI,GAAT;AACAqJ,WAAC,CAAC2zE,QAAF,GAAa93F,IAAI,CAACvE,IAAlB;AACAjC,kBAAQ,CAAC8C,IAAT,CAAcooD,MAAd,CAAqBvgC,CAArB;AACAA,WAAC,CAACnR,KAAF;AACAvc,gBAAM,CAACg7F,GAAP,CAAWsG,eAAX,CAA2Bj9E,GAA3B;AACAqJ,WAAC,CAAChf,MAAF;AACD;;;4CAEmB69B,M,EAAqB;AACvC,cAAIg1D,MAAM,GAAG,EAAb;AACA,cAAMp5C,KAAK,GAAG,IAAIi1C,UAAJ,CAAe7wD,MAAf,CAAd;AACA,cAAMnqC,MAAM,GAAG+lD,KAAK,CAAC1b,UAArB;;AACA,eAAK,IAAI1wB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3Z,MAApB,EAA4B2Z,CAAC,EAA7B,EAAiC;AAC/BwlF,kBAAM,IAAIx2D,MAAM,CAACy2D,YAAP,CAAoBr5C,KAAK,CAACpsC,CAAD,CAAzB,CAAV;AACD;;AACD,iBAAO/b,MAAM,CAACmT,IAAP,CAAYouF,MAAZ,CAAP;AACD;;;qCAQY16D,S,EAAyC72B,K,EAAa;AACjE,cAAMyxF,UAAU,GAAG,gEAA2BzxF,KAA3B,CAAnB;;AACA,cAAI,CAACyxF,UAAL,EAAiB;AACf,mBAAO;AACLhsD,2BAAa,EAAE,KADV;AAELD,wBAAU,EAAE,KAFP;AAGLh2C,kBAAI,EAAE;AAHD,aAAP;AAKD;;AACD,cAAMu1C,WAAW,GAAG0sD,UAAU,CAAC7vF,OAA/B;AACA,cAAI6jC,aAAa,GAAG,KAApB;AACA,cAAID,UAAU,GAAG,KAAjB;AACA,cAAIh2C,IAAI,GAAG,EAAX;;AACA,cACEqnC,SAAS,CAAC18B,GAAV,CAAc4qC,WAAd,KACA,CAAClO,SAAS,CAACn/B,GAAV,CAAcqtC,WAAd,EAA2BpL,UAD5B,IAEA9C,SAAS,CAACn/B,GAAV,CAAcqtC,WAAd,EAA2B1qC,GAF3B,IAGAw8B,SAAS,CAACn/B,GAAV,CAAcqtC,WAAd,EAA2B1qC,GAA3B,CAA+BjI,MAA/B,GAAwC,CAJ1C,EAKE;AACA,gBAAMs/F,SAAS,GAAQ76D,SAAS,CAACn/B,GAAV,CAAcqtC,WAAd,EAA2B1qC,GAA3B,CAA+B,CAA/B,CAAvB;;AAEA,gBAAIq3F,SAAS,CAACvzE,MAAd,EAAsB;AACpBqnB,wBAAU,GAAG,IAAb;AACD;;AAGD,gBAAIksD,SAAS,CAACC,QAAV,IAAsBD,SAAS,CAAC1sD,KAApC,EAA2C;AACzCS,2BAAa,GAAG,IAAhB;AACD;;AACD,gBAAID,UAAJ,EAAgB;AACdh2C,kBAAI,GAAGkiG,SAAS,CAACr3F,GAAjB;AACD;AACF;;AACD,iBAAO;AACLorC,yBAAa,EAAbA,aADK;AAELD,sBAAU,EAAVA,UAFK;AAGLh2C,gBAAI,EAAJA;AAHK,WAAP;AAKD;;;gDAEuBoS,O,EAAe;AACrC,iBAAO,CAAC,CAAC,gEAA2B;AAAEhG,iBAAK,EAAEgG,OAAT;AAAkBgwF,qBAAS,EAAE;AAA7B,WAA3B,CAAT;AACD;;;;;;AArMM,kBAAArjD,mBAAA,GAA0C,EAA1C;;;uBAHI2hD,a,EAAa,uH,EAAA,2H,EAAA,iI,EAAA,0G;AAAA,K;;;aAAbA,a;AAAa,eAAbA,aAAa,K;AAAA,kBAFZ;;;;sEAEDA,a,EAAa;cAHzB,wDAGyB;eAHd;AACVx8F,oBAAU,EAAE;AADF,S;AAGc,Q;;;;;;;;;;;;;AA2MnB,aAASm+F,YAAT,CAAsB1gG,IAAtB,EAAmC2gG,KAAnC,EAAkD;AACvD,aAAO3gG,IAAI,CAACssB,IAAL,CAAU,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzB,YAAID,CAAC,CAACo0E,KAAD,CAAD,GAAWn0E,CAAC,CAACm0E,KAAD,CAAhB,EAAyB;AACvB,iBAAO,CAAC,CAAR;AACD;;AACD,YAAIp0E,CAAC,CAACo0E,KAAD,CAAD,GAAWn0E,CAAC,CAACm0E,KAAD,CAAhB,EAAyB;AACvB,iBAAO,CAAP;AACD;;AACD,eAAO,CAAP;AACD,OARM,CAAP;AASD;;AAEM,aAASC,mBAAT,GAA4B;AACjC,aACE7B,aAAa,CAAC7yE,iBAAd,IACAtqB,QAAQ,CAAC+Y,gBAAT,CAA0B,yBAA1B,EAAqD1Z,MAArD,GAA8D,CAD9D,IAEAW,QAAQ,CAAC+Y,gBAAT,CAA0B,kBAA1B,EAA8C1Z,MAA9C,GAAuD,CAFvD,IAGAW,QAAQ,CAAC+Y,gBAAT,CAA0B,kBAA1B,EAA8C1Z,MAA9C,GAAuD,CAJzD;AAMD;;AAEM,aAAS4/F,eAAT,GAAwB;AAC7B,UAAI5C,KAAK,GAAG,IAAI6C,WAAJ,CAAgB,CAAhB,CAAZ;AAAA,UACEn5D,GAAG,GAAG5mC,IAAI,CAACggG,GAAL,CAAS,CAAT,EAAY,EAAZ,CADR;AAAA,UAEEC,WAAW,GAAGniG,MAAM,CAACoiG,MAAP,CAAcC,eAAd,CAA8BjD,KAA9B,EAAqC,CAArC,IAA0Ct2D,GAF1D;AAGA,aAAOq5D,WAAP;AACD;;AAEM,QAAMG,aAAa,GACxB,gqaADK;;;;;;;;;;;;;;;;ACrRP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaC,e;AACX,+BAAoBj/F,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAAoB;;;;uCAEzB;AACb,iBAAO,KAAKA,IAAL,CAAUoE,GAAV,WAA6B,qDAA7B,sBAAsDlG,IAAtD,CAA2D,2DAAI,UAACgO,IAAD;AAAA,mBAAeA,IAAI,CAAC0rB,SAApB;AAAA,WAAJ,CAA3D,CAAP;AACD;;;;;;;uBALUqnE,e,EAAe,uH;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBAFd;;;;sEAEDA,e,EAAe;cAH3B,wDAG2B;eAHhB;AACV7+F,oBAAU,EAAE;AADF,S;AAGgB,Q;;;;;;;;;;;;;;;;;;;;;;ACV5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA6Ba8+F,gB;AAKX,gCAAoBC,QAApB,EAAgDjiG,KAAhD,EAAgFy4C,gBAAhF,EAAoH;AAAA;;AAAA;;AAAhG,aAAAwpD,QAAA,GAAAA,QAAA;AAA4B,aAAAjiG,KAAA,GAAAA,KAAA;AAAgC,aAAAy4C,gBAAA,GAAAA,gBAAA;AAFxE,aAAAx2C,eAAA,GAAkB,KAAlB;AAGN,aAAKjC,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACC,IAAV;AAAA,SADf,EAEGf,IAFH,GAGGN,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,kBAAI,CAACC,eAAL,GAAuBD,SAAS,CAACC,eAAjC;AACD,SALH;AAMD;;;;kCAESw4E,O,EAA2B7xE,I,EAAiB;AAAA;;AACpD,eAAK+b,WAAL,GAAmB,KAAKs9E,QAAL,CAAc/6F,GAAd,CAAkB,2DAAlB,CAAnB;;AACA,cAAI,CAACuzE,OAAO,CAAC52D,GAAR,CAAYnR,QAAZ,CAAqB,uBAArB,CAAL,EAAoD;AAClD+nE,mBAAO,GAAGA,OAAO,CAACynB,KAAR,CAAc;AACtBC,6BAAe,EAAE;AADK,aAAd,CAAV;AAGD;;AAED,iBAAOv5F,IAAI,CAACsqF,MAAL,CAAYzY,OAAZ,EAAqBz5E,IAArB,CACL,2DAAI,UAAAqI,KAAK,EAAI;AACX,gBAAIA,KAAK,YAAY,iEAArB,EAAmC;AACjC,kBACEA,KAAK,CAAC+4F,EAAN,IACA/4F,KAAK,CAACwa,GAAN,CAAUnR,QAAV,CAAmB,qDAAnB,CADA,IAEA,CAACrJ,KAAK,CAACwa,GAAN,CAAUnR,QAAV,CAAmB,eAAnB,CAFD,IAGA,CAACrJ,KAAK,CAACwa,GAAN,CAAUnR,QAAV,CAAmB,cAAnB,CAHD,IAIA,CAACrJ,KAAK,CAACwa,GAAN,CAAUnR,QAAV,CAAmB,qBAAnB,CAJD,IAKA,CAACrJ,KAAK,CAACwa,GAAN,CAAUnR,QAAV,CAAmB,uBAAnB,CALD,IAMA,CAAC,QAAI,CAACzQ,eAPR,EAQE;AACA,wBAAI,CAACjC,KAAL,CAAWQ,QAAX,CAAoB,IAAI,8DAAJ,CAA0B;AAAEyB,iCAAe,EAAE;AAAnB,iBAA1B,CAApB;AACD;AACF;AACF,WAdD,CADK,EAgBL,kEAAW,UAACe,KAAD,EAAgB;AACzB,gBAAIA,KAAK,YAAY,sEAArB,EAAwC;AACtC,kBAAIA,KAAK,CAACmM,MAAN,KAAiB,GAAjB,IAAwB,CAACnM,KAAK,CAAC6gB,GAAN,CAAUnR,QAAV,CAAmB,eAAnB,CAA7B,EAAkE;AAChE,wBAAI,CAAC+lC,gBAAL,CAAsB8W,UAAtB;;AACA,wBAAI,CAACvvD,KAAL,CAAWQ,QAAX,CAAoB,IAAI,2DAAJ,EAApB;;AACA,wBAAI,CAACR,KAAL,CAAWQ,QAAX,CAAoB,IAAI,+CAAJ,CAAW;AAAE6hG,iCAAe,EAAE;AAAnB,iBAAX,CAApB;AACD,eAJD,MAIO,IAAIr/F,KAAK,CAACmM,MAAN,KAAiB,GAArB,EAA0B;AAC/B,wBAAI,CAACnP,KAAL,CAAWQ,QAAX,CAAoB,IAAI,oEAAJ,EAApB;;AACA,wBAAI,CAACR,KAAL,CAAWQ,QAAX,CAAoB,IAAI,uDAAJ,EAApB;AACD;AACF;;AACD,gBAAIwC,KAAK,CAACA,KAAN,CAAYA,KAAhB,EAAuB;AACrBA,mBAAK,CAACA,KAAN,GAAcA,KAAK,CAACA,KAAN,CAAYA,KAAZ,CAAkBA,KAAhC;AACD,aAFD,MAEO,IAAIA,KAAK,CAACA,KAAN,CAAYy2E,MAAhB,EAAwB;AAC7Bz2E,mBAAK,CAACA,KAAN,GAAcA,KAAK,CAACA,KAAN,CAAYy2E,MAA1B;AACD;;AACD,mBAAO,wDAAqBz2E,KAArB,CAAP;AACD,WAjBD,CAhBK,CAAP;AAmCD;;;;;;;uBAzDUg/F,gB,EAAgB,8G,EAAA,yG,EAAA,2I;AAAA,K;;;aAAhBA,gB;AAAgB,eAAhBA,gBAAgB,K;AAAA,kBAFf;;;;sEAEDA,gB,EAAgB;cAH5B,wDAG4B;eAHjB;AACV9+F,oBAAU,EAAE;AADF,S;AAGiB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;AC7B7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAyBao/F,Y;AAGX,4BAAoBx/F,IAApB,EAA8CjD,MAA9C,EAAsEG,KAAtE,EAA8F;AAAA;;AAAA;;AAA1E,aAAA8C,IAAA,GAAAA,IAAA;AAA0B,aAAAjD,MAAA,GAAAA,MAAA;AAAwB,aAAAG,KAAA,GAAAA,KAAA;AACpE,aAAKA,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACC,IAAV;AAAA,SADf,EAEGf,IAFH,CAEQ,4EAAqB,UAACs8E,QAAD,EAAWilB,OAAX;AAAA,iBAAuBjlB,QAAQ,CAACr7E,eAAT,KAA6BsgG,OAAO,CAACtgG,eAA5D;AAAA,SAArB,CAFR,EAGGvB,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,cAAIA,SAAS,CAACC,eAAV,IAA6B,QAAI,CAAC4C,UAAL,EAAjC,EAAoD;AAClD,oBAAI,CAAC7E,KAAL,CAAWQ,QAAX,CAAoB,IAAI,qDAAJ,CAAiB,EAAjB,CAApB;AACD;AACF,SAPH;AAQD;;;;6CAEoB;AACnB,cAAMgiG,UAAU,GAAG,IAAI34D,IAAJ,GAAWg2D,OAAX,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,CAA3D;AACA1+F,sBAAY,CAACC,OAAb,CAAqB,kBAArB,EAAyCohG,UAAU,CAAChkF,QAAX,EAAzC;AACD;;;uCAEW;AAAA;;AACV,cAAI,KAAKikF,uBAAL,CAA6B,8DAA7B,CAAJ,EAAmD;AACjD,gBAAMp9F,IAAI,GAAG,EAAb;AACA,gBAAMwe,GAAG,aAAM,qDAAN,kBAAT;AACA,mBAAO,KAAK/gB,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBxe,IAAzB,EAA+BrE,IAA/B,CACL,2DAAI,YAAM;AACR,sBAAI,CAAC0hG,kBAAL;AACD,aAFD,CADK,CAAP;AAKD;;AACD,iBAAO,gDAAG,EAAH,CAAP;AACD;;;yCAEgB;AACf,iBAAO,CAACvhG,YAAY,CAAC6/B,OAAb,CAAqB,kBAArB,CAAD,GAA4C,IAAI6I,IAAJ,GAAWg2D,OAAX,EAAnD;AACD;;;+BAEMx6F,I,EAAS;AAAA;;AACd,cAAMmnB,WAAW,qBAAannB,IAAb,CAAjB;AACAmnB,qBAAW,CAACtB,QAAZ,GAAuB,KAAKy3E,YAAL,CAAkBn2E,WAAW,CAACtB,QAA9B,CAAvB;AACAsB,qBAAW,CAAC/hB,QAAZ,GAAuB,KAAKm4F,QAAL,CAAcp2E,WAAd,CAAvB;AACA,cAAM3I,GAAG,aAAM,qDAAN,kBAAT;AACA,iBAAO,KAAK/gB,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyB2I,WAAzB,EAAsCxrB,IAAtC,CACL,2DAAI,UAAAL,IAAI,EAAI;AACV,gBAAIA,IAAI,CAAC8zC,KAAT,EAAgB;AACd,sBAAI,CAACouD,YAAL,CAAkBx9F,IAAlB;AACD;AACF,WAJD,CADK,CAAP;AAOD;;;qCAEY6lB,Q,EAAkB;AAC7BA,kBAAQ,GAAGA,QAAQ,CAACxjB,WAAT,EAAX;;AACA,cAAIwjB,QAAQ,CAACzO,KAAT,CAAe,GAAf,EAAoB,CAApB,MAA2B,6DAA/B,EAA+C;AAC7CyO,oBAAQ,GAAGA,QAAQ,CAACzO,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAX;AACD;;AACD,iBAAOyO,QAAP;AACD;;;iCAEgBsB,W,EAAoC;AAAA,cAAlB80E,KAAkB,uEAAV,UAAU;AACnD,cAAMp2E,QAAQ,GAAGsB,WAAW,CAACtB,QAAZ,CAAqBxjB,WAArB,EAAjB;AACA,cAAMo4F,IAAI,GAAG,KAAKC,UAAL,CAAgB,SAAhB,EAA2B70E,QAA3B,CAAb;AACA,iBAAO,kDAAgBsB,WAAW,CAAC80E,KAAD,CAA3B,EAAoCxB,IAApC,CAAP;AACD;;;mCAEkBA,I,EAAc50E,Q,EAAgB;AAC/CA,kBAAQ,GAAGA,QAAQ,CAACzS,OAAT,CAAiB,aAAjB,EAAgC,EAAhC,CAAX;AACAyS,kBAAQ,GAAGA,QAAQ,IAAI,MAAvB;;AACA,cAAI40E,IAAI,CAACl+F,MAAL,GAAc,EAAlB,EAAsB;AACpB,mBAAO,KAAKm+F,UAAL,CAAgBD,IAAI,GAAG50E,QAAvB,EAAiCA,QAAjC,CAAP;AACD;;AACD,iBAAO40E,IAAI,CAAC/5E,KAAL,CAAW,CAAX,EAAc,EAAd,CAAP;AACD;;;qCAEoByG,W,EAAkB;AACrC,eAAKqvE,OAAL,GAAelpF,IAAI,CAAC6Z,WAAW,CAAC/hB,QAAb,CAAnB;AACA,eAAKi4F,kBAAL;AACAvhG,sBAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,KAAKy6F,OAAtC;AACA16F,sBAAY,CAAC23E,UAAb,CAAwB,6DAAxB;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,gEAAxB;AACD;;;kCAES;AACR,eAAKj5E,MAAL,CAAY2L,aAAZ,CAA0B,SAA1B;AACArK,sBAAY,CAAC23E,UAAb,CAAwB,kBAAxB;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,UAAxB;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,eAAxB;AACAC,wBAAc,CAACD,UAAf,CAA0B,eAA1B;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,6DAAxB;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,0DAAxB;AACD;;;wCAEe;AACd,eAAK+iB,OAAL,GAAe,IAAf;AACA16F,sBAAY,CAAC23E,UAAb,CAAwB,UAAxB;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,eAAxB;AACAC,wBAAc,CAACD,UAAf,CAA0B,eAA1B;AACA33E,sBAAY,CAAC23E,UAAb,CAAwB,0DAAxB;AACA,eAAKj5E,MAAL,CAAY2L,aAAZ,CAA0B,SAA1B;AACA,iBAAO,KAAK1I,IAAL,CAAUoE,GAAV,WAAiB,qDAAjB,oBAAP;AACD;;;uCAEcrI,C,EAAQ;AACrB,cAAMikG,mBAAmB,GACvB,8FADF;AAEA,WAACjkG,CAAC,IAAIW,MAAM,CAAC6J,KAAb,EAAoB05F,WAApB,GAAkCD,mBAAlC;AACA,iBAAOA,mBAAP;AACD;;;+BAEMp8F,I,EAAS;AAAA;;AACd,cAAM8lB,WAAW,GAAG,MAAH,OAAG,CAAH,kBAAQ9lB,IAAR,CAAG,EAAS;AAAEs8F,2BAAe,EAAE,IAAIn5D,IAAJ,GAAWo5D,iBAAX;AAAnB,WAAT,CAApB;AACA,cAAMC,YAAY,GAAG/hG,YAAY,CAAC6/B,OAAb,CAAqB,gEAArB,CAArB;;AACA,cAAIkiE,YAAJ,EAAkB;AAChB12E,uBAAW,CAAC,gEAAD,CAAX,GAAiC02E,YAAjC;AACD;;AACD12E,qBAAW,CAAC/hB,QAAZ,GAAuB,KAAKm4F,QAAL,CAAcp2E,WAAd,CAAvB;AACA,iBAAO,KAAK1pB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,oBAA8C,KAAK6Q,yBAAL,CAA+B32E,WAA/B,CAA9C,EAA2FxrB,IAA3F,CACL,2DAAI,YAAM;AACR,oBAAI,CAAC6hG,YAAL,CAAkBn8F,IAAlB;AACD,WAFD,CADK,CAAP;AAKD;;;wCAEe/F,I,EAAS;AACvB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,oBAA8C3xF,IAA9C,CAAP;AACD;;;sCAEaA,I,EAAS;AAAA;;AACrB,cAAM6rB,WAAW,GAAG,MAAH,OAAG,CAAH,EAAG,EAAK7rB,IAAL,CAApB;AACA6rB,qBAAW,CAAC/hB,QAAZ,GAAuB,KAAKm4F,QAAL,CAAcp2E,WAAd,CAAvB;AACA,iBAAO,KAAK1pB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,kBAA4C9lE,WAA5C,EAAyDxrB,IAAzD,CACL,2DAAI,YAAM;AACR,oBAAI,CAAC6hG,YAAL,CAAkBliG,IAAlB;AACD,WAFD,CADK,CAAP;AAKD;;;uCAEcA,I,EAAS;AAAA;;AACtB,cAAM6rB,WAAW,GAAG,MAAH,OAAG,CAAH,EAAG,EAAK7rB,IAAL,CAApB;AACA6rB,qBAAW,CAACgW,YAAZ,GAA2B,KAAKogE,QAAL,CAAcp2E,WAAd,EAA2B,cAA3B,CAA3B;AACAA,qBAAW,CAAC/hB,QAAZ,GAAuB,KAAKm4F,QAAL,CAAcp2E,WAAd,EAA2B,UAA3B,CAAvB;AACAA,qBAAW,CAACiW,gBAAZ,GAA+B,KAAKmgE,QAAL,CAAcp2E,WAAd,EAA2B,kBAA3B,CAA/B;AACA,iBAAOA,WAAW,CAACtB,QAAnB;AACA,iBAAO,KAAKpoB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,4BAAsD9lE,WAAtD,EAAmExrB,IAAnE,CACL,2DAAI,YAAM;AACR,oBAAI,CAAC6hG,YAAL,CAAkBliG,IAAlB;AACD,WAFD,CADK,CAAP;AAKD;;;sCAEU;AACT,cAAM0E,IAAI,GAAG;AAAEovC,iBAAK,EAAEtzC,YAAY,CAAC6/B,OAAb,CAAqB,OAArB;AAAT,WAAb;AACA,cAAMnd,GAAG,aAAM,qDAAN,iBAAT;AACA,iBAAO,KAAK/gB,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBxe,IAAzB,CAAP;AACD;;;qCAES;AACR,iBAAO,KAAKw2F,OAAL,IAAgB16F,YAAY,CAAC6/B,OAAb,CAAqB,UAArB,CAAvB;AACD;;;6CAEoBnd,G,EAAa;AAChCA,aAAG,GAAGA,GAAG,CAACpL,OAAJ,CAAY,qDAAZ,EAAoB,EAApB,CAAN;AACA,cAAM2qF,iBAAiB,GAAa,CAClC,eADkC,EAElC,cAFkC,EAGlC,uBAHkC,EAIlC,2BAJkC,EAKlC,8BALkC,EAMlC,kBANkC,EAOlC,kBAPkC,EAQlC,eARkC,EASlC,4BATkC,EAUlC,gBAVkC,EAWlC,kBAXkC,EAYlC,kBAZkC,EAalC,sBAbkC,EAclC,gBAdkC,EAelC,oCAfkC,EAgBlC,gBAhBkC,EAiBlC,oBAjBkC,EAkBlC,aAlBkC,EAmBlC,cAnBkC,EAoBlC,sBApBkC,EAqBlC,aArBkC,EAsBlC,gBAtBkC,EAuBlC,iBAvBkC,EAwBlC,gBAxBkC,EAyBlC,sBAzBkC,EA0BlC,uCA1BkC,EA2BlC,yCA3BkC,EA4BlC,qBA5BkC,EA6BlC,qBA7BkC,EA8BlC,qBA9BkC,EA+BlC,gBA/BkC,EAgClC,gBAhCkC,EAiClC,gBAjCkC,EAkClC,mBAlCkC,EAmClC,sBAnCkC,EAoClC,kBApCkC,EAqClC,kBArCkC,EAsClC,4BAtCkC,EAuClC,wBAvCkC,EAwClC,gBAxCkC,EAyClC,oBAzCkC,EA0ClC,qBA1CkC,EA2ClC,gBA3CkC,EA4ClC,eA5CkC,CAApC;;AA8CA,cAAIA,iBAAiB,CAAC1wF,QAAlB,CAA2BmR,GAA3B,CAAJ,EAAqC;AACnC,mBAAO,IAAP;AACD;;AACD,cAAIw/E,aAAa,GAAG,KAApB;AACAD,2BAAiB,CAACvzF,OAAlB,CAA0B,UAAAb,IAAI,EAAI;AAChC,gBAAI6U,GAAG,CAACnR,QAAJ,CAAa1D,IAAb,CAAJ,EAAwB;AACtBq0F,2BAAa,GAAG,IAAhB;AACD;AACF,WAJD;AAKA,iBAAOA,aAAP;AACD;;;oCAEW5kG,E,EAAY;AACtB,iBAAO,KAAKqE,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,yBAA2CzI,EAA3C,OAAP;AACD;;;4CAEmB;AAClB,iBAAO,KAAKqE,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,oBAA6ClG,IAA7C,CAAkD,2DAAI,UAAAL,IAAI;AAAA,mBAAIA,IAAI,CAACg7E,OAAT;AAAA,WAAR,CAAlD,CAAP;AACD;;;uCAEmC;AAAA,cAAvB3uE,KAAuB,uEAAf,CAAe;AAAA,cAAZC,MAAY,uEAAH,CAAG;AAClC,cAAM4W,GAAG,aAAM,qDAAN,oCAAsC7W,KAAtC,qBAAsDC,MAAtD,CAAT;AACA,cAAM5H,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwBxe,IAAxB,CAAP;AACD;;;qCAEYmK,K,EAAehL,I,EAAc;AACxC,cAAMqf,GAAG,aAAM,qDAAN,qBAAT;AACA,cAAMxe,IAAI,GAAG;AAAEmK,iBAAK,EAALA,KAAF;AAAShL,gBAAI,EAAJA;AAAT,WAAb;AACA,iBAAO,KAAK1B,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBxe,IAAzB,CAAP;AACD;;;uCAEc1E,I,EAAgB;AAC7B,iBAAO,KAAKmC,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,4BAAgDn3F,IAAI,CAAClC,EAArD,QAA4DkC,IAA5D,CAAP;AACD;;;wCAEelC,E,EAAY;AAC1B,cAAMolB,GAAG,aAAM,qDAAN,6BAA+BplB,EAA/B,MAAT;AACA,cAAM4G,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,WAAsB+gB,GAAtB,EAA2Bxe,IAA3B,CAAP;AACD;;;uCAEmC;AAAA,cAAvB2H,KAAuB,uEAAf,CAAe;AAAA,cAAZC,MAAY,uEAAH,CAAG;AAClC,cAAM4W,GAAG,aAAM,qDAAN,oCAAsC7W,KAAtC,qBAAsDC,MAAtD,CAAT;AACA,cAAM5H,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwBxe,IAAxB,CAAP;AACD;;;qCAEYmK,K,EAAehL,I,EAAc;AACxC,cAAMqf,GAAG,aAAM,qDAAN,qBAAT;AACA,cAAMxe,IAAI,GAAG;AAAEmK,iBAAK,EAALA,KAAF;AAAShL,gBAAI,EAAJA;AAAT,WAAb;AACA,iBAAO,KAAK1B,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBxe,IAAzB,CAAP;AACD;;;wCAEe5G,E,EAAY;AAC1B,cAAMolB,GAAG,aAAM,qDAAN,6BAA+BplB,EAA/B,MAAT;AACA,cAAM4G,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,WAAsB+gB,GAAtB,EAA2Bxe,IAA3B,CAAP;AACD;;;qCAE6C;AAAA,cAAnC2H,KAAmC,uEAA3B,CAA2B;AAAA,cAAxBC,MAAwB,uEAAf,CAAe;AAAA,cAAZ4yE,KAAY,uEAAJ,EAAI;AAC5C,iBAAO,KAAK/8E,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,mCAAqD8F,KAArD,qBAAqEC,MAArE,gBAAiF4yE,KAAjF,EAAP;AACD;;;2CAEkB;AACjB,iBAAO,KAAK/8E,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,wBAAP;AACD;;;4CAEmBvG,I,EAAW;AAC7B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,iCAA2D3xF,IAA3D,CAAP;AACD;;;sCAEa;AACZ,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,qBAAP;AACD;;;yCAEgBvG,I,EAAW;AAC1B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,sBAAgD3xF,IAAhD,CAAP;AACD;;;0CAEiBA,I,EAAW;AAC3B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD3xF,IAArD,CAAP;AACD;;;yCAEgB;AACf,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,qBAA8ClG,IAA9C,CAAmD,2DAAI,UAAA6c,QAAQ;AAAA,mBAAIA,QAAQ,CAAC89D,OAAb;AAAA,WAAZ,CAAnD,CAAP;AACD;;;8CAEqB;AACpB,iBAAO,KAAK74E,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,qBAA+C,EAA/C,CAAP;AACD;;;mCAEUhlE,O,EAAkB;AAC3B,cAAMzJ,GAAG,aAAM,qDAAN,oBAAT;;AACA,cAAIyJ,OAAO,CAAC7uB,EAAZ,EAAgB;AACd,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,WAAwBj0E,GAAxB,SAA8ByJ,OAAO,CAAC7uB,EAAtC,QAA6C6uB,OAA7C,CAAP;AACD;;AACD,iBAAO,KAAKxqB,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyByJ,OAAzB,CAAP;AACD;;;sCAEahP,G,EAAa;AACzB,cAAIA,GAAG,KAAK,KAAZ,EAAmB;AACjB,mBAAO,KAAKxb,IAAL,qBAAyB,qDAAzB,oCAAP;AACD;;AACD,iBAAO,KAAKA,IAAL,qBAAyB,qDAAzB,oCAAyDwb,GAAzD,EAAP;AACD;;;sCAEagP,O,EAAc;AAC1B,iBAAO,KAAKxqB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,uBAAiDhlE,OAAjD,CAAP;AACD;;;uCAEc3sB,I,EAAW;AACxB,cAAMw3F,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,kBAAQ,CAAC1qC,MAAT,CAAgB,UAAhB,EAA4B9sD,IAAI,CAACoI,IAAjC;AACAovF,kBAAQ,CAAC1qC,MAAT,CAAgB,UAAhB,EAA4B9sD,IAAI,CAAC4P,QAAjC;AAEA,cAAMkqE,OAAO,GAAG,IAAI,gEAAJ,CAAgB,MAAhB,YAA2B,qDAA3B,iCAA+D0d,QAA/D,CAAhB;AAEA,iBAAO,KAAKr1F,IAAL,CAAU23E,OAAV,CAAkBA,OAAlB,CAAP;AACD;;;kDAEyBvvD,Q,EAAgB;AACxC,iBAAO,KAAKpoB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD;AAAEpnE,oBAAQ,EAARA;AAAF,WAArD,CAAP;AACD;;;4CAEmBvqB,I,EAAS;AAC3BA,cAAI,CAAC8J,QAAL,GAAgB,KAAKm4F,QAAL,CAAcjiG,IAAd,EAAoB,UAApB,CAAhB;AACA,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,qBAA+C3xF,IAA/C,CAAP;AACD;;;+CAEsBA,I,EAAS;AAC9B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,wBAAkD;AACvDnN,mBAAO,EAAExkF,IAAI,CAACwkF,OADyC;AAEvDC,0BAAc,EAAEzkF,IAAI,CAACykF;AAFkC,WAAlD,CAAP;AAID;;;+CAEsBzkF,I,EAAS;AAC9B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,wBAAkD;AAAEpnE,oBAAQ,EAAEvqB,IAAI,CAACuqB;AAAjB,WAAlD,CAAP;AACD;;;+CAE2C;AAAA,cAAvBle,KAAuB,uEAAf,CAAe;AAAA,cAAZC,MAAY,uEAAH,CAAG;AAC1C,cAAM4W,GAAG,aAAM,qDAAN,wCAA0C7W,KAA1C,qBAA0DC,MAA1D,CAAT;AACA,iBAAO,KAAKnK,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,CAAP;AACD;;;uCAEcljB,I,EAAW;AACxB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,oBAA8C,KAAK6Q,yBAAL,CAA+BxiG,IAA/B,CAA9C,CAAP;AACD;;;oDAEiD;AAAA,cAAhBA,IAAgB,uEAAJ,EAAI;AAEhD,cAAM2iG,UAAU,GAAG/gG,QAAQ,CAACC,MAAT,CAAgBia,KAAhB,CAAsB,IAAtB,EAA4B7S,IAA5B,CAAiC,UAAA25F,GAAG;AAAA,mBAAIA,GAAG,CAACC,UAAJ,CAAe,8DAAf,CAAJ;AAAA,WAApC,CAAnB;;AACA,cAAIF,UAAJ,EAAgB;AACd3iG,gBAAI,CAAC,8DAAD,CAAJ,GAAwB2iG,UAAU,CAAC7mF,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAxB;AACD;;AACD,iBAAO9b,IAAP;AACD;;;qCAEiC;AAAA,cAAvBqM,KAAuB,uEAAf,CAAe;AAAA,cAAZC,MAAY,uEAAH,CAAG;AAChC,cAAM4W,GAAG,aAAM,qDAAN,kCAAoC7W,KAApC,qBAAoDC,MAApD,CAAT;AACA,iBAAO,KAAKnK,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,CAAP;AACD;;;qCAEYljB,I,EAAc;AACzB,cAAMkjB,GAAG,aAAM,qDAAN,mBAAT;;AACA,cAAIljB,IAAI,CAAClC,EAAT,EAAa;AACX,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,WAAwBj0E,GAAxB,SAA8BljB,IAAI,CAAClC,EAAnC,QAA0CkC,IAA1C,CAAP;AACD;;AACD,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,CAAoBzuE,GAApB,EAAyBljB,IAAzB,CAAP;AACD;;;qCAEY8iG,Q,EAAkB;AAC7B,iBAAO,KAAK3gG,IAAL,qBAAyB,qDAAzB,2BAAgD2gG,QAAhD,OAAP;AACD;;;0CAEiB9iG,I,EAAW;AAC3B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD3xF,IAArD,CAAP;AACD;;;sCAEaA,I,EAAW;AACvB,cAAM6rB,WAAW,GAAG,MAAH,OAAG,CAAH,EAAG,EAAK7rB,IAAL,CAApB;AACA6rB,qBAAW,CAAC/hB,QAAZ,GAAuB,KAAKm4F,QAAL,CAAcp2E,WAAd,CAAvB;AACA,iBAAOA,WAAW,CAACtB,QAAnB;AACA,iBAAO,KAAKpoB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,mBAA6C9lE,WAA7C,CAAP;AACD;;;qCAEiC;AAAA,cAAvBxf,KAAuB,uEAAf,CAAe;AAAA,cAAZC,MAAY,uEAAH,CAAG;AAChC,cAAM4W,GAAG,aAAM,qDAAN,mCAAqC7W,KAArC,qBAAqDC,MAArD,CAAT;AACA,cAAM5H,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwBxe,IAAxB,CAAP;AACD;;;qCAEY2lB,M,EAAgB;AAC3B,cAAM3lB,IAAI,GAAG;AAAE2lB,kBAAM,EAANA;AAAF,WAAb;AACA,iBAAO,KAAKloB,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,sBAAgDjtF,IAAhD,CAAP;AACD;;;qCAEY2lB,M,EAAgB;AAC3B,iBAAO,KAAKloB,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,4BAAgD9sE,MAAM,CAACvsB,EAAvD,QAA8DusB,MAA9D,CAAP;AACD;;;mCAEUvsB,E,EAAY;AACrB,cAAMolB,GAAG,aAAM,qDAAN,4BAA8BplB,EAA9B,MAAT;AACA,cAAM4G,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwBxe,IAAxB,CAAP;AACD;;;qCAEY5G,E,EAAY;AACvB,iBAAO,KAAKqE,IAAL,qBAAyB,qDAAzB,4BAAiDrE,EAAjD,OAAP;AACD;;;qCAEYA,E,EAAY;AACvB,cAAMolB,GAAG,aAAM,qDAAN,4BAA8BplB,EAA9B,MAAT;AACA,cAAM4G,IAAI,GAAG,EAAb;AACA,iBAAO,KAAKvC,IAAL,CAAUoE,GAAV,CAAmB2c,GAAnB,EAAwBxe,IAAxB,CAAP;AACD;;;gDAEuBmK,K,EAAa;AACnC,cAAMnK,IAAI,GAAG;AAAEmK,iBAAK,EAALA;AAAF,WAAb;AACA,iBAAO,KAAK1M,IAAL,CAAUwvF,IAAV,WAAkB,qDAAlB,6CAAkEjtF,IAAlE,CAAP;AACD;;;kDAEyBmK,K,EAAezQ,I,EAAY;AACnD,cAAMsG,IAAI,GAAG;AAAEmK,iBAAK,EAALA,KAAF;AAASzQ,gBAAI,EAAJA;AAAT,WAAb;AACA,iBAAO,KAAK+D,IAAL,CAAUwvF,IAAV,WAAkB,qDAAlB,+CAAoEjtF,IAApE,CAAP;AACD;;;0CAEiBq+F,a,EAA4B;AAC5C,cAAIA,aAAa,CAACjlG,EAAlB,EAAsB;AACpB,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,iCAAqD4L,aAAa,CAACjlG,EAAnE,QAA0EilG,aAA1E,CAAP;AACD;;AACD,iBAAO,KAAK5gG,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqDoR,aAArD,CAAP;AACD;;;qCAES;AACR,iBAAO,KAAK5gG,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,mBAAP;AACD;;;uCAEW;AACV,iBAAO,KAAKpE,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,sBAAP;AACD;;;kCAESvG,I,EAAS;AACjBA,cAAI,CAAC8J,QAAL,GAAgB,KAAKm4F,QAAL,CAAcjiG,IAAd,CAAhB;AACA,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,uBAAiD3xF,IAAjD,CAAP;AACD;;;sCAEaA,I,EAAS;AACrB,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,2BAAqD3xF,IAArD,CAAP;AACD;;;+CAEsB;AACrB,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,mBAAP;AACD;;;4CAEmB;AAClB,iBAAO,KAAKpE,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,2BAAP;AACD;;;yCAEgBvG,I,EAAW;AAC1B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,gCAA0D;AAAE3yC,wBAAY,EAAEh/C;AAAhB,WAA1D,CAAP;AACD;;;4CAEmBA,I,EAAW;AAC7B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,mCAA6D;AAAEqR,mBAAO,EAAEhjG;AAAX,WAA7D,CAAP;AACD;;;2CAEkBA,I,EAAW;AAC5B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,yCAAmE;AAAEqR,mBAAO,EAAEhjG;AAAX,WAAnE,CAAP;AACD;;;yCAEgBA,I,EAAW;AAC1B,iBAAO,KAAKmC,IAAL,CAAUoE,GAAV,WAAsB,qDAAtB,4CAA8DvG,IAAI,CAAClC,EAAnE,EAAP;AACD;;;uCAEckC,I,EAAW;AACxB,cAAIA,IAAI,CAAClC,EAAT,EAAa;AACX,mBAAO,KAAKqE,IAAL,CAAUg1F,KAAV,WAAwB,qDAAxB,gCAAoDn3F,IAAI,CAAClC,EAAzD,QAAgEkC,IAAhE,CAAP;AACD;;AACD,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,0BAAoD3xF,IAApD,CAAP;AACD;;;0CAEiBA,I,EAAW;AAC3B,iBAAO,KAAKmC,IAAL,qBAAyB,qDAAzB,gCAAqDnC,IAAI,CAAClC,EAA1D,OAAP;AACD;;;8CAEqBkC,I,EAAW;AAC/B,iBAAO,KAAKmC,IAAL,CAAUwvF,IAAV,WAAuB,qDAAvB,qCAA+D;AAAEsR,4BAAgB,EAAEjjG;AAApB,WAA/D,CAAP;AACD;;;sCAE2D;AAAA,cAArC63F,SAAqC,uEAAzB,WAAyB;AAAA,cAAZhvF,MAAY;AAC1D,iBAAO,UAACxG,KAAD,EAA+B;AAEpC,6EAAwBA,KAAK,CAACC,aAAN,IAAuBD,KAA/C;;AAGA,mBAAO,gDAAGwG,MAAH,CAAP;AACD,WAND;AAOD;;;gDAIuBq6F,U,EAAoB;AAC1C,cAAMC,CAAC,GAAG,IAAIj6D,IAAJ,EAAV;AACAi6D,WAAC,CAACC,OAAF,CAAUD,CAAC,CAACjE,OAAF,KAAc,IAAxB;AACA,cAAMmE,OAAO,qBAAcF,CAAC,CAACG,WAAF,EAAd,CAAb;AAEA1hG,kBAAQ,CAACC,MAAT,aAAqBqhG,UAArB,+BAAoDG,OAApD;;AACA,cAAI,CAACzhG,QAAQ,CAACC,MAAT,CAAgBkQ,QAAhB,WAA4BmxF,UAA5B,OAAL,EAAiD;AAC/C,mBAAO,IAAP;AACD;;AACD,iBAAO,KAAP;AACD;;;;;;;uBAxgBUvB,Y,EAAY,uH,EAAA,8G,EAAA,yG;AAAA,K;;;aAAZA,Y;AAAY,eAAZA,YAAY,K;AAAA,kBAFX;;;;sEAEDA,Y,EAAY;cAHxB,wDAGwB;eAHb;AACVp/F,oBAAU,EAAE;AADF,S;AAGa,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAgBO,aAASghG,uBAAT,CAAiCtc,OAAjC,EAA4D;AACjE,aAAO,UAAU9lF,KAAV,EAAiB8d,MAAjB,EAA8B;AACnC,YAAMukF,SAAS,GAAGvc,OAAO,CAAC9lF,KAAD,EAAQ8d,MAAR,CAAzB;;AAEA,YACEA,MAAM,CAACvU,IAAP,KAAgB,4EAAgBo4D,4BAAhC,IACA7jD,MAAM,CAAC,SAAD,CAAN,CAAkBgvE,uBADlB,IAEA,CAAChvE,MAAM,CAAC,SAAD,CAAN,CAAkB8zB,eAHrB,EAIE;AACA,cAAM0wD,UAAU,GAAGjjG,YAAY,CAAC6/B,OAAb,CAAqB,mEAArB,MAA+C,MAA/C,GAAwD,IAAxD,GAA+D,KAAlF;;AACA,cAAIojE,UAAJ,EAAgB;AACd,gBAAMC,YAAY,GAAGljG,YAAY,CAAC6/B,OAAb,CAAqB,0DAArB,MAAsC,MAAtC,GAA+C,IAA/C,GAAsD,KAA3E;AACA,gBAAMsjE,oBAAoB,GAAGpnF,IAAI,CAACo/E,SAAL,CAAe;AAAEhQ,+BAAiB,EAAE6X,SAAS,CAAC3vF,IAAV,CAAe83E;AAApC,aAAf,CAA7B;;AACA,gBAAI+X,YAAJ,EAAkB;AAChBljG,0BAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCkjG,oBAAtC;AACD,aAFD,MAEO;AACLvrB,4BAAc,CAAC33E,OAAf,CAAuB,eAAvB,EAAwCkjG,oBAAxC;AACD;AACF;AACF;;AACD,eAAOH,SAAP;AACD,OApBD;AAqBD;;AAEM,aAASI,oBAAT,CAA8B3c,OAA9B,EAAyD;AAC9D,aAAO,UAAU9lF,KAAV,EAAiB8d,MAAjB,EAAyB;AAC9B,YAAMukF,SAAS,GAAGvc,OAAO,CAAC9lF,KAAD,EAAQ8d,MAAR,CAAzB;;AACA,YAAIA,MAAM,CAACvU,IAAP,KAAgB,gDAApB,EAA0B;AACxB,cAAM+4F,UAAU,GAAGjjG,YAAY,CAAC6/B,OAAb,CAAqB,mEAArB,MAA+C,MAA/C,GAAwD,IAAxD,GAA+D,KAAlF;AACA,cAAMqjE,YAAY,GAAGljG,YAAY,CAAC6/B,OAAb,CAAqB,0DAArB,MAAsC,MAAtC,GAA+C,IAA/C,GAAsD,KAA3E;;AACA,cAAIojE,UAAJ,EAAgB;AACd,gBAAMI,YAAY,GAAGH,YAAY,GAC7BljG,YAAY,CAAC6/B,OAAb,CAAqB,eAArB,CAD6B,GAE7B+3C,cAAc,CAAC/3C,OAAf,CAAuB,eAAvB,CAFJ;;AAGA,gBAAI;AACF,kBAAMyjE,kBAAkB,GAAGvnF,IAAI,CAACC,KAAL,CAAWqnF,YAAX,CAA3B;;AACA,kBAAIC,kBAAkB,IAAIA,kBAAkB,CAAC,mBAAD,CAA5C,EAAmE;AACjE,oBAAMC,MAAM,GAAG,MAAH,OAAG,CAAH,kBAAQP,SAAR,CAAG,EAAc;AAAE3vF,sBAAI,EAAE,MAAF,OAAE,CAAF,kBAAO2vF,SAAS,CAAC3vF,IAAjB,CAAE,EAAwBiwF,kBAAxB;AAAR,iBAAd,CAAf;AACA,uBAAOC,MAAP;AACD;AACF,aAND,CAME,WAAM;AACN,kBAAIL,YAAJ,EAAkB;AAChBljG,4BAAY,CAAC23E,UAAb,CAAwB,eAAxB;AACD,eAFD,MAEO;AACLC,8BAAc,CAACD,UAAf,CAA0B,eAA1B;AACD;AACF;AACF,WAjBD,MAiBO;AACL,gBAAIurB,YAAJ,EAAkB;AAChBljG,0BAAY,CAAC23E,UAAb,CAAwB,eAAxB;AACD,aAFD,MAEO;AACLC,4BAAc,CAACD,UAAf,CAA0B,eAA1B;AACD;AACF;AACF;;AAED,eAAOqrB,SAAP;AACD,OAhCD;AAiCD;;AAED,QAAMQ,YAAY,GAAiC,CAACJ,oBAAD,EAAuBL,uBAAvB,EAAgD,qEAAhD,CAAnD;;QAUaU,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,iBAFd,CAAC;AAAExhG,eAAO,EAAE,wEAAX;AAAkCC,gBAAQ,EAAE;AAA5C,OAAD,C;AAAgE,gBANlE,CACP,4DAAcE,OAAd,CAAsB,yCAAtB,CADO,EAEP,wDAAYA,OAAZ,CAAoB,0CAApB,EAA8B;AAAEohG,oBAAY,EAAZA;AAAF,OAA9B,CAFO,EAGP,yEAAoBE,UAApB,CAA+B;AAAEC,cAAM,EAAE,GAAV;AAAeC,eAAO,EAAE,oEAAUthD;AAAlC,OAA/B,CAHO,EAIP,+EAA4BlgD,OAA5B,EAJO,CAMkE;;;;0HAEhEqhG,c,EAAc;AAAA;AAAA,O;AAAA,K;;;sEAAdA,c,EAAc;cAT1B,sDAS0B;eATjB;AACRhhG,iBAAO,EAAE,CACP,4DAAcL,OAAd,CAAsB,yCAAtB,CADO,EAEP,wDAAYA,OAAZ,CAAoB,0CAApB,EAA8B;AAAEohG,wBAAY,EAAZA;AAAF,WAA9B,CAFO,EAGP,yEAAoBE,UAApB,CAA+B;AAAEC,kBAAM,EAAE,GAAV;AAAeC,mBAAO,EAAE,oEAAUthD;AAAlC,WAA/B,CAHO,EAIP,+EAA4BlgD,OAA5B,EAJO,CADD;AAORM,mBAAS,EAAE,CAAC;AAAET,mBAAO,EAAE,wEAAX;AAAkCC,oBAAQ,EAAE;AAA5C,WAAD;AAPH,S;AASiB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5E3B,QAAY2hG,oBAAZ;;AAAA,eAAYA,oBAAZ,EAAgC;AAC9B;AACA;AACD,KAHD,EAAYA,oBAAoB,KAApBA,oBAAoB,MAAhC;;QAKaC,mB,GAGX,6BAAmB33E,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAO25F,oBAAoB,CAACE,sBAA5B;AAE0B,K;;QAGxBC,c,GAGX,wBAAmB73E,OAAnB,EAAiC;AAAA;;AAAd,WAAAA,OAAA,GAAAA,OAAA;AAFV,WAAAjiB,IAAA,GAAO25F,oBAAoB,CAACI,gBAA5B;AAE0B,K;;QAQxBC,gB,GACX,0BAAoBjtB,OAApB,EAAsC;AAAA;;AAAlB,WAAAA,OAAA,GAAAA,OAAA;AAGpB,WAAAktB,mBAAA,GAAuC,KAAKltB,OAAL,CAAap3E,IAAb,CACrC,6DAAOgkG,oBAAoB,CAACE,sBAA5B,CADqC,EAErC,2DAAI,UAACtlF,MAAD;AAAA,eAAiCA,MAAM,CAAC0N,OAAxC;AAAA,OAAJ,CAFqC,EAGrC,iEAAU,UAAAA,OAAO,EAAI;AACnB,eAAO,uEAAG,oEAAH,CAAP;AACD,OAFD,CAHqC,CAAvC;AASA,WAAAi4E,cAAA,GAAkC,KAAKntB,OAAL,CAAap3E,IAAb,CAChC,6DAAOgkG,oBAAoB,CAACI,gBAA5B,CADgC,EAEhC,2DAAI,UAACxlF,MAAD;AAAA,eAA4BA,MAAM,CAAC0N,OAAnC;AAAA,OAAJ,CAFgC,EAGhC,iEAAU,YAAM;AACd,eAAO,uEAAG,oEAAH,CAAP;AACD,OAFD,CAHgC,CAAlC;AAZwC,K;;;uBAD7B+3E,gB,EAAgB,6G;AAAA,K;;;aAAhBA,gB;AAAgB,eAAhBA,gBAAgB,K;AAAA,kBAFf;;;AAMZ,gBADC,8DACD,G,0BAAA,E,qBAAA,E,MAAA;;AASA,gBADC,8DACD,G,0BAAA,E,gBAAA,E,MAAA;;;sEAbWA,gB,EAAgB;cAH5B,wDAG4B;eAHjB;AACVniG,oBAAU,EAAE;AADF,S;AAGiB,Q;;;;;;;;;;AA2BtB,aAAS0kF,OAAT,GAAyE;AAAA,UAAxD9lF,KAAwD,uEAAhC,EAAgC;AAAA,UAA5B8d,MAA4B;;AAC9E,cAAQA,MAAM,CAACvU,IAAf;AACE,aAAK25F,oBAAoB,CAACE,sBAA1B;AAAkD;AAChD,mBAAO;AAAEp7F,qBAAO,EAAE8V,MAAM,CAAC0N,OAAlB;AAA2BjW,sBAAQ,EAAE;AAArC,aAAP;AACD;;AAED,aAAK2tF,oBAAoB,CAACI,gBAA1B;AAA4C;AAC1C,mBAAO;AAAE/tF,sBAAQ,EAAE,IAAZ;AAAkBvN,qBAAO,EAAE;AAA3B,aAAP;AACD;;AAED;AAAS;AACP,mBAAOhI,KAAP;AACD;AAXH;AAaD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjEG;;AAIE;;AACE;;AACE;;AACE;;AAAQ;;AAAwB;;AAClC;;AACF;;AACF;;AACF;;;;;;AA2CgB;;AAGG;;AAA6B;;;;AAD9B;;;;;;AAHJ;;AACE;;AAKF;;;;;;AAJI;;AAAA;;;;;;AAMN;;AAA4E;;AAAkB;;;;;;AAAlB;;AAAA;;;;;;;;AA/CtF;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAQ;;AAAe;;AACzB;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACE;;AAAwE;;AAAgB;;AACxF;;AACE;;AAUA;;AAGE;AAAA;;AAAA;;AAAA,yCAAqD,UAArD,GAAkE,MAAlE,GAA2E,UAA3E;AAAqF,SAArF;;AAEA;;AACF;;AACF;;AACA;;AAOF;;AACA;;AACA;;AACE;;AAME;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;;;AA/CU;;AAAA;;AAwBQ;;AAAA;;AAQH;;AAAA;;AAMD;;AAAA;;;;;;;;AAYZ;;AAQE;AAAA;;AAAA;;AAAA;AAAA,WAAmB,SAAnB,EAAmB;AAAA;;AAAA;;AAAA;AAAA,SAAnB;;AAED;;;;;;AARC,6FAAmB,kBAAnB,EAAmB,wBAAnB,EAAmB,kBAAnB,EAAmB,wBAAnB,EAAmB,MAAnB,EAAmB,YAAnB,EAAmB,QAAnB,EAAmB,cAAnB,EAAmB,UAAnB,EAAmB,gBAAnB;;;;;;;;AAWA;;AAME;AAAA;;AAAA;;AAAA;AAAA,WAA0B,cAA1B,EAA0B;AAAA;;AAAA;;AAAA;AAAA,SAA1B;;AAED;;;;;;AAPC,mGAAyB,MAAzB,EAAyB,YAAzB,EAAyB,QAAzB,EAAyB,cAAzB,EAAyB,UAAzB,EAAyB,gBAAzB;;;;;;AADF;;;;;;AAEE;;;;;;AAfJ;;AAYA;;;;;;;;AAXE,6FAAsC,UAAtC,EAAsC,IAAtC;;;;;;AAlEJ;;AAgEA;;;;;;;;AAhEc,sHAA0D,UAA1D,EAA0D,GAA1D;;;;;;AA6FpB;;;;QCjGa0jG,uBAAuB;AA6BlC,uCACUrwF,KADV,EAEUnV,KAFV,EAGUmpB,WAHV,EAIUrpB,aAJV,EAKUspB,cALV,EAMU9T,mBANV,EAMkD;AAAA;;AALxC,aAAAH,KAAA,GAAAA,KAAA;AACA,aAAAnV,KAAA,GAAAA,KAAA;AACA,aAAAmpB,WAAA,GAAAA,WAAA;AACA,aAAArpB,aAAA,GAAAA,aAAA;AACA,aAAAspB,cAAA,GAAAA,cAAA;AACA,aAAA9T,mBAAA,GAAAA,mBAAA;AARV,aAAA7K,QAAA,GAAW,EAAX;AASI;;AApC8B;AAAA;AAAA,mCAsCvB;AAAA;;AACT,eAAK3K,aAAL,CAAmB27C,gBAAnB,CAAoClpC,IAApC,CAAyC,IAAzC;AACA,eAAKzS,aAAL,CAAmB6E,cAAnB,CAAkC4N,IAAlC,CAAuC,IAAvC;AAEA,eAAKkzF,WAAL,GAAmB,KAAKt8E,WAAL,CAAiB7iB,KAAjB,CAAuB;AACxCmE,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWjE,QAAZ,CAAL;AAD8B,WAAvB,CAAnB;AAIA,eAAK2O,KAAL,CAAWiF,MAAX,CAAkBpZ,IAAlB,CAAuB,6EAAe,IAAf,CAAvB,EAA6CN,SAA7C,CAAuD,UAAAO,UAAU,EAAI;AACnE,oBAAI,CAACq/E,IAAL,GAAYr/E,UAAU,CAACq/E,IAAvB;AACA,oBAAI,CAAC5J,MAAL,GAAcz1E,UAAU,CAACy1E,MAAzB;AACA,oBAAI,CAACgvB,QAAL,GAAgBC,kBAAkB,CAAC1kG,UAAU,CAACykG,QAAZ,CAAlC;;AACA,oBAAI,CAAC1lG,KAAL,CAAWQ,QAAX,CAAoB,IAAI,yDAAJ,CAAe;AAAE8/E,kBAAI,EAAE,QAAI,CAACA,IAAb;AAAmB5J,oBAAM,EAAE,QAAI,CAACA;AAAhC,aAAf,CAApB;AACD,WALD;AAOA,eAAK12E,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACkoF,aAAV;AAAA,WADf,EAEGhpF,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACoB,KAAD,EAA+B;AACxC,oBAAI,CAACzB,SAAL,GAAiByB,KAAK,CAAC8E,UAAN,IAAoB9E,KAAK,CAACkuF,6BAA3C;AACA,oBAAI,CAAC18D,YAAL,GAAoBxxB,KAAK,CAACwxB,YAA1B;;AACA,gBAAI,CAAC,QAAI,CAACxpB,OAAN,IAAiBhI,KAAK,CAACgI,OAA3B,EAAoC;AAElC,kBAAI,QAAI,CAACwL,mBAAL,CAAyB68B,gBAAzB,CAA0CrwC,KAAK,CAACgI,OAAN,CAAc6K,UAAd,CAAyBqvF,OAAnE,CAAJ,EAAiF;AAC/E,wBAAI,CAAC4B,gBAAL,GAAwB,IAAxB;AACD;AACF;;AACD,oBAAI,CAAC97F,OAAL,GAAehI,KAAK,CAACgI,OAArB;;AACA,gBAAIhI,KAAK,CAACoW,gBAAV,EAA4B;AAC1B,kBAAIpW,KAAK,CAACoW,gBAAN,CAAuBG,OAA3B,EAAoC;AAClC,wBAAI,CAACH,gBAAL,GAAwBpW,KAAK,CAACoW,gBAAN,CAAuBG,OAAvB,IAAkC,EAA1D;AACD;;AACD,kBAAI,QAAI,CAACvO,OAAL,IAAgB,QAAI,CAACA,OAAL,CAAagO,oBAA7B,IAAqDhW,KAAK,CAACoW,gBAAN,CAAuBU,OAAhF,EAAyF;AACvF,wBAAI,CAACitF,gBAAL,GAAwB/jG,KAAK,CAACoW,gBAAN,CAAuBU,OAAvB,IAAkC,EAA1D;AACA,wBAAI,CAAC9O,OAAL,CAAa8O,OAAb,GAAuB9W,KAAK,CAACoW,gBAAN,CAAuBU,OAAvB,IAAkC,EAAzD;AACD;AACF;AACF,WAtBH;AAuBD;AA5EiC;AAAA;AAAA,sCA8EpB;AACZ,eAAK9Y,aAAL,CAAmB27C,gBAAnB,CAAoClpC,IAApC,CAAyC,KAAzC;AACA,eAAKzS,aAAL,CAAmB6E,cAAnB,CAAkC4N,IAAlC,CAAuC,KAAvC;AACD;AAjFiC;AAAA;AAAA,iCAmFzB5R,IAnFyB,EAmFd;AAClB,eAAKq/B,cAAL,GAAsB,IAAtB;AACA,eAAKv1B,QAAL,GAAgB9J,IAAI,CAAC8J,QAArB;;AACA,cAAI,KAAKg7F,WAAL,CAAiBz5E,KAAjB,IAA0B,KAAKliB,OAAnC,EAA4C;AAC1C,iBAAKzJ,SAAL,GAAiB,IAAjB;AACA,iBAAK+oB,cAAL,CAAoB08E,uBAApB,CAA4C,IAAI,8DAAJ,CAAkB,KAAKh8F,OAAvB,CAA5C,EAA6EnJ,IAAI,CAAC8J,QAAlF;AACD;AACF;AA1FiC;AAAA;AAAA,kCA4FxB;AACR,eAAKs7F,UAAL,GAAkB,IAAlB;AACD;AA9FiC;AAAA;AAAA,wCAgGlB;AACd,eAAKA,UAAL,GAAkB,KAAlB;AACD;AAlGiC;AAAA;AAAA,yCAoGjB;AACf,eAAKA,UAAL,GAAkB,KAAlB;AACD;AAtGiC;AAAA;AAAA,oCAwGtB;AACV,eAAKH,gBAAL,GAAwB,IAAxB;AACD;AA1GiC;;AAAA;AAAA,O;;;uBAAvBJ,uB,EAAuB,+H,EAAA,kH,EAAA,2H,EAAA,8H,EAAA,+H,EAAA,0J;AAAA,K;;;YAAvBA,uB;AAAuB,0C;AAAA,e;AAAA,a;AAAA,+wE;AAAA;AAAA;ADjBpC;;AACE;;AACE;;AACE;;AACG;;AAAiD;;AAAkB;;AAExE;;AACA;;AAaA;;AA2FF;;AACF;;AAEA;;;;;;AA1GM;;AAAA,iGAAgD,UAAhD,EAAgD,GAAhD;;AA0GD;;AAAA;;;;;;ACjGQA,2BAAuB,eANnC,4EAMmC,GAAvBA,uBAAuB,CAAvB;;;sEAAAA,uB,EAAuB;cALnC,uDAKmC;eALzB;AACT9iG,kBAAQ,EAAE,qBADD;AAETC,qBAAW,EAAE,kCAFJ;AAGTC,mBAAS,EAAE,CAAC,kCAAD;AAHF,S;AAKyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuB1B;;AAMG;;AACH;;;;AAFE;;;;QC1BCojG,0BAA0B;AAWrC,0CACSjgG,WADT,EAEU/F,KAFV,EAGUF,aAHV,EAIUqpB,WAJV,EAKUrd,YALV,EAKgC;AAAA;;AAJvB,aAAA/F,WAAA,GAAAA,WAAA;AACC,aAAA/F,KAAA,GAAAA,KAAA;AACA,aAAAF,aAAA,GAAAA,aAAA;AACA,aAAAqpB,WAAA,GAAAA,WAAA;AACA,aAAArd,YAAA,GAAAA,YAAA;AAbV,aAAA0D,KAAA,GAAQ,uBAAR;AAcI;;AAjBiC;AAAA;AAAA,mCAmB1B;AAAA;;AACT,eAAKy2F,qBAAL,GAA6B,KAAK98E,WAAL,CAAiB7iB,KAAjB,CAAuB;AAClD4kB,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW1kB,QAAZ,EAAsB,iGAAsB0/F,qBAA5C,CAAL;AADwC,WAAvB,CAA7B;AAIA,eAAKlmG,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACoG,SAAV;AAAA,WADf,EAEGlH,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACopB,cAAD,EAAoC;AAC7C,oBAAI,CAACljB,UAAL,GAAkBkjB,cAAc,CAACljB,UAAjC;AACA,oBAAI,CAAC4B,eAAL,GAAuBshB,cAAc,CAACjc,cAAtC;;AACA,gBAAI,QAAI,CAACrF,eAAT,EAA0B;AACxB,sBAAI,CAACgH,KAAL,GAAa,QAAI,CAAChH,eAAL,CAAqBgH,KAAlC;AACD,aAFD,MAEO,IAAIsa,cAAc,CAAC5hB,SAAf,IAA4B4hB,cAAc,CAAC5hB,SAAf,CAAyB,CAAzB,CAAhC,EAA6D;AAClE,sBAAI,CAACsH,KAAL,GAAasa,cAAc,CAAC5hB,SAAf,CAAyB,CAAzB,EAA4BsH,KAAzC;AACD;AACF,WAXH;AAYA,eAAKxP,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAV;AAAA,WADf,EAEGf,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,oBAAI,CAACmkG,WAAL,GAAmBnkG,SAAS,CAACsmF,YAA7B;AACD,WALH;AAMD;AA1CoC;AAAA;AAAA,gDA4Cb;AACtB,cAAI,CAAC,KAAK9/E,eAAV,EAA2B;AACzB,iBAAKvB,KAAL;AACA;AACD;;AACD,cAAMm/F,QAAQ,GAAG,KAAKH,qBAAL,CAA2Bl6E,QAA3B,CAAoCb,QAApC,CAA6ClkB,KAA9D;;AACA,cAAI,KAAKi/F,qBAAL,CAA2Bj6E,KAA3B,IAAoCo6E,QAAQ,KAAK,EAArD,EAAyD;AACvD,iBAAK59F,eAAL,CAAqB2H,YAArB,GAAoCi2F,QAApC;AACA,iBAAKpmG,KAAL,CAAWQ,QAAX,CACE,IAAI,oEAAJ,CAA0B,MAAD,OAAC,CAAD,kBAAM,KAAKgI,eAAX,CAAC,EAAyB;AAAEw2E,wBAAU,EAAE;AAAd,aAAzB,CAA1B,CADF;AAGA,iBAAK/3E,KAAL;AACD;AACF;AAzDoC;AAAA;AAAA,wCA2DrBmV,IA3DqB,EA2DP;AAC5B,eAAKtc,aAAL,CAAmBixB,eAAnB,CAAmC3U,IAAnC;AACD;AA7DoC;AAAA;AAAA,gCA+DrB;AACd,eAAKrW,WAAL,CAAiB1D,OAAjB;AACD;AAjEoC;AAAA;AAAA,oDAmET;AAC1B,cAAM03E,eAAe,GAAoB;AACvC7mE,oBAAQ,EAAE,QAD6B;AAEvCgwC,oBAAQ,EAAE,KAF6B;AAGvC10C,oBAAQ,EAAE,IAH6B;AAIvCC,uBAAW,EAAE;AAJ0B,WAAzC;AAMA,eAAK3C,YAAL,CAAkByC,IAAlB,CAAuB,oGAAvB,EAAgDwrE,eAAhD;AACD;AA3EoC;AAAA;AAAA,sCA6E1B;AAIT,cAAI54E,YAAY,CAAC6/B,OAAb,CAAqB,8DAArB,MAA0C,MAA9C,EAAsD;AACpD,iBAAKy3C,yBAAL;AACD;AACF;AApFoC;;AAAA;AAAA,O;;;uBAA1ButB,0B,EAA0B,0I,EAAA,kH,EAAA,8H,EAAA,2H,EAAA,oI;AAAA,K;;;YAA1BA,0B;AAA0B,8C;AAAA,e;AAAA,c;AAAA,6zC;AAAA;AAAA;ADpBvC;;AACE;;AAA8C;;AAAQ;;AAAmB;;AAAS;;AAClF;;AAA4E;AAAA,mBAAS,IAAAjgG,WAAA,UAAT;AAA8B,WAA9B;;AAC1E;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AACE;;AAA6B;;AAAwB;;AACrD;;AACE;;AAEA;;AACG;;AAAU;;AAEf;;AACA;;AACE;;AAAwB;;AAAG;;AAAc;;AAAI;;AAAiB;;AAC9D;;AAAwB;AAAA,mBAAS,IAAAgrB,eAAA,iBAAT;AAAqC,WAArC;;AACtB;;AACF;;AACF;;AACF;;AACA;;AACE;;AAAgF;;AAAwB;;AACxG;;AACE;;AACF;;AACA;;AACE;;AACE;;;;AAUA;;AAQF;;AACF;;AACA;;AACE;;AAAmC;;AAAK;;AAAO;;;;AAE1C;;AAAM;;AACR;;AAA+C;;AAEpD;;AACF;;AACF;;AACA;;AACE;;AAAsB;AAAA,mBAAS,IAAAhrB,WAAA,UAAT;AAA8B,WAA9B;;AAAgC;;AAAI;;AAC1D;;AAGE;AAAA,mBAAS,IAAAsgG,qBAAA,EAAT;AAAgC,WAAhC;;AAIA;;AACF;;AACA;;AACF;;AACF;;;;AAnEM;;AAAA;;AAY+C;;AAAA;;AAOlB;;AAAA;;AAC1B;;AAAA;;AAUG;;AAAA;;AAMA;;AAAA;;AAUE;;AAAA;;AAAyC;;AAAA;;AAE9B;;AAAA;;AAYnB;;AAAA,mIAAuD,WAAvD,EAAuD,0BAAvD;;AAKmB;;AAAA;;;;;;;ACnDZL,8BAA0B,eANtC,4EAMsC,GAA1BA,0BAA0B,CAA1B;;;sEAAAA,0B,EAA0B;cALtC,uDAKsC;eAL5B;AACTtjG,kBAAQ,EAAE,yBADD;AAETC,qBAAW,EAAE,sCAFJ;AAGTC,mBAAS,EAAE,CAAC,sCAAD;AAHF,S;AAK4B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBvC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUa0jG,uB;AACX,uCAAmBvgG,WAAnB,EAAgD;AAAA;;AAA7B,aAAAA,WAAA,GAAAA,WAAA;AAA+B;;;;qDAErB;AAC3B5E,sBAAY,CAACC,OAAb,CAAqB,mEAArB,EAA2C,MAA3C;AACAD,sBAAY,CAACC,OAAb,CAAqB,8DAArB,EAAsC,MAAtC;AACA,eAAK2E,WAAL,CAAiB1D,OAAjB;AACD;;;wDAE+B;AAC9BlB,sBAAY,CAACC,OAAb,CAAqB,8DAArB,EAAsC,MAAtC;AACAD,sBAAY,CAACC,OAAb,CAAqB,mEAArB,EAA2C,OAA3C;AACA,eAAK2E,WAAL,CAAiB1D,OAAjB;AACD;;;;;;;uBAbUikG,uB,EAAuB,0I;AAAA,K;;;YAAvBA,uB;AAAuB,2C;AAAA,e;AAAA,a;AAAA,ohB;AAAA;AAAA;ACTpC;;AACE;;AACE;;AAAQ;;AAA8B;;AACxC;;AACF;;AACA;;AACE;;AACE;;AACE;;AAEA;;AAIG;;AAAU;;AACZ;;AACH;;AACA;;AACE;;AACE;AAAA,mBAAS,IAAAC,6BAAA,EAAT;AAAwC,WAAxC;;AAKA;;AACF;;AACA;;AACE;AAAA,mBAAS,IAAAC,0BAAA,EAAT;AAAqC,WAArC;;AAKA;;AACF;;AACF;;AACF;;AACF;;;;AAdQ;;AAAA;;AAQA;;AAAA;;;;;;;;sEDrBKF,uB,EAAuB;cALnC,uDAKmC;eALzB;AACT5jG,kBAAQ,EAAE,sBADD;AAETC,qBAAW,EAAE,mCAFJ;AAGTC,mBAAS,EAAE,CAAC,mCAAD;AAHF,S;AAKyB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEahC;;AAGE;AAAA;;AAAA;;AAAA;AAAA,WAA4C,sBAA5C,EAA4C;AAAA;;AAAA;;AAAA;AAAA,SAA5C;;AAIA;;AAAI;;AAA4C;;AAChD;;AACE;;AACE;;AACC;;AACE;;AAAsD;;AAE3D;;AACA;;AACE;;AACC;;;;AACE;;AAAgD;;AAErD;;AACA;;AACE;;AACC;;;;AACE;;AAAgD;;AAErD;;AACF;;AACF;;;;AA1BE;;AASW;;AAAA;;AAMA;;AAAA;;AAMA;;AAAA;;;;;;;;AAMb;;AAGE;AAAA;;AAAA;;AAAA;AAAA,WAA4C,sBAA5C,EAA4C;AAAA;;AAAA;;AAAA;AAAA,SAA5C;;AAIA;;AAAgD;;AAAkC;;AAClF;;AACE;;AAA6C;;AAAoC;;AACjF;;AAAkD;;AAAoC;;AACtF;;AAAgD;;AAA4C;;AAC5F;;AAA6C;;AAAwC;;AACrF;;AAAmD;;AAAoD;;AACzG;;AACF;;;;AAbE;;AAKI;;AAAA;;AAEE;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;;;;;;;AAGR;;AAGE;AAAA;;AAAA;;AAAA;AAAA,WAA4C,sBAA5C,EAA4C;AAAA;;AAAA;;AAAA;AAAA,SAA5C;;AAIA;;AAAmD;;AAAyB;;AAC5E;;AACE;;AAA+C;;AAA0C;;AACzF;;;;AACE;;AACF;;AACA;;AAA+C;;AAA6B;;AAC5E;;AAA8C;;AAAwC;;AACxF;;AACF;;;;AAdE;;AAKI;;AAAA;;AAEE;;AAAA;;AACA;;AAAA;;AAGA;;AAAA;;AACA;;AAAA;;;;QC/BC6jG,8BAA8B;AAezC,8CAAmB1gG,WAAnB,EAAwD+F,YAAxD,EAAwF9L,KAAxF,EAAgH;AAAA;;AAA7F,aAAA+F,WAAA,GAAAA,WAAA;AAAqC,aAAA+F,YAAA,GAAAA,YAAA;AAAgC,aAAA9L,KAAA,GAAAA,KAAA;AAVxF,aAAA6jF,IAAA,GAAO,CAAP;AAUkH;;AAfzE;AAAA;AAAA,mCAiB9B;AAAA;;AACT,eAAK6iB,mBAAL,GAA2B,KAA3B;AACA,eAAK1mG,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAV;AAAA,WADf,EAEGf,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,gBAAI,QAAI,CAACo+C,WAAL,IAAoB,QAAI,CAACA,WAAL,CAAiBx5C,UAArC,IAAmD,CAAC5E,SAAS,CAACo+C,WAAV,CAAsBx5C,UAA9E,EAA0F;AACxF,kBAAI5E,SAAS,CAACsxB,YAAV,IAA0B,QAAI,CAACuwD,IAAL,KAAc,CAA5C,EAA+C;AAC7C,wBAAI,CAAC6iB,mBAAL,GAA2B1kG,SAAS,CAACsxB,YAAV,GAAyB,IAAzB,GAAgC,QAAI,CAACozE,mBAAhE;;AACA,wBAAI,CAACz/F,KAAL;AACD,eAHD,MAGO;AACL,wBAAI,CAAC0/F,yBAAL,GAAiC,IAAjC;AACA9lG,0BAAU,CAAC,YAAM;AACf,0BAAI,CAACoG,KAAL;AACD,iBAFS,EAEP,IAFO,CAAV;AAGD;AACF;;AACD,oBAAI,CAACm5C,WAAL,GAAmB,MAAH,OAAG,CAAH,EAAG,EAAKp+C,SAAS,CAACo+C,WAAf,CAAnB;AACD,WAhBH;AAiBAv/C,oBAAU,CAAC,YAAM;AACf,oBAAI,CAACoG,KAAL;AACD,WAFS,EAEP,MAFO,CAAV;AAGD;AAvCwC;AAAA;AAAA,iDAyChB;AAAA;;AACvB,eAAK2/F,uBAAL,GAA+B,IAA/B;;AACA,cAAI,KAAK/iB,IAAL,KAAc,CAAlB,EAAqB;AAEnBhjF,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACgjF,IAAL;AACD,aAFS,EAEP,IAFO,CAAV;AAGD;AACF;AAjDwC;AAAA;AAAA,sCAmD3B,CAAE;AAnDyB;AAAA;AAAA,2CAqDtB,CAAE;AArDoB;AAAA;AAAA,0CAuDvB;AAAA;;AAChB,cAAI,KAAKA,IAAL,KAAc,CAAd,IAAmB,CAAC,KAAK+iB,uBAA7B,EAAsD,CAErD,CAFD,MAEO,IAAI,KAAK/iB,IAAL,KAAc,CAAlB,EAAqB;AAC1BhjF,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACgjF,IAAL;;AACA,kBAAI,QAAI,CAAC8iB,yBAAT,EAAoC;AAClC,wBAAI,CAAC1/F,KAAL;AACD;AACF,aALS,EAKP,IALO,CAAV;AAMD,WAPM,MAOA;AACLpG,sBAAU,CAAC,YAAM;AACf,sBAAI,CAACgjF,IAAL;AACD,aAFS,EAEP,IAFO,CAAV;AAGD;AACF;AAtEwC;AAAA;AAAA,gCAwEjC;AACN,cAAI,KAAK99E,WAAT,EAAsB;AACpB,iBAAKA,WAAL,CAAiBkB,KAAjB;AACD;;AACD,cAAI,CAAC,KAAKy/F,mBAAV,EAA+B;AAC7B,iBAAKA,mBAAL,GAA2B,IAA3B;AACA,iBAAK56F,YAAL,CAAkByC,IAAlB,CAAuB,6GAAvB,EAAmD;AACjDC,sBAAQ,EAAE,IADuC;AAEjDC,yBAAW,EAAE,UAFoC;AAGjDyE,sBAAQ,EAAE;AAHuC,aAAnD;AAKD;AACF;AApFwC;;AAAA;AAAA,O;;;uBAA9BuzF,8B,EAA8B,0I,EAAA,oI,EAAA,kH;AAAA,K;;;YAA9BA,8B;AAA8B,mD;AAAA;AAAA;AAAA,O;AAAA,kFApC9B,EAoC8B,E;AApC5B,e;AAAA,c;AAAA,yZ;AAAA;AAAA;ADff;;AACE;;AACA;;AACA;;AACE;;AAGE;AAAA,mBAAyB,IAAAI,gBAAA,EAAzB;AAA2C,WAA3C,EAA4C,sBAA5C,EAA4C;AAAA,mBACpB,IAAAC,eAAA,EADoB;AACH,WADzC;;AAGA;;AAA+C;;AAA0B;;AACzE;;AACE;;AACE;;AACF;;AACA;;;;AACE;;AACF;;AACA;;;;AACE;;AACF;;AACF;;AACF;;AACA;;AA6BA;;AAgBA;;AAiBF;;AACF;;;;AApFoB;;AAAA;;AAId;;AAAA;;AAII;;AAAA;;AAEE;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAUN;;AAAA;;AA6BA;;AAAA;;AAgBA;;AAAA;;;;;;;mBCzDQ,CACV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEtG,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CADU,EASV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,IAAN,EAAY,CACV,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CADU,EAEV,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CAAjB,CAAD,CAAb,CAFU,CAAZ,CADmB,CAArB,CADwB,CAA1B,CATU,EAiBV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CAjBU,EAyBV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,iBAAO,EAAE,CAAX;AAAcj1D,mBAAS,EAAE;AAAzB,SAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CAzBU;;;AAmCDk7D,kCAA8B,eAzC1C,4EAyC0C,GAA9BA,8BAA8B,CAA9B;;;sEAAAA,8B,EAA8B;cAxC1C,uDAwC0C;eAxChC;AACT/jG,kBAAQ,EAAE,8BADD;AAETC,qBAAW,EAAE,2CAFJ;AAGTC,mBAAS,EAAE,CAAC,2CAAD,CAHF;AAITiB,mBAAS,EAAE,EAJF;AAKTkjG,oBAAU,EAAE,CACV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEvG,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CADU,EASV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,IAAN,EAAY,CACV,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CADU,EAEV,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CAAjB,CAAD,CAAb,CAFU,CAAZ,CADmB,CAArB,CADwB,CAA1B,CATU,EAiBV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CAjBU,EAyBV,oEAAQ,gBAAR,EAA0B,CACxB,uEAAW,QAAX,EAAqB,CACnB,kEAAM,QAAN,EAAgB,CACd,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CADc,EAEd,oEAAQ,GAAR,EAAa,CAAC,oEAAQ,OAAR,EAAiB,kEAAM;AAAEi1D,mBAAO,EAAE,CAAX;AAAcj1D,qBAAS,EAAE;AAAzB,WAAN,CAAjB,CAAD,CAAb,CAFc,CAAhB,CADmB,CAArB,CADwB,CAA1B,CAzBU;AALH,S;AAwCgC,Q;;;;;;;;;;gBACxC;;;;;;;;;;;;;;;;;;;;ACpDH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACiBY;;AAAiE;;AAAsB;;;;;;AAAtB;;AAAA;;;;;;AAE9D;;AAAQ;;AAAqB;;;;;;AAArB;;AAAA;;;;;;AAiBT;;AAA+C;;AAAE;;;;;;AAHnD;;AACE;;AAAyB;;AAAsB;;AAE/C;;AACF;;;;;;;;;AAH2B;;AAAA;;AAEnB;;AAAA;;;;;;AAWF;;;;AASE;;AACE;;AACF;;AACA;;AACE;;;;AACF;;AACF;;;;;;AAZE,8JAA4B,YAA5B,EAA4B,iIAA5B;;AAUE;;AAAA;;;;;;;;AAIF;;AAEE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;;;AAKA;;AACE;;AACF;;AACA;;AACE;;;;AACF;;AACF;;;;;;AARE;;AAME;;AAAA;;;;;;AA9BR;;AACE;;AACA;;AAgBA;;AAgBF;;;;;;;;;;AAjCoB;;AAAA;;AAEhB;;AAAA,sGAA0D,UAA1D,EAA0D,IAA1D;;;;;;AAJN;;AACE;;AAmCF;;;;;;AAnC+C;;AAAA;;;;QD7BhDy7D,6B;AAuBX,6CACU1xF,mBADV,EAEUtV,KAFV,EAGUuV,WAHV,EAIUF,YAJV,EAKUD,UALV,EAKoC;AAAA;;AAJ1B,aAAAE,mBAAA,GAAAA,mBAAA;AACA,aAAAtV,KAAA,GAAAA,KAAA;AACA,aAAAuV,WAAA,GAAAA,WAAA;AACA,aAAAF,YAAA,GAAAA,YAAA;AACA,aAAAD,UAAA,GAAAA,UAAA;AAbA,aAAA6xF,KAAA,GAA+B,IAAI,0DAAJ,EAA/B;AAEA,aAAAC,OAAA,GAAiC,IAAI,0DAAJ,EAAjC;AAIV,aAAArxF,oBAAA,GAA4B,EAA5B;AAQI;;;;mCAEO;AACT,eAAKsxF,uBAAL,GAA+B,KAAK7xF,mBAAL,CAAyB8xF,0BAAzB,CAC7B,KAAKt9F,OAAL,CAAa6K,UAAb,CAAwBqvF,OADK,EAE7B,SAF6B,CAA/B;AAID;;;sCAEa,CAAE;;;oCAEJ;AACV,eAAKkD,OAAL,CAAa30F,IAAb,CAAkB,IAAlB;AACD;;;kCAES;AACR,eAAK00F,KAAL,CAAW10F,IAAX,CAAgB,IAAhB;AACD;;;0CAGiBmL,U,EAAwB;AAAA;;AACxC,cAAI,KAAK7H,oBAAL,CAA0B6H,UAAU,CAACjf,EAArC,CAAJ,EAA8C;AAC5C,gBAAI,CAAC,KAAKoX,oBAAL,CAA0B6H,UAAU,CAACjf,EAArC,EAAyCmI,UAA9C,EAA0D;AACxD,mBAAK+W,kBAAL,CAAwB,KAAK9H,oBAAL,CAA0B6H,UAAU,CAACjf,EAArC,CAAxB;AACD;AACF,WAJD,MAIO;AACL,iBAAKoX,oBAAL,CAA0B6H,UAAU,CAACjf,EAArC,IAA2C,MAAH,OAAG,CAAH,kBAAQif,UAAR,CAAG,EAAe;AAAE9W,wBAAU,EAAE;AAAd,aAAf,CAA3C;AACA,iBAAK2O,WAAL,CAAiB8xF,0BAAjB,CAA4C3pF,UAA5C,EAAwD,KAAK4iE,IAA7D,EAAmE,KAAK5J,MAAxE,EAAgFh2E,SAAhF,CACE,UAAAmd,QAAQ,EAAI;AACV,kBAAI,CAACH,UAAU,CAAClZ,IAAhB,EAAsB;AACpBkZ,0BAAU,CAAClZ,IAAX,GAAkB,yEAAasZ,kBAAb,CAAgCJ,UAAU,CAACnb,QAA3C,CAAlB;AACD;;AACD,kBAAMwb,QAAQ,GAAG;AAAEL,0BAAU,EAAVA,UAAF;AAAcrS,oBAAI,EAAEwS,QAAQ,CAACG;AAA7B,eAAjB;;AACA,sBAAI,CAAC5I,UAAL,CACGkyF,iCADH,CACqCzpF,QAAQ,CAACld,IAD9C,EACoDod,QADpD,EAC8D,QAAI,CAACtT,QADnE,EAEGzJ,IAFH,CAEQ,4DAAK,CAAL,CAFR,EAGGN,SAHH,CAII,UAACud,mBAAD,EAAqC;AACnC,wBAAI,CAACpI,oBAAL,CAA0B6H,UAAU,CAACjf,EAArC,IAA2C,MAAH,OAAG,CAAH,kBAAQwf,mBAAR,CAAG,EAAwB;AAAErX,4BAAU,EAAE;AAAd,iBAAxB,CAA3C;;AACA,wBAAI,CAAC+W,kBAAL,CAAwBM,mBAAxB;AACD,eAPL,EAQI,UAAAjb,KAAK;AAAA,uBACH,QAAI,CAAChD,KAAL,CAAWQ,QAAX,CACE,IAAI,6DAAJ,CAAmB;AAAEsJ,yBAAO,EAAE;AAAX,iBAAnB,CADF,CADG;AAAA,eART;AAaD,aAnBH,EAoBE,UAAAoU,aAAa;AAAA,qBACX,QAAI,CAACle,KAAL,CAAWQ,QAAX,CACE,IAAI,6DAAJ,CAAmB;AACjBsJ,uBAAO,EAAEoU,aAAa,CAAClb,KAAd,IAAuB;AADf,eAAnB,CADF,CADW;AAAA,aApBf;AA2BD;AACF;;;2CAEkB0a,U,EAAwB;AACzC,eAAKrI,YAAL,CAAkB8I,YAAlB,CAA+BT,UAAU,CAACU,iBAA1C;AACD;;;;;;;uBAxFU4oF,6B,EAA6B,0J,EAAA,kH,EAAA,4H,EAAA,8H,EAAA,+H;AAAA,K;;;YAA7BA,6B;AAA6B,iD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,c;AAAA,i/C;AAAA;AAAA;AChB1C;;AACE;;AACE;;AACE;;AACE;;AACA;;AACE;;AAA0D;AAAA,mBAAY,IAAAO,SAAA,EAAZ;AAAuB,WAAvB;;AAAyB;;AACrF;;AACF;;AACA;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACA;;AAGF;;AACA;;AAA2E;AAAA,mBAAS,IAAAC,OAAA,EAAT;AAAkB,WAAlB;;AACzE;;AAAoC;;AAAQ;;AAAc;;AAC5D;;AACF;;AACA;;AACE;;AACE;;AAAyB;;AAAM;;AAC/B;;AAAyB;;AAA4B;;AACvD;;AACA;;AACE;;AAAyB;;AAAI;;AAC7B;;AAKF;;AACF;;AACA;;AACE;;;;AACA;;AACE;;AACE;;AAqCF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;;;AAjF+B;;AAAA;;AAWX;;AAAA,0IAAwD,UAAxD,EAAwD,GAAxD;;AAYiB;;AAAA;;AAIX;;AAAA;;AAQyB;;AAAA;;AAGvB;;AAAA;;;;;;;;;sED5BfR,6B,EAA6B;cALzC,uDAKyC;eAL/B;AACTtkG,kBAAQ,EAAE,4BADD;AAETC,qBAAW,EAAE,yCAFJ;AAGTC,mBAAS,EAAE,CAAC,yCAAD;AAHF,S;AAK+B,Q;;;;;;;;;;;;;;gBACvC;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AE0C6B;;AACE;;AACE;;AACF;;AACF;;;;;;AAHU;;AAAA;;AACN;;AAAA;;;;;;AAqBJ;;AACE;;AACE;;AACF;;AACF;;;;;;AAHU;;AAAA;;AACN;;AAAA;;;;;;AAkDE;;AACE;;AAMF;;;;;;AAFI;;AAAA;;AAFA;;AACA;;;;;;AAYJ;;AACE;;AAMF;;;;;;AAFI;;AAAA;;AAFA;;AACA;;;;;;AA6F9B;;AACE;;AAAM;;AAAU;;AAClB;;;;ACrPZ,QAAM0hC,KAAK,GAAQ,kCAAnB;AAEA,QAAMM,cAAc,GAAGN,KAAK,UAAL,CAAa,wBAAb,CAAvB;AACAM,kBAAc,CAACC,SAAf,sBAA+B,oDAA/B;AACAP,SAAK,CAACtb,QAAN,CAAe4b,cAAf,EAA+B,IAA/B;AAEA,QAAME,cAAc,GAAGR,KAAK,UAAL,CAAa,wBAAb,CAAvB;;AACA,QAAMS,YAAY,GAAG,qDAAMzmC,GAAN,CAAU,UAAA0mC,IAAI;AAAA,uBAAOA,IAAP;AAAA,KAAd,CAArB;;AACAF,kBAAc,CAACD,SAAf,GAA2BE,YAA3B;AACAT,SAAK,CAACtb,QAAN,CAAe8b,cAAf,EAA+B,IAA/B;AACAR,SAAK,CAACtb,QAAN,CAAesb,KAAK,UAAL,CAAa,yBAAb,CAAf,EAAwD,IAAxD;AACAA,SAAK,CAACtb,QAAN,CAAesb,KAAK,UAAL,CAAa,8BAAb,CAAf,EAA6D,IAA7D;AACAA,SAAK,CAACtb,QAAN,CAAesb,KAAK,UAAL,CAAa,yBAAb,CAAf,EAAwD,IAAxD;AAEA,QAAMW,eAAe,GAAGX,KAAK,UAAL,CAAa,mBAAb,CAAxB;;QAEMc,S;;;;;;;;;;;;;+BACUp+B,K,EAAY;AACxB,cAAMy9B,IAAI,+DAAqBz9B,KAArB,CAAV;;AACAy9B,cAAI,CAACY,YAAL,CAAkB,KAAlB,EAAyBr+B,KAAK,CAAC6c,GAA/B;;AACA,cAAI7c,KAAK,CAACs+B,UAAV,EAAsB;AACpBb,gBAAI,CAACY,YAAL,CAAkB,iBAAlB,EAAqCr+B,KAAK,CAACs+B,UAA3C;AACD;;AACD,iBAAOb,IAAP;AACD;;;8BAEYA,I,EAAW;AACtB,iBAAO;AACLa,sBAAU,EAAEb,IAAI,CAAChpB,YAAL,CAAkB,iBAAlB,CADP;AAELoI,eAAG,EAAE4gB,IAAI,CAAChpB,YAAL,CAAkB,KAAlB;AAFA,WAAP;AAID;;;;MAfqBwpB,e;;AAkBxBG,aAAS,CAACV,QAAV,GAAqB,OAArB;AACAU,aAAS,CAACG,OAAV,GAAoB,KAApB;AAEAjB,SAAK,CAACtb,QAAN,CAAeoc,SAAf;;QASaqiE,2BAA2B;AAiCtC,2CAAoBznG,KAApB,EAAoDopB,cAApD,EAAoF;AAAA;;AAAhE,aAAAppB,KAAA,GAAAA,KAAA;AAAgC,aAAAopB,cAAA,GAAAA,cAAA;AAxB1C,aAAAs+E,MAAA,GAAgC,IAAI,0DAAJ,EAAhC;AAEA,aAAAC,YAAA,GAAsC,IAAI,0DAAJ,EAAtC;AAMV,aAAA1vE,MAAA,GAAS,qDAAT;AAEA,aAAAD,KAAA,GAAQ,oDAAR;AAEA,aAAAE,KAAA,GAAQ6M,YAAR;AAEA,aAAAvnB,WAAA,GAA4B,EAA5B;AAUsF;;AAjChD;AAAA;AAAA,mCAmC3B;AAAA;;AACT,eAAKxd,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACkoF,aAAV;AAAA,WADf,EAEGhpF,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACoB,KAAD,EAA+B;AACxC,oBAAI,CAAC8E,UAAL,GAAkB9E,KAAK,CAAC8E,UAAN,IAAoB9E,KAAK,CAACmuF,sBAA5C;;AACA,gBAAI,QAAI,CAAC2X,kBAAT,EAA6B;AAC3B,kBAAI,QAAI,CAACA,kBAAL,CAAwB1e,oBAAxB,IAAgD,CAACpnF,KAAK,CAAConF,oBAA3D,EAAiF;AAC/E,oBAAMlqF,IAAI,sBACL8C,KAAK,CAACukC,SAAN,CACA5+B,MADA,CACO,UAAAuH,IAAI;AAAA,yBAAI,QAAI,CAAClF,OAAL,CAAauG,QAAb,CAAsBqC,QAAtB,CAA+B1D,IAAI,CAACQ,KAApC,KAA8CR,IAAI,CAAC2hB,UAAvD;AAAA,iBADX,EAEAryB,GAFA,CAEI,UAAA0Q,IAAI;AAAA,yBAAIA,IAAI,CAAC4D,UAAT;AAAA,iBAFR,CADK,CAAV;;AAKA,wBAAI,CAACwW,cAAL,CAAoBy+E,2BAApB,CAAgD,QAAI,CAAC/9F,OAAL,CAAauO,OAA7D,EAAsErZ,IAAtE;AACD,eAPD,MAOO,IAAI,QAAI,CAAC4oG,kBAAL,CAAwB3X,sBAAxB,IAAkD,CAACnuF,KAAK,CAACmuF,sBAA7D,EAAqF;AAC1F,wBAAI,CAACnmF,OAAL,CAAauO,OAAb,GAAuBvW,KAAK,CAACgnF,gBAA7B;;AACA,wBAAI,CAAC9oF,KAAL,CAAWQ,QAAX,CACE,IAAI,qEAAJ,CAA2B;AAAE8/E,sBAAI,EAAE,QAAI,CAACA,IAAb;AAAmB5J,wBAAM,EAAE,QAAI,CAACA,MAAhC;AAAwC5sE,yBAAO,EAAE,QAAI,CAACA;AAAtD,iBAA3B,CADF;AAGD,eALM,MAKA,IAAI,QAAI,CAAC89F,kBAAL,CAAwBhhG,UAAxB,IAAsC,CAAC9E,KAAK,CAAC8E,UAAjD,EAA6D;AAClE,oBAAI,CAAC9E,KAAK,CAACwxB,YAAX,EAAyB;AACvB,0BAAI,CAACq0E,YAAL,CAAkBp1F,IAAlB,CAAuB,IAAvB;AACD;AACF;AACF;;AACD,oBAAI,CAACq1F,kBAAL,GAA0B9lG,KAA1B;AACD,WAzBH;AA0BD;AA9DqC;AAAA;AAAA,0CAgEpB;AAChB,eAAKgpC,qBAAL;AACD;AAlEqC;AAAA;AAAA,gDAoEd;AACtB,eAAKqB,KAAL,GAAa,IAAI7H,KAAJ,CAAU,KAAKuG,MAAL,CAAYJ,aAAtB,EAAqC;AAChD2B,mBAAO,EAAE;AACPC,qBAAO,EAAE,KAAKA,OAAL,CAAa5B;AADf;AADuC,WAArC,CAAb;AAKD;AA1EqC;AAAA;AAAA,iCA4E7B;AACP,cAAI,KAAK/G,OAAL,EAAJ,EAAoB;AAClB,iBAAK55B,OAAL,GAAe;AACbuG,sBAAQ,EAAE,CAAC,KAAKy3F,aAAL,CAAmB13F,MAApB,CADG;AAEbwI,qBAAO,EAAE,KAAKkvF,aAAL,CAAmBlvF,OAFf;AAGbP,qBAAO,EAAE,KAAKwyB,MAAL,CAAYJ,aAAZ,CAA0BM,UAA1B,CAAqCvvB,SAHjC;AAIbpL,oBAAM,EAAE,KAAKs1F,QAJA;AAKbpmF,oBAAM,EAAE,KAAKwoF,aAAL,CAAmBrpG;AALd,aAAf;AAOA,iBAAKuB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,uEAAJ,CAA6B;AAAE8/E,kBAAI,EAAE,KAAKA,IAAb;AAAmB5J,oBAAM,EAAE,KAAKA;AAAhC,aAA7B,CAApB;AACD;AACF;AAvFqC;AAAA;AAAA,mCAyF3B;AACT,eAAKgxB,MAAL,CAAYn1F,IAAZ,CAAiB,IAAjB;AACD;AA3FqC;AAAA;AAAA,kCA6FpB;AAEhB,iBAAO,KAAK45B,KAAL,CAAW0G,SAAX,KAAyB,CAAhC;AACD;AAhGqC;;AAAA;AAAA,O;;;uBAA3B40D,2B,EAA2B,kH,EAAA,+H;AAAA,K;;;YAA3BA,2B;AAA2B,+C;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ADlExC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAQ;;AAA2B;;AACrC;;AACA;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAyB;;AAAI;;AAC7B;;AAAyB;;AAAkC;;AAC7D;;AACF;;AACA;;AACE;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAEE;AAAA,mBAAS,IAAAM,MAAA,EAAT;AAAiB,WAAjB;;AAMA;;AAAkD;;AAA6B;;AAAI;;AACrF;;AACF;;AACA;;AACE;;AACE;;AAQE;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAME;;AACF;;AACA;;AAKE;;AACE;;AACE;;AAKF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAME;;AACF;;AACA;;AACE;;AACE;;AACE;;AAKF;;AACF;;AACF;;AACF;;AACF;;AAEA;;AACE;;AAIE;;AACF;;AACF;;AACA;;AACE;;AAIE;;AACF;;AACF;;AACA;;AACE;;AAIE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAME;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAgC;;AAAQ;;AAAgB;;AAAS;;AACjE;;AACE;;AAQF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AAAgC;;AAAQ;;AAAU;;AAAS;;AAC3D;;AACE;;AAQF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AAEA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AAEA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AAKE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAGA;;AACE;;AAEE;AAAA,mBAAS,IAAA3kD,QAAA,EAAT;AAAmB,WAAnB;;AAMA;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;AArRoB;;AAAA;;AASiB;;AAAA;;AAuBrB;;AAAA;;AAHA;;AASe;;AAAA;;AA+BK;;AAAA;;AAuBA;;AAAA;;AAoDM;;AAAA;;AAgBA;;AAAA;;AAiGb;;AAAA;;AAOb;;AAAA;;;;;;;AC5MHqkD,+BAA2B,eAPvC,4EAOuC,GAA3BA,2BAA2B,CAA3B;;;sEAAAA,2B,EAA2B;cANvC,uDAMuC;eAN7B;AACT/kG,kBAAQ,EAAE,0BADD;AAETC,qBAAW,EAAE,uCAFJ;AAGTC,mBAAS,EAAE,CAAC,uCAAD,CAHF;AAIT8C,yBAAe,EAAE,sEAAwBC;AAJhC,S;AAM6B,Q;;;;;;;;gBACrC;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA,uD;iBAAU,Q;;;gBAEV,uD;iBAAU,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDD;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;AA0CM;;AACE;;AAIF;;;;AAFI;;AAAA;;;;;;AAIF;;;;;;AAIA;;;;;;AAJA;;AAIA;;;;;;AAFE;;AAIA;;AAAA;;;;;;AAkBF;;AACE;;AACA;;AAAI;;AAAG;;AAAK;;AAAE;;AAAI;;AAAG;;AAAK;;AAAE;;AAAI;;AAAG;;AAAM;;AAAG;;AAAI;;AAAG;;AAAM;;AAE3D;;;;;;AAEE;;AAME;;AACF;;;;;;AAPA;;;;;;AACE;;;;;;AAXN;;AAIE;;AAKA;;AAUF;;;;;;;;AAfgB;;AAAA,iIAAgF,UAAhF,EAAgF,IAAhF;;;;;;AAiBd;;AAA+B;;AAAyB;;;;;;AA3B5D;;AAME;;AAoBA;;AAGF;;;;;;;;AArBI;;AAAA,wHAA0E,UAA1E,EAA0E,IAA1E;;;;;;AAuBF;;AACG;;AACH;;;;;;AAFA;;;;;;AAAM;;;;;;AAgCR;;;;;;AAaE;;AACG;;AACH;;;;;;AACA;;AACG;;AACH;;;;;;AAXF;;AAME;;AAGA;;AAGF;;;;;;AANgB;;AAAA;;AAGA;;AAAA;;;;;;AAkChB;;;;;;AACA;;AAOE;;AAAyD;;AAAuB;;AAClF;;;;AADQ;;AAAA;;;;;;AAkDV;;AASE;;AACF;;;;;;AAgCE;;AAKG;;AACH;;;;AAFE;;;;;;;;;;;;AAlCN;;AAOE;;AACE;;AAA+D;;AAAyB;;AAC1F;;AACA;;AACE;;AACG;;AACH;;AACF;;AACA;;AACE;;AAIG;;AACH;;AACA;;;;AAQA;;AAOF;;AACF;;;;;;AApCE;;AAMU;;AAAA;;AAGD;;AAAA;;AAQL;;AAAA;;AAMA;;AAAA;;AAMA;;AAAA;;;;;;;;;;;;;;AASN;;AAKE;;AACE;;AAAmD;;AAAe;;AACpE;;AACA;;AACE;;AACG;;AAAuF;;AACzF;;AACD;;AAAwD;;AAAoC;;AAC5F;;AACG;;AAIE;;;;AAA0C;;AAC5C;;AAEL;;AACA;;AACE;;AAIG;;AACH;;AACA;;AAOE;AAAA;;AAAA;;AAAA;AAAA;;;;AAPF;;AAUF;;AACF;;;;;;AAtCE;;AAIU;;AAAA;;AAGD;;AAAA;;AAGA;;AAAA;;AAKH;;AAAA;;AACC;;AAAA;;AAOH;;AAAA;;AAQA;;AAAA,iLAAwD,SAAxD,EAAwD,kBAAxD,EAAwD,gBAAxD,EAAwD,sEAAxD;;;;;;AAqCN;;AAKE;;AACF;;;;;;AA0BR;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;AAHN;;AACE;;AACE;;AAGF;;AACA;;AACF;;;;;;AALS;;AAAA;;AAIc;;AAAA;;;;;;;;;;QCvZZggC,kB;;;;;;;sCACUC,E,EAAmB;AACtC,cAAMn7B,QAAQ,GAAGm7B,EAAE,CAAC1+B,GAAH,CAAO,UAAP,EAAmBF,KAApC;AACA,cAAM6+B,eAAe,GAAGD,EAAE,CAAC1+B,GAAH,CAAO,YAAP,EAAqBF,KAA7C;;AACA,cAAIyD,QAAQ,KAAKo7B,eAAjB,EAAkC;AAChCD,cAAE,CAAC1+B,GAAH,CAAO,YAAP,EAAqB4+B,SAArB,CAA+B;AAAEvH,2BAAa,EAAE;AAAjB,aAA/B;AACD,WAFD,MAEO;AACL,mBAAO,IAAP;AACD;AACF;;;;;;QASUypE,2BAA2B;AAmCtC,2CACUl8F,YADV,EAEUqd,WAFV,EAGUtpB,MAHV,EAIUG,KAJV,EAKUopB,cALV,EAMUtpB,aANV,EAOUC,cAPV,EAQU4kB,WARV,EASU0M,mBATV,EAUUpxB,SAVV,EAUqC;AAAA;;AAT3B,aAAA6L,YAAA,GAAAA,YAAA;AACA,aAAAqd,WAAA,GAAAA,WAAA;AACA,aAAAtpB,MAAA,GAAAA,MAAA;AACA,aAAAG,KAAA,GAAAA,KAAA;AACA,aAAAopB,cAAA,GAAAA,cAAA;AACA,aAAAtpB,aAAA,GAAAA,aAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AACA,aAAA4kB,WAAA,GAAAA,WAAA;AACA,aAAA0M,mBAAA,GAAAA,mBAAA;AACA,aAAApxB,SAAA,GAAAA,SAAA;AA5CV,aAAAgoG,aAAA,GAAgB,KAAhB;AAIA,aAAAC,eAAA,GAA2B,IAA3B;AAEA,aAAAC,kBAAA,GAA8B,IAA9B;AAEA,aAAA70E,YAAA,GAAe,EAAf;AAIA,aAAAgF,QAAA,GAAW,yDAAX;AAEA,aAAA33B,IAAA,GAAY,IAAZ;AAEA,aAAAynG,gBAAA,GAAmB,KAAnB;AAIA,aAAA/gG,SAAA,GAAY,KAAZ;AAUA,aAAArD,cAAA,GAAiB,8DAAjB;AAeI;;AA9CkC;AAAA;AAAA,mCAgD3B;AAAA;;AACT,eAAK8N,eAAL;AACA,eAAKhS,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,IAAnC;AAEA,eAAK81F,UAAL,GAAkB,KAAKl/E,WAAL,CAAiB7iB,KAAjB,CAChB;AACE4kB,oBAAQ,EAAE,CACR,EADQ,EAER,CACE,0DAAW1kB,QADb,EAEE,0DAAW2kB,OAAX,CAAmB,oCAAnB,CAFF,EAGE,0DAAWC,SAAX,CAAqB,CAArB,CAHF,EAIE,0DAAW3kB,SAAX,CAAqB,EAArB,CAJF,CAFQ,CADZ;AAUEgE,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWjE,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,GAArB,CAAtB,CAAL,CAVZ;AAWE23B,sBAAU,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW53B,QAAZ,EAAsB,0DAAWC,SAAX,CAAqB,GAArB,CAAtB,CAAL,CAXd;AAYE43B,yBAAa,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWlT,OAAX,CAAmB,gEAAnB,CAAD,CAAL;AAZjB,WADgB,EAehB;AACEmT,qBAAS,EAAEqH,kBAAkB,CAACpH;AADhC,WAfgB,CAAlB;AAoBA,eAAKv+B,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAV;AAAA,WADf,EAEGf,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACoB,KAAD,EAAsB;AAAA,gBACvBf,WADuB,GACP,QAAI,CAAChB,cAAL,CAAoBsgD,QADb,CACvBt/C,WADuB;AAE/B,oBAAI,CAACk9C,YAAL,GAAoBn8C,KAAK,CAACs+C,WAAN,CAAkB7yC,SAAlB,IAA+BxM,WAAW,CAACi9C,IAA3C,IAAmD,0DAASsC,KAAhF;AACA,oBAAI,CAACnD,WAAL,GAAmBr7C,KAAK,CAACs+C,WAAN,CAAkBziB,YAAlB,IAAkC58B,WAAW,CAACw/C,OAA9C,IAAyD,6DAAYnD,QAAxF;;AACA,gBAAIl+C,MAAM,CAACF,IAAP,CAAY+B,WAAZ,EAAyBa,MAAzB,KAAoC,CAApC,IAAyC,CAACb,WAAW,CAACw/C,OAA1D,EAAmE;AACjE,kBAAI,CAACrhD,MAAM,CAACopG,MAAP,CAAc,yDAAd,EAAwB51F,QAAxB,CAAiC,QAAI,CAACurC,YAAtC,CAAL,EAA0D;AACxD,wBAAI,CAACA,YAAL,GAAoB,0DAASzwC,IAA7B;;AACA,wBAAI,CAAC3N,MAAL,CAAY2L,aAAZ,gCAAkD,QAAI,CAACyyC,YAAvD;AACD;AACF,aALD,MAKO,IACL/+C,MAAM,CAACF,IAAP,CAAY+B,WAAZ,EAAyBa,MAAzB,KAAoC,CAApC,KACC,CAAC1C,MAAM,CAACopG,MAAP,CAAc,yDAAd,EAAwB51F,QAAxB,CAAiC,QAAI,CAACurC,YAAtC,CAAD,IACC,CAAC/+C,MAAM,CAACopG,MAAP,CAAc,4DAAd,EAA2B51F,QAA3B,CAAoC,QAAI,CAACyqC,WAAzC,CAFH,CADK,EAIL;AACA,sBAAI,CAACc,YAAL,GAAoB,0DAASqC,KAA7B;AACA,sBAAI,CAACnD,WAAL,GAAmB,6DAAYC,QAA/B;;AACA,sBAAI,CAACv9C,MAAL,CAAY2L,aAAZ,gCAAkD,QAAI,CAACyyC,YAAvD,sBAA+E,QAAI,CAACd,WAApF;AACD,aARM,MAQA,IAAIj+C,MAAM,CAACF,IAAP,CAAY+B,WAAZ,EAAyBa,MAAzB,KAAoC,CAAxC,EAA2C;AAChD,sBAAI,CAAC/B,MAAL,CAAY2L,aAAZ,gCAAkD,QAAI,CAACyyC,YAAvD,sBAA+E,QAAI,CAACd,WAApF;AACD;;AACD,oBAAI,CAAC7pB,YAAL,GAAoBxxB,KAAK,CAACwxB,YAA1B;AACD,WAxBH;AA0BAzyB,oBAAU,CAAC;AAAA,mBAAM,QAAI,CAACb,KAAL,CAAWQ,QAAX,CAAoB,IAAI,2DAAJ,CAAiB;AAAEC,0BAAY,EAAE;AAAhB,aAAjB,CAApB,CAAN;AAAA,WAAD,CAAV;AACA,eAAK6qB,0BAAL;AACA,eAAKxrB,aAAL,CAAmB+5B,gBAAnB;AACAr6B,gBAAM,CAAC4J,gBAAP,CAAwB,cAAxB,EAAwC,KAAKub,WAAL,CAAiBsB,cAAzD,EAAyE,IAAzE;AACD;AAtGqC;AAAA;AAAA,uCAyGvB7a,KAzGuB,EAyGb;AACvB,cAAI,CAACA,KAAK,CAACpE,KAAX,EAAkB;AAChB;AACD;;AACDoE,eAAK,CAACC,IAAN,GAAaD,KAAK,CAACC,IAAN,KAAe,UAAf,GAA4B,MAA5B,GAAqC,UAAlD;AACD;AA9GqC;AAAA;AAAA,qCAiH5B;AACR,cAAMrG,IAAI,GAAG,KAAKijG,aAAlB;AACA,eAAKA,aAAL,GAAqBjjG,IAAI,KAAK,KAA9B;AACD;AApHqC;AAAA;AAAA,iCAsH7B;;;AACP,eAAKqC,SAAL,GAAiB,IAAjB;;AACA,cAAI,KAAK8gG,kBAAL,KAA4B,IAAhC,EAAsC;AACpC,iBAAKA,kBAAL,GAA0B,KAA1B;AACD;;AAED,cAAI,KAAKD,eAAL,KAAyB,IAA7B,EAAmC;AACjC,iBAAKA,eAAL,GAAuB,KAAvB;AACD;;AAED,cACE,KAAK9nD,WAAL,CAAiBn0B,cAAjB,KAAoC,KAApC,IACA,KAAKo8E,UAAL,CAAgB/gG,OADhB,IAEA,CAAC,KAAK6gG,kBAFN,IAGC,CAAC,KAAKD,eAAN,KACE,CAAC,KAAKG,UAAL,CAAgBnhG,GAAhB,CAAoB,eAApB,EAAqCF,KAAtC,IAA+C,KAAKqhG,UAAL,CAAgBnhG,GAAhB,CAAoB,eAApB,EAAqCI,OADtF,CAJH,EAME;AACA,mBAAO,KAAP;AACD;;AAED,cAAI,KAAK22C,YAAL,KAAsB,0DAASzwC,IAAnC,EAAyC;AACvC,iBAAK+6F,qBAAL;AACD,WAFD,MAEO;AACL,gBAAI,CAAC,QAAC,KAAKC,UAAN,MAAgB,IAAhB,IAAgB,aAAhB,GAAgB,MAAhB,GAAgB,GAAEr7D,KAAF,CAAQ,uBAAR,CAAhB,CAAL,EAAuD;AACrD,mBAAKs7D,mBAAL;AACD,aAFD,MAEO;AACL,mBAAKn1E,YAAL,GAAoB,KAAKrzB,SAAL,CAAeyoG,OAAf,CAAuB,wCAAvB,CAApB;AACD;AACF;AACF;AAnJqC;AAAA;AAAA,+CAqJf;AACrB,eAAK5oE,QAAL,GAAgB,KAAKh0B,YAAL,CAAkByC,IAAlB,CAAuB,mIAAvB,EAAuD;AACrEC,oBAAQ,EAAE,IAD2D;AAErEC,uBAAW,EAAE,UAFwD;AAGrEyE,oBAAQ,EAAE,QAH2D;AAIrEgwC,oBAAQ,EAAE;AAJ2D,WAAvD,CAAhB;AAMD;AA5JqC;AAAA;AAAA,gDA8JN;AAC9B,eAAKljD,KAAL,CAAWQ,QAAX,CACE,IAAI,+DAAJ,CAAqB;AACnB4kF,0BAAc,EAAE,KAAKijB,UAAL,CAAgBnhG,GAAhB,CAAoB,eAApB,EAAqCF,KADlC;AAEnBkkB,oBAAQ,EAAE,KAAKm9E,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KAFvB;AAGnByD,oBAAQ,EAAE,KAAK49F,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KAHvB;AAInB+gF,qBAAS,EAAE,KAAKsgB,UAAL,CAAgBrhG,KAAhB,CAAsB2hG;AAJd,WAArB,CADF;AAQA,eAAK9oG,MAAL,CAAY2L,aAAZ,8BAAgD,KAAKyyC,YAArD,sBAA6E,KAAKd,WAAlF;AACD;AAxKqC;AAAA;AAAA,8CA0KhB;AACpB,cAAI,KAAKc,YAAL,KAAsB,0DAASzwC,IAAnC,EAAyC;AACvC,iBAAK+6F,qBAAL;AACD,WAFD,MAEO;AACL,iBAAKH,gBAAL,GAAwB,IAAxB;AACA,iBAAKnmD,oBAAL;AACA,iBAAK74B,cAAL,CAAoB+C,gBAApB,CACE,KAAKk8E,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KADlC,EAEE,KAAKqhG,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KAFlC;AAIA,iBAAKulB,cAAL;AACD;AACF;AAtLqC;AAAA;AAAA,yCAwLrB;AAAA;;AACf1rB,oBAAU,CAAC,YAAM;AACf,oBAAI,CAACuhD,QAAL,GAAgB,QAAI,CAACh5B,cAAL,CAAoBiD,WAApB,EAAhB;;AACA,gBAAI,QAAI,CAAC+1B,QAAT,EAAmB;AACjB,sBAAI,CAACC,yBAAL;;AACA;AACD;;AACD,oBAAI,CAAC91B,cAAL;AACD,WAPS,EAOP,IAPO,CAAV;AAQD;AAjMqC;AAAA;AAAA,oDAmMV;AAC1B,cAAI,KAAKuT,QAAT,EAAmB;AACjB,iBAAKA,QAAL,CAAc7Q,iBAAd,CAAgCwzB,sBAAhC;AACD;;AACD,cAAMF,aAAa,GAAG,KAAKtiD,SAAL,CAAeuiD,WAAf,GAA6B,KAAKviD,SAAL,CAAeuiD,WAA5C,GAA0D,IAAhF;;AACA,cAAMA,WAAW,GAAG,yDAAU54C,IAAV,CAAe,UAAA9E,IAAI,EAAI;AACzC,gBAAIA,IAAI,CAACL,MAAL,KAAgB89C,aAApB,EAAmC;AACjC,qBAAO,IAAP;AACD;AACF,WAJmB,CAApB;;AAKA,eAAK5hD,IAAL,GAAY,MAAH,OAAG,CAAH,kBACJ,KAAKyhD,QADD,CAAG,EACM;AAChBgjC,0BAAc,EAAE,KAAKijB,UAAL,CAAgBnhG,GAAhB,CAAoB,eAApB,EAAqCF,KADrC;AAEhBkkB,oBAAQ,EAAE,KAAKm9E,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KAF1B;AAGhByD,oBAAQ,EAAE,KAAK49F,UAAL,CAAgBnhG,GAAhB,CAAoB,UAApB,EAAgCF,KAH1B;AAIhB4hG,uBAAW,EAAE,KAAKJ,UAJF;AAKhB7kF,oBAAQ,EAAE6+B,WAAW,CAACh+C;AALN,WADN,CAAZ;AAQA,eAAKxE,KAAL,CAAWQ,QAAX,CAAoB,IAAI,qDAAJ,CAAW,KAAKG,IAAhB,CAApB;AACD;AAtNqC;AAAA;AAAA,0CAwNf;AAAA;;AACrB,eAAKX,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAV;AAAA,WADf,EAEGf,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,gBAAI,QAAI,CAAComG,gBAAL,IAAyB,CAACpmG,SAAS,CAAC4E,UAAxC,EAAoD;AAClD,kBAAI5E,SAAS,CAACsxB,YAAd,EAA4B;AAC1B,wBAAI,CAACjC,mBAAL,CAAyBwO,YAAzB,oCAAkE79B,SAAS,CAACsxB,YAA5E;AACD;;AACD,sBAAI,CAAC80E,gBAAL,GAAwB,KAAxB;AACD;;AACD,oBAAI,CAAChoD,WAAL,GAAmBp+C,SAAS,CAACo+C,WAA7B;AACD,WAXH;AAYD;AArOqC;AAAA;AAAA,qDAuOT;AAAA;;AAC3B,eAAKioD,UAAL,CACGnhG,GADH,CACO,UADP,EAEGC,YAFH,CAEgBnG,IAFhB,CAEqB,oEAAa,GAAb,CAFrB,EAGGN,SAHH,CAGa,UAAAwqB,QAAQ,EAAI;AACrB,gBAAI,CAAC,QAAI,CAACm9E,UAAL,CAAgBt8E,QAAhB,CAAyBb,QAAzB,CAAkCuC,MAAvC,EAA+C;AAC7C,sBAAI,CAACztB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,wEAAJ,CAA8B0qB,QAA9B,CAApB;AACD;AACF,WAPH;AAQD;AAhPqC;AAAA;AAAA,sCAkPxB;AACZ,eAAKprB,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,KAAnC;AACD;AApPqC;;AAAA;AAAA,O;;;uBAA3By1F,2B,EAA2B,oI,EAAA,2H,EAAA,uH,EAAA,mH,EAAA,gI,EAAA,+H,EAAA,+H,EAAA,8H,EAAA,0J,EAAA,sI;AAAA,K;;;YAA3BA,2B;AAA2B,+C;AAAA,gB;AAAA,c;AAAA,itK;AAAA;AAAA;;;ADlCxC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAA4C;;AAAmB;;AACjE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAuD;;AAAwB;;AAC/E;;AACA;;;;AACG;;AAA8B;;AAC/B;;AAAgC;;AAEpC;;AACF;;AACA;;AACE;;AACE;;AAAQ;;;;AAA0C;;AACpD;;AACF;;AACA;;AACE;;AAAkE;AAAA,mBAAY,IAAAa,MAAA,EAAZ;AAAoB,WAApB;;AAChE;;AAGA;;AACE;;AACE;;AACE;;AAA2D;;AAAmB;;AAChF;;AACA;;AACE;;AACG;;AACH;;AACF;;AACA;;AACE;;AAOE;;AAIG;;AAAe;;AAElB;;;;AAQA;;AAAqD;;AAAC;;AACtD;;AAOA;;AAMA;;AAcF;;AACA;;AA8BA;;AAKF;;AACF;;AACA;;AACE;;AACE;;AAA0C;;AAAQ;;AACpD;;AACA;;AACE;;AAA8E;;AAAe;;AAC7F;;AACE;;;;AAUA;;AAGE;AAAA;;AAAA;;AAAA,mBAAS,IAAAC,cAAA,KAAT;AAA8B,WAA9B;;AAEA;;AACA;;AACF;;AACF;;AACA;;AAOA;;AAaF;;AACA;;AACE;;AACG;;AAAgB;;AAEnB;;AAME;;;;AAUA;;AAGE;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,cAAA,MAAT;AAA+B,WAA/B;;AAEA;;AACA;;AACF;;AACF;;AACA;;AACA;;AASF;;AACA;;AACE;;AACE;;AACE;;AAKE;AAAA;AAAA;;AALF;;AAQA;;AACF;;AACA;;AACE;;AACE;;AACG;;AAC0C;;AAE/C;;AACA;;AAA8B;AAAA,mBAAS,IAAAC,UAAA,EAAT;AAAqB,WAArB;;AAC5B;;AACE;;AAAgD;;AAAS;;AAC3D;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACG;;AACmD;;AACrD;;AAAM;;AACJ;;AAEkB;;AACpB;;AAEL;;AACA;;AAA8B;AAAA,mBAAS,IAAAA,UAAA,EAAT;AAAqB,WAArB;;AAC5B;;AACE;;AAA2C;;AAAI;;AACjD;;AACF;;AACF;;AACF;;AACF;;AACA;;AAWF;;AACA;;AAwCA;;AA0CA;;AAIE;;AACE;;AAKE;AAAA;AAAA;;AALF;;AAQA;;AACF;;AACA;;AACE;;AACE;;AACE;;AACG;;AACH;;AACA;;AACE;;;;AAAmE;;AAAsB;;AAC3F;;AACF;;AACF;;AACF;;AACF;;AACA;;AAQA;;AACE;;AACE;;AAA2C;;AAAc;;AAC3D;;AACF;;AAEA;;AACE;;AACE;;AAAuD;;AAAwB;;AACjF;;AAGA;;AAEF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACF;;AACA;;AAQA;;AAEF;;;;;;;;AAraoB;;AAAA;;AASF;;AAAA;;AAEA;;AAAA;;AAQE;;AAAA;;AAIgB;;AAAA;;AACnB;;AAAA;;AAMS;;AAAA;;AAGD;;AAAA;;AAOL;;AAAA;;AAQE;;AAAA;;AAMA;;AAAA;;AAaY;;AAAA,wIAA+C,UAA/C,EAA+C,GAA/C;;AAsBd;;AAAA,yLAGC,UAHD,EAGC,GAHD;;AAsCM;;AAAA;;AASJ;;AAAA;;AAiBF;;AAAA;;AAMA;;AAAA;;AAmBA;;AAAA;;AAQE;;AAAA;;AAemC;;AAAA;;AAErC;;AAAA;;AAiBI;;AAAA,mGAA6B,gBAA7B,EAA6B,sEAA7B;;AAK6B;;AAAA;;AAEtB;;AAAA;;AAOE;;AAAA;;AAIoB;;AAAA;;AAGrB;;AAAA;;AAGO;;AAAA;;AASN;;AAAA;;AAOf;;AAAA;;AAgBF;;AAAA;;AAsCA;;AAAA;;AAyCA;;AAAA;;AAQI;;AAAA,sGAAgC,gBAAhC,EAAgC,sEAAhC;;AAQQ;;AAAA;;AAGH;;AAAA;;AACE;;AAAA;;AAOX;;AAAA;;AAQyC;;AAAA;;AACjC;;AAAA;;AAMH;;AAAA;;AAYI;;AAAA;;AAElB;;AAAA;;;;;;;AC/XMf,+BAA2B,eANvC,4EAMuC,GAA3BA,2BAA2B,CAA3B;;;sEAAAA,2B,EAA2B;cALvC,uDAKuC;eAL7B;AACTtlG,kBAAQ,EAAE,0BADD;AAETC,qBAAW,EAAE,uCAFJ;AAGTC,mBAAS,EAAE,CAAC,uCAAD;AAHF,S;AAK6B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCxC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWA,QAAM4lB,MAAM,GAAW,CACrB;AAAEC,UAAI,EAAE,EAAR;AAAYG,gBAAU,EAAE,QAAxB;AAAkCC,eAAS,EAAE;AAA7C,KADqB,EAErB;AAAEJ,UAAI,EAAE,QAAR;AAAkBC,eAAS,EAAE,2FAA7B;AAAmDC,iBAAW,EAAE,CAAC,yDAAD;AAAhE,KAFqB,EAGrB;AAAEF,UAAI,EAAE,QAAR;AAAkBC,eAAS,EAAE;AAA7B,KAHqB,EAIrB;AAAED,UAAI,EAAE,gBAAR;AAA0BC,eAAS,EAAE;AAArC,KAJqB,EAKrB;AAAED,UAAI,EAAE,cAAR;AAAwBC,eAAS,EAAE;AAAnC,KALqB,EAMrB;AAAED,UAAI,EAAE,iCAAR;AAA2CC,eAAS,EAAE;AAAtD,KANqB,CAAvB;;QAaasgF,kB;;;;;YAAAA;;;;yBAAAA,kB;AAAkB,O;AAAA,gBAHpB,CAAC,6DAAazlG,OAAb,CAAqBilB,MAArB,CAAD,CAGoB,EAFnB,4DAEmB;;;;0HAAlBwgF,kB,EAAkB;AAAA;AAAA,kBAFnB,4DAEmB;AAAA,O;AAFP,K;;;sEAEXA,kB,EAAkB;cAJ9B,sDAI8B;eAJrB;AACRplG,iBAAO,EAAE,CAAC,6DAAaL,OAAb,CAAqBilB,MAArB,CAAD,CADD;AAERnpB,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAIqB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPnB;;AAA2D;;AAAU;;;;AAA7D;;;;;;AAJV;;AAIE;;AACF;;;;AAD2C;;AAAA;;;;;;AAE3C;;AACE;;AAAQ;;AAAuB;;AACjC;;;;;;AAEE;;AACG;;AAA2F;;;;;;AAqD1F;;AACG;;AAAuB;;;;AADmC;;;;;;AAL/D;;AAKE;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AA+CN;;AACG;;AAAuB;;;;AADmC;;;;;;AAD/D;;AACE;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AAuBV;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;;;;;;;AAnHJ;;AAKE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AAME;;AAIG;;AAAQ;;AAEX;;AACE;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACF;;AACA;;AAME;AAAA;;AAAA;;AAAA;AAAA;;;;AANF;;AAWF;;AACA;;AASF;;AACA;;AAME;;AAIG;;AAAQ;;AAEX;;AACE;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACF;;AACA;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;;;AAJF;;AAYA;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACA;;AACF;;AACF;;AACA;;AAKF;;AAEA;;AACE;;AACE;;AACE;;AAOA;;AACF;;AACA;;AAAgD;AAAA;;AAAA;;AAAA;AAAA;;AAC9C;;AAA2D;;AAA4B;;AACzF;;AACF;;AACF;;AACA;;AAGA;;AACE;;AACE;;AAAiC;;AAAK;;AACxC;;AACF;;AACF;;;;;;AAvHE;;AAME;;AAAA;;AAOE;;AAAA;;AAeE;;AAAA;;AASF;;AAAA;;AAWF;;AAAA;;AAOE;;AAAA;;AAkBE;;AAAA;;AAcE;;AAAA;;AAoBsB;;AAAA;;AAIzB;;AAAA;;AAKK;;AAAA;;;;;;;;AAqBV;;AACE;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AACN;;AACF;;AACF;;;;;;AAjBF;;AACE;;AACE;;AAEA;;AAAyE;;AAAoB;;AAAI;;AAEjG;;AAAyE;;AAAoB;;AAAK;;AAElG;;AACE;;AACA;;AAA2B;;AAAoC;;AACjE;;AACF;;AACA;;AAKF;;;;;;AARiC;;AAAA;;AAGwB;;AAAA;;;;;;AAsBrD;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAjBN;;AACE;;AAA4B;;AAA2B;;AACvD;;AACE;;AAAuE;;AAAQ;;AAC/E;;AACE;;AAKE;AAAA;;AAAA;;AAAA;AAAA,WAAiB,aAAjB,EAAiB;AAAA;;AAAA;;AAAA,qEAC0B,IAD1B;AAC8B,SAD/C;;AALF;;AAUF;;AACA;;AAGA;;AACE;;AACE;AAAA;;AAAA;;AAAA,qEAAqC,IAArC;AAAyC,SAAzC;;AAKA;;AAA0C;;AAAM;;AAClD;;AACF;;AACF;;AACF;;;;;;AApBQ;;AAAA;;AAMC;;AAAA;;AAMD;;AAAA;;AAIM;;AAAA;;;;;;;;AA/KpB;;AACE;;AACE;;AACE;;AA2HF;;AAGA;;AACE;;AAmBA;;AA+BF;;AACA;;AACE;;AACE;;AACE;;AAAsB;AAAA;;AAAA;;AAAA;AAAA;;AACpB;;AACE;;AAAwC;;AAAc;;AACxD;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAwC;;AAAc;;AACxD;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;;;AApMQ;;AAAA;;AA8HG;;AAAA;;AAmBA;;AAAA;;AAqCM;;AAAA;;AAOA;;AAAA;;;;;;AAzNnB;;AAIE;;AACE;;AACE;;AACE;;AAMA;;AAGA;;AACE;;AAGF;;AACF;;AACF;;AACF;;AACA;;AAyMF;;;;;;AAzNU;;AAAA;;AAKE;;AAAA;;AAIM;;AAAA;;AAOgB;;AAAA;;;;;;AA6MlC;;AACE;;;;AACA;;AAAiB;;AAAuB;;AAC1C;;;;;;AAFwD;;AAAA;;;;;;AAGxD;;AACE;;;;AACA;;AAAiB;;AAAa;;AAChC;;;;;;AAF0E;;AAAA;;;;;;AA8D1D;;AAAuE;;AAAuB;;;;;;AALhG;;AAKE;;AACF;;;;;;AADQ;;AAAA;;;;;;AAwBN;;AACG;;AAA8B;;;;;;AANnC;;AAKE;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AAKV;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;AAwBF;;AAKE;;AACF;;;;;;;;;;;;;;;;;;;;AAzGR;;AACE;;AAAG;;AAAqC;;AAAG;;AAAc;;AAAK;;AAAuB;;AACrF;;AACE;;AAEF;;AACA;;AACE;;AACA;;AAAG;;AAAY;;AACf;;AAEA;;AACA;;AACE;AAAA;;AAAA;;AAAA,mEAEH,IAFG;AAEC,gDACL,KADK;AACA,qDACH,IADG;AAEb,SALY;;AAMA;;AAAiC;;AAErC;;AAEA;;AACE;;AACE;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACE;;AAA0E;;AAAQ;;AAClF;;AAQA;;AAOF;;AAEA;;AACE;;AAIG;;AACH;;AACA;;;;AAQA;;AASF;;AACA;;AAIA;;AAIE;;AACE;;AAKE;AAAA;;AAAA;;AAAA;AAAA;;AALF;;AAQA;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACA;;AAQA;;AACE;;AAME;;AACF;;AACA;;AACF;;AACF;;AACA;;AACE;;AACE;AAAA;;AAAA;;AAAA,uCAC0C,IAD1C;AAC8C,gDAAgC,KAAhC;AAAqC,qDACrF,IADqF;AAEnG,SAHgB;;AAKA;;AACE;;AAAG;;AAAqB;;AAC1B;;AACF;;AACF;;AACF;;AACF;;AACF;;;;;;AA3GQ;;AAAA;;AAeI;;AAAA;;AAYA;;AAAA;;AAMA;;AAAA;;AAMA;;AAAA;;AASC;;AAAA;;AAMH;;AAAA;;AAQI;;AAAA,wGAAgC,gBAAhC,EAAgC,sEAAhC;;AAMC;;AAAA;;AAML;;AAAA;;AAYE;;AAAA;;AAImB;;AAAA;;;;;;AAmB7B;;AAA8B;;AAAoD;;;;;;AAuBxE;;AAAiE;;AAA4B;;;;;;AAL/F;;AAKE;;AACF;;;;;;AADQ;;AAAA;;;;;;AAkBN;;AAAqE;;AAAuB;;;;;;AAL9F;;AAKE;;AACF;;;;;;AADQ;;AAAA;;;;;;AAiCN;;AAAqE;;AAAuB;;;;;;AAL9F;;AAKE;;AACF;;;;;;AADQ;;AAAA;;;;;;AA8BR;;AAKE;;AAAyD;;AAAuB;;AAClF;;;;AADQ;;AAAA;;;;;;AAGV;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAjHR;;AACA;;AAAG;;AAA+F;;AAElG;;AACE;;AACE;;AAAqD;AAAA;;AAAA;;AAAA;AAAA;;AACnD;;AACE;;AAA4D;;AAE1D;;AACF;;AAQA;;AAOF;;AACA;;AACE;;AAAwE;;AAAQ;;AAChF;;AAQA;;AAOF;;AAEA;;AACE;;AACG;;AAAY;;AAEf;;AACE;;;;AAUA;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACA;;AACF;;AACF;;AACA;;AAOF;;AACA;;AACE;;AAIG;;AAAoB;;AAEvB;;AACE;;;;AAUA;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACA;;AACF;;AACF;;AACA;;AAOF;;AACA;;AAGA;;AACE;;AAME;;AACF;;AACA;;AACF;;AACF;;AACF;;AACF;;;;;;AAhIG;;AACA;;AAAA;;AAIO;;AAAA;;AAE0D;;AAAA;;AAY1D;;AAAA;;AAkBA;;AAAA;;AAS8D;;AAAA;;AAQ5D;;AAAA;;AAgBF;;AAAA;;AAWA;;AAAA;;AAQE;;AAAA;;AAgBF;;AAAA;;AAOC;;AAAA;;AAQD;;AAAA;;AAImB;;AAAA;;;;;;AA7QnC;;AACE;;AACE;;AAAQ;;AAAc;;AACxB;;AACA;;AAA4E;AAAA;AAAA;AAAA;;AAC1E;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAsIA;;AAmIF;;AACF;;;;;;;;AA1QkB;;AAAA,qGAAkD,UAAlD,EAAkD,IAAlD;;;;QC5OP4pG,oBAAoB;AA0D/B,oCACUn9F,YADV,EAEUqd,WAFV,EAGUnpB,KAHV,EAIUF,aAJV,EAKU07E,WALV,EAMU37E,MANV,EAOUupB,cAPV,EAOwC;AAAA;;AAN9B,aAAAtd,YAAA,GAAAA,YAAA;AACA,aAAAqd,WAAA,GAAAA,WAAA;AACA,aAAAnpB,KAAA,GAAAA,KAAA;AACA,aAAAF,aAAA,GAAAA,aAAA;AACA,aAAA07E,WAAA,GAAAA,WAAA;AACA,aAAA37E,MAAA,GAAAA,MAAA;AACA,aAAAupB,cAAA,GAAAA,cAAA;AA1DV,aAAA4W,cAAA,GAAiB,KAAjB;AAEA,aAAAkpE,2BAAA,GAA8B,KAA9B;AAEA,aAAA51E,YAAA,GAAe,EAAf;AAEA,aAAA00D,yBAAA,GAA4B,EAA5B;AAEA,aAAA3nF,SAAA,GAAY,KAAZ;AAEA,aAAA8nG,kBAAA,GAA8B,IAA9B;AAKA,aAAAj9E,QAAA,GAAW,EAAX;AAEA,aAAAzgB,QAAA,GAAW,UAAX;AAEA,aAAA0+F,MAAA,GAAS,cAAT;AAcA,aAAAhzF,YAAA,GAAe,6DAAf;AAgBA,aAAAizF,WAAA,GAAcC,WAAd;AAWE9mG,gBAAQ,CAAC0W,aAAT,CAAuB,OAAvB,EAAgChL,SAAhC,CAA0CqW,GAA1C,CAA8C,gBAA9C;AACA/hB,gBAAQ,CAAC0W,aAAT,CAAuB,eAAvB,EAAwChL,SAAxC,CAAkDqW,GAAlD,CAAsD,gBAAtD;AACD;;AArE8B;AAAA;AAAA,mCAuEpB;AAAA;;AACT,eAAKtkB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,oEAAJ,EAApB;AACAK,oBAAU,CAAC,YAAM;AACf,oBAAI,CAACb,KAAL,CAAWQ,QAAX,CAAoB,IAAI,2DAAJ,CAAiB;AAAEC,0BAAY,EAAE;AAAhB,aAAjB,CAApB;AACD,WAFS,CAAV;AAIA,eAAKX,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,IAAnC;AAEA,eAAK+2F,SAAL,GAAiB,KAAKngF,WAAL,CAAiB7iB,KAAjB,CAAuB;AACtC4kB,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW1kB,QAAZ,CAAL,CAD4B;AAEtCiE,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWjE,QAAZ,CAAL,CAF4B;AAGtC8xE,sBAAU,EAAE,CAAC,KAAD;AAH0B,WAAvB,CAAjB;AAMA,eAAKixB,mBAAL,GAA2B,KAAKpgF,WAAL,CAAiB7iB,KAAjB,CAAuB;AAChD4kB,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW1kB,QAAZ,CAAL,CADsC;AAEhD4+E,0BAAc,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW5+E,QAAZ,EAAsB,0DAAWgJ,KAAjC,CAAL;AAFgC,WAAvB,CAA3B;AAIA,eAAKg6F,iBAAL,GAAyB,KAAKrgF,WAAL,CAAiB7iB,KAAjB,CACvB;AACEvH,gBAAI,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWyH,QAAZ,CAAL,CADR;AAEEiE,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWjE,QAAZ,CAAL,CAFZ;AAGE43B,sBAAU,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW53B,QAAZ,CAAL,CAHd;AAIE0kB,oBAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW1kB,QAAZ,CAAL;AAJZ,WADuB,EAOvB;AACE83B,qBAAS,EAAE,wGAAmBC;AADhC,WAPuB,CAAzB;AAYA,eAAKv+B,KAAL,CACG6B,MADH,CACU,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAACC,IAAV;AAAA,WADf,EAEGf,IAFH,CAEQ,6EAAe,IAAf,CAFR,EAGGN,SAHH,CAGa,UAACsB,SAAD,EAA0B;AACnC,gBAAI,CAACA,SAAS,CAACC,eAAf,EAAgC;AAC9B,sBAAI,CAAC5B,SAAL,GAAiB2B,SAAS,CAAC4E,UAA3B;AACD,aAFD,MAEO;AACL,sBAAI,CAACvG,SAAL,GAAiB,KAAjB;AACD;;AACD,oBAAI,CAACizB,YAAL,GAAoBtxB,SAAS,CAACsxB,YAA9B;AACA,oBAAI,CAAC20D,kBAAL,GAA0BjmF,SAAS,CAACimF,kBAApC;AACA,oBAAI,CAACD,yBAAL,GAAiChmF,SAAS,CAACgmF,yBAA3C;;AACA,gBAAIhmF,SAAS,CAACsxB,YAAd,EAA4B,CAC3B;;AACD,gBACE,QAAI,CAACm2E,sBAAL,IACA,QAAI,CAACznG,SAAL,CAAe4E,UADf,IAEA,CAAC5E,SAAS,CAAC4E,UAFX,IAGA,CAAC5E,SAAS,CAACgmF,yBAJb,EAKE;AACA,sBAAI,CAAC0hB,aAAL,CAAmBrnG,OAAnB;AACD;;AACD,gBAAIL,SAAS,CAACw+B,OAAV,CAAkB6nD,YAAtB,EAAoC;AAClCxnF,wBAAU,CAAC,YAAM;AACf,wBAAI,CAAC8oG,QAAL,CAAcl/D,aAAd,CAA4B7tB,KAA5B;AACD,eAFS,EAEP,GAFO,CAAV;AAGD;;AACD,oBAAI,CAAC5a,SAAL,GAAiBA,SAAjB;AACD,WA5BH;AA6BD;AAlI8B;AAAA;AAAA,sCAoIjB;AACZO,kBAAQ,CAAC0W,aAAT,CAAuB,OAAvB,EAAgChL,SAAhC,CAA0CC,MAA1C,CAAiD,gBAAjD;AACA3L,kBAAQ,CAAC0W,aAAT,CAAuB,eAAvB,EAAwChL,SAAxC,CAAkDC,MAAlD,CAAyD,gBAAzD;AACA,eAAKlO,KAAL,CAAWQ,QAAX,CAAoB,IAAI,oEAAJ,EAApB;AACA,eAAKV,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,KAAnC;AACD;AAzI8B;AAAA;AAAA,iDA2IN;AACvB,eAAKk3F,sBAAL,GAA8B,KAA9B;AACA,eAAKxhB,kBAAL,GAA0B,KAA1B;AACA,eAAK2hB,iBAAL,GAAyB,KAAzB;AACA,eAAKV,2BAAL,GAAmC,KAAnC;AACA,eAAKlhB,yBAAL,GAAiC,EAAjC;AACA,eAAKuhB,mBAAL,CAAyB/9E,KAAzB;AACA,eAAKg+E,iBAAL,CAAuBh+E,KAAvB;AACA,eAAKk+E,aAAL,GAAqB,KAAK59F,YAAL,CAAkByC,IAAlB,CAAuB,KAAKs7F,kBAA5B,EAAgD;AACnEr7F,oBAAQ,EAAE,IADyD;AAEnEC,uBAAW,EAAE,UAFsD;AAGnEyE,oBAAQ,EAAE;AAHyD,WAAhD,CAArB;AAKD;AAxJ8B;AAAA;AAAA,uCA2JhB9H,KA3JgB,EA2JN;AACvB,cAAI,CAACA,KAAK,CAACpE,KAAX,EAAkB;AAChB;AACD;;AACDoE,eAAK,CAACC,IAAN,GAAaD,KAAK,CAACC,IAAN,KAAe,UAAf,GAA4B,MAA5B,GAAqC,UAAlD;AACD;AAhK8B;AAAA;AAAA,8BAkKzB3E,IAlKyB,EAkKdojG,GAlKc,EAkKAC,KAlKA,EAkKiB;AAC9C,eAAK/pE,cAAL,GAAsB,IAAtB;;AACA,cAAI+pE,KAAK,IAAI,CAACD,GAAd,EAAmB;AACjB;AACD;;AACD,cAAI,KAAKR,SAAL,CAAet9E,KAAnB,EAA0B;AACxB,iBAAKhsB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,oDAAJ,CAAU,MAAD,OAAC,CAAD,kBAAMkG,IAAN,CAAC,EAAS;AAAEojG,iBAAG,EAAHA;AAAF,aAAT,CAAV,CAApB;AACD;AACF;AA1K8B;AAAA;AAAA,2CA4KZ;AACjB,eAAKR,SAAL,CAAev9E,QAAf,CAAwBusD,UAAxB,CAAmCt0D,QAAnC,CAA4C,CAAC,KAAKslF,SAAL,CAAev9E,QAAf,CAAwBusD,UAAxB,CAAmCtxE,KAAhF;AACD;AA9K8B;AAAA;AAAA,wCAgLf;AACd,eAAKhF,SAAL,CAAek/B,oBAAf,GAAsC,EAAtC;AACA,eAAKrhC,MAAL,CAAY2L,aAAZ,CAA0B,OAA1B;AACD;AAnL8B;AAAA;AAAA,wCAqLf7K,IArLe,EAqLJ;AACzB,eAAKuoG,2BAAL,GAAmC,IAAnC;;AACA,cAAI,KAAKf,kBAAL,KAA4B,IAAhC,EAAsC;AACpC,iBAAKA,kBAAL,GAA0B,KAA1B;AACD;;AACD,cAAI,KAAKoB,mBAAL,CAAyBv9E,KAAzB,IAAkC,KAAKm8E,kBAA3C,EAA+D;AAC7DxnG,gBAAI,CAACuqB,QAAL,GAAgB,KAAKswD,WAAL,CAAiBmnB,YAAjB,CAA8BhiG,IAAI,CAACuqB,QAAnC,CAAhB;AACA,iBAAKlrB,KAAL,CAAWQ,QAAX,CAAoB,IAAI,8DAAJ,CAAoBG,IAApB,CAApB;AACA,iBAAK6oG,iBAAL,CAAuBtiG,GAAvB,CAA2B,UAA3B,EAAuC8c,QAAvC,CAAgDrjB,IAAI,CAACuqB,QAArD;AACA,iBAAKg+E,2BAAL,GAAmC,KAAnC;AACD;AACF;AAhM8B;AAAA;AAAA,sCAkMjBvoG,IAlMiB,EAkMN;AACvB,eAAKuoG,2BAAL,GAAmC,IAAnC;;AACA,cAAI,KAAKM,iBAAL,CAAuBx9E,KAA3B,EAAkC;AAChCrrB,gBAAI,CAACuqB,QAAL,GAAgB,KAAKswD,WAAL,CAAiBmnB,YAAjB,CAA8BhiG,IAAI,CAACuqB,QAAnC,CAAhB;AACA,iBAAKvB,gBAAL,GAAwB,IAAxB;AACA,iBAAKP,cAAL,CAAoB+C,gBAApB,CAAqCxrB,IAAI,CAACuqB,QAA1C,EAAoDvqB,IAAI,CAAC8J,QAAzD;;AACA,gBAAI,KAAK2e,cAAL,CAAoBiD,WAApB,EAAJ,EAAuC;AACrC,mBAAK29E,sBAAL,CAA4BrpG,IAA5B;AACD,aAFD,MAEO;AACL,mBAAK4rB,cAAL,CAAoB5rB,IAApB;AACD;AACF;AACF;AA9M8B;AAAA;AAAA,uCAgNhBA,IAhNgB,EAgNL;AAAA;;AACxBE,oBAAU,CAAC,YAAM;AACf,gBAAI,QAAI,CAACuoB,cAAL,CAAoBiD,WAApB,EAAJ,EAAuC;AACrC,sBAAI,CAAC29E,sBAAL,CAA4BrpG,IAA5B;;AACA;AACD;;AACD,oBAAI,CAAC4rB,cAAL,CAAoB5rB,IAApB;AACD,WANS,EAMP,IANO,CAAV;AAOD;AAxN8B;AAAA;AAAA,+CA0NRA,IA1NQ,EA0NG;AAChC,eAAKgpB,gBAAL,GAAwB,KAAxB;AACA,cAAM6C,WAAW,GAAG,MAAH,OAAG,CAAH;AACfztB,gBAAI,EAAE4B,IAAI,CAAC5B,IADI;AAEfmsB,oBAAQ,EAAEvqB,IAAI,CAACuqB,QAFA;AAGfzgB,oBAAQ,EAAE9J,IAAI,CAAC8J;AAHA,WAAG,EAIf,KAAK2e,cAAL,CAAoBiD,WAApB,EAJe,CAApB;AAMA,eAAKo9E,sBAAL,GAA8B,IAA9B;AACA,eAAKzpG,KAAL,CAAWQ,QAAX,CAAoB,IAAI,4DAAJ,CAAkBgsB,WAAlB,CAApB;AACD;AApO8B;AAAA;AAAA,0CAuOb;AAAA;;AAChB,eAAK02B,QAAL,GAAgB,IAAI,sDAAJ,CAAa;AAC3B+mD,oBAAQ,EAAE,kBAAA7+F,KAAK;AAAA,qBAAI,QAAI,CAAC6+F,QAAL,CAAc7+F,KAAd,CAAJ;AAAA,aADY;AAE3B8+F,sBAAU,EAAE,oBAAAC,MAAM;AAAA,qBAAI,QAAI,CAACD,UAAL,CAAgBC,MAAhB,CAAJ;AAAA;AAFS,WAAb,CAAhB;AAIA,eAAKb,SAAL,CACGpiG,GADH,CACOmiG,WAAW,CAACe,QADnB,EAEGjjG,YAFH,CAEgBnG,IAFhB,CAGI,6EAAe,IAAf,CAHJ,EAII,8DAAO,UAAAgG,KAAK;AAAA,mBAAI,QAAI,CAACqjG,gBAAL,IAAyBrjG,KAAK,KAAK,QAAI,CAACk8C,QAAL,CAAconD,QAAd,EAAvC;AAAA,WAAZ,CAJJ,EAMG5pG,SANH,CAMa,UAAAsG,KAAK,EAAI;AAClB,oBAAI,CAACujG,aAAL,CAAmBvjG,KAAnB;AACD,WARH;AASA,eAAKsiG,SAAL,CACGpiG,GADH,CACOmiG,WAAW,CAACmB,QADnB,EAEGrjG,YAFH,CAEgBnG,IAFhB,CAGI,6EAAe,IAAf,CAHJ,EAII,8DAAO,UAAAgG,KAAK;AAAA,mBAAI,QAAI,CAACqjG,gBAAL,IAAyBrjG,KAAK,KAAK,QAAI,CAACk8C,QAAL,CAAconD,QAAd,EAAvC;AAAA,WAAZ,CAJJ,EAMG5pG,SANH,CAMa,UAAAsG,KAAK,EAAI;AAClB,oBAAI,CAACujG,aAAL,CAAmBvjG,KAAnB;AACD,WARH;AASD;AA9P8B;AAAA;AAAA,iCAgQtBoE,KAhQsB,EAgQP;AACtB,eAAKk+F,SAAL,CAAepiG,GAAf,CAAmB,KAAKujG,YAAxB,EAAsCzmF,QAAtC,CAA+C5Y,KAA/C;AACD;AAlQ8B;AAAA;AAAA,mCAoQpB++F,MApQoB,EAoQJ;AAIzB,cAAIA,MAAM,KAAK,SAAX,IAAwBA,MAAM,KAAK,QAAvC,EAAiD;AAC/C,iBAAKO,WAAL;AACD;AACF;AA3Q8B;AAAA;AAAA,sCA6QjB1jG,KA7QiB,EA6QF;AAC3B,eAAKk8C,QAAL,CAAcynD,QAAd,CAAuB3jG,KAAvB;AACD;AA/Q8B;AAAA;AAAA,sCAiRjB;AACZ,cAAM4jG,aAAa,GAAG,KAAK1nD,QAAL,CAAcl0B,OAAd,CAAsB67E,UAA5C;AACA,cAAMC,WAAW,GAAGF,aAAa,KAAK,SAAlB,GAA8B,OAA9B,GAAwC,SAA5D;AAEA,eAAK1nD,QAAL,CAAc6nD,UAAd,CAAyB;AACvBF,sBAAU,EAAEC;AADW,WAAzB;AAGD;AAxR8B;AAAA;AAAA,gCA0RvB1/F,KA1RuB,EA0RX;AAClB,cAAI,EAAE,KAAKi/F,gBAAL,IAAyB,KAAKI,YAAL,KAAsBr/F,KAAjD,CAAJ,EAA6D;AAC3D,iBAAKi/F,gBAAL,GAAwB,CAAC,KAAKA,gBAA9B;AACD;;AACD,eAAKI,YAAL,GAAoBr/F,KAApB;;AACA,cAAI,KAAKi/F,gBAAT,EAA2B;AACzB,gBAAI,KAAKI,YAAL,KAAsBpB,WAAW,CAACmB,QAAtC,EAAgD;AAC9C,mBAAKQ,UAAL,CAAgBvgE,aAAhB,CAA8B7tB,KAA9B;AACD,aAFD,MAEO;AACL,mBAAKquF,UAAL,CAAgBxgE,aAAhB,CAA8B7tB,KAA9B;AACD;;AACD,iBAAK2tF,aAAL,CAAmB,KAAKjB,SAAL,CAAepiG,GAAf,CAAmB,KAAKujG,YAAxB,EAAsCzjG,KAAzD;AACD;AACF;AAvS8B;AAAA;AAAA,2CAySZoE,KAzSY,EAySA;AAC7B,cAAI,KAAKi/F,gBAAT,EAA2B;AACzB,iBAAKA,gBAAL,GAAwB,KAAxB;AACA,iBAAKa,OAAL,CAAa9/F,KAAb;AACD;AACF;AA9S8B;AAAA;AAAA,yCAiTd/B,KAjTc,EAiTQ;AACrC,cAAIA,KAAK,CAAC8hG,OAAN,KAAkB,6DAAtB,EAAsC;AACpC,iBAAKd,gBAAL,GAAwB,KAAxB;AACD;AACF;AArT8B;;AAAA;AAAA,O;;;uBAApBpB,oB,EAAoB,oI,EAAA,2H,EAAA,mH,EAAA,8H,EAAA,6H,EAAA,wH,EAAA,+H;AAAA,K;;;YAApBA,oB;AAAoB,wC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;mBAApB,4B;AAAwB,W,EAAA,K,EAAA,+D;;;;;;;;ADpBrC;;AAKE;;AAmOA;;AAEA;;AAIA;;AAIF;;AAGA;;;;AA9OI;;AAAA;;AAiO2B;;AAAA;;AAEiB;;AAAA;;AAIA;;AAAA;;;;;;;AC1NnCA,wBAAoB,eANhC,4EAMgC,GAApBA,oBAAoB,CAApB;;;sEAAAA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTvmG,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;gBA4C9B,uD;iBAAU,Y;;;gBAEV,uD;iBAAU,Y;;;gBAEV,uD;iBAAU,oB;;;gBAEV,uD;iBAAU,U;;;gBA8PV,0D;iBAAa,kB,EAAoB,CAAC,QAAD,C;;;;;AAQpC,QAAKymG,WAAL;;AAAA,eAAKA,WAAL,EAAgB;AACd;AACA;AACD,KAHD,EAAKA,WAAW,KAAXA,WAAW,MAAhB;;;;;;;;;;;;;;;;;AC7UA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAaa+B,oB;AAcX,oCAAoBtrG,aAApB,EAA0DE,KAA1D,EAA6E;AAAA;;AAAzD,aAAAF,aAAA,GAAAA,aAAA;AAAsC,aAAAE,KAAA,GAAAA,KAAA;AAPnD,aAAAqrG,eAAA,GAAkB,CAAlB;AAGA,aAAA9yE,aAAA,GAAgB,CAAC,CAAjB;AAEA,aAAAv0B,cAAA,GAAiB,8DAAjB;AAEwE;;;;mCAEpE;AACT,eAAKlE,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,IAAnC;AACA,eAAK+4F,WAAL,GAAmB,yDAAnB;AACA,eAAKC,eAAL,GAAuB,KAAKD,WAAL,CAAiB,CAAjB,CAAvB;AACA,eAAKE,YAAL,GAAoB,CAClB;AACE/sG,cAAE,EAAE,aADN;AAEE27C,iBAAK,EAAE,aAFT;AAGEqxD,mBAAO,EAAE,IAHX;AAIEC,mBAAO,EAAE,CAJX;AAKEC,sBAAU,EAAE;AALd,WADkB,EAQlB;AACEltG,cAAE,EAAE,cADN;AAEE27C,iBAAK,EAAE,cAFT;AAGEqxD,mBAAO,EAAE,KAHX;AAIEC,mBAAO,EAAE,CAJX;AAKEC,sBAAU,EAAE;AALd,WARkB,CAApB;AAgBA,eAAKC,YAAL;AACA,eAAK5rG,KAAL,CAAWQ,QAAX,CAAoB,IAAI,2DAAJ,CAAiB;AAAEC,wBAAY,EAAE;AAAhB,WAAjB,CAApB;AACD;;;uCAEc;AACb,eAAK+qG,YAAL,CAAkB,CAAlB,EAAqBE,OAArB,GAA+B,KAAKH,eAAL,CAAqBjmB,KAApD;AACA,eAAKkmB,YAAL,CAAkB,CAAlB,EAAqBE,OAArB,GAA+B,CAAC,KAAKH,eAAL,CAAqBjmB,KAArB,GAA6B,GAA9B,EAAmC9nD,OAAnC,CAA2C,CAA3C,CAA/B;AACA,eAAKguE,YAAL,CAAkB,CAAlB,EAAqBG,UAArB,GAAkC,CAAC,KAAKJ,eAAL,CAAqBjmB,KAArB,GAA6B,GAA9B,EAAmC9nD,OAAnC,CAA2C,CAA3C,CAAlC;AACD;;;wCAEenhB,K,EAAe;AAC7B,eAAKgvF,eAAL,GAAuBhvF,KAAvB;AACD;;;sCAEa;AACZ,eAAKvc,aAAL,CAAmBI,UAAnB,CAA8BqS,IAA9B,CAAmC,KAAnC;AACD;;;;;;;uBApDU64F,oB,EAAoB,8H,EAAA,kH;AAAA,K;;;YAApBA,oB;AAAoB,wC;AAAA,e;AAAA,a;AAAA,+hB;AAAA;AAAA;ACZjC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAyD;;AAAmB;;AAC9E;;AACA;;;;AAIE;;AACE;;AACgB;;AAAM;;AACxB;;AACF;;AACA;;AACE;;AAAqD;;AACrD;;AACG;;AAAiB;;AAEtB;;AACF;;AACF;;AACF;;AACA;;AACF;;AAEF;;;;AAvBoB;;AAAA;;AAIR;;AAAA;;AASG;;AAAA;;;;;;;;;sEDPFA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACT1oG,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;;;;;;;AEbjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA8CaipG,W;;;;;YAAAA;;;;yBAAAA,W;AAAW,O;AAAA,iBAFX,CAAC,4DAAD,C;AAAc,gBAXhB,CACP,4DADO,EAEP,0DAFO,EAGP,yEAHO,EAIP,oEAJO,EAKP,kEALO,EAMP,kEANO,EAOP,mEAPO,EAQP,yEARO,CAWgB,EADf,yEACe;;;;0HAEdA,W,EAAW;AAAA,uBAvBpB,0FAuBoB,EAtBpB,sHAsBoB,EArBpB,sHAqBoB,EApBpB,iHAoBoB,EAnBpB,oIAmBoB,EAlBpB,gHAkBoB,EAjBpB,4FAiBoB,EAhBpB,4FAgBoB,EAfpB,6GAeoB;AAfG,kBAGvB,4DAHuB,EAIvB,0DAJuB,EAKvB,yEALuB,EAMvB,oEANuB,EAOvB,kEAPuB,EAQvB,kEARuB,EASvB,mEATuB,EAUvB,yEAVuB,CAeH;AALF,kBAEV,yEAFU;AAKE,O;AAHM,K;;;sEAGjBA,W,EAAW;cA1BvB,sDA0BuB;eA1Bd;AACR5vD,yBAAe,EAAE,CAAC,sHAAD,EAA6B,oIAA7B,CADT;AAERt4C,sBAAY,EAAE,CACZ,0FADY,EAEZ,sHAFY,EAGZ,sHAHY,EAIZ,iHAJY,EAKZ,oIALY,EAMZ,gHANY,EAOZ,4FAPY,EAQZ,4FARY,EASZ,6GATY,CAFN;AAaRC,iBAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,yEAHO,EAIP,oEAJO,EAKP,kEALO,EAMP,kEANO,EAOP,mEAPO,EAQP,yEARO,CAbD;AAuBRvE,iBAAO,EAAE,CAAC,yEAAD,CAvBD;AAwBRwE,mBAAS,EAAE,CAAC,4DAAD;AAxBH,S;AA0Bc,Q;;;;;;;;;;;;;;;;;;ACzCxB;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAMioG,SAAS,GAAG;AACvBC,WAAK,EAAE,IADgB;AAEvBtoD,gBAAU,EAAE,KAFW;AAGvBjP,WAAK,EAAE;AAHgB,KAAlB;;;;;;;;;;;;;;;;ACLP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,oEAAUiP,UAAd,EAA0B;AACxB;;AACA,UAAIjkD,MAAJ,EAAY;AACVA,cAAM,CAACsuD,OAAP,CAAeC,GAAf,GAAqB,YAAY,CAAE,CAAnC;;AACAvuD,cAAM,CAACsuD,OAAP,CAAe9qD,KAAf,GAAuB,YAAY,CAAE,CAArC;AACD;AACF;;AAED,gFAAwB,eAAxB,CACmB,yDADnB,EAC8B;AAC1BgpG,yBAAmB,EAAE;AADK,KAD9B,WAIS,UAAAhpG,KAAK;AAAA,aAAI8qD,OAAO,CAAC9qD,KAAR,CAAcA,KAAd,CAAJ;AAAA,KAJd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA","file":"main-es5.3dafb23f1d1347c43fca.js","sourcesContent":["var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-in\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-in.js\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-sg\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./en-sg.js\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fil\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fil.js\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-deva\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-deva.js\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./oc-lnc\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./oc-lnc.js\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tk\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tk.js\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-mo\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-mo.js\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","<app-loading [isLoading]=\"isLoading\" [quote]=\"quote\"></app-loading>\n<div\n  class=\"app-outer\"\n  id=\"app-outer-id\"\n  [class.resize-active]=\"windowIsResized\"\n  *ngIf=\"!isLoading\"\n  [class.app-outer-secondary]=\"!isMail\"\n>\n  <app-header [hidden]=\"hideHeader\"></app-header>\n  <main id=\"main\" role=\"main\">\n    <div class=\"content\">\n      <router-outlet></router-outlet>\n    </div>\n  </main>\n  <app-footer [hidden]=\"hideHeader\"></app-footer>\n</div>\n<cookie-law #cookieLaw *ngIf=\"!cookieEnabled\">\n  Cookies are required to use CTemplar. Please enable them in your browser.\n  <a href=\"https://ctemplar.com/help/answer/ctemplar-cookie/\" target=\"_blank\" rel=\"noopener noreferrer\">Learn more.</a>\n</cookie-law>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { SharedService } from './store/services';\nimport { getCryptoRandom } from './store/services';\n// import { UsersService } from './users/shared/users.service';\nimport { AppState, AuthState, LoadingState } from './store/datatypes';\nimport { quotes, QuoteType } from './store/quotes';\nimport { FinalLoading } from './store/actions';\nimport { PROMO_CODE_KEY, REFFERAL_CODE_KEY, REFFERAL_ID_KEY } from './shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent implements OnInit {\n  @ViewChild('cookieLaw') cookieLawEl: any;\n\n  public hideFooter = false;\n\n  public hideHeader = false;\n\n  public windowIsResized = false;\n\n  public isLoading = true;\n\n  public isMail = false;\n\n  quote: QuoteType;\n\n  isAuthenticated: boolean;\n\n  cookieEnabled = true;\n\n  constructor(\n    public router: Router,\n    private sharedService: SharedService,\n    private activatedRoute: ActivatedRoute,\n    private store: Store<AppState>,\n    private translate: TranslateService,\n  ) {\n    // this.store.dispatch(new RefreshToken());\n    this.store.dispatch(new FinalLoading({ loadingState: true }));\n    this.sharedService.hideHeader.subscribe((data: boolean) => (this.hideHeader = data));\n    this.sharedService.hideFooter.subscribe((data: boolean) => (this.hideFooter = data));\n    this.sharedService.isMail.subscribe((data: boolean) => (this.isMail = data));\n\n    // this language will be used as a fallback when a translation isn't found in the current language\n    this.translate.setDefaultLang('en');\n    setTimeout(() => {\n      this.updateLoadingStatus();\n      this.store.dispatch(new FinalLoading({ loadingState: false }));\n    }, 3000);\n\n    this.activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe((parameters: any) => {\n      if (parameters) {\n        if (parameters.referral_code) {\n          localStorage.setItem(REFFERAL_CODE_KEY, parameters.referral_code);\n        }\n        const refferalId = parameters[REFFERAL_ID_KEY] || parameters[REFFERAL_ID_KEY.toUpperCase()];\n        if (refferalId) {\n          localStorage.setItem(REFFERAL_ID_KEY, refferalId);\n        }\n        const promoCode = parameters[PROMO_CODE_KEY] || parameters[PROMO_CODE_KEY.toUpperCase()];\n        if (promoCode) {\n          localStorage.setItem(PROMO_CODE_KEY, promoCode);\n        }\n      }\n    });\n    this.checkCookie();\n  }\n\n  ngOnInit() {\n    this.quote = quotes[Math.floor(getCryptoRandom() * quotes.length)];\n    this.store\n      .select((state: AppState) => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.isAuthenticated = authState.isAuthenticated;\n      });\n  }\n\n  private updateLoadingStatus(): void {\n    this.store\n      .select(state => state.loading)\n      .pipe(untilDestroyed(this))\n      .subscribe((loadingState: LoadingState) => {\n        this.isLoading = loadingState.Loading;\n      });\n  }\n\n  dismiss(): void {\n    this.cookieLawEl.dismiss();\n  }\n\n  checkCookie() {\n    let cookieEnabled = navigator.cookieEnabled;\n    if (!cookieEnabled) {\n      // Checking if cookie is absolutely disabled\n      document.cookie = 'testcookie';\n      cookieEnabled = document.cookie.indexOf('testcookie') != -1;\n    }\n    this.cookieEnabled = cookieEnabled;\n  }\n}\n","import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HTTP_INTERCEPTORS, HttpClient, HttpClientModule } from '@angular/common/http';\nimport { NgModule, ErrorHandler, Injectable } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\nimport * as Sentry from '@sentry/browser';\nimport { CookieLawModule } from 'angular2-cookie-law';\n\nimport { AppComponent } from './app.component';\nimport { AppStoreModule } from './store/store.module';\nimport { FooterModule } from './footer/footer.module';\nimport { HeaderModule } from './header/header.module';\nimport { MailModule } from './mail/mail.module';\nimport { PagesModule } from './pages/pages.module';\nimport { SharedModule } from './shared/shared.module';\nimport { UsersModule } from './users/users.module';\nimport {\n  AuthGuard,\n  BitcoinService,\n  MailService,\n  OpenPgpService,\n  SharedService,\n  TokenInterceptor,\n  CancelPendingRequestInterceptor,\n  MessageBuilderService,\n  MessageDecryptService,\n  AutocryptProcessService,\n} from './store/services';\nimport { BreakpointsService } from './store/services/breakpoint.service';\nimport { DateTimeUtilService } from './store/services/datetime-util.service';\nimport { DonationService } from './store/services/donation.service';\nimport { NotificationService } from './store/services/notification.service';\nimport { TimezoneService } from './store/services/timezone.service';\n\n// AoT requires an exported function for factories\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SentryErrorHandler implements ErrorHandler {\n  constructor() {}\n\n  handleError(error: any) {\n    Sentry.captureException(error.originalError || error);\n    // Sentry.showReportDialog({ eventId });\n  }\n}\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    AppStoreModule,\n    BrowserAnimationsModule,\n    BrowserModule,\n    FooterModule,\n    HeaderModule,\n    HttpClientModule,\n    MailModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSnackBarModule,\n    NgbModule,\n    PagesModule,\n    TranslateModule.forRoot({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient],\n      },\n    }),\n    SharedModule,\n    UsersModule,\n    CookieLawModule,\n  ],\n  providers: [\n    AuthGuard,\n    BitcoinService,\n    BreakpointsService,\n    DateTimeUtilService,\n    DonationService,\n    MailService,\n    NotificationService,\n    OpenPgpService,\n    SharedService,\n    TimezoneService,\n    MessageBuilderService,\n    MessageDecryptService,\n    AutocryptProcessService,\n    { provide: HTTP_INTERCEPTORS, useClass: TokenInterceptor, multi: true },\n    { provide: HTTP_INTERCEPTORS, useClass: CancelPendingRequestInterceptor, multi: true },\n    { provide: ErrorHandler, useClass: SentryErrorHandler },\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { Component } from '@angular/core';\n\nimport { PRIMARY_WEBSITE } from '../shared/config';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss'],\n})\nexport class FooterComponent {\n  primaryWebsite = PRIMARY_WEBSITE;\n}\n","<!-- REUSABLE COMPONENT :: FOOTER -->\n<footer id=\"colphon\" class=\"site-footer bg-inverse\" role=\"contentinfo\">\n  <div class=\"container\">\n    <div class=\"row footer-widgets\">\n      <div class=\"col-6 footer-col footer-col-5\">\n        <div class=\"footer-widget\">\n          <div class=\"footer-widget-body\">\n            <a\n              href=\"https://ctemplar.com/about\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.about'\"\n              >About</a\n            >\n            <a\n              href=\"https://ctemplar.com/blog\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.blog'\"\n              >Blog</a\n            >\n            <a routerLink=\"/donate\" [translate]=\"'settings.donate.name'\">Donate</a>\n            <a\n              href=\"https://ctemplar.com/features\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.features'\"\n              >Features</a\n            >\n            <a\n              href=\"https://ctemplar.com/help\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.helpdesk'\"\n              >Helpdesk</a\n            >\n            <a\n              href=\"https://ctemplar.com/media-kit\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'footer.media_kit'\"\n              >Media Kit</a\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"col-6 footer-col footer-col-5\">\n        <div class=\"footer-widget\">\n          <div class=\"footer-widget-body\">\n            <a\n              href=\"https://ctemplar.com/security\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.security'\"\n              >Security</a\n            >\n            <a\n              href=\"https://ctemplar.com/support\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'footer.support'\"\n              >Support</a\n            >\n            <a\n              href=\"https://ctemplar.com/privacy\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'footer.privacy_policy'\"\n              >Privacy Policy</a\n            >\n            <a\n              href=\"https://ctemplar.com/terms\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [innerHTML]=\"'create_account.terms_and_conditions' | translate\"\n              >Terms &amp; Conditions</a\n            >\n            <a\n              href=\"https://ctemplar.com/tor-browser\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              [translate]=\"'home_header.tor_browser'\"\n              >Tor Browser</a\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"col-12 footer-col footer-col-5\">\n        <div class=\"footer-widget\">\n          <div class=\"footer-widget-body\">\n            <div class=\"footer-widget-body-title\">Send a letter</div>\n            <div class=\"address\">\n              Orange Project ehf Armula <br />\n              4&amp;6 Reykjavk, 108 <br />\n              Iceland\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-12 footer-col footer-col-5\">\n        <div class=\"footer-widget\">\n          <div class=\"footer-widget-body\">\n            <div class=\"footer-widget-body-title\">Follow us</div>\n            <div class=\"social\">\n              <div>\n                <a href=\"https://www.facebook.com/CTemplarEncryption\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fa-facebook fab text-light\"></i>\n                </a>\n                <a href=\"https://github.com/ctemplar\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fa-github fab text-light\"></i>\n                </a>\n                <a href=\"https://linkedin.com/company/ctemplarencryption\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fa-linkedin fab text-light\"></i>\n                </a>\n              </div>\n              <div>\n                <a href=\"https://mastodon.social/@ctemplar\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fortfa-mastodon fortfa text-light\"></i>\n                </a>\n                <a href=\"https://www.reddit.com/r/ctemplar/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fa-reddit fab text-light\"></i>\n                </a>\n                <a href=\"https://twitter.com/RealCTemplar\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <i class=\"fa-twitter fab text-light\"></i>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <h4 style=\"text-align: center\">\n      Made with\n      <i class=\"fa-heart fa-w-16 fas text-danger\"></i>\n      for Human Rights\n    </h4>\n    <div class=\"footer-bottom-row text-center\">\n      <p class=\"app-credit small\">\n        &copy;2020\n        <span [translate]=\"'footer.software_systems'\"\n          >Templar Software Systems Ltd., a Seychelles Limited Liability Company</span\n        >\n      </p>\n    </div>\n  </div>\n</footer>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { FooterComponent } from './footer.component';\n\n@NgModule({\n  declarations: [FooterComponent],\n  imports: [CommonModule, NgbModule, RouterModule, TranslateModule],\n  exports: [FooterComponent],\n})\nexport class FooterModule {}\n","<!-- REUSABLE COMPONENT :: HEADER -->\n<header\n  id=\"mastHead\"\n  class=\"topnavbar fixed-top\"\n  [class.header-is-stuck]=\"navIsFixed\"\n  [ngClass]=\"{\n    'has-menu-shown': menuIsOpened,\n    'topnavbar-primary': this.router.url === '/',\n    'topnavbar-secondary': this.router.url !== '/'\n  }\"\n  role=\"banner\"\n>\n  <div class=\"topnavbar__row\">\n    <nav class=\"navbar navbar-expand-lg\" role=\"navigation\">\n      <div class=\"row align-items-center\">\n        <div class=\"col navbar-col navbar-brand-col\">\n          <figure class=\"navbar-brand-holder\">\n            <a\n              class=\"navbar-brand ff-roboto text-uppercase\"\n              href=\"{{ primaryWebsite }}/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <img alt=\"CTemplar Logo\" class=\"navbar-brand-logo\" src=\"assets/images/logo.svg\" />\n              <strong>ctemplar</strong>\n            </a>\n          </figure>\n        </div>\n        <div class=\"col navbar-col navbar-menu-col\">\n          <button\n            class=\"navbar-toggler\"\n            (click)=\"toggleState()\"\n            [ngClass]=\"{\n              opened: menuIsOpened,\n              'hidden-md-up': !externalPageCallToAction,\n              'd-none': externalPageCallToAction\n            }\"\n            role=\"button\"\n            data-target=\"navbar-collapsable-content\"\n            aria-controls=\"ctemplarMenuContent\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span class=\"navbar-toggler-icon\"></span> <span class=\"navbar-toggler-icon\"></span>\n            <span class=\"navbar-toggler-icon\"></span> <span class=\"navbar-toggler-icon\"></span>\n          </button>\n          <div\n            class=\"navbar-collapsable-content\"\n            [ngClass]=\"{ shown: menuIsOpened }\"\n            [hidden]=\"externalPageCallToAction\"\n          >\n            <ul class=\"navbar-nav my-0 px-0 list-style-none\">\n              <li class=\"nav-item\" routerLinkActive=\"active\" [routerLinkActiveOptions]=\"{ exact: true }\">\n                <a\n                  href=\"{{ primaryWebsite }}/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <span [translate]=\"'home_header.home'\">Home</span> <span class=\"sr-only\">(current)</span>\n                </a>\n              </li>\n              <li class=\"nav-item\" routerLinkActive=\"active\">\n                <a\n                  href=\"{{ primaryWebsite }}/about/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.about'\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  >About</a\n                >\n              </li>\n              <li class=\"nav-item\" routerLinkActive=\"active\">\n                <a\n                  href=\"{{ primaryWebsite }}/blog/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.blog'\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  >Blog</a\n                >\n              </li>\n              <li class=\"nav-item\" routerLinkActive=\"active\">\n                <a\n                  href=\"{{ primaryWebsite }}/features/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.security'\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  >Security</a\n                >\n              </li>\n              <li class=\"nav-item\" routerLinkActive=\"active\">\n                <a\n                  href=\"{{ primaryWebsite }}/pricing/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.pricing'\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  >Pricing</a\n                >\n              </li>\n              <li class=\"nav-item\">\n                <a\n                  href=\"{{ primaryWebsite }}/support/\"\n                  class=\"nav-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.support'\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  >Support</a\n                >\n              </li>\n              <li class=\"nav-item hidden-sm-up\">\n                <a\n                  routerLink=\"/signin\"\n                  *ngIf=\"!isLoggedIn; else mobileDashboardLink\"\n                  class=\"nav-link nav-action-link\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.login'\"\n                  >Login</a\n                >\n                <ng-template #mobileDashboardLink>\n                  <a\n                    routerLink=\"/mail\"\n                    class=\"nav-link nav-action-link\"\n                    (click)=\"closeMenu()\"\n                    [translate]=\"'settings.dashboard'\"\n                    >Dashboard</a\n                  >\n                </ng-template>\n              </li>\n              <li class=\"nav-item hidden-sm-up\" routerLinkActive=\"active\" *showInIE=\"false\">\n                <a\n                  routerLink=\"/signup\"\n                  *ngIf=\"!isLoggedIn; else mobileLogoutLink\"\n                  class=\"nav-link nav-action-link btn btn-sm btn-gradient-primary signup-btn\"\n                  (click)=\"closeMenu()\"\n                  [translate]=\"'home_header.signup'\"\n                  >Sign up</a\n                >\n                <ng-template #mobileLogoutLink>\n                  <a\n                    class=\"nav-link nav-action-link btn btn-sm btn-gradient-primary signup-btn\"\n                    (click)=\"closeMenu(); logout()\"\n                    [translate]=\"'common.logout'\"\n                    >Logout</a\n                  >\n                </ng-template>\n              </li>\n            </ul>\n          </div>\n          <ul\n            class=\"user-actions-list my-0 px-0 list-style-none\"\n            [ngClass]=\"{ 'external-page-user-actions-list': externalPageCallToAction }\"\n          >\n            <li\n              class=\"user-actions-item\"\n              routerLinkActive=\"active\"\n              [ngClass]=\"{ 'hidden-xs-down': !externalPageCallToAction, 'is-external-page': externalPageCallToAction }\"\n            >\n              <a\n                *ngIf=\"!isLoggedIn; else dashboardLink\"\n                routerLink=\"/signin\"\n                class=\"user-actions-link\"\n                [translate]=\"'home_header.login'\"\n                >Login</a\n              >\n              <ng-template #dashboardLink>\n                <a routerLink=\"/mail\" class=\"user-actions-link\" [translate]=\"'settings.dashboard'\">Dashboard</a>\n              </ng-template>\n            </li>\n            <li\n              class=\"user-actions-item\"\n              [ngClass]=\"{ 'hidden-xs-down': !externalPageCallToAction, 'is-external-page': externalPageCallToAction }\"\n              *showInIE=\"false\"\n            >\n              <a\n                *ngIf=\"!isLoggedIn; else logoutLink\"\n                routerLink=\"/signup\"\n                class=\"user-actions-link btn btn-sm btn-gradient-primary signup-btn\"\n                [translate]=\"'home_header.signup'\"\n                >Sign Up</a\n              >\n              <ng-template #logoutLink>\n                <a\n                  routerLink=\"/signin\"\n                  (click)=\"logout()\"\n                  class=\"user-actions-link btn btn-sm btn-gradient-primary signup-btn\"\n                  [translate]=\"'common.logout'\"\n                >\n                  Logout</a\n                >\n              </ng-template>\n            </li>\n            <li class=\"user-actions-item btn-dropdown\" [hidden]=\"externalPageCallToAction\">\n              <div ngbDropdown placement=\"bottom-right\" class=\"lang-selector-dropdown\">\n                <button class=\"bg-transparent\" type=\"button\" id=\"langDropdownMenuButton\" ngbDropdownToggle>\n                  <i class=\"fa fa-globe hidden-xs-down\"></i>\n                  {{ selectedLanguage?.locale?.toUpperCase() }}\n                </button>\n                <div ngbDropdownMenu class=\"text-center\" aria-labelledby=\"langDropdownMenuButton\">\n                  <a\n                    class=\"dropdown-item language-dropdown\"\n                    *ngFor=\"let language of languages\"\n                    (click)=\"changeLanguage(language)\"\n                    >{{ language.name }} ({{ language.locale }})</a\n                  >\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n  </div>\n</header>\n<!-- /.REUSABLE COMPONENT :: HEADER ENDS -->\n","import { Router } from '@angular/router';\nimport { Component, HostListener, Inject, ChangeDetectionStrategy, OnInit } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { AppState, AuthState } from '../store/datatypes';\nimport { ExpireSession, Logout } from '../store/actions';\nimport { Language, LANGUAGES, PRIMARY_WEBSITE } from '../shared/config';\nimport { SharedService } from '../store/services';\nimport { UsersService } from '../store/services/users.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class HeaderComponent implements OnInit {\n  // Public property of boolean type set false by default\n  public navIsFixed = false;\n\n  public menuIsOpened = false;\n\n  // Switch the footer call to action for this view.\n  externalPageCallToAction = false;\n\n  isLoggedIn: boolean;\n\n  selectedLanguage: Language = { name: 'English', locale: 'en' };\n\n  languages = LANGUAGES;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  constructor(\n    @Inject(DOCUMENT) private document: any,\n    public router: Router,\n    private sharedService: SharedService,\n    public usersService: UsersService,\n    private store: Store<AppState>,\n    private translate: TranslateService,\n  ) {\n    this.sharedService.isExternalPage.subscribe((data: boolean) => (this.externalPageCallToAction = data));\n  }\n\n  ngOnInit() {\n    this.isLoggedIn = !!this.usersService.getUserKey();\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((data: AuthState) => (this.isLoggedIn = data.isAuthenticated));\n  }\n\n  changeLanguage(lang: Language) {\n    // the lang to use, if the lang isn't available, it will use the current loader to get them\n    this.translate.use(lang.locale);\n    this.selectedLanguage = lang;\n  }\n\n  // == Setup click event to toggle mobile menu\n  toggleState() {\n    // click handler\n    const bool = this.menuIsOpened;\n    this.menuIsOpened = bool === false;\n  }\n\n  // == Listening to scroll event for window object\n  @HostListener('window:scroll', [])\n  onWindowScroll() {\n    const number = window.scrollY || this.document.documentElement.scrollTop || this.document.body.scrollTop || 0;\n    if (number > document.getElementById('mastHead').offsetHeight) {\n      this.navIsFixed = true;\n    } else if (this.navIsFixed && number < 10) {\n      this.navIsFixed = false;\n    }\n  }\n\n  closeMenu() {\n    this.menuIsOpened = false;\n  }\n\n  logout() {\n    this.store.dispatch(new ExpireSession());\n    setTimeout(() => {\n      this.store.dispatch(new Logout());\n    }, 500);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { HeaderComponent } from './header.component';\n\n@NgModule({\n  declarations: [HeaderComponent],\n  imports: [CommonModule, NgbModule, RouterModule, SharedModule],\n  exports: [HeaderComponent],\n})\nexport class HeaderModule {}\n","<div class=\"modal-header\">\n  <h3 class=\"modal-title w-100 text-dark\" id=\"createFoldersModalLabel\">\n    <strong>{{ (edit ? 'settings.edit_folder' : 'settings.create_folder') | translate }}</strong>\n  </h3>\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"onHide()\">\n    <span aria-hidden=\"true\">&times;</span>\n  </button>\n</div>\n<div class=\"modal-body bg-faded p-0\">\n  <div class=\"form\">\n    <form [formGroup]=\"customFolderForm\" (ngSubmit)=\"onSubmit()\">\n      <div class=\"form-group pb-0 mb-0 pr-4 px-3 pt-3 pb-0\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label for=\"folderName\" class=\"modal-form-label mb-2 mb-sm-0\">\n              <span>{{ 'settings.folder_name' | translate }}</span>\n            </label>\n          </div>\n          <div class=\"col-sm-9\">\n            <input class=\"form-control form-control-sm\" id=\"folderName\" type=\"text\" formControlName=\"folderName\" />\n          </div>\n          <div class=\"col-sm-3\"></div>\n          <div class=\"col-sm-9 errors-field\">\n            <ng-container *ngTemplateOutlet=\"folderNameErrors\"></ng-container>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group mb-0 p-3 pr-4\">\n        <div class=\"row\">\n          <div class=\"col-sm-3\">\n            <label for=\"colorSelection\" class=\"modal-form-label mb-2 mb-sm-0 pt-sm-2\">\n              <span>{{ 'settings.select_color' | translate }}</span>\n            </label>\n          </div>\n          <div class=\"col-sm-9\">\n            <div class=\"color-boxes-holder\">\n              <ul class=\"color-boxes-group\" id=\"colorSelection\">\n                <li *ngFor=\"let color of folderColors; let i = index\">\n                  <div\n                    class=\"color-shape\"\n                    (click)=\"selectedColorIndex = i\"\n                    [class.is-active]=\"i === selectedColorIndex\"\n                    [style.background]=\"color\"\n                  ></div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer justify-content-center justify-content-sm-end pr-4\">\n        <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n        <button type=\"submit\" [disabled]=\"userState?.inProgress\" class=\"btn btn-secondary btn-sm\">\n          <span *ngIf=\"folder.id; else create\">{{ 'settings.update' | translate }}</span>\n          <ng-template #create\n            ><span>{{ 'settings.create' | translate }}</span></ng-template\n          >\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n<!-- folder name policy -->\n<ng-template #folderNameErrors>\n  <span class=\"validate-message\" *ngIf=\"duplicateFoldername\">{{\n    'settings.folder_messages.name_exist' | translate\n  }}</span>\n  <ng-container\n    *ngIf=\"\n      customFolderForm.controls['folderName'].errors && (customFolderForm.controls['folderName'].touched || submitted)\n    \"\n  >\n    <span class=\"validate-message\">\n      <ng-container *ngIf=\"customFolderForm.controls['folderName'].errors.required\">\n        <span> {{ 'settings.folder_messages.name_required' | translate }}</span>\n      </ng-container>\n      <ng-container *ngIf=\"customFolderForm.controls['folderName'].errors.maxlength\">\n        <span>{{ 'settings.folder_messages.name_len' | translate }}</span>\n      </ng-container>\n    </span>\n  </ng-container>\n</ng-template>\n","import { Component, Input, ChangeDetectionStrategy, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, UserState } from '../../../store/datatypes';\nimport { CreateFolder } from '../../../store/actions';\nimport { FOLDER_COLORS } from '../../../shared/config';\nimport { Folder } from '../../../store/models';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-create-folder',\n  templateUrl: './create-folder.component.html',\n  styleUrls: ['./create-folder.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CreateFolderComponent implements OnInit {\n  @Input() folder: Folder = { id: null, name: '', color: '' };\n\n  @Input() edit = false;\n\n  customFolderForm: FormGroup;\n\n  folderColors: string[] = FOLDER_COLORS; // Users can select one of these colors for new folder\n\n  selectedColorIndex = 0;\n\n  userState: UserState;\n\n  submitted: boolean;\n\n  duplicateFoldername: boolean;\n\n  callback: { self: any; method: string };\n\n  constructor(private store: Store<AppState>, private fb: FormBuilder, public activeModal: NgbActiveModal) {}\n\n  ngOnInit() {\n    this.customFolderForm = this.fb.group({\n      folderName: [this.folder.name, [Validators.required, Validators.maxLength(30)]],\n      color: this.folder.color,\n    });\n    if (this.folder.color) {\n      this.selectedColorIndex = this.folderColors.indexOf(this.folder.color);\n    }\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        if (this.userState && this.userState.inProgress && !user.inProgress) {\n          if (this.callback) {\n            this.callback.self[this.callback.method](this.customFolderForm.value.folderName);\n          }\n          this.activeModal.close();\n        }\n        this.userState = user;\n      });\n\n    // Check new folder name exists\n    this.customFolderForm\n      .get('folderName')\n      .valueChanges.pipe(untilDestroyed(this))\n      .subscribe(value => {\n        this.checkFolderExist(value);\n      });\n  }\n\n  onSubmit() {\n    this.submitted = true;\n    if (this.customFolderForm.invalid) {\n      return;\n    }\n    const customFolder: Folder = {\n      id: this.folder.id,\n      name: this.customFolderForm.value.folderName,\n      color: this.folderColors[this.selectedColorIndex],\n    };\n    if (this.checkFolderExist(customFolder.name)) {\n      return;\n    }\n    this.store.dispatch(new CreateFolder(customFolder));\n  }\n\n  checkFolderExist(folderName: string) {\n    if (\n      this.userState.customFolders.filter(\n        folder => folder.name.toLowerCase() === folderName.toLowerCase() && folder.id !== this.folder.id,\n      ).length > 0\n    ) {\n      this.duplicateFoldername = true;\n      return true;\n    }\n    this.duplicateFoldername = false;\n    return false;\n  }\n\n  onHide() {\n    this.activeModal.close();\n  }\n}\n","<div class=\"modal-header\">\n  <h3 class=\"modal-title w-100 text-dark\" id=\"createFoldersModalLabel\">\n    <strong>Import Private Key</strong>\n  </h3>\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"onHide()\">\n    <span aria-hidden=\"true\">&times;</span>\n  </button>\n</div>\n<div class=\"modal-body bg-faded\">\n  <div class=\"mt-1 px-3\">\n    <div *ngIf=\"currentStep === ImportPrivateKeyStep.SELECT_MAILBOX\" class=\"mb-1\">\n      <div>\n        <p class=\"text-holder text-dark text-medium\">Please select a mailbox that you want to import key</p>\n      </div>\n      <div class=\"form-content-row mt-1\">\n        <div class=\"btn-dropdown btn-dropdown-select\">\n          <div ngbDropdown class=\"dropdown-sm\">\n            <button type=\"button\" ngbDropdownToggle id=\"filterParameterDropdownMenuBtn\" role=\"button\">\n              <span> {{ selectedMailbox?.email }} </span>\n            </button>\n            <div ngbDropdownMenu aria-labelledby=\"filterParameterDropdownMenuBtn\">\n              <a *ngFor=\"let mailbox of mailboxes\" class=\"dropdown-item text-medium\" (click)=\"onSelectMailbox(mailbox)\">\n                <span>{{ mailbox.email }}</span>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"mb-1\" *ngIf=\"currentStep === ImportPrivateKeyStep.SELECT_PRIVATE_KEY\">\n      <div class=\"mb-1\">\n        <p class=\"text-holder text-medium text-danger\">\n          Are you sure to import the private key? Please be ensure the private key is secure.\n        </p>\n      </div>\n      <div>\n        <p class=\"text-holder text-dark text-medium\">Please select a private key to import</p>\n      </div>\n      <div class=\"form-content-row mt-1\">\n        <input\n          type=\"file\"\n          #importKeyFileTag\n          accept=\".txt,.asc\"\n          (change)=\"onSelectNewKeyFile($event.target.files)\"\n          style=\"display: none\"\n        />\n        <div class=\"pl-2 pt-2\">\n          <a (click)=\"importKeyFileTag.click()\">\n            <i class=\"fas fa-plus-circle\"></i>\n            {{ currentFile ? 'Change Key' : ('contacts.advanced.add_key' | translate) }}\n          </a>\n        </div>\n        <div class=\"pl-2 pt-2\" *ngIf=\"currentFile\">\n          <i class=\"fas fa-file-alt font-italic ml-2 mr-2\"></i>\n          <small class=\"font-italic\">{{ currentFile ? currentFile.name : '' }}</small>\n        </div>\n      </div>\n    </div>\n    <div class=\"mb-1\" *ngIf=\"currentStep === ImportPrivateKeyStep.INPUT_PRIVATE_KEY_PASSWORD\">\n      <div class=\"mb-2\">\n        <p class=\"text-holder text-medium\">Please input the password of private key that you selected.</p>\n      </div>\n      <div class=\"pl-2 pt-2 mb-3\" *ngIf=\"currentFile\">\n        <i class=\"fas fa-file-alt font-italic ml-2 mr-2\"></i>\n        <small class=\"font-italic\">{{ currentFile ? currentFile.name : '' }}</small>\n      </div>\n      <div class=\"form-content-row mt-2 p-2\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-12\">\n            <div class=\"input-group decrypt-password-element mr-2\">\n              <input\n                class=\"form-control form-control-sm border-right-0\"\n                type=\"password\"\n                id=\"passwordVC\"\n                placeholder=\"Passphrase\"\n                [(ngModel)]=\"passphrase\"\n              />\n              <span\n                class=\"input-group-addon password-toggle bg-white text-muted\"\n                id=\"passphraseToggle\"\n                (click)=\"togglePassword('passwordVC')\"\n              >\n                <i class=\"fa fa-eye\"></i>\n                <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n          </div>\n          <div class=\"col-sm-12 errors-field\" *ngIf=\"decryptError\">\n            <span class=\"validate-message mt-3\">Incorrect Passphrase</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"mb-1\" *ngIf=\"currentStep === ImportPrivateKeyStep.INPUT_USER_PASSWORD\">\n      <div class=\"mb-3\">\n        <p class=\"text-holder text-dark text-medium\">Please enter your account password to continue</p>\n      </div>\n      <div class=\"form-content-row mt-2\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-12\">\n            <div class=\"input-group decrypt-password-element mr-2\">\n              <input\n                class=\"form-control form-control-sm border-right-0\"\n                type=\"password\"\n                id=\"userPasswordVC\"\n                placeholder=\"Password\"\n                [(ngModel)]=\"password\"\n                [disabled]=\"inProgress || (mailboxKeyInProgress$ | async)\"\n              />\n              <span\n                class=\"input-group-addon password-toggle bg-white text-muted\"\n                id=\"passwordToggle\"\n                (click)=\"togglePassword('userPasswordVC')\"\n              >\n                <i class=\"fa fa-eye\"></i>\n                <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n          </div>\n          <div class=\"col-sm-12 errors-field\" *ngIf=\"mailboxKeyFailure$ | async\">\n            <span class=\"validate-message mt-3\">Incorrect Password</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"modal-footer\">\n  <div class=\"text-holder text-dark text-medium\">\n    <div class=\"mx-auto mt-2 pt-sm-2\">\n      <app-loading-spinner [showSpinner]=\"inProgress || (mailboxKeyInProgress$ | async)\"></app-loading-spinner>\n      <button\n        type=\"button\"\n        class=\"btn btn-secondary btn-sm\"\n        (click)=\"onNext()\"\n        [disabled]=\"\n          (currentStep === ImportPrivateKeyStep.SELECT_PRIVATE_KEY && !currentFile) ||\n          (currentStep === ImportPrivateKeyStep.INPUT_PRIVATE_KEY_PASSWORD && !passphrase) ||\n          inProgress ||\n          (mailboxKeyInProgress$ | async)\n        \"\n      >\n        Next\n      </button>\n    </div>\n  </div>\n</div>\n","import { ChangeDetectionStrategy, Component, Input, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { take } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\n\nimport { AddMailboxKeys, ResetMailboxKeyOperationState, SnackErrorPush } from '../../../store';\nimport { Mailbox } from '../../../store/models';\nimport { AppState, MailBoxesState, MailboxKey, PlanType, UserState } from '../../../store/datatypes';\nimport { OpenPgpService, SharedService } from '../../../store/services';\nimport { BehaviorSubject } from 'rxjs';\n\nenum ImportPrivateKeyStep {\n  SELECT_MAILBOX,\n  SELECT_PRIVATE_KEY,\n  INPUT_PRIVATE_KEY_PASSWORD,\n  INPUT_USER_PASSWORD,\n}\n\n@UntilDestroy()\n@Component({\n  selector: 'app-import-private-key',\n  templateUrl: './import-private-key.component.html',\n  styleUrls: ['./import-private-key.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ImportPrivateKeyComponent implements OnInit {\n  @Input() mailboxes: Mailbox[] = [];\n\n  selectedMailbox: Mailbox;\n\n  ImportPrivateKeyStep = ImportPrivateKeyStep;\n\n  currentStep: ImportPrivateKeyStep = ImportPrivateKeyStep.SELECT_MAILBOX;\n\n  inProgress = false;\n\n  currentFile: File;\n\n  currentFileContent: string;\n\n  passphrase: string;\n\n  decryptError = false;\n\n  password: string;\n\n  mailboxKeyInProgress$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n\n  mailboxKeyFailure$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n\n  mailboxKeysMap: Map<number, Array<MailboxKey>>;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    private store: Store<AppState>,\n    private openpgp: OpenPgpService,\n    private cdr: ChangeDetectorRef,\n    private sharedService: SharedService,\n  ) {}\n\n  ngOnInit(): void {\n    this.store.dispatch(new ResetMailboxKeyOperationState());\n    if (this.mailboxes.length > 0) {\n      [this.selectedMailbox] = this.mailboxes;\n    }\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        if (\n          !mailBoxesState.mailboxKeyInProgress &&\n          this.mailboxKeyInProgress$.value &&\n          !mailBoxesState.mailboxKeyFailure\n        ) {\n          this.activeModal.close();\n        }\n\n        this.mailboxKeyInProgress$.next(mailBoxesState.mailboxKeyInProgress);\n        this.mailboxKeyFailure$.next(mailBoxesState.mailboxKeyFailure);\n        this.mailboxKeysMap = mailBoxesState.mailboxKeysMap;\n      });\n  }\n\n  onSelectMailbox(selectedMailbox: Mailbox) {\n    this.selectedMailbox = selectedMailbox;\n  }\n\n  onSelectNewKeyFile(files: Array<File>) {\n    if (files.length > 1) return;\n    if (files && files.length > 0) {\n      const file = files[0];\n      this.inProgress = true;\n      this.currentFile = Object.assign(file);\n      const reader = new FileReader();\n      reader.addEventListener('load', (event: any) => {\n        this.currentFileContent = event.target.result;\n        this.openpgp\n          .validatePrivateKey(this.currentFileContent)\n          .pipe(take(1))\n          .subscribe(\n            data => {\n              if (data.data?.fingerprint && this.mailboxKeysMap.has(this.selectedMailbox.id)) {\n                const keys = this.mailboxKeysMap.get(this.selectedMailbox.id);\n                if (keys.find(key => data.data.fingerprint === key.fingerprint)) {\n                  this.store.dispatch(\n                    new SnackErrorPush({\n                      message: `${file.name} is already in active use`,\n                    }),\n                  );\n                  this.currentFile = undefined;\n                  this.currentFileContent = '';\n                }\n              } else {\n                this.store.dispatch(\n                  new SnackErrorPush({\n                    message: `${file.name} is not a valid PGP Private Key`,\n                  }),\n                );\n                this.currentFile = undefined;\n                this.currentFileContent = '';\n              }\n              this.inProgress = false;\n              this.cdr.detectChanges();\n            },\n            error => {\n              this.store.dispatch(\n                new SnackErrorPush({\n                  message: `${file.name} is not a valid PGP Private Key`,\n                }),\n              );\n              this.inProgress = false;\n              this.currentFile = undefined;\n              this.currentFileContent = '';\n              this.cdr.detectChanges();\n            },\n          );\n      });\n      reader.readAsText(file);\n    }\n  }\n\n  uploadImportedKey(keyData: any) {\n    const { data } = keyData;\n    if (keyData && this.selectedMailbox) {\n      data.mailbox = this.selectedMailbox.id;\n      let keyType = '';\n      if (keyData.algorithmInfo) {\n        keyType = keyData.algorithmInfo.bits ? `RSA${keyData.algorithmInfo.bits}` : keyData.algorithmInfo.curve;\n      }\n      data.key_type = keyType;\n      delete data.algorithmInfo;\n      data.password = this.sharedService.getHashPurePasswordWithUserName(this.password);\n      //\n      this.store.dispatch(new AddMailboxKeys(data));\n    }\n  }\n\n  parsePrivateKey() {\n    if (this.currentFile && this.passphrase) {\n      this.decryptError = false;\n      this.inProgress = true;\n      this.openpgp\n        .decryptPrivateKey(this.currentFileContent, this.passphrase)\n        .pipe(take(1))\n        .subscribe(\n          data => {\n            this.inProgress = false;\n            this.decryptError = false;\n            this.currentStep += 1;\n            this.cdr.detectChanges();\n          },\n          error => {\n            this.inProgress = false;\n            this.decryptError = true;\n            this.cdr.detectChanges();\n          },\n        );\n    }\n  }\n\n  encryptWithCurrentPassword() {\n    if (this.currentFileContent && this.password) {\n      this.inProgress = true;\n      this.openpgp\n        .encryptPrivateKey(this.currentFileContent, this.password, this.passphrase)\n        .pipe(take(1))\n        .subscribe(\n          data => {\n            this.inProgress = false;\n            this.uploadImportedKey(data);\n            this.cdr.detectChanges();\n          },\n          error => {\n            this.inProgress = false;\n            this.cdr.detectChanges();\n          },\n        );\n    }\n  }\n\n  onNext() {\n    if (this.currentStep === ImportPrivateKeyStep.INPUT_PRIVATE_KEY_PASSWORD) {\n      this.parsePrivateKey();\n    } else if (this.currentStep === ImportPrivateKeyStep.INPUT_USER_PASSWORD) {\n      this.encryptWithCurrentPassword();\n    } else {\n      this.currentStep += 1;\n    }\n  }\n\n  onHide() {\n    this.activeModal.close();\n  }\n\n  // == Toggle password visibility\n  togglePassword(inputID: string): any {\n    const input = <HTMLInputElement>document.getElementById(inputID);\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-payment-failure-notice',\n  templateUrl: './payment-failure-notice.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentFailureNoticeComponent {\n  constructor(private activeModal: NgbActiveModal, private router: Router) {}\n\n  updatePayment() {\n    this.router.navigateByUrl('/mail/settings/dashboard-and-plans');\n    this.activeModal.close();\n  }\n}\n","<div class=\"modal-header bg-danger\">\n  <h3 class=\"modal-title w-100 text-white\">\n    <strong>{{ 'mail_dialogs.payment_failed' | translate }}</strong>\n  </h3>\n</div>\n<div class=\"modal-body bg-faded\">\n  <p>{{ 'mail_dialogs.payment_message' | translate }}</p>\n</div>\n<div class=\"modal-footer justify-content-end\">\n  <button class=\"btn btn-secondary btn-sm\" type=\"button\" (click)=\"updatePayment()\">\n    {{ 'mail_dialogs.update_payment' | translate }}\n  </button>\n</div>\n","<aside id=\"mailbox-sidebar\" class=\"mailbox-sidebar is-sidebar-expandedx\" role=\"complementary\">\n  <!-- Mailbox left sidebar -->\n  <div class=\"mailbox-sidebar-inner\">\n    <div class=\"mailbox-brand\">\n      <button class=\"navbar-toggler hidden-sm-min\" role=\"button\" (click)=\"toggleMenu()\">\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggle-text\">{{ 'mail_sidebar.menu' | translate }}</span>\n      </button>\n      <figure class=\"navbar-brand-holder hidden-sm-max\">\n        <a class=\"navbar-brand ff-robotos text-uppercase\" routerLink=\"/mail\">\n          <img alt=\"CTemplar Logo\" class=\"navbar-brand-logo\" src=\"assets/images/logo.svg\" />\n          <strong class=\"navbar-brand-name\">ctemplar</strong>\n        </a>\n      </figure>\n      <div class=\"prime-account-content\">\n        <i class=\"icon icon-secure-shield\"></i>\n        <span class=\"prime-account-text\">{{ currentPlan }}</span>\n      </div>\n    </div>\n\n    <div class=\"mail-compose-section\">\n      <a routerLink=\"/mail\" class=\"btn btn-lg btn-outline-white mailbox-btn mailbox-back-btn btn-xs-squared has-icon\">\n        <i class=\"icon icon-arrow-left icon-sm mr-md-2\"></i>\n        <span class=\"mailbox-btn-text hidden-sm-down\">{{ 'contacts.back_to_mail' | translate }}</span>\n      </a>\n    </div>\n\n    <nav class=\"mailbox-sidebar-navbar\">\n      <ul class=\"mailbox-sidebar-nav\">\n        <li class=\"mailbox-sidebar-nav-item active\">\n          <a class=\"mailbox-sidebar-nav-link no-icon\"\n            ><span class=\"mailbox-sidebar-nav-label\">{{ 'contacts.all_contacts' | translate }}</span>\n            <span class=\"badge\">{{ contactsState?.totalContacts }}</span></a\n          >\n        </li>\n      </ul>\n    </nav>\n\n    <div class=\"mailbox-sidebar-footer text-center\">\n      <div class=\"mailbox-sidebar-footer-text mb-0 mb-md-1 visible-in-sm\">\n        <span>{{ 'mail_sidebar.used' | translate }}</span>\n        <div class=\"text-white mt-1\">{{ userState.settings?.used_storage | filesize }}</div>\n      </div>\n      <div class=\"mailbox-sidebar-footer-text mb-1 hidden-in-sm\">\n        <span>{{ 'common.used_storage' | translate }}</span\n        >: {{ userState.settings?.used_storage | filesize }}\n        <span>{{ 'settings.of' | translate }}</span>\n        {{ userState.settings.allocated_storage | filesize }}\n      </div>\n      <a\n        routerLink=\"/mail/settings/dashboard-and-plans\"\n        class=\"btn-link text-white hidden-in-sm\"\n        *ngIf=\"!userState.isPrime\"\n      >\n        <small>\n          <u>{{ 'common.upgrade_account' | translate }}</u>\n        </small>\n      </a>\n    </div>\n  </div>\n</aside>\n\n<!-- Add user button to be used in small screens -->\n<div class=\"btn-xs-holder is-sticky hidden-sm-up\">\n  <button\n    class=\"btn btn-success mailbox-btn mailbox-add-user-btn btn-xs-rounded has-icon\"\n    role=\"button\"\n    placement=\"top\"\n    [ngbTooltip]=\"'settings.add_user' | translate\"\n    (click)=\"selectedContact = null; initSplitContactLayout()\"\n  >\n    <i class=\"icon icon-add-user text-white\"></i>\n  </button>\n</div>\n<!-- Action Buttons Bar -->\n<div class=\"mailbox-actionbar border-bottom-0\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <ul class=\"mailbox-actionbar-menu\">\n        <li class=\"btn-dropdown mailbox-dropdown checkbox-dropdown\">\n          <div>\n            <button class=\"dropdown-toggle no-caret\" role=\"button\">\n              <span class=\"fancy-field-group select-all-checkbox\">\n                <mat-checkbox\n                  type=\"checkbox\"\n                  id=\"selectAll\"\n                  name=\"selectAll\"\n                  (change)=\"toggleSelectAll()\"\n                  [(ngModel)]=\"selectAll\"\n                >\n                </mat-checkbox>\n                <label for=\"selectAll\" class=\"fancy-field-empty\"></label>\n              </span>\n            </button>\n          </div>\n        </li>\n        <li class=\"hidden-xs-down pr-0\">\n          <a class=\"no-icon text-grey-dark-500\" role=\"button\" (click)=\"editContact(null, addUserContent)\">{{\n            'contacts.new_contact' | translate\n          }}</a>\n        </li>\n        <li class=\"hidden-xs-down pr-0\">\n          <a class=\"no-icon text-grey-dark-500\" role=\"button\" (click)=\"openNotifyContactsModal()\">{{\n            'contacts.notify_contacts' | translate\n          }}</a>\n        </li>\n        <li class=\"pr-0\" ngbTooltip=\"Compose mail\">\n          <a class=\"no-icon text-grey-dark-500\" (click)=\"showComposeMailDialog()\">\n            <i class=\"svg-inline--fa fa-2x far fa-envelope\"></i>\n          </a>\n        </li>\n        <li [class.disabled]=\"selectedContacts?.length === 0\">\n          <a\n            (click)=\"openConfirmDeleteModal(confirmDeleteModal)\"\n            [ngbTooltip]=\"'contacts.delete_tooltip' | translate\"\n            class=\"cursor-pointer border-radius-l-0\"\n            ><i class=\"icon icon-garbage\"></i\n          ></a>\n        </li>\n        <li class=\"pl-0\" ngbTooltip=\"Import contacts\">\n          <a class=\"no-icon text-grey-dark-500\" (click)=\"openImportContactsModal()\">\n            <i class=\"svg-inline--fa fa-2x fas fa-upload\"></i>\n          </a>\n        </li>\n        <li *ngIf=\"inProgress\">\n          <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n        </li>\n        <li class=\"page-item\">\n          <div class=\"pager\">\n            <div\n              class=\"mail-controls d-flex align-items-center justify-content-end\"\n              *ngIf=\"contactsState?.contacts?.length > 0\"\n            >\n              <div class=\"mail-result-text text-muted\">\n                <small\n                  >{{ OFFSET + 1 }} -\n                  {{ LIMIT > MAX_EMAIL_PAGE_LIMIT - OFFSET ? MAX_EMAIL_PAGE_LIMIT : OFFSET + LIMIT }}\n                  <span>{{ 'settings.of' | translate }}</span> {{ MAX_EMAIL_PAGE_LIMIT }}</small\n                >\n              </div>\n              <div class=\"mail-nav-control\">\n                <button\n                  [disabled]=\"OFFSET === 0 && MAX_EMAIL_PAGE_LIMIT > OFFSET\"\n                  role=\"button\"\n                  class=\"mail-nav-control-prev\"\n                  (click)=\"prevPage()\"\n                >\n                  <i class=\"icon icon-chevron-left\"></i>\n                </button>\n                <button\n                  [disabled]=\"LIMIT > contactsState.contacts.length\"\n                  role=\"button\"\n                  class=\"mail-nav-control-next\"\n                  (click)=\"nextPage()\"\n                >\n                  <i class=\"icon icon-chevron-right\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n<!-- Select All Contacts, not only contacts of one page -->\n<div class=\"mail-check-number\" *ngIf=\"selectAll && MAX_EMAIL_PAGE_LIMIT > LIMIT\">\n  <p *ngIf=\"!checkAll\">\n    All {{ LIMIT > MAX_EMAIL_PAGE_LIMIT - OFFSET ? MAX_EMAIL_PAGE_LIMIT : OFFSET + LIMIT }} conversations on this page\n    are selected. <a (click)=\"selectEntire(true)\">Select all {{ MAX_EMAIL_PAGE_LIMIT }} conversations in Contacts</a>\n  </p>\n  <p *ngIf=\"checkAll\">\n    All {{ MAX_EMAIL_PAGE_LIMIT }} conversations in Contacts are selected.\n    <a (click)=\"selectEntire(false)\">Clear selection</a>\n  </p>\n</div>\n<!-- Contacts List -->\n<div class=\"mailbox-section\">\n  <div class=\"mailbox-section-body py-0\">\n    <div class=\"row mail-contact-layout-row\" [class.is-splitted]=\"isLayoutSplitted\">\n      <div class=\"col-12 mail-contact-layout-col mail-contact-listing-col table-responsive table-hover table-fixed\">\n        <table class=\"table mail-contact\">\n          <thead class=\"mail-contact-header border-bottom-0 hidden-xs-down\">\n            <tr>\n              <th></th>\n              <th>\n                <strong>{{ 'common.name' | translate }}</strong>\n              </th>\n              <th>\n                <strong>{{ 'common.email' | translate }}</strong>\n              </th>\n            </tr>\n          </thead>\n          <tbody class=\"mail-contact-body is-bordered\">\n            <ng-container *ngIf=\"!isMobile\">\n              <tr\n                class=\"mail-list-row is-unread\"\n                *ngFor=\"let contact of contactsState.contacts\"\n                [class.active-contact]=\"selectedContact == contact\"\n              >\n                <td (click)=\"checkContact(contact)\">\n                  <div class=\"mail-list-col-item mail-checkbox\">\n                    <mat-checkbox\n                      [(ngModel)]=\"contact.markForDelete\"\n                      [name]=\"contact.id\"\n                      type=\"checkbox\"\n                      [disableRipple]=\"true\"\n                      (click)=\"$event.preventDefault()\"\n                    >\n                    </mat-checkbox>\n                    <label [attr.for]=\"contact.id\" class=\"fancy-field-empty\"></label>\n                  </div>\n                </td>\n                <td (click)=\"editContact(contact, addUserContent)\">\n                  <div class=\"mail-list-col-item mail-from-name cursor-pointer\">\n                    <span\n                      *ngIf=\"contact.is_encrypted && !contact.name; else contactName\"\n                      class=\"badge badge-warning mr-2 p-1\"\n                    >\n                      **Encrypted**\n                    </span>\n                    <ng-template #contactName>\n                      <span ngbTooltip=\"{{ contact.name }}\">{{ contact.name }}</span>\n                    </ng-template>\n                  </div>\n                </td>\n                <td (click)=\"editContact(contact, addUserContent)\">\n                  <div class=\"mail-contact-col-lg cursor-pointer\">\n                    <div class=\"mail-desc\">\n                      <p>\n                        <strong>\n                          <span\n                            *ngIf=\"contact.is_encrypted && !contact.email; else contactEmail\"\n                            class=\"badge badge-warning mr-2 p-1\"\n                          >\n                            **Encrypted**\n                          </span>\n                          <ng-template #contactEmail>\n                            <span class=\"d-inline-block text-truncate mail-contact-email-field\">{{\n                              contact.email\n                            }}</span>\n                          </ng-template>\n                        </strong>\n                      </p>\n                    </div>\n                  </div>\n                </td>\n              </tr>\n            </ng-container>\n\n            <!--Mobile view html -->\n            <ng-container *ngIf=\"isMobile\">\n              <tr\n                class=\"mail-list-row is-unread\"\n                *ngFor=\"let contact of contactsState.contacts\"\n                [class.active-contact]=\"selectedContact == contact\"\n              >\n                <td (click)=\"checkContact(contact)\">\n                  <div class=\"mail-list-col-item mail-checkbox\">\n                    <mat-checkbox\n                      [(ngModel)]=\"contact.markForDelete\"\n                      [name]=\"contact.id\"\n                      type=\"checkbox\"\n                      [disableRipple]=\"true\"\n                      (click)=\"$event.preventDefault()\"\n                    >\n                    </mat-checkbox>\n                    <label [attr.for]=\"contact.id\" class=\"fancy-field-empty\"></label>\n                  </div>\n                </td>\n                <td (click)=\"editContact(contact, addUserContent)\">\n                  <div class=\"mail-list-col-item cursor-pointer\">\n                    <span\n                      *ngIf=\"contact.is_encrypted && !contact.name; else contactName\"\n                      class=\"badge badge-warning mr-2 p-1\"\n                    >\n                      **Encrypted**\n                    </span>\n                    <ng-template #contactName>\n                      <span ngbTooltip=\"{{ contact.name }}\">{{ contact.name }}</span>\n                    </ng-template>\n                  </div>\n                  <div class=\"mail-contact-col-lg cursor-pointer\">\n                    <div class=\"mail-desc\">\n                      <p>\n                        <strong>\n                          <span\n                            *ngIf=\"contact.is_encrypted && !contact.email; else contactEmail\"\n                            class=\"badge badge-warning mr-2 p-1\"\n                          >\n                            **Encrypted**\n                          </span>\n                          <ng-template #contactEmail>\n                            <span class=\"d-inline-block text-truncate mail-contact-email-field\">{{\n                              contact.email\n                            }}</span>\n                          </ng-template>\n                        </strong>\n                      </p>\n                    </div>\n                  </div>\n                </td>\n              </tr>\n            </ng-container>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"col-12 mail-contact mail-contact-layout-col mail-contact-entry-col\">\n        <div class=\"mail-actions-form-holder\">\n          <h5 class=\"mail-actions-form-title text-dark\">\n            <button class=\"actions-btn\" role=\"button\" (click)=\"destroySplitContactLayout()\">\n              <i class=\"icon icon-arrow-left\"></i>\n            </button>\n            <strong>{{ 'contacts.details' | translate }}</strong>\n          </h5>\n          <app-save-contact\n            *ngIf=\"isNewContact\"\n            [selectedContact]=\"selectedContact\"\n            (userSaved)=\"destroySplitContactLayout()\"\n          ></app-save-contact>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Add users contact modal on mobile version -->\n<ng-template #addUserContent let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"makeDonationModalLabel\">\n      <strong>{{ 'contacts.details' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <app-save-contact *ngIf=\"isNewContact\" [selectedContact]=\"selectedContact\" (userSaved)=\"d()\"></app-save-contact>\n    </div>\n  </div> </ng-template\n><!-- /.Add users contact modal ends -->\n\n<!-- Confirm contact delete modal -->\n<ng-template #confirmDeleteModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'contacts.delete.title' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span>{{ 'contacts.delete.message' | translate }}</span>\n        <span *ngIf=\"checkAll\"> {{ MAX_EMAIL_PAGE_LIMIT }} </span\n        ><span *ngIf=\"!checkAll\"> {{ selectedContacts?.length }} </span> <span>{{ 'common.contact' | translate }}</span\n        >?\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"cancelDelete()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n          {{ 'common.cancel' | translate }}\n        </button>\n        <button (click)=\"deleteContacts()\" class=\"btn btn-danger btn-sm\" role=\"button\">\n          {{ 'common.delete' | translate }}\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm contact delete modal ends -->\n\n<!-- import contacts modal -->\n<ng-template #importContactsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'contacts.import_contacts' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder text-center\">\n      <div class=\"form-group mb-0\">\n        {{ 'contacts.select_csv' | translate }}\n      </div>\n      <input\n        type=\"file\"\n        #importContactsInput\n        accept=\".csv\"\n        (change)=\"onContactsFileSelected($event.target.files)\"\n        style=\"display: none\"\n      />\n      <div *ngIf=\"importContactsError\" class=\"l-alert l-alert-danger mb-3\">\n        {{ importContactsError }}\n      </div>\n      <div class=\"form-group\">\n        <button\n          type=\"button\"\n          (click)=\"selectedContactsProvider = contactsProviderType.GOOGLE; importContactsInput.click()\"\n          class=\"btn btn-success btn-sm col col-sm-7 mt-2\"\n          role=\"button\"\n        >\n          {{ 'contacts.import_f_google' | translate }}\n        </button>\n        <br />\n        <button\n          type=\"button\"\n          (click)=\"selectedContactsProvider = contactsProviderType.YAHOO; importContactsInput.click()\"\n          class=\"btn btn-success btn-sm col col-sm-7 mt-2\"\n          role=\"button\"\n        >\n          {{ 'contacts.import_f_yahoo' | translate }}\n        </button>\n        <br />\n        <button\n          type=\"button\"\n          (click)=\"selectedContactsProvider = contactsProviderType.OUTLOOK; importContactsInput.click()\"\n          class=\"btn btn-success btn-sm col col-sm-7 mt-2\"\n          role=\"button\"\n        >\n          {{ 'contacts.import_f_outlook' | translate }}\n        </button>\n        <br />\n        <button\n          type=\"button\"\n          (click)=\"selectedContactsProvider = contactsProviderType.OTHER; importContactsInput.click()\"\n          class=\"btn btn-success btn-sm col col-sm-7 mt-2\"\n          role=\"button\"\n        >\n          {{ 'contacts.import_f_other' | translate }}\n        </button>\n        <div class=\"form-group mb-0 mt-3\">\n          {{ 'contacts.select_vcf' | translate }}\n        </div>\n        <input\n          type=\"file\"\n          #importVcfContactsInput\n          accept=\".vcf\"\n          (change)=\"onContactsFileSelected($event.target.files)\"\n          style=\"display: none\"\n        />\n        <button\n          type=\"button\"\n          (click)=\"selectedContactsProvider = contactsProviderType.VCARD; importVcfContactsInput.click()\"\n          class=\"btn btn-success btn-sm col col-sm-7 mt-2\"\n          role=\"button\"\n        >\n          {{ 'contacts.import_f_drive' | translate }}\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.import contacts modal ends -->\n\n<!-- Notify Contacts Modal -->\n<ng-template #notifyContactsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'contacts.notify_contacts_title' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"modal-description\">\n      <span class=\"text-small\">{{ 'contacts.notify_contacts_description.before' | translate }}</span>\n      <span class=\"text-small\" *ngIf=\"checkAll\"> {{ MAX_EMAIL_PAGE_LIMIT }} </span\n      ><span class=\"text-small\" *ngIf=\"!checkAll\"> {{ selectedContacts?.length }} </span>\n      <span class=\"text-small\">{{ 'contacts.notify_contacts_description.after' | translate }}</span>\n      <span class=\"text-small\">\n        <a target=\"_blank\" href=\"https://ctemplar.com/help/change-of-email-address-notice/\" rel=\"noreferrer noopener\"\n          >Learn more</a\n        ></span\n      >\n    </div>\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"modal-content-email\">\n        <span>{{ 'contacts.notify_contacts_email.title' | translate }}</span>\n        <br />\n        <br />\n        <span>{{ 'contacts.notify_contacts_email.content_before' | translate }}</span>\n        <span\n          ><a>{{ currentMailbox.email }}</a></span\n        >\n        <span>{{ 'contacts.notify_contacts_email.content_after' | translate }}</span>\n        <span>{{ currentMailbox.display_name ? currentMailbox.display_name : currentMailbox.email }}</span>\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"cancelNotifyContacts()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n          {{ 'common.cancel' | translate }}\n        </button>\n        <button (click)=\"notifyContacts()\" class=\"btn btn-danger btn-sm\" role=\"button\">\n          {{ 'contacts.send_email' | translate }}\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Notify Contacts modal ends -->\n","import { AfterViewInit, ChangeDetectorRef, Component, Inject, OnInit, ViewChild, HostListener } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Store } from '@ngrx/store';\nimport { NgbDropdownConfig, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { ActivatedRoute } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { AppState, Contact, ContactsState, PlanType, UserState, MailBoxesState } from '../../store/datatypes';\nimport { ContactDelete, ContactImport, ContactsGet, SnackErrorPush, ContactNotify } from '../../store';\nimport { BreakpointsService } from '../../store/services/breakpoint.service';\nimport { ComposeMailService } from '../../store/services/compose-mail.service';\nimport { Mailbox } from '../../store/models';\n\nexport enum ContactsProviderType {\n  GOOGLE = <any>'GOOGLE',\n  YAHOO = <any>'YAHOO',\n  OUTLOOK = <any>'OUTLOOK',\n  OTHER = <any>'OTHER',\n  VCARD = <any>'VCARD',\n}\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-contact',\n  templateUrl: './mail-contact.component.html',\n  styleUrls: ['./mail-contact.component.scss'],\n})\nexport class MailContactComponent implements OnInit, AfterViewInit {\n  @ViewChild('importContactsModal') importContactsModal: any;\n\n  @ViewChild('confirmDeleteModal') confirmDeleteModal: any;\n\n  @ViewChild('addUserContent') addUserContent: any;\n\n  @ViewChild('notifyContactsModal') notifyContactsModal: any;\n\n  contactsProviderType = ContactsProviderType;\n\n  public userState: UserState;\n\n  public contactsState: ContactsState;\n\n  public isNewContact: boolean;\n\n  public selectedContact: Contact;\n\n  public inProgress: boolean;\n\n  public selectAll: boolean;\n\n  public selectedContacts: Contact[] = [];\n\n  selectedContactsProvider: ContactsProviderType;\n\n  importContactsError: any;\n\n  isLayoutSplitted = false;\n\n  checkAll = false;\n\n  isMenuOpened: boolean;\n\n  isMobile: boolean;\n\n  currentPlan: PlanType;\n\n  currentMailbox: Mailbox;\n\n  notifyContactsMail: any = {};\n\n  // Initial Page Settings\n  MAX_EMAIL_PAGE_LIMIT = 1;\n\n  LIMIT = 20;\n\n  OFFSET = 0;\n\n  PAGE = 0;\n\n  private contactsCount: number;\n\n  private confirmModalRef: NgbModalRef;\n\n  private importContactsModalRef: NgbModalRef;\n\n  private notifyContactsModalRef: NgbModalRef;\n\n  private searchText: string;\n\n  constructor(\n    private store: Store<AppState>,\n    private modalService: NgbModal,\n    private breakpointsService: BreakpointsService,\n    private composeMailService: ComposeMailService,\n    private activatedRoute: ActivatedRoute,\n    private translateService: TranslateService,\n    config: NgbDropdownConfig,\n    @Inject(DOCUMENT) private document: Document,\n    private cdr: ChangeDetectorRef,\n  ) {\n    // customize default values of dropdowns used by this component tree\n    config.autoClose = true;\n  }\n\n  ngOnInit() {\n    this.updateUsersStatus();\n    // Get contacts with searchText of current router params\n    this.activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe(parameters => {\n      this.searchText = parameters.search || '';\n      this.store.dispatch(new ContactsGet({ limit: 20, offset: 0, q: this.searchText }));\n    });\n\n    this.isMobile = window.innerWidth <= 768;\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    this.isMobile = window.innerWidth <= 768;\n  }\n\n  ngAfterViewInit(): void {\n    this.cdr.detectChanges();\n  }\n\n  private updateUsersStatus(): void {\n    /**\n     * Get user's current plan type\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((state: UserState) => {\n        this.userState = state;\n        this.currentPlan = state.settings.plan_type || PlanType.FREE;\n      });\n    /**\n     * Get contacts status from Store\n     */\n    this.store\n      .select(state => state.contacts)\n      .pipe(untilDestroyed(this))\n      .subscribe((contactsState: ContactsState) => {\n        this.contactsState = contactsState;\n        this.inProgress = contactsState.inProgress;\n        this.MAX_EMAIL_PAGE_LIMIT = contactsState.totalContacts;\n        if (this.contactsCount === contactsState.contacts.length + this.selectedContacts.length) {\n          this.selectedContacts = [];\n          this.contactsCount = null;\n        }\n      });\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        if (mailBoxesState.currentMailbox) {\n          this.currentMailbox = mailBoxesState.currentMailbox;\n        } else if (mailBoxesState.mailboxes.length > 0) {\n          this.currentMailbox = mailBoxesState.mailboxes[0];\n        }\n      });\n  }\n\n  toggleMenu() {\n    if (this.breakpointsService.isSM() || this.breakpointsService.isXS()) {\n      if (this.isMenuOpened) {\n        this.document.body.classList.remove('menu-open');\n        this.isMenuOpened = false;\n      }\n      if (this.document.body.classList.contains('menu-open')) {\n        this.isMenuOpened = true;\n      }\n    }\n  }\n\n  initSplitContactLayout(): any {\n    this.isLayoutSplitted = true;\n    this.isNewContact = true;\n  }\n\n  destroySplitContactLayout(): any {\n    this.isLayoutSplitted = false;\n    this.isNewContact = false;\n    this.selectedContact = null;\n  }\n\n  addUserContactModalOpen(addUserContent: any) {\n    this.isNewContact = true;\n    this.modalService.open(addUserContent, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n      beforeDismiss: () => {\n        this.isNewContact = false;\n        this.selectedContact = null;\n        return true;\n      },\n    });\n  }\n\n  editContact(contact: Contact, addUserContent: any) {\n    this.selectedContact = contact;\n    if (this.breakpointsService.isSM()) {\n      this.addUserContactModalOpen(addUserContent);\n    } else {\n      this.initSplitContactLayout();\n    }\n  }\n\n  checkContact(contact: Contact) {\n    this.selectAll = false;\n    contact.markForDelete = !contact.markForDelete;\n    this.selectedContacts = this.contactsState.contacts.filter(item => item.markForDelete);\n  }\n\n  openConfirmDeleteModal(modalReference: any) {\n    this.selectedContacts = this.contactsState.contacts.filter(item => item.markForDelete);\n    if (this.selectedContacts.length === 0) {\n      return;\n    }\n    this.confirmModalRef = this.modalService.open(modalReference, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  cancelDelete() {\n    this.confirmModalRef.close();\n  }\n\n  selectEntire(status: boolean) {\n    if (status) {\n      this.checkAll = true;\n    } else {\n      this.checkAll = false;\n      this.selectAll = false;\n      this.toggleSelectAll();\n    }\n  }\n\n  deleteContacts() {\n    this.confirmModalRef.close();\n    this.inProgress = true;\n    this.contactsCount = this.contactsState.contacts.length;\n    const deleteContacts = this.checkAll ? 'all' : this.selectedContacts.map(item => item.id).join(',');\n    this.store.dispatch(new ContactDelete(deleteContacts));\n  }\n\n  showComposeMailDialog() {\n    this.selectedContacts = this.contactsState.contacts.filter(item => item.markForDelete);\n    if (this.selectedContacts.length > 10) {\n      this.store.dispatch(\n        new SnackErrorPush({\n          message: 'Cannot open compose for more than 10 contacts',\n        }),\n      );\n    } else {\n      const receiverEmails = this.selectedContacts.map(contact => contact.email);\n      this.composeMailService.openComposeMailDialog({\n        receivers: receiverEmails,\n        isFullScreen: this.userState.settings.is_composer_full_screen,\n      });\n    }\n  }\n\n  toggleSelectAll() {\n    this.contactsState.contacts.forEach(item => (item.markForDelete = this.selectAll));\n    this.selectedContacts = this.contactsState.contacts.filter(item => item.markForDelete);\n  }\n\n  openImportContactsModal() {\n    this.selectedContactsProvider = null;\n    this.importContactsError = null;\n    this.importContactsModalRef = this.modalService.open(this.importContactsModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  closeImportContactsModal() {\n    if (this.importContactsModalRef) {\n      this.importContactsModalRef.close();\n    }\n  }\n\n  cancelNotifyContacts() {\n    this.notifyContactsModalRef.close();\n  }\n\n  notifyContacts() {\n    this.notifyContactsModalRef.close();\n    this.inProgress = true;\n    this.contactsCount = this.contactsState.contacts.length;\n    const contacts = this.selectedContacts.map(item => item.email);\n    const display_name = this.currentMailbox.display_name\n      ? this.currentMailbox.display_name\n      : this.currentMailbox.email;\n    // generating mails\n    this.notifyContactsMail = {\n      mailbox: this.currentMailbox.id,\n      sender: this.currentMailbox.email,\n      receiver: contacts,\n      display_name,\n    };\n    this.store.dispatch(new ContactNotify(this.notifyContactsMail));\n  }\n\n  openNotifyContactsModal() {\n    this.selectedContacts = this.contactsState.contacts.filter(item => item.markForDelete);\n    if (this.selectedContacts.length === 0) {\n      return;\n    }\n    this.notifyContactsModalRef = this.modalService.open(this.notifyContactsModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  closeNotifyContactsModal() {\n    if (this.notifyContactsModalRef) {\n      this.notifyContactsModalRef.close();\n    }\n  }\n\n  onContactsFileSelected(files: Array<File>) {\n    if (files.length === 1) {\n      const data = {\n        file: files[0],\n        provider: this.selectedContactsProvider,\n      };\n      this.store.dispatch(new ContactImport(data));\n      this.closeImportContactsModal();\n    } else if (files.length > 1) {\n      this.importContactsError = 'Multiple files are not allowed.';\n    }\n  }\n\n  prevPage() {\n    if (this.PAGE > 0) {\n      this.PAGE--;\n      this.OFFSET = this.PAGE * this.LIMIT;\n      this.store.dispatch(new ContactsGet({ limit: this.LIMIT, offset: this.OFFSET, q: this.searchText }));\n    }\n  }\n\n  nextPage() {\n    if ((this.PAGE + 1) * this.LIMIT < this.MAX_EMAIL_PAGE_LIMIT) {\n      this.OFFSET = (this.PAGE + 1) * this.LIMIT;\n      this.PAGE++;\n      this.store.dispatch(new ContactsGet({ limit: this.LIMIT, offset: this.OFFSET, q: this.searchText }));\n    }\n  }\n}\n","<form class=\"mail-actions-form\" (submit)=\"createNewContact()\" #newContactForm=\"ngForm\">\n  <!-- Contact Name-->\n  <div class=\"form-group\">\n    <div class=\"md-errors-spacer\" *ngIf=\"contactName.errors && contactName.dirty\">\n      <div *ngIf=\"contactName.errors && contactName.errors.required\">\n        <span class=\"d-block text-right error-msg is-sm\">{{ 'contacts.save.name_required' | translate }}</span>\n      </div>\n    </div>\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label mb-sm-0\" for=\"contactName\">\n          <span>{{ 'common.name' | translate }}</span\n          ><sup>*</sup></label\n        >\n      </div>\n      <div class=\"col-sm-10\">\n        <input\n          class=\"form-control form-control-sm\"\n          id=\"contactName\"\n          name=\"name\"\n          required\n          #contactName=\"ngModel\"\n          [(ngModel)]=\"newContactModel.name\"\n          [placeholder]=\"'contacts.contact_name' | translate\"\n          type=\"text\"\n        />\n      </div>\n    </div>\n  </div>\n  <!-- Contact Email-->\n  <div class=\"form-group is-repeatable add-button\">\n    <div class=\"md-errors-spacer\" *ngIf=\"contactEmail.errors && contactEmail.dirty\">\n      <div *ngIf=\"contactEmail.errors.required\">\n        <span class=\"d-block text-right error-msg is-sm\">{{ 'contacts.save.email_req' | translate }}</span>\n      </div>\n      <div *ngIf=\"contactEmail.errors.pattern\">\n        <span class=\"d-block text-right error-msg is-sm\">{{ 'contacts.save.email_not_valid' | translate }}</span>\n      </div>\n    </div>\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label mb-sm-0\" for=\"contactEmail\">\n          <span>{{ 'common.email' | translate }}</span\n          ><sup>*</sup></label\n        >\n      </div>\n      <div class=\"col-sm-10\">\n        <div class=\"position-relative\">\n          <input\n            class=\"form-control form-control-sm\"\n            id=\"contactEmail\"\n            name=\"email\"\n            required\n            [(ngModel)]=\"newContactModel.email\"\n            #contactEmail=\"ngModel\"\n            [placeholder]=\"'contacts.type_email' | translate\"\n            type=\"text\"\n            pattern=\"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$\"\n          />\n          <i\n            class=\"fas fa-cogs advanced-settings-icon cursor-pointer\"\n            ngbTooltip=\"Advanced Settings\"\n            *ngIf=\"!internalUser && !contactEmail.errors && newContactModel.id\"\n            (click)=\"onShowAdvancedSettings()\"\n            [disabled]=\"inProgress\"\n          ></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Contact Encryption for InternalUsers-->\n  <!-- <div class=\"form-group add-button\" *ngIf=\"!internalUser\">\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2 encryptionLabel\">\n        <label class=\"form-label mb-sm-0\" for=\"enableEncryption\">{{ 'contacts.encryption' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\" id=\"contactEncryptionCheckbox\">\n        <mat-checkbox\n          type=\"checkbox\"\n          [checked]=\"newContactModel.enabled_encryption\"\n          [(ngModel)]=\"newContactModel.enabled_encryption\"\n          [name]=\"newContactModel.id\"\n        >\n        </mat-checkbox>\n      </div>\n    </div>\n  </div> -->\n  <!-- Contact Encryption Public Key-->\n  <!-- <div class=\"form-group add-button\" *ngIf=\"newContactModel.enabled_encryption && !internalUser\">\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label mb-sm-0\" for=\"contactPublicKey\">{{ 'contacts.publickey' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\">\n        <textarea\n          class=\"form-control form-control-sm resize-off\"\n          id=\"contactPublicKey\"\n          [placeholder]=\"'contacts.publickey' | translate\"\n          name=\"public_key\"\n          [(ngModel)]=\"newContactModel.public_key\"\n          rows=\"3\"\n        ></textarea>\n      </div>\n      <button class=\"add-button-link contact-publickey-clear\" (click)=\"clearPublicKey()\">\n        <em class=\"fas fa-times\"></em>\n      </button>\n    </div>\n  </div> -->\n  <div class=\"mb-2 hidden-xs-down\">&nbsp;</div>\n  <!-- Contact Phone Number 1-->\n  <div class=\"form-group add-button\">\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label mb-sm-0\" for=\"contactPhone1\">{{ 'common.phone' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\">\n        <input\n          class=\"form-control form-control-sm\"\n          id=\"contactPhone1\"\n          name=\"phone\"\n          [(ngModel)]=\"newContactModel.phone\"\n          [placeholder]=\"'common.phone' | translate\"\n          type=\"text\"\n        />\n      </div>\n    </div>\n  </div>\n  <!-- Contact Phone Number 2-->\n  <div class=\"form-group is-repeatable add-button\">\n    <div class=\"row align-items-center\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label mb-sm-0\" for=\"contactPhone2\">{{ 'contacts.phone2' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\">\n        <input\n          class=\"form-control form-control-sm\"\n          id=\"contactPhone2\"\n          [placeholder]=\"'common.phone' | translate\"\n          name=\"phone2\"\n          [(ngModel)]=\"newContactModel.phone2\"\n          type=\"text\"\n        />\n      </div>\n    </div>\n  </div>\n  <!-- Contact Address-->\n  <div class=\"form-group is-repeatable add-button\">\n    <div class=\"row\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label pt-sm-2 mb-sm-0\" for=\"contactAddress\">{{ 'contacts.address' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\">\n        <textarea\n          class=\"form-control form-control-sm resize-off\"\n          id=\"contactAddress\"\n          [placeholder]=\"'contacts.address' | translate\"\n          name=\"address\"\n          [(ngModel)]=\"newContactModel.address\"\n          rows=\"3\"\n        ></textarea>\n      </div>\n    </div>\n  </div>\n  <div class=\"mb-2 hidden-xs-down\">&nbsp;</div>\n  <!-- Contact Note-->\n  <div class=\"form-group\">\n    <div class=\"row\">\n      <div class=\"col-sm-2\">\n        <label class=\"form-label pt-sm-2 mb-sm-0\" for=\"contactNote\">{{ 'contacts.note' | translate }}</label>\n      </div>\n      <div class=\"col-sm-10\">\n        <textarea\n          class=\"form-control form-control-sm resize-off\"\n          id=\"contactNote\"\n          [placeholder]=\"'contacts.a_note' | translate\"\n          name=\"note\"\n          [(ngModel)]=\"newContactModel.note\"\n          rows=\"3\"\n        ></textarea>\n      </div>\n    </div>\n  </div>\n  <div class=\"hidden-sm-up\">&nbsp;</div>\n  <div class=\"error-msg\" *ngIf=\"newContactForm.submitted && newContactForm.invalid\">\n    {{ 'contacts.save.error' | translate }}\n  </div>\n  <!-- Save button-->\n  <div class=\"form-group text-right mb-0\">\n    <button type=\"submit\" [disabled]=\"inProgress\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n      {{ 'common.save' | translate }}\n    </button>\n    <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n  </div>\n</form>\n\n<!--Advanced Settings Modal-->\n<ng-template #advancedSettingsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"createFoldersModalLabel\">\n      <strong [translate]=\"'contacts.advanced_settings'\">Advanced Settings</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <p class=\"text-holder text-dark text-medium\">\n      {{ 'contacts.advanced.description' | translate }}\n      <a href=\"{{ primaryWebsite }}/contacts/advanced-settings/\" target=\"_blank\" rel=\"noopener noreferrer\">{{\n        'mail_header.learn_more' | translate\n      }}</a>\n    </p>\n    <div>\n      <div class=\"section-title text-dark\">\n        <strong [translate]=\"'contacts.advanced.pgp_encryption_settings'\">PGP Encryption Settings</strong>\n      </div>\n    </div>\n    <div class=\"mt-3\">\n      <!-- Encryption Flag section -->\n      <div class=\"form-content-row mb-2\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-4\">\n            <label class=\"form-label mb-0\" [translate]=\"'contacts.advanced.encrypt'\"> Encrypt </label>\n            <i\n              class=\"fas fa-exclamation-triangle ml-1\"\n              *ngIf=\"\n                !newContactModel.enabled_encryption &&\n                (!selectedContactPulbicKeys || selectedContactPulbicKeys.length === 0)\n              \"\n              [ngbTooltip]=\"'contacts.advanced.encrypt_desc' | translate\"\n            ></i>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"isEncrypt1\"\n                    name=\"[1]\"\n                    type=\"radio\"\n                    [checked]=\"newContactModel.enabled_encryption\"\n                    (click)=\"onClickIsEncrypt(true)\"\n                    [disabled]=\"!selectedContactPulbicKeys || selectedContactPulbicKeys.length === 0\"\n                  />\n                  <label for=\"isEncrypt1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"isEncrypt2\"\n                    name=\"[1]\"\n                    type=\"radio\"\n                    [checked]=\"!newContactModel.enabled_encryption\"\n                    (click)=\"onClickIsEncrypt(false)\"\n                    [disabled]=\"!selectedContactPulbicKeys || selectedContactPulbicKeys.length === 0\"\n                  />\n                  <label for=\"isEncrypt2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Encryption Scheme section -->\n      <div class=\"form-content-row mb-2\">\n        <div class=\"row\">\n          <div class=\"col-sm-4\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'contacts.advanced.encrypt_scheme'\">\n              Encryption Scheme\n            </label>\n            <ng-template #encryptionSchemeTooltip>\n              <div class=\"text-left\" [translate]=\"'contacts.advanced.encrypt_scheme_desc1'\">\n                PGP Encryption Scheme to be used when encrypting.\n              </div>\n              <div class=\"text-left\" [translate]=\"'contacts.advanced.encrypt_scheme_desc2'\">\n                Note that PGP/Inline is only available for Plain Text Messages\n              </div>\n            </ng-template>\n            <i class=\"fas fa-info-circle ml-1\" [ngbTooltip]=\"encryptionSchemeTooltip\"></i>\n          </div>\n          <div class=\"col-sm-8\">\n            <div class=\"btn-dropdown btn-dropdown-select\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  type=\"button\"\n                  ngbDropdownToggle\n                  id=\"filterParameterDropdownMenuBtn\"\n                  role=\"button\"\n                  [disabled]=\"!newContactModel.enabled_encryption\"\n                >\n                  <span> {{ newContactModel.encryption_type ? newContactModel.encryption_type : 'PGP/MIME' }} </span>\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"filterParameterDropdownMenuBtn\">\n                  <a class=\"dropdown-item text-medium\" (click)=\"onSelectEncryptionScheme('MIME')\">\n                    <span>PGP/MIME</span>\n                  </a>\n                  <a class=\"dropdown-item text-medium\" (click)=\"onSelectEncryptionScheme('INLINE')\">\n                    <span>PGP/INLINE</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Autocrypt section -->\n      <div class=\"form-content-row mt-4 mb-2\">\n        <div class=\"section-title text-dark\">\n          <strong [translate]=\"'contacts.advanced.autocrypt_settings'\">Autocrypt Settings</strong>\n        </div>\n        <div class=\"row autocrypt-section-row\">\n          <div class=\"col-sm-5\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.prefer_encrypt'\"> Prefer Encrypt </label>\n            <ng-template #preferEncryptTooltip>\n              <div class=\"text-left\" [translate]=\"'contacts.advanced.autocrypt_desc1'\">\n                If \"mutual\" is selected and Prefer Encrypt of your mailbox is also \"mutual\",\n              </div>\n              <div class=\"text-left\" [translate]=\"'contacts.advanced.autocrypt_desc2'\">\n                all of outgoing messages to this contact would be encrypted\n              </div>\n            </ng-template>\n            <i class=\"fas fa-info-circle ml-1\" [ngbTooltip]=\"preferEncryptTooltip\"></i>\n          </div>\n          <div class=\"col-sm-7\">\n            <div class=\"btn-dropdown btn-dropdown-select\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  type=\"button\"\n                  ngbDropdownToggle\n                  id=\"preferEncryptDropdownMenuBtn\"\n                  role=\"button\"\n                  [disabled]=\"!selectedContactPulbicKeys || selectedContactPulbicKeys.length === 0\"\n                >\n                  <span> {{ newContactModel.prefer_encrypt ? newContactModel.prefer_encrypt : 'nopreference' }} </span>\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"filterParameterDropdownMenuBtn\">\n                  <a class=\"dropdown-item text-medium\" (click)=\"onSelectPreferEncrypt('nopreference')\">\n                    <span>nopreference (Default)</span>\n                  </a>\n                  <a class=\"dropdown-item text-medium\" (click)=\"onSelectPreferEncrypt('mutual')\">\n                    <span>mutual</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Public keys section -->\n      <div class=\"form-content-row mb-2 mt-4 text-medium contact-public-keys-section\">\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <div class=\"d-flex justify-content-between\">\n              <strong class=\"text-dark\">Public Keys</strong>\n              <input\n                type=\"file\"\n                #importKeyFileTag\n                accept=\".txt,.asc\"\n                (change)=\"onSelectNewKeyFile($event.target.files)\"\n                style=\"display: none\"\n              />\n              <div>\n                <a (click)=\"importKeyFileTag.click()\">\n                  <i class=\"fas fa-plus-circle\"></i>\n                  {{ 'contacts.advanced.add_key' | translate }}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row mt-2\" *ngIf=\"selectedContactPulbicKeys && selectedContactPulbicKeys.length > 0\">\n          <div class=\"col-12 key-list-container\">\n            <div class=\"row key-list-header mb-1\">\n              <div class=\"col-2 key-list-header-item text-right\"></div>\n              <div class=\"col-5 key-list-header-item\">\n                <label class=\"form-label mb-0\" [translate]=\"'settings.keys.fingerprint'\">Fingerprint</label>\n              </div>\n              <div class=\"col-3 key-list-header-item\">\n                <label class=\"form-label mb-0\" [translate]=\"'settings.keys.key_type'\"> Key Type </label>\n              </div>\n              <div class=\"col-2 key-list-header-item\">\n                <label class=\"form-label mb-0\" [translate]=\"'contacts.advanced.action'\"> Actions </label>\n              </div>\n            </div>\n            <div class=\"row key-list-row\" *ngFor=\"let key of selectedContactPulbicKeys\">\n              <div class=\"col-2 key-list-row-item text-right\">\n                <i\n                  *ngIf=\"key.is_primary\"\n                  class=\"fa fa-check\"\n                  aria-hidden=\"true\"\n                  [ngbTooltip]=\"'contacts.advanced.primary_public_key_desc' | translate\"\n                ></i>\n                <ng-template #userIdMismatchTooltip>\n                  <div class=\"text-left\">\n                    {{ 'contacts.advanced.key_assign_warn1' | translate }}{{ selectedContact.email }}\n                  </div>\n                  <div class=\"text-left\">\n                    {{ 'contacts.advanced.key_assign_warn2' | translate }}\n                    {{ key.parsed_emails && key.parsed_emails.length > 0 ? key.parsed_emails[0] : 'N/A' }}\n                  </div>\n                </ng-template>\n                <i\n                  *ngIf=\"!keyMatchStatusForEmail[key.fingerprint]\"\n                  class=\"fas fa-exclamation-triangle ml-2\"\n                  aria-hidden=\"true\"\n                  [ngbTooltip]=\"userIdMismatchTooltip\"\n                ></i>\n              </div>\n              <div class=\"col-5 key-list-row-item show-ellipses\">\n                {{ key.fingerprint }}\n              </div>\n              <div class=\"col-3 key-list-row-item\">\n                {{ key.key_type }}\n              </div>\n              <div class=\"col-2 key-list-row-item text-left\">\n                <a\n                  [href]=\"downloadUrls[key.fingerprint] | safe: 'url'\"\n                  [ngbTooltip]=\"'settings.download_public_key' | translate\"\n                  [download]=\"'publickey.' + this.selectedContact.email + '.asc'\"\n                  ><i class=\"fa fa-download cursor-pointer mr-2\" aria-hidden=\"true\"></i\n                ></a>\n                <a [ngbTooltip]=\"'contacts.advanced.remove_public_key' | translate\" (click)=\"onRemovePublicKey(key)\"\n                  ><i class=\"far fa-trash-alt cursor-pointer mr-2\" aria-hidden=\"true\"></i\n                ></a>\n                <a\n                  [ngbTooltip]=\"'settings.keys.set_as_primary' | translate\"\n                  *ngIf=\"newContactModel.enabled_encryption\"\n                  (click)=\"onSetPrimary(key)\"\n                  ><i *ngIf=\"!key.is_primary\" class=\"far fa-check-circle cursor-pointer\" aria-hidden=\"true\"></i\n                ></a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <app-loading-spinner [showSpinner]=\"advancedSettingInProgress || isImportingKey\"></app-loading-spinner>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"onSaveAdvancedSettings()\"\n          [translate]=\"'common.save'\"\n        >\n          Save\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { take } from 'rxjs/operators';\n\nimport {\n  AppState,\n  AutocryptPreferEncryptType,\n  Contact,\n  ContactKey,\n  ContactsState,\n  PGPEncryptionType,\n  StringBooleanMappedType,\n  StringStringMappedType,\n  UserState,\n} from '../../../store/datatypes';\nimport {\n  ContactAdd,\n  ContactAddKeys,\n  ContactBulkUpdateKeys,\n  ContactFetchKeys,\n  ContactRemoveKeys,\n  SnackErrorPush,\n} from '../../../store';\nimport { OpenPgpService } from '../../../store/services';\n\nimport { getEmailDomain, PRIMARY_WEBSITE } from '../../../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-save-contact',\n  templateUrl: './save-contact.component.html',\n  styleUrls: ['./save-contact.component.scss', './../mail-contact.component.scss'],\n})\nexport class SaveContactComponent implements OnInit, AfterViewInit {\n  @Input() selectedContact: Contact;\n\n  @Output() userSaved = new EventEmitter<boolean>();\n\n  @ViewChild('newContactForm') newContactForm: NgForm;\n\n  @ViewChild('advancedSettingsModal') advancedSettingsModal: any;\n\n  private advancedSettingsModalRef: NgbModalRef;\n\n  newContactModel: Contact = {\n    name: '',\n    email: '',\n    address: '',\n    note: '',\n    phone: '',\n    enabled_encryption: false,\n  };\n\n  public inProgress: boolean;\n\n  public advancedSettingInProgress: boolean = false;\n\n  public isUpdatedPrimaryKey: boolean = false;\n\n  public isImportingKey: boolean = false;\n\n  public internalUser: boolean;\n\n  private isContactsEncrypted: boolean;\n\n  PGPEncryptionType: PGPEncryptionType;\n\n  keyMatchStatusForEmail: StringBooleanMappedType = {};\n\n  downloadUrls: StringStringMappedType = {};\n\n  selectedContactPulbicKeys: Array<ContactKey> = [];\n\n  isAutocryptEnabled: boolean;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  constructor(\n    private store: Store<AppState>,\n    private openpgp: OpenPgpService,\n    private cdr: ChangeDetectorRef,\n    private modalService: NgbModal,\n  ) {}\n\n  ngOnInit() {\n    this.handleUserState();\n  }\n\n  ngOnChanges(): void {\n    // Get contactEmail, Domain and check if this is internalUser with domain\n    this.newContactModel = { ...this.selectedContact };\n    const contactEmail = this.newContactModel.email;\n    const emailDomain = contactEmail.substring(contactEmail.indexOf('@') + 1, contactEmail.length);\n    this.internalUser = emailDomain === getEmailDomain();\n    if (!this.internalUser) {\n      this.store.dispatch(new ContactFetchKeys(this.selectedContact));\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.cdr.detectChanges();\n  }\n\n  private handleUserState(): void {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        this.isContactsEncrypted = userState.settings.is_contacts_encrypted; // set encryption from user settings\n      });\n\n    this.store\n      .select(state => state.contacts)\n      .pipe(untilDestroyed(this))\n      .subscribe((contactsState: ContactsState) => {\n        if (this.inProgress && !contactsState.inProgress) {\n          this.inProgress = false;\n          if (!contactsState.isError && !this.advancedSettingsModalRef) {\n            this.userSaved.emit(true);\n          }\n        }\n        this.advancedSettingInProgress = contactsState.advancedSettingInProgress;\n        this.selectedContactPulbicKeys = contactsState.selectedContactKeys;\n\n        this.selectedContactPulbicKeys.forEach(key => {\n          this.keyMatchStatusForEmail[key.fingerprint] = key.parsed_emails\n            ? key.parsed_emails.includes(this.selectedContact.email)\n            : false;\n          this.downloadUrls[key.fingerprint] = `data:application/octet-stream;charset=utf-8;base64,${btoa(\n            key.public_key,\n          )}`;\n        });\n      });\n  }\n\n  createNewContact(isCheckForm: boolean = true) {\n    if (isCheckForm && this.newContactForm.invalid) {\n      return false;\n    }\n    this.newContactModel.email = this.newContactModel.email.toLocaleLowerCase();\n    if (this.isContactsEncrypted) {\n      this.openpgp.encryptContact(this.newContactModel);\n    } else {\n      this.store.dispatch(new ContactAdd(this.newContactModel));\n    }\n    this.inProgress = true;\n  }\n\n  clearPublicKey() {\n    // this.newContactModel.public_key = '';\n    // return false;\n  }\n\n  onShowAdvancedSettings() {\n    this.advancedSettingsModalRef = this.modalService.open(this.advancedSettingsModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-lg',\n    });\n  }\n\n  onClickIsEncrypt(isEncrypt: boolean) {\n    if (!this.selectedContactPulbicKeys || this.selectedContactPulbicKeys.length === 0) {\n      return;\n    }\n    this.newContactModel.enabled_encryption = isEncrypt;\n    if (!this.newContactModel.encryption_type) {\n      this.newContactModel.encryption_type = PGPEncryptionType.PGP_MIME;\n    }\n  }\n\n  onSelectEncryptionScheme(scheme: string) {\n    if (scheme === 'MIME') {\n      this.newContactModel.encryption_type = PGPEncryptionType.PGP_MIME;\n    } else if (scheme === 'INLINE') {\n      this.newContactModel.encryption_type = PGPEncryptionType.PGP_INLINE;\n    }\n  }\n\n  onSelectNewKeyFile(files: Array<File>) {\n    if (files.length > 1) return;\n    if (this.isImportingKey) return;\n\n    if (files && files.length) {\n      this.isImportingKey = true;\n      const file = files[0];\n      let reader = new FileReader();\n      reader.addEventListener('load', (event: any) => {\n        const result = event.target.result;\n        this.openpgp\n          .getKeyInfoFromPublicKey(result)\n          .pipe(take(1))\n          .subscribe(\n            keyInfo => {\n              this.isImportingKey = false;\n              const newKeyInfo = this.getMailboxKeyModelFromParsedInfo({ ...keyInfo, public_key: result });\n              if (newKeyInfo) {\n                if (newKeyInfo.key_type === 'RSA4096' || newKeyInfo.key_type === 'ECC') {\n                  if (this.selectedContactPulbicKeys && this.selectedContactPulbicKeys.length > 0) {\n                    this.selectedContactPulbicKeys.forEach(key => {\n                      if (key.fingerprint === newKeyInfo.fingerprint && key.id) {\n                        newKeyInfo.id = key.id;\n                        newKeyInfo.is_primary = key.is_primary;\n                      }\n                    });\n                  }\n                  this.makeCallForAddKeys(newKeyInfo);\n                } else {\n                  this.store.dispatch(\n                    new SnackErrorPush({\n                      message: `Key Type ${newKeyInfo.key_type} is not allowed to import`,\n                    }),\n                  );\n                }\n              } else {\n                this.store.dispatch(\n                  new SnackErrorPush({\n                    message: 'Failed to import the public key',\n                  }),\n                );\n              }\n            },\n            error => {\n              this.isImportingKey = false;\n              this.store.dispatch(\n                new SnackErrorPush({\n                  message: `${file.name} is not a valid PGP public key`,\n                }),\n              );\n            },\n          );\n      });\n      reader.readAsText(file);\n    }\n  }\n\n  makeCallForAddKeys(key: ContactKey) {\n    key.contact = this.selectedContact.id;\n    this.store.dispatch(new ContactAddKeys({ key, email: this.selectedContact.email }));\n  }\n\n  getMailboxKeyModelFromParsedInfo(keyInfo: any): ContactKey {\n    if (keyInfo) {\n      const mailboxKey: ContactKey = {};\n      let keyType = '';\n      if (keyInfo.algorithmInfo) {\n        keyType = keyInfo.algorithmInfo.bits ? `RSA${keyInfo.algorithmInfo.bits}` : 'ECC';\n      }\n      mailboxKey.public_key = keyInfo.public_key;\n      mailboxKey.key_type = keyType;\n      // mailboxKey.created_at = keyInfo.creationTime;\n      mailboxKey.fingerprint = keyInfo.fingerprint;\n      mailboxKey.parsed_emails = keyInfo.emails;\n\n      // If there is no already associated key, new key would be Primary key\n      if (!this.selectedContactPulbicKeys || this.selectedContactPulbicKeys.length === 0) {\n        mailboxKey.is_primary = true;\n      } else {\n        mailboxKey.is_primary = false;\n      }\n      return mailboxKey;\n    }\n    return null;\n  }\n\n  onRemovePublicKey(key: ContactKey) {\n    const remainedKeys = this.selectedContactPulbicKeys.filter(originKey => originKey.id !== key.id);\n    if (remainedKeys.length === 0) {\n      this.newContactModel.encryption_type = null;\n      this.newContactModel.enabled_encryption = false;\n      this.newContactModel.prefer_encrypt = AutocryptPreferEncryptType.NOPREFERENCE;\n      this.createNewContact(false);\n    } else if (key.is_primary) {\n      remainedKeys[0].is_primary = true;\n      this.store.dispatch(new ContactBulkUpdateKeys([remainedKeys[0]]));\n    }\n    this.store.dispatch(new ContactRemoveKeys({ key, email: this.selectedContact.email }));\n  }\n\n  onSetPrimary(key: ContactKey) {\n    this.selectedContactPulbicKeys.forEach(originKey => {\n      originKey.is_primary = false;\n      if (originKey.fingerprint === key.fingerprint) {\n        originKey.is_primary = true;\n        this.isUpdatedPrimaryKey = true;\n      }\n    });\n  }\n\n  onSaveAdvancedSettings() {\n    this.store.dispatch(new ContactBulkUpdateKeys(this.selectedContactPulbicKeys));\n    this.createNewContact(false);\n  }\n\n  onSelectPreferEncrypt(type: string) {\n    if (type === AutocryptPreferEncryptType.NOPREFERENCE) {\n      this.newContactModel.prefer_encrypt = AutocryptPreferEncryptType.NOPREFERENCE;\n    } else {\n      this.newContactModel.prefer_encrypt = AutocryptPreferEncryptType.MUTUAL;\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-mail-detail-decryption-error',\n  templateUrl: './mail-detail-decryption-error.component.html',\n  styleUrls: ['./mail-detail-decryption-error.component.scss'],\n})\nexport class MailDetailDecryptionErrorComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","<div class=\"message-error row\">\n  <div class=\"col\">\n    <span class=\"error-title\">Error:</span>\n    We have got failed to decrypt this message.\n  </div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\n\nimport { Mail } from '../../../store/models';\nimport { EncryptionType } from '../../../store/datatypes';\n\n@Component({\n  selector: 'app-mail-detail-encryption-type-icon',\n  templateUrl: './mail-detail-encryption-type-icon.component.html',\n  styleUrls: ['./mail-detail-encryption-type-icon.component.scss'],\n})\nexport class MailDetailEncryptionTypeIconComponent implements OnInit {\n  @Input() mail: Mail;\n\n  encryptionType?: EncryptionType;\n\n  lastAction?: string;\n\n  // eslint-disable-next-line class-methods-use-this\n  ngOnInit(): void {\n    if (this.mail) {\n      this.lastAction = this.mail.last_action;\n      if (this.mail.encryption && this.mail.encryption.password_hint) {\n        this.encryptionType = EncryptionType.PGP_PASSWORD;\n      } else if (this.mail.encryption_type) {\n        this.encryptionType = EncryptionType.PGP_MIME_INLINE;\n      } else {\n        this.encryptionType = EncryptionType.PGP_END_TO_END;\n      }\n    }\n  }\n}\n","<ng-container [ngSwitch]=\"encryptionType\">\n  <i *ngSwitchCase=\"'PGP_MIME_INLINE'\" class=\"fas fa-lock encryption-type-icon\" ngbTooltip=\"PGP Encrypted Message\"></i>\n  <i\n    *ngSwitchCase=\"'PGP_PASSWORD'\"\n    class=\"fa fa-key encryption-type-icon\"\n    ngbTooltip=\"PGP Password Encrypted Message\"\n  ></i>\n  <!--  <i *ngSwitchCase=\"'PGP_END_TO_END'\" class=\"fas fa-lock encryption-type-icon\" ngbTooltip=\"End to End Encrypted Message\" [ngClass]=\"{'has-last-action': !!lastAction}\"></i>-->\n</ng-container>\n","<div class=\"mailbox-actionbar\">\n  <div class=\"row\">\n    <!-- Action buttons -->\n    <div class=\"col-12 col-sm-9 mailbox-actionbar-col\">\n      <ul class=\"mailbox-actionbar-menu\">\n        <li>\n          <a placement=\"top\" (click)=\"goBack()\">\n            <i class=\"fas fa-arrow-left\"></i>\n          </a>\n        </li>\n        <li class=\"px-0\" *ngIf=\"mailFolder !== mailFolderTypes.ARCHIVE && !disableMoveTo\">\n          <a\n            class=\"border-right-0 border-radius-right-0\"\n            placement=\"top\"\n            (click)=\"moveToFolder(mailFolderTypes.ARCHIVE)\"\n            [ngbTooltip]=\"'mail_list.move_to_archive' | translate\"\n          >\n            <i class=\"icon icon-archive\"></i>\n          </a>\n        </li>\n        <li class=\"pr-0 pl-0 hidden-xs-down\" *ngIf=\"mailFolder !== mailFolderTypes.SPAM && !disableMoveTo\">\n          <a\n            class=\"border-radius-0\"\n            (click)=\"moveToFolder(mailFolderTypes.SPAM)\"\n            placement=\"top\"\n            [ngbTooltip]=\"'mail_list.move_to_spam' | translate\"\n            [ngClass]=\"{ 'border-right-0': mailFolder !== mailFolderTypes.TRASH }\"\n          >\n            <i class=\"icon icon-warning\"></i>\n          </a>\n        </li>\n        <li class=\"px-0\">\n          <a\n            (click)=\"onDelete(mail)\"\n            class=\"border-radius-left-0\"\n            placement=\"top\"\n            [ngbTooltip]=\"\n              mailFolder !== mailFolderTypes.TRASH\n                ? ('mail_list.move_to_trash' | translate)\n                : ('mail_list.permanently_delete' | translate)\n            \"\n          >\n            <i class=\"icon icon-garbage\"></i>\n          </a>\n        </li>\n        <li class=\"btn-dropdown more-xs-options pl-0\" *ngIf=\"isMobile && !disableMoveTo\">\n          <div ngbDropdown autoClose=\"outside\">\n            <button ngbDropdownToggle class=\"border-left-0 border-radius-left-0\" id=\"dropdownMoreOptions\" role=\"button\">\n              <i class=\"icon icon-more\"></i>\n            </button>\n            <div ngbDropdownMenu class=\"mobiledOptionsDropdown\" aria-labelledby=\"dropdownMoreOptions\">\n              <ul class=\"more-xs-options-list\">\n                <li>\n                  <a class=\"disabled\">\n                    <i class=\"icon icon-warning\"></i>\n                  </a>\n                </li>\n                <li class=\"btn-dropdown mailbox-dropdown folders-dropdown\">\n                  <div ngbDropdown>\n                    <button ngbDropdownToggle class=\"disabledx\" id=\"extraOptionsDropdownMenuButton\" role=\"button\">\n                      <i class=\"icon icon-folder\"></i>\n                    </button>\n                    <div ngbDropdownMenu aria-labelledby=\"extraOptionsDropdownMenuButton\">\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.INBOX)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.INBOX\"\n                      >\n                        <i class=\"icon icon-inbox\"></i>\n                        <span>{{ 'mail_sidebar.inbox' | translate }}</span>\n                      </a>\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.DRAFT)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.DRAFT\"\n                      >\n                        <i class=\"icon icon-inbox\"></i>\n                        <span>{{ 'mail_sidebar.draft' | translate }}</span>\n                      </a>\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.OUTBOX)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX\"\n                      >\n                        <i class=\"icon icon-archive\"></i>\n                        <span>{{ 'mail_sidebar.outbox' | translate }}</span>\n                      </a>\n                      <ng-container *ngFor=\"let folder of customFolders; let i = index\">\n                        <a class=\"dropdown-item\" *ngIf=\"mailFolder !== folder.name\" (click)=\"moveToFolder(folder.name)\">\n                          <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n                          <span class=\"folders-list-text\">{{ folder.name }}</span>\n                        </a>\n                      </ng-container>\n                      <span class=\"divider-item d-block\"></span>\n                      <a class=\"dropdown-item\" (click)=\"openCreateFolderDialog()\">\n                        <i class=\"icon icon-folder\"></i>\n                        <span>{{ 'mail_list.create_folder' | translate }}</span>\n                      </a>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n        <li class=\"btn-dropdown mailbox-dropdown folders-dropdown\" *ngIf=\"!isMobile && !disableMoveTo\">\n          <div ngbDropdown>\n            <button\n              ngbDropdownToggle\n              class=\"disabledx\"\n              id=\"folderDropdownMenuButton\"\n              role=\"button\"\n              placement=\"top\"\n              [ngbTooltip]=\"'mail_list.move_to' | translate\"\n            >\n              <i class=\"icon icon-folder\"></i>\n            </button>\n            <div ngbDropdownMenu aria-labelledby=\"folderDropdownMenuButton\" class=\"folder-dropdown\">\n              <a\n                class=\"dropdown-item\"\n                (click)=\"moveToFolder(mailFolderTypes.INBOX)\"\n                *ngIf=\"mailFolder !== mailFolderTypes.INBOX\"\n              >\n                <i class=\"icon icon-inbox\"></i>\n                <span>{{ 'mail_sidebar.inbox' | translate }}</span>\n              </a>\n              <ng-container *ngFor=\"let folder of customFolders; let i = index\">\n                <a class=\"dropdown-item\" *ngIf=\"mailFolder !== folder.name\" (click)=\"moveToFolder(folder.name)\">\n                  <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n                  <span class=\"folders-list-text\">{{ folder.name }}</span>\n                </a>\n              </ng-container>\n              <span class=\"divider-item d-block\"></span>\n              <a class=\"dropdown-item\" (click)=\"openCreateFolderDialog()\">\n                <i class=\"icon icon-folder\"></i>\n                <span>{{ 'mail_list.create_folder' | translate }}</span>\n              </a>\n            </div>\n          </div>\n        </li>\n        <li class=\"btn-dropdown mailbox-dropdown mailbox-dropdown-lg more-options-dropdown pl-0\" *ngIf=\"!disableMoveTo\">\n          <div ngbDropdown class=\"dropdown\">\n            <button ngbDropdownToggle class=\"disabledx\" role=\"button\" id=\"moreOptionsDropdownMenuButton\">\n              {{ 'mail_list.more' | translate }}\n            </button>\n            <div id=\"moreOptionsDropdownMenu\" ngbDropdownMenu aria-labelledby=\"moreOptionsDropdownMenuButton\">\n              <a *ngIf=\"isNeedAddStar(mail)\" class=\"dropdown-item\" (click)=\"markAsStarred(true, true)\">\n                {{ 'mail_list.add_star' | translate }}\n              </a>\n              <a *ngIf=\"isNeedRemoveStar(mail)\" class=\"dropdown-item\" (click)=\"markAsStarred(false, true)\">\n                {{ 'mail_list.remove_star' | translate }}\n              </a>\n              <a class=\"dropdown-item\" (click)=\"markAsRead(mail.id)\">\n                {{ 'mail_list.mark_as_read' | translate }}\n              </a>\n              <a class=\"dropdown-item\" (click)=\"markAsRead(mail.id, false)\">\n                {{ 'mail_list.mark_as_unread' | translate }}\n              </a>\n            </div>\n          </div>\n        </li>\n        <li class=\"px-0\" *ngIf=\"isDarkMode && !forceLightMode\">\n          <a\n            class=\"cursor-pointer\"\n            placement=\"top\"\n            (click)=\"viewEmailInLightMode()\"\n            ngbTooltip=\"View email in light mode in a new window if you are having issues to view email in dark mode\"\n          >\n            <i class=\"fas fa-sun\"></i>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <!--Pagination-->\n    <div class=\"col-sm-3 mailbox-actionbar-col hidden-xs-down\">\n      <div class=\"mail-controls d-flex align-items-center justify-content-end\">\n        <div class=\"mail-result-text text-muted\">\n          <small *ngIf=\"currentMailNumber\">\n            {{ currentMailNumber }} <span>{{ 'settings.of' | translate }}</span> {{ MAX_EMAIL_PAGE_LIMIT }}\n          </small>\n        </div>\n        <div class=\"mail-nav-control\">\n          <button\n            role=\"button\"\n            class=\"mail-nav-control-prev\"\n            ngbTooltip=\"Previous email\"\n            (click)=\"changeMail(currentMailIndex - 1)\"\n          >\n            <i class=\"icon icon-chevron-left\"></i>\n          </button>\n          <button\n            role=\"button\"\n            class=\"mail-nav-control-next\"\n            ngbTooltip=\"Next email\"\n            (click)=\"changeMail(currentMailIndex + 1)\"\n          >\n            <i class=\"icon icon-chevron-right\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<app-progress-bar [active]=\"!progressBar\"></app-progress-bar>\n\n<!--Mail Info-->\n<div class=\"mailbox-sub-content mail-detail-content\" *ngIf=\"mail\">\n  <!--Mail HeaderBar-->\n  <section class=\"mailbox-section\" id=\"{{ mail.id }}-print-section\">\n    <div class=\"ui-header ui-header-bordered border-top-0 position-relative\">\n      <h5 class=\"ui-header-subtitle text-dark mb-0 mail-subject\">\n        <strong id=\"{{ mail.id }}-mail-subject\">\n          <ng-container *ngIf=\"!mail.is_subject_encrypted\">{{ mail.subject }}</ng-container>\n          <ng-container *ngIf=\"mail.is_subject_encrypted\">\n            <ng-container *ngIf=\"decryptedContents[mail.id] != null; else subjectLoader\">{{\n              isDecryptingError[mail.id] ? '' : mail.subject\n            }}</ng-container>\n            <ng-template #subjectLoader>\n              <span id=\"subject-scramble\"></span>\n            </ng-template>\n          </ng-container>\n        </strong>\n      </h5>\n      <div class=\"icon-holder is-floated right y-center\">\n        <img\n          *ngIf=\"\n            (mail.is_protected || mail.sender === 'support@ctemplar.com') && !userState.settings.is_night_mode;\n            else fireWallIcon\n          \"\n          src=\"assets/images/features-icon/tower.svg\"\n          width=\"14px\"\n          [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n          placement=\"left\"\n        />\n        <ng-template #fireWallIcon>\n          <i\n            class=\"fas fa-chess-rook svg-inline--fa\"\n            *ngIf=\"mail.is_protected || mail.sender === 'support@ctemplar.com'\"\n            [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n            placement=\"left\"\n          ></i>\n        </ng-template>\n        <i class=\"icon icon-secured\" [ngbTooltip]=\"'mail_detail.encrypted' | translate\" placement=\"left\"></i>\n        <i\n          class=\"icon icon-md icon-star-filled cursor-pointer\"\n          (click)=\"ontoggleStarred($event, mail, true)\"\n          [ngClass]=\"{\n            'icon-star': isConversationView ? !mail.has_starred_children : !mail.starred,\n            'text-info': isConversationView ? mail.has_starred_children : mail.starred\n          }\"\n        ></i>\n      </div>\n    </div>\n    <div class=\"spam_reason row\" *ngIf=\"xssPipe.hasExternalImages && disableExternalImages\">\n      <div class=\"col pt-1\">\n        <span class=\"text-warning\">Warning:</span>\n        This email contains external images, which have been blocked.\n      </div>\n      <div>\n        <button\n          class=\"mark_not_spam btn btn-outline-warning\"\n          (click)=\"disableExternalImages = false; xssPipe.hasExternalImages = false\"\n          ngbTooltip=\"Load external images\"\n        >\n          Load\n        </button>\n      </div>\n    </div>\n    <div class=\"spam_reason row\" *ngIf=\"mail.spam_reason && mail.spam_reason.length !== 0\">\n      <ng-container *ngIf=\"mail.folder === mailFolderTypes.SPAM; else spoofWarning\">\n        <div class=\"col pt-1\">\n          <span class=\"spam_why text-warning\">{{ 'mail_detail.message_in_span' | translate }} </span>\n          <span class=\"ml-1\"> {{ mail.spam_reason.join(' ') }}</span>\n        </div>\n        <div>\n          <button\n            class=\"mark_not_spam btn btn-outline-warning\"\n            (click)=\"markNotSpam(mail)\"\n            [ngbTooltip]=\"'mail_detail.mail_not_spam' | translate\"\n          >\n            {{ 'mail_detail.mark_not_spam' | translate }}\n          </button>\n        </div>\n      </ng-container>\n      <ng-template #spoofWarning>\n        <span class=\"spam_why\">Warning:</span>\n        <span class=\"ml-1\"> {{ mail.spam_reason.join(' ') }}</span>\n      </ng-template>\n    </div>\n    <div class=\"spam_reason row\" *ngIf=\"isContainTrashRelatedChildren && !isShowTrashRelatedChildren\">\n      <div class=\"col pt-1\">\n        <span class=\"text-warning\">Information:</span>\n        {{\n          mailFolder === mailFolderTypes.TRASH\n            ? 'This conversation contains non-trash messages.'\n            : 'This conversation contains trash messages.'\n        }}\n      </div>\n      <div>\n        <button class=\"mark_not_spam btn btn-outline-warning\" (click)=\"onShowTrashRelatedChildren()\">Load</button>\n      </div>\n    </div>\n\n    <div\n      class=\"ui-body is-xs bg-faded cursor-pointer mail-header\"\n      *ngIf=\"\n        isShowTrashRelatedChildren ||\n        (mailFolder !== mailFolderTypes.TRASH && mail.folder !== mailFolderTypes.TRASH) ||\n        (mailFolder === mailFolderTypes.TRASH && mail.folder === mailFolderTypes.TRASH)\n      \"\n      (click)=\"onClickParentHeader()\"\n    >\n      <div class=\"row\">\n        <div class=\"col-8\">\n          <div class=\"mailbox-sender-content\">\n            <ul class=\"sender-content-list list-styled\">\n              <li id=\"{{ mail.id }}-mail-from\" class=\"font-weight-bold\">\n                {{ 'settings.compose.from' | translate }}\n                <span class=\"text-secondary\"> </span>\n                <app-receiver-email-chip\n                  [contacts]=\"contacts\"\n                  [email]=\"mail.sender_display.email\"\n                  [name]=\"mail.sender_display.name\"\n                  [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                  [composePopover]=\"false\"\n                  [mailboxes]=\"mailboxes\"\n                  [blacklist]=\"userState.blackList\"\n                  [whitelist]=\"userState.whiteList\"\n                >\n                </app-receiver-email-chip>\n                <span class=\"position-relative\">\n                  <i *ngIf=\"mail.last_action\" class=\"fas fa-{{ mail.last_action | lastAction }} last-action\"></i>\n                </span>\n                <app-mail-detail-encryption-type-icon [mail]=\"mail\"></app-mail-detail-encryption-type-icon>\n              </li>\n              <li id=\"{{ mail.id }}-mail-to\" *ngIf=\"mail.receiver?.length > 0\">\n                {{ 'settings.compose.to' | translate }}\n                <ng-container *ngFor=\"let receiver of mail.receiver_display; let i = index\">\n                  <span class=\"text-secondary\"> </span>\n                  <app-receiver-email-chip\n                    [contacts]=\"contacts\"\n                    [email]=\"receiver.email\"\n                    [name]=\"receiver.name\"\n                    [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                    [composePopover]=\"false\"\n                    [mailboxes]=\"mailboxes\"\n                    [blacklist]=\"userState.blackList\"\n                    [whitelist]=\"userState.whiteList\"\n                  >\n                  </app-receiver-email-chip>\n                  <!--Comma as a separator-->\n                  <span *ngIf=\"i < mail.receiver?.length - 1\">, </span>\n                </ng-container>\n              </li>\n              <li *ngIf=\"mail.cc?.length > 0\" id=\"{{ mail.id }}-mail-cc\">\n                Cc:\n                <ng-container *ngFor=\"let cc of mail.cc; let i = index\">\n                  <span class=\"text-secondary\"> </span>\n                  <app-receiver-email-chip\n                    [contacts]=\"contacts\"\n                    [email]=\"cc\"\n                    [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                    [composePopover]=\"false\"\n                    [mailboxes]=\"mailboxes\"\n                    [blacklist]=\"userState.blackList\"\n                    [whitelist]=\"userState.whiteList\"\n                  >\n                  </app-receiver-email-chip>\n                  <!--Comma as a separator-->\n                  <span *ngIf=\"i < mail.cc?.length - 1\">, </span>\n                </ng-container>\n              </li>\n              <li *ngIf=\"mail.bcc_display?.length > 0\" id=\"{{ mail.id }}-mail-bcc\">\n                Bcc:\n                <ng-container *ngFor=\"let bcc of mail.bcc_display; let i = index\">\n                  <span class=\"text-secondary\"> </span>\n                  <app-receiver-email-chip\n                    [contacts]=\"contacts\"\n                    [email]=\"bcc.email\"\n                    [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                    [composePopover]=\"false\"\n                    [mailboxes]=\"mailboxes\"\n                    [blacklist]=\"userState.blackList\"\n                    [whitelist]=\"userState.whiteList\"\n                  >\n                  </app-receiver-email-chip>\n                  <!--Comma as a separator-->\n                  <span *ngIf=\"i < mail.bcc_display?.length - 1\">, </span>\n                </ng-container>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"col-4\">\n          <div class=\"msg-reply-type-holder\">\n            <div class=\"d-flex align-items-center justify-content-end\">\n              <ng-container *ngIf=\"mailFolder === mailFolderTypes.OUTBOX\">\n                <span class=\"badge badge-warning mr-2 p-1\" *ngIf=\"mail.destruct_date\">\n                  <span>{{ 'mail_detail.delete_in' | translate }}</span> {{ mail.destruct_date | remainingTime }}\n                </span>\n                <span class=\"badge badge-success mr-2 p-1\" *ngIf=\"mail.delayed_delivery\">\n                  <span>{{ 'mail_detail.delay_delivery' | translate }}</span>\n                  {{ mail.delayed_delivery | remainingTime }}\n                </span>\n                <span class=\"badge badge-danger mr-2 p-1\" *ngIf=\"mail.dead_man_duration\">\n                  <span>{{ 'settings.compose.dead_man_timer' | translate }}</span>\n                  {{ mail.dead_man_duration | remainingTime: true }}\n                </span>\n              </ng-container>\n              <span *ngIf=\"mail.attachments?.length > 0\" class=\"mr-3\">\n                <i class=\"icon icon-attachment\"></i>\n              </span>\n              <label class=\"msg-received-time mb-0\" id=\"{{ mail.id }}-mail-date\">\n                <ng-container *ngIf=\"mail.folder === mailFolderTypes.SENT && mail.sent_at; else createdAt\">\n                  {{ mail.sent_at | momentDate: 'medium' }}\n                </ng-container>\n                <ng-template #createdAt>\n                  {{ mail.created_at | momentDate: 'medium' }}\n                </ng-template>\n                <ng-template #createdAt>\n                  <ng-container *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX; else outboxTime\">\n                    {{ mail.created_at | momentDate: 'medium' }}\n                  </ng-container>\n                </ng-template>\n                <ng-template #outboxTime>\n                  <ng-container *ngIf=\"mail.delayed_delivery\">\n                    {{ mail.delayed_delivery | momentDate: 'medium' }}\n                  </ng-container>\n                  <ng-container *ngIf=\"mail.dead_man_duration\">\n                    <i class=\"fas fa-minus\"></i>\n                  </ng-container>\n                </ng-template>\n              </label>\n              <i\n                class=\"icon icon-sm icon-star-filled cursor-pointer\"\n                (click)=\"ontoggleStarred($event, mail, false)\"\n                [ngClass]=\"{ 'icon-star': !mail.starred, 'text-info': mail.starred }\"\n              ></i>\n            </div>\n            <div>\n              <label class=\"folder-batch\" [style.background]=\"folderColors[mail.folder]\">{{ mail.folder }}</label>\n              <i class=\"fas fa-angle-down expand-collapse\" *ngIf=\"!mailExpandedStatus[mail.id]\"></i>\n              <i class=\"fas fa-angle-up expand-collapse\" *ngIf=\"mailExpandedStatus[mail.id]\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n      <app-mail-detail-decryption-error *ngIf=\"isDecryptingError[mail.id]\"></app-mail-detail-decryption-error>\n    </div>\n  </section>\n  <!-- Password Decryption Form -->\n  <div\n    class=\"ui-body is-xs bg-faded mail-header decrypt-password-form-container\"\n    [ngbCollapse]=\"!mailExpandedStatus[mail.id]\"\n    id=\"ngb-collapse\"\n    *ngIf=\"isPasswordEncrypted[mail.id] && !decryptedContents[mail.id]\"\n  >\n    <div class=\"password-decryption-desc\">\n      {{ 'mail_detail.password_encryption_message_desc' | translate }}\n      <div class=\"password-decryption-desc-password-hint text-dark\">\n        {{ 'mail_detail.password_hint' | translate }}\n        <div class=\"font-weight-bold font-style-italic d-inline-block\">\n          {{ mail.encryption && mail.encryption.password_hint ? mail.encryption.password_hint : '' }}\n        </div>\n      </div>\n    </div>\n    <div class=\"mt-3\" *ngIf=\"errorMessageForDecryptingWithPassword[mail.id]\">\n      <span class=\"validate-message mt-3\">Password is incorrect</span>\n    </div>\n    <div class=\"decrypt-password-form mb-3\">\n      <div class=\"input-group decrypt-password-element mr-2\">\n        <input\n          class=\"form-control form-control-sm border-right-0\"\n          type=\"password\"\n          id=\"parentPasswordVC\"\n          [placeholder]=\"'settings.password' | translate\"\n        />\n        <span\n          class=\"input-group-addon password-toggle bg-white text-muted\"\n          id=\"passwordToggle\"\n          (click)=\"togglePassword('parentPasswordVC')\"\n        >\n          <i class=\"fa fa-eye\"></i>\n          <i class=\"fa fa-eye-slash\"></i>\n        </span>\n      </div>\n      <div class=\"d-flex justify-content-end decrypt-password-element\">\n        <button class=\"btn btn-user-action\" (click)=\"decryptWithPassword('parentPasswordVC', mail)\">\n          <i class=\"fas fa-unlock position-left\"></i>\n          <span>Decrypt</span>\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <!--Mail Content-->\n  <section\n    class=\"mailbox-section\"\n    *ngIf=\"\n      isShowTrashRelatedChildren ||\n      (mailFolder !== mailFolderTypes.TRASH && mail.folder !== mailFolderTypes.TRASH) ||\n      (mailFolder === mailFolderTypes.TRASH && mail.folder === mailFolderTypes.TRASH)\n    \"\n    id=\"ngb-collapse\"\n    [ngbCollapse]=\"!mailExpandedStatus[mail.id]\"\n  >\n    <div class=\"ui-body mail-content\" *ngIf=\"decryptedContents[mail.id]\">\n      <div ngbDropdown placement=\"bottom-right\" class=\"mailbox-dropdown msg-reply-dropdown dropdown-xs\">\n        <button\n          ngbDropdownToggle\n          class=\"actions-btn actions-btn-sm msg-reply-btn\"\n          role=\"button\"\n          id=\"messageReplyDropdownMenuButton\"\n        ></button>\n        <div ngbDropdownMenu aria-labelledby=\"messageReplyDropdownMenuButton\">\n          <ng-container *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX\">\n            <a class=\"dropdown-item\" (click)=\"onForward(mail); scrollTo(replyActions)\">\n              {{ 'mail_detail.forward' | translate }}\n            </a>\n            <a class=\"dropdown-item\" (click)=\"onReply(mail); scrollTo(replyActions)\">\n              {{ 'mail_detail.reply' | translate }}\n            </a>\n            <a\n              class=\"dropdown-item\"\n              *ngIf=\"mail.cc.length || mail.bcc.length || mail.receiver.length > 1\"\n              (click)=\"onReplyAll(mail); scrollTo(replyActions)\"\n            >\n              {{ 'mail_detail.reply_all' | translate }}\n            </a>\n          </ng-container>\n          <a class=\"dropdown-item\" *ngIf=\"mail.delayed_delivery\" (click)=\"onCancelSend(mail)\">\n            {{ 'mail_detail.cancel_send' | translate }}\n          </a>\n          <a class=\"dropdown-item\" (click)=\"onPrint(mail)\">{{ 'mail_detail.print' | translate }}</a>\n          <a\n            class=\"dropdown-item\"\n            (click)=\"onDelete(mail, -1, false)\"\n            [translate]=\"\n              mailFolder === mailFolderTypes.TRASH && mail.folder === mailFolderTypes.TRASH\n                ? ('mail_detail.delete_message' | translate)\n                : ('mail_detail.delete_this_message' | translate)\n            \"\n          >\n          </a>\n          <a\n            class=\"dropdown-item\"\n            (click)=\"onDeleteForAll(mail)\"\n            *ngIf=\"mail.folder === mailFolderTypes.SENT && mailFolder === mailFolderTypes.SENT\"\n            [ngbTooltip]=\"'mail_detail.messages_will_be_del' | translate\"\n            placement=\"left\"\n          >\n            {{ 'mail_detail.delete_from_receiver' | translate }}\n          </a>\n          <a class=\"dropdown-item\" (click)=\"showIncomingHeaders(mail)\">\n            {{ 'mail_detail.show_headers' | translate }}\n          </a>\n          <a\n            class=\"dropdown-item\"\n            (click)=\"downloadAllAttachments(mail)\"\n            *ngIf=\"decryptedContents[mail.id] && mail.attachments?.length > 0\"\n          >\n            {{ 'mail_detail.download_attachments' | translate }}\n          </a>\n          <a class=\"dropdown-item\" *ngIf=\"!disableMoveTo\" (click)=\"onMarkAsSpam(mail)\">\n            {{ 'mail_detail.mark_as_spam' | translate }}\n          </a>\n          <a class=\"dropdown-item\" (click)=\"onSwitchHtmlPlainTextMode(mail)\" *ngIf=\"decryptedContentsPlain[mail.id]\">\n            {{\n              plainTextViewState[mail.id]\n                ? ('mail_detail.show_rich_text' | translate)\n                : ('mail_detail.show_plain_text' | translate)\n            }}\n          </a>\n        </div>\n      </div>\n      <div class=\"show_gmail_extra\">\n        <div *ngIf=\"plainTextViewState[mail.id]; then plainBlock; else htmlBlock\"></div>\n        <ng-template #htmlBlock>\n          <div\n            class=\"msg-reply-content text-dark\"\n            [style.white-space]=\"isDecryptingError[mail.id] ? 'break-spaces' : ''\"\n            id=\"{{ mail.id }}-raw-mail-content\"\n            [innerHTML]=\"\n              mail.is_html\n                ? (decryptedContents[mail.id] | safe: 'sanitize':disableExternalImages)\n                : (decryptedContents[mail.id] | linebreaktobrtag | safe: 'sanitize':disableExternalImages)\n            \"\n          ></div>\n        </ng-template>\n        <ng-template #plainBlock>\n          <div\n            class=\"msg-reply-content text-dark\"\n            id=\"{{ mail.id }}-raw-mail-content\"\n            [innerHTML]=\"decryptedContentsPlain[mail.id] | linebreaktobrtag | safe: 'sanitize':disableExternalImages\"\n          ></div>\n        </ng-template>\n      </div>\n    </div>\n    <div\n      align=\"center\"\n      class=\"decryption-spinner\"\n      *ngIf=\"\n        mailExpandedStatus[mail.id] &&\n        !decryptedContents[mail.id] &&\n        (isDecrypting[mail.id] || (!isDecrypting[mail.id] && !isPasswordEncrypted[mail.id]))\n      \"\n    >\n      <img class=\"mt-3\" [src]=\"loadingImage | safe: 'url'\" />\n      <div class=\"mt-3\">\n        {{ 'mail_detail.decrypt_encrypted_email' | translate }}\n      </div>\n    </div>\n\n    <!-- Attachments list starts -->\n    <ul class=\"list-style-none mt-3\" *ngIf=\"decryptedContents[mail.id] && mail.attachments?.length > 0\">\n      <ng-container *ngFor=\"let attachment of mail.attachments\">\n        <li class=\"download-attachment-wrapper mr-1\" *ngIf=\"!attachment.is_inline\">\n          <app-progress-bar [active]=\"decryptedAttachments[attachment.id]?.inProgress\"></app-progress-bar>\n          <a\n            *ngIf=\"!attachment.is_encrypted; else encryptedAttachment\"\n            class=\"download-attachment\"\n            [download]=\"attachment.name\"\n            [href]=\"attachment.document | safe: 'url'\"\n            placement=\"top\"\n            [ngbTooltip]=\"attachment.name\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <div class=\"attachment-icon\">\n              <i class=\"icon icon-attachment\"></i>\n            </div>\n            <div class=\"attachment-name\">\n              {{ attachment.name }}\n            </div>\n          </a>\n\n          <ng-template #encryptedAttachment>\n            <a\n              class=\"download-attachment\"\n              (click)=\"decryptAttachment(attachment, mail)\"\n              href=\"javascript:void(0)\"\n              placement=\"top\"\n              [ngbTooltip]=\"attachment.name\"\n            >\n              <div class=\"attachment-icon\">\n                <i class=\"icon icon-attachment\"></i>\n              </div>\n              <div class=\"attachment-name\">\n                {{ attachment.name }}\n              </div>\n            </a>\n          </ng-template>\n        </li>\n      </ng-container>\n    </ul>\n    <!-- Attachments list ends -->\n  </section>\n\n  <!-- Child Mail-->\n  <ng-container *ngFor=\"let childMail of mail.children; let childIndex = index\">\n    <ng-container\n      *ngIf=\"\n        isShowTrashRelatedChildren ||\n        (mailFolder === mailFolderTypes.TRASH && childMail.folder === mailFolderTypes.TRASH) ||\n        (mailFolder !== mailFolderTypes.TRASH && childMail.folder !== mailFolderTypes.TRASH)\n      \"\n    >\n      <ng-container [ngSwitch]=\"childMail.folder\">\n        <ng-container *ngSwitchCase=\"mailFolderTypes.DRAFT\">\n          <div class=\"ui-body\">\n            <div class=\"mail-composer is-borderd border-bottom-0 mt-2\" *ngIf=\"!isPopupOpen && isPopupOpen !== null\">\n              <app-compose-mail\n                [draftMail]=\"childMail\"\n                [showSaveButton]=\"false\"\n                [isMailDetailPage]=\"true\"\n                (hide)=\"onComposeMailHide(childMail)\"\n                (popUpChange)=\"onChangePopup($event)\"\n              >\n              </app-compose-mail>\n            </div>\n          </div>\n        </ng-container>\n        <ng-container *ngSwitchDefault>\n          <div [ngClass]=\"{ 'last-child': childIndex === mail.children.length - 1 }\">\n            <section class=\"mailbox-section\" id=\"{{ childMail.id }}-print-section\">\n              <div\n                class=\"ui-body is-bordered-bottom bg-faded cursor-pointer mail-header\"\n                (click)=\"onClickChildHeader(childMail)\"\n              >\n                <div class=\"row\">\n                  <div class=\"col-8\">\n                    <div class=\"mailbox-sender-content\">\n                      <ul class=\"sender-content-list list-styled\">\n                        <li id=\"{{ childMail.id }}-mail-from\" class=\"font-weight-bold\">\n                          <span>{{ 'settings.compose.from' | translate }}</span>\n                          <span class=\"text-secondary\"> </span>\n                          <app-receiver-email-chip\n                            [contacts]=\"contacts\"\n                            [email]=\"childMail.sender_display.email\"\n                            [name]=\"childMail.sender_display.name\"\n                            [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                            [composePopover]=\"false\"\n                            [mailboxes]=\"mailboxes\"\n                            [blacklist]=\"userState.blackList\"\n                            [whitelist]=\"userState.whiteList\"\n                          >\n                          </app-receiver-email-chip>\n                          <span class=\"position-relative\">\n                            <i\n                              *ngIf=\"childMail.last_action\"\n                              class=\"fas fa-{{ childMail.last_action | lastAction }} last-action\"\n                            ></i>\n                          </span>\n                          <app-mail-detail-encryption-type-icon\n                            [mail]=\"childMail\"\n                          ></app-mail-detail-encryption-type-icon>\n                        </li>\n                        <li id=\"{{ childMail.id }}-mail-to\">\n                          <span>{{ 'settings.compose.to' | translate }}</span>\n                          <ng-container *ngFor=\"let receiver of childMail.receiver_display; let i = index\">\n                            <span class=\"text-secondary\"> </span>\n                            <app-receiver-email-chip\n                              [contacts]=\"contacts\"\n                              [email]=\"receiver.email\"\n                              [name]=\"receiver.name\"\n                              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                              [composePopover]=\"false\"\n                              [mailboxes]=\"mailboxes\"\n                              [blacklist]=\"userState.blackList\"\n                              [whitelist]=\"userState.whiteList\"\n                            >\n                            </app-receiver-email-chip>\n                            <!--Comma as a separator-->\n                            <span *ngIf=\"i < childMail.receiver?.length - 1\">, </span>\n                          </ng-container>\n                        </li>\n                        <li *ngIf=\"childMail.cc?.length > 0\" id=\"{{ childMail.id }}-mail-cc\">\n                          Cc:\n                          <ng-container *ngFor=\"let cc of childMail.cc; let i = index\">\n                            <span class=\"text-secondary\"> </span>\n                            <app-receiver-email-chip\n                              [contacts]=\"contacts\"\n                              [email]=\"cc\"\n                              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                              [composePopover]=\"false\"\n                              [mailboxes]=\"mailboxes\"\n                              [blacklist]=\"userState.blackList\"\n                              [whitelist]=\"userState.whiteList\"\n                            >\n                            </app-receiver-email-chip>\n                            <!--Comma as a separator-->\n                            <span *ngIf=\"i < childMail.cc?.length - 1\">, </span>\n                          </ng-container>\n                        </li>\n                        <li *ngIf=\"childMail.bcc_display?.length > 0\" id=\"{{ childMail.id }}-mail-bcc\">\n                          Bcc:\n                          <ng-container *ngFor=\"let bcc of childMail.bcc_display; let i = index\">\n                            <span class=\"text-secondary\"> </span>\n                            <app-receiver-email-chip\n                              [contacts]=\"contacts\"\n                              [email]=\"bcc.email\"\n                              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n                              [composePopover]=\"false\"\n                              [mailboxes]=\"mailboxes\"\n                              [blacklist]=\"userState.blackList\"\n                              [whitelist]=\"userState.whiteList\"\n                            >\n                            </app-receiver-email-chip>\n                            <span *ngIf=\"i < childMail.bcc_display?.length - 1\">, </span>\n                          </ng-container>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                  <div class=\"col-4\">\n                    <div class=\"msg-reply-type-holder\">\n                      <div class=\"d-flex align-items-center justify-content-end\">\n                        <ng-container *ngIf=\"mailFolder === mailFolderTypes.OUTBOX\">\n                          <span class=\"badge badge-warning mr-2 p-1\" *ngIf=\"childMail.destruct_date\">\n                            <span>{{ 'mail_detail.delete_in' | translate }}</span>\n                            {{ childMail.destruct_date | remainingTime }}\n                          </span>\n                          <span class=\"badge badge-success mr-2 p-1\" *ngIf=\"childMail.delayed_delivery\">\n                            <span>{{ 'mail_detail.delay_delivery' | translate }}</span>\n                            {{ childMail.delayed_delivery | remainingTime }}\n                          </span>\n                          <span class=\"badge badge-danger mr-2 p-1\" *ngIf=\"childMail.dead_man_duration\">\n                            <span>{{ 'settings.compose.dead_man_timer' | translate }}</span>\n                            {{ childMail.dead_man_duration | remainingTime: true }}\n                          </span>\n                        </ng-container>\n                        <span *ngIf=\"childMail.attachments?.length > 0\" class=\"mr-3\">\n                          <i class=\"icon icon-attachment\"></i>\n                        </span>\n                        <label class=\"msg-received-time mb-0\" id=\"{{ childMail.id }}-mail-date\">\n                          <ng-container\n                            *ngIf=\"childMail.folder === mailFolderTypes.SENT && childMail.sent_at; else createdAt\"\n                          >\n                            {{ childMail.sent_at | momentDate: 'medium' }}\n                          </ng-container>\n                          <ng-template #createdAt>\n                            <ng-container *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX; else outboxTime\">\n                              {{ childMail.created_at | momentDate: 'medium' }}\n                            </ng-container>\n                          </ng-template>\n                          <ng-template #outboxTime>\n                            <ng-container *ngIf=\"childMail.delayed_delivery\">\n                              {{ childMail.delayed_delivery | momentDate: 'medium' }}\n                            </ng-container>\n                            <ng-container *ngIf=\"childMail.dead_man_duration\">\n                              <i class=\"fas fa-minus\"></i>\n                            </ng-container>\n                          </ng-template>\n                        </label>\n                        <i\n                          class=\"icon icon-sm icon-star-filled cursor-pointer\"\n                          (click)=\"ontoggleStarred($event, childMail, false)\"\n                          [ngClass]=\"{ 'icon-star': !childMail.starred, 'text-info': childMail.starred }\"\n                        ></i>\n                      </div>\n                      <div>\n                        <label class=\"folder-batch\" [style.background]=\"folderColors[childMail.folder]\">{{\n                          childMail.folder\n                        }}</label>\n                        <i class=\"fas fa-angle-down expand-collapse\" *ngIf=\"!mailExpandedStatus[childMail.id]\"></i>\n                        <i class=\"fas fa-angle-up expand-collapse\" *ngIf=\"mailExpandedStatus[childMail.id]\"></i>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <app-mail-detail-decryption-error\n                  *ngIf=\"isDecryptingError[childMail.id]\"\n                ></app-mail-detail-decryption-error>\n                <app-progress-bar\n                  [active]=\"decryptedContents[childMail.id] == null\"\n                  *ngIf=\"\n                    mailExpandedStatus[childMail.id] &&\n                    !decryptedContents[childMail.id] &&\n                    (isDecrypting[childMail.id] || !isPasswordEncrypted[childMail.id])\n                  \"\n                >\n                </app-progress-bar>\n              </div>\n            </section>\n\n            <!-- Password Decryption Form -->\n            <div\n              class=\"ui-body is-xs bg-faded mail-header decrypt-password-form-container\"\n              [ngbCollapse]=\"!mailExpandedStatus[childMail.id]\"\n              id=\"ngb-collapse\"\n              *ngIf=\"isPasswordEncrypted[childMail.id] && !decryptedContents[childMail.id]\"\n            >\n              <div class=\"password-decryption-desc\">\n                {{ 'mail_detail.password_encryption_message_desc' | translate }}\n                <div class=\"password-decryption-desc-password-hint text-dark\">\n                  {{ 'mail_detail.password_hint' | translate }}\n                  <div class=\"font-weight-bold font-style-italic d-inline-block\">\n                    {{\n                      childMail.encryption && childMail.encryption.password_hint\n                        ? childMail.encryption.password_hint\n                        : ''\n                    }}\n                  </div>\n                </div>\n              </div>\n              <div class=\"mt-3\" *ngIf=\"errorMessageForDecryptingWithPassword[childMail.id]\">\n                <span class=\"validate-message mt-3\">Password is incorrect</span>\n              </div>\n              <div class=\"decrypt-password-form mb-3\">\n                <div class=\"input-group decrypt-password-element mr-2\">\n                  <input\n                    class=\"form-control form-control-sm border-right-0\"\n                    type=\"password\"\n                    [id]=\"'childPasswordVC_' + childIndex\"\n                    [placeholder]=\"'settings.password' | translate\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    id=\"passwordToggle\"\n                    (click)=\"togglePassword('childPasswordVC_' + childIndex)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <div class=\"d-flex justify-content-end decrypt-password-element\">\n                  <button\n                    class=\"btn btn-user-action\"\n                    (click)=\"decryptWithPassword('childPasswordVC_' + childIndex, childMail)\"\n                  >\n                    <i class=\"fas fa-unlock position-left\"></i>\n                    <span>Decrypt</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <!--Mail Content-->\n            <section\n              class=\"mailbox-section\"\n              id=\"{{ childMail.id + '-ngb-collapse' }}\"\n              [ngbCollapse]=\"!mailExpandedStatus[childMail.id]\"\n            >\n              <div class=\"ui-body mail-content\" *ngIf=\"decryptedContents[childMail.id]\">\n                <div ngbDropdown placement=\"bottom-right\" class=\"mailbox-dropdown msg-reply-dropdown dropdown-xs\">\n                  <button\n                    ngbDropdownToggle\n                    class=\"actions-btn actions-btn-sm msg-reply-btn\"\n                    role=\"button\"\n                    id=\"{{ childMail.id }}-messageReplyDropdownMenuButton\"\n                  ></button>\n                  <div ngbDropdownMenu [attr.aria-labelledby]=\"childMail.id + '-messageReplyDropdownMenuButton'\">\n                    <a class=\"dropdown-item\" (click)=\"onForward(childMail, childIndex, true); scrollTo(replyActions)\">\n                      {{ 'mail_detail.forward' | translate }}\n                    </a>\n                    <a class=\"dropdown-item\" (click)=\"onReply(childMail, childIndex, true); scrollTo(replyActions)\">\n                      {{ 'mail_detail.reply' | translate }}\n                    </a>\n                    <a\n                      class=\"dropdown-item\"\n                      *ngIf=\"childMail.cc.length || childMail.bcc.length || childMail.receiver.length > 1\"\n                      (click)=\"onReplyAll(childMail, childIndex, true); scrollTo(replyActions)\"\n                    >\n                      {{ 'mail_detail.reply_all' | translate }}\n                    </a>\n                    <a class=\"dropdown-item\" (click)=\"onPrint(childMail)\">{{ 'mail_detail.print' | translate }}</a>\n                    <a class=\"dropdown-item\" *ngIf=\"childMail.delayed_delivery\" (click)=\"onCancelSend(childMail)\">\n                      {{ 'mail_detail.cancel_send' | translate }}\n                    </a>\n                    <a\n                      class=\"dropdown-item\"\n                      (click)=\"onDelete(childMail, childIndex)\"\n                      [translate]=\"\n                        mailFolder === mailFolderTypes.TRASH && childMail.folder === mailFolderTypes.TRASH\n                          ? ('mail_detail.delete_message' | translate)\n                          : ('mail_detail.delete_this_message' | translate)\n                      \"\n                    >\n                    </a>\n                    <a\n                      class=\"dropdown-item\"\n                      (click)=\"onDeleteForAll(childMail)\"\n                      *ngIf=\"childMail.folder === mailFolderTypes.SENT && mailFolder === mailFolderTypes.SENT\"\n                      [ngbTooltip]=\"'mail_detail.messages_will_be_del' | translate\"\n                      placement=\"left\"\n                    >\n                      {{ 'mail_detail.delete_from_receiver' | translate }}\n                    </a>\n                    <a class=\"dropdown-item\" (click)=\"showIncomingHeaders(childMail)\">{{\n                      'mail_detail.show_headers' | translate\n                    }}</a>\n                    <a\n                      class=\"dropdown-item\"\n                      (click)=\"downloadAllAttachments(childMail)\"\n                      *ngIf=\"childMail.attachments?.length > 0\"\n                    >\n                      {{ 'mail_detail.download_attachments' | translate }}\n                    </a>\n                    <a\n                      class=\"dropdown-item\"\n                      (click)=\"onSwitchHtmlPlainTextMode(childMail)\"\n                      *ngIf=\"decryptedContentsPlain[childMail.id]\"\n                    >\n                      {{\n                        plainTextViewState[childMail.id]\n                          ? ('mail_detail.show_rich_text' | translate)\n                          : ('mail_detail.show_plain_text' | translate)\n                      }}\n                    </a>\n                  </div>\n                </div>\n\n                <div [ngClass]=\"{ show_gmail_extra: mailOptions[childMail.id]?.showGmailExtraContent }\">\n                  <div *ngIf=\"plainTextViewState[childMail.id]; then plainBlock; else htmlBlock\"></div>\n                  <ng-template #htmlBlock>\n                    <div\n                      class=\"msg-reply-content text-dark\"\n                      id=\"{{ childMail.id }}-raw-mail-content\"\n                      [innerHTML]=\"\n                        childMail.is_html\n                          ? (decryptedContents[childMail.id] | safe: 'sanitize':disableExternalImages)\n                          : (decryptedContents[childMail.id]\n                            | linebreaktobrtag\n                            | safe: 'sanitize':disableExternalImages)\n                      \"\n                    ></div>\n                  </ng-template>\n                  <ng-template #plainBlock>\n                    <div\n                      class=\"msg-reply-content text-dark\"\n                      id=\"{{ childMail.id }}-raw-mail-content\"\n                      [innerHTML]=\"\n                        decryptedContentsPlain[childMail.id] | linebreaktobrtag | safe: 'sanitize':disableExternalImages\n                      \"\n                    ></div>\n                  </ng-template>\n                  <a\n                    href=\"javascript:void(0)\"\n                    (click)=\"toggleGmailExtra(childMail)\"\n                    *ngIf=\"\n                      decryptedContents[childMail.id]?.indexOf('gmail_extra') > -1 ||\n                      decryptedContents[childMail.id]?.indexOf('gmail_quote') > -1\n                    \"\n                  >\n                    <div\n                      class=\"ellipsis-wrapper\"\n                      placement=\"top\"\n                      [ngbTooltip]=\"\n                        mailOptions[childMail.id]?.showGmailExtraContent\n                          ? ('mail_detail.hide_extra' | translate)\n                          : ('mail_detail.show_trimmed' | translate)\n                      \"\n                    >\n                      <div class=\"gmail-ellipsis\"></div>\n                    </div>\n                  </a>\n                </div>\n              </div>\n\n              <!-- Attachments list starts -->\n              <ul class=\"list-style-none mt-3\" *ngIf=\"childMail.attachments?.length > 0\">\n                <ng-container *ngFor=\"let attachment of childMail.attachments\">\n                  <li class=\"download-attachment-wrapper mr-1\" *ngIf=\"!attachment.is_inline\">\n                    <app-progress-bar [active]=\"decryptedAttachments[attachment.id]?.inProgress\"></app-progress-bar>\n                    <a\n                      *ngIf=\"!attachment.is_encrypted; else encryptedAttachment\"\n                      class=\"download-attachment\"\n                      [download]=\"attachment.name\"\n                      [href]=\"attachment.document | safe: 'url'\"\n                      placement=\"top\"\n                      [ngbTooltip]=\"attachment.name\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      <div class=\"attachment-icon\">\n                        <i class=\"icon icon-attachment\"></i>\n                      </div>\n                      <div class=\"attachment-name\">\n                        {{ attachment.name }}\n                      </div>\n                    </a>\n                    <ng-template #encryptedAttachment>\n                      <a\n                        class=\"download-attachment\"\n                        (click)=\"decryptAttachment(attachment, childMail)\"\n                        href=\"javascript:void(0)\"\n                        placement=\"top\"\n                        [ngbTooltip]=\"attachment.name\"\n                      >\n                        <div class=\"attachment-icon\">\n                          <i class=\"icon icon-attachment\"></i>\n                        </div>\n                        <div class=\"attachment-name\">\n                          {{ attachment.name }}\n                        </div>\n                      </a>\n                    </ng-template>\n                  </li>\n                </ng-container>\n              </ul>\n              <!-- Attachments list ends -->\n            </section>\n            <div\n              align=\"center\"\n              class=\"decryption-spinner\"\n              *ngIf=\"\n                mailExpandedStatus[childMail.id] &&\n                !decryptedContents[childMail.id] &&\n                (isDecrypting[childMail.id] || !isPasswordEncrypted[childMail.id])\n              \"\n            >\n              <img class=\"mt-3\" [src]=\"loadingImage | safe: 'url'\" />\n              <div class=\"mt-3\">\n                {{ 'mail_detail.decrypt_encrypted_email' | translate }}\n              </div>\n            </div>\n            <div class=\"ui-body\" *ngIf=\"mailOptions[childMail.id]?.isComposeMailVisible && !isPopupOpen\">\n              <div class=\"mail-composer is-borderd border-bottom-0 mt-2\">\n                <app-compose-mail\n                  [receivers]=\"composeMailData[childMail.id]?.receivers\"\n                  [cc]=\"composeMailData[childMail.id]?.cc\"\n                  [content]=\"composeMailData[childMail.id]?.content\"\n                  [action]=\"composeMailData[childMail.id]?.action\"\n                  [action_parent]=\"composeMailData[childMail.id].action_parent_id\"\n                  [subject]=\"composeMailData[childMail.id]?.subject\"\n                  [selectedMailbox]=\"composeMailData[childMail.id]?.selectedMailbox\"\n                  [parentId]=\"composeMailData[childMail.id]?.parentId\"\n                  [forwardAttachmentsMessageId]=\"composeMailData[childMail.id]?.forwardAttachmentsMessageId\"\n                  [showSaveButton]=\"false\"\n                  [isMailDetailPage]=\"true\"\n                  (hide)=\"onComposeMailHide(childMail)\"\n                >\n                </app-compose-mail>\n              </div>\n            </div>\n          </div>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n\n  <!--Reply to mail.-->\n  <div class=\"ui-body ui-footer-sec\" *ngIf=\"isPopupOpen && isPopupOpen !== null\">\n    <p>\n      You are currently editing your reply in a separate window.\n      <a (click)=\"openReply(mail)\"> Show your draft here.</a>\n    </p>\n  </div>\n  <div class=\"ui-body ui-footer-sec\" #replyActions *ngIf=\"!isPopupOpen && isPopupOpen !== null\">\n    <div class=\"row\" *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX && !hasDraft\">\n      <div class=\"col-12\">\n        <button\n          class=\"btn btn-user-action\"\n          (click)=\"onReply(mail, 0, false, true); scrollTo(replyActions)\"\n          [disabled]=\"!decryptedContents[mail.id]\"\n        >\n          <i class=\"icon icon-reply position-left\"></i>\n          <span>{{ 'mail_detail.reply' | translate }}</span>\n          <img src=\"assets/images/icon-reply.svg\" class=\"hidden-sm-up\" />\n        </button>\n        <button\n          class=\"btn btn-user-action\"\n          (click)=\"onReplyAll(mail, 0, false, true); scrollTo(replyActions)\"\n          *ngIf=\"mail.cc.length || mail.bcc.length || mail.receiver.length > 1\"\n          [disabled]=\"!decryptedContents[mail.id]\"\n        >\n          <i class=\"icon icon-reply position-left\"></i>\n          <span>{{ 'mail_detail.reply_all' | translate }}</span>\n          <img src=\"assets/images/icon-reply-all.svg\" class=\"hidden-sm-up\" />\n        </button>\n        <button\n          class=\"btn btn-user-action\"\n          (click)=\"onForward(mail, 0, false, true); scrollTo(replyActions)\"\n          [disabled]=\"!decryptedContents[mail.id]\"\n        >\n          <i class=\"icon icon-mail icon-lg position-left\"></i>\n          <span>{{ 'mail_detail.forward' | translate }}</span>\n          <img src=\"assets/images/icon-mail.svg\" class=\"hidden-sm-up\" />\n        </button>\n      </div>\n    </div>\n    <div\n      class=\"mail-composer is-borderd border-bottom-0 mt-2\"\n      *ngIf=\"mailOptions[mail.id]?.isComposeMailVisible && !draftNew?.id\"\n    >\n      <app-compose-mail\n        [receivers]=\"composeMailData[mail.id]?.receivers\"\n        [cc]=\"composeMailData[mail.id]?.cc\"\n        [content]=\"composeMailData[mail.id]?.content\"\n        [action]=\"composeMailData[mail.id]?.action\"\n        [action_parent]=\"composeMailData[mail.id].action_parent_id\"\n        [subject]=\"composeMailData[mail.id]?.subject\"\n        [selectedMailbox]=\"composeMailData[mail.id]?.selectedMailbox\"\n        [parentId]=\"composeMailData[mail.id]?.parentId\"\n        [forwardAttachmentsMessageId]=\"composeMailData[mail.id]?.forwardAttachmentsMessageId\"\n        [showSaveButton]=\"false\"\n        [isMailDetailPage]=\"true\"\n        [is_html]=\"composeMailData[mail.id]?.is_html\"\n        (hide)=\"onComposeMailHide(mail)\"\n        (popUpChange)=\"onChangePopup($event)\"\n      >\n      </app-compose-mail>\n    </div>\n    <div\n      *ngIf=\"\n        isReplyContext &&\n        draftNew?.id &&\n        draftNew.folder !== mailFolderTypes.TRASH &&\n        mail.folder !== mailFolderTypes.TRASH\n      \"\n      class=\"mail-composer is-borderd border-bottom-0 mt-2\"\n    >\n      <app-compose-mail\n        [draftMail]=\"draftNew\"\n        [isMailDetailPage]=\"true\"\n        [showSaveButton]=\"false\"\n        (popUpChange)=\"onChangePopup($event)\"\n        (hide)=\"onComposeMailHide(draftNew)\"\n      ></app-compose-mail>\n    </div>\n  </div>\n  <!--Pagination on mobile version-->\n  <div class=\"col-sm-3 mailbox-actionbar-col hidden-xs-up\">\n    <div class=\"mail-controls d-flex align-items-center justify-content-end\">\n      <div class=\"mail-result-text text-muted\">\n        <small *ngIf=\"currentMailNumber\">\n          {{ currentMailNumber }}<span>{{ 'settings.of' | translate }}</span> {{ MAX_EMAIL_PAGE_LIMIT }}\n        </small>\n      </div>\n      <div class=\"mail-nav-control\">\n        <button\n          role=\"button\"\n          class=\"mail-nav-control-prev\"\n          ngbTooltip=\"Previous email\"\n          (click)=\"changeMail(currentMailIndex - 1)\"\n        >\n          <i class=\"icon icon-chevron-left\"></i>\n        </button>\n        <button\n          role=\"button\"\n          class=\"mail-nav-control-next\"\n          ngbTooltip=\"Next email\"\n          (click)=\"changeMail(currentMailIndex + 1)\"\n        >\n          <i class=\"icon icon-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Confirm include attachments modal -->\n<ng-template #includeAttachmentsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'mail_detail.confirm_include_attach' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        {{ 'mail_detail.include_attachment_message' | translate }}\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button type=\"button\" (click)=\"confirmIncludeAttachments(true)\" class=\"btn btn-success btn-sm\" role=\"button\">\n          {{ 'common.yes' | translate }}\n        </button>\n        <button type=\"button\" (click)=\"confirmIncludeAttachments(false)\" class=\"btn btn-sm ml-1\" role=\"button\">\n          {{ 'common.no' | translate }}\n        </button>\n        <button type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\" class=\"btn btn-sm ml-1\">\n          {{ 'common.cancel' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- /.Confirm include attachments modal ends -->\n\n<!-- Confirm forward attachments modal -->\n<ng-template #forwardAttachmentsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'mail_detail.confirm_forward_attach' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        {{ 'mail_detail.attachment_message' | translate }}\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button type=\"button\" (click)=\"confirmForwardAttachments(true)\" class=\"btn btn-success btn-sm\" role=\"button\">\n          {{ 'common.yes' | translate }}\n        </button>\n        <button type=\"button\" (click)=\"confirmForwardAttachments(false)\" class=\"btn btn-sm ml-1\" role=\"button\">\n          {{ 'common.no' | translate }}\n        </button>\n        <button type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\" class=\"btn btn-sm ml-1\">\n          {{ 'common.cancel' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- /.Confirm forward attachments modal ends -->\n\n<!-- External Link Confirmation Modal -->\n<ng-template #externalLinkConfirmModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'settings.compose.confirm' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        {{ 'mail_detail.confirm_external_link' | translate }}\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button\n          type=\"button\"\n          (click)=\"externalLinkConfirmModalRef.close(true)\"\n          class=\"btn btn-success btn-sm\"\n          role=\"button\"\n        >\n          {{ 'common.continue_to_link' | translate }}\n        </button>\n        <button\n          type=\"button\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\"\n          (click)=\"externalLinkConfirmModalRef.close(false)\"\n          class=\"btn btn-sm ml-1\"\n        >\n          {{ 'common.cancel' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- /.External Link Confirmation Modal End -->\n\n<!-- Incoming Headers modal -->\n<ng-template #incomingHeadersModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong>{{ 'mail_detail.incoming_head' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder incoming-headers\">\n      <div\n        *ngFor=\"let item of selectedHeaders; let i = index\"\n        class=\"row\"\n        [class.last-row]=\"i === selectedHeaders.length - 1\"\n      >\n        <div class=\"col-3\">{{ item.key }}</div>\n        <div class=\"col-9\">{{ item.value }}</div>\n      </div>\n      <div *ngIf=\"selectedHeaders?.length === 0\">{{ 'mail_detail.no_header' | translate }}</div>\n    </div>\n  </div> </ng-template\n><!-- /.Incoming Headers modal ends -->\n","import { Component, HostListener, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { take } from 'rxjs/operators';\nimport * as xss from 'xss';\n\nimport { PRIMARY_WEBSITE, SummarySeparator } from '../../shared/config';\nimport { FilenamePipe } from '../../shared/pipes/filename.pipe';\nimport { EmailFormatPipe } from '../../shared/pipes/email-formatting.pipe';\nimport { SafePipe } from '../../shared/pipes/safe.pipe';\nimport { WebSocketState } from '../../store';\nimport {\n  DeleteMail,\n  DeleteMailForAll,\n  GetMailDetailSuccess,\n  GetMails,\n  MoveMail,\n  SendMail,\n  SnackErrorPush,\n  StarMail,\n  WhiteListAdd,\n} from '../../store/actions';\nimport { ClearMailDetail, GetMailDetail, ReadMail } from '../../store/actions/mail.actions';\nimport {\n  AppState,\n  MailAction,\n  MailBoxesState,\n  MailState,\n  NumberBooleanMappedType,\n  NumberStringMappedType,\n  PGPEncryptionType,\n  SecureContent,\n  StringBooleanMappedType,\n  UserState,\n  ContactsState,\n} from '../../store/datatypes';\nimport { Attachment, Folder, Mail, Mailbox, MailFolderType } from '../../store/models/mail.model';\nimport { LOADING_IMAGE, MailService, MessageDecryptService, OpenPgpService, SharedService } from '../../store/services';\nimport { ComposeMailService } from '../../store/services/compose-mail.service';\nimport { DateTimeUtilService } from '../../store/services/datetime-util.service';\n\ndeclare let Scrambler: (argument0: { target: string; random: number[]; speed: number; text: string }) => void;\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-detail',\n  templateUrl: './mail-detail.component.html',\n  styleUrls: ['./mail-detail.component.scss'],\n})\n// eslint-disable-next-line import/prefer-default-export\nexport class MailDetailComponent implements OnInit, OnDestroy {\n  @ViewChild('forwardAttachmentsModal') forwardAttachmentsModal: any;\n\n  @ViewChild('externalLinkConfirmModal') externalLinkConfirmModal: any;\n\n  @ViewChild('includeAttachmentsModal') includeAttachmentsModal: any;\n\n  @ViewChild('incomingHeadersModal') incomingHeadersModal: any;\n\n  mail: Mail;\n\n  composeMailData: any = {};\n\n  mailFolderTypes = MailFolderType;\n\n  decryptedContents: any = {};\n\n  decryptedContentsPlain: any = {};\n\n  decryptedAttachments: any = {};\n\n  decryptedHeaders: any = {};\n\n  isDecryptingError: StringBooleanMappedType = {};\n\n  selectedHeaders: string;\n\n  mailOptions: any = {};\n\n  selectedMailToForward: Mail;\n\n  selectedMailToInclude: Mail;\n\n  isDecrypting: any = {};\n\n  mailFolder: MailFolderType;\n\n  customFolders: Folder[] = [];\n\n  showGmailExtraContent: boolean;\n\n  folderColors: any = {};\n\n  markedAsRead: boolean;\n\n  externalLinkChecked = true;\n\n  currentMailIndex: number;\n\n  currentMailNumber: any;\n\n  MAX_EMAIL_PAGE_LIMIT = 1;\n\n  OFFSET = 0;\n\n  loadingImage = LOADING_IMAGE;\n\n  disableMoveTo: boolean;\n\n  isMobile: boolean;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  showRawContent: any = {};\n\n  isDarkMode: boolean;\n\n  isConversationView: boolean;\n\n  forceLightMode: boolean;\n\n  progressBar: boolean;\n\n  disableExternalImages: boolean;\n\n  includeOriginMessage: boolean;\n\n  xssPipe = SafePipe;\n\n  hasDraft = false;\n\n  plainTextViewState: any = {};\n\n  isPasswordEncrypted: NumberBooleanMappedType = {};\n\n  mailExpandedStatus: NumberBooleanMappedType = {};\n\n  errorMessageForDecryptingWithPassword: NumberStringMappedType = {};\n\n  private currentMailbox: Mailbox;\n\n  private forwardAttachmentsModalRef: NgbModalRef;\n\n  externalLinkConfirmModalRef: NgbModalRef;\n\n  private includeAttachmentsModalRef: NgbModalRef;\n\n  private userState: UserState;\n\n  private mailboxes: Mailbox[];\n\n  private canScroll = true;\n\n  private page: number;\n\n  private mails: Mail[] = [];\n\n  private EMAILS_PER_PAGE: number;\n\n  private shouldChangeMail = 0;\n\n  /**\n   * @private\n   * @var isShowTrashRelatedChildren\n   * @description\n   * If you are in trash folder, means to show non-trash children or not\n   * If you are in non-trash folder, this means to show trash children or not\n   */\n  private isShowTrashRelatedChildren = false;\n\n  /**\n   * @private\n   * @var isShowTrashRelatedChildren\n   * @description\n   * Indicate whether the parent is secure message or not\n   * If it's secure message, it would be encrypted based password, should be decrypted with password\n   */\n  private isSecureMessage = false;\n\n  /**\n   * @private\n   * @var isShowTrashRelatedChildren\n   * @description\n   * Indicate to contain trash / non-trash children on the conversation\n   */\n  private isContainTrashRelatedChildren = false;\n\n  private properFolderLastChildIndex = 0;\n\n  contacts: any[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private activatedRoute: ActivatedRoute,\n    private store: Store<AppState>,\n    private pgpService: OpenPgpService,\n    private shareService: SharedService,\n    private router: Router,\n    private composeMailService: ComposeMailService,\n    private dateTimeUtilService: DateTimeUtilService,\n    private modalService: NgbModal,\n    private mailService: MailService,\n    private messageDecryptService: MessageDecryptService,\n  ) {}\n\n  ngOnInit() {\n    SafePipe.hasExternalImages = false;\n    /**\n     * Check getting mail is succeeded\n     */\n    this.store\n      .select((state: any) => state.webSocket)\n      .pipe(untilDestroyed(this))\n      .subscribe((webSocketState: WebSocketState) => {\n        if (webSocketState.message && !webSocketState.isClosed) {\n          if (\n            this.mail &&\n            (webSocketState.message.id === this.mail.id || webSocketState.message.parent_id === this.mail.id)\n          ) {\n            this.store.dispatch(new GetMailDetailSuccess(webSocketState.message.mail));\n            if (!webSocketState.message.mail.read) {\n              this.markAsRead(this.mail.id);\n            }\n          }\n        }\n      });\n    /**\n     * Get mails from DB\n     */\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        this.mails = [...mailState.mails];\n        if (this.shouldChangeMail && mailState.loaded) {\n          if (this.shouldChangeMail === 1) {\n            this.mail.id = this.mails[this.mails.length - 1].id;\n            this.changeMail(this.mails.length - 1);\n          } else if (this.shouldChangeMail === 2) {\n            this.mail.id = this.mails[0].id;\n            this.changeMail(0);\n          }\n          this.shouldChangeMail = 0;\n        }\n        if (mailState.mailDetail && mailState.noUnreadCountChange) {\n          this.mail = mailState.mailDetail;\n          // Setting the password encryption mail or not\n          this.isPasswordEncrypted[this.mail.id] = !!this.mail.encryption;\n          if (!this.isPasswordEncrypted[this.mail.id] && this.mail.is_subject_encrypted) {\n            this.scrambleText('subject-scramble');\n          }\n\n          this.mail.has_children = this.mail.has_children || (this.mail.children && this.mail.children.length > 0);\n          const decryptedContent = mailState.decryptedContents[this.mail.id];\n          if (this.mail.folder === MailFolderType.OUTBOX && !this.mail.is_encrypted) {\n            this.decryptedContents[this.mail.id] = this.mail.content;\n          } else {\n            // Do decrypt, if not has children && needed\n            if (\n              !this.isPasswordEncrypted[this.mail.id] &&\n              !this.mail.has_children &&\n              this.mail.content !== undefined &&\n              !this.isDecrypting[this.mail.id] &&\n              (!decryptedContent || (!decryptedContent.inProgress && decryptedContent.content === undefined))\n            ) {\n              this.isDecrypting[this.mail.id] = true;\n              // TODO - This If statement should be removed after integrated all of decryption logic to 'MesssageDecryptService\n              if (this.mail.encryption_type === PGPEncryptionType.PGP_MIME) {\n                this.messageDecryptService.decryptMessage(this.mail).subscribe(\n                  () => {},\n                  error => {\n                    this.decryptedContents[this.mail.id] = this.mail.content;\n                    this.isDecrypting[this.mail.id] = false;\n                  },\n                );\n              } else {\n                this.pgpService.decrypt(this.mail.mailbox, this.mail.id, new SecureContent(this.mail)).subscribe(\n                  () => {},\n                  error => {\n                    this.decryptedContents[this.mail.id] = this.mail.content;\n                    this.isDecrypting[this.mail.id] = false;\n                  },\n                );\n              }\n            }\n            // If done to decrypt, or already existed decrypted content\n            if (decryptedContent && !decryptedContent.inProgress && decryptedContent.content !== undefined) {\n              this.decryptedContents[this.mail.id] = this.mail.is_html\n                ? decryptedContent.content.replace(/<a /g, '<a target=\"_blank\" rel=\"noopener noreferrer\" ')\n                : decryptedContent.content || decryptedContent.content_plain;\n              if (this.externalLinkChecked) {\n                this.confirmExternalLinks();\n              }\n              if (this.mail.is_subject_encrypted) {\n                this.mail.subject = decryptedContent.subject;\n              }\n              this.decryptedContentsPlain[this.mail.id] = decryptedContent.content_plain;\n              this.decryptedHeaders[this.mail.id] = this.parseHeaders(decryptedContent.incomingHeaders);\n              this.isDecryptingError[this.mail.id] = decryptedContent.decryptError;\n              this.handleEmailLinks();\n\n              // Automatically scrolls to last element in the list\n              // Class name .last-child is set inside the template\n              if (this.canScroll && this.mail.children && this.mail.children.length > 0) {\n                setTimeout(() => {\n                  this.canScroll = false;\n                }, 3000);\n                this.scrollTo(document.querySelector('.last-child'));\n              }\n              // Mark mail as read\n              if (!this.mail.read && !this.markedAsRead) {\n                this.markedAsRead = true;\n                this.markAsRead(this.mail.id);\n              }\n            }\n          }\n          if (!this.mailOptions[this.mail.id]) {\n            this.mailOptions[this.mail.id] = {};\n          }\n\n          /**\n           * Process for Childrens\n           */\n          if (this.mail.children && this.mail.children.length > 0) {\n            if (this.mailExpandedStatus[this.mail.id] === undefined) {\n              this.mailExpandedStatus[this.mail.id] = false;\n            }\n            this.mail.children.forEach(child => {\n              this.isPasswordEncrypted[child.id] = !!child.encryption;\n            });\n            // find the latest child with trash/non-trash folder\n            let filteredChildren = [];\n            if (this.mailFolder === MailFolderType.TRASH) {\n              filteredChildren = this.mail.children.filter(child => child.folder === MailFolderType.TRASH);\n            } else {\n              filteredChildren = this.mail.children.filter(child => child.folder !== MailFolderType.TRASH);\n            }\n            if (filteredChildren.length > 0) {\n              const lastFilteredChild = filteredChildren[filteredChildren.length - 1];\n              if (!this.isPasswordEncrypted[lastFilteredChild.id]) {\n                this.decryptChildEmails(lastFilteredChild);\n              }\n\n              this.mailExpandedStatus[lastFilteredChild.id] =\n                this.mailExpandedStatus[lastFilteredChild.id] !== undefined\n                  ? this.mailExpandedStatus[lastFilteredChild.id]\n                  : true;\n            }\n            this.mail.children.forEach(child => {\n              this.backupChildDecryptedContent(child, mailState);\n            });\n            setTimeout(() => {\n              if (this.mail) {\n                if (\n                  !this.isPasswordEncrypted[this.mail.id] &&\n                  !this.isDecrypting[this.mail.id] &&\n                  this.mail.content &&\n                  (!decryptedContent ||\n                    (!decryptedContent.inProgress && !decryptedContent.content && this.mail.content))\n                ) {\n                  this.isDecrypting[this.mail.id] = true;\n                  if (this.mail.encryption_type === PGPEncryptionType.PGP_MIME) {\n                    this.messageDecryptService\n                      .decryptMessage(this.mail, false)\n                      .pipe(take(1))\n                      .subscribe(\n                        () => {},\n                        error => {},\n                      );\n                  } else {\n                    this.pgpService\n                      .decrypt(this.mail.mailbox, this.mail.id, new SecureContent(this.mail))\n                      .pipe(take(1))\n                      .subscribe(\n                        () => {},\n                        error => {},\n                      );\n                  }\n                }\n              }\n            }, 1000);\n          } else if (!this.mail.has_children) {\n            if (this.mailExpandedStatus[this.mail.id] === undefined) this.mailExpandedStatus[this.mail.id] = true;\n          }\n        }\n        if (mailState.mailDetailLoaded) {\n          this.progressBar = true;\n        }\n        if (this.mails.length > 0 && this.mail && mailState.loaded) {\n          this.MAX_EMAIL_PAGE_LIMIT = mailState.total_mail_count;\n          this.currentMailIndex = this.mails.findIndex(item => item.id === this.mail.id);\n          this.currentMailNumber = this.EMAILS_PER_PAGE * (this.page - 1) + this.currentMailIndex + 1 || '-';\n        }\n        if (\n          !mailState.loaded &&\n          this.mails.length === 0 &&\n          !mailState.inProgress &&\n          this.EMAILS_PER_PAGE &&\n          this.mailFolder !== MailFolderType.SEARCH\n        ) {\n          this.store.dispatch(\n            new GetMails({\n              limit: this.EMAILS_PER_PAGE,\n              inProgress: true,\n              offset: this.OFFSET,\n              folder: this.mailFolder,\n            }),\n          );\n        }\n\n        if (this.mail && this.mail.children) {\n          const draft_children = this.mail.children.filter(child => child.folder === 'draft');\n          this.hasDraft = !!(draft_children.length > 0);\n          // Get whether this contains trash/non-trash children\n          if (\n            (this.mailFolder !== MailFolderType.TRASH &&\n              (this.mail.children.filter(child => child.folder === MailFolderType.TRASH).length > 0 ||\n                this.mail.folder === MailFolderType.TRASH)) ||\n            (this.mailFolder === MailFolderType.TRASH &&\n              (this.mail.children.filter(child => child.folder !== MailFolderType.TRASH).length > 0 ||\n                this.mail.folder !== MailFolderType.TRASH))\n          ) {\n            this.isContainTrashRelatedChildren = true;\n          } else {\n            this.isContainTrashRelatedChildren = false;\n          }\n        }\n      });\n\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        this.currentMailbox = mailBoxesState.currentMailbox;\n        this.mailboxes = mailBoxesState.mailboxes;\n      });\n    /**\n     * Get folder and page from route\n     */\n    this.route.params.pipe(untilDestroyed(this)).subscribe(parameters => {\n      const id = +parameters.id;\n      this.mailFolder = parameters.folder as MailFolderType;\n      this.disableMoveTo = this.mailFolder === MailFolderType.OUTBOX || this.mailFolder === MailFolderType.DRAFT;\n      this.page = +parameters.page;\n      this.getMailDetail(id);\n    });\n    /**\n     * Get user settings\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.customFolders = user.customFolders;\n        user.customFolders.forEach(folder => {\n          this.folderColors[folder.name] = folder.color;\n        });\n        this.userState = user;\n        this.isDarkMode = this.userState.settings.is_night_mode;\n        this.isConversationView = this.userState.settings.is_conversation_mode;\n        this.EMAILS_PER_PAGE = user.settings.emails_per_page;\n        this.disableExternalImages = this.userState.settings.is_disable_loading_images;\n        this.includeOriginMessage = this.userState.settings.include_original_message;\n      });\n\n    this.isMobile = window.innerWidth <= 768;\n    this.activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe((parameters: Params) => {\n      this.forceLightMode = parameters.lightMode;\n    });\n\n    /**\n     * Get user's contacts from store.\n     */\n    this.store\n      .select((state: AppState) => state.contacts)\n      .pipe(untilDestroyed(this))\n      .subscribe((contactsState: ContactsState) => {\n        this.contacts =\n          contactsState.emailContacts === undefined ? contactsState.contacts : contactsState.emailContacts;\n      });\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    this.isMobile = window.innerWidth <= 768;\n  }\n\n  decryptWithPassword(inputID: string, mail: Mail) {\n    const input = <HTMLInputElement>document.getElementById(inputID);\n    if (!mail) return;\n    if (!input.value) {\n      return;\n    }\n    this.isDecrypting[mail.id] = true;\n    this.mailExpandedStatus[mail.id] = true;\n    this.pgpService\n      .decryptPasswordEncryptedContent(mail.mailbox, mail.id, new SecureContent(mail), input.value)\n      .pipe(take(1))\n      .subscribe(\n        () => {\n          this.errorMessageForDecryptingWithPassword[mail.id] = '';\n          this.isDecrypting[mail.id] = false;\n        },\n        error => {\n          this.errorMessageForDecryptingWithPassword[mail.id] = 'Password is incorrect';\n          this.isDecrypting[mail.id] = false;\n        },\n      );\n  }\n\n  confirmExternalLinks() {\n    this.externalLinkChecked = false;\n    setTimeout(() => {\n      let exLinks = document.querySelectorAll('.msg-reply-content a');\n      if (exLinks?.length > 0) {\n        for (const i in exLinks) {\n          if (exLinks[i]?.innerHTML && exLinks[i].getAttribute('href')) {\n            exLinks[i].addEventListener('click', event => {\n              event.preventDefault();\n              this.externalLinkConfirmModalRef = this.modalService.open(this.externalLinkConfirmModal, {\n                centered: true,\n                windowClass: 'modal-sm users-action-modal',\n              });\n              this.externalLinkConfirmModalRef.result.then(result => {\n                if (result) {\n                  const link = document.createElement('a');\n                  link.href = exLinks[i].getAttribute('href');\n                  link.target = '_blank';\n                  link.rel = 'noopener noreferrer';\n                  link.click();\n                }\n                this.externalLinkConfirmModalRef = null;\n              });\n            });\n          }\n        }\n      }\n    }, 1000);\n    return;\n  }\n\n  scrambleText(elementId: string) {\n    if (!this.decryptedContents[this.mail.id]) {\n      setTimeout(() => {\n        Scrambler({\n          target: `#${elementId}`,\n          random: [1000, 120000],\n          speed: 70,\n          text: 'A7gHc6H66A9SAQfoBJDq4C7',\n        });\n      }, 100);\n    }\n  }\n\n  changeMail(index: number) {\n    if (index < 0 || index >= this.mails.length) {\n      if (index >= this.EMAILS_PER_PAGE) {\n        this.shouldChangeMail = 2;\n        this.page++;\n      } else if (index <= 0 && this.page > 1) {\n        this.page--;\n        this.shouldChangeMail = 1;\n      } else {\n        return;\n      }\n      this.store.dispatch(\n        new GetMails({\n          forceReload: true,\n          limit: this.EMAILS_PER_PAGE,\n          offset: this.EMAILS_PER_PAGE * (this.page - 1),\n          folder: this.mailFolder,\n        }),\n      );\n      return;\n    }\n    this.mail = null;\n    setTimeout(() => {\n      this.markedAsRead = false;\n      this.router.navigateByUrl(`/mail/${this.mailFolder}/page/${this.page}/message/${this.mails[index].id}`);\n    }, 500);\n  }\n\n  /**\n   * Input email links to compose receivers\n   */\n  handleEmailLinks() {\n    setTimeout(() => {\n      const anchorElements = document.querySelectorAll('a');\n      for (const i in anchorElements) {\n        if (anchorElements.hasOwnProperty(i) && anchorElements[i].href.indexOf('mailto:') === 0) {\n          const receivers = [anchorElements[i].href.split('mailto:')[1]];\n          anchorElements[i].addEventListener('click', event => {\n            event.preventDefault();\n            this.composeMailService.openComposeMailDialog({\n              receivers,\n              isFullScreen: this.userState.settings.is_composer_full_screen,\n            });\n          });\n          anchorElements[i].href = '';\n        }\n      }\n    }, 1000);\n  }\n\n  viewEmailInLightMode() {\n    const win = window.open(`${document.location.href}?lightMode=true`, '_blank');\n    win.focus();\n  }\n\n  isNeedRemoveStar(mail: Mail): boolean {\n    if (!mail) {\n      return false;\n    }\n    if (!this.isConversationView) {\n      return mail.starred;\n    }\n    if (mail.starred) {\n      return true;\n    }\n    if (mail.children && mail.children.length > 0) {\n      return mail.children.some(child => child.starred) || mail.starred;\n    }\n    return false;\n  }\n\n  isNeedAddStar(mail: Mail): boolean {\n    if (!mail) {\n      return false;\n    }\n    if (!this.isConversationView) {\n      return !mail.starred;\n    }\n    if (!mail.starred) {\n      return true;\n    }\n    if (mail.children && mail.children.length > 0) {\n      return mail.children.some(child => !child.starred) || !mail.starred;\n    }\n    return false;\n  }\n\n  toggleGmailExtra(mail: Mail) {\n    if (!this.mailOptions[mail.id]) {\n      this.mailOptions[mail.id] = {};\n    }\n    this.mailOptions[mail.id].showGmailExtraContent = !this.mailOptions[mail.id].showGmailExtraContent;\n  }\n\n  decryptChildEmails(child: Mail) {\n    if (child.folder === MailFolderType.OUTBOX && !child.is_encrypted) {\n      this.decryptedContents[child.id] = child.content;\n    } else {\n      const childDecryptedContent = this.decryptedContents[child.id];\n      if (\n        !this.isDecrypting[child.id] &&\n        (!childDecryptedContent ||\n          (!childDecryptedContent.inProgress && !childDecryptedContent.content && child.content))\n      ) {\n        this.isDecrypting[child.id] = true;\n        if (child.encryption_type === PGPEncryptionType.PGP_MIME) {\n          this.messageDecryptService\n            .decryptMessage(child, false)\n            .pipe(take(1))\n            .subscribe(\n              () => {},\n              error => {},\n            );\n        } else {\n          this.pgpService\n            .decrypt(child.mailbox, child.id, new SecureContent(child))\n            .pipe(take(1))\n            .subscribe(\n              () => {},\n              error => {},\n            );\n        }\n      }\n    }\n  }\n\n  backupChildDecryptedContent(child: Mail, mailState: MailState) {\n    if (child.folder === MailFolderType.OUTBOX && !child.is_encrypted) {\n      this.decryptedContents[child.id] = child.content;\n    } else {\n      const childDecryptedContent = mailState.decryptedContents[child.id];\n      if (childDecryptedContent && !childDecryptedContent.inProgress && childDecryptedContent.content) {\n        const decryptedContents = child.is_html\n          ? childDecryptedContent.content.replace(/<a /g, '<a target=\"_blank\" rel=\"noopener noreferrer\" ')\n          : childDecryptedContent.content;\n        this.decryptedContents[child.id] = decryptedContents;\n        this.decryptedContentsPlain[child.id] = childDecryptedContent.content_plain;\n        if (child.is_subject_encrypted) {\n          child.subject = childDecryptedContent.subject;\n        }\n        this.decryptedHeaders[child.id] = this.parseHeaders(childDecryptedContent.incomingHeaders);\n        this.isDecryptingError[child.id] = childDecryptedContent.decryptError;\n        this.handleEmailLinks();\n      }\n    }\n    if (!this.mailOptions[child.id]) {\n      this.mailOptions[child.id] = {};\n    }\n  }\n\n  /**\n   * Parse headers with new json format from origin headers\n   */\n  parseHeaders(headers: any) {\n    if (!headers) {\n      return [];\n    }\n    try {\n      headers = JSON.parse(headers);\n      const headersArray: { key: string; value: any }[] = [];\n      headers.forEach((header: any) => {\n        Object.keys(header).forEach(key => {\n          if (header.hasOwnProperty(key)) {\n            headersArray.push({ key, value: header[key] });\n          }\n        });\n      });\n      return headersArray;\n    } catch {\n      return [];\n    }\n  }\n\n  getMailDetail(messageId: number) {\n    this.store.dispatch(new GetMailDetail({ messageId, folder: this.mailFolder }));\n  }\n\n  downloadAllAttachments(mail: Mail) {\n    if (mail?.attachments) {\n      for (let i = 0; i < mail.attachments.length; i++) {\n        this.decryptAttachment(mail.attachments[i], mail);\n      }\n    }\n  }\n\n  // TODO: Merge with display-secure-message and compose-mail components\n  decryptAttachment(attachment: Attachment, mail: Mail) {\n    if (attachment.is_encrypted) {\n      if (this.decryptedAttachments[attachment.id]) {\n        if (!this.decryptedAttachments[attachment.id].inProgress) {\n          this.downloadAttachment(this.decryptedAttachments[attachment.id]);\n        }\n      } else {\n        this.decryptedAttachments[attachment.id] = { ...attachment, inProgress: true };\n        this.mailService.getAttachment(attachment).subscribe(\n          response => {\n            if (!attachment.name) {\n              attachment.name = FilenamePipe.tranformToFilename(attachment.document);\n            }\n            const fileInfo = { attachment, type: response.file_type };\n            this.pgpService\n              .decryptAttachment(mail.mailbox, response.data, fileInfo)\n              .pipe(take(1))\n              .subscribe(\n                (decryptedAttachment: Attachment) => {\n                  this.decryptedAttachments[attachment.id] = { ...decryptedAttachment, inProgress: false };\n                  this.downloadAttachment(decryptedAttachment);\n                },\n                error => this.store.dispatch(new SnackErrorPush({ message: 'Failed to decrypt attachment.' })),\n              );\n          },\n          errorResponse =>\n            this.store.dispatch(\n              new SnackErrorPush({\n                message: errorResponse.error || 'Failed to download attachment.',\n              }),\n            ),\n        );\n      }\n    }\n  }\n\n  downloadAttachment(attachment: Attachment) {\n    this.shareService.downloadFile(attachment.decryptedDocument);\n  }\n\n  markAsStarred(starred = true, withChildren = true) {\n    this.store.dispatch(new StarMail({ ids: `${this.mail.id}`, starred, withChildren }));\n  }\n\n  markAsRead(mailID: number, read = true) {\n    this.store.dispatch(new ReadMail({ ids: mailID.toString(), read }));\n    if (!read) {\n      this.goBack();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.store.dispatch(new ClearMailDetail(this.mail || {}));\n  }\n\n  showIncomingHeaders(mail: Mail) {\n    this.selectedHeaders = this.decryptedHeaders[mail.id];\n    this.modalService.open(this.incomingHeadersModal, {\n      centered: true,\n      windowClass: this.selectedHeaders.length === 0 ? 'modal-sm' : '',\n    });\n  }\n\n  setActionParent(mail: Mail, isChildMail: boolean, mainReply: boolean) {\n    if (!isChildMail && mainReply) {\n      if (this.mail.children && this.mail.children.length > 0) {\n        this.composeMailData[mail.id].action_parent_id = this.mail.children[this.mail.children.length - 1].id;\n      } else {\n        this.composeMailData[mail.id].action_parent_id = this.mail.id;\n      }\n    } else {\n      this.composeMailData[mail.id].action_parent_id = mail.id;\n    }\n  }\n\n  onReply(mail: Mail, index = 0, isChildMail?: boolean, mainReply = false) {\n    const previousMails = this.getPreviousMail(index, isChildMail, mainReply);\n    const allRecipients = new Set([...mail.receiver, mail.sender, mail.cc, mail.bcc]);\n    let parentId = this.mail.id;\n    if (!this.isConversationView && this.mail.parent) {\n      parentId = this.mail.parent;\n    }\n    this.composeMailData[mail.id] = {\n      subject: `Re: ${mail.subject}`,\n      parentId,\n      content: this.getMessageHistory(previousMails),\n      selectedMailbox: this.mailboxes.find(mailbox => allRecipients.has(mailbox.email)),\n    };\n    if (mail.reply_to && mail.reply_to.length > 0) {\n      this.composeMailData[mail.id].receivers = mail.reply_to;\n    } else {\n      let lastSender = '';\n      let lastReceiver = '';\n      if (mail.children && mail.children.length > 0) {\n        for (let i = mail.children.length; i > 0; i--) {\n          if (mail.children[i - 1].folder !== 'trash') {\n            lastSender = mail.children[i - 1].sender;\n            lastReceiver = mail.children[i - 1].receiver[0];\n            break;\n          }\n        }\n        if (lastSender && lastReceiver) {\n          this.composeMailData[mail.id].receivers =\n            lastSender !== this.currentMailbox.email ? [lastSender] : [lastReceiver];\n        } else {\n          this.composeMailData[mail.id].receivers =\n            mail.sender !== this.currentMailbox.email ? [mail.sender] : this.mail.receiver;\n        }\n      } else {\n        this.composeMailData[mail.id].receivers =\n          mail.sender !== this.currentMailbox.email ? [mail.sender] : this.mail.receiver;\n      }\n    }\n    this.selectedMailToInclude = mail;\n    this.composeMailData[mail.id].action = MailAction.REPLY;\n    this.setActionParent(mail, isChildMail, mainReply);\n    if (mail.attachments?.length > 0) {\n      this.includeAttachmentsModalRef = this.modalService.open(this.includeAttachmentsModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n      });\n    } else {\n      this.confirmIncludeAttachments();\n    }\n    // this.mailOptions[mail.id].isComposeMailVisible = true;\n  }\n\n  onReplyAll(mail: Mail, index = 0, isChildMail?: boolean, mainReply = false) {\n    const previousMails = this.getPreviousMail(index, isChildMail, mainReply);\n    this.composeMailData[mail.id] = {\n      subject: `Re: ${mail.subject}`,\n      parentId: this.mail.id,\n      content: this.getMessageHistory(previousMails),\n      selectedMailbox: this.mailboxes.find(mailbox => mail.receiver.includes(mailbox.email)),\n    };\n    if (mail.sender !== this.currentMailbox.email) {\n      const receivers = [mail.sender, ...mail.receiver, ...mail.cc, ...mail.bcc];\n      this.composeMailData[mail.id].receivers = receivers;\n    } else {\n      this.composeMailData[mail.id].receivers = Array.isArray(mail.receiver)\n        ? [...mail.receiver, ...mail.cc, ...mail.bcc]\n        : [mail.receiver, ...mail.cc, ...mail.bcc];\n    }\n    this.composeMailData[mail.id].receivers = this.composeMailData[mail.id].receivers.filter(\n      (email: string) => email !== this.currentMailbox.email,\n    );\n    this.selectedMailToInclude = mail;\n    this.composeMailData[mail.id].action = MailAction.REPLY_ALL;\n    this.setActionParent(mail, isChildMail, mainReply);\n    if (mail.attachments?.length > 0) {\n      this.includeAttachmentsModalRef = this.modalService.open(this.includeAttachmentsModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n      });\n    } else {\n      this.confirmIncludeAttachments();\n    }\n  }\n\n  confirmIncludeAttachments(shouldInclude?: boolean) {\n    if (shouldInclude) {\n      this.composeMailData[this.selectedMailToInclude.id].forwardAttachmentsMessageId = this.selectedMailToInclude.id;\n    }\n    this.mailOptions[this.selectedMailToInclude.id].isComposeMailVisible = true;\n    this.selectedMailToInclude = null;\n    if (this.includeAttachmentsModalRef) {\n      this.includeAttachmentsModalRef.dismiss();\n    }\n  }\n\n  onForward(mail: Mail, index = 0, isChildMail?: boolean, mainReply = false) {\n    this.composeMailData[mail.id] = {\n      content: this.getForwardMessageSummary(mail),\n      subject: `Fwd: ${this.mail.subject}`,\n      selectedMailbox: this.mailboxes.find(mailbox => mail.receiver.includes(mailbox.email)),\n      action: MailAction.FORWARD,\n      is_html: mail.is_html,\n    };\n    this.selectedMailToForward = mail;\n    this.setActionParent(mail, isChildMail, mainReply);\n    if (mail.attachments?.length > 0) {\n      this.forwardAttachmentsModalRef = this.modalService.open(this.forwardAttachmentsModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n      });\n    } else {\n      this.confirmForwardAttachments();\n    }\n  }\n\n  confirmForwardAttachments(shouldForward?: boolean) {\n    if (shouldForward) {\n      this.composeMailData[this.selectedMailToForward.id].forwardAttachmentsMessageId = this.selectedMailToForward.id;\n    }\n    this.mailOptions[this.selectedMailToForward.id].isComposeMailVisible = true;\n    this.selectedMailToForward = null;\n    if (this.forwardAttachmentsModalRef) {\n      this.forwardAttachmentsModalRef.dismiss();\n    }\n  }\n\n  onComposeMailHide(mail: Mail) {\n    this.composeMailData[mail.id] = {};\n    this.mailOptions[mail.id].isComposeMailVisible = false;\n  }\n\n  onDelete(mail: Mail, index?: number, withChildren = true) {\n    if (mail.folder === MailFolderType.TRASH && this.mailFolder === MailFolderType.TRASH) {\n      this.store.dispatch(new DeleteMail({ ids: mail.id.toString(), parent_only: !withChildren }));\n      if (\n        this.mail.children &&\n        !this.mail.children.filter(child => child.id !== mail.id).some(child => child.folder === MailFolderType.TRASH)\n      ) {\n        this.goBackAfterDelete();\n      }\n    } else {\n      this.store.dispatch(\n        new MoveMail({\n          ids: mail.id,\n          folder: MailFolderType.TRASH,\n          sourceFolder: mail.folder,\n          mail,\n          allowUndo: true,\n          withChildren,\n        }),\n      );\n      this.onDeleteCollapseMail(mail.id);\n    }\n    let excepted_children: any[] = [];\n    if (this.mail.children) {\n      excepted_children =\n        this.mailFolder === this.mailFolderTypes.TRASH\n          ? this.mail.children.filter(child => child.folder === this.mailFolderTypes.TRASH)\n          : this.mail.children.filter(child => child.folder !== this.mailFolderTypes.TRASH);\n      excepted_children = excepted_children.filter(child => child.id !== mail.id);\n    }\n    if (\n      (mail.id === this.mail.id && (withChildren || !excepted_children || excepted_children.length === 0)) ||\n      (mail.id !== this.mail.id &&\n        (!excepted_children || excepted_children.length === 0) &&\n        this.mail.folder === MailFolderType.TRASH) ||\n      (mail.id === this.mail.id && this.mail.folder === MailFolderType.TRASH)\n    ) {\n      this.goBackAfterDelete();\n    }\n  }\n\n  goBackAfterDelete() {\n    this.goBack(500);\n    this.mail = null;\n    this.markedAsRead = false;\n  }\n\n  onDeleteForAll(mail: Mail) {\n    this.store.dispatch(new DeleteMailForAll({ id: mail.id, isMailDetailPage: true }));\n    if (this.mail.children) {\n      this.mail.children = this.mail.children.filter(child => child.id !== mail.id);\n    }\n    if (mail.id === this.mail.id) {\n      this.goBackAfterDelete();\n    }\n  }\n\n  onDeleteCollapseMail(mailID?: number) {\n    this.mailExpandedStatus[mailID] = false;\n  }\n\n  onMarkAsSpam(mail: Mail) {\n    this.store.dispatch(\n      new MoveMail({\n        ids: mail.id,\n        folder: MailFolderType.SPAM,\n        sourceFolder: mail.folder,\n        mail,\n        allowUndo: true,\n      }),\n    );\n    if (mail.id === this.mail.id) {\n      this.goBack();\n    }\n  }\n\n  markNotSpam(mail: Mail) {\n    this.store.dispatch(\n      new MoveMail({\n        ids: mail.id,\n        folder: MailFolderType.INBOX,\n        sourceFolder: mail.folder,\n        mail,\n        allowUndo: true,\n      }),\n    );\n    setTimeout(() => {\n      this.store.dispatch(new WhiteListAdd({ name: mail.sender, email: mail.sender }));\n    }, 2000);\n    this.goBack();\n  }\n\n  ontoggleStarred(event: any, mail: Mail, withChildren = true) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.store.dispatch(\n      new StarMail({\n        ids: mail.id.toString(),\n        starred: withChildren ? !mail.has_starred_children : !mail.starred,\n        withChildren,\n      }),\n    );\n  }\n\n  moveToFolder(folder: MailFolderType | string) {\n    // Dispatch move to selected folder event\n    this.store.dispatch(\n      new MoveMail({\n        ids: this.mail.id,\n        folder,\n        sourceFolder: this.mailFolder,\n        allowUndo: true,\n        mail: this.mail,\n        fromTrash: this.mailFolder === MailFolderType.TRASH,\n      }),\n    );\n\n    this.goBack(500);\n  }\n\n  onCancelSend(mail: any) {\n    mail.delayed_delivery = 'CancelSend';\n    const updatedMail = { draft: mail };\n    this.store.dispatch(new SendMail(updatedMail));\n\n    this.goBack(500);\n  }\n\n  goBack(wait = 1) {\n    setTimeout(() => {\n      this.router.navigateByUrl(`/mail/${this.mailFolder}/page/${this.page}`);\n    }, wait);\n  }\n\n  openCreateFolderDialog() {\n    this.shareService.openCreateFolderDialog(this.userState.isPrime, this.customFolders, {\n      self: this,\n      method: 'moveToFolder',\n    });\n  }\n\n  onPrint(mail: Mail) {\n    if (this.decryptedContents[mail.id]) {\n      let popupWin;\n\n      const subject = document.getElementById(`${this.mail.id}-mail-subject`).innerHTML;\n      const from = document.getElementById(`${mail.id}-mail-from`).innerHTML;\n      const to = document.getElementById(`${mail.id}-mail-to`).innerHTML;\n      const date = document.getElementById(`${mail.id}-mail-date`).innerHTML;\n      const content = document.getElementById(`${mail.id}-raw-mail-content`).innerHTML;\n\n      const hasCC = document.getElementById(`${mail.id}-mail-cc`);\n      let cc = '';\n      if (hasCC) {\n        cc = `<span class=\"text-muted\">${hasCC.innerHTML}</span>`;\n      }\n\n      popupWin = window.open('', '_blank', 'top=0,left=0,height=100%,width=auto');\n      popupWin.document.open();\n      popupWin.document.write(`\n          <html>\n            <head>\n              <title>Print tab</title>\n              <style>\n              body {\n                font-family: \"Roboto\", Helvetica, Arial, sans-serif;\n                }\n\n                .navbar-brand-logo {\n                    margin-right: 10px;\n                    max-width: 32px;\n                }\n\n                a {\n                    color: #3498db;\n                }\n\n                .container {\n                    max-width: 900px;\n                    padding: 100px 15px;\n                    margin: auto;\n                    color: #757675;\n                }\n\n                .row {\n                    padding-left: -15px;\n                    padding-right: -15px;\n                }\n\n                .text-center {\n                    text-align: center;\n                }\n\n                .text-secondary {\n                    color: #34495e;\n                }\n\n                .page-title {\n                    font-weight: 300;\n                }\n\n                .dashed-separator {\n                    border-top: 1px dashed #777;margin:20px 0 20px;\n                }\n              </style>\n            </head>\n            <body onload=\"window.print();window.close()\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <!-- Mail Subject -->\n                    <h1>${subject}</h1>\n                    <div class=\"dashed-separator\"></div>\n                    <!-- Mail From  -->\n                    <span class=\"text-muted\">${from}</span>\n                    <br>\n                    <!-- Mail To  -->\n                    <span class=\"text-muted\">${to}</span>\n                    <br>\n                    <!-- Mail CC  -->\n                    ${cc}\n                    <br>\n                    <!-- Mail Date Created  -->\n                    Dated:<strong>${date}</strong>\n                    <br>\n                    <div class=\"dashed-separator\"></div>\n                    <!-- Mail Content  -->\n                    <div>\n                      ${content}\n                    </div>\n                </div>\n            </div>\n            </body>\n          </html>`);\n      popupWin.document.close();\n    }\n  }\n\n  scrollTo(elementReference: any) {\n    if (elementReference) {\n      setTimeout(() => {\n        elementReference.scrollIntoView({ behavior: 'smooth' });\n      }, 100);\n    }\n  }\n\n  onSwitchHtmlPlainTextMode(mail: Mail) {\n    this.plainTextViewState[mail.id] = !this.plainTextViewState[mail.id];\n  }\n\n  private getPreviousMail(index: number, isChildMail: boolean, mainReply = false, isForwarding = false) {\n    let children: Mail[] = this.mail.children || [];\n    if (this.mailFolder !== MailFolderType.TRASH && this.mail.children) {\n      children = this.mail.children.filter(child => child.folder !== MailFolderType.TRASH);\n    }\n    const previousMail = [];\n    if (isChildMail) {\n      previousMail.push(children[index]);\n    } else if (mainReply === true && children.length > 0) {\n      previousMail.push(children[children.length - 1]);\n    } else if (this.mail.folder !== MailFolderType.TRASH && !isForwarding) {\n      previousMail.push(this.mail);\n    }\n    return previousMail;\n  }\n\n  private getMessageHistory(previousMails: Mail[]): string {\n    if (previousMails.length === 0) {\n      return '';\n    }\n    let history = SummarySeparator;\n    previousMails.forEach(previousMail => (history = this.getMessageSummary(history, previousMail)));\n    return `<div class=\"gmail_quote\">${history}</div>`;\n  }\n\n  /**\n   * Add original message status when reply or forward\n   */\n  private getMessageSummary(content: string, mail: Mail): string {\n    if (mail.folder !== MailFolderType.DRAFT && mail.folder !== MailFolderType.TRASH && this.includeOriginMessage) {\n      const formattedDateTime = mail.sent_at\n        ? this.dateTimeUtilService.formatDateTimeStr(mail.sent_at, 'ddd, MMMM D, YYYY [at] h:mm:ss A')\n        : this.dateTimeUtilService.formatDateTimeStr(mail.created_at, 'ddd, MMMM D, YYYY [at] h:mm:ss A');\n      if (this.decryptedContents[mail.id] === undefined) {\n        this.decryptedContents[mail.id] = '';\n      }\n      content += `</br>---------- Original Message ----------</br>On ${formattedDateTime} < ${\n        mail.sender\n      } > wrote:</br><div class=\"originalblock\">${this.decryptedContents[mail.id]}</div></br>`;\n    }\n    return content;\n  }\n\n  /**\n   * Add forwarded message summary with original message\n   */\n  private getForwardMessageSummary(mail: Mail): string {\n    let content =\n      `</br>---------- Forwarded message ----------</br>` +\n      `From: ${EmailFormatPipe.transformToFormattedEmail(\n        mail.sender_display.email,\n        xss.escapeHtml(mail.sender_display.name),\n        true,\n      )}</br>` +\n      `Date: ${\n        mail.sent_at\n          ? this.dateTimeUtilService.formatDateTimeStr(mail.sent_at, 'medium')\n          : this.dateTimeUtilService.formatDateTimeStr(mail.created_at, 'medium')\n      }</br>` +\n      `Subject: ${xss.escapeHtml(mail.subject)}</br>` +\n      `To: ${mail.receiver_display\n        .map(receiver => EmailFormatPipe.transformToFormattedEmail(receiver.email, receiver.name, true))\n        .join(', ')}</br>`;\n\n    if (mail.cc.length > 0) {\n      content += `CC: ${mail.cc.map(cc => `< ${cc} >`).join(', ')}</br>`;\n    }\n    content += `</br>${this.decryptedContents[mail.id]}</br>`;\n    return content;\n  }\n\n  onClickParentHeader() {\n    this.mailExpandedStatus[this.mail.id] = !this.mailExpandedStatus[this.mail.id];\n    if (\n      this.mail.content !== undefined &&\n      !this.decryptedContents[this.mail.id] &&\n      !this.isDecrypting[this.mail.id] &&\n      !this.isPasswordEncrypted[this.mail.id]\n    ) {\n      this.isDecrypting[this.mail.id] = true;\n      this.pgpService.decrypt(this.mail.mailbox, this.mail.id, new SecureContent(this.mail));\n    }\n  }\n\n  /**\n   * @name onClickChildHeader\n   * @description This would be called, when hitting the header of child mail. Will change the state of childMailCollapsed by index\n   * @params Index of child from mails\n   * @returns None\n   */\n  onClickChildHeader(mail: Mail) {\n    this.mailExpandedStatus[mail.id] = !this.mailExpandedStatus[mail.id];\n    if (!this.isPasswordEncrypted[mail.id]) {\n      this.decryptChildEmails(mail);\n    }\n  }\n\n  private onShowTrashRelatedChildren() {\n    this.isShowTrashRelatedChildren = !this.isShowTrashRelatedChildren;\n  }\n\n  // == Toggle password visibility\n  togglePassword(inputID: string): any {\n    const input = <HTMLInputElement>document.getElementById(inputID);\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n}\n","<!--Footer on settings page -->\n<footer id=\"mailboxFooter\" class=\"mailbox-footer\">\n  <div class=\"mailbox-footer-inner\">\n    <ul class=\"mailbox-footer-menu justify-content-center justify-content-sm-start\">\n      <li>\n        <a href=\"{{ primaryWebsite }}/terms\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <u [innerHTML]=\"'common.terms_and_privacy' | translate\">Terms of Service</u>\n        </a>\n      </li>\n      <li *ngIf=\"!userState.isPrime\">\n        <a routerLink=\"/mail/settings/dashboard-and-plans\" class=\"text-primary\">\n          <u>{{ 'common.upgrade_account' | translate }}</u>\n        </a>\n      </li>\n    </ul>\n  </div>\n</footer>\n","import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, UserState } from '../../store/datatypes';\nimport { PRIMARY_WEBSITE } from '../../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-footer',\n  templateUrl: './mail-footer.component.html',\n  styleUrls: ['./mail-footer.component.scss'],\n})\nexport class MailFooterComponent implements OnInit {\n  public userState: UserState;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  constructor(private store: Store<AppState>) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n      });\n  }\n}\n","<nav class=\"navbar mailbox-navbar\" role=\"navigation\">\n  <button class=\"navbar-toggler hidden-sm-up\" role=\"button\" (click)=\"toggleMenu()\">\n    <span class=\"navbar-toggler-icon\"></span>\n    <span class=\"navbar-toggler-icon\"></span>\n    <span class=\"navbar-toggler-icon\"></span>\n    <span class=\"navbar-toggler-icon\"></span>\n  </button>\n  <div class=\"row align-items-center mailbox-navbar-row\">\n    <!--Search bar -->\n    <div class=\"col-sm-6 mailbox-navbar-col hidden-xs-down\">\n      <div class=\"form search-form\">\n        <div>\n          <div class=\"form-group mb-0 position-relative\">\n            <input\n              class=\"form-control form-control-sm\"\n              type=\"text\"\n              [formControl]=\"searchInput\"\n              (keyup.enter)=\"search()\"\n              [placeholder]=\"searchPlaceholder | translate\"\n            />\n            <button class=\"clear-btn\" *ngIf=\"searchInput.value?.length > 0\" (click)=\"searchInput.setValue('')\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"btn btn-sm btn-secondary search-btn\" (click)=\"search()\" role=\"button\">\n              <i class=\"icon icon-search\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!--Action buttons -->\n    <div class=\"col-sm-6 mailbox-navbar-col\">\n      <ul class=\"mailbox-actions-menu d-flex justify-content-end align-items-center\">\n        <!--Protected by SRI button -->\n        <li>\n          <a\n            href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            class=\"sri-check\"\n            placement=\"bottom\"\n            ngbTooltip=\"Protected by SRI, click to read more\"\n          >\n            <i class=\"fas fa-shield-alt\"></i>\n          </a>\n        </li>\n        <!--Help dropdown -->\n        <li class=\"btn-dropdown help-icon\">\n          <div ngbDropdown>\n            <button\n              type=\"button\"\n              id=\"helpDropdownMenuButton\"\n              [ngbTooltip]=\"'mail_header.need_help' | translate\"\n              class=\"icon-button d-flex align-items-center\"\n              ngbDropdownToggle\n              placement=\"bottom\"\n            >\n              <i class=\"far fa-question-circle\"></i>\n            </button>\n            <div\n              ngbDropdownMenu\n              class=\"dropdown-menu-right text-center faq-dropdown\"\n              aria-labelledby=\"helpDropdownMenuButton\"\n            >\n              <a\n                class=\"dropdown-item text-left\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"{{ primaryWebsite }}/help/\"\n              >\n                Helpdesk\n              </a>\n              <a\n                class=\"dropdown-item text-left\"\n                (click)=\"openComposeMailDialog(['support@ctemplar.com'])\"\n                [innerHTML]=\"'settings.contact_support' | translate\"\n                >Contact support\n              </a>\n            </div>\n          </div>\n        </li>\n        <!--Contact Button -->\n        <li class=\"\">\n          <a\n            routerLink=\"/mail/contacts\"\n            placement=\"bottom\"\n            (click)=\"searchInput.setValue('')\"\n            routerLinkActive=\"active\"\n            [ngbTooltip]=\"'mail_header.contacts' | translate\"\n          >\n            <i class=\"icon icon-login\"></i>\n          </a>\n        </li>\n        <!--Settings Button -->\n        <li class=\"mailbox-settings pr-sm-0\">\n          <a\n            routerLink=\"/mail/settings/dashboard-and-plans\"\n            class=\"border-right-no-color\"\n            routerLinkActive=\"active\"\n            placement=\"bottom\"\n            [ngbTooltip]=\"'mail_header.settings' | translate\"\n          >\n            <i class=\"icon icon-gear\"></i>\n          </a>\n        </li>\n        <!--Logout Button -->\n        <li class=\"mailbox-signout pl-sm-0\">\n          <a (click)=\"logout()\" placement=\"bottom\" [ngbTooltip]=\"'common.logout' | translate\">\n            <i class=\"icon icon-logout cursor-pointer\"></i>\n          </a>\n        </li>\n        <!--Search Button when mobile size -->\n        <li class=\"mailbox-xs-search-item hidden-sm-up\">\n          <div ngbDropdown>\n            <a ngbDropdownToggle role=\"button\">\n              <i class=\"icon icon-search\"></i>\n            </a>\n            <div ngbDropdownMenu>\n              <div class=\"form search-form\">\n                <form>\n                  <div class=\"form-group mb-0 position-relative\">\n                    <input\n                      class=\"form-control form-control-sm\"\n                      type=\"text\"\n                      [formControl]=\"searchInput\"\n                      (keyup.enter)=\"search()\"\n                      [placeholder]=\"'mail_header.search' | translate\"\n                    />\n                    <button class=\"clear-btn\" *ngIf=\"searchInput.value?.length > 0\" (click)=\"searchInput.setValue('')\">\n                      <i class=\"fas fa-times\"></i>\n                    </button>\n                    <button class=\"btn btn-sm btn-secondary search-btn\" (click)=\"search()\" role=\"button\">\n                      <i class=\"icon icon-search\"></i>\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</nav>\n<div class=\"header-fixed-spacer hidden-sm-up\"></div>\n<div\n  class=\"l-alert l-alert-danger l-alert-is-floated d-sm-inline-block text-center d-none\"\n  style=\"display: none !important\"\n>\n  <div class=\"l-alert-inner\">\n    <div>\n      <span [innerHTML]=\"'mail_header.not_sent_message' | translate\">\n        Your message hasn't been sent because of Internet connection.\n      </span>\n      &nbsp;&nbsp;&nbsp;\n      <a href=\"\">\n        <u [innerHTML]=\"'mail_header.try_to_connect' | translate\">Try to connect</u>\n      </a>\n    </div>\n  </div>\n</div>\n<div\n  class=\"l-alert l-alert-warning l-alert-is-floated d-sm-inline-block text-center d-none\"\n  style=\"display: none !important\"\n>\n  <div class=\"l-alert-inner\">\n    <div>\n      <span [innerHTML]=\"'mail_header.moved_to_trash' | translate\"> The conversation has been moved to the Trash. </span\n      >&nbsp;&nbsp;&nbsp;\n      <a href=\"\">\n        <u [innerHTML]=\"'mail_header.learn_more' | translate\">Learn more</u>\n      </a>\n      &nbsp;&nbsp;&nbsp;\n      <a href=\"\">\n        <u [innerHTML]=\"'mail_header.undo' | translate\">Undo</u>\n      </a>\n    </div>\n  </div>\n</div>\n<!--Logout Modal -->\n<ng-template #logoutModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"logoutModal\">\n      <strong [innerHTML]=\"'mail_header.permanently_delete' | translate\">Permanently deleting data</strong>\n    </h3>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"px-4\">\n      <div align=\"center\" class=\"decryption-spinner\">\n        <img class=\"mt-3\" [src]=\"loadingImage | safe: 'url'\" />\n        <div class=\"my-3\" [innerHTML]=\"'mail_header.permanently_delete_all' | translate\">\n          Permanently deleting all usage data from your visit\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { Component, Inject, ChangeDetectionStrategy, OnInit, ViewChild } from '@angular/core';\nimport { NgbDropdownConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { FormControl } from '@angular/forms';\nimport { DOCUMENT } from '@angular/common';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { filter } from 'rxjs/operators';\n\nimport { ComposeMailService } from '../../store/services/compose-mail.service';\nimport { Language, LANGUAGES, PRIMARY_WEBSITE } from '../../shared/config';\nimport { ExpireSession, Logout, SaveDraftOnLogout } from '../../store/actions';\nimport { AppState, UserState } from '../../store/datatypes';\nimport { SearchState } from '../../store/reducers/search.reducers';\nimport { LOADING_IMAGE } from '../../store/services';\nimport { HttpCancelService } from '../../store/services';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-header',\n  templateUrl: './mail-header.component.html',\n  styleUrls: ['./mail-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MailHeaderComponent implements OnInit {\n  @ViewChild('logoutModal') logoutModal: any;\n\n  // Public property of boolean type set false by default\n  menuIsOpened = false;\n\n  selectedLanguage: Language = { name: 'English', locale: 'en' };\n\n  languages = LANGUAGES;\n\n  searchInput = new FormControl();\n\n  searchPlaceholder = 'common.search';\n\n  loadingImage = LOADING_IMAGE;\n\n  private isContactsPage: boolean;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  constructor(\n    private store: Store<AppState>,\n    config: NgbDropdownConfig,\n    private router: Router,\n    private translate: TranslateService,\n    private modalService: NgbModal,\n    @Inject(DOCUMENT) private document: Document,\n    private composeMailService: ComposeMailService,\n    private httpCancelService: HttpCancelService,\n  ) {\n    config.autoClose = true;\n  }\n\n  ngOnInit() {\n    /**\n     * Change language with user's setting language\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        if (user.settings.language) {\n          const language = this.languages.find(item => item.name === user.settings.language);\n          if (this.selectedLanguage.name !== language.name) {\n            this.translate.use(language.locale);\n          }\n          this.selectedLanguage = language;\n        }\n      });\n\n    this.setSearchPlaceholder(this.router.url);\n    /**\n     * Change placeholder of search bar on contacts page\n     */\n    this.router.events\n      .pipe(\n        untilDestroyed(this),\n        filter(event => event instanceof NavigationEnd),\n      )\n      .subscribe((event: NavigationEnd) => {\n        this.setSearchPlaceholder(event.url);\n      });\n\n    this.store\n      .select(state => state.search)\n      .pipe(untilDestroyed(this))\n      .subscribe((searchState: SearchState) => {\n        this.searchInput.setValue('', { emitEvent: false, emitModelToViewChange: true, emitViewToModelChange: false });\n      });\n  }\n\n  setSearchPlaceholder(url: string) {\n    this.isContactsPage = url === '/mail/contacts';\n    this.searchPlaceholder = this.isContactsPage ? 'common.search_contacts' : 'common.search';\n  }\n\n  search() {\n    if (this.searchInput.value) {\n      if (this.isContactsPage) {\n        this.router.navigate(['/mail/contacts'], { queryParams: { search: this.searchInput.value } });\n      } else {\n        this.router.navigate(['/mail/search/page', 1], { queryParams: { search: this.searchInput.value } });\n      }\n    }\n  }\n\n  // == Setup click event to toggle mobile menu\n  toggleMenu() {\n    // click handler\n    const bool = this.menuIsOpened;\n    this.menuIsOpened = bool === false;\n    this.document.body.classList.add('menu-open');\n  }\n\n  logout() {\n    this.httpCancelService.cancelPendingRequests();\n    this.store.dispatch(new SaveDraftOnLogout());\n    const modalReference = this.modalService.open(this.logoutModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-md change-password-modal',\n    });\n    setTimeout(() => {\n      this.store.dispatch(new ExpireSession());\n      setTimeout(() => {\n        this.store.dispatch(new Logout());\n        modalReference.close();\n      }, 500);\n    }, 2500);\n  }\n\n  openComposeMailDialog(receivers: any) {\n    this.composeMailService.openComposeMailDialog({ receivers });\n  }\n}\n","<div class=\"mailbox-actionbar\">\n  <div class=\"row\">\n    <div class=\"col-12 col-sm-9 mailbox-actionbar-col\">\n      <ul class=\"mailbox-actionbar-menu\">\n        <!--select message dropdown -->\n        <li class=\"btn-dropdown mailbox-dropdown checkbox-dropdown\">\n          <div ngbDropdown>\n            <button\n              ngbDropdownToggle\n              class=\"dropdown-toggle\"\n              role=\"button\"\n              id=\"actionsDropdownMenuButton\"\n              placement=\"top\"\n              [ngbTooltip]=\"'mail_list.select_messages' | translate\"\n            ></button>\n            <span class=\"fancy-field-group select-all-checkbox\">\n              <mat-checkbox\n                type=\"checkbox\"\n                id=\"mailboxBulkActions\"\n                (change)=\"markAllMails($event.checked)\"\n                [(ngModel)]=\"selectAll\"\n                [indeterminate]=\"isSomeEmailsSelected()\"\n              >\n              </mat-checkbox>\n              <label for=\"mailboxBulkActions\" class=\"fancy-field-empty\"></label>\n            </span>\n            <div ngbDropdownMenu aria-labelledby=\"actionsDropdownMenuButton\">\n              <a class=\"dropdown-item\" [translate]=\"'mail_list.all'\" (click)=\"markAllMails(true)\">All</a>\n              <a class=\"dropdown-item\" [translate]=\"'mail_list.read'\" (click)=\"markReadMails()\">Read</a>\n              <a class=\"dropdown-item\" [translate]=\"'mail_list.unread'\" (click)=\"markUnreadMails()\">Unread</a>\n              <a class=\"dropdown-item\" [translate]=\"'mail_list.starred'\" (click)=\"markStarredMails()\">Starred</a>\n              <a class=\"dropdown-item\" [translate]=\"'mail_list.unstarred'\" (click)=\"markUnstarredMails()\">Unstarred</a>\n            </div>\n          </div>\n        </li>\n        <!--refresh button -->\n        <li class=\"px-0\">\n          <a\n            (click)=\"refresh()\"\n            [ngbTooltip]=\"'mail_list.refresh' | translate\"\n            placement=\"top\"\n            class=\"border-right-0 border-radius-0\"\n          >\n            <i class=\"fas fa-redo-alt\"></i>\n          </a>\n        </li>\n        <!-- move to archive -->\n        <li class=\"px-0\" *ngIf=\"mailFolder !== mailFolderTypes.ARCHIVE && !disableMoveTo\">\n          <a\n            class=\"border-right-0 border-radius-right-0\"\n            placement=\"top\"\n            (click)=\"moveToFolder(mailFolderTypes.ARCHIVE)\"\n            [ngbTooltip]=\"'mail_list.move_to_archive' | translate\"\n            [ngClass]=\"{ disabled: noEmailSelected }\"\n          >\n            <i class=\"icon icon-archive\"></i>\n          </a>\n        </li>\n        <!-- move to spam -->\n        <li class=\"pr-0 pl-0 hidden-xs-down\" *ngIf=\"mailFolder !== mailFolderTypes.SPAM && !disableMoveTo\">\n          <a\n            class=\"border-radius-0\"\n            (click)=\"moveToFolder(mailFolderTypes.SPAM)\"\n            placement=\"top\"\n            [ngbTooltip]=\"'mail_list.move_to_spam' | translate\"\n            [ngClass]=\"{ 'border-right-0': mailFolder !== mailFolderTypes.TRASH, disabled: noEmailSelected }\"\n          >\n            <i class=\"icon icon-warning\"></i>\n          </a>\n        </li>\n        <!-- move to trash -->\n        <li class=\"px-0\">\n          <a\n            (click)=\"moveToTrash()\"\n            class=\"border-radius-left-0\"\n            placement=\"top\"\n            [ngbTooltip]=\"\n              mailFolder !== mailFolderTypes.TRASH\n                ? ('mail_list.move_to_trash' | translate)\n                : ('mail_list.permanently_delete' | translate)\n            \"\n            [ngClass]=\"{ disabled: noEmailSelected }\"\n          >\n            <i class=\"icon icon-garbage\"></i>\n          </a>\n        </li>\n        <!-- delete permanently -->\n        <li class=\"px-0\" *ngIf=\"mailFolder === mailFolderTypes.DRAFT\">\n          <a\n            (click)=\"confirmDeleteDraft()\"\n            class=\"border-radius-left-0\"\n            placement=\"top\"\n            [ngbTooltip]=\"'mail_list.permanently_delete' | translate\"\n            [ngClass]=\"{ disabled: noEmailSelected }\"\n          >\n            <i class=\"fa fa-times\"></i>\n          </a>\n        </li>\n        <!-- decrypt all subjects -->\n        <li class=\"pr-0\" *ngIf=\"!userState.settings.is_subject_auto_decrypt\">\n          <a\n            class=\"px-0\"\n            placement=\"top\"\n            (click)=\"onDecryptSubjects()\"\n            ngbTooltip=\"Decrypt all subjects on current page\"\n          >\n            <i class=\"fas fa-unlock-alt\"></i>\n          </a>\n        </li>\n        <!-- more button when mobile version -->\n        <li class=\"btn-dropdown more-xs-options pl-0\" *ngIf=\"isMobile && !disableMoveTo\">\n          <div ngbDropdown autoClose=\"outside\">\n            <button ngbDropdownToggle class=\"border-left-0 border-radius-left-0\" id=\"dropdownMoreOptions\" role=\"button\">\n              <i class=\"icon icon-more\"></i>\n            </button>\n            <div ngbDropdownMenu class=\"mobiledOptionsDropdown\" aria-labelledby=\"dropdownMoreOptions\">\n              <ul class=\"more-xs-options-list\">\n                <li>\n                  <a class=\"disabled\">\n                    <i class=\"icon icon-warning\"></i>\n                  </a>\n                </li>\n                <li class=\"btn-dropdown mailbox-dropdown folders-dropdown\">\n                  <div ngbDropdown>\n                    <button ngbDropdownToggle class=\"disabledx\" id=\"extraOptionsDropdownMenuButton\" role=\"button\">\n                      <i class=\"icon icon-folder\"></i>\n                    </button>\n                    <div ngbDropdownMenu aria-labelledby=\"extraOptionsDropdownMenuButton\">\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.INBOX)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.INBOX\"\n                      >\n                        <i class=\"icon icon-inbox\"></i>\n                        <span [translate]=\"'mail_sidebar.inbox'\">Inbox</span>\n                      </a>\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.DRAFT)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.DRAFT\"\n                      >\n                        <i class=\"icon icon-inbox\"></i>\n                        <span [translate]=\"'mail_sidebar.draft'\">Draft</span>\n                      </a>\n                      <a\n                        class=\"dropdown-item\"\n                        (click)=\"moveToFolder(mailFolderTypes.OUTBOX)\"\n                        *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX\"\n                      >\n                        <i class=\"icon icon-archive\"></i>\n                        <span [translate]=\"'mail_sidebar.outbox'\">Outbox</span>\n                      </a>\n                      <ng-container *ngFor=\"let folder of customFolders; let i = index\">\n                        <a class=\"dropdown-item\" *ngIf=\"mailFolder !== folder.name\" (click)=\"moveToFolder(folder.name)\">\n                          <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n                          <span class=\"folders-list-text\">{{ folder.name }}</span>\n                        </a>\n                      </ng-container>\n                      <span class=\"divider-item d-block\"></span>\n                      <a class=\"dropdown-item\" (click)=\"openCreateFolderDialog()\">\n                        <i class=\"icon icon-folder\"></i>\n                        <span [translate]=\"'mail_list.create_folder'\">Create folder</span>\n                      </a>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n        <!-- Move to Inbox or Custom folders -->\n        <li\n          class=\"btn-dropdown mailbox-dropdown folders-dropdown hidden-xs-down\"\n          *ngIf=\"!noEmailSelected && !disableMoveTo\"\n        >\n          <div ngbDropdown>\n            <button\n              ngbDropdownToggle\n              class=\"disabledx\"\n              id=\"folderDropdownMenuButton\"\n              role=\"button\"\n              placement=\"top\"\n              [ngbTooltip]=\"'mail_list.move_to' | translate\"\n            >\n              <i class=\"icon icon-folder\"></i>\n            </button>\n            <div ngbDropdownMenu aria-labelledby=\"folderDropdownMenuButton\" class=\"folder-dropdown\">\n              <a\n                class=\"dropdown-item\"\n                (click)=\"moveToFolder(mailFolderTypes.INBOX)\"\n                *ngIf=\"mailFolder !== mailFolderTypes.INBOX\"\n              >\n                <i class=\"icon icon-inbox\"></i>\n                <span [translate]=\"'mail_sidebar.inbox'\">Inbox</span>\n              </a>\n              <a\n                class=\"dropdown-item\"\n                (click)=\"moveToFolder(mailFolderTypes.SENT)\"\n                *ngIf=\"mailFolder === mailFolderTypes.INBOX\"\n              >\n                <i class=\"icon icon-paper-plane\"></i>\n                <span [translate]=\"'mail_sidebar.sent'\">Sent</span>\n              </a>\n              <ng-container *ngFor=\"let folder of customFolders; let i = index\">\n                <a class=\"dropdown-item\" *ngIf=\"mailFolder !== folder.name\" (click)=\"moveToFolder(folder.name)\">\n                  <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n                  <span class=\"folders-list-text\">{{ folder.name }}</span>\n                </a>\n              </ng-container>\n              <span class=\"divider-item d-block\"></span>\n              <a class=\"dropdown-item\" (click)=\"openCreateFolderDialog()\">\n                <i class=\"icon icon-folder\"></i>\n                <span [translate]=\"'mail_list.create_folder'\">Create folder</span>\n              </a>\n            </div>\n          </div>\n        </li>\n        <!-- Manage star and read mark of messages -->\n        <li\n          class=\"btn-dropdown mailbox-dropdown mailbox-dropdown-lg more-options-dropdown pl-0\"\n          *ngIf=\"!noEmailSelected && !disableMoveTo\"\n        >\n          <div ngbDropdown class=\"dropdown\">\n            <button\n              ngbDropdownToggle\n              class=\"disabledx\"\n              role=\"button\"\n              id=\"moreOptionsDropdownMenuButton\"\n              [translate]=\"'mail_list.more'\"\n            >\n              More\n            </button>\n            <div id=\"moreOptionsDropdownMenu\" ngbDropdownMenu aria-labelledby=\"moreOptionsDropdownMenuButton\">\n              <a\n                *ngIf=\"isNeedAddStar()\"\n                class=\"dropdown-item\"\n                (click)=\"markAsStarred(true)\"\n                [translate]=\"'mail_list.add_star'\"\n              >\n                Add star\n              </a>\n              <a\n                *ngIf=\"isNeedRemoveStar()\"\n                class=\"dropdown-item\"\n                (click)=\"markAsStarred(false)\"\n                [translate]=\"'mail_list.remove_star'\"\n              >\n                Remove star\n              </a>\n              <a class=\"dropdown-item\" (click)=\"markAsRead()\" [translate]=\"'mail_list.mark_as_read'\"> Mark as read </a>\n              <a class=\"dropdown-item\" (click)=\"markAsRead(false)\" [translate]=\"'mail_list.mark_as_unread'\">\n                Mark as unread\n              </a>\n            </div>\n          </div>\n        </li>\n        <!-- Delete all messages permanently -->\n        <li *ngIf=\"(mailFolder === mailFolderTypes.TRASH || mailFolder === mailFolderTypes.SPAM) && mails?.length > 0\">\n          <a\n            (click)=\"confirmDeleteAll()\"\n            class=\"btn btn-sm delete-permanently-btn\"\n            placement=\"top\"\n            [ngbTooltip]=\"'mail_list.delete_messages' | translate\"\n          >\n            <i class=\"icon icon-garbage position-left\"></i>\n            <span [translate]=\"'mail_list.delete_all'\"> Delete all permanently</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <div class=\"col-sm-3 mailbox-actionbar-col hidden-xs-down\">\n      <div class=\"mail-controls d-flex align-items-center justify-content-end\" *ngIf=\"mails?.length > 0\">\n        <!-- Pagination -->\n        <div class=\"mail-result-text text-muted\">\n          <small\n            >{{ OFFSET + 1 }} - {{ LIMIT > MAX_EMAIL_PAGE_LIMIT - OFFSET ? MAX_EMAIL_PAGE_LIMIT : OFFSET + LIMIT }}\n            <span [translate]=\"'settings.of'\">of</span> {{ MAX_EMAIL_PAGE_LIMIT }}\n          </small>\n        </div>\n        <div class=\"mail-nav-control\">\n          <button\n            [disabled]=\"OFFSET === 0 && MAX_EMAIL_PAGE_LIMIT > OFFSET\"\n            role=\"button\"\n            class=\"mail-nav-control-prev\"\n            ngbTooltip=\"Previous page\"\n            (click)=\"prevPage()\"\n          >\n            <i class=\"icon icon-chevron-left\"></i>\n          </button>\n          <button\n            [disabled]=\"LIMIT > mails.length\"\n            role=\"button\"\n            class=\"mail-nav-control-next\"\n            ngbTooltip=\"Next page\"\n            (click)=\"nextPage()\"\n          >\n            <i class=\"icon icon-chevron-right\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div align=\"center\" *ngIf=\"mailFolder === mailFolderTypes.TRASH || mailFolder === mailFolderTypes.SPAM\">\n    <p class=\"mt-2\">\n      Messages in {{ mailFolder === mailFolderTypes.TRASH ? 'Trash' : 'Spam' }} will be irrecoverably deleted after 30\n      days.\n    </p>\n  </div>\n</div>\n<!-- Select all messages of current folder -->\n<div class=\"mail-check-number\" *ngIf=\"selectAll && MAX_EMAIL_PAGE_LIMIT > LIMIT\">\n  <p *ngIf=\"!checkAll\">\n    All {{ LIMIT > MAX_EMAIL_PAGE_LIMIT - OFFSET ? MAX_EMAIL_PAGE_LIMIT : OFFSET + LIMIT }}\n    conversations on this page are selected.\n    <a (click)=\"selectEntire(true)\">Select all {{ MAX_EMAIL_PAGE_LIMIT }} conversations in {{ folderName }}</a>\n  </p>\n  <p *ngIf=\"checkAll\">\n    All {{ MAX_EMAIL_PAGE_LIMIT }} conversations in {{ folderName }} are selected.\n    <a (click)=\"selectEntire(false)\">Clear selection</a>\n  </p>\n</div>\n<app-progress-bar [active]=\"showProgress\"></app-progress-bar>\n<div class=\"mail-listing mailbox-sub-content\">\n  <div class=\"table-responsive table-hover table-fixed\">\n    <table class=\"table table-inbox\">\n      <tbody>\n        <tr class=\"bg-white text-center\" *ngIf=\"mails?.length === 0 && !showProgress\">\n          <p class=\"py-2 mb-0\" [translate]=\"'mail_list.no_conversations'\">\n            There are no conversations with this label.\n          </p>\n          <hr class=\"mt-0\" />\n        </tr>\n        <!--Desktop view html -->\n        <ng-container *ngIf=\"!isMobile\">\n          <tr\n            class=\"mail-list-row\"\n            *ngFor=\"let mail of mails; let i = index\"\n            [ngClass]=\"{\n              'is-unread':\n                !mail.read &&\n                mailFolder !== mailFolderTypes.DRAFT &&\n                mailFolder !== mailFolderTypes.SENT &&\n                mailFolder !== mailFolderTypes.OUTBOX,\n              'is-read':\n                mail.read &&\n                mailFolder !== mailFolderTypes.DRAFT &&\n                mailFolder !== mailFolderTypes.SENT &&\n                mailFolder !== mailFolderTypes.OUTBOX,\n              'is-selected': mail.marked\n            }\"\n          >\n            <!-- Check box -->\n            <td class=\"mail-checkbox\" (click)=\"toggleEmailSelection(mail)\">\n              <div class=\"fancy-field-group\">\n                <mat-checkbox [checked]=\"mail.marked\" [disableRipple]=\"true\" (click)=\"$event.preventDefault()\">\n                </mat-checkbox>\n              </div>\n            </td>\n            <!-- Starred Message -->\n            <td class=\"mail-status\">\n              <a\n                class=\"mail-status-type\"\n                [ngbTooltip]=\"\n                  (isConversationView ? mail.has_starred_children : mail.starred)\n                    ? ('mail_list.remove_star' | translate)\n                    : ('mail_list.start_message' | translate)\n                \"\n                placement=\"right\"\n                (click)=\"toggleStarred(mail)\"\n                [ngClass]=\"{ 'is-fav': isConversationView ? mail.has_starred_children : mail.starred }\"\n              >\n                <i\n                  class=\"icon icon-star-filled\"\n                  [ngClass]=\"{ 'icon-star': isConversationView ? !mail.has_starred_children : !mail.starred }\"\n                ></i>\n              </a>\n            </td>\n            <!-- Sender Name -->\n            <td class=\"mail-from-name\">\n              <a\n                (click)=\"openMail(mail)\"\n                class=\"text-danger display-emails\"\n                [ngClass]=\"{ 'text-dark': mailFolder !== mailFolderTypes.DRAFT }\"\n              >\n                <ng-container *ngIf=\"mailFolder === mailFolderTypes.DRAFT; else otherFolders\">\n                  <ng-template class=\"text-danger\">\n                    <span [translate]=\"'mail_sidebar.draft'\">Draft</span>\n                  </ng-template>\n                </ng-container>\n                <ng-container #otherFodlers>\n                  <ng-conatiner *ngIf=\"mail.folder === mailFolderTypes.DRAFT; else nonDraftMail\">\n                    <span [translate]=\"'mail_sidebar.draft'\" class=\"text-danger\">Draft</span>\n                  </ng-conatiner>\n                  <ng-template #nonDraftMail>\n                    <label [ngbTooltip]=\"getMailSenderReceiverInfo(mail, true)\" placement=\"right\">{{\n                      getMailSenderReceiverInfo(mail)\n                    }}</label>\n                  </ng-template>\n                  <span *ngIf=\"mail.thread_count > 1 && isConversationView\" class=\"email-child-count\">\n                    ({{ mail.thread_count }})\n                  </span>\n                </ng-container>\n                <span class=\"position-relative\" *ngIf=\"mailFolder !== mailFolderTypes.DRAFT\">\n                  <i\n                    *ngIf=\"mail.last_action_thread\"\n                    class=\"fas fa-{{ mail.last_action_thread | lastAction }} last-action\"\n                  ></i>\n                </span>\n              </a>\n            </td>\n            <!-- Subject -->\n            <td class=\"mail-inbox-message d-md-block\">\n              <a (click)=\"openMail(mail)\" class=\"text-dark\">\n                <span class=\"mail-subject\">\n                  <ng-container *ngIf=\"mailFolder === mailFolderTypes.SENT || mailFolder === mailFolderTypes.INBOX\">\n                    <span class=\"badge badge-warning mr-2 p-1\" *ngIf=\"mail.destruct_date\">\n                      <span [translate]=\"'mail_detail.delete_in'\">Delete in</span>\n                      {{ mail.destruct_date | remainingTime }}\n                    </span>\n                  </ng-container>\n                  <ng-container *ngIf=\"mailFolder === mailFolderTypes.OUTBOX\">\n                    <span\n                      class=\"badge badge-success mr-2 p-1\"\n                      *ngIf=\"mail.delayed_delivery || mail.children_delayed_delivery\"\n                    >\n                      <span [translate]=\"'mail_detail.delay_delivery'\">Delay delivery in</span>\n                      {{\n                        mail.delayed_delivery\n                          ? (mail.delayed_delivery | remainingTime)\n                          : (mail.children_delayed_delivery | remainingTime)\n                      }}\n                    </span>\n                    <span\n                      class=\"badge badge-danger mr-2 p-1\"\n                      *ngIf=\"\n                        !(mail.delayed_delivery || mail.children_delayed_delivery) &&\n                        (mail.dead_man_duration || mail.children_dead_man_duration)\n                      \"\n                      ><span [translate]=\"'mail_detail.dead_mans_timer'\"> Dead mans timer in </span>\n                      {{\n                        mail.dead_man_duration\n                          ? (mail.dead_man_duration | remainingTime: true)\n                          : (mail.children_dead_man_duration | remainingTime: true)\n                      }}\n                    </span>\n                  </ng-container>\n                  <span\n                    id=\"{{ 'subject-scramble-' + mail?.id }}\"\n                    *ngIf=\"mail?.is_subject_encrypted && isSubjectDecrypting(mail?.id)\"\n                  ></span>\n                  <span\n                    class=\"mr-2 p-1 encrypted-subject\"\n                    *ngIf=\"\n                      mail?.is_subject_encrypted &&\n                      !isSubjectDecrypting(mail?.id) &&\n                      (!mail.encryption || !mail.encryption.password_hint)\n                    \"\n                    >...</span\n                  >\n                  <i\n                    class=\"fa fa-key encrypted-subject mr-2 p-1\"\n                    *ngIf=\"\n                      mail?.is_subject_encrypted &&\n                      !isSubjectDecrypting(mail?.id) &&\n                      mail.encryption &&\n                      mail.encryption.password_hint\n                    \"\n                    [ngbTooltip]=\"'mail_list.passwored_encrpted_subject' | translate\"\n                  ></i>\n                  <div class=\"mail-content\">\n                    <ng-container *ngIf=\"!mail.is_subject_encrypted\">{{ mail.subject }}</ng-container>\n                  </div>\n                </span>\n              </a>\n            </td>\n            <!-- Attachment Size -->\n            <td class=\"mail-file-size\">\n              <label\n                *ngIf=\"\n                  mailFolder === mailFolderTypes.SEARCH ||\n                  mailFolder === mailFolderTypes.ALL_EMAILS ||\n                  mailFolder === mailFolderTypes.UNREAD\n                \"\n                class=\"folder-batch\"\n                [style.background]=\"folderColors[mail.folder]\"\n                >{{ mail.folder }}</label\n              >\n              <i class=\"icon icon-attachment\" *ngIf=\"mail.has_attachments || mail.attachments?.length > 0\"></i>\n            </td>\n            <!-- Inbox Date -->\n            <td class=\"mail-sent-date\">\n              <ng-container *ngIf=\"mailFolder === mailFolderTypes.SENT; else createdAt\">\n                {{ mail.sent_at | momentDate: 'mail-list' }}\n              </ng-container>\n              <ng-template #createdAt>\n                <ng-container *ngIf=\"mailFolder !== mailFolderTypes.OUTBOX; else outboxTime\">\n                  {{ mail.created_at | momentDate: 'mail-list' }}</ng-container\n                >\n              </ng-template>\n              <ng-template #outboxTime>\n                <ng-container *ngIf=\"mail.delayed_delivery\"\n                  >{{ mail.delayed_delivery | momentDate: 'mail-list' }}\n                </ng-container>\n                <ng-container *ngIf=\"mail.dead_man_duration\">\n                  <i class=\"fas fa-minus\"></i>\n                </ng-container>\n              </ng-template>\n            </td>\n            <!-- Icon Secured -->\n            <td class=\"mail-security-status fire-wall-protection\">\n              <i\n                *ngIf=\"\n                  mail.encryption_type === 'PGP_INLINE' || mail.encryption_type === 'PGP_MIME';\n                  else fullWallProtection\n                \"\n                class=\"fas fa-lock pgp-encrypted-icon\"\n                ngbTooltip=\"PGP Encrypted Message\"\n              ></i>\n              <ng-template #fullWallProtection>\n                <img\n                  *ngIf=\"\n                    (mail.is_protected || mail.sender === 'support@ctemplar.com') && !userState.settings.is_night_mode;\n                    else fireWallIcon\n                  \"\n                  src=\"assets/images/features-icon/tower.svg\"\n                  width=\"14px\"\n                  [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n                  placement=\"left\"\n                />\n                <ng-template #fireWallIcon>\n                  <i\n                    class=\"fas fa-chess-rook svg-inline--fa\"\n                    *ngIf=\"mail.is_protected || mail.sender === 'support@ctemplar.com'\"\n                    [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n                    placement=\"left\"\n                  ></i>\n                </ng-template>\n              </ng-template>\n            </td>\n            <!-- Icon Secured -->\n            <td class=\"mail-security-status\">\n              <i class=\"icon icon-secured\" [ngbTooltip]=\"'mail_detail.encrypted' | translate\" placement=\"left\"></i>\n            </td>\n          </tr>\n        </ng-container>\n\n        <!--Mobile view html -->\n        <ng-container *ngIf=\"isMobile\">\n          <tr\n            class=\"mail-list-row show-on-mobile\"\n            *ngFor=\"let mail of mails; let i = index\"\n            [ngClass]=\"{\n              'is-unread':\n                !mail.read &&\n                mailFolder !== mailFolderTypes.DRAFT &&\n                mailFolder !== mailFolderTypes.SENT &&\n                mailFolder !== mailFolderTypes.OUTBOX,\n              'is-read':\n                mail.read &&\n                mailFolder !== mailFolderTypes.DRAFT &&\n                mailFolder !== mailFolderTypes.SENT &&\n                mailFolder !== mailFolderTypes.OUTBOX,\n              'is-selected': mail.marked\n            }\"\n          >\n            <td class=\"mail-checkbox\">\n              <div class=\"fancy-field-group\">\n                <input\n                  class=\"d-none fancy-field-control\"\n                  id=\"{{ mail.id }}\"\n                  type=\"checkbox\"\n                  [ngModel]=\"mail.marked\"\n                  (ngModelChange)=\"toggleEmailSelection(mail, $event)\"\n                />\n                <label for=\"{{ mail.id }}\" class=\"fancy-field-empty\"></label>\n              </div>\n            </td>\n            <td class=\"mail-from-name\">\n              <!-- Sender Name -->\n              <a\n                (click)=\"openMail(mail)\"\n                class=\"text-danger display-emails\"\n                [ngClass]=\"{ 'text-dark': mailFolder !== mailFolderTypes.DRAFT }\"\n              >\n                <ng-container *ngIf=\"mailFolder === mailFolderTypes.DRAFT; else otherFolders\">\n                  <ng-template class=\"text-danger\">\n                    <span [translate]=\"'mail_sidebar.draft'\">Draft</span>\n                  </ng-template>\n                </ng-container>\n                <ng-container #otherFodlers>\n                  <ng-conatiner *ngIf=\"mail.folder === mailFolderTypes.DRAFT; else nonDraftMail\">\n                    <span [translate]=\"'mail_sidebar.draft'\" class=\"text-danger\">Draft</span>\n                  </ng-conatiner>\n                  <ng-template #nonDraftMail>\n                    <label [ngbTooltip]=\"getMailSenderReceiverInfo(mail, true)\" placement=\"right\">{{\n                      getMailSenderReceiverInfo(mail)\n                    }}</label>\n                  </ng-template>\n                  <span *ngIf=\"mail.thread_count > 1 && isConversationView\" class=\"email-child-count\">\n                    ({{ mail.thread_count }})\n                  </span>\n                </ng-container>\n              </a>\n              <span class=\"mail-inbox-message d-md-block\">\n                <a (click)=\"openMail(mail)\" class=\"text-dark\">\n                  <span class=\"mail-subject\">\n                    <ng-container *ngIf=\"mailFolder === mailFolderTypes.SENT || mailFolder === mailFolderTypes.INBOX\">\n                      <span class=\"badge badge-warning mr-2 p-1\" *ngIf=\"mail.destruct_date\">\n                        <span [translate]=\"'mail_detail.delete_in'\">Delete in</span>\n                        {{ mail.destruct_date | remainingTime }}\n                      </span>\n                    </ng-container>\n                    <ng-container *ngIf=\"mailFolder === mailFolderTypes.OUTBOX\">\n                      <span class=\"badge badge-success mr-2 p-1\" *ngIf=\"mail.delayed_delivery\">\n                        <span [translate]=\"'mail_detail.delay_delivery'\">Delay delivery in</span>\n                        {{ mail.delayed_delivery | remainingTime }}\n                      </span>\n                      <span class=\"badge badge-danger mr-2 p-1\" *ngIf=\"mail.dead_man_duration\">\n                        <span [translate]=\"'mail_detail.dead_mans_timer'\">Dead mans timer</span>\n                        {{ mail.dead_man_duration | remainingTime: true }}\n                      </span>\n                    </ng-container>\n                    <span\n                      id=\"{{ 'subject-scramble-' + mail?.id }}\"\n                      *ngIf=\"mail?.is_subject_encrypted && isSubjectDecrypting(mail?.id)\"\n                    >\n                    </span>\n                    <span\n                      class=\"mr-2 p-1 encrypted-subject\"\n                      *ngIf=\"\n                        mail?.is_subject_encrypted &&\n                        !isSubjectDecrypting(mail?.id) &&\n                        (!mail.encryption || !mail.encryption.password_hint)\n                      \"\n                      >...</span\n                    >\n                    <i\n                      class=\"fa fa-key encrypted-subject mr-2 p-1\"\n                      *ngIf=\"\n                        mail?.is_subject_encrypted &&\n                        !isSubjectDecrypting(mail?.id) &&\n                        mail.encryption &&\n                        mail.encryption.password_hint\n                      \"\n                      [ngbTooltip]=\"'mail_list.passwored_encrpted_subject' | translate\"\n                    ></i>\n                    <div class=\"mail-content\">\n                      <ng-container *ngIf=\"!mail.is_subject_encrypted\">{{ mail.subject }}</ng-container>\n                    </div>\n                  </span>\n                </a>\n              </span>\n              <span class=\"mail-file-size\">\n                <i class=\"icon icon-attachment\" *ngIf=\"mail.has_attachments\"></i>\n              </span>\n              <span class=\"mail-sent-date\">\n                <ng-container *ngIf=\"mailFolder === mailFolderTypes.SENT; else createdAt\">\n                  {{ mail.sent_at | momentDate: 'mail-list' }}\n                </ng-container>\n                <ng-template #createdAt>{{ mail.created_at | momentDate: 'mail-list' }}</ng-template>\n              </span>\n            </td>\n\n            <!-- Icon Secured -->\n            <td class=\"mail-security-status fire-wall-protection\">\n              <i\n                *ngIf=\"\n                  mail.encryption_type === 'PGP_INLINE' || mail.encryption_type === 'PGP_MIME';\n                  else fullWallProtection\n                \"\n                class=\"fas fa-lock pgp-encrypted-icon\"\n                ngbTooltip=\"PGP Encrypted Message\"\n              ></i>\n              <ng-template #fullWallProtection>\n                <img\n                  *ngIf=\"\n                    (mail.is_protected || mail.sender === 'support@ctemplar.com') && !userState.settings.is_night_mode;\n                    else fireWallIcon\n                  \"\n                  src=\"assets/images/features-icon/tower.svg\"\n                  width=\"14px\"\n                  [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n                  placement=\"left\"\n                />\n                <ng-template #fireWallIcon>\n                  <i\n                    class=\"fas fa-chess-rook svg-inline--fa\"\n                    *ngIf=\"mail.is_protected || mail.sender === 'support@ctemplar.com'\"\n                    [ngbTooltip]=\"'mail_list.4_Wall_Protection' | translate\"\n                    placement=\"left\"\n                  ></i>\n                </ng-template>\n              </ng-template>\n            </td>\n            <!-- Icon Secured -->\n            <td class=\"mail-security-status\">\n              <i class=\"icon icon-secured\" [ngbTooltip]=\"'mail_detail.encrypted' | translate\" placement=\"left\"></i>\n            </td>\n            <td class=\"mail-status\">\n              <a class=\"mail-status-type\" (click)=\"toggleStarred(mail)\" [ngClass]=\"{ 'is-fav': mail.starred }\">\n                <i class=\"icon icon-star-filled\" [ngClass]=\"{ 'icon-star': !mail.starred }\"></i>\n              </a>\n            </td>\n          </tr>\n        </ng-container>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div class=\"mailbox-footer-actionbar\" *ngIf=\"isMobile\">\n  <div class=\"row justify-content-end\">\n    <div class=\"col-12 mailbox-actionbar-col\">\n      <div class=\"mail-controls d-flex align-items-center justify-content-end\">\n        <div class=\"mail-result-text text-muted\">\n          <small>1-{{ mails?.length }} of {{ mails?.length }}</small>\n        </div>\n        <div class=\"mail-nav-control\">\n          <button role=\"button\" class=\"mail-nav-control-prev\">\n            <i class=\"icon icon-chevron-left\"></i>\n          </button>\n          <button role=\"button\" class=\"mail-nav-control-next\">\n            <i class=\"icon icon-chevron-right\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Confirm empty trash modal -->\n<ng-template #confirmEmptyTrashModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\" [translate]=\"'settings.delete_all_message'\">\n        Are you sure, you want to delete all messages in {{ mailFolder === mailFolderTypes.TRASH ? 'trash' : 'spam' }}\n        permanently?\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\" [translate]=\"'common.cancel'\">\n          Cancel\n        </button>\n        <button\n          (click)=\"emptyDeleteAllConfirmed()\"\n          class=\"btn btn-danger btn-sm\"\n          role=\"button\"\n          [translate]=\"'common.delete'\"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm empty trash modal ends -->\n\n<!-- Confirm delete draft modal -->\n<ng-template #delateDraftModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\" [translate]=\"'settings.delete_draft_message'\">\n        Are you sure, you want to delete these messages? This cannot be undone.\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\" [translate]=\"'common.cancel'\">\n          Cancel\n        </button>\n        <button (click)=\"deleteDraft()\" class=\"btn btn-danger btn-sm\" role=\"button\" [translate]=\"'common.delete'\">\n          Delete\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm delete draft modal ends -->\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport {\n  DeleteMail,\n  EmptyFolder,\n  GetMailDetailSuccess,\n  GetMails,\n  GetUnreadMailsCount,\n  MoveMail,\n  RevertMailsMoved,\n  ReadMail,\n  SetCurrentFolder,\n  StarMail,\n} from '../../../../store/actions';\nimport { AppState, MailState, SecureContent, UserState } from '../../../../store/datatypes';\nimport { EmailDisplay, Folder, Mail, MailFolderType } from '../../../../store/models';\nimport { OpenPgpService, SharedService, UsersService } from '../../../../store/services';\nimport { ComposeMailService } from '../../../../store/services/compose-mail.service';\nimport { ClearSearch } from '../../../../store/actions/search.action';\n\ndeclare let Scrambler: (arg0: { target: string; random: number[]; speed: number; text: string }) => void;\n\n@UntilDestroy()\n@Component({\n  selector: 'app-generic-folder',\n  templateUrl: './generic-folder.component.html',\n  styleUrls: ['./generic-folder.component.scss'],\n})\nexport class GenericFolderComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() mails: Mail[] = [];\n\n  @Input() mailFolder: MailFolderType;\n\n  @Input() showProgress: boolean;\n\n  @Input() fetchMails: boolean;\n\n  @ViewChild('confirmEmptyTrashModal') confirmEmptyTrashModal: any;\n\n  @ViewChild('delateDraftModal') delateDraftModal: any;\n\n  @ViewChild('input') input: ElementRef;\n\n  customFolders: Folder[];\n\n  mailFolderTypes = MailFolderType;\n\n  selectAll: boolean;\n\n  checkAll = false;\n\n  noEmailSelected = true;\n\n  isMobile: boolean;\n\n  folderName: string;\n\n  disableMoveTo: boolean;\n\n  userState: UserState;\n\n  MAX_EMAIL_PAGE_LIMIT = 1;\n\n  LIMIT = 20;\n\n  OFFSET = 0;\n\n  PAGE = 0;\n\n  MAX_DECRYPT_NUMBER = 3;\n\n  folderColors: any = {};\n\n  queueForDecryptSubject: any = [];\n\n  isEnabledToDecryptSubject = false;\n\n  private searchText: string;\n\n  private mailState: MailState;\n\n  private isInitialized: boolean;\n\n  private confirmEmptyTrashModalRef: NgbModalRef;\n\n  private delateDraftModalRef: NgbModalRef;\n\n  isDeleteDraftClicked = false;\n\n  isConversationView = true;\n\n  constructor(\n    public store: Store<AppState>,\n    private router: Router,\n    private activatedRoute: ActivatedRoute,\n    private sharedService: SharedService,\n    private composeMailService: ComposeMailService,\n    private cdr: ChangeDetectorRef,\n    private pgpService: OpenPgpService,\n    private authService: UsersService,\n    private modalService: NgbModal,\n  ) {}\n\n  ngOnInit() {\n    /**\n     * Get mail state from store and follow user's actions\n     */\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        this.mailState = mailState;\n        this.showProgress = !mailState.loaded || mailState.inProgress;\n        if (this.fetchMails) {\n          this.MAX_EMAIL_PAGE_LIMIT = mailState.total_mail_count;\n          this.mails = [...mailState.mails];\n          if (this.mails.length > 0) {\n            this.getMailReceiverList();\n          }\n        }\n        if (this.mailState.isMailsMoved) {\n          this.store.dispatch(new RevertMailsMoved());\n          this.refresh();\n        }\n        if (this.isDeleteDraftClicked) {\n          this.isDeleteDraftClicked = false;\n          this.refresh();\n        }\n        this.setIsSelectAll();\n        if (\n          (this.userState && this.userState.settings && this.userState.settings.is_subject_auto_decrypt) ||\n          this.isEnabledToDecryptSubject\n        ) {\n          this.decryptAllSubjects();\n        }\n        this.noEmailSelected = !this.isSomeEmailsSelected();\n      });\n    /**\n     * Get user's settings and custom folders\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.isConversationView =\n          this.userState.settings && !this.userState.settings.is_conversation_mode ? false : true;\n        this.customFolders = user.customFolders;\n        if (this.mailFolder === MailFolderType.SEARCH) {\n          user.customFolders.forEach(folder => {\n            this.folderColors[folder.name] = folder.color;\n          });\n        }\n        if (this.fetchMails && this.userState.settings && user.settings.emails_per_page) {\n          this.LIMIT = user.settings.emails_per_page;\n          if (this.LIMIT && this.mailFolder !== MailFolderType.SEARCH && !this.isInitialized) {\n            this.isInitialized = true;\n            if (this.isNeedFetchMails()) {\n              this.store.dispatch(\n                new GetMails({ limit: user.settings.emails_per_page, offset: this.OFFSET, folder: this.mailFolder }),\n              );\n            }\n            if (this.mailFolder === MailFolderType.OUTBOX) {\n              this.store.dispatch(new GetUnreadMailsCount());\n            }\n          }\n        }\n      });\n    // Search by search text\n    if (this.mailFolder === MailFolderType.SEARCH) {\n      this.activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe(parameters => {\n        if (parameters.search) {\n          this.searchText = parameters.search;\n          this.store.dispatch(\n            new GetMails({\n              forceReload: true,\n              searchText: this.searchText,\n              limit: this.LIMIT,\n              offset: this.OFFSET,\n              folder: this.mailFolder,\n            }),\n          );\n        }\n      });\n    }\n    /**\n     * Activated router management\n     */\n    this.activatedRoute.paramMap.pipe(untilDestroyed(this)).subscribe((parametersMap: any) => {\n      const { params } = parametersMap;\n      if (params) {\n        if (params.page) {\n          const page = +params.page;\n          if (page !== this.PAGE + 1) {\n            this.PAGE = page > 0 ? page - 1 : 0;\n            this.OFFSET = this.PAGE * this.LIMIT;\n            this.refresh();\n          }\n        }\n        if (params.folder) {\n          this.mailFolder = params.folder as MailFolderType;\n          this.disableMoveTo = this.mailFolder === MailFolderType.OUTBOX || this.mailFolder === MailFolderType.DRAFT;\n          this.store.dispatch(new SetCurrentFolder(this.mailFolder));\n          if (this.mailFolder !== MailFolderType.SEARCH) {\n            this.store.dispatch(new ClearSearch());\n          }\n        }\n      }\n    });\n    this.isMobile = window.innerWidth <= 768; // handle as mobile when window width is less than 768px\n    this.folderName = this.mailFolder.charAt(0).toUpperCase() + this.mailFolder.slice(1);\n\n    window.removeEventListener('beforeunload', this.authService.onBeforeLoader, true);\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    this.isMobile = window.innerWidth <= 768;\n  }\n\n  ngAfterViewInit() {\n    this.cdr.detectChanges();\n  }\n\n  refresh() {\n    this.store.dispatch(\n      new GetMails({\n        forceReload: true,\n        limit: this.LIMIT,\n        offset: this.OFFSET,\n        folder: this.mailFolder,\n        searchText: this.searchText,\n      }),\n    );\n    this.store.dispatch(new GetUnreadMailsCount());\n  }\n\n  getMailReceiverList() {\n    this.mails.forEach(mail => {\n      if (mail.receiver_display.length > 1) {\n        mail.receiver_list = '';\n        mail.receiver_display.forEach((item: EmailDisplay) => {\n          if (mail.sender !== item.email && item.name) {\n            const nameToCombine = item.name !== item.email.split('@')[0] ? item.name : item.email;\n            if (mail.receiver_list === '') {\n              mail.receiver_list = nameToCombine;\n            } else {\n              mail.receiver_list += `, ${nameToCombine}`;\n            }\n          }\n        });\n      } else {\n        mail.receiver_list = mail.receiver_display.map((item: EmailDisplay) => item.name).join(', ');\n      }\n    });\n  }\n\n  selectEntire(status: boolean) {\n    if (status) {\n      this.checkAll = true;\n    } else {\n      this.checkAll = false;\n      this.markAllMails(false);\n    }\n  }\n\n  markAllMails(checkAll: boolean) {\n    if (checkAll && !this.isSomeEmailsSelected()) {\n      this.mails.forEach(mail => {\n        mail.marked = true;\n      });\n      this.noEmailSelected = false;\n    } else {\n      this.mails.forEach(mail => {\n        mail.marked = false;\n      });\n      this.noEmailSelected = true;\n      this.checkAll = false;\n    }\n\n    setTimeout(() => {\n      this.setIsSelectAll();\n    }, 5);\n  }\n\n  isSomeEmailsSelected() {\n    const count = this.mails.filter(mail => mail.marked).length;\n    return count > 0 && count <= this.mails.length;\n  }\n\n  markAsRead(isRead = true) {\n    // Get comma separated list of mail IDs\n    const ids = this.getMailIDs();\n    if (ids) {\n      // Dispatch mark as read event to store\n      this.store.dispatch(new ReadMail({ ids, read: isRead, folder: this.mailFolder }));\n    }\n  }\n\n  toggleStarred(mail: Mail) {\n    this.store.dispatch(\n      new StarMail({\n        ids: mail.id.toString(),\n        starred: !mail.has_starred_children,\n        folder: this.mailFolder,\n        withChildren: true,\n      }),\n    );\n  }\n\n  markAsStarred(starred = true) {\n    // Get comma separated list of mail IDs\n    const ids = this.getMailIDs();\n    if (ids) {\n      // Dispatch mark as starred event to store\n      this.store.dispatch(new StarMail({ ids, starred, folder: this.mailFolder, withChildren: true }));\n    }\n  }\n\n  isNeedRemoveStar() {\n    if (this.getMarkedMails()) {\n      const starred_mails = this.getMarkedMails().filter(mail => mail.starred) || [];\n      if (starred_mails.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  isNeedAddStar() {\n    if (this.getMarkedMails()) {\n      const starred_mails = this.getMarkedMails().filter(mail => mail.starred) || [];\n      if (starred_mails.length === this.getMarkedMails().length) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  moveToTrash() {\n    if (this.mailFolder === MailFolderType.TRASH) {\n      const ids = this.getMailIDs();\n      // Dispatch permanent delete mails event.\n      if (ids) {\n        this.store.dispatch(new DeleteMail({ ids, folder: this.mailFolder }));\n        this.isDeleteDraftClicked = true;\n      }\n    } else {\n      this.moveToFolder(MailFolderType.TRASH);\n    }\n  }\n\n  onDecryptSubjects() {\n    if (!this.isEnabledToDecryptSubject) {\n      this.isEnabledToDecryptSubject = true;\n      this.decryptAllSubjects();\n    }\n  }\n\n  decryptAllSubjects() {\n    this.queueForDecryptSubject = this.queueForDecryptSubject.filter((decryptingMail: number) => {\n      // Item on queue would be removed when the following condition is matched\n      // 1. decrypting is finished\n      // 2. mail doesn't be existed on mail list\n      // 3. mail (parent, if conversation mode) is encrypted with password\n      let isExistMatchMail = false;\n      for (let i = 0; i < this.mails.length; i++) {\n        const mail = this.mails[i];\n        if (mail.id === decryptingMail) {\n          isExistMatchMail = true;\n          if (!mail.is_subject_encrypted) {\n            return false;\n          }\n          if (mail.encryption && mail.encryption.password_hint) {\n            return false;\n          }\n        }\n      }\n      return isExistMatchMail;\n    });\n    for (let i = 0; i < this.mails.length; i++) {\n      if (this.queueForDecryptSubject.length < this.MAX_DECRYPT_NUMBER) {\n        const mail = this.mails[i];\n        if (\n          mail.is_subject_encrypted &&\n          !(mail.encryption && mail.encryption.password_hint) &&\n          !this.queueForDecryptSubject.includes(mail.id)\n        ) {\n          this.processDecryptSubject(mail.id);\n          this.queueForDecryptSubject.push(mail.id);\n          this.scrambleText(mail.id);\n        }\n      } else {\n        break;\n      }\n    }\n  }\n\n  isSubjectDecrypting(mailID: number) {\n    const queuedMail = this.queueForDecryptSubject.filter((mail: number) => mail === mailID);\n    return queuedMail.length > 0;\n  }\n\n  processDecryptSubject(mailId: number) {\n    const mailToDecrypt = this.mails.find(mail => {\n      return mail.id === mailId;\n    });\n    if (mailToDecrypt) {\n      setTimeout(() => {\n        this.pgpService.decrypt(mailToDecrypt.mailbox, mailToDecrypt.id, new SecureContent(mailToDecrypt), true);\n      }, 10);\n    }\n  }\n\n  confirmDeleteAll() {\n    this.confirmEmptyTrashModalRef = this.modalService.open(this.confirmEmptyTrashModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  emptyDeleteAllConfirmed() {\n    this.store.dispatch(new EmptyFolder({ folder: this.mailFolder }));\n    this.confirmEmptyTrashModalRef.dismiss();\n  }\n\n  confirmDeleteDraft() {\n    this.delateDraftModalRef = this.modalService.open(this.delateDraftModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  deleteDraft() {\n    const ids = this.getMailIDs();\n    // Dispatch permanent delete mails event.\n    if (ids) {\n      this.store.dispatch(new DeleteMail({ ids, folder: this.mailFolder }));\n    }\n    this.delateDraftModalRef.dismiss();\n    this.isDeleteDraftClicked = true;\n  }\n\n  openMail(mail: Mail) {\n    if (this.mailFolder === MailFolderType.DRAFT && !mail.has_children) {\n      this.composeMailService.openComposeMailDialog({\n        draft: mail,\n        isFullScreen: this.userState.settings.is_composer_full_screen,\n      });\n    } else {\n      // change sender display before to open mail detail, because this sender display was for last child.\n      // TODO should be regression test for this part for sender_display_name\n      this.store.dispatch(\n        new GetMailDetailSuccess({ ...mail, sender_display: { name: mail.sender, email: mail.sender } }),\n      );\n      const queryParams: any = {};\n      if (this.mailFolder === MailFolderType.SEARCH && this.searchText) {\n        queryParams.search = this.searchText;\n      }\n      this.router.navigate([`/mail/${this.mailFolder}/page/${this.PAGE + 1}/message/`, mail.id], { queryParams });\n    }\n  }\n\n  /**\n   * @description\n   * Prime Users - Can create as many folders as they want\n   * Free Users - Only allow a maximum of 5 folders per account\n   */\n  openCreateFolderDialog() {\n    this.sharedService.openCreateFolderDialog(this.userState.isPrime, this.customFolders, {\n      self: this,\n      method: 'moveToFolder',\n    });\n  }\n\n  /**\n   * @name moveToFolder\n   * @description Move mails to selected folder type\n   * @param {MailFolderType} folder\n   */\n  moveToFolder(folder: string) {\n    const ids = this.getMailIDs();\n    if (ids) {\n      // Dispatch move to selected folder event\n      this.store.dispatch(\n        new MoveMail({\n          ids,\n          folder,\n          sourceFolder: this.mailFolder,\n          mail: this.getMarkedMails(),\n          allowUndo: true,\n          fromTrash: this.mailFolder === MailFolderType.TRASH,\n        }),\n      );\n    }\n  }\n\n  markReadMails() {\n    let isExist = false;\n    this.mails.forEach(mail => {\n      mail.marked = mail.read;\n      isExist = !isExist && mail.read ? true : isExist;\n    });\n    this.noEmailSelected = !isExist;\n    this.setIsSelectAll();\n  }\n\n  markUnreadMails() {\n    let isExist = false;\n    this.mails.forEach(mail => {\n      mail.marked = !mail.read;\n      isExist = !isExist && mail.marked ? true : isExist;\n    });\n    this.noEmailSelected = !isExist;\n    this.setIsSelectAll();\n  }\n\n  markStarredMails() {\n    let isExist = false;\n    this.mails.forEach(mail => {\n      mail.marked = mail.has_starred_children;\n      isExist = !isExist && mail.marked ? true : isExist;\n    });\n    this.noEmailSelected = !isExist;\n    this.setIsSelectAll();\n  }\n\n  markUnstarredMails() {\n    let isExist = false;\n    this.mails.forEach(mail => {\n      mail.marked = !mail.has_starred_children;\n      isExist = !isExist && mail.marked ? true : isExist;\n    });\n    this.noEmailSelected = !isExist;\n    this.setIsSelectAll();\n  }\n\n  setIsSelectAll() {\n    if (this.mails.length === 0) {\n      this.selectAll = false;\n      return;\n    }\n    this.selectAll = this.mails.filter(mail => mail.marked).length === this.mails.length;\n  }\n\n  prevPage() {\n    if (this.PAGE > 0) {\n      this.PAGE--;\n      this.OFFSET = this.PAGE * this.LIMIT;\n      this.store.dispatch(\n        new GetMails({\n          inProgress: true,\n          limit: this.LIMIT,\n          searchText: this.searchText,\n          offset: this.OFFSET,\n          folder: this.mailFolder,\n        }),\n      );\n      this.router.navigateByUrl(`/mail/${this.mailFolder}/page/${this.PAGE + 1}`);\n    }\n  }\n\n  nextPage() {\n    if ((this.PAGE + 1) * this.LIMIT < this.MAX_EMAIL_PAGE_LIMIT) {\n      this.OFFSET = (this.PAGE + 1) * this.LIMIT;\n      this.PAGE++;\n      this.store.dispatch(\n        new GetMails({\n          inProgress: true,\n          limit: this.LIMIT,\n          searchText: this.searchText,\n          offset: this.OFFSET,\n          folder: this.mailFolder,\n        }),\n      );\n      this.router.navigateByUrl(`/mail/${this.mailFolder}/page/${this.PAGE + 1}`);\n    }\n  }\n\n  // display scrambler while decrypt mail id\n  scrambleText(mailId: number) {\n    setTimeout(() => {\n      Scrambler({\n        target: `#subject-scramble-${mailId}`,\n        random: [1000, 120000],\n        speed: 70,\n        text: 'A7gHc6H66A9SAQfoBJDq4C7',\n      });\n    }, 100);\n  }\n\n  toggleEmailSelection(mail: any) {\n    mail.marked = !mail.marked;\n    if (mail.marked) {\n      this.noEmailSelected = false;\n    } else if (this.mails.filter(email => email.marked).length > 0) {\n      this.noEmailSelected = false;\n    } else {\n      this.noEmailSelected = true;\n    }\n    this.setIsSelectAll();\n  }\n\n  /**\n   * @name getMailIDs\n   * @description Get list of comma separated IDs from mail object list\n   * @returns {string} Comma separated IDs\n   */\n  private getMailIDs() {\n    const allString = 'all';\n    let markedMails = this.getMarkedMails();\n    if (markedMails.length === this.LIMIT && this.checkAll) {\n      return allString;\n    } else {\n      return this.getMarkedMails()\n        .map(mail => mail.id)\n        .join(',');\n    }\n  }\n\n  getMarkedMails() {\n    return this.mails.filter(mail => mail.marked);\n  }\n\n  /**\n   * @name isNeedFetchMails\n   * @description Decide to fetch the mails from the backend by checking the deicated folder is existed [store->mailState->folders]\n   * @returns {boolean} Boolean value that the mails is existed for the current folder on Store\n   */\n  private isNeedFetchMails() {\n    const curFolderMap = this.mailState.folderMap.get(this.mailFolder);\n    if (curFolderMap && (curFolderMap.is_not_first_page || curFolderMap.is_dirty)) {\n      return true;\n    }\n    if (!curFolderMap || !curFolderMap.mails || curFolderMap.mails.length === 0) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @name getMailSenderReceiverInfo\n   * @description Function to get tooltip, receiver, sender info.\n   * @params Mail, isToolTip\n   * @returns {String} The list of email or name for sender, receiver\n   */\n  getMailSenderReceiverInfo(mail: Mail, isTooltip = false) {\n    let info = '';\n    if (this.mailFolder === this.mailFolderTypes.DRAFT) {\n      info = 'Draft';\n    } else if (this.mailFolder === this.mailFolderTypes.INBOX) {\n      info = isTooltip\n        ? mail.sender_display_name\n          ? mail.sender_display_name\n          : mail.sender_display.email\n        : mail.sender_display_name\n        ? mail.sender_display_name\n        : mail.sender_display.name;\n    } else if (this.mailFolder === this.mailFolderTypes.SENT || this.mailFolder === this.mailFolderTypes.OUTBOX) {\n      info = mail.receiver_list;\n    } else {\n      // For Search, All Emails, Custom Folders\n      switch (mail.folder) {\n        case MailFolderType.INBOX:\n          info = isTooltip\n            ? mail.sender_display_name\n              ? mail.sender_display_name\n              : mail.sender_display.email\n            : mail.sender_display_name\n            ? mail.sender_display_name\n            : mail.sender_display.name;\n          break;\n\n        case MailFolderType.SENT:\n        case MailFolderType.OUTBOX:\n          info = mail.receiver_list;\n          break;\n\n        case MailFolderType.DRAFT:\n          info = 'Draft';\n          break;\n\n        default:\n          if (mail.send) {\n            info = mail.receiver_list;\n          } else {\n            info = isTooltip\n              ? mail.sender_display_name\n                ? mail.sender_display_name\n                : mail.sender_display.email\n              : mail.sender_display_name\n              ? mail.sender_display_name\n              : mail.sender_display.name;\n          }\n          break;\n      }\n    }\n    return info;\n  }\n\n  ngOnDestroy() {}\n}\n","<div [ngSwitch]=\"mailFolder\">\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.INBOX\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.INBOX\">\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.DRAFT\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.DRAFT\">\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.TRASH\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.TRASH\">\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.SENT\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.SENT\">\n  </app-generic-folder>\n  <app-generic-folder\n    *ngSwitchCase=\"mailFolderTypes.STARRED\"\n    [fetchMails]=\"true\"\n    [mailFolder]=\"mailFolderTypes.STARRED\"\n  >\n  </app-generic-folder>\n  <app-generic-folder\n    *ngSwitchCase=\"mailFolderTypes.ARCHIVE\"\n    [fetchMails]=\"true\"\n    [mailFolder]=\"mailFolderTypes.ARCHIVE\"\n  >\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.SPAM\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.SPAM\">\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.OUTBOX\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.OUTBOX\">\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.UNREAD\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.UNREAD\">\n  </app-generic-folder>\n  <app-generic-folder\n    *ngSwitchCase=\"mailFolderTypes.ALL_EMAILS\"\n    [fetchMails]=\"true\"\n    [mailFolder]=\"mailFolderTypes.ALL_EMAILS\"\n  >\n  </app-generic-folder>\n  <app-generic-folder *ngSwitchCase=\"mailFolderTypes.SEARCH\" [fetchMails]=\"true\" [mailFolder]=\"mailFolderTypes.SEARCH\">\n  </app-generic-folder>\n  <ng-container *ngFor=\"let folder of customFolders\">\n    <app-generic-folder *ngSwitchCase=\"folder.name\" [fetchMails]=\"true\" [mailFolder]=\"folder.name\"></app-generic-folder>\n  </ng-container>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, UserState } from '../../store/datatypes';\nimport { Folder, MailFolderType } from '../../store/models';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-list',\n  templateUrl: './mail-list.component.html',\n  styleUrls: ['./mail-list.component.scss'],\n})\nexport class MailListComponent implements OnInit {\n  mailFolder: string = MailFolderType.INBOX;\n\n  mailFolderTypes = MailFolderType;\n\n  customFolders: Folder[] = [];\n\n  private page = 1;\n\n  constructor(public route: ActivatedRoute, private store: Store<AppState>) {}\n\n  ngOnInit() {\n    /**\n     * Get current folder and page from route\n     * Default value: folder = Inbox, page = 1\n     */\n    this.route.params.pipe(untilDestroyed(this)).subscribe(parameters => {\n      this.mailFolder = parameters.folder as MailFolderType;\n      this.page = +parameters.page;\n    });\n\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.customFolders = user.customFolders;\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthGuard } from '../store/services';\n\nimport { MailComponent } from './mail.component';\nimport { MailSettingsComponent } from './mail-settings/mail-settings.component';\nimport { MailDetailComponent } from './mail-detail/mail-detail.component';\nimport { MailListComponent } from './mail-list/mail-list.component';\nimport { MailContactComponent } from './mail-contact/mail-contact.component';\n\nconst routes: Routes = [\n  {\n    path: 'mail',\n    component: MailComponent,\n    canActivate: [AuthGuard],\n    children: [\n      { path: '', redirectTo: 'inbox/page/1', pathMatch: 'full' },\n      { path: 'settings', component: MailSettingsComponent },\n      { path: 'settings/:id', component: MailSettingsComponent },\n      { path: 'contacts', component: MailContactComponent },\n      { path: ':folder/page/:page', component: MailListComponent },\n      { path: ':folder/page/:page/message/:id', component: MailDetailComponent },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MailRoutingModule {}\n","<!-- Signature Section -->\n<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.signature'\">Signature</strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.keys.email_address'\"> E-mail address </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"btn-dropdown btn-dropdown-select\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  ngbDropdownToggle\n                  class=\"dropdown-toggle\"\n                  id=\"signatureEmailAddressDropdownMenuButton\"\n                  role=\"button\"\n                >\n                  {{ selectedMailboxForSignature?.email }}\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"signatureEmailAddressDropdownMenuButton\">\n                  <a\n                    class=\"dropdown-item\"\n                    *ngFor=\"let mailbox of mailboxes\"\n                    (click)=\"selectedMailboxForSignature = mailbox\"\n                    >{{ mailbox.email }}</a\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <ng-container *ngIf=\"selectedMailboxForSignature\">\n        <div class=\"form-content-row\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-sm-3\">\n              <label for=\"displayName\" class=\"form-label mb-sm-0\" [translate]=\"'settings.display_name'\">\n                Display name\n              </label>\n            </div>\n            <div class=\"col-sm-7 col-md-5\">\n              <input\n                class=\"form-control form-control-sm\"\n                id=\"displayName\"\n                type=\"text\"\n                maxlength=\"32\"\n                [value]=\"selectedMailboxForSignature.display_name\"\n                (change)=\"updateMailboxSettings(selectedMailboxForSignature, 'display_name', $event.target.value)\"\n                [placeholder]=\"'settings.display_name' | translate\"\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"form-content-row\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-sm-3\">\n              <label for=\"signature\" class=\"form-label mb-sm-0\" [translate]=\"'settings.signature'\"> Signature </label>\n            </div>\n            <div class=\"col\">\n              <quill-editor\n                id=\"signature\"\n                [ngModel]=\"selectedMailboxForSignature.signature\"\n                (ngModelChange)=\"onSignatureChange($event)\"\n                [modules]=\"quillModules\"\n                (onBlur)=\"signatureFocused(false)\"\n                (onFocus)=\"signatureFocused(true)\"\n                [disabled]=\"!userState.isPrime\"\n                [ngbTooltip]=\"!userState.isPrime && ('settings.upgrade_to_paid' | translate)\"\n              >\n              </quill-editor>\n            </div>\n          </div>\n        </div>\n      </ng-container>\n\n      <!-- Will be used later -->\n      <div class=\"form-content-row\" *ngIf=\"false\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.load_embedded_content'\">\n              Load embedded content\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"embeddedContentField1\"\n                    name=\"[6]\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('embed_content', true)\"\n                    [checked]=\"settings?.embed_content\"\n                  />\n                  <label for=\"embeddedContentField1\" [translate]=\"'common.yes'\">Yes</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"embeddedContentField2\"\n                    name=\"[6]\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('embed_content', false)\"\n                    [checked]=\"!settings?.embed_content\"\n                  />\n                  <label for=\"embeddedContentField2\" [translate]=\"'common.no'\">No</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"embeddedContentField3\"\n                    name=\"[6]\"\n                    type=\"radio\"\n                    disabled\n                  />\n                  <label for=\"embeddedContentField3\" [translate]=\"'settings.only_images'\"> Only images </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Will be used later -->\n      <div class=\"form-content-row\" *ngIf=\"false\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.show_snippets'\"> Show snippets </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"showSnippetsField1\"\n                    name=\"[7]\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('show_snippets', true)\"\n                    [checked]=\"settings?.show_snippets\"\n                  />\n                  <label for=\"showSnippetsField1\" [translate]=\"'common.yes'\">Yes</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"showSnippetsField2\"\n                    name=\"[7]\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('show_snippets', false)\"\n                    [checked]=\"!settings?.show_snippets\"\n                  />\n                  <label for=\"showSnippetsField2\" [translate]=\"'common.no'\">No</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!-- Aliases Section -->\n<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.addresses'\">Aliases</strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <div class=\"mb-3 row\">\n        <div class=\"col-6\">\n          <button\n            type=\"button\"\n            *ngIf=\"mailboxes?.length < settings?.email_count\"\n            (click)=\"onAddNewAddress()\"\n            class=\"btn btn-sm btn-secondary\"\n          >\n            <span [translate]=\"'settings.add_address'\">Add Alias</span>\n          </button>\n        </div>\n        <div class=\"col-6 text-right\">\n          <button\n            class=\"btn btn-sm btn-secondary\"\n            (click)=\"startReorder()\"\n            *ngIf=\"!reorder && mailboxes?.length > 1\"\n            [ngbTooltip]=\"'settings.reorder_addresses' | translate\"\n            [translate]=\"'settings.reorder'\"\n          >\n            Reorder Aliases\n          </button>\n        </div>\n      </div>\n      <ul class=\"ui-list ui-list-styled list-styled addresses-list\">\n        <li *ngIf=\"newAddressOptions.isAddingNew\" class=\"ui-list-item ui-list-item-xs-full\">\n          <form class=\"signup-form\" [formGroup]=\"newAddressForm\" #form=\"ngForm\">\n            <div class=\"row row-xs align-items-center\">\n              <div class=\"col-sm-10\">\n                <div class=\"form-group mb-0\">\n                  <div\n                    class=\"form-inline userame-field-group\"\n                    [ngClass]=\"{\n                      'is-validate':\n                        newAddressForm.controls.username.invalid &&\n                        (newAddressForm.controls.username.touched || newAddressOptions.isSubmitted)\n                    }\"\n                  >\n                    <input\n                      class=\"form-control text-dark mb-3 mb-sm-0\"\n                      id=\"new-address-username\"\n                      [placeholder]=\"'create_account.choose_username' | translate\"\n                      type=\"text\"\n                      name=\"username\"\n                      formControlName=\"username\"\n                    />\n                    <span class=\"domain-separator text-center text-dark\">@</span>\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"dropdown-toggle custom-domains-dropdown\"\n                          id=\"custom-domains\"\n                          role=\"button\"\n                        >\n                          <div>{{ newAddressForm.get('domain').value }}</div>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"signatureEmailAddressDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item\"\n                            *ngFor=\"let customDomain of customDomains\"\n                            (click)=\"onDomainChange(customDomain)\"\n                          >\n                            {{ customDomain }}\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                    <ng-container *ngIf=\"newAddressOptions.isBusy || mailBoxesState?.inProgress; else showIcons\">\n                      <app-loading-spinner [showSpinner]=\"true\"></app-loading-spinner>\n                    </ng-container>\n                    <ng-template #showIcons>\n                      <i\n                        class=\"fas fa-check green\"\n                        *ngIf=\"\n                          newAddressOptions.usernameExists === false && !newAddressForm.controls['username'].errors\n                        \"\n                      ></i>\n                      <i\n                        class=\"fas fa-times text-danger\"\n                        *ngIf=\"\n                          newAddressOptions.usernameExists === true ||\n                          (newAddressForm.controls['username'].errors &&\n                            newAddressForm.controls['username'].touched &&\n                            newAddressOptions.isSubmitted)\n                        \"\n                      ></i>\n                    </ng-template>\n                  </div>\n                  <ng-container\n                    *ngIf=\"\n                      newAddressForm.controls['username'].errors &&\n                        (newAddressForm.controls['username'].touched || newAddressOptions.isSubmitted);\n                      else usernameExistsBlock\n                    \"\n                  >\n                    <span\n                      class=\"validate-message\"\n                      *ngIf=\"newAddressForm.controls['username'].errors; else usernameRequiredError\"\n                    >\n                      <ng-container\n                        *ngIf=\"newAddressForm.controls['username'].errors.pattern; else usernameLengthBlock\"\n                      >\n                        <span [translate]=\"'settings.username_allowed_chars'\">\n                          The username must start with a letter and end with a letter or number.It may only contain\n                        </span>\n                        <em>a-z</em>, <em>A-Z</em>, <em>0-9</em> or <em>._-</em>\n                        <span\n                          [translate]=\"'settings.username_minlen'\"\n                          *ngIf=\"!isCustomDomainSelected; else customDomainsUserNameMinLenBlock\"\n                        >\n                          characters, and minimum length is 2 characters.\n                        </span>\n                        <ng-template #customDomainsUserNameMinLenBlock>\n                          <span>characters, and minimum length is 1 character.</span>\n                        </ng-template>\n                      </ng-container>\n                      <ng-template #usernameLengthBlock>\n                        <ng-container\n                          *ngIf=\"\n                            newAddressForm.controls['username'].errors.minlength ||\n                            newAddressForm.controls['username'].errors.maxlength\n                          \"\n                        >\n                          <span\n                            [translate]=\"'settings.username_chars'\"\n                            *ngIf=\"!isCustomDomainSelected; else customDomainsUserNameLenBlock\"\n                          >\n                            The username must be between 2 and 64 characters.\n                          </span>\n                          <ng-template #customDomainsUserNameLenBlock>\n                            <span>The username must be between 1 and 64 characters.</span>\n                          </ng-template>\n                        </ng-container>\n                      </ng-template>\n                    </span>\n                    <ng-template #usernameRequiredError>\n                      <span class=\"validate-message\" [translate]=\"'settings.username_required'\">\n                        The username is required.\n                      </span>\n                    </ng-template>\n                  </ng-container>\n                  <ng-template #usernameExistsBlock>\n                    <span\n                      *ngIf=\"newAddressOptions.usernameExists === true\"\n                      class=\"validate-message\"\n                      [translate]=\"'settings.alias_exist'\"\n                    >\n                      Email alias already exists.\n                    </span>\n                  </ng-template>\n                </div>\n              </div>\n              <div class=\"col-sm-2\">\n                <ul class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\">\n                  <li>\n                    <button\n                      class=\"btn-link cursor-pointer\"\n                      (click)=\"submitNewAddress()\"\n                      [disabled]=\"newAddressOptions.isBusy\"\n                    >\n                      <span [translate]=\"'settings.add'\">Add</span>\n                    </button>\n                  </li>\n                  <li>\n                    <button\n                      type=\"button\"\n                      class=\"btn-link p-0\"\n                      (click)=\"onDiscardNewAddress()\"\n                      role=\"button\"\n                      [disabled]=\"newAddressOptions.isBusy\"\n                    >\n                      <i class=\"icon icon-garbage\"></i>\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </form>\n        </li>\n        <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let mailbox of mailboxes; let i = index\">\n          <div class=\"row row-xs align-items-center\">\n            <div class=\"col-10 col-sm-8\">\n              <div class=\"form-label text-dark mb-0\">\n                {{ mailbox.email }}\n                <span *ngIf=\"mailbox.is_default\" class=\"badge badge-default\" [translate]=\"'settings.primary'\">\n                  Primary\n                </span>\n                <span *ngIf=\"!mailbox.is_enabled\" class=\"badge badge-danger\" [translate]=\"'common.disabled'\">\n                  Disabled\n                </span>\n              </div>\n            </div>\n            <div class=\"col-2 col-sm-4 row\">\n              <div class=\"col\" align=\"right\" *ngIf=\"reorder\">\n                <i\n                  class=\"fas fa-chevron-up cursor-pointer mr-2\"\n                  [class.hidden]=\"i === 0\"\n                  [ngbTooltip]=\"'settings.move_up' | translate\"\n                  (click)=\"sortUp(i)\"\n                >\n                </i>\n                <i\n                  class=\"fas fa-chevron-down cursor-pointer\"\n                  [class.hidden]=\"i === mailboxes.length - 1\"\n                  [ngbTooltip]=\"'settings.move_down' | translate\"\n                  (click)=\"sortDown(i)\"\n                >\n                </i>\n              </div>\n              <ul\n                *ngIf=\"!reorder && !mailbox.inProgress\"\n                class=\"col setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\"\n              >\n                <li *ngIf=\"false\">\n                  <button type=\"button\" role=\"button\" class=\"btn-link\" (click)=\"updateDefaultEmailAddress(mailbox)\">\n                    <span [translate]=\"'settings.make_default'\">Make Default</span>\n                  </button>\n                </li>\n                <li *ngIf=\"mailbox.is_enabled && !mailbox.is_default\">\n                  <button\n                    type=\"button\"\n                    role=\"button\"\n                    class=\"btn-link\"\n                    (click)=\"updateMailboxSettings(mailbox, 'is_enabled', false)\"\n                  >\n                    <span [translate]=\"'settings.disable'\">Disable</span>\n                  </button>\n                </li>\n                <li *ngIf=\"!mailbox.is_enabled\">\n                  <button\n                    type=\"button\"\n                    role=\"button\"\n                    class=\"btn-link\"\n                    (click)=\"updateMailboxSettings(mailbox, 'is_enabled', true)\"\n                  >\n                    <span [translate]=\"'settings.enable'\">Enable</span>\n                  </button>\n                </li>\n                <li>\n                  <button type=\"button\" role=\"button\" class=\"btn-link\" (click)=\"onSetAutocrypt(mailbox)\">\n                    <span>Autocrypt</span>\n                  </button>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n      <div align=\"right\" *ngIf=\"reorder\">\n        <app-loading-spinner [showSpinner]=\"reorderInProgress\"></app-loading-spinner>\n        <button class=\"btn btn-sm btn-primary mr-1\" [disabled]=\"reorderInProgress\" (click)=\"cancelOrder()\">\n          <span [translate]=\"'common.cancel'\">Cancel</span>\n        </button>\n        <button class=\"btn btn-sm btn-secondary\" [disabled]=\"reorderInProgress\" (click)=\"saveOrder()\">\n          <span [translate]=\"'settings.save_order'\">Save order</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!-- Keys Section -->\n<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.keys.name'\">Keys</strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <div class=\"mb-3 row\">\n        <div class=\"col-6\">\n          <button type=\"button\" (click)=\"onAddNewKey()\" class=\"btn btn-sm btn-secondary\">\n            <span>Add New Key</span>\n          </button>\n          <button type=\"button\" (click)=\"onImportKey()\" class=\"btn btn-sm btn-secondary ml-2\">\n            <span>Import Key</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"mailbox-list-container\">\n        <div class=\"row mailbox-list-header\">\n          <div class=\"col-5 mailbox-list-header-item\">\n            <label class=\"form-label\" [translate]=\"'settings.keys.email'\"> Email </label>\n          </div>\n          <div class=\"col-5 mailbox-list-header-item\">\n            <label class=\"form-label\" [translate]=\"'settings.keys.fingerprint'\"> Fingerprint </label>\n          </div>\n          <div class=\"col-2 mailbox-list-header-item\">\n            <label class=\"form-label\" [translate]=\"'settings.keys.key_type'\"> Key Type </label>\n          </div>\n        </div>\n        <div class=\"row mailbox-list-row\" *ngFor=\"let mailbox of mailboxes; let i = index\">\n          <div class=\"col-5 mailbox-list-row-item show-ellipses\">\n            <i\n              *ngIf=\"!aliasKeyExpandedStatus[i]\"\n              class=\"fa fa-chevron-right mr-2\"\n              (click)=\"aliasKeyExpandedStatus[i] = !aliasKeyExpandedStatus[i]\"\n              [attr.aria-expanded]=\"aliasKeyExpandedStatus[i]\"\n            ></i>\n            <i\n              *ngIf=\"aliasKeyExpandedStatus[i]\"\n              class=\"fa fa-chevron-down mr-2\"\n              (click)=\"aliasKeyExpandedStatus[i] = !aliasKeyExpandedStatus[i]\"\n              [attr.aria-expanded]=\"aliasKeyExpandedStatus[i]\"\n            ></i>\n            {{ mailbox.email }}\n          </div>\n          <div class=\"col-5 mailbox-list-row-item show-ellipses\">\n            {{ mailbox.fingerprint }}\n          </div>\n          <div class=\"col-2 mailbox-list-row-item\">\n            {{ mailbox.key_type === 'RSA4096' || !mailbox.key_type ? 'RSA 4096 BIT' : 'ECC' }}\n          </div>\n          <div\n            class=\"col-12 key-list-container\"\n            #collapse=\"ngbCollapse\"\n            [(ngbCollapse)]=\"!aliasKeyExpandedStatus[i]\"\n            *ngIf=\"mailboxKeysMap.has(mailbox.id) && mailboxKeysMap.get(mailbox.id).length > 0\"\n          >\n            <div class=\"row key-list-header\">\n              <div class=\"col-6 key-list-header-item\" [translate]=\"'settings.keys.fingerprint'\">Fingerprint</div>\n              <div class=\"col-2 key-list-header-item\" [translate]=\"'settings.keys.key_type'\">Key Type</div>\n              <div class=\"col-2 key-list-header-item text-center\" [translate]=\"'settings.keys.status'\">Status</div>\n              <div class=\"col-2 key-list-header-item\"></div>\n            </div>\n            <div class=\"row key-list-row\" *ngFor=\"let key of mailboxKeysMap.get(mailbox.id)\">\n              <div class=\"col-6 key-list-row-item show-ellipses\">\n                {{ key.fingerprint }}\n              </div>\n              <div class=\"col-2 key-list-row-item\">\n                {{ key.key_type === 'RSA4096' || !key.key_type ? 'RSA 4096' : 'ECC' }}\n              </div>\n              <div class=\"col-2 key-list-row-item text-center\">\n                <span *ngIf=\"key.is_primary\" class=\"badge badge-default\" [translate]=\"'settings.primary'\">\n                  Primary\n                </span>\n                <a\n                  *ngIf=\"!key.is_primary\"\n                  [ngbTooltip]=\"'settings.keys.set_as_primary' | translate\"\n                  (click)=\"onSetPrimary(key)\"\n                  ><i class=\"far fa-check-circle cursor-pointer\" aria-hidden=\"true\"></i\n                ></a>\n              </div>\n              <div class=\"col-2 key-list-row-item text-left\">\n                <a (click)=\"onDownloadKey(key, mailbox)\" ngbTooltip=\"Download Key\"\n                  ><i class=\"fa fa-download cursor-pointer mr-2\" aria-hidden=\"true\"></i\n                ></a>\n                <a\n                  *ngIf=\"!key.is_primary\"\n                  [ngbTooltip]=\"'settings.keys.remove_key' | translate\"\n                  (click)=\"onRemoveKey(key)\"\n                  ><i class=\"far fa-trash-alt cursor-pointer\" aria-hidden=\"true\"></i\n                ></a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!--Download Keys Modal-->\n<ng-template #downloadKeyModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"createFoldersModalLabel\">\n      <strong [translate]=\"'settings.keys.download_key'\">Download Key</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div>\n      <p class=\"text-holder text-dark text-medium\">{{ 'settings.keys.download_key_description' | translate }}</p>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <a\n          #downloadPrivateKeyRef\n          [href]=\"selectedMailboxPrivateKey | safe: 'url'\"\n          class=\"d-none\"\n          [download]=\"'privatekey.' + this.pickedMailboxForUpdate.email + '.asc'\"\n        ></a>\n        <button\n          type=\"button\"\n          class=\"btn btn-sm mr-2\"\n          (click)=\"downloadPrivateKeyRef.click()\"\n          [translate]=\"'settings.keys.private_key' | translate\"\n        >\n          Private Key\n        </button>\n        <a\n          #downloadPublicKeyRef\n          [href]=\"selectedMailboxPublicKey | safe: 'url'\"\n          class=\"d-none\"\n          [download]=\"'publickey.' + this.pickedMailboxForUpdate.email + '.asc'\"\n        ></a>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"downloadPublicKeyRef.click()\"\n          [translate]=\"'settings.keys.public_key' | translate\"\n        >\n          Public Key\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!--Add New Keys Modal-->\n<ng-template #addNewKeyModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"addKeyModalLabel\">\n      <strong [translate]=\"'settings.keys.add_new_key'\">Add New Key</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"userPassword = ''; d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mt-3 px-3\" *ngIf=\"currentAddKeyStep === AddKeyStep.SELECT_MAILBOX\">\n      <div>\n        <p class=\"text-holder text-dark text-medium\" [translate]=\"'settings.keys.add_new_key_mailbox_desc'\">\n          Please select a mailbox that you want to add new key\n        </p>\n      </div>\n      <div class=\"form-content-row mt-1\">\n        <div class=\"btn-dropdown btn-dropdown-select\">\n          <div ngbDropdown class=\"dropdown-sm\">\n            <button\n              type=\"button\"\n              ngbDropdownToggle\n              id=\"filterParameterDropdownMenuBtn\"\n              role=\"button\"\n              [disabled]=\"!selectedMailboxForAddNewKey\"\n            >\n              <span> {{ selectedMailboxForAddNewKey.email }} </span>\n            </button>\n            <div ngbDropdownMenu aria-labelledby=\"filterParameterDropdownMenuBtn\">\n              <a\n                *ngFor=\"let mailbox of mailboxes\"\n                class=\"dropdown-item text-medium\"\n                (click)=\"onSelectMailboxForAddNewKey(mailbox)\"\n              >\n                <span>{{ mailbox.email }}</span>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-content-row\">\n        <div>\n          <p class=\"text-holder text-dark text-medium\" [translate]=\"'settings.keys.add_new_key_keytype_desc'\">\n            Please select a key type\n          </p>\n        </div>\n        <div class=\"flex-auto-col\">\n          <div class=\"fancy-field-group\">\n            <input\n              class=\"d-none fancy-field-control fancy-field-control-sm\"\n              id=\"keyType2\"\n              name=\"[1]\"\n              type=\"radio\"\n              [checked]=\"selectedKeyTypeForAddNewKey === 'ECC'\"\n              (click)=\"selectedKeyTypeForAddNewKey = 'ECC'\"\n            />\n            <label for=\"keyType2\">ECC (Default)</label>\n          </div>\n        </div>\n        <div class=\"flex-auto-col\">\n          <div class=\"fancy-field-group\">\n            <input\n              class=\"d-none fancy-field-control fancy-field-control-sm\"\n              id=\"keyType1\"\n              name=\"[1]\"\n              type=\"radio\"\n              [checked]=\"selectedKeyTypeForAddNewKey === 'RSA 4096'\"\n              (click)=\"selectedKeyTypeForAddNewKey = 'RSA 4096'\"\n            />\n            <label for=\"keyType1\">RSA 4096</label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"mt-3 px-3\" *ngIf=\"currentAddKeyStep === AddKeyStep.USER_PASSWORD\">\n      <div class=\"mb-3\">\n        <p class=\"text-holder text-dark text-medium\">Please enter your account password to continue</p>\n      </div>\n      <div class=\"form-content-row mt-3 p-2\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-12\">\n            <div class=\"input-group decrypt-password-element mr-2\">\n              <input\n                class=\"form-control form-control-sm border-right-0\"\n                type=\"password\"\n                id=\"addKeyPasswordVC\"\n                placeholder=\"Password\"\n                [(ngModel)]=\"userPassword\"\n                [disabled]=\"isGeneratingKeys || mailboxKeyInProgress\"\n              />\n              <span\n                class=\"input-group-addon password-toggle bg-white text-muted\"\n                id=\"passwordToggle\"\n                (click)=\"togglePassword('addKeyPasswordVC')\"\n              >\n                <i class=\"fa fa-eye\"></i>\n                <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n          </div>\n          <div class=\"col-sm-12 errors-field\" *ngIf=\"mailBoxesState?.mailboxKeyFailure\">\n            <span class=\"validate-message mt-3\">Incorrect Password</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <app-loading-spinner [showSpinner]=\"isGeneratingKeys || mailboxKeyInProgress\"></app-loading-spinner>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"onNextAddKey()\"\n          [disabled]=\"mailboxKeyInProgress || isGeneratingKeys\"\n        >\n          {{\n            currentAddKeyStep === AddKeyStep.SELECT_MAILBOX\n              ? 'Next'\n              : isGeneratingKeys || mailboxKeyInProgress\n              ? 'Generating Keys...'\n              : 'Generate Keys'\n          }}\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!--Delete Key Confirm Modal-->\n<ng-template #deleteKeyConfirmModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"deleteKeyModalModalLabel\">\n      <strong [translate]=\"'settings.keys.delete_key_title'\">Are you sure to delete this key?</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"userPassword = ''; d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div>\n      <p class=\"text-holder text-medium text-danger\" [translate]=\"'settings.keys.delete_key_desc'\">\n        After deleted this key, you will not be able to decrypt any message that was encrypted with this key. It may\n        lead to data loss.\n      </p>\n    </div>\n    <div class=\"form-content-row mt-3 p-2\">\n      <div class=\"row align-items-center\">\n        <div class=\"col-sm-12\">\n          <p class=\"text-holder text-dark text-medium\">Please enter your account password to continue.</p>\n          <div class=\"input-group decrypt-password-element mr-2\">\n            <input\n              class=\"form-control form-control-sm border-right-0\"\n              type=\"password\"\n              id=\"deleteKeyPasswordVC\"\n              placeholder=\"Password\"\n              [(ngModel)]=\"userPassword\"\n            />\n            <span\n              class=\"input-group-addon password-toggle bg-white text-muted form-control-sm\"\n              id=\"passwordToggle\"\n              (click)=\"togglePassword('deleteKeyPasswordVC')\"\n            >\n              <i class=\"fa fa-eye\"></i>\n              <i class=\"fa fa-eye-slash\"></i>\n            </span>\n          </div>\n        </div>\n        <div class=\"col-sm-12 errors-field\" *ngIf=\"mailBoxesState?.mailboxKeyFailure\">\n          <span class=\"validate-message mt-3\">Incorrect Password</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"form-content-row mt-3 p-2\">\n      <div class=\"row align-items-center\">\n        <div class=\"col-sm-12\">\n          <p class=\"text-holder text-dark text-medium\">Please type <strong>CTEMPLAR</strong> to confirm.</p>\n          <div class=\"input-group decrypt-password-element mr-2\">\n            <input class=\"form-control form-control-sm\" type=\"text\" [(ngModel)]=\"deleteKeyConfirmString\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <app-loading-spinner [showSpinner]=\"mailboxKeyInProgress\"></app-loading-spinner>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"onConfirmDeleteKey()\"\n          [disabled]=\"mailboxKeyInProgress || deleteKeyConfirmString !== 'CTEMPLAR'\"\n          [translate]=\"'settings.keys.delete_key_confirm'\"\n        >\n          Yes, I am sure\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!--Primary Key Change Confirm Modal-->\n<ng-template #setPrimaryKeyConfirmModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"primaryKeyModalLabel\">\n      <strong [translate]=\"'settings.keys.update_primary_key'\">Update Primary Key</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div>\n      <p class=\"text-holder text-medium text-dark\">\n        After changed the primary key, all of messages with this alias will be encrypted with this key. Primary key will\n        always be placed in the top of the key list. Are you sure you want to continue?\n      </p>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <app-loading-spinner [showSpinner]=\"mailboxKeyInProgress\"></app-loading-spinner>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"onConfirmSetPrimaryKey()\"\n          [disabled]=\"mailboxKeyInProgress\"\n          [translate]=\"'settings.keys.make_as_primary'\"\n        >\n          Make as Primary\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!--Set Autocrypt Confirm Modal-->\n<ng-template #setAutocryptConfirmModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"setAutocryptConfirmModalLabel\">\n      <strong>{{ 'settings.manage_autocrypt' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div>\n      <p class=\"text-holder text-dark text-medium\">\n        {{ 'settings.manage_autocrypt_description' | translate }}\n        <a href=\"{{ primaryWebsite }}/help/autocrypt/\" target=\"_blank\" rel=\"noopener noreferrer\">{{\n          'mail_header.learn_more' | translate\n        }}</a>\n      </p>\n    </div>\n    <div class=\"mt-3\">\n      <!-- Encryption Flag section -->\n      <div class=\"form-content-row mb-3\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-4\">\n            <label class=\"form-label mb-0\" [translate]=\"'settings.set_autocrypt'\"> Set Autocrypt </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"isEncrypt1\"\n                    name=\"[1]\"\n                    type=\"radio\"\n                    [checked]=\"selectedMailboxForAutocrypt.is_autocrypt_enabled\"\n                    (click)=\"onClickAutocrypt(true)\"\n                  />\n                  <label for=\"isEncrypt1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"isEncrypt2\"\n                    name=\"[1]\"\n                    type=\"radio\"\n                    [checked]=\"!selectedMailboxForAutocrypt.is_autocrypt_enabled\"\n                    (click)=\"onClickAutocrypt(false)\"\n                  />\n                  <label for=\"isEncrypt2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Encryption Scheme section -->\n      <div class=\"form-content-row mt-3 mb-2\">\n        <div class=\"row\">\n          <div class=\"col-sm-4\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.prefer_encrypt'\"> Prefer Encrypt </label>\n            <a href=\"{{ primaryWebsite }}/help/autocrypt/prefer-encrypt\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <i class=\"fas fa-info-circle ml-1\" [ngbTooltip]=\"'settings.prefer_encrypt_description' | translate\"></i>\n            </a>\n          </div>\n          <div class=\"col-sm-8\">\n            <div class=\"btn-dropdown btn-dropdown-select\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  type=\"button\"\n                  ngbDropdownToggle\n                  id=\"preferEncryptDropdownMenuBtn\"\n                  role=\"button\"\n                  [disabled]=\"!selectedMailboxForAutocrypt.is_autocrypt_enabled\"\n                >\n                  <span> {{ selectedMailboxForAutocrypt.prefer_encrypt }} </span>\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"preferEncryptDropdownMenuBtn\">\n                  <a\n                    class=\"dropdown-item text-medium\"\n                    (click)=\"selectedMailboxForAutocrypt.prefer_encrypt = 'nopreference'\"\n                  >\n                    <span>nopreference</span>\n                  </a>\n                  <a class=\"dropdown-item text-medium\" (click)=\"selectedMailboxForAutocrypt.prefer_encrypt = 'mutual'\">\n                    <span>mutual</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"mx-auto mt-2 pt-sm-2\">\n        <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary btn-sm\"\n          (click)=\"onConfirmSetAutocrypt()\"\n          [disabled]=\"inProgress\"\n        >\n          {{ 'common.save' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { debounceTime, distinctUntilChanged, take } from 'rxjs/operators';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Subject } from 'rxjs/internal/Subject';\nimport ImageResize from 'quill-image-resize-module';\nimport Quill from 'quill';\n\nimport { SafePipe } from '../../../shared/pipes/safe.pipe';\nimport { MailSettingsService } from '../../../store/services/mail-settings.service';\nimport {\n  AddMailboxKeys,\n  AddMailboxKeysSuccess,\n  DeleteMailboxKeys,\n  MailboxSettingsUpdate,\n  ResetMailboxKeyOperationState,\n  SetMailboxKeyPrimary,\n} from '../../../store/actions/mail.actions';\nimport { ImageFormat, OpenPgpService, SharedService, UsersService } from '../../../store/services';\nimport { AppState, MailBoxesState, Settings, UserState, PGPKeyType, MailboxKey } from '../../../store/datatypes';\nimport { CreateMailbox, SetDefaultMailbox, SnackErrorPush, UpdateMailboxOrder } from '../../../store/actions';\nimport { Folder, Mailbox } from '../../../store/models';\nimport { PRIMARY_DOMAIN, PRIMARY_WEBSITE, QUILL_FORMATTING_MODULES } from '../../../shared/config';\nimport { ImportPrivateKeyComponent } from '../../dialogs/import-private-key/import-private-key.component';\n\n// Register quill modules and fonts and image parameters\nQuill.register('modules/imageResize', ImageResize);\nQuill.register(ImageFormat, true);\n\nenum AddKeyStep {\n  SELECT_MAILBOX,\n  USER_PASSWORD,\n}\n\n@UntilDestroy()\n@Component({\n  selector: 'app-addresses-signature',\n  templateUrl: './addresses-signature.component.html',\n  styleUrls: ['./../mail-settings.component.scss', './addresses-signature.component.scss'],\n})\nexport class AddressesSignatureComponent implements OnInit, OnDestroy {\n  @ViewChild('downloadKeyModal') downloadKeyModal: any;\n\n  @ViewChild('setAutocryptConfirmModal') setAutocryptConfirmModal: any;\n\n  @ViewChild('addNewKeyModal') addNewKeyModal: any;\n\n  @ViewChild('deleteKeyConfirmModal') deleteKeyConfirmModal: any;\n\n  @ViewChild('setPrimaryKeyConfirmModal') setPrimaryKeyConfirmModal: any;\n\n  @ViewChild('downloadPrivateKeyRef') downloadPrivateKeyRef: any;\n\n  @ViewChild('downloadPublicKeyRef') downloadPublicKeyRef: any;\n\n  private downloadKeyModalRef: NgbModalRef;\n\n  private setAutocryptConfirmModalRef: NgbModalRef;\n\n  private addNewKeyModalRef: NgbModalRef;\n\n  private deleteKeyConfirmModalRef: NgbModalRef;\n\n  private setPrimaryKeyConfirmModalRef: NgbModalRef;\n\n  public mailBoxesState: MailBoxesState;\n\n  public mailboxes: Mailbox[];\n\n  public unmodifiedMailboxes: Mailbox[];\n\n  public currentMailBox: Mailbox;\n\n  public userState: UserState;\n\n  public selectedMailboxPublicKey: string;\n\n  public selectedMailboxPrivateKey: string;\n\n  newAddressForm: FormGroup;\n\n  newAddressOptions: any = {};\n\n  selectedMailboxForSignature: Mailbox;\n\n  selectedMailboxForKey: Mailbox;\n\n  settings: Settings;\n\n  customDomains: string[];\n\n  reorder: boolean;\n\n  reorderInProgress = false;\n\n  signatureChanged: Subject<string> = new Subject<string>();\n\n  quillModules = QUILL_FORMATTING_MODULES;\n\n  isCustomDomainSelected: boolean;\n\n  aliasKeyExpandedStatus: Array<boolean> = [];\n\n  selectedMailboxForAddNewKey: Mailbox;\n\n  selectedKeyTypeForAddNewKey: PGPKeyType;\n\n  isGeneratingKeys = false;\n\n  mailboxKeyInProgress = false;\n\n  mailboxKeysMap: Map<number, Array<MailboxKey>> = new Map();\n\n  pickedMailboxKeyForUpdate: MailboxKey; // Download or Remove\n\n  pickedMailboxForUpdate: MailboxKey; // Download or Remove - multiple keys\n\n  selectedMailboxForAutocrypt: Mailbox;\n\n  inProgress = false;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  userPassword: string;\n\n  AddKeyStep = AddKeyStep;\n\n  currentAddKeyStep: AddKeyStep = AddKeyStep.SELECT_MAILBOX;\n\n  deleteKeyConfirmString: string;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private openPgpService: OpenPgpService,\n    private usersService: UsersService,\n    private settingsService: MailSettingsService,\n    private modalService: NgbModal,\n    private store: Store<AppState>,\n    private sharedService: SharedService,\n  ) {}\n\n  ngOnInit() {\n    /**\n     * Get current mailbox status and update selected mailbox\n     */\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailboxesState: MailBoxesState) => {\n        if (mailboxesState.isUpdatingOrder) {\n          this.reorderInProgress = true;\n          return;\n        }\n        if (this.reorderInProgress) {\n          this.reorderInProgress = false;\n          this.reorder = false;\n        }\n        if (\n          this.mailBoxesState &&\n          this.mailBoxesState.inProgress &&\n          !mailboxesState.inProgress &&\n          this.newAddressOptions.isBusy\n        ) {\n          this.onDiscardNewAddress();\n        }\n        this.mailBoxesState = mailboxesState;\n        this.mailboxes = mailboxesState.mailboxes;\n        if (this.mailboxes.length > 0) {\n          if (this.aliasKeyExpandedStatus.length === 0) {\n            this.aliasKeyExpandedStatus = new Array(this.mailboxes.length).fill(false);\n          }\n          this.currentMailBox = mailboxesState.currentMailbox;\n          if (!this.selectedMailboxForSignature || this.selectedMailboxForSignature.id === this.currentMailBox.id) {\n            // update selected mailbox in case `currentMailbox` has been updated\n            this.selectedMailboxForSignature = mailboxesState.currentMailbox;\n          }\n          if (!this.selectedMailboxForKey || this.selectedMailboxForKey.id === this.currentMailBox.id) {\n            // update selected mailbox in case `currentMailbox` has been updated\n            this.onSelectedMailboxForKeyChanged(mailboxesState.currentMailbox);\n          }\n          if (this.mailboxKeyInProgress && !mailboxesState.mailboxKeyInProgress) {\n            if (this.addNewKeyModalRef && !this.mailBoxesState.mailboxKeyFailure) {\n              this.userPassword = '';\n              this.addNewKeyModalRef.dismiss();\n            }\n            if (this.deleteKeyConfirmModalRef && !this.mailBoxesState.mailboxKeyFailure) {\n              this.userPassword = '';\n              this.deleteKeyConfirmModalRef.dismiss();\n            }\n            if (this.setPrimaryKeyConfirmModalRef) this.setPrimaryKeyConfirmModalRef.dismiss();\n          }\n        }\n        this.mailboxKeyInProgress = mailboxesState.mailboxKeyInProgress;\n        this.mailboxKeysMap = mailboxesState.mailboxKeysMap;\n        if (this.inProgress && !mailboxesState.inProgress && this.setAutocryptConfirmModalRef) {\n          this.setAutocryptConfirmModalRef.dismiss();\n        }\n        this.inProgress = mailboxesState.inProgress;\n      });\n\n    /**\n     * Set customeDomains list from user's state\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.settings = user.settings;\n        this.customDomains = user.customDomains\n          .filter(item => item.is_domain_verified && item.is_mx_verified)\n          .map(item => item.domain);\n        this.customDomains = [PRIMARY_DOMAIN, ...this.customDomains];\n      });\n\n    this.newAddressForm = this.formBuilder.group({\n      username: [\n        '',\n        [\n          Validators.required,\n          Validators.pattern(/^[a-z]+([\\da-z]*[._-]?[\\da-z]+)+$/i),\n          Validators.minLength(2),\n          Validators.maxLength(64),\n        ],\n      ],\n      domain: ['', Validators.required],\n    });\n\n    this.signatureChanged.pipe(debounceTime(3000), distinctUntilChanged()).subscribe(value => {\n      this.updateMailboxSettings(this.selectedMailboxForSignature, 'signature', value);\n    });\n\n    this.handleUsernameAvailability();\n  }\n\n  onDomainChange(customDomain: string) {\n    this.newAddressForm.get('username').reset();\n    if (customDomain !== PRIMARY_DOMAIN) {\n      this.isCustomDomainSelected = true;\n      this.newAddressForm\n        .get('username')\n        .setValidators([\n          Validators.required,\n          Validators.pattern(/^[a-z]*([\\da-z]*[._-]?[\\da-z]+)+$/i),\n          Validators.minLength(1),\n          Validators.maxLength(64),\n        ]);\n      this.newAddressForm.get('domain').setValidators([Validators.required]);\n      this.newAddressForm.get('username').updateValueAndValidity();\n    } else {\n      this.isCustomDomainSelected = false;\n\n      this.newAddressForm\n        .get('username')\n        .setValidators([\n          Validators.required,\n          Validators.pattern(/^[a-z]+([\\da-z]*[._-]?[\\da-z]+)+$/i),\n          Validators.minLength(1),\n          Validators.maxLength(64),\n        ]);\n      this.newAddressForm.get('domain').setValidators([Validators.required]);\n      this.newAddressForm.get('username').updateValueAndValidity();\n    }\n\n    this.newAddressForm.get('domain').setValue(customDomain);\n  }\n\n  onAddNewAddress() {\n    if (!this.newAddressOptions.isAddingNew) {\n      this.newAddressForm.reset();\n      this.newAddressForm.get('domain').setValue(PRIMARY_DOMAIN);\n      this.newAddressOptions = {\n        isAddingNew: true,\n      };\n    }\n  }\n\n  onDiscardNewAddress() {\n    this.newAddressForm.reset();\n    this.newAddressOptions = {\n      isAddingNew: false,\n    };\n  }\n\n  submitNewAddress() {\n    this.newAddressOptions.isSubmitted = true;\n    const newUserName = this.newAddressForm.controls.username.value;\n\n    if (this.newAddressForm.valid && this.newAddressOptions.usernameExists === false && newUserName) {\n      this.newAddressOptions.isBusy = true;\n      const currentDomain = this.newAddressForm.controls.domain.value;\n      if (currentDomain) {\n        this.openPgpService.generateUserKeys(newUserName, atob(this.usersService.getUserKey()), currentDomain);\n      } else {\n        this.openPgpService.generateUserKeys(newUserName, atob(this.usersService.getUserKey()));\n      }\n\n      if (this.openPgpService.getUserKeys()) {\n        this.addNewAddress();\n      } else {\n        this.openPgpService.waitForPGPKeys(this, 'addNewAddress');\n      }\n    }\n  }\n\n  addNewAddress() {\n    const requestData = {\n      email: this.getEmail(),\n      ...this.openPgpService.getUserKeys(),\n    };\n    this.store.dispatch(new CreateMailbox(requestData));\n  }\n\n  updateDefaultEmailAddress(selectedMailbox: Mailbox) {\n    this.store.dispatch(new SetDefaultMailbox(selectedMailbox));\n  }\n\n  onSelectedMailboxForKeyChanged(mailbox: Mailbox) {\n    this.selectedMailboxForKey = mailbox;\n    this.selectedMailboxPublicKey = `data:application/octet-stream;charset=utf-8;base64,${btoa(\n      this.selectedMailboxForKey.public_key,\n    )}`;\n    this.selectedMailboxPrivateKey = `data:application/octet-stream;charset=utf-8;base64,${btoa(\n      this.selectedMailboxForKey.private_key,\n    )}`;\n  }\n\n  onSignatureChange(value: string) {\n    this.signatureChanged.next(value);\n  }\n\n  signatureFocused(value: boolean) {\n    SharedService.isQuillEditorOpen = value;\n  }\n\n  updateMailboxSettings(selectedMailbox: any, key: string, value: any) {\n    if (selectedMailbox[key] !== value) {\n      selectedMailbox.inProgress = true;\n      // Sanitizing for signature & display_name\n      if (key === 'signature' || key === 'display_name') {\n        value = SafePipe.processSanitization(value, false);\n      }\n      this.store.dispatch(new MailboxSettingsUpdate({ ...selectedMailbox, [key]: value }));\n    }\n  }\n\n  sortDown(index: number) {\n    const sortOrder = this.mailboxes[index].sort_order;\n    this.mailboxes[index].sort_order = this.mailboxes[index + 1].sort_order;\n    this.mailboxes[index + 1].sort_order = sortOrder;\n    this.mailboxes.sort((a, b) => {\n      return a.sort_order - b.sort_order;\n    });\n  }\n\n  sortUp(index: number) {\n    const sortOrder = this.mailboxes[index].sort_order;\n    this.mailboxes[index].sort_order = this.mailboxes[index - 1].sort_order;\n    this.mailboxes[index - 1].sort_order = sortOrder;\n    this.mailboxes.sort((a, b) => {\n      return a.sort_order - b.sort_order;\n    });\n  }\n\n  startReorder() {\n    this.reorder = true;\n    this.unmodifiedMailboxes = this.mailboxes.map(x => ({ ...x }));\n    this.mailboxes = this.mailboxes\n      .sort((a, b) => {\n        return a.sort_order - b.sort_order;\n      })\n      .map((item, index) => {\n        item.sort_order = index + 1;\n        return item;\n      });\n  }\n\n  saveOrder() {\n    this.reorderInProgress = true;\n    const payload: any = {\n      mailboxes: this.mailboxes,\n      data: {\n        mailbox_list: this.mailboxes.map(item => {\n          return { mailbox_id: item.id, sort_order: item.sort_order };\n        }),\n      },\n    };\n    this.store.dispatch(new UpdateMailboxOrder(payload));\n  }\n\n  cancelOrder() {\n    this.reorder = false;\n    this.mailboxes = this.unmodifiedMailboxes;\n  }\n\n  private getEmail() {\n    return (\n      this.newAddressForm.controls.username.value +\n      (this.newAddressForm.controls.domain.value === PRIMARY_DOMAIN\n        ? ''\n        : `@${this.newAddressForm.controls.domain.value}`)\n    );\n  }\n\n  private handleUsernameAvailability() {\n    this.newAddressForm\n      .get('username')\n      .valueChanges.pipe(debounceTime(500), untilDestroyed(this))\n      .subscribe(username => {\n        if (!username) {\n          return;\n        }\n        if (!this.newAddressForm.controls.username.errors) {\n          this.newAddressOptions.isBusy = true;\n          this.usersService.checkUsernameAvailability(this.getEmail()).subscribe(\n            response => {\n              this.newAddressOptions.usernameExists = response.exists;\n              this.newAddressOptions.isBusy = false;\n            },\n            error => {\n              this.store.dispatch(\n                new SnackErrorPush({ message: `Failed to check username availability. ${error.error}` }),\n              );\n              this.newAddressOptions.isBusy = false;\n              this.newAddressOptions.usernameExists = null;\n            },\n          );\n        }\n      });\n  }\n\n  updateSettings(key?: string, value?: any) {\n    this.settingsService.updateSettings(this.settings, key, value);\n  }\n\n  onDownloadKey(key: MailboxKey, mailbox: Mailbox) {\n    this.pickedMailboxKeyForUpdate = key;\n    this.pickedMailboxForUpdate = mailbox;\n    this.selectedMailboxPublicKey = `data:application/octet-stream;charset=utf-8;base64,${btoa(key.public_key)}`;\n    this.selectedMailboxPrivateKey = `data:application/octet-stream;charset=utf-8;base64,${btoa(key.private_key)}`;\n    this.downloadKeyModalRef = this.modalService.open(this.downloadKeyModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm',\n    });\n  }\n\n  /**\n   * Start Delete Key Section\n   */\n\n  onRemoveKey(key: MailboxKey) {\n    this.deleteKeyConfirmString = '';\n    this.store.dispatch(new ResetMailboxKeyOperationState());\n    this.pickedMailboxKeyForUpdate = key;\n    this.deleteKeyConfirmModalRef = this.modalService.open(this.deleteKeyConfirmModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onConfirmDeleteKey() {\n    if (this.pickedMailboxKeyForUpdate && this.userPassword) {\n      const password = this.sharedService.getHashPurePasswordWithUserName(this.userPassword);\n      this.store.dispatch(new DeleteMailboxKeys({ ...this.pickedMailboxKeyForUpdate, password }));\n    }\n  }\n  /**\n   * End Delete Key Section\n   */\n\n  /**\n   * Start Set Primary Key Section\n   */\n  onSetPrimary(key: MailboxKey) {\n    this.pickedMailboxKeyForUpdate = key;\n    this.setPrimaryKeyConfirmModalRef = this.modalService.open(this.setPrimaryKeyConfirmModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onConfirmSetPrimaryKey() {\n    if (this.pickedMailboxKeyForUpdate) {\n      this.store.dispatch(new SetMailboxKeyPrimary(this.pickedMailboxKeyForUpdate));\n    }\n  }\n  /**\n   * End Set Primary Key Section\n   */\n\n  /**\n   * Start Autocrypt Section\n   */\n  onSetAutocrypt(mailbox: Mailbox) {\n    this.selectedMailboxForAutocrypt = mailbox;\n    this.setAutocryptConfirmModalRef = this.modalService.open(this.setAutocryptConfirmModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onConfirmSetAutocrypt() {\n    if (this.selectedMailboxForAutocrypt) {\n      this.store.dispatch(new MailboxSettingsUpdate(this.selectedMailboxForAutocrypt));\n    }\n  }\n\n  onClickAutocrypt(isAutocrypt: boolean) {\n    this.selectedMailboxForAutocrypt.is_autocrypt_enabled = isAutocrypt;\n  }\n  /**\n   * End Autocrypt Section\n   */\n\n  /**\n   * Start Add Mailbox Key Section\n   */\n  onAddNewKey() {\n    this.userPassword = '';\n    this.currentAddKeyStep = AddKeyStep.SELECT_MAILBOX;\n    this.store.dispatch(new ResetMailboxKeyOperationState());\n    if (this.mailboxes && this.mailboxes.length > 0) {\n      [this.selectedMailboxForAddNewKey] = this.mailboxes;\n    }\n    this.selectedKeyTypeForAddNewKey = PGPKeyType.ECC;\n    this.addNewKeyModalRef = this.modalService.open(this.addNewKeyModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onSelectMailboxForAddNewKey(mailbox: Mailbox) {\n    this.selectedMailboxForAddNewKey = mailbox;\n  }\n\n  onNextAddKey() {\n    if (this.currentAddKeyStep === AddKeyStep.SELECT_MAILBOX) {\n      this.currentAddKeyStep += 1;\n    } else if (this.userPassword) {\n      this.onGenerateKeys();\n    }\n  }\n\n  onGenerateKeys() {\n    if (!this.selectedKeyTypeForAddNewKey || !this.selectedMailboxForAddNewKey || this.isGeneratingKeys) {\n      return;\n    }\n    this.isGeneratingKeys = true;\n    this.openPgpService\n      .generateUserKeysWithEmail(\n        this.selectedMailboxForAddNewKey.email,\n        atob(this.usersService.getUserKey()),\n        this.selectedKeyTypeForAddNewKey,\n      )\n      .pipe(take(1))\n      .subscribe(\n        keys => {\n          const keyDataKeydata = { ...keys };\n          this.isGeneratingKeys = false;\n          keyDataKeydata.key_type = this.selectedKeyTypeForAddNewKey === PGPKeyType.RSA_4096 ? 'RSA4096' : 'ECC';\n          keyDataKeydata.mailbox = this.selectedMailboxForAddNewKey.id;\n          if (\n            !this.mailboxKeysMap.has(this.selectedMailboxForAddNewKey.id) ||\n            this.mailboxKeysMap.get(this.selectedMailboxForAddNewKey.id).length === 0\n          ) {\n            keyDataKeydata.is_primary = true;\n          }\n          keyDataKeydata.password = this.sharedService.getHashPurePasswordWithUserName(this.userPassword);\n          this.store.dispatch(new AddMailboxKeys(keyDataKeydata));\n        },\n        error => {\n          this.isGeneratingKeys = false;\n          this.store.dispatch(new SnackErrorPush({ message: error }));\n        },\n      );\n  }\n  /**\n   * End Add Mailbox Key Section\n   */\n\n  // == Open NgbModal\n  onImportKey() {\n    const options: any = {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-sm import-private-key-modal',\n    };\n    const component = this.modalService.open(ImportPrivateKeyComponent, options).componentInstance;\n    component.mailboxes = this.mailboxes;\n  }\n\n  // == Toggle password visibility\n  togglePassword(inputID: string): any {\n    const input = <HTMLInputElement>document.getElementById(inputID);\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n\n  ngOnDestroy(): void {\n    SharedService.isQuillEditorOpen = false;\n  }\n}\n","<!-- Custom Domain Section -->\n<section class=\"mailbox-section mt-4\">\n  <div class=\"mailbox-section-body pt-0\">\n    <div class=\"desc-card-holder mt-sm-3 mt-md-0\">\n      <div class=\"row\">\n        <div class=\"col-md-12 mb-4 mb-md-0\">\n          <!-- Current Domains Part -->\n          <div *ngIf=\"!isAddingNewDomain\">\n            <div class=\"desc-card\">\n              <div class=\"desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0\">\n                <h5 class=\"ui-header-subtitle text-dark mb-0 d-inline-block\">\n                  <strong [translate]=\"'settings.domains'\">Domains</strong>\n                </h5>\n                <a\n                  href=\"{{ primaryWebsite }}/help/answer/add-a-domain/\"\n                  ngbTooltip=\"Learn more\"\n                  class=\"learn-more-info-icon\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <i class=\"far fa-question-circle\"></i>\n                </a>\n              </div>\n              <div class=\"desc-card-body bg-faded domain-body\">\n                <button\n                  class=\"btn btn-secondary btn-add-domain text-small\"\n                  *ngIf=\"userState?.isPrime && domains?.length > 0; else domainsEmpty\"\n                  (click)=\"startAddingNewDomain()\"\n                >\n                  <span [translate]=\"'settings.add_domain'\">Add Domain</span>\n                </button>\n                <ng-template #domainsEmpty>\n                  <button\n                    class=\"btn btn-secondary btn-create-domain text-small\"\n                    *ngIf=\"userState?.isPrime\"\n                    (click)=\"startAddingNewDomain()\"\n                  >\n                    <span [translate]=\"'settings.create_domain'\">Create Domain</span>\n                  </button>\n                </ng-template>\n                <div class=\"py-4 error-message\" *ngIf=\"!userState?.isPrime && userState?.customDomainsLoaded\">\n                  <span [translate]=\"'settings.domains_and_users.premium_feature'\">\n                    This is a premium feature,please</span\n                  >\n                  <a class=\"cursor-pointer\" (click)=\"gotoPricingPlans()\">\n                    &nbsp;\n                    <span [translate]=\"'settings.domains_and_users.upgrade'\">upgrade</span>\n                  </a>\n                  &nbsp;\n                  <span [translate]=\"'settings.domains_and_users.use_feature'\"> in order to use this feature. </span>\n                </div>\n\n                <app-loading-spinner [showSpinner]=\"userState?.inProgress\" class=\"loading-spinner\">\n                </app-loading-spinner>\n\n                <div class=\"domains-list\" *ngIf=\"domains?.length > 0\">\n                  <div class=\"row d-none d-sm-flex bg-white heading\">\n                    <div class=\"col-2\">\n                      <span class=\"text-capitalize font-weight-bold\" [translate]=\"'settings.domain'\"> Domain </span>\n                    </div>\n                    <div class=\"col-4\">\n                      <span class=\"text-capitalize font-weight-bold\" [translate]=\"'settings.current_status'\">\n                        Current Status\n                      </span>\n                    </div>\n                    <div class=\"col-1 text-center\">\n                      <span class=\"text-capitalize font-weight-bold\" [translate]=\"'settings.addresses'\"> Aliases </span>\n                    </div>\n                    <div class=\"col-1 text-center\">\n                      <span class=\"text-capitalize font-weight-bold\" [translate]=\"'settings.domains_and_users.users'\"\n                        >Users</span\n                      >\n                    </div>\n                    <div class=\"col-1 text-center\">\n                      <span class=\"text-capitalize font-weight-bold\" [translate]=\"'settings.catch_all'\">\n                        Catch all\n                      </span>\n                    </div>\n                    <div class=\"col-2 text-center\">\n                      <span class=\"text-capitalize font-weight-bold\">Catch all Email</span>\n                    </div>\n                  </div>\n                  <div class=\"row d-none d-sm-flex bg-white align-items-start\" *ngFor=\"let domain of domains\">\n                    <div class=\"col-2 text-dark text-domain font-weight-bold\">{{ domain.domain }}</div>\n                    <div class=\"col-4 text-uppercase text-small d-flex flex-wrap align-content-start domain-status\">\n                      <div class=\"failed\" [class.verified]=\"domain.is_domain_verified\">\n                        <span [translate]=\"'settings.status_verification'\">Verification</span>\n                      </div>\n                      <div class=\"failed\" [class.verified]=\"domain.is_mx_verified\">\n                        <span [translate]=\"'settings.status_mx'\">\n                          <i class=\"fa fa-check\"></i>\n                          <i class=\"fa fa-exclamation\"></i>MX\n                        </span>\n                      </div>\n                      <div [class.verified]=\"domain.is_spf_verified\">\n                        <span [translate]=\"'settings.status_spf'\">\n                          <i class=\"fa fa-check\"></i>\n                          <i class=\"fa fa-exclamation\"></i>SPF\n                        </span>\n                      </div>\n                      <div [class.verified]=\"domain.is_dkim_verified\">\n                        <span [translate]=\"'settings.status_dkim'\">\n                          <i class=\"fa fa-check\"></i>\n                          <i class=\"fa fa-exclamation\"></i>DKIM\n                        </span>\n                      </div>\n                      <div [class.verified]=\"domain.is_dmarc_verified\">\n                        <span [translate]=\"'settings.status_dmarc'\">\n                          <i class=\"fa fa-check\"></i>\n                          <i class=\"fa fa-exclamation\"></i>DMARC\n                        </span>\n                      </div>\n                    </div>\n                    <div class=\"col-1 text-dark text-domain text-center\">{{ domain.number_of_aliases }}</div>\n                    <div class=\"col-1 text-dark text-domain text-center\">{{ domain.number_of_users }}</div>\n                    <div class=\"col-1 text-dark text-domain text-center\">\n                      <mat-checkbox\n                        type=\"checkbox\"\n                        [checked]=\"domain.catch_all\"\n                        (change)=\"domain.catch_all = $event.checked; updateDomain(domain)\"\n                      >\n                      </mat-checkbox>\n                    </div>\n                    <div class=\"col-2 text-dark text-domain text-center catch-all-email-dropdown-container\">\n                      <div class=\"btn-dropdown btn-dropdown-select\">\n                        <div ngbDropdown class=\"dropdown-sm\">\n                          <button\n                            ngbDropdownToggle\n                            class=\"dropdown-toggle\"\n                            [ngClass]=\"{ 'blank-dropdown': !domain.catch_all_email }\"\n                            id=\"catchAllEmailDropdown\"\n                            role=\"button\"\n                            [disabled]=\"!domain.catch_all || !domain.number_of_aliases\"\n                          >\n                            {{ domain.catch_all_email ? domain.catch_all_email : 'No alias' }}\n                          </button>\n                          <div ngbDropdownMenu aria-labelledby=\"catchAllEmailDropdown\">\n                            <a\n                              class=\"dropdown-item\"\n                              *ngFor=\"let email of mailboxesForCustomDomains.get(domain.id)\"\n                              (click)=\"onSelectCatchAllEmail(domain, email)\"\n                              >{{ email }}</a\n                            >\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"col-1 d-flex justify-content-end actions\">\n                      <div\n                        class=\"action action-normal d-none d-md-flex d-sm-none justify-content-center align-items-center\"\n                      >\n                        <a\n                          class=\"text-muted\"\n                          (click)=\"verifyDomain(domain.id, false, true)\"\n                          ngbTooltip=\"Verify dns records again.\"\n                        >\n                          <i class=\"fas fa-sync-alt reverify-domain\"></i>\n                        </a>\n                      </div>\n                      <div\n                        class=\"action action-normal d-none d-md-flex d-sm-none justify-content-center align-items-center\"\n                      >\n                        <a\n                          class=\"text-muted\"\n                          (click)=\"startAddingNewDomain(domain)\"\n                          [ngbTooltip]=\"'settings.edit' | translate\"\n                        >\n                          <i class=\"icon icon-edit\"></i>\n                        </a>\n                      </div>\n                      <div\n                        class=\"action action-normal d-none d-md-flex d-sm-none justify-content-center align-items-center\"\n                      >\n                        <a\n                          class=\"text-muted\"\n                          [ngbTooltip]=\"'settings.delete' | translate\"\n                          (click)=\"openConfirmDeleteModal(domain)\"\n                        >\n                          <i class=\"icon icon-garbage\"></i>\n                        </a>\n                      </div>\n                      <div class=\"d-flex d-md-none justify-content-center align-items-center\">\n                        <div ngbDropdown class=\"d-inline-block\">\n                          <button class=\"btn bg-white action\" ngbDropdownToggle>\n                            <i class=\"fa fa-ellipsis-h\"></i>\n                          </button>\n                          <div ngbDropdownMenu class=\"dropdown-menu-right\">\n                            <button\n                              class=\"dropdown-item text-muted\"\n                              (click)=\"startAddingNewDomain(domain)\"\n                              [ngbTooltip]=\"'settings.edit' | translate\"\n                            >\n                              <i class=\"icon icon-edit\"></i>\n                              <span [translate]=\"'settings.edit_details'\">Edit Details</span>\n                            </button>\n                            <button\n                              class=\"dropdown-item text-muted\"\n                              [ngbTooltip]=\"'settings.delete' | translate\"\n                              (click)=\"openConfirmDeleteModal(domain)\"\n                            >\n                              <i class=\"icon icon-garbage\"></i>\n                              <span [translate]=\"'settings.remove'\">Remove</span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"row d-block d-sm-none bg-white align-items-start mb-2\" *ngFor=\"let domain of domains\">\n                    <div class=\"pb-3 px-2\">\n                      <div class=\"d-flex\">\n                        <div class=\"align-items-center mr-auto\">\n                          <span class=\"text-uppercase text-small\" [translate]=\"'settings.domain'\">Domain</span>\n                        </div>\n                        <div class=\"d-flex actions\">\n                          <div ngbDropdown class=\"d-inline-block\">\n                            <button class=\"btn bg-white action text-right p-0\" ngbDropdownToggle>\n                              <i class=\"fa fa-ellipsis-h\"></i>\n                            </button>\n                            <div ngbDropdownMenu class=\"dropdown-menu-right\">\n                              <button\n                                class=\"dropdown-item text-muted text-small\"\n                                (click)=\"startAddingNewDomain(domain)\"\n                                [ngbTooltip]=\"'settings.edit' | translate\"\n                              >\n                                <i class=\"icon icon-edit\"></i>\n                                <span [translate]=\"'settings.edit_details'\">Edit Details</span>\n                              </button>\n                              <button\n                                class=\"dropdown-item text-muted text-small\"\n                                [ngbTooltip]=\"'settings.delete' | translate\"\n                                (click)=\"openConfirmDeleteModal(domain)\"\n                              >\n                                <i class=\"icon icon-garbage\"></i>\n                                <span [translate]=\"'settings.remove'\">Remove</span>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"mb-3\">\n                        <span class=\"text-dark text-domain font-weight-bold\">{{ domain.domain }}</span>\n                      </div>\n                      <div class=\"my-2\">\n                        <span class=\"text-uppercase text-small\" [translate]=\"'settings.current_status'\">\n                          Current Status\n                        </span>\n                      </div>\n                      <div class=\"text-uppercase text-small d-flex flex-wrap align-content-start domain-status\">\n                        <div class=\"failed\" [class.verified]=\"domain.is_domain_verified\">\n                          <span [translate]=\"'settings.status_verification'\">Verification</span>\n                        </div>\n                        <div class=\"failed\" [class.verified]=\"domain.is_mx_verified\">\n                          <span [translate]=\"'settings.status_mx'\">\n                            <i class=\"fa fa-check\"></i>\n                            <i class=\"fa fa-exclamation\"></i>MX\n                          </span>\n                        </div>\n                        <div [class.verified]=\"domain.is_spf_verified\">\n                          <span [translate]=\"'settings.status_spf'\">\n                            <i class=\"fa fa-check\"></i>\n                            <i class=\"fa fa-exclamation\"></i>SPF\n                          </span>\n                        </div>\n                        <div [class.verified]=\"domain.is_dkim_verified\">\n                          <span [translate]=\"'settings.status_dkim'\">\n                            <i class=\"fa fa-check\"></i>\n                            <i class=\"fa fa-exclamation\"></i>DKIM\n                          </span>\n                        </div>\n                        <div [class.verified]=\"domain.is_dmarc_verified\">\n                          <span [translate]=\"'settings.status_dmarc'\">\n                            <i class=\"fa fa-check\"></i>\n                            <i class=\"fa fa-exclamation\"></i>DMARC\n                          </span>\n                        </div>\n                      </div>\n                      <div class=\"my-2\">\n                        <span class=\"text-uppercase text-small\">Catch all</span>\n                      </div>\n                      <mat-checkbox\n                        type=\"checkbox\"\n                        [checked]=\"domain.catch_all\"\n                        (change)=\"domain.catch_all = $event.checked; updateDomain(domain)\"\n                      >\n                      </mat-checkbox>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mt-4\">\n              <app-organization-users></app-organization-users>\n            </div>\n          </div>\n          <!-- Add New Domain Part -->\n          <div class=\"desc-card\" *ngIf=\"isAddingNewDomain\">\n            <div class=\"ml-3 my-3 my-sm-4\">\n              <h3 class=\"ui-header-subtitle mb-0\">\n                <strong [translate]=\"'settings.create_domain'\" *ngIf=\"!isEditing\">Create domain</strong>\n                <strong *ngIf=\"isEditing\">\n                  <span [translate]=\"'settings.domain'\">Domain</span>: {{ newDomain?.domain }}\n                </strong>\n              </h3>\n            </div>\n            <div class=\"desc-card-body bg-faded\">\n              <mat-vertical-stepper [selectedIndex]=\"currentStep\" #stepper>\n                <ng-template matStepperIcon=\"edit\">\n                  <i class=\"fa fa-check\"></i>\n                </ng-template>\n                <mat-step [stepControl]=\"domainNameForm\">\n                  <form [formGroup]=\"domainNameForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.id\"\n                        [translate]=\"'settings.add_domain_step.name'\"\n                      >\n                        Domain name\n                      </span>\n                      <span\n                        class=\"record-status px-2 py-1 font-weight-bold text-white text-small text-uppercase float-right\"\n                        [translate]=\"'settings.set'\"\n                        *ngIf=\"newDomain?.id\"\n                      >\n                        Set\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [translate]=\"'settings.add_domain_step.info'\">\n                          Add a domain that you own to your CTemplar account.\n                        </span>\n                      </div>\n                      <div>\n                        <input\n                          class=\"domain-input text-dark form-control\"\n                          id=\"domainInput\"\n                          type=\"text\"\n                          placeholder=\"mydomain.com\"\n                          formControlName=\"domainNameCtrl\"\n                        />\n                      </div>\n                      <div *ngIf=\"userState.isError && newDomainError\" class=\"l-alert l-alert-danger mt-3\">\n                        {{ newDomainError }}\n                      </div>\n                      <div class=\"mt-3 mt-sm-4\">\n                        <button class=\"btn btn-sm btn-secondary\" (click)=\"createDomain()\">\n                          <span [translate]=\"'settings.next'\">Next</span>\n                        </button>\n                        <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n                      </div>\n                    </div>\n                  </form>\n                </mat-step>\n                <mat-step [stepControl]=\"verifyForm\">\n                  <form [formGroup]=\"verifyForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.is_domain_verified\"\n                        [translate]=\"'settings.verify_step.name'\"\n                      >\n                        Verify\n                      </span>\n                      <span\n                        class=\"text-muted ml-2\"\n                        [class.green]=\"newDomain?.is_domain_verified\"\n                        [translate]=\"'settings.required'\"\n                      >\n                        Required\n                      </span>\n                      <span\n                        class=\"record-status px-2 py-1 font-weight-bold text-white text-small text-uppercase float-right\"\n                        [translate]=\"'settings.good'\"\n                        *ngIf=\"newDomain?.is_domain_verified\"\n                      >\n                        Good\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\" *ngIf=\"newDomain?.id\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [innerHTML]=\"'settings.verify_step.info' | translate\">\n                          For security reasons, we need to verify that you are the owner of your domain. Please add the\n                          following code into your DNS. Do not remove it even after successful verification. This can\n                          typically be done in the control panel of your domain name registrar.<br /><br />\n                          Please add the following TXT record:\n                        </span>\n                      </div>\n                      <div class=\"domains-list\">\n                        <div class=\"row\">\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.verify_step.type'\">\n                                Type\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.verification_record.type }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.verify_step.host_name'\">\n                                Host Name\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.verification_record.host }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-7 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span\n                                class=\"text-uppercase text-small\"\n                                [translate]=\"'settings.verify_step.value_data_points_to'\"\n                              >\n                                Value / Data / Points To\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.verification_record.value }}</span>\n                              <button\n                                mat-icon-button\n                                (click)=\"copyToClipboard(newDomain?.verification_record.value)\"\n                                class=\"copy-btn\"\n                              >\n                                <i class=\"fas fa-copy\" ngbTooltip=\"Copy to clipboard\"></i>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div\n                        *ngIf=\"userState?.isError\"\n                        class=\"l-alert l-alert-danger mt-3\"\n                        [translate]=\"'settings.domains_and_users.domain_verification_message'\"\n                      >\n                        Domain verification failed, please add above TXT record in your host DNS and try again. DNS\n                        records can take several hours to update. Once domain is verified, you can proceed to next step.\n                      </div>\n                      <ng-container *ngTemplateOutlet=\"nextButton\"></ng-container>\n                    </div>\n                  </form>\n                </mat-step>\n                <mat-step [stepControl]=\"mxForm\">\n                  <form [formGroup]=\"mxForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.is_mx_verified\"\n                        [translate]=\"'settings.mx_step.name'\"\n                      >\n                        MX\n                      </span>\n                      <span\n                        class=\"text-muted ml-2\"\n                        [class.green]=\"newDomain?.is_mx_verified\"\n                        [translate]=\"'settings.required'\"\n                      >\n                        Required\n                      </span>\n                      <span\n                        class=\"record-status px-2 py-1 font-weight-bold text-white text-small text-uppercase float-right\"\n                        [translate]=\"'settings.good'\"\n                        *ngIf=\"newDomain?.is_mx_verified\"\n                      >\n                        Good\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\" *ngIf=\"newDomain?.id\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [innerHTML]=\"'settings.mx_step.info' | translate\">\n                          Before you can receive emails for your custom domain addresses at CTemplar, you need to add\n                          the following MX record to your DNS. This can typically be done in the control panel of your\n                          domain name registrar.<br /><br />\n                          Please add the following MX record. Note, DNS records can take several hours to update.\n                        </span>\n                      </div>\n                      <div class=\"domains-list\">\n                        <div class=\"row\">\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.mx_step.type'\">Type</span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.mx_record.type }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.mx_step.host_name'\">\n                                Host Name\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.mx_record.host }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-3 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span\n                                class=\"text-uppercase text-small\"\n                                [translate]=\"'settings.mx_step.value_data_points_to'\"\n                                >Value / Data / Points To</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.mx_record.value }}</span>\n                              <button\n                                mat-icon-button\n                                (click)=\"copyToClipboard(newDomain?.mx_record.value)\"\n                                class=\"copy-btn\"\n                              >\n                                <i class=\"fas fa-copy\" ngbTooltip=\"Copy to clipboard\"></i>\n                              </button>\n                            </div>\n                          </div>\n                          <div class=\"col-md-4 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.mx_step.priority'\"\n                                >Priority</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.mx_record.priority }}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div\n                        *ngIf=\"userState?.isError\"\n                        class=\"l-alert l-alert-danger mt-3\"\n                        [translate]=\"'settings.mx_step.mx_failed_message'\"\n                      >\n                        MX Record verification failed, please add above MX record in your host DNS and try again. DNS\n                        records can take several hours to update. Once MX record is verified, you can proceed to next\n                        step.\n                      </div>\n                      <ng-container *ngTemplateOutlet=\"nextButton\"></ng-container>\n                    </div>\n                  </form>\n                </mat-step>\n                <mat-step [stepControl]=\"spfForm\">\n                  <form [formGroup]=\"spfForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.is_spf_verified\"\n                        [translate]=\"'settings.spf_step.name'\"\n                      >\n                        SPF\n                      </span>\n                      <span\n                        class=\"text-muted ml-2\"\n                        [class.green]=\"newDomain?.is_spf_verified\"\n                        [translate]=\"'settings.recommended'\"\n                      >\n                        Recommended\n                      </span>\n                      <span\n                        class=\"record-status px-2 py-1 font-weight-bold text-white text-small text-uppercase float-right\"\n                        [translate]=\"'settings.good'\"\n                        *ngIf=\"newDomain?.is_spf_verified\"\n                      >\n                        Good\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\" *ngIf=\"newDomain?.id\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [innerHTML]=\"'settings.spf_step.info' | translate\">\n                          SPF is used to specify who is allowed to send email for the domain so we strongly recommend\n                          including CTemplar in your SPF record. Please add the following TXT record into your DNS. This\n                          can typically be done in the control panel of your domain name registrar.<br /><br />\n                          Please add the following TXT record. Note, DNS records can take several hours to update.\n                        </span>\n                      </div>\n                      <div class=\"domains-list\">\n                        <div class=\"row\">\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.spf_step.type'\">Type</span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.spf_record.type }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.spf_step.host_name'\">\n                                Host Name\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.spf_record.host }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-7 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span\n                                class=\"text-uppercase text-small\"\n                                [translate]=\"'settings.spf_step.value_data_points_to'\"\n                                >Value / Data / Points To</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.spf_record.value }}</span>\n                              <button\n                                mat-icon-button\n                                (click)=\"copyToClipboard(newDomain?.spf_record.value)\"\n                                class=\"copy-btn\"\n                              >\n                                <i class=\"fas fa-copy\" ngbTooltip=\"Copy to clipboard\"></i>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <ng-container *ngTemplateOutlet=\"nextButton\"></ng-container>\n                    </div>\n                  </form>\n                </mat-step>\n                <mat-step [stepControl]=\"dkimForm\">\n                  <form [formGroup]=\"dkimForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.is_dkim_verified\"\n                        [translate]=\"'settings.dkim_step.name'\"\n                      >\n                        DKIM\n                      </span>\n                      <span\n                        class=\"text-muted ml-2\"\n                        [class.green]=\"newDomain?.is_dkim_verified\"\n                        [translate]=\"'settings.recommended'\"\n                      >\n                        Recommended\n                      </span>\n                      <span\n                        class=\"record-status px-2 py-1 font-weight-bold text-white text-small text-uppercase float-right\"\n                        [translate]=\"'settings.on'\"\n                        *ngIf=\"newDomain?.is_dkim_verified\"\n                      >\n                        On\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\" *ngIf=\"newDomain?.id\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [innerHTML]=\"'settings.dkim_step.info' | translate\">\n                          CTemplar supports DKIM signing for custom domains. To use DKIM authentication, please add the\n                          following TXT record into your DNS for this domain. This can typically be done in the control\n                          panel of your domain name registrar.<br /><br />\n                          Please add the follow TXT record. Note, DNS records can take several hours to update.\n                        </span>\n                      </div>\n                      <div class=\"domains-list\">\n                        <div class=\"row\">\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.dkim_step.type'\"\n                                >Type</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dkim_record.type }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.dkim_step.host_name'\">\n                                Host Name\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dkim_record.host }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-7 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span\n                                class=\"text-uppercase text-small\"\n                                [translate]=\"'settings.dkim_step.value_data_points_to'\"\n                              >\n                                Value / Data / Points To\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dkim_record.value }}</span>\n                              <button\n                                mat-icon-button\n                                (click)=\"copyToClipboard(newDomain?.dkim_record.value)\"\n                                class=\"copy-btn\"\n                              >\n                                <i class=\"fas fa-copy\" ngbTooltip=\"Copy to clipboard\"></i>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <ng-container *ngTemplateOutlet=\"nextButton\"></ng-container>\n                    </div>\n                  </form>\n                </mat-step>\n                <mat-step [stepControl]=\"dmarcForm\">\n                  <form [formGroup]=\"dmarcForm\">\n                    <ng-template matStepLabel>\n                      <span\n                        class=\"font-weight-bold\"\n                        [class.green]=\"newDomain?.is_dmarc_verified\"\n                        [translate]=\"'settings.dmarc_step.name'\"\n                      >\n                        DMARC\n                      </span>\n                      <span\n                        class=\"text-muted ml-2\"\n                        [class.green]=\"newDomain?.is_dmarc_verified\"\n                        [translate]=\"'settings.optional_advanced'\"\n                      >\n                        Optional, advanced\n                      </span>\n                    </ng-template>\n                    <div class=\"stepper-form\" *ngIf=\"newDomain?.id\">\n                      <div class=\"pb-3\">\n                        <span class=\"text-dark\" [innerHTML]=\"'settings.dmarc_step.info' | translate\">\n                          CTemplar supports DKIM signing for custom domains. To use DKIM authentication, please add the\n                          following TXT record into your DNS for this domain. This can typically be done in the control\n                          panel of your domain name registrar.<br /><br />\n                          Please add the follow TXT record. Note, DNS records can take several hours to update.</span\n                        >\n                      </div>\n                      <div class=\"domains-list\">\n                        <div class=\"row\">\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.dmarc_step.type'\"\n                                >Type</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dmarc_record.type }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-2 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span class=\"text-uppercase text-small\" [translate]=\"'settings.dmarc_step.host_name'\">\n                                Host Name\n                              </span>\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dmarc_record.host }}</span>\n                            </div>\n                          </div>\n                          <div class=\"col-md-7 col-sm-12\">\n                            <div class=\"pl-sm-3\">\n                              <span\n                                class=\"text-uppercase text-small\"\n                                [translate]=\"'settings.dmarc_step.value_data_points_to'\"\n                                >Value / Data / Points To</span\n                              >\n                            </div>\n                            <div class=\"bg-white px-3 py-3\">\n                              <span class=\"text-dark text-small\">{{ newDomain?.dmarc_record.value }}</span>\n                              <button\n                                mat-icon-button\n                                (click)=\"copyToClipboard(newDomain?.dmarc_record.value)\"\n                                class=\"copy-btn\"\n                              >\n                                <i class=\"fas fa-copy\" ngbTooltip=\"Copy to clipboard\"></i>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div>\n                        <button class=\"btn btn-sm btn-secondary mt-3 mt-sm-4\" (click)=\"finishAddingNewDomain()\">\n                          <span [translate]=\"'settings.next'\">Next</span>\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                </mat-step>\n              </mat-vertical-stepper>\n              <div class=\"btn-group-controls mt-3\">\n                <button class=\"btn btn-outline-secondary mr-3\" (click)=\"finishAddingNewDomain()\">\n                  <span class=\"text-small\" [translate]=\"'common.cancel'\">Cancel</span>\n                </button>\n                <button class=\"btn btn-secondary\" (click)=\"finishAddingNewDomain()\">\n                  <span class=\"text-small\" [translate]=\"'common.save'\">Save</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!-- Confirm domain delete modal -->\n<ng-template #confirmDeleteModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span [translate]=\"'contacts.delete.message'\">Are you sure, you want to delete</span>\n        <strong>{{ newDomain?.domain }}</strong\n        >?<br />\n        <span class=\"warning\">\n          <span class=\"warning-text\" [translate]=\"'settings.warning'\">Warning</span>:\n          <span [translate]=\"'settings.domains_and_users.domain_deletion_message'\">\n            All the associated email aliases and users(if any) of this domain will also be deleted.\n          </span>\n        </span>\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button\n          (click)=\"cancelDelete()\"\n          class=\"btn btn-secondary btn-sm mr-2\"\n          [translate]=\"'common.cancel'\"\n          role=\"button\"\n        >\n          Cancel\n        </button>\n        <button (click)=\"deleteDomain()\" class=\"btn btn-danger btn-sm\" [translate]=\"'common.delete'\" role=\"button\">\n          Delete\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm delete modal ends -->\n\n<ng-template #nextButton>\n  <div class=\"mt-3 mt-sm-4\">\n    <button class=\"btn btn-sm btn-secondary mr-2\" *ngIf=\"currentStep > 1\" (click)=\"verifyDomain(newDomain?.id)\">\n      <span [translate]=\"'settings.verify'\">Verify</span>\n    </button>\n\n    <button class=\"btn btn-sm btn-secondary\" (click)=\"verifyDomain(newDomain?.id, true)\">\n      <span [translate]=\"'settings.next'\">Next</span>\n    </button>\n    <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n  </div>\n</ng-template>\n","import { Component, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbDropdownConfig, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { CreateDomain, DeleteDomain, GetDomains, UpdateDomain, VerifyDomain } from '../../../store/actions';\nimport { AppState, AuthState, Domain, Settings, UserState, MailBoxesState } from '../../../store/datatypes';\nimport { SharedService } from '../../../store/services';\nimport { PRIMARY_WEBSITE } from '../../../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-custom-domains',\n  templateUrl: './custom-domains.component.html',\n  styleUrls: ['./custom-domains.component.scss'],\n})\nexport class CustomDomainsComponent implements OnInit {\n  @Output() onGotoTab = new EventEmitter<string>();\n\n  @ViewChild('confirmDeleteModal') confirmDeleteModal: any;\n\n  userState: UserState;\n\n  authState: AuthState;\n\n  settings: Settings;\n\n  mailboxes: Array<any>;\n\n  domains: Domain[] = [];\n\n  newDomain: Domain;\n\n  newDomainError: string;\n\n  isAddingNewDomain = false;\n\n  currentStep = 0;\n\n  domainNameForm: FormGroup;\n\n  verifyForm: FormGroup;\n\n  mxForm: FormGroup;\n\n  spfForm: FormGroup;\n\n  dkimForm: FormGroup;\n\n  dmarcForm: FormGroup;\n\n  isEditing: boolean;\n\n  mailboxesForCustomDomains: Map<number, Array<string>> = new Map();\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  private confirmModalRef: NgbModalRef;\n\n  constructor(\n    config: NgbDropdownConfig,\n    private modalService: NgbModal,\n    private store: Store<AppState>,\n    private formBuilder: FormBuilder,\n    private sharedService: SharedService,\n  ) {\n    // customize default values of dropdowns used by this component tree\n    config.autoClose = true; // ~'outside';\n  }\n\n  ngOnInit() {\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.authState = authState;\n      });\n\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        if (!user.inProgress) {\n          this.settings = user.settings;\n          this.domains = user.customDomains;\n          this.newDomain = user.newCustomDomain;\n          this.newDomainError = user.newCustomDomainError;\n          this.currentStep = user.currentCreationStep;\n          this.prepareMapForDomainAlias(this.domains, this.mailboxes);\n        }\n      });\n\n    this.domainNameForm = this.formBuilder.group({\n      domainNameCtrl: ['', Validators.required],\n    });\n\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailboxesState: MailBoxesState) => {\n        this.mailboxes = mailboxesState.mailboxes;\n        this.prepareMapForDomainAlias(this.domains, this.mailboxes);\n      });\n\n    this.verifyForm = this.formBuilder.group({});\n    this.mxForm = this.formBuilder.group({});\n    this.spfForm = this.formBuilder.group({});\n    this.dkimForm = this.formBuilder.group({});\n    this.dmarcForm = this.formBuilder.group({});\n  }\n\n  prepareMapForDomainAlias(domains: Domain[], aliases: Array<any>) {\n    if (domains && aliases) {\n      domains.forEach((domain, indexDomain) => {\n        let aliasesForDomain: any[] = [];\n        aliases.forEach(alias => {\n          const domainForAlias = alias.email.split('@')[1];\n          if (domain.domain === domainForAlias && alias.is_enabled) {\n            aliasesForDomain.push(alias.email);\n            if (!domain.catch_all_email && aliasesForDomain.length === 1) {\n              domain.catch_all_email = alias.email;\n              this.domains[indexDomain] = domain;\n            }\n          }\n        });\n        this.mailboxesForCustomDomains.set(domain.id, aliasesForDomain);\n      });\n    }\n  }\n\n  startAddingNewDomain(domain: any = null) {\n    this.newDomainError = null;\n    if (domain) {\n      this.currentStep = 1;\n      this.isEditing = true;\n      this.newDomain = domain;\n      this.isAddingNewDomain = true;\n    } else if (!this.userState.inProgress) {\n      this.currentStep = 0;\n      domain = {};\n      this.newDomain = domain;\n      this.isAddingNewDomain = true;\n      this.isEditing = false;\n    }\n  }\n\n  createDomain() {\n    const domain = this.domainNameForm.value.domainNameCtrl;\n    if (domain !== '') {\n      this.store.dispatch(new CreateDomain(domain));\n    }\n  }\n\n  copyToClipboard(text: string) {\n    this.sharedService.copyToClipboard(text);\n  }\n\n  verifyDomain(id: number, gotoNextStep = false, reverify = false) {\n    if (id !== null) {\n      this.store.dispatch(new VerifyDomain({ id, gotoNextStep, reverify, currentStep: this.currentStep }));\n    }\n  }\n\n  updateDomain(domain: Domain) {\n    this.store.dispatch(new UpdateDomain(domain));\n  }\n\n  onSelectCatchAllEmail(domain: Domain, email: string) {\n    if (domain.catch_all_email !== email) {\n      domain.catch_all_email = email;\n      this.updateDomain(domain);\n    }\n  }\n\n  finishAddingNewDomain() {\n    this.isAddingNewDomain = false;\n    this.currentStep = 0;\n    this.newDomain = null;\n    this.domainNameForm.setValue({ domainNameCtrl: '' });\n    this.store.dispatch(new GetDomains());\n  }\n\n  openConfirmDeleteModal(domain: Domain) {\n    if (!this.userState.inProgress) {\n      this.newDomain = domain;\n      this.confirmModalRef = this.modalService.open(this.confirmDeleteModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n        backdrop: 'static',\n      });\n    }\n  }\n\n  cancelDelete() {\n    this.confirmModalRef.close();\n  }\n\n  deleteDomain() {\n    this.confirmModalRef.close();\n    this.store.dispatch(new DeleteDomain(this.newDomain.id));\n  }\n\n  gotoPricingPlans() {\n    this.onGotoTab.emit('dashboard-and-plans');\n  }\n}\n","<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'page_pricing.folders'\">Folders</strong>\n      <app-loading-spinner [showSpinner]=\"userState?.inProgress && folders.length === 0\"></app-loading-spinner>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <button\n        class=\"btn btn-secondary text-small mb-2\"\n        (click)=\"addFolder()\"\n        [ngbTooltip]=\"'mail_sidebar.add_folder' | translate\"\n      >\n        <span [translate]=\"'mail_sidebar.add_folder'\">Add Folder</span>\n      </button>\n      <button\n        class=\"btn btn-sm btn-secondary float-right\"\n        (click)=\"startReorder()\"\n        *ngIf=\"!reorder && folders?.length > 1\"\n        [ngbTooltip]=\"'settings.reorder_addresses' | translate\"\n      >\n        <span [translate]=\"'settings.reorder'\">Reorder</span>\n      </button>\n      <button\n        class=\"sort-alphabetic-btn btn btn-sm float-right\"\n        (click)=\"sortWithAlphabetic()\"\n        *ngIf=\"!sortedWithAlphabetic && folders?.length > 1\"\n        [ngbTooltip]=\"'settings.sort_with_alphabetic' | translate\"\n      >\n        <em class=\"fas fa-long-arrow-alt-down cursor-pointer\"></em>\n      </button>\n      <button\n        class=\"sort-alphabetic-btn btn btn-sm float-right\"\n        (click)=\"sortWithAlphabetic()\"\n        *ngIf=\"sortedWithAlphabetic && folders?.length > 1\"\n        [ngbTooltip]=\"'settings.sort_with_analphabetic' | translate\"\n      >\n        <em class=\"fas fa-long-arrow-alt-up cursor-pointer\"></em>\n      </button>\n      <app-loading-spinner class=\"float-right\" [showSpinner]=\"reorderInProgress && !reorder\"></app-loading-spinner>\n      <ng-container *ngTemplateOutlet=\"reorderButtons\"></ng-container>\n      <ul\n        cdkDropList\n        class=\"ui-list ui-list-styled list-styled folders-list\"\n        (cdkDropListDropped)=\"onFolderDrop($event)\"\n      >\n        <li *ngFor=\"let folder of folders; let i = index\" class=\"ui-list-item ui-list-item-xs-full\" cdkDrag>\n          <div class=\"row row-xs align-items-center folder-item\">\n            <div class=\"col-10 col-sm-8 show-ellipses\">\n              <div class=\"drag-drop-handle\" cdkDragHandle *ngIf=\"reorder\">\n                <i class=\"fas fa-arrows-alt-v\"></i>\n              </div>\n              <span>\n                <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n              </span>\n              <span class=\"folder-name\">{{ folder.name }}</span>\n              <span class=\"folder-messages-counts\">( {{ folder.counts }}</span>\n              <span [translate]=\"'settings.conversations'\" *ngIf=\"folder.counts > 1; else elseConversation\"\n                >conversations )</span\n              >\n              <ng-template #elseConversation>\n                <span [translate]=\"'settings.conversation'\">conversation )</span>\n              </ng-template>\n            </div>\n            <div class=\"col-2 col-sm-4\">\n              <div align=\"right\" *ngIf=\"reorder\">\n                <i\n                  class=\"fas fa-chevron-up cursor-pointer mr-2\"\n                  [class.hidden]=\"i === 0\"\n                  [ngbTooltip]=\"'settings.move_up' | translate\"\n                  (click)=\"sortUp(i)\"\n                >\n                </i>\n                <i\n                  class=\"fas fa-chevron-down cursor-pointer\"\n                  [class.hidden]=\"i === folders.length - 1\"\n                  [ngbTooltip]=\"'settings.move_down' | translate\"\n                  (click)=\"sortDown(i)\"\n                >\n                </i>\n              </div>\n              <ul\n                *ngIf=\"!reorder\"\n                class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\"\n              >\n                <li>\n                  <a role=\"button\" (click)=\"addFolder(folder, true)\" [ngbTooltip]=\"'settings.edit_folder' | translate\">\n                    <i class=\"icon icon-edit\"></i>\n                  </a>\n                </li>\n                <li>\n                  <a\n                    role=\"button\"\n                    (click)=\"showConfirmationModal(folder)\"\n                    [ngbTooltip]=\"'settings.delete_folder' | translate\"\n                  >\n                    <i class=\"icon icon-garbage\"></i>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n<!-- Reorder folder -->\n<ng-template #reorderButtons>\n  <div align=\"right\" *ngIf=\"reorder\" class=\"float-right\">\n    <app-loading-spinner [showSpinner]=\"reorderInProgress\"></app-loading-spinner>\n    <button class=\"btn btn-sm btn-primary mr-1\" [disabled]=\"reorderInProgress\" (click)=\"cancelOrder()\">\n      <span [translate]=\"'common.cancel'\">Cancel</span>\n    </button>\n    <button class=\"btn btn-sm btn-secondary\" [disabled]=\"reorderInProgress\" (click)=\"saveOrder()\">\n      <span [translate]=\"'settings.save_order'\">Save order</span>\n    </button>\n  </div>\n</ng-template>\n\n<!-- Confirm delete folder modal -->\n<ng-template #confirmationModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span [translate]=\"'settings.delete_folder_message'\">Are you sure, you want to delete folder</span>\n        <b>\"{{ selectedFolder?.name }}\"</b>?\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n          <span [translate]=\"'common.cancel'\">Cancel</span>\n        </button>\n        <button (click)=\"deleteFolder()\" class=\"btn btn-danger btn-sm\" role=\"button\" [disabled]=\"userState?.inProgress\">\n          <span [translate]=\"'settings.delete'\">Delete</span>\n        </button>\n        <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm delete folder modal ends -->\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { Store } from '@ngrx/store';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { Folder } from '../../../store/models';\nimport { AppState, UserState, MailState } from '../../../store/datatypes';\nimport { DeleteFolder, UpdateFolderOrder, GetCustomFolderMessageCount } from '../../../store/actions';\nimport { MAX_FOLDERS_COUNT } from '../../../shared/config';\nimport { CreateFolderComponent } from '../../dialogs/create-folder/create-folder.component';\nimport { NotificationService } from '../../../store/services/notification.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-folders',\n  templateUrl: './folders.component.html',\n  styleUrls: ['../mail-settings.component.scss', './folders.component.scss'],\n})\nexport class FoldersComponent implements OnInit {\n  folders: Array<Folder> = [];\n\n  userState: UserState;\n\n  @ViewChild('confirmationModal') confirmationModal: any;\n\n  confirmModalRef: NgbModalRef;\n\n  selectedFolder: Folder;\n\n  reorder: boolean;\n\n  sortedWithAlphabetic = false;\n\n  reorderInProgress = false;\n\n  private unmodifiedFolders: Array<Folder>;\n\n  private mailState: MailState;\n\n  constructor(\n    private store: Store<AppState>,\n    private modalService: NgbModal,\n    private notificationService: NotificationService,\n  ) {}\n\n  ngOnInit() {\n    /**\n     * Get list of customFolders for current user\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.store.dispatch(new GetCustomFolderMessageCount());\n        if (user.inProgress) {\n          this.reorderInProgress = true;\n          return;\n        }\n        if (this.reorderInProgress) {\n          this.reorderInProgress = false;\n          this.reorder = false;\n        }\n        this.folders = [...user.customFolders];\n      });\n    /**\n     * Add message count on each custom folder\n     */\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        this.mailState = mailState;\n        const mergeById = (a1: any[], a2: any[]) =>\n          a1.map(itm => ({\n            ...itm,\n            ...a2.find(item => item.folder === itm.name && item),\n          }));\n\n        this.folders = mergeById(this.folders, this.mailState.customFolderMessageCount);\n      });\n  }\n\n  showConfirmationModal(folder: Folder) {\n    this.confirmModalRef = this.modalService.open(this.confirmationModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n    this.selectedFolder = folder;\n  }\n\n  /**\n   * @description\n   * Prime Users - Can create as many folders as they want\n   * Free Users - Only allow a maximum of 5 folders per account\n   */\n  // == Open NgbModal\n  addFolder(folder: Folder = { id: null, name: '', color: '' }, edit?: boolean) {\n    const options: any = {\n      centered: true,\n      windowClass: 'modal-sm mailbox-modal create-folder-modal',\n    };\n    const component = this.modalService.open(CreateFolderComponent, options).componentInstance;\n    component.folder = folder;\n    component.edit = edit;\n  }\n\n  deleteFolder() {\n    this.store.dispatch(new DeleteFolder(this.selectedFolder));\n    setTimeout(() => {\n      this.confirmModalRef.dismiss();\n    }, 1000);\n  }\n\n  sortDown(index: number) {\n    const sortOrder = this.folders[index].sort_order;\n    this.folders[index].sort_order = this.folders[index + 1].sort_order;\n    this.folders[index + 1].sort_order = sortOrder;\n    this.folders.sort((a, b) => {\n      return a.sort_order - b.sort_order;\n    });\n  }\n\n  sortUp(index: number) {\n    const sortOrder = this.folders[index].sort_order;\n    this.folders[index].sort_order = this.folders[index - 1].sort_order;\n    this.folders[index - 1].sort_order = sortOrder;\n    this.folders.sort((a, b) => {\n      return a.sort_order - b.sort_order;\n    });\n  }\n\n  startReorder() {\n    this.reorder = true;\n    this.unmodifiedFolders = this.folders.map(x => ({ ...x }));\n  }\n\n  saveOrder() {\n    this.reorderInProgress = true;\n    const payload: any = {\n      folders: this.folders,\n      data: {\n        folder_list: this.folders.map(item => {\n          return { folder_id: item.id, sort_order: item.sort_order };\n        }),\n      },\n    };\n    this.store.dispatch(new UpdateFolderOrder(payload));\n  }\n\n  cancelOrder() {\n    this.reorder = false;\n    this.folders = this.unmodifiedFolders;\n  }\n\n  sortWithAlphabetic() {\n    this.sortedWithAlphabetic = !this.sortedWithAlphabetic;\n    if (this.sortedWithAlphabetic) {\n      this.folders\n        .sort((f, s) => f.name.localeCompare(s.name))\n        .forEach((folder, index) => {\n          folder.sort_order = index + 1;\n          this.folders[index] = folder;\n        });\n    } else {\n      this.folders\n        .sort((f, s) => -f.name.localeCompare(s.name))\n        .forEach((folder, index) => {\n          folder.sort_order = index + 1;\n          this.folders[index] = folder;\n        });\n    }\n    this.saveOrder();\n  }\n\n  onFolderDrop(event: CdkDragDrop<Folder[]>) {\n    moveItemInArray(this.folders, event.previousIndex, event.currentIndex);\n    this.folders.forEach((folder: Folder, index) => {\n      folder.sort_order = index + 1;\n    });\n  }\n}\n","<header class=\"ui-header ui-header-bordered\">\n  <h5 class=\"ui-header-subtitle text-dark mb-0\">\n    <strong [translate]=\"'settings.invitation_codes'\">Invitation Codes</strong>\n  </h5>\n</header>\n<div class=\"mailbox-section-body mailbox-section-body-sm position-relative\">\n  <div class=\"form-content-holder\">\n    <div class=\"form-content-row\">\n      <div class=\"align-items-center\">\n        <div>\n          <div class=\"row\">\n            <div class=\"col mb-2\" align=\"left\">\n              <button\n                type=\"button\"\n                ngbTooltip=\"Generate an invitation code\"\n                [disabled]=\"inProgress || !isPrime\"\n                (click)=\"generateCode()\"\n                class=\"btn btn-sm btn-secondary\"\n              >\n                <span>Generate a code</span>\n              </button>\n            </div>\n            <app-loading-spinner class=\"loading-spinner\" [showSpinner]=\"inProgress\"></app-loading-spinner>\n          </div>\n          <div>\n            <div *ngIf=\"!isPrime\" class=\"l-alert text-dark\">\n              Note: Only paid customers can generate invitation codes.\n            </div>\n            <div *ngIf=\"inviteCodes?.length > 0\">\n              <ul class=\"ui-list ui-list-styled list-styled users-list\">\n                <li class=\"ui-list-item ui-list-item-xs-full\">\n                  <div class=\"row row-xs align-items-center\">\n                    <div class=\"col-6 font-weight-bold col-item\">Code</div>\n                    <div class=\"col-3 col-item\">\n                      <div class=\"form-label mb-0 font-weight-bold\">Expiration date</div>\n                    </div>\n                    <div class=\"col-3 font-weight-bold col-item\">Is Used ?</div>\n                  </div>\n                </li>\n\n                <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let inviteCode of inviteCodes\">\n                  <div class=\"row row-xs align-items-center\">\n                    <div class=\"col-6 text-dark col-item\">\n                      <span>{{ inviteCode.code }}</span>\n                      <button mat-icon-button (click)=\"copyToClipboard(inviteCode.code)\" class=\"copy-btn\">\n                        <i class=\"fas fa-copy font-20px\" ngbTooltip=\"Copy to clipboard\"></i>\n                      </button>\n                    </div>\n                    <div class=\"col-3 col-item\">\n                      <div class=\"form-label text-dark mb-0\">\n                        {{ inviteCode.expiration_date | date: 'medium' }}\n                      </div>\n                    </div>\n                    <div class=\"col-3 text-dark col-item\">\n                      <div class=\"form-label text-dark mb-0\">\n                        {{ inviteCode.is_used ? 'YES' : 'NO' }}\n                      </div>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, InviteCode, UserState } from '../../../store/datatypes';\nimport { GenerateInviteCode, GetInviteCodes } from '../../../store/actions';\nimport { PRIMARY_WEBSITE } from '../../../shared/config';\nimport { SharedService } from '../../../store/services';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-invite-codes',\n  templateUrl: './invite-codes.component.html',\n  styleUrls: ['./invite-codes.component.scss', '../mail-settings.component.scss'],\n})\nexport class InviteCodesComponent implements OnInit {\n  inviteCodes: InviteCode[] = [];\n\n  inProgress: boolean;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  isPrime: boolean;\n\n  isLoaded: boolean;\n\n  constructor(private store: Store<AppState>, private sharedService: SharedService) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        this.inviteCodes = userState.inviteCodes;\n        this.inProgress = userState.inProgress;\n        this.isPrime = userState.isPrime;\n        if (this.isPrime && !this.isLoaded) {\n          this.isLoaded = true;\n          this.store.dispatch(new GetInviteCodes());\n        }\n      });\n  }\n\n  generateCode() {\n    this.store.dispatch(new GenerateInviteCode());\n  }\n\n  copyToClipboard(value: string) {\n    this.sharedService.copyToClipboard(value);\n  }\n}\n","<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.forwarding.autoresponder'\">Autoresponder</strong>\n      <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <div class=\"form-group col\">\n        <label class=\"font-weight-bold m-0\">Timezone: {{ settings.timezone }}</label>\n      </div>\n      <div class=\"form-group col\">\n        <div class=\"toggle-switcher\">\n          <input\n            class=\"d-none toggle-switcher-control\"\n            id=\"autoresponder\"\n            name=\"autoresponder\"\n            type=\"checkbox\"\n            [(ngModel)]=\"autoresponder.autoresponder_active\"\n          />\n          <label for=\"autoresponder\"></label>\n          <span class=\"toggle-switcher-text\" [translate]=\"'settings.forwarding.autoresponder'\">Autoresponder</span>\n        </div>\n      </div>\n      <div class=\"form-group col\">\n        <div class=\"fancy-field-group\">\n          <input\n            type=\"checkbox\"\n            id=\"timeRestricted\"\n            name=\"timeRestricted\"\n            [(ngModel)]=\"autoresponder.is_time_range_restricted\"\n            class=\"d-none fancy-field-control fancy-field-control-sm\"\n          />\n          <label for=\"timeRestricted\" [translate]=\"'settings.forwarding.restrict'\">Restrict to time range</label>\n        </div>\n      </div>\n      <div class=\"form-group row col-md-8\">\n        <div class=\"col-md-12 row\">\n          <div class=\"form-group col-sm col-sm-6\">\n            <label class=\"form-inline\" [translate]=\"'settings.forwarding.start_time'\">Start Time</label>\n            <ngb-timepicker\n              [(ngModel)]=\"startTime\"\n              [meridian]=\"true\"\n              [disabled]=\"!autoresponder.is_time_range_restricted\"\n            ></ngb-timepicker>\n          </div>\n          <div class=\"form-group col-sm col-sm-6\">\n            <label class=\"form-inline\" [translate]=\"'settings.forwarding.end_time'\">End Time</label>\n            <ngb-timepicker\n              [(ngModel)]=\"endTime\"\n              [meridian]=\"true\"\n              [disabled]=\"!autoresponder.is_time_range_restricted\"\n            ></ngb-timepicker>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group col-md-10\">\n        <div class=\"form-group\">\n          <label for=\"autoresponseMessage\" class=\"form-inline\" [translate]=\"'settings.forwarding.auto_message'\">\n            Email autoresponse message\n          </label>\n          <quill-editor\n            id=\"autoresponseMessage\"\n            [(ngModel)]=\"autoresponder.autoresponder_message\"\n            [modules]=\"quillModules\"\n            (onBlur)=\"editorFocused(false)\"\n            (onFocus)=\"editorFocused(true)\"\n          >\n          </quill-editor>\n        </div>\n      </div>\n      <div class=\"form-group col\">\n        <div class=\"toggle-switcher\">\n          <input\n            class=\"d-none toggle-switcher-control\"\n            id=\"vacationAutoresponder\"\n            name=\"vacationAutoresponder\"\n            type=\"checkbox\"\n            [(ngModel)]=\"autoresponder.vacationautoresponder_active\"\n          />\n          <label for=\"vacationAutoresponder\"></label>\n          <span class=\"toggle-switcher-text\" [translate]=\"'settings.forwarding.vac_autoresponder'\">\n            Vacation Autoresponder\n          </span>\n        </div>\n      </div>\n      <div class=\"form-group row col-md-8\">\n        <div class=\"col-md-12 row\">\n          <div class=\"form-group col-sm col-sm-6\">\n            <label class=\"form-inline\" [translate]=\"'settings.forwarding.start_date'\">Start Date</label>\n            <ngb-datepicker\n              #startDatePicker\n              [(ngModel)]=\"startDate\"\n              [disabled]=\"!autoresponder.vacationautoresponder_active\"\n              class=\"bg-white ng-datepicker ng-datepicker-265\"\n            >\n            </ngb-datepicker>\n          </div>\n          <div class=\"form-group col-sm col-sm-6\">\n            <label class=\"form-inline\" [translate]=\"'settings.forwarding.end_date'\">End Date</label>\n            <ngb-datepicker\n              #endDatePicker\n              [(ngModel)]=\"endDate\"\n              [disabled]=\"!autoresponder.vacationautoresponder_active\"\n              class=\"bg-white ng-datepicker ng-datepicker-265\"\n            >\n            </ngb-datepicker>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group col-md-10\">\n        <div class=\"form-group\">\n          <label for=\"vacationAutoresponseMessage\" class=\"form-inline\" [translate]=\"'settings.forwarding.auto_message'\">\n            Email autoresponse message\n          </label>\n          <quill-editor\n            id=\"vacationAutoresponseMessage\"\n            [(ngModel)]=\"autoresponder.vacationautoresponder_message\"\n            [modules]=\"quillModules\"\n            (onBlur)=\"editorFocused(false)\"\n            (onFocus)=\"editorFocused(true)\"\n          >\n          </quill-editor>\n        </div>\n      </div>\n      <div class=\"form-group col\">\n        <div class=\"fancy-field-group\">\n          <input\n            type=\"checkbox\"\n            id=\"onlyContacts\"\n            name=\"onlyContacts\"\n            [(ngModel)]=\"autoresponder.only_contacts\"\n            class=\"d-none fancy-field-control fancy-field-control-sm\"\n          />\n          <label for=\"onlyContacts\" [translate]=\"'settings.forwarding.send_response'\">\n            Only send a response to people in my contacts\n          </label>\n        </div>\n      </div>\n      <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger mb-3 ml-1\">\n        {{ errorMessage }}\n      </div>\n      <div class=\"form-group\">\n        <button\n          (click)=\"save()\"\n          [disabled]=\"userState.inProgress\"\n          class=\"btn btn-secondary btn-sm\"\n          [translate]=\"'common.save'\"\n        >\n          Save\n        </button>\n        <app-loading-spinner [showSpinner]=\"userState.inProgress\"></app-loading-spinner>\n      </div>\n    </div>\n  </div>\n</section>\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { NgbDatepicker, NgbDateStruct, NgbModal, NgbTimeStruct } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { SaveAutoResponder, SnackErrorPush } from '../../../store/actions';\nimport { AppState, AutoResponder, Settings, UserState } from '../../../store/datatypes';\nimport { DateTimeUtilService } from '../../../store/services/datetime-util.service';\nimport { SharedService } from '../../../store/services';\nimport { QUILL_FORMATTING_MODULES } from '../../../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-autoresponder',\n  templateUrl: './mail-autoresponder.component.html',\n  styleUrls: ['./mail-autoresponder.component.scss', '../mail-settings.component.scss'],\n})\nexport class MailAutoresponderComponent implements OnInit, OnDestroy {\n  @ViewChild('startDatePicker') startDatePicker: NgbDatepicker;\n\n  @ViewChild('endDatePicker') endDatePicker: NgbDatepicker;\n\n  userState: UserState;\n\n  settings: Settings;\n\n  autoresponder: AutoResponder = {};\n\n  startTime: NgbTimeStruct = { hour: 0, minute: 0, second: 0 };\n\n  endTime: NgbTimeStruct = { hour: 0, minute: 0, second: 0 };\n\n  startDate: NgbDateStruct;\n\n  endDate: NgbDateStruct;\n\n  errorMessage: string;\n\n  quillModules = QUILL_FORMATTING_MODULES;\n\n  constructor(\n    private store: Store<AppState>,\n    private formBuilder: FormBuilder,\n    private modalService: NgbModal,\n    private dateTimeUtilService: DateTimeUtilService,\n  ) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.settings = user.settings;\n        if (user.autoresponder) {\n          this.autoresponder = user.autoresponder;\n          this.initData(this.autoresponder);\n        }\n        this.errorMessage = user.autoResponderErrorMessage;\n      });\n  }\n\n  ngOnDestroy(): void {\n    SharedService.isQuillEditorOpen = false;\n  }\n\n  /**\n   * initialize Autoresponder time and date from user's autoresponder status\n   */\n  initData(autoresponder: AutoResponder) {\n    if (autoresponder) {\n      this.startTime = autoresponder.start_time\n        ? this.dateTimeUtilService.getNgbTimeStructFromTimeStr(autoresponder.start_time, 'HH:mm:ss')\n        : { hour: 0, minute: 0, second: 0 };\n      this.endTime = autoresponder.end_time\n        ? this.dateTimeUtilService.getNgbTimeStructFromTimeStr(autoresponder.end_time, 'HH:mm:ss')\n        : { hour: 0, minute: 0, second: 0 };\n      this.startDate = autoresponder.start_date\n        ? this.dateTimeUtilService.getNgbDateStructFromDateStr(autoresponder.start_date, 'YYYY-MM-DD')\n        : null;\n      this.endDate = autoresponder.end_date\n        ? this.dateTimeUtilService.getNgbDateStructFromDateStr(autoresponder.end_date, 'YYYY-MM-DD')\n        : null;\n      if (this.startDate && this.startDatePicker) {\n        this.startDatePicker.navigateTo(this.startDate);\n      }\n      if (this.endDate && this.endDatePicker) {\n        this.endDatePicker.navigateTo(this.endDate);\n      }\n    }\n  }\n\n  save() {\n    // save user's choice for autoresponder\n    if (this.autoresponder.is_time_range_restricted) {\n      this.autoresponder.start_time = this.dateTimeUtilService.createTimeStrFromNgbTimeStruct(\n        this.startTime,\n        'HH:mm:ss',\n      );\n      this.autoresponder.end_time = this.dateTimeUtilService.createTimeStrFromNgbTimeStruct(this.endTime, 'HH:mm:ss');\n      if (this.dateTimeUtilService.isBefore(this.autoresponder.end_time, this.autoresponder.start_time, 'HH:mm:ss')) {\n        this.store.dispatch(new SnackErrorPush({ message: 'End time cannot be before start time.' }));\n        return;\n      }\n    }\n    if (this.autoresponder.vacationautoresponder_active) {\n      this.autoresponder.start_date = this.startDate\n        ? this.dateTimeUtilService.createDateStrFromNgbDateStruct(this.startDate, 'YYYY-MM-DD')\n        : null;\n      this.autoresponder.end_date = this.endDate\n        ? this.dateTimeUtilService.createDateStrFromNgbDateStruct(this.endDate, 'YYYY-MM-DD')\n        : null;\n      if (\n        this.autoresponder.end_date &&\n        this.autoresponder.start_date &&\n        this.dateTimeUtilService.isBefore(this.autoresponder.end_date, this.autoresponder.start_date)\n      ) {\n        this.store.dispatch(new SnackErrorPush({ message: 'End date cannot be before start date.' }));\n        return;\n      }\n    }\n    this.store.dispatch(new SaveAutoResponder(this.autoresponder));\n  }\n\n  editorFocused(value: boolean) {\n    SharedService.isQuillEditorOpen = value;\n  }\n}\n","<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.filters.name'\">Filters</strong>\n      <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <button\n        class=\"btn btn-sm btn-secondary mb-2\"\n        (click)=\"startSetPriority()\"\n        *ngIf=\"!inSetPriority && filters?.length > 1\"\n        [ngbTooltip]=\"'settings.reorder_addresses' | translate\"\n      >\n        <span>Set Priority</span>\n      </button>\n      <ng-container *ngTemplateOutlet=\"setPriorityButtons\"></ng-container>\n      <ul cdkDropList class=\"ui-list ui-list-styled list-styled\" (cdkDropListDropped)=\"onFilterDrop($event)\">\n        <li *ngFor=\"let filter of filters; let i = index\" class=\"ui-list-item ui-list-item-xs-full\" cdkDrag>\n          <div class=\"row row-xs align-items-center filter-item\">\n            <div class=\"col-10 col-sm-8 show-ellipses\">\n              <div class=\"drag-drop-handle\" cdkDragHandle *ngIf=\"inSetPriority\">\n                <i class=\"fas fa-arrows-alt-v\"></i>\n              </div>\n              <span>\n                {{ filter.name }}\n              </span>\n            </div>\n            <div class=\"col-2 col-sm-4\">\n              <div align=\"right\" *ngIf=\"inSetPriority\">\n                <i\n                  class=\"fas fa-chevron-up cursor-pointer mr-2\"\n                  [class.hidden]=\"i === 0\"\n                  [ngbTooltip]=\"'settings.move_up' | translate\"\n                  (click)=\"priorityUp(i)\"\n                >\n                </i>\n                <i\n                  class=\"fas fa-chevron-down cursor-pointer\"\n                  [class.hidden]=\"i === filters.length - 1\"\n                  [ngbTooltip]=\"'settings.move_down' | translate\"\n                  (click)=\"priorityDown(i)\"\n                >\n                </i>\n              </div>\n              <ul\n                *ngIf=\"!inSetPriority\"\n                class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\"\n              >\n                <li>\n                  <a (click)=\"openCustomFilterModal(filter)\" role=\"button\">\n                    <i class=\"icon icon-edit\"></i>\n                  </a>\n                </li>\n                <li>\n                  <a (click)=\"confirmDeleteFilter(filter)\" role=\"button\">\n                    <i class=\"icon icon-garbage\"></i>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n      <div class=\"info-card\" *ngIf=\"!inSetPriority\">\n        <p [translate]=\"'settings.filters.add_filter'\">\n          Add a filter to perform actions such as automatically labeling or archiving.\n        </p>\n        <a href=\"javascript:void(0);\" class=\"text-uppercase btn-link\" role=\"button\" (click)=\"openCustomFilterModal()\">\n          <strong>\n            <u [translate]=\"'settings.filters.add_custom_filter'\"> Add custom filter </u>\n          </strong>\n        </a>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!-- Set Priority Filter -->\n<ng-template #setPriorityButtons>\n  <div *ngIf=\"inSetPriority\" class=\"mb-2\">\n    <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n    <button class=\"btn btn-sm btn-secondary mr-1\" [disabled]=\"userState?.inProgress\" (click)=\"savePriority()\">\n      <span>Save Priority</span>\n    </button>\n    <button class=\"btn btn-sm btn-primary\" [disabled]=\"userState?.inProgress\" (click)=\"cancelSetPriority()\">\n      <span [translate]=\"'common.cancel'\">Cancel</span>\n    </button>\n  </div>\n</ng-template>\n\n<!-- Add custom filter Modal -->\n<ng-template #customFilterModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"customFilterModalLabel\">\n      <strong [translate]=\"'settings.filters.custom_filter'\"> Custom filter </strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <form ngNativeValidate class=\"signup-form\" [formGroup]=\"createFilterForm\" (submit)=\"onSubmit()\">\n    <div class=\"modal-body bg-faded\">\n      <div class=\"form-content-holder\">\n        <div class=\"form-group\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-sm-3\">\n              <label class=\"form-label mb-sm-0\" for=\"filterName\">\n                <span [translate]=\"'settings.filters.filter_name'\"> Filter name </span>\n                :\n              </label>\n            </div>\n            <div class=\"col-sm-9\">\n              <div class=\"form-content-row mb-0\">\n                <input class=\"form-control form-control-sm\" id=\"filterName\" type=\"text\" formControlName=\"name\" />\n                <span\n                  class=\"validate-message\"\n                  *ngIf=\"hasDuplicateFilterName\"\n                  [translate]=\"'settings.filters.filter_name_exist'\"\n                >\n                  Filter name already exists.\n                </span>\n                <span\n                  *ngIf=\"createFilterForm.controls['name'].errors && createFilterForm.controls['name'].touched\"\n                  id=\"username-valid\"\n                  class=\"validate-message\"\n                >\n                  <span\n                    *ngIf=\"createFilterForm.controls['name'].errors.required\"\n                    [translate]=\"'settings.filters.filter_name_req'\"\n                  >\n                    Filter name is required.\n                  </span>\n                  <span\n                    *ngIf=\"createFilterForm.controls['name'].errors.maxlength\"\n                    [translate]=\"'settings.filters.filter_name_char'\"\n                  >\n                    Filter name must be less than 64 characters.\n                  </span>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <div class=\"row\">\n            <div class=\"col-sm-3\">\n              <label class=\"form-label mb-sm-0\" [translate]=\"'settings.filters.conditions'\"> Condition: </label>\n            </div>\n            <div class=\"col-sm-9\">\n              <div class=\"form-content-row form-content-row-sm\">\n                <div class=\"btn-dropdown btn-dropdown-select\">\n                  <div ngbDropdown class=\"dropdown-sm\">\n                    <button type=\"button\" ngbDropdownToggle id=\"filterParameterDropdownMenuBtn\" role=\"button\">\n                      <span *ngIf=\"createFilterData.parameter; else selectCondition\">\n                        {{ 'If the ' + createFilterData.parameter }}\n                      </span>\n                      <ng-template #selectCondition>\n                        <span [translate]=\"'settings.filters.select_condition'\"> Select condition </span>\n                      </ng-template>\n                    </button>\n                    <div ngbDropdownMenu aria-labelledby=\"filterParameterDropdownMenuBtn\">\n                      <a (click)=\"createFilterData.parameter = filterParameter.SUBJECT\" class=\"dropdown-item\">\n                        <span [translate]=\"'settings.filters.if_subject'\">If the subject</span>\n                      </a>\n                      <a (click)=\"createFilterData.parameter = filterParameter.SENDER\" class=\"dropdown-item\">\n                        <span [translate]=\"'settings.filters.if_sender'\">If the sender</span>\n                      </a>\n                      <a (click)=\"createFilterData.parameter = filterParameter.RECIPIENT\" class=\"dropdown-item\">\n                        <span>If the receiver</span>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row form-content-row-sm\">\n                <div class=\"btn-dropdown btn-dropdown-select\">\n                  <div ngbDropdown class=\"dropdown-sm\">\n                    <button\n                      type=\"button\"\n                      ngbDropdownToggle\n                      id=\"filterConditionDropdownMenuBtn\"\n                      role=\"button\"\n                      [disabled]=\"!createFilterData.parameter\"\n                    >\n                      {{\n                        createFilterData.condition === filterCondition.STARTSWITH\n                          ? 'starts with'\n                          : createFilterData.condition\n                      }}\n                    </button>\n                    <div\n                      ngbDropdownMenu\n                      class=\"dropdown-menu dropdown-menu-right\"\n                      aria-labelledby=\"filterConditionDropdownMenuBtn\"\n                    >\n                      <a\n                        (click)=\"createFilterData.condition = filterCondition.CONTAINS\"\n                        class=\"dropdown-item\"\n                        [translate]=\"'settings.contains'\"\n                      >\n                        contains\n                      </a>\n                      <a (click)=\"createFilterData.condition = filterCondition.STARTSWITH\" class=\"dropdown-item\">\n                        <span [translate]=\"'settings.filters.starts_with'\">starts with</span>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row mb-0\">\n                <input\n                  *ngIf=\"!createFilterData.condition; else showFilterTextField\"\n                  type=\"text\"\n                  class=\"form-control form-control-sm\"\n                  [placeholder]=\"'settings.filters.text_or_pattern' | translate\"\n                  disabled\n                />\n                <ng-template #showFilterTextField>\n                  <input\n                    type=\"text\"\n                    id=\"filterTextField\"\n                    formControlName=\"filterText\"\n                    class=\"form-control form-control-sm\"\n                    placeholder=\"text or pattern\"\n                  />\n                </ng-template>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group mb-0\">\n          <div class=\"row\">\n            <div class=\"col-sm-3\">\n              <label class=\"form-label mb-sm-0\" [translate]=\"'settings.filters.actions'\">Actions:</label>\n            </div>\n            <div class=\"col-sm-9\">\n              <div class=\"form-content-row form-content-row-sm\">\n                <div class=\"row row-sm align-items-center\">\n                  <div class=\"col-sm-4\">\n                    <div class=\"fancy-field-group\">\n                      <input\n                        formControlName=\"moveTo\"\n                        id=\"filterMoveTo\"\n                        class=\"d-none fancy-field-control fancy-field-control-sm\"\n                        type=\"checkbox\"\n                      />\n                      <label for=\"filterMoveTo\" [translate]=\"'settings.filters.move_to'\">move to</label>\n                    </div>\n                  </div>\n                  <div class=\"col-sm-8\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          type=\"button\"\n                          ngbDropdownToggle\n                          class=\"has-icon text-capitalize\"\n                          id=\"filterFolderDropdownMenuBtn\"\n                          role=\"button\"\n                          [disabled]=\"!createFilterForm.controls['moveTo'].value\"\n                        >\n                          <i class=\"icon icon-{{ folderIcons[createFilterData.folder] || 'icon-folder' }}\"></i>\n                          <span\n                            *ngIf=\"!createFilterData.folder; else selectFolder\"\n                            [translate]=\"'settings.filters.select_folder'\"\n                          >\n                            Select folder\n                          </span>\n                          <ng-template #selectFolder>{{ createFilterData.folder }} </ng-template>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"filterFolderDropdownMenuBtn\" class=\"folder-dropdown\">\n                          <a (click)=\"createFilterData.folder = mailFolderType.INBOX\" class=\"dropdown-item has-icon\">\n                            <i class=\"icon {{ folderIcons[mailFolderType.INBOX] }}\"></i>\n                            <span [translate]=\"'mail_sidebar.inbox'\">Inbox</span>\n                          </a>\n                          <a (click)=\"createFilterData.folder = mailFolderType.ARCHIVE\" class=\"dropdown-item has-icon\">\n                            <i class=\"icon {{ folderIcons[mailFolderType.ARCHIVE] }}\"></i>\n                            <span [translate]=\"'mail_sidebar.archive'\">Archive</span>\n                          </a>\n                          <a (click)=\"createFilterData.folder = mailFolderType.SPAM\" class=\"dropdown-item has-icon\">\n                            <i class=\"icon {{ folderIcons[mailFolderType.SPAM] }}\"></i>\n                            <span [translate]=\"'mail_sidebar.spam'\">Spam</span>\n                          </a>\n                          <a (click)=\"createFilterData.folder = mailFolderType.TRASH\" class=\"dropdown-item has-icon\">\n                            <i class=\"icon {{ folderIcons[mailFolderType.TRASH] }}\"></i>\n                            <span [translate]=\"'mail_sidebar.trash'\">Trash</span>\n                          </a>\n                          <a\n                            *ngFor=\"let folder of customFolders\"\n                            class=\"dropdown-item has-icon\"\n                            (click)=\"createFilterData.folder = folder.name\"\n                          >\n                            <i class=\"icon icon-folder\"></i>\n                            <p class=\"folder-dropdown-item\">{{ folder.name }}</p>\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row row-sm align-items-center\">\n                  <div class=\"col-6 flex-auto-col\">\n                    <div class=\"fancy-field-group\">\n                      <input\n                        formControlName=\"markAsRead\"\n                        id=\"filterMarkAsRead\"\n                        class=\"d-none fancy-field-control fancy-field-control-sm\"\n                        type=\"checkbox\"\n                      />\n                      <label for=\"filterMarkAsRead\" [translate]=\"'mail_list.mark_as_read'\">mark as read</label>\n                    </div>\n                  </div>\n                  <div class=\"col-8 flex-auto-col\">\n                    <div class=\"fancy-field-group\">\n                      <input\n                        formControlName=\"markAsStarred\"\n                        id=\"filterMarkAsStarred\"\n                        class=\"d-none fancy-field-control fancy-field-control-sm\"\n                        type=\"checkbox\"\n                      />\n                      <label for=\"filterMarkAsStarred\" [translate]=\"'settings.filters.mark_as_starred'\">\n                        mark as starred\n                      </label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger mt-3\">\n        {{ errorMessage }}\n      </div>\n    </div>\n    <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n      <button\n        class=\"btn btn-secondary btn-sm\"\n        type=\"submit\"\n        [disabled]=\"userState?.inProgress\"\n        [translate]=\"'billing_info.submit'\"\n      >\n        Submit\n      </button>\n      <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n    </div>\n  </form> </ng-template\n><!-- /.Add custom filter ends -->\n\n<!-- Confirm delete filter modal -->\n<ng-template #deleteFilterModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span [translate]=\"'settings.filters.delete_message'\"> Are you sure, you want to delete filter</span>\n        <b>\"{{ selectedFilter?.name }}\"</b>?\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\" [translate]=\"'common.cancel'\">\n          Cancel\n        </button>\n        <button (click)=\"deleteFilter()\" class=\"btn btn-danger btn-sm\" role=\"button\">Delete</button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm delete filter modal ends -->\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\n\nimport { CreateFilter, DeleteFilter, UpdateFilter, UpdateFilterOrder } from '../../../store/actions';\nimport { AppState, UserState } from '../../../store/datatypes';\nimport { Folder, MailFolderType } from '../../../store/models';\nimport { Filter, FilterCondition, FilterParameter } from '../../../store/models/filter.model';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-filters',\n  templateUrl: './mail-filters.component.html',\n  styleUrls: ['../mail-settings.component.scss'],\n})\nexport class MailFiltersComponent implements OnInit {\n  readonly folderIcons: any = {\n    [MailFolderType.INBOX]: 'icon-inbox',\n    [MailFolderType.ARCHIVE]: 'icon-archive',\n    [MailFolderType.TRASH]: 'icon-garbage',\n    [MailFolderType.SPAM]: 'icon-warning',\n  };\n\n  @ViewChild('customFilterModal') customFilterModal: any;\n\n  @ViewChild('deleteFilterModal') deleteFilterModal: any;\n\n  mailFolderType = MailFolderType;\n\n  filterCondition = FilterCondition;\n\n  filterParameter = FilterParameter;\n\n  filters: Filter[];\n\n  userState: UserState;\n\n  customFolders: Folder[];\n\n  createFilterForm: FormGroup;\n\n  createFilterData: any;\n\n  errorMessage: string;\n\n  selectedFilter: Filter;\n\n  hasDuplicateFilterName: boolean;\n\n  private customFilterModalRef: NgbModalRef;\n\n  private deleteFilterModalRef: NgbModalRef;\n\n  inSetPriority = false;\n\n  private unmodifiedFilters: Array<Filter>;\n\n  inProgress = false;\n\n  constructor(private store: Store<AppState>, private formBuilder: FormBuilder, private modalService: NgbModal) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        this.filters = userState.filters;\n        this.customFolders = userState.customFolders;\n        if (\n          this.userState &&\n          this.userState.inProgress &&\n          this.customFilterModalRef &&\n          !userState.inProgress &&\n          !userState.filtersError\n        ) {\n          this.customFilterModalRef.dismiss();\n        }\n        this.errorMessage = userState.filtersError;\n        this.userState = userState;\n        this.inProgress = this.userState.inProgress;\n      });\n\n    this.createFilterForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.maxLength(64)]],\n      filterText: [''],\n      moveTo: [false],\n      markAsRead: [false],\n      markAsStarred: [false],\n    });\n\n    this.createFilterForm\n      .get('name')\n      .valueChanges.pipe(untilDestroyed(this))\n      .subscribe((value: string) => {\n        this.checkFilterExist(value);\n      });\n\n    this.createFilterForm\n      .get('moveTo')\n      .valueChanges.pipe(untilDestroyed(this))\n      .subscribe(value => {\n        if (!value && this.createFilterData) {\n          this.createFilterData.folder = null;\n        }\n      });\n  }\n\n  openCustomFilterModal(selectedFilter?: Filter) {\n    this.errorMessage = null;\n    this.hasDuplicateFilterName = false;\n    this.createFilterForm.reset();\n    if (selectedFilter) {\n      this.createFilterData = { ...selectedFilter };\n      this.selectedFilter = selectedFilter;\n      this.createFilterForm.get('name').setValue(selectedFilter.name);\n      this.createFilterForm.get('filterText').setValue(selectedFilter.filter_text);\n      this.createFilterForm.get('moveTo').setValue(selectedFilter.move_to);\n      this.createFilterForm.get('markAsRead').setValue(selectedFilter.mark_as_read);\n      this.createFilterForm.get('markAsStarred').setValue(selectedFilter.mark_as_starred);\n    } else {\n      this.createFilterData = {};\n      this.selectedFilter = null;\n    }\n    this.customFilterModalRef = this.modalService.open(this.customFilterModal, {\n      centered: true,\n      windowClass: 'modal-sm',\n    });\n  }\n\n  /**\n   * Save custom filter's form content\n   */\n  onSubmit() {\n    this.errorMessage = null;\n    if (this.createFilterForm.valid && !this.hasDuplicateFilterName) {\n      const data = {\n        ...this.createFilterData,\n        name: this.createFilterForm.get('name').value,\n        filter_text: this.createFilterForm.get('filterText').value,\n        move_to: this.createFilterForm.get('moveTo').value || false,\n        mark_as_read: this.createFilterForm.get('markAsRead').value || false,\n        mark_as_starred: this.createFilterForm.get('markAsStarred').value || false,\n      };\n      if (!data.condition || !data.parameter) {\n        this.errorMessage = 'Please select a condition.';\n      } else if (!data.filter_text) {\n        this.errorMessage = 'Please enter some text or pattern.';\n      } else if (data.move_to && !data.folder) {\n        this.errorMessage = 'Please select a folder.';\n      } else if (data.id) {\n        this.store.dispatch(new UpdateFilter(data));\n      } else {\n        this.store.dispatch(new CreateFilter(data));\n      }\n    }\n  }\n\n  confirmDeleteFilter(filter: Filter) {\n    this.selectedFilter = filter;\n    this.deleteFilterModalRef = this.modalService.open(this.deleteFilterModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  deleteFilter() {\n    if (this.selectedFilter) {\n      this.store.dispatch(new DeleteFilter(this.selectedFilter));\n      this.deleteFilterModalRef.dismiss();\n    }\n  }\n\n  private checkFilterExist(value: string) {\n    if (value) {\n      if (this.selectedFilter && this.selectedFilter.name.toLowerCase() === value.toLowerCase()) {\n        this.hasDuplicateFilterName = false;\n      } else if (this.filters.find(filter => value && filter.name.toLowerCase() === value.toLowerCase())) {\n        this.hasDuplicateFilterName = true;\n        return true;\n      }\n    }\n    this.hasDuplicateFilterName = false;\n    return false;\n  }\n\n  priorityDown(index: number) {\n    const priorityOrder = this.filters[index].priority_order;\n    this.filters[index].priority_order = this.filters[index + 1].priority_order;\n    this.filters[index + 1].priority_order = priorityOrder;\n    this.filters.sort((a, b) => {\n      return a.priority_order - b.priority_order;\n    });\n  }\n\n  priorityUp(index: number) {\n    const sortOrder = this.filters[index].priority_order;\n    this.filters[index].priority_order = this.filters[index - 1].priority_order;\n    this.filters[index - 1].priority_order = sortOrder;\n    this.filters.sort((a, b) => {\n      return a.priority_order - b.priority_order;\n    });\n  }\n\n  startSetPriority() {\n    this.inSetPriority = true;\n    this.unmodifiedFilters = this.filters.map(x => ({ ...x }));\n  }\n\n  savePriority() {\n    this.inProgress = true;\n    const payload: any = {\n      filter_list: this.filters.map(item => {\n        return { filter_id: item.id, priority_order: item.priority_order };\n      }),\n    };\n    this.store.dispatch(new UpdateFilterOrder(payload));\n  }\n\n  cancelSetPriority() {\n    this.inSetPriority = false;\n    this.filters = this.unmodifiedFilters;\n  }\n\n  onFilterDrop(event: CdkDragDrop<Filter[]>) {\n    moveItemInArray(this.filters, event.previousIndex, event.currentIndex);\n    this.filters.forEach((filter: Filter, index: number) => {\n      filter.priority_order = index + 1;\n    });\n  }\n}\n","<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.forwarding.title'\">Forwarding</strong>\n      <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder col-sm col-sm-8\">\n      <ul class=\"ui-list ui-list-styled list-styled\" *ngIf=\"settings?.enable_forwarding; else addForwardingAddress\">\n        <li class=\"ui-list-item ui-list-item-xs-full\">\n          <div class=\"row row-xs align-items-center\">\n            <div class=\"col-10 col-sm-8 show-ellipses\">\n              {{ settings.forwarding_address }}\n            </div>\n            <div class=\"col-2 col-sm-4\">\n              <ul class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\">\n                <li>\n                  <a (click)=\"onEditAddress()\" role=\"button\">\n                    <i class=\"icon icon-edit\"></i>\n                  </a>\n                </li>\n                <li>\n                  <a (click)=\"onDeleteAddress()\" role=\"button\">\n                    <i class=\"icon icon-garbage\"></i>\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      </ul>\n      <div class=\"row row-xs align-items-center\" *ngIf=\"settings.enable_forwarding\">\n        <input\n          type=\"checkbox\"\n          id=\"copyForwarding\"\n          name=\"copyForwarding\"\n          [(ngModel)]=\"settings.enable_copy_forwarding\"\n          (ngModelChange)=\"changeKeepCopy($event)\"\n          class=\"d-none fancy-field-control fancy-field-control-sm\"\n        />\n        <label for=\"copyForwarding\" [translate]=\"'settings.forwarding.keep_copy'\">\n          Keep a copy of forwarded messages\n        </label>\n      </div>\n      <ng-template #addForwardingAddress>\n        <div class=\"info-card\">\n          <p [translate]=\"'settings.forwarding.auto_forward'\">\n            You can automatically forward your messages to another address.\n          </p>\n          <a href=\"javascript:void(0);\" class=\"text-uppercase btn-link\" role=\"button\" (click)=\"onAddAddress()\">\n            <strong>\n              <u [translate]=\"'settings.forwarding.add_address'\"> Add a forwarding address </u>\n            </strong>\n          </a>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</section>\n\n<!-- Add forwarding address modal -->\n<ng-template #addAddressModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'settings.forwarding.add_address'\"> Add a forwarding address </strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <!-- when verification code is not sent to provided email address -->\n  <form *ngIf=\"!isVerificationCodeSent; else codeSent\" [formGroup]=\"emailForm\" (submit)=\"onAddAddressSubmit()\">\n    <div class=\"modal-body bg-faded\">\n      <div class=\"text-holder text-dark text-medium\">\n        <p [translate]=\"'settings.forwarding.enter_email'\">Please enter a forwarding email address.</p>\n        <div class=\"mx-auto mt-2 pt-sm-2\">\n          <div class=\"form\">\n            <div class=\"form-group form-group-sm\">\n              <label\n                for=\"forwardingAddress\"\n                class=\"d-block text-muted text-left hidden-sm-up\"\n                [translate]=\"'settings.forwarding.address'\"\n              >\n                Forwarding Address\n              </label>\n              <input\n                class=\"form-control text-dark\"\n                id=\"forwardingAddress\"\n                autocomplete=\"off\"\n                [placeholder]=\"'settings.forwarding.address' | translate\"\n                type=\"email\"\n                name=\"forwardingAddress\"\n                formControlName=\"email\"\n                required\n              />\n              <ng-container *ngIf=\"emailForm.controls['email'].errors && showFormErrorMessages\">\n                <span\n                  *ngIf=\"emailForm.controls['email'].errors.required\"\n                  class=\"validate-message\"\n                  [translate]=\"'settings.forwarding.address_req'\"\n                >\n                  The address is required.\n                </span>\n                <span\n                  *ngIf=\"emailForm.controls['email'].errors.pattern\"\n                  class=\"validate-message\"\n                  [translate]=\"'settings.forwarding.address_invalid'\"\n                >\n                  The address is invalid.\n                </span>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"text-center mt-2\">\n        <a (click)=\"isVerificationCodeSent = true; showFormErrorMessages = false; errorMessage = null\" role=\"button\">\n          <small>\n            <u [translate]=\"'settings.forwarding.code_message'\">Already have the code</u>\n          </small>\n        </a>\n      </div>\n      <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger mb-3\">\n        {{ errorMessage }}\n      </div>\n    </div>\n    <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n      <button class=\"btn btn-default btn-sm\" type=\"reset\" (click)=\"d()\">\n        <span [translate]=\"'common.cancel'\">Cancel</span>\n      </button>\n      <button class=\"btn btn-secondary btn-sm\" type=\"submit\" [disabled]=\"userState.inProgress\">\n        <span [translate]=\"'billing_info.submit'\">Submit</span>\n      </button>\n      <app-loading-spinner [showSpinner]=\"userState.inProgress\"></app-loading-spinner>\n    </div>\n  </form>\n  <!-- when verification code is sent to provided email address -->\n  <ng-template #codeSent>\n    <form [formGroup]=\"codeForm\" (submit)=\"onVerifyCodeSubmit()\">\n      <div class=\"modal-body bg-faded\">\n        <div class=\"text-holder text-dark text-medium\">\n          <p [translate]=\"'settings.forwarding.enter_code'\">\n            Please enter the verification code sent to provided email address.\n          </p>\n          <div class=\"mx-auto mt-2 pt-sm-2\">\n            <div class=\"form\">\n              <div class=\"form-group form-group-sm\">\n                <label\n                  for=\"verifyForwardingAddress\"\n                  class=\"d-block text-muted text-left hidden-sm-up\"\n                  [translate]=\"'settings.forwarding.address'\"\n                >\n                  Forwarding Address\n                </label>\n                <input\n                  class=\"form-control text-dark\"\n                  id=\"verifyForwardingAddress\"\n                  autocomplete=\"off\"\n                  [placeholder]=\"'settings.forwarding.address' | translate\"\n                  type=\"email\"\n                  name=\"verifyForwardingAddress\"\n                  formControlName=\"email\"\n                  required\n                />\n                <ng-container *ngIf=\"codeForm.controls['email'].errors && showFormErrorMessages\">\n                  <span\n                    *ngIf=\"codeForm.controls['email'].errors.required\"\n                    class=\"validate-message\"\n                    [translate]=\"'settings.forwarding.address_req'\"\n                  >\n                    The address is required.\n                  </span>\n                  <span\n                    *ngIf=\"codeForm.controls['email'].errors.pattern\"\n                    class=\"validate-message\"\n                    [translate]=\"'settings.forwarding.address_invalid'\"\n                  >\n                    The address is invalid.\n                  </span>\n                </ng-container>\n              </div>\n              <div class=\"form-group form-group-sm\">\n                <label\n                  for=\"verificationCode\"\n                  class=\"d-block text-muted text-left hidden-sm-up\"\n                  [translate]=\"'settings.forwarding.verif_code'\"\n                >\n                  Verification Code\n                </label>\n                <input\n                  class=\"form-control text-dark\"\n                  id=\"verificationCode\"\n                  autocomplete=\"off\"\n                  [placeholder]=\"'settings.forwarding.verif_code' | translate\"\n                  name=\"forwardingAddress\"\n                  formControlName=\"code\"\n                  required\n                />\n                <ng-container *ngIf=\"codeForm.controls['code'].errors && showFormErrorMessages\">\n                  <span\n                    *ngIf=\"codeForm.controls['code'].errors.required\"\n                    class=\"validate-message\"\n                    [translate]=\"'settings.forwarding.code_req'\"\n                  >\n                    The verification code is required.\n                  </span>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger mb-3\">\n          {{ errorMessage }}\n        </div>\n      </div>\n      <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n        <button class=\"btn btn-default btn-sm\" type=\"reset\" (click)=\"d()\">\n          <span [translate]=\"'common.cancel'\"> Cancel </span>\n        </button>\n        <button\n          class=\"btn btn-secondary btn-sm\"\n          type=\"submit\"\n          [disabled]=\"userState.inProgress\"\n          [translate]=\"'billing_info.submit'\"\n        >\n          Submit\n        </button>\n        <app-loading-spinner [showSpinner]=\"userState.inProgress\"></app-loading-spinner>\n      </div>\n    </form>\n  </ng-template> </ng-template\n><!-- /. Add forwarding address modal ends -->\n\n<!-- Confirm delete forwarding address modal -->\n<ng-template #confirmDeleteAddressModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"text-holder text-dark text-medium\">\n      <p [translate]=\"'settings.forwarding.delete_message'\">Are you sure you want to delete forwarding address?</p>\n    </div>\n  </div>\n  <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n    <button (click)=\"d()\" class=\"btn btn-default btn-sm\" role=\"button\">\n      <span [translate]=\"'common.cancel'\">Cancel</span>\n    </button>\n    <button (click)=\"deleteAddress()\" class=\"btn btn-danger btn-sm\" role=\"button\">\n      <span [translate]=\"'common.delete'\">Delete</span>\n    </button>\n  </div> </ng-template\n><!-- /.Confirm delete forwarding address modal ends -->\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { VALID_EMAIL_REGEX } from '../../../shared/config';\nimport { SendEmailForwardingCode, SettingsUpdate, VerifyEmailForwardingCode } from '../../../store/actions';\nimport { AppState, Settings, UserState } from '../../../store/datatypes';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-forwarding',\n  templateUrl: './mail-forwarding.component.html',\n  styleUrls: ['./mail-forwarding.component.scss', '../mail-settings.component.scss'],\n})\nexport class MailForwardingComponent implements OnInit {\n  @ViewChild('addAddressModal') addAddressModal: any;\n\n  @ViewChild('confirmDeleteAddressModal') confirmDeleteAddressModal: any;\n\n  userState: UserState;\n\n  settings: Settings;\n\n  emailForm: FormGroup;\n\n  codeForm: FormGroup;\n\n  showFormErrorMessages: boolean;\n\n  errorMessage: string;\n\n  isVerificationCodeSent: boolean;\n\n  isCodeFormSubmitted: boolean;\n\n  private addAddressModalRef: NgbModalRef;\n\n  private confirmDeleteAddressModalRef: NgbModalRef;\n\n  constructor(private store: Store<AppState>, private formBuilder: FormBuilder, private modalService: NgbModal) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.isVerificationCodeSent = user.isForwardingVerificationCodeSent;\n        this.errorMessage = user.emailForwardingErrorMessage;\n        if (\n          this.isCodeFormSubmitted &&\n          this.userState.inProgress &&\n          !user.inProgress &&\n          !user.emailForwardingErrorMessage\n        ) {\n          this.addAddressModalRef.dismiss();\n          this.isCodeFormSubmitted = false;\n        }\n        this.userState = user;\n        this.settings = user.settings;\n      });\n    this.emailForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.pattern(VALID_EMAIL_REGEX)]],\n    });\n    this.codeForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.pattern(VALID_EMAIL_REGEX)]],\n      code: ['', [Validators.required]],\n    });\n  }\n\n  onAddAddress() {\n    this.showFormErrorMessages = false;\n    this.isCodeFormSubmitted = false;\n    this.isVerificationCodeSent = false;\n    this.errorMessage = null;\n    this.emailForm.reset();\n    this.codeForm.reset();\n    this.addAddressModalRef = this.modalService.open(this.addAddressModal, { centered: true, windowClass: 'modal-sm' });\n  }\n\n  onEditAddress() {\n    this.onAddAddress();\n    this.emailForm.get('email').setValue(this.settings.forwarding_address);\n  }\n\n  onDeleteAddress() {\n    this.confirmDeleteAddressModalRef = this.modalService.open(this.confirmDeleteAddressModal, {\n      centered: true,\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onAddAddressSubmit() {\n    this.showFormErrorMessages = true;\n    if (this.emailForm.valid) {\n      this.store.dispatch(new SendEmailForwardingCode({ email: this.emailForm.value.email }));\n      this.showFormErrorMessages = false;\n      this.codeForm.controls.email.setValue(this.emailForm.value.email);\n    }\n  }\n\n  onVerifyCodeSubmit() {\n    this.showFormErrorMessages = true;\n    if (this.codeForm.valid) {\n      this.store.dispatch(new VerifyEmailForwardingCode({ ...this.codeForm.value }));\n      this.isCodeFormSubmitted = true;\n      this.showFormErrorMessages = false;\n    }\n  }\n\n  deleteAddress() {\n    this.settings.enable_forwarding = false;\n    this.settings.enable_copy_forwarding = false;\n    this.settings.forwarding_address = '';\n    this.store.dispatch(new SettingsUpdate(this.settings));\n    this.confirmDeleteAddressModalRef.dismiss();\n  }\n\n  changeKeepCopy() {\n    this.store.dispatch(new SettingsUpdate(this.settings));\n  }\n}\n","<div class=\"mailbox-sub-content\" #settingsContent>\n  <ngb-tabset #tabSet=\"ngbTabset\" (tabChange)=\"navigateToTab($event); scrollTop(settingsContent)\">\n    <!-- Dashboard and Plans -->\n    <ngb-tab id=\"dashboard-and-plans\">\n      <ng-template ngbTabTitle>\n        <span [translate]=\"'settings.dashboard_plans'\"> Dashboard & Plans </span>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <!-- Overview Section -->\n        <section class=\"mailbox-section mt-4\">\n          <div class=\"mailbox-section-body pt-0\">\n            <div class=\"desc-card-holder mt-sm-3 mt-md-0\">\n              <!--START Plan details -->\n              <div class=\"mb-4 row plan-details\">\n                <div class=\"col-12\">\n                  <div class=\"desc-card\">\n                    <div class=\"desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0\">\n                      <h5 class=\"ui-header-subtitle text-dark mb-0\">\n                        <strong [translate]=\"'settings.plan_details'\">Plan Details</strong>\n                      </h5>\n                    </div>\n                    <div class=\"desc-card-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-5 col-sm-12\">\n                          <div align=\"center\" class=\"subscription\">\n                            <div class=\"subscription-tag\">\n                              {{ userPlanType }}\n                            </div>\n                            <div>\n                              <i class=\"far fa-credit-card\"></i>\n                            </div>\n                            <div>\n                              <a\n                                (click)=\"scroll(targetUpgrade)\"\n                                class=\"btn btn-gradient-primary cursor-pointer\"\n                                [translate]=\"'settings.upgrade'\"\n                              >\n                                Upgrade\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"col-md-7 col-sm user-details\">\n                          <ul class=\"info-list list-styled text-dark\">\n                            <li class=\"info-list-item\">\n                              <div class=\"info-list-text info-list-label\" [translate]=\"'settings.username'\">\n                                Username\n                              </div>\n                              <div class=\"info-list-text info-list-val\">{{ userState.username }}</div>\n                            </li>\n                            <li class=\"info-list-item\">\n                              <div class=\"info-list-text info-list-label\">Recovery Email</div>\n                              <div class=\"info-list-text info-list-val\" *ngIf=\"userState.isLoaded\">\n                                <div class=\"row\" *ngIf=\"isEditingRecoveryEmail; else recoveryEmailTemplate\">\n                                  <form autocomplete=\"off\" class=\"col-10\">\n                                    <input\n                                      class=\"form-control form-control-sm\"\n                                      id=\"recoveryMail\"\n                                      type=\"email\"\n                                      name=\"email\"\n                                      autocomplete=\"off\"\n                                      [(ngModel)]=\"settings.recovery_email\"\n                                      [ngModelOptions]=\"{ updateOn: 'blur' }\"\n                                      (change)=\"updateSettings('recovery_email', $event.target.value)\"\n                                      placeholder=\"example@mail.com\"\n                                    />\n                                  </form>\n                                  <a class=\"col-2 align-self-center -underline\" (click)=\"toggleRecoveyEmailEdit()\">\n                                    <u>Save</u>\n                                  </a>\n                                </div>\n                                <ng-template #recoveryEmailTemplate class=\"-align-right\">\n                                  <div class=\"row\" *ngIf=\"settings.recovery_email; else addRecoveryEmailTemplate\">\n                                    <div class=\"col-10 info-list-text info-list-val\">\n                                      {{ settings.recovery_email }}\n                                    </div>\n                                    <a class=\"col-2\" (click)=\"toggleRecoveyEmailEdit()\">\n                                      <u>Edit</u>\n                                    </a>\n                                  </div>\n                                  <ng-template #addRecoveryEmailTemplate>\n                                    <a (click)=\"toggleRecoveyEmailEdit()\">\n                                      <u>Add</u>\n                                    </a>\n                                  </ng-template>\n                                </ng-template>\n                              </div>\n                            </li>\n                            <li class=\"info-list-item\">\n                              <div class=\"info-list-text info-list-label\" [translate]=\"'settings.domains'\">Domains</div>\n                              <div class=\"info-list-text info-list-val\">\n                                <span *ngIf=\"userState.isPrime\">{{ settings?.domain_count }}</span>\n                                <span *ngIf=\"!userState.isPrime\" [translate]=\"'settings.none'\">None</span>\n                              </div>\n                            </li>\n                            <li class=\"info-list-item align-items-start\">\n                              <div class=\"info-list-text info-list-label\" [translate]=\"'settings.addresses'\">\n                                Aliases\n                              </div>\n                              <div class=\"info-list-text info-list-val\">\n                                <div\n                                  *ngIf=\"userState.isPrime\"\n                                  class=\"ng-tooltips-holder d-inline-block\"\n                                  placement=\"top\"\n                                >\n                                  <div class=\"info-list-val-text\" [translate]=\"'settings.address_tooltip'\">\n                                    {{ settings?.email_count }}\n                                  </div>\n                                </div>\n                                <div *ngIf=\"!userState.isPrime\" class=\"d-inline-block\">\n                                  <div class=\"info-list-val-text\" [translate]=\"'settings.address_one'\">One</div>\n                                </div>\n                              </div>\n                            </li>\n                            <li class=\"info-list-item\">\n                              <div class=\"info-list-text info-list-label\" [translate]=\"'settings.storage'\">Storage</div>\n                              <div class=\"info-list-text info-list-val\">\n                                <div class=\"info-list-val-text\">\n                                  {{ settings?.used_storage | filesize }} of\n                                  {{ settings?.allocated_storage | filesize }}\n                                </div>\n                                <div class=\"progress progress-secondary progress-lg\">\n                                  <div\n                                    class=\"progress-bar\"\n                                    role=\"progressbar\"\n                                    [style.width.%]=\"(settings.used_storage / settings.allocated_storage) * 100\"\n                                    [attr.aria-valuenow]=\"settings.used_storage\"\n                                    aria-valuemin=\"0\"\n                                    [attr.aria-valuemax]=\"settings.allocated_storage\"\n                                  ></div>\n                                </div>\n                              </div>\n                            </li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <!--END Plan details -->\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <div class=\"desc-card\">\n                    <div class=\"desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0\">\n                      <h5 class=\"ui-header-subtitle text-dark mb-0\">\n                        <strong [translate]=\"'settings.my_subscription'\"> My Subscription </strong>\n                      </h5>\n                    </div>\n                    <div class=\"desc-card-body\">\n                      <ul class=\"info-list info-list-lg list-styled text-dark\" *ngIf=\"payment\">\n                        <li class=\"info-list-item\">\n                          <div class=\"info-list-item-row\">\n                            <div class=\"info-list-text info-list-label\">\n                              <span class=\"info-list-label-text\" [translate]=\"'settings.plans'\">Plan</span>\n                            </div>\n                            <div class=\"info-list-text info-list-val\">{{ userPlanType }}</div>\n                          </div>\n                        </li>\n                        <ng-container *ngIf=\"userPlanType !== planType.FREE\">\n                          <li class=\"info-list-item\">\n                            <div class=\"info-list-text info-list-label\" [translate]=\"'billing_info.billing'\">\n                              Billing\n                            </div>\n                            <div class=\"info-list-text info-list-val\">\n                              {{ payment.payment_type }}\n                            </div>\n                          </li>\n                          <li class=\"info-list-item\">\n                            <div class=\"info-list-text info-list-label\" [translate]=\"'settings.payment'\">Payment</div>\n                            <div class=\"info-list-text info-list-val text-capitalize\">\n                              <span>{{ payment.payment_method }}</span>\n                              <i\n                                *ngIf=\"payment?.payment_method === paymentMethod.stripe\"\n                                class=\"{{\n                                  isCardUpdateMode\n                                    ? 'fas fa-chevron-up pr-2 cursor-pointer float-right'\n                                    : 'fas fa-chevron-down pr-2 cursor-pointer float-right'\n                                }}\"\n                                (click)=\"isCardUpdateMode = !isCardUpdateMode\"\n                              ></i>\n                            </div>\n                          </li>\n                          <li class=\"info-list-item info-list-detail\" *ngIf=\"isCardUpdateMode\">\n                            <div class=\"info-list-text info-list-detail-content col-12\" *ngFor=\"let card of cards\">\n                              <input\n                                class=\"d-none fancy-field-control fancy-field-control-sm\"\n                                id=\"{{ 'card_' + card.last4 }}\"\n                                name=\"activeCard\"\n                                type=\"radio\"\n                                (click)=\"onMakePrimaryCard(card)\"\n                                [checked]=\"card.is_primary\"\n                              />\n                              <label for=\"{{ 'card_' + card.last4 }}\">{{ card.last4 | creditcardnumber }}</label>\n                              <i\n                                *ngIf=\"!card.is_primary\"\n                                (click)=\"onDeleteCard(card)\"\n                                [ngbTooltip]=\"'common.delete' | translate\"\n                                class=\"fas fa-trash pr-2 cursor-pointer float-right\"\n                              ></i>\n                            </div>\n                            <div class=\"info-list-text info-list-action col-12\">\n                              <a (click)=\"onAddNewCard()\" [translate]=\"'settings.add_new_method'\">ADD NEW METHOD</a>\n                            </div>\n                          </li>\n                          <li class=\"info-list-item\">\n                            <div class=\"info-list-text info-list-label\" [translate]=\"'settings.billing_cycle_end'\">\n                              Billing Cycle End\n                            </div>\n                            <div class=\"info-list-text info-list-val\">\n                              <span>{{ payment.billing_cycle_ends | momentDate: 'mediumDate' }}</span>\n                              <a\n                                *ngIf=\"\n                                  !settings.recurrence_billing || payment?.payment_method === paymentMethod.bitcoin\n                                \"\n                                [ngbTooltip]=\"'settings.extend_billing_cycle' | translate\"\n                                class=\"float-right\"\n                                (click)=\"renew()\"\n                                [translate]=\"'settings.renew'\"\n                              >\n                                Renew\n                              </a>\n                            </div>\n                          </li>\n                          <li class=\"info-list-item\">\n                            <div class=\"info-list-text info-list-label\" [translate]=\"'settings.recurring_billing'\">\n                              Recurring Billing\n                            </div>\n                            <div class=\"info-list-text info-list-val\">\n                              <div\n                                class=\"row row-sm\"\n                                *ngIf=\"payment.payment_method === paymentMethod.stripe; else bitcoinMethod\"\n                              >\n                                <div class=\"col-6 flex-auto-col\">\n                                  <div class=\"fancy-field-group\">\n                                    <input\n                                      class=\"d-none fancy-field-control fancy-field-control-sm\"\n                                      id=\"enableRecurringBilling\"\n                                      name=\"recurringBilling\"\n                                      type=\"radio\"\n                                      (click)=\"updateSettings('recurrence_billing', true)\"\n                                      [checked]=\"settings.recurrence_billing\"\n                                    />\n                                    <label for=\"enableRecurringBilling\" [translate]=\"'common.yes'\">Yes</label>\n                                  </div>\n                                </div>\n                                <div class=\"col-6 flex-auto-col\">\n                                  <div class=\"fancy-field-group\">\n                                    <input\n                                      class=\"d-none fancy-field-control fancy-field-control-sm\"\n                                      id=\"disableRecurringBilling\"\n                                      name=\"recurringBilling\"\n                                      type=\"radio\"\n                                      (click)=\"updateSettings('recurrence_billing', false)\"\n                                      [checked]=\"!settings.recurrence_billing\"\n                                    />\n                                    <label for=\"disableRecurringBilling\" [translate]=\"'common.no'\">No</label>\n                                  </div>\n                                </div>\n                              </div>\n                              <ng-template #bitcoinMethod>\n                                <span [translate]=\"'settings.not_available_for_bitcoin'\">\n                                  Not available for bitcoin\n                                </span>\n                              </ng-template>\n                            </div>\n                          </li>\n                        </ng-container>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-6 mb-4 mb-md-0\">\n                  <div class=\"desc-card\">\n                    <div class=\"desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0\">\n                      <h5 class=\"ui-header-subtitle text-dark mb-0\">\n                        <strong [translate]=\"'settings.bills'\">Bills</strong>\n                      </h5>\n                    </div>\n                    <div class=\"plan-details\">\n                      <div\n                        class=\"desc-card-body invoices\"\n                        [ngClass]=\"{ 'no-invoice': userState?.isInvoiceLoaded && invoices?.length === 0 }\"\n                      >\n                        <div *ngIf=\"userState?.isInvoiceLoaded && invoices?.length > 0\">\n                          <ul class=\"ui-list ui-list-styled list-styled invoices-list\">\n                            <li class=\"ui-list-item ui-list-item-xs-full\">\n                              <div class=\"row row-xs align-items-center\">\n                                <div class=\"col-5 font-weight-bold col-item\">\n                                  # <span [translate]=\"'settings.invoice'\">Invoice</span>\n                                </div>\n                                <div class=\"col-3 col-item\">\n                                  <div class=\"form-label mb-0 font-weight-bold\" [translate]=\"'settings.date'\">Date</div>\n                                </div>\n                                <div class=\"col-2 font-weight-bold col-item\" [translate]=\"'settings.amount'\">\n                                  Amount\n                                </div>\n                              </div>\n                            </li>\n\n                            <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let invoice of invoices\">\n                              <div class=\"row row-xs align-items-center\">\n                                <div\n                                  class=\"col-5 text-dark col-item\"\n                                  [ngbTooltip]=\"'settings.view_invoice' | translate\"\n                                >\n                                  <a class=\"cursor-pointer\" (click)=\"onViewInvoice(invoice)\">\n                                    {{ invoice.invoice_id }}\n                                  </a>\n                                </div>\n                                <div class=\"col-3 col-item\">\n                                  <div class=\"form-label text-dark mb-0\">\n                                    {{ invoice.invoice_date | date: 'dd/MM/yyyy' }}\n                                  </div>\n                                </div>\n                                <div class=\"col-2 text-dark col-item\">\n                                  ${{ (invoice.total_amount / 100).toFixed(2) }}\n                                </div>\n                                <div class=\"col-2 display-inline-flex actions\">\n                                  <i\n                                    (click)=\"onViewInvoice(invoice)\"\n                                    [ngbTooltip]=\"'settings.view' | translate\"\n                                    class=\"fas fa-eye pr-2 cursor-pointer\"\n                                  >\n                                  </i>\n                                  <i\n                                    (click)=\"onPrintInvoice(invoice)\"\n                                    [ngbTooltip]=\"'mail_detail.print' | translate\"\n                                    class=\"fas fa-print cursor-pointer\"\n                                  >\n                                  </i>\n                                </div>\n                              </div>\n                            </li>\n                          </ul>\n                        </div>\n                        <div\n                          class=\"no-data\"\n                          *ngIf=\"userState?.isInvoiceLoaded && invoices?.length === 0\"\n                          [translate]=\"'settings.no_bills_avail'\"\n                        >\n                          No bills available\n                        </div>\n                        <div class=\"loader\" *ngIf=\"!userState?.isInvoiceLoaded\">\n                          <app-loading-spinner [showSpinner]=\"true\"></app-loading-spinner>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n        <!-- Account Type Section -->\n        <section class=\"mailbox-section\" #targetUpgrade>\n          <div class=\"ui-header ui-header-bordered position-relative\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.account_type'\">Account Type</strong>\n            </h5>\n          </div>\n          <app-pricing-plans\n            hideHeader=\"true\"\n            blockGapsZero=\"true\"\n            [showCurrentPlan]=\"true\"\n            [userPlanType]=\"userPlanType\"\n            [selectedCurrency]=\"payment.currency\"\n            [paymentType]=\"payment.payment_type\"\n            [paymentMethod]=\"\n              payment.payment_method === 'stripe'\n                ? paymentMethod.STRIPE\n                : payment.payment_method === 'bitcoin'\n                ? paymentMethod.BITCOIN\n                : payment.payment_method\n            \"\n            [openBillingInfoInModal]=\"true\"\n          >\n          </app-pricing-plans>\n        </section>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- General -->\n    <ngb-tab id=\"general\">\n      <ng-template ngbTabTitle>\n        <span [translate]=\"'settings.general'\">General</span>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <!-- General Settings -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.general_settings'\"> General Settings </strong>\n            </h5>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.language'\">Language</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button ngbDropdownToggle role=\"button\" id=\"langDropdownMenuButton\">\n                          {{ selectedLanguage?.name }} ({{ selectedLanguage?.locale }})\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"langDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item\"\n                            *ngFor=\"let language of languages\"\n                            (click)=\"updateLanguage(language)\"\n                          >\n                            {{ language.name }} ({{ language.locale }})\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.current_time_zone'\">\n                      Current time zone\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button ngbDropdownToggle role=\"button\" id=\"timezoneDropdownMenuButton\">\n                          {{ settings.timezone }}\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"timezoneDropdownMenuButton\" class=\"timezone-block\">\n                          <a\n                            class=\"dropdown-item\"\n                            *ngFor=\"let timezone of timezones\"\n                            (click)=\"updateTimeZone(timezone)\"\n                          >\n                            {{ timezone.value }}\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.automatically_save_contact'\">\n                      Automatically save contacts\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"autoSaveField1\"\n                            name=\"[1]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('save_contacts', true)\"\n                            [checked]=\"settings.save_contacts\"\n                          />\n                          <label for=\"autoSaveField1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"autoSaveField2\"\n                            name=\"[1]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('save_contacts', false)\"\n                            [checked]=\"!settings.save_contacts\"\n                          />\n                          <label for=\"autoSaveField2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\">Default composer size</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"composersize1\"\n                            name=\"[composerSize]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_composer_full_screen', false)\"\n                            [checked]=\"!settings.is_composer_full_screen\"\n                          />\n                          <label for=\"composersize1\">Small pop-up</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"composersize2\"\n                            name=\"[composerSize]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_composer_full_screen', true)\"\n                            [checked]=\"settings.is_composer_full_screen\"\n                          />\n                          <label for=\"composersize2\">Full screen</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.compose_font'\">\n                      Default composing font\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"text-capitalize\"\n                          role=\"button\"\n                          id=\"defaultFontDropdownMenuButton\"\n                        >\n                          {{ settings.default_font }}\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"defaultFontDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item text-capitalize\"\n                            *ngFor=\"let font of fonts\"\n                            (click)=\"updateSettings('default_font', font)\"\n                          >\n                            {{ font }}\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.compose_color'\">\n                      Default composing color\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"text-capitalize\"\n                          role=\"button\"\n                          id=\"defaultColorDropdownMenuButton\"\n                        >\n                          <span *ngIf=\"settings.default_color; else notDefaultColor\">\n                            <i class=\"color-box\" [style.background]=\"settings.default_color\"></i>\n                            {{ settings.default_color }}\n                          </span>\n                          <ng-template #notDefaultColor>\n                            <i class=\"color-box\" [style.background]=\"colors[0]\"></i>\n                            <span> {{ colors[0] }} </span>\n                          </ng-template>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"defaultColorDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item text-capitalize\"\n                            *ngFor=\"let color of colors\"\n                            (click)=\"updateSettings('default_color', color)\"\n                          >\n                            <i class=\"color-box\" [style.background]=\"color\"></i>\n                            <span class=\"text-capitalize\">\n                              {{ color }}\n                            </span>\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.compose_background'\">\n                      Default composing background\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"text-capitalize\"\n                          role=\"button\"\n                          id=\"defaultBackgroundDropdownMenuButton\"\n                        >\n                          <span *ngIf=\"settings.default_background; else notDefaultBackground\">\n                            <i class=\"color-box\" [style.background]=\"settings.default_background\"></i>\n                            {{ settings.default_background }}\n                          </span>\n                          <ng-template #notDefaultBackground>\n                            <i class=\"color-box\" [style.background]=\"backgrounds[0]\"></i>\n                            <span> {{ backgrounds[0] }} </span>\n                          </ng-template>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"defaultBackgroundDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item text-capitalize\"\n                            *ngFor=\"let background of backgrounds\"\n                            (click)=\"updateSettings('default_background', background)\"\n                          >\n                            <i class=\"color-box\" [style.background]=\"background\"></i>\n                            <span class=\"text-capitalize\">\n                              {{ background }}\n                            </span>\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.compose_size'\">\n                      Default composing size\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"text-capitalize\"\n                          role=\"button\"\n                          id=\"defaultSizeDropdownMenuButton\"\n                        >\n                          <span\n                            *ngIf=\"\n                              settings.default_size && settings.default_size !== defaultFontSize;\n                              else displayDefault\n                            \"\n                          >\n                            {{ settings.default_size }}px\n                          </span>\n                          <ng-template #displayDefault>\n                            <span> {{ defaultFontSize }}px (default) </span>\n                          </ng-template>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"defaultSizeDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item text-capitalize\"\n                            *ngFor=\"let size of sizes\"\n                            (click)=\"updateSettings('default_size', size)\"\n                          >\n                            <span *ngIf=\"size !== defaultFontSize; else setDefault\"> {{ size }}px </span>\n                            <ng-template #setDefault>\n                              <span> {{ size }}px (default) </span>\n                            </ng-template>\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.compose_autosave_duration'\">\n                      Mail compose autosave duration\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"btn-dropdown btn-dropdown-select\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"text-capitalize\"\n                          role=\"button\"\n                          id=\"defaultAutosaveDropdownMenuButton\"\n                        >\n                          {{ autosave_duration }}\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"defaultAutosaveDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item text-capitalize\"\n                            *ngFor=\"let duration of autosave_duration_list\"\n                            (click)=\"updateSettings('autosave_duration', duration)\"\n                          >\n                            {{ duration }}\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div\n                    class=\"col-sm-3\"\n                    ngbTooltip=\"Enabling this option would block all the external images from loading automatically when you open an email\"\n                  >\n                    <label class=\"form-label mb-0\">Block external images</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"blockExternalImages1\"\n                            name=\"[blockExternalImages]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_disable_loading_images', true)\"\n                            [checked]=\"settings.is_disable_loading_images\"\n                          />\n                          <label for=\"blockExternalImages1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"blockExternalImages2\"\n                            name=\"[blockExternalImages]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_disable_loading_images', false)\"\n                            [checked]=\"!settings.is_disable_loading_images\"\n                          />\n                          <label for=\"blockExternalImages2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div\n                    class=\"col-sm-3\"\n                    ngbTooltip=\"Enabling this option would include original message text when you reply\"\n                  >\n                    <label class=\"form-label mb-0\">Include original message text</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"includeOriginalMsg1\"\n                            name=\"[includeOriginalMsg]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('include_original_message', true)\"\n                            [checked]=\"settings.include_original_message\"\n                          />\n                          <label for=\"includeOriginalMsg1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"includeOriginalMsg2\"\n                            name=\"[includeOriginalMsg]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('include_original_message', false)\"\n                            [checked]=\"!settings.include_original_message\"\n                          />\n                          <label for=\"includeOriginalMsg2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\" [translate]=\"'settings.html_editor'\">HTML editor</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"htmlEditor1\"\n                            name=\"[htmlEditor]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_html_disabled', false)\"\n                            [checked]=\"!settings.is_html_disabled\"\n                          />\n                          <label for=\"htmlEditor1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"htmlEditor2\"\n                            name=\"[htmlEditor]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_html_disabled', true)\"\n                            [checked]=\"settings.is_html_disabled\"\n                          />\n                          <label for=\"htmlEditor2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"info-card mt-2 mx-3 full-width\">\n                    <p [translate]=\"'settings.disabling_editor_message'\">\n                      Disabling HTML editor will allow you to use plain text editor for composing email.\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\" ngbTooltip=\"Help to report bugs automatically by enabling this option\">\n                    <label class=\"form-label mb-0\">Report bugs</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"reportBugs1\"\n                            name=\"[reportBugs]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_enable_report_bugs', true)\"\n                            [checked]=\"settings.is_enable_report_bugs\"\n                          />\n                          <label for=\"reportBugs1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"reportBugs2\"\n                            name=\"[reportBugs]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_enable_report_bugs', false)\"\n                            [checked]=\"!settings.is_enable_report_bugs\"\n                          />\n                          <label for=\"reportBugs2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\">Universal Spam Filter</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"universalSpamFilter1\"\n                            name=\"[universalSpamFilter]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('universal_spam_filter', true)\"\n                            [checked]=\"settings.universal_spam_filter\"\n                          />\n                          <label for=\"universalSpamFilter1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\" *ngIf=\"userPlanType !== planType.FREE\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"universalSpamFilter2\"\n                            name=\"[universalSpamFilter]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('universal_spam_filter', false)\"\n                            [checked]=\"!settings.universal_spam_filter\"\n                          />\n                          <label for=\"universalSpamFilter2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"info-card mt-2 mx-3 full-width\" *ngIf=\"userPlanType === planType.FREE\">\n                    <p [translate]=\"'settings.upgrade_to_change_spam_filter'\">\n                      Upgrade to Prime to change the spam filter setting!\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Appreance Section -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.appearance'\">Appearance</strong>\n            </h5>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-sm-0\" [translate]=\"'settings.emails_per_page'\"> Emails per page </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"emailCoutField1\"\n                            name=\"[5]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('emails_per_page', 20)\"\n                            [checked]=\"settings?.emails_per_page === 20\"\n                          />\n                          <label for=\"emailCoutField1\">20</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"emailCoutField2\"\n                            name=\"[5]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('emails_per_page', 50)\"\n                            [checked]=\"settings?.emails_per_page === 50\"\n                          />\n                          <label for=\"emailCoutField2\">50</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"emailCoutField3\"\n                            name=\"[5]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('emails_per_page', 100)\"\n                            [checked]=\"settings?.emails_per_page === 100\"\n                          />\n                          <label for=\"emailCoutField3\">100</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\">Dark mode</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"darkMode1\"\n                            name=\"[darkMode]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_night_mode', true)\"\n                            [checked]=\"settings.is_night_mode\"\n                          />\n                          <label for=\"darkMode1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"darkMode2\"\n                            name=\"[darkMode]\"\n                            type=\"radio\"\n                            (click)=\"updateSettings('is_night_mode', false)\"\n                            [checked]=\"!settings.is_night_mode\"\n                          />\n                          <label for=\"darkMode2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-0\">Conversation View</label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"conversationViewMode1\"\n                            name=\"[conversationMode]\"\n                            type=\"radio\"\n                            (click)=\"updateConversationMode(true)\"\n                            [checked]=\"settings.is_conversation_mode\"\n                          />\n                          <label for=\"conversationViewMode1\" [translate]=\"'common.enabled'\">Enabled</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"conversationViewMode2\"\n                            name=\"[conversationMode]\"\n                            type=\"radio\"\n                            (click)=\"updateConversationMode(false)\"\n                            [checked]=\"!settings.is_conversation_mode\"\n                          />\n                          <label for=\"conversationViewMode2\" [translate]=\"'common.disabled'\">Disabled</label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label for=\"customCss\" class=\"form-label mb-sm-0\"> Custom css </label>\n                  </div>\n                  <form class=\"col-sm-7 col-md-5\" autocomplete=\"off\">\n                    <textarea\n                      class=\"form-control form-control-sm resize-off\"\n                      id=\"customCss\"\n                      name=\"customCss\"\n                      [(ngModel)]=\"settings.custom_css\"\n                      [ngModelOptions]=\"{ updateOn: 'blur' }\"\n                      (change)=\"updateSettings('custom_css', $event.target.value)\"\n                      rows=\"3\"\n                    >\n                    </textarea>\n                  </form>\n                  <div class=\"info-card mx-3 mt-2 full-width\">\n                    <p>You can write the custom css here in order to customize the display of your mailbox.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Notification Section -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.notifications'\">Notifications</strong>\n            </h5>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <div class=\"form-content-row\">\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label\n                      for=\"notificationEmail\"\n                      class=\"form-label mb-sm-0\"\n                      [translate]=\"'settings.notification_email'\"\n                    >\n                      Notification email\n                    </label>\n                  </div>\n                  <form class=\"col-sm-7 col-md-5\" autocomplete=\"off\">\n                    <input\n                      class=\"form-control form-control-sm\"\n                      id=\"notificationEmail\"\n                      type=\"email\"\n                      name=\"notificationEmail\"\n                      autocomplete=\"off\"\n                      [(ngModel)]=\"notificationEmail\"\n                      [ngModelOptions]=\"{ updateOn: 'blur' }\"\n                      (change)=\"updateSettings('notification_email', $event.target.value)\"\n                      placeholder=\"notify@example.com\"\n                      onfocus=\"(this.placeholder='')\"\n                      onfocusout=\"(this.placeholder='notify@example.com')\"\n                    />\n                  </form>\n                  <div class=\"info-card mx-3 mt-2 full-width\">\n                    <p [translate]=\"'settings.enter_notification_email'\">\n                      Enter a notification email on which you would like to receive notification each day when you have\n                      new emails.\n                    </p>\n                  </div>\n                </div>\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-3\">\n                    <label class=\"form-label mb-sm-0\" [translate]=\"'settings.desktop_notification_title'\">\n                      Desktop notifications\n                    </label>\n                  </div>\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"info-card mt-3 full-width\">\n                      <p\n                        *ngIf=\"notificationsPermission === notificationPermissionType.DENIED\"\n                        [translate]=\"'settings.desktop_notifications_dis'\"\n                      >\n                        Desktop Notifications are disabled. Please go to your browser settings in order to enable them.\n                      </p>\n                      <p *ngIf=\"notificationsPermission === notificationPermissionType.DEFAULT\">\n                        <a (click)=\"requestNotificationPermission()\" [translate]=\"'settings.click_here'\">\n                          Click here\n                        </a>\n                        <span translate=\"settings.enable_notifications\">\n                          in order to enable desktop notifications.\n                        </span>\n                      </p>\n                      <p *ngIf=\"notificationsPermission === notificationPermissionType.GRANTED\">\n                        <span [translate]=\"'settings.desktop_notifications_en'\">\n                          Desktop notifications are enabled.\n                        </span>\n                        <a (click)=\"testNotification()\">\n                          <span [translate]=\"'settings.click_to_test'\"> Click here to Test </span>\n                        </a>\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Notification Section Ends -->\n        <section class=\"mailbox-section\">\n          <app-invite-codes></app-invite-codes>\n        </section>\n\n        <!-- Delete account settings -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.delete_account'\"> Delete Account </strong>\n            </h5>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <app-loading-spinner [showSpinner]=\"authState?.inProgress\"></app-loading-spinner>\n              <div class=\"info-card\">\n                <p [translate]=\"'settings.delete_account_guide'\">\n                  If you permanently delete your account you will lose all the data in your mailbox. In 12 months this\n                  username will be available for re-use by anyone who selects it.\n                </p>\n                <button\n                  type=\"button\"\n                  class=\"text-uppercase btn-link\"\n                  role=\"button\"\n                  [disabled]=\"authState?.inProgress\"\n                  (click)=\"onDeleteAccount()\"\n                >\n                  <strong>\n                    <u [translate]=\"'settings.delete_account_perm'\">Permanently Delete Account</u>\n                  </strong>\n                </button>\n              </div>\n            </div>\n          </div>\n        </section>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Filters and blocked addresses -->\n    <ngb-tab id=\"filters-and-blocked-addresses\">\n      <ng-template ngbTabTitle>\n        <span [translate]=\"'settings.filters.title'\">Filters & Blocked Addresses</span>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <!-- Custom filters -->\n        <app-mail-filters></app-mail-filters>\n\n        <!-- Whitelist settings -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered whitelist-header\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.whitelist.name'\">Whitelist</strong>\n            </h5>\n            <a\n              href=\"javascript:void(0);\"\n              class=\"text-uppercase btn-link\"\n              role=\"button\"\n              (click)=\"newListContact = { show: true, type: 'Whitelist' }\"\n            >\n              <strong>\n                <u [translate]=\"'settings.whitelist.add_whitelist_contact'\"> Add whitelist contact </u>\n              </strong>\n            </a>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <div class=\"col-sm-6 mailbox-navbar-col\">\n                <div class=\"form search-form\">\n                  <div>\n                    <div class=\"form-group mb-0 position-relative\">\n                      <input\n                        class=\"form-control form-control-sm\"\n                        type=\"text\"\n                        [formControl]=\"searchWhitelistInput\"\n                        (keyup.enter)=\"searchWhitelist()\"\n                        [placeholder]=\"searchWhitelistPlaceholder | translate\"\n                      />\n                      <button\n                        class=\"clear-btn\"\n                        *ngIf=\"searchWhitelistInput.value?.length > 0\"\n                        (click)=\"searchWhitelistInput.setValue('')\"\n                      >\n                        <i class=\"fas fa-times\"></i>\n                      </button>\n                      <button class=\"btn btn-sm btn-secondary search-btn\" (click)=\"searchWhitelist()\" role=\"button\">\n                        <i class=\"icon icon-search\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <ul class=\"ui-list ui-list-styled list-styled whitelist-list\">\n                <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let item of WhitelistItems\">\n                  <div class=\"row row-xs align-items-center\">\n                    <div class=\"col-10 col-sm-8\">\n                      <div class=\"form-label text-dark mb-0\">{{ item.email }}</div>\n                    </div>\n                    <div class=\"col-2 col-sm-4\">\n                      <ul\n                        class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\"\n                      >\n                        <li>\n                          <a (click)=\"moveToBlacklist(item.id, item.name, item.email)\" role=\"button\">\n                            <i class=\"fas fa-ban\" ngbTooltip=\"Move to Blacklist\"></i>\n                          </a>\n                        </li>\n                        <li>\n                          <a (click)=\"deleteWhiteList(item.id)\" role=\"button\">\n                            <i class=\"icon icon-garbage\"></i>\n                          </a>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n              <div class=\"info-card\">\n                <p [innerHTML]=\"'settings.whitelist.info' | translate\">\n                  Messages from contacts in the whitelist always go to <strong>Inbox folder</strong>. Marking a message\n                  as not spam adds the address to the Whitelist.\n                </p>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Blacklist settings -->\n        <section class=\"mailbox-section\">\n          <header class=\"ui-header ui-header-bordered blacklist-header\">\n            <h5 class=\"ui-header-subtitle text-dark mb-0\">\n              <strong [translate]=\"'settings.blacklist.name'\">Blacklist</strong>\n            </h5>\n            <a\n              href=\"javascript:void(0);\"\n              class=\"text-uppercase btn-link\"\n              role=\"button\"\n              (click)=\"newListContact = { show: true, type: 'Blacklist' }\"\n            >\n              <strong>\n                <u [translate]=\"'settings.blacklist.add_blacklist_contact'\"> Add blacklist contact </u>\n              </strong>\n            </a>\n          </header>\n          <div class=\"mailbox-section-body mailbox-section-body-sm\">\n            <div class=\"form-content-holder\">\n              <div class=\"col-sm-6 mailbox-navbar-col\">\n                <div class=\"form search-form\">\n                  <div>\n                    <div class=\"form-group mb-0 position-relative\">\n                      <input\n                        class=\"form-control form-control-sm\"\n                        type=\"text\"\n                        [formControl]=\"searchBlacklistInput\"\n                        (keyup.enter)=\"searchBlacklist()\"\n                        [placeholder]=\"searchBlacklistPlaceholder | translate\"\n                      />\n                      <button\n                        class=\"clear-btn\"\n                        *ngIf=\"searchBlacklistInput.value?.length > 0\"\n                        (click)=\"searchBlacklistInput.setValue('')\"\n                      >\n                        <i class=\"fas fa-times\"></i>\n                      </button>\n                      <button class=\"btn btn-sm btn-secondary search-btn\" (click)=\"searchBlacklist()\" role=\"button\">\n                        <i class=\"icon icon-search\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <ul class=\"ui-list ui-list-styled list-styled blacklist-list\">\n                <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let item of BlacklistItems\">\n                  <div class=\"row row-xs align-items-center\">\n                    <div class=\"col-10 col-sm-8\">\n                      <div class=\"form-label text-dark mb-0\">{{ item.email }}</div>\n                    </div>\n                    <div class=\"col-2 col-sm-4\">\n                      <ul\n                        class=\"setting-actions-list d-flex align-items-center justify-content-end list-styled text-right\"\n                      >\n                        <li>\n                          <a (click)=\"moveToWhitelist(item.id, item.name, item.email)\" role=\"button\">\n                            <i class=\"fas fa-user-circle\" ngbTooltip=\"Move to Whitelist\"></i>\n                          </a>\n                        </li>\n                        <li>\n                          <a (click)=\"deleteBlackList(item.id)\" role=\"button\">\n                            <i class=\"icon icon-garbage\"></i>\n                          </a>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n              <div class=\"info-card\">\n                <p [innerHTML]=\"'settings.blacklist.info' | translate\">\n                  Messages from contacts in the blacklist always go to <strong>Spam folder</strong>. Marking a message\n                  as spam adds the address to the Blacklist.\n                </p>\n              </div>\n            </div>\n          </div>\n        </section>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Addresses and Signatures -->\n    <ngb-tab id=\"addresses-and-signatures\">\n      <ng-template ngbTabTitle\n        ><span [translate]=\"'settings.signs_and_aliases'\">Signatures & Aliases</span>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <app-addresses-signature></app-addresses-signature>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Folders -->\n    <ngb-tab id=\"folders\">\n      <ng-template ngbTabTitle>\n        <div [translate]=\"'page_pricing.folders'\">Folders</div>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <app-folders></app-folders>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Security -->\n    <ngb-tab id=\"security\">\n      <ng-template ngbTabTitle>\n        <div [translate]=\"'home_header.security'\">Security</div>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <app-settings-security></app-settings-security>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Domains -->\n    <ngb-tab id=\"domains-and-users\">\n      <ng-template ngbTabTitle>\n        <div [translate]=\"'settings.domains_and_users.title'\">Domains & Users</div>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <app-custom-domains (onGotoTab)=\"tabSet.select($event)\"></app-custom-domains>\n      </ng-template>\n    </ngb-tab>\n\n    <!-- Forwarding and auto responder -->\n    <ngb-tab id=\"forwarding-and-auto-responder\">\n      <ng-template ngbTabTitle>\n        <div [translate]=\"'settings.forwarding_and_autores'\">Forwarding & Autoresponder</div>\n      </ng-template>\n      <ng-template ngbTabContent>\n        <app-mail-forwarding></app-mail-forwarding>\n        <app-mail-autoresponder></app-mail-autoresponder>\n      </ng-template>\n    </ngb-tab>\n  </ngb-tabset>\n\n  <!-- Save Button -->\n  <button mat-fab color=\"warn\" class=\"fab-bottom\" (click)=\"onUpdateSettingsBtnClick()\">\n    <i class=\"icon icon-save-disk\"></i>\n  </button>\n  <app-mail-footer></app-mail-footer>\n</div>\n\n<!-- Modal groups -->\n<app-save-list-contact\n  *ngIf=\"newListContact.show\"\n  [contactType]=\"newListContact.type\"\n  (closed)=\"newListContact.show = false\"\n>\n</app-save-list-contact>\n\n<!-- Delete account info modal -->\n<ng-template #deleteAccountInfoModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'settings.delete_account_perm'\"> Permanently Delete Account </strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <form [formGroup]=\"deleteAccountInfoForm\" (submit)=\"onDeleteAccountInfoSubmit()\">\n    <div class=\"modal-body bg-faded\">\n      <div class=\"text-holder text-dark text-medium\">\n        <p class=\"text-danger\" [translate]=\"'settings.delete_account_guide'\">\n          You have selected to permanently delete your account. If you proceed you will lose all the data in your\n          mailbox.In 2 months this username will be available for re-use by anyone who selects it.\n        </p>\n        <p [translate]=\"'settings.provide_email'\">Please provide an email address in case we need to contact you.</p>\n        <div class=\"login-content-holder mx-auto mt-2 pt-sm-2\">\n          <div class=\"form\">\n            <div class=\"form-group form-group-sm\">\n              <label for=\"deleteAccountEmail\" class=\"d-block text-muted text-left hidden-sm-up\"> Email </label>\n              <input\n                class=\"form-control text-dark\"\n                id=\"deleteAccountEmail\"\n                autocomplete=\"off\"\n                [placeholder]=\"'common.email' | translate\"\n                type=\"email\"\n                name=\"deleteAccountEmail\"\n                formControlName=\"contact_email\"\n              />\n              <span\n                *ngIf=\"deleteAccountInfoForm.controls['contact_email'].errors && deleteAccountOptions.showErrors\"\n                class=\"validate-message\"\n                [translate]=\"'settings.email_invalid'\"\n              >\n                The email is invalid.\n              </span>\n            </div>\n            <div class=\"form-group form-group-sm\">\n              <label for=\"deleteAccountPassword\" class=\"d-block text-muted text-left hidden-sm-up\">\n                Current Password\n              </label>\n              <div class=\"input-group\">\n                <input\n                  #deleteAccountPasswordInput\n                  class=\"form-control form-control-lg\"\n                  id=\"deleteAccountPassword\"\n                  autocomplete=\"new-password\"\n                  name=\"deleteAccountPassword\"\n                  formControlName=\"password\"\n                  [placeholder]=\"'settings.current_password' | translate\"\n                  type=\"password\"\n                />\n                <span\n                  class=\"input-group-addon password-toggle bg-white text-muted\"\n                  (click)=\"togglePassword(deleteAccountPasswordInput)\"\n                >\n                  <i class=\"fa fa-eye\"></i>\n                </span>\n              </div>\n              <span\n                *ngIf=\"deleteAccountInfoForm.controls['password'].errors && deleteAccountOptions.showErrors\"\n                class=\"validate-message\"\n              >\n                <span\n                  *ngIf=\"deleteAccountInfoForm.controls['password'].errors.required\"\n                  [translate]=\"'settings.password_req'\"\n                >\n                  Your current password is required.\n                </span>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n      <button class=\"btn btn-default btn-sm\" type=\"reset\" (click)=\"d()\">\n        <span [translate]=\"'common.cancel'\">Cancel</span>\n      </button>\n      <button class=\"btn btn-danger btn-sm\" type=\"submit\" [translate]=\"'common.delete'\">Delete</button>\n    </div>\n  </form> </ng-template\n><!-- /. Delete account info modal ends -->\n\n<!-- Confirm delete account modal -->\n<ng-template #confirmDeleteAccountModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'settings.permanently_delete'\"> Confirm Permanently Account Delete </strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"text-holder text-dark text-medium\">\n      <p [translate]=\"'settings.permanently_delete_alert'\">\n        Are you sure you want to permanently delete your account? No one will be able to undo this.\n      </p>\n    </div>\n  </div>\n  <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n    <button (click)=\"d()\" class=\"btn btn-default btn-sm\" role=\"button\" [translate]=\"'common.cancel'\">Cancel</button>\n    <button (click)=\"confirmDeleteAccount()\" class=\"btn btn-danger btn-sm\" role=\"button\" [translate]=\"'common.delete'\">\n      Delete\n    </button>\n  </div> </ng-template\n><!-- /.Confirm delete account modal ends -->\n\n<!-- billing info modal -->\n<ng-template #billingInfoModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"billing-header\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body user-billing-upgrade-modal bg-faded px-3 py-0 bg-white\">\n    <app-users-billing-info\n      [isUpgradeAccount]=\"true\"\n      [isRenew]=\"true\"\n      [isAddNewCard]=\"isAddNewCard\"\n      [planType]=\"userPlanType\"\n      [paymentType]=\"payment.payment_type\"\n      [currency]=\"payment.currency\"\n      [paymentMethod]=\"\n        payment.payment_method === 'stripe'\n          ? paymentMethod.STRIPE\n          : payment.payment_method === 'bitcoin'\n          ? paymentMethod.BITCOIN\n          : payment.payment_method\n      \"\n      (closeBillingInfo)=\"d()\"\n    >\n    </app-users-billing-info>\n  </div> </ng-template\n><!-- /.billing info modal ends -->\n","import { AfterViewInit, ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NgbDropdownConfig, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport * as moment from 'moment-timezone';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport * as Sentry from '@sentry/browser';\n\nimport { MoveToBlacklist, MoveToWhitelist } from '../../store/actions';\nimport { CreditCardNumberPipe } from '../../shared/pipes/creditcard-number.pipe';\nimport { SENTRY_DSN } from '../../shared/config';\nimport {\n  FONTS,\n  Language,\n  LANGUAGES,\n  VALID_EMAIL_REGEX,\n  AUTOSAVE_DURATION,\n  COMPOSE_COLORS,\n  SIZES,\n  BACKGROUNDS,\n  DEFAULT_FONT_SIZE,\n} from '../../shared/config';\nimport {\n  BlackListDelete,\n  DeleteAccount,\n  SnackPush,\n  WhiteListDelete,\n  CardDelete,\n  CardMakePrimary,\n  MoveTab,\n  ClearMailsOnConversationModeChange,\n  GetUnreadMailsCount,\n} from '../../store/actions';\nimport {\n  AppState,\n  AuthState,\n  Invoice,\n  MailState,\n  NotificationPermission,\n  Payment,\n  PaymentMethod,\n  PlanType,\n  PricingPlan,\n  Settings,\n  Timezone,\n  TimezonesState,\n  UserState,\n  CardState,\n} from '../../store/datatypes';\nimport { OpenPgpService, SharedService } from '../../store/services';\nimport { MailSettingsService } from '../../store/services/mail-settings.service';\nimport { PushNotificationOptions, PushNotificationService } from '../../shared/services/push-notification.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-settings',\n  templateUrl: './mail-settings.component.html',\n  styleUrls: ['./mail-settings.component.scss'],\n})\nexport class MailSettingsComponent implements OnInit, AfterViewInit {\n  readonly fonts = FONTS;\n\n  readonly colors = COMPOSE_COLORS;\n\n  readonly sizes = SIZES;\n\n  readonly defaultFontSize = DEFAULT_FONT_SIZE;\n\n  readonly backgrounds = BACKGROUNDS;\n\n  readonly autosaveDurations = AUTOSAVE_DURATION;\n\n  readonly planType = PlanType;\n\n  @ViewChild('tabSet') tabSet: any;\n\n  @ViewChild('deleteAccountInfoModal') deleteAccountInfoModal: any;\n\n  @ViewChild('confirmDeleteAccountModal') confirmDeleteAccountModal: any;\n\n  @ViewChild('billingInfoModal') billingInfoModal: any;\n\n  selectedIndex = -1; // Assuming no element are selected initially\n\n  userState: UserState = new UserState();\n\n  mailState: MailState;\n\n  authState: AuthState;\n\n  settings: Settings = new Settings();\n\n  cards: Array<CardState> = [];\n\n  payment: Payment = new Payment();\n\n  paymentMethod = PaymentMethod;\n\n  userPlanType: PlanType = PlanType.FREE;\n\n  newListContact = { show: false, type: 'Whitelist' };\n\n  selectedLanguage: Language;\n\n  languages: Language[] = LANGUAGES;\n\n  timezones: Timezone[];\n\n  searchWhitelistInput = new FormControl();\n\n  searchBlacklistInput = new FormControl();\n\n  searchWhitelistPlaceholder = 'settings.whitelist.search_whitelist';\n\n  searchBlacklistPlaceholder = 'settings.blacklist.search_blacklist';\n\n  deleteAccountInfoForm: FormGroup;\n\n  deleteAccountOptions: any = {};\n\n  notificationsPermission: string;\n\n  notificationEmail: string;\n\n  autosave_duration: any = {};\n\n  WhitelistItems: any = [];\n\n  BlacklistItems: any = [];\n\n  autosave_duration_list: Array<string>;\n\n  notificationPermissionType = NotificationPermission;\n\n  selectedTabQueryParams = 'dashboard-and-plans';\n\n  invoices: Invoice[];\n\n  currentPlan: PricingPlan;\n\n  isAddNewCard = false;\n\n  isCardUpdateMode = false;\n\n  private deleteAccountInfoModalRef: NgbModalRef;\n\n  private confirmDeleteAccountModalRef: NgbModalRef;\n\n  timeZoneFilter = new FormControl('', []);\n\n  timeZoneFilteredOptions: Observable<Timezone[] | void>;\n\n  isEditingRecoveryEmail: boolean;\n\n  constructor(\n    private modalService: NgbModal,\n    config: NgbDropdownConfig,\n    private store: Store<AppState>,\n    private formBuilder: FormBuilder,\n    private openPgpService: OpenPgpService,\n    private settingsService: MailSettingsService,\n    private pushNotificationService: PushNotificationService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private cdr: ChangeDetectorRef,\n    private sharedService: SharedService,\n    private creditcardnumber: CreditCardNumberPipe,\n  ) {\n    // customize default values of dropdowns used by this component tree\n    config.autoClose = true;\n  }\n\n  ngOnInit() {\n    this.initAutoSaving(); // Convert milliseconds to time format(m:s)\n    if ('Notification' in window) {\n      this.notificationsPermission = Notification.permission;\n    }\n    this.sharedService.loadPricingPlans();\n\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.authState = authState;\n      });\n\n    /**\n     * Get user's state and initialize\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.WhitelistItems = user.whiteList;\n        this.BlacklistItems = user.blackList;\n        this.settings = user.settings;\n        this.notificationEmail = user.settings.notification_email;\n        this.timeZoneFilter.setValue(user.settings.timezone);\n        this.cdr.detectChanges();\n        this.payment = user.payment_transaction;\n        this.cards = user.cards;\n        this.invoices = user.invoices;\n        this.userPlanType = user.settings.plan_type || PlanType.FREE;\n        if (SharedService.PRICING_PLANS && user.settings.plan_type) {\n          this.currentPlan = SharedService.PRICING_PLANS[this.userPlanType];\n        }\n        if (user.settings.language) {\n          this.selectedLanguage = this.languages.find(item => item.name === user.settings.language);\n        }\n        if (user.settings.autosave_duration !== 'none' && user.settings.autosave_duration) {\n          const duration = Number(user.settings.autosave_duration);\n          // convert duration to m:s format (1m = 60000ms, 1s = 1000ms)\n          const newDuration = duration >= 60000 ? `${duration / 60000}m` : `${duration / 1000}s`;\n          this.autosave_duration = newDuration;\n        } else {\n          this.autosave_duration = 'none';\n        }\n      });\n\n    this.store\n      .select(state => state.timezone)\n      .pipe(untilDestroyed(this))\n      .subscribe((timezonesState: TimezonesState) => {\n        this.timezones = timezonesState.timezones;\n      });\n\n    this.deleteAccountInfoForm = this.formBuilder.group({\n      contact_email: ['', [Validators.pattern(VALID_EMAIL_REGEX)]],\n      password: ['', [Validators.required]],\n    });\n    this.route.params.subscribe(parameters => {\n      if (parameters.id !== 'undefined') {\n        this.store.dispatch(new MoveTab(parameters.id));\n      }\n    });\n\n    this.timeZoneFilteredOptions = this.timeZoneFilter.valueChanges.pipe(\n      startWith(''),\n      map(name => (name ? this._filterTimeZone(name) : this.timezones.slice())),\n    );\n\n    /**\n     * Save current settings tab\n     */\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        if (mailState.currentSettingsTab) {\n          if (this.selectedTabQueryParams === mailState.currentSettingsTab) {\n            return;\n          }\n          this.selectedTabQueryParams = mailState.currentSettingsTab;\n          this.changeUrlParams();\n          this.tabSet.select(this.selectedTabQueryParams);\n          this.cdr.detectChanges();\n        }\n      });\n  }\n\n  private _filterTimeZone(name: string) {\n    return this.timezones.filter(option => option.value.toLowerCase().includes(name.toLowerCase()));\n  }\n\n  toggleRecoveyEmailEdit() {\n    this.isEditingRecoveryEmail = !this.isEditingRecoveryEmail;\n  }\n\n  /**\n   * Convert milliseconds to time format(m:s)\n   */\n  initAutoSaving() {\n    const autosave_durations: string[] = [];\n    this.autosaveDurations.forEach(duration => {\n      if (duration !== 'none' && duration) {\n        const perduration = Number(duration);\n        const newDuration = perduration >= 60000 ? `${perduration / 60000}m` : `${perduration / 1000}s`;\n        autosave_durations.push(newDuration);\n      } else {\n        autosave_durations.push('none');\n      }\n    });\n    this.autosave_duration_list = autosave_durations;\n  }\n\n  ngAfterViewInit() {\n    this.tabSet.select(this.selectedTabQueryParams);\n    this.cdr.detectChanges();\n  }\n\n  navigateToTab($event: any) {\n    const tabSelected = $event.nextId;\n    if (this.selectedTabQueryParams === tabSelected) {\n      return;\n    }\n    this.store.dispatch(new MoveTab(tabSelected));\n  }\n\n  changeUrlParams() {\n    this.router.navigateByUrl(`/mail/settings/${this.selectedTabQueryParams}`);\n  }\n\n  onAddNewCard() {\n    if (this.userState.inProgress) {\n      return;\n    }\n    this.isAddNewCard = true;\n    this.modalService.open(this.billingInfoModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-lg',\n    });\n  }\n\n  onDeleteCard(card: CardState) {\n    if (this.userState.inProgress) {\n      return;\n    }\n    this.store.dispatch(new CardDelete(card.id));\n  }\n\n  onMakePrimaryCard(card: CardState) {\n    if (this.userState.inProgress) {\n      return;\n    }\n    this.store.dispatch(new CardMakePrimary(card.id));\n  }\n\n  billingInfoModalOpen(billingInfoContent: any) {\n    this.isAddNewCard = false;\n    this.modalService.open(billingInfoContent, {\n      centered: true,\n      windowClass: 'modal-lg',\n    });\n  }\n\n  renew() {\n    this.isAddNewCard = false;\n    this.modalService.open(this.billingInfoModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-lg',\n    });\n  }\n\n  searchWhitelist() {\n    this.WhitelistItems = this.searchWhitelistInput.value\n      ? this.userState.whiteList.filter(item => item.email.includes(this.searchWhitelistInput.value))\n      : this.userState.whiteList;\n  }\n\n  searchBlacklist() {\n    this.BlacklistItems = this.searchBlacklistInput.value\n      ? this.userState.blackList.filter(item => item.email.includes(this.searchBlacklistInput.value))\n      : this.userState.blackList;\n  }\n\n  moveToBlacklist(id: number, name: string, email: string) {\n    this.store.dispatch(new MoveToBlacklist({ id: id, name: name, email: email }));\n  }\n\n  moveToWhitelist(id: number, name: string, email: string) {\n    this.store.dispatch(new MoveToWhitelist({ id: id, name: name, email: email }));\n  }\n\n  public deleteWhiteList(id: number) {\n    this.store.dispatch(new WhiteListDelete(id));\n  }\n\n  public deleteBlackList(id: number) {\n    this.store.dispatch(new BlackListDelete(id));\n  }\n\n  updateLanguage(language: Language) {\n    this.settings.language = language.name;\n    this.updateSettings();\n  }\n\n  updateTimeZone(event: any) {\n    this.updateSettings('timezone', event.value);\n  }\n\n  updateConversationMode(is_conversation_mode: boolean) {\n    this.updateSettings('is_conversation_mode', is_conversation_mode);\n    this.store.dispatch(new ClearMailsOnConversationModeChange());\n    this.store.dispatch(new GetUnreadMailsCount());\n  }\n\n  /**\n   * convert m:s format to milliseconds and update settings\n   */\n  updateSettings(key?: string, value?: any) {\n    if (key === 'autosave_duration') {\n      if (value.slice(-1) === 'm') {\n        value = Number(value.slice(0, -1)) * 60000;\n      }\n      if (value.slice(-1) === 's') {\n        value = Number(value.slice(0, -1)) * 1000;\n      }\n    }\n    if (key === 'is_enable_report_bugs') {\n      Sentry.init({\n        dsn: SENTRY_DSN,\n        enabled: value,\n      });\n    }\n    if (key === 'notification_email' && value !== '' && !this.validateEmail(value)) {\n      this.store.dispatch(new SnackPush({ message: `\"${value}\" is not valid email address.` }));\n      this.notificationEmail = this.userState.settings.notification_email;\n    } else {\n      this.settingsService.updateSettings(this.settings, key, value);\n    }\n  }\n\n  validateEmail(email: string) {\n    var re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  }\n\n  onUpdateSettingsBtnClick() {}\n\n  onDeleteAccount() {\n    this.deleteAccountOptions = {};\n    this.deleteAccountInfoForm.reset();\n    this.deleteAccountInfoModalRef = this.modalService.open(this.deleteAccountInfoModal, {\n      centered: true,\n      windowClass: 'modal-sm',\n    });\n  }\n\n  onDeleteAccountInfoSubmit() {\n    this.deleteAccountOptions.showErrors = true;\n    if (this.deleteAccountInfoForm.valid) {\n      this.deleteAccountInfoModalRef.dismiss();\n      this.confirmDeleteAccountModalRef = this.modalService.open(this.confirmDeleteAccountModal, {\n        centered: true,\n        windowClass: 'modal-sm',\n      });\n    }\n  }\n\n  // == Toggle password visibility\n  togglePassword(input: any): any {\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n\n  confirmDeleteAccount() {\n    const data = {\n      ...this.deleteAccountInfoForm.value,\n      username: this.userState.username,\n    };\n    this.store.dispatch(new DeleteAccount(data));\n    this.confirmDeleteAccountModalRef.dismiss();\n  }\n\n  requestNotificationPermission() {\n    this.pushNotificationService.requestPermission();\n  }\n\n  scrollTop(element: HTMLElement) {\n    element.scroll(0, 0);\n  }\n\n  scroll(element: HTMLElement) {\n    element.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  testNotification() {\n    const options = new PushNotificationOptions();\n    options.body = 'You have received a new email';\n    options.icon = 'https://mail.ctemplar.com/assets/images/media-kit/mediakit-logo4.png';\n\n    this.pushNotificationService.create('Test Notification', options).subscribe(\n      (notif: any) => {\n        if (notif.event.type === 'click') {\n          notif.notification.close();\n        }\n        this.store.dispatch(\n          new SnackPush({ message: \"if you can't see notification, please change notification settings on browser\" }),\n        );\n      },\n      (error: any) => {\n        this.store.dispatch(new SnackPush({ message: error }));\n      },\n    );\n  }\n\n  onViewInvoice(invoice: Invoice) {\n    this.viewInvoice(invoice);\n  }\n\n  onPrintInvoice(invoice: Invoice) {\n    this.viewInvoice(invoice, true);\n  }\n\n  viewInvoice(invoice: Invoice, print = false) {\n    let popupWin;\n    let invoiceItems = '';\n    invoice.items.forEach(item => {\n      invoiceItems += `\n        <tr>\n          <td>${moment(invoice.invoice_date).format('DD/MM/YYYY')}</td>\n          <td>${item.type || invoice.payment_method}</td>\n          <td>${item.description}</td>\n          <td>${item.quantity}</td>\n          <td><b>$${(item.amount / 100).toFixed(2)}</b></td>\n        </tr>\n      `;\n    });\n\n    let invoiceData = `\n      <html>\n      <head>\n        <title>Invoice : ${invoice.invoice_id}</title>\n        <style>\n            body {\n                font-family: \"Roboto\", Helvetica, Arial, sans-serif;\n            }\n\n            div.divFooter {\n                position: fixed;\n                bottom: 75px;\n                width: 100%;\n                text-align: center;\n                display: none;\n            }\n\n            @media print {\n              div.divFooter {\n                display: unset;\n              }\n            }\n\n            .container {\n                padding: 15px;\n                margin: auto;\n                color: #757675;\n                border: 1px solid #757675;\n                width: 21cm;\n                min-height: 29.7cm;\n            }\n\n            .row {\n                padding-left: -15px;\n                padding-right: -15px;\n                display: flex;\n                flex-wrap: wrap;\n            }\n\n            .col-4 {\n                flex: 0 0 33.3333333333%;\n                max-width: 33.3333333333%;\n            }\n\n            .col-8 {\n                flex: 0 0 66.6666666667%;\n                max-width: 66.6666666667%;\n            }\n\n            .text-center {\n                text-align: center;\n            }\n\n            .color-primary {\n                color: #2f4254;\n            }\n\n            .page-title {\n                font-weight: 300;\n            }\n\n            table {\n                border-collapse: collapse;\n                width: 100%;\n            }\n\n            th,\n            td {\n                text-align: left;\n                padding: 20px;\n            }\n\n            th {\n                text-transform: uppercase;\n                color: rgba(0, 0, 0, 0.54);\n                font-weight: normal;\n            }\n\n            tr:nth-child(even) {\n                background-color: #f2f2f2;\n            }\n        </style>\n      </head>`;\n    if (print) {\n      invoiceData += `<body onload=\"window.print();window.close()\">`;\n    } else {\n      invoiceData += `<body>`;\n    }\n    invoiceData += `\n    <div class=\"container\">\n        <div class=\"row\" style=\"margin-top: 1rem;\">\n            <div class=\"col-8\">\n                <img src=\"https://mail.ctemplar.com/assets/images/media-kit/mediakit-logo-sec.png\"\n                    style=\"height: 9rem;margin-left: 2rem;\">\n            </div>\n            <div class=\"col-4 color-primary\">\n                <div style=\"text-align: right;padding-right: 35px; line-height: 1.5;\">\n                    <div><b>Invoice # </b>${invoice.invoice_id}</div>\n                    <div><b>Invoice date : </b>${moment(invoice.invoice_date).format('DD/MM/YYYY')}</div>\n                    <div style=\"margin-top:20px;\"><b>Membership : </b>${invoice.payment_type}</div>\n                    <br>\n                    <div style=\"margin-top: 10px; font-size: 20px;\"><b>Status : <label style=\"color: green;\">PAID<label></label></b>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div style=\"margin-top: 7rem;\">\n            <table>\n                <tr>\n                    <th>Date</th>\n                    <th>Type</th>\n                    <th>Description</th>\n                    <th>QTY</th>\n                    <th>Amount (USD)</th>\n                </tr>\n                ${invoiceItems}\n                <tr>\n                    <td></td>\n                    <td></td>\n                    <td></td>\n                    <td>TOTAL</td>\n                    <td><b> $${(invoice.total_amount / 100).toFixed(2)}</b></td>\n                </tr>\n            </table>\n        </div>\n         <div style=\"margin-top:5rem\">\n            <div><b class=\"color-primary\" style=\"padding-right: 81px;\">Storage </b>${\n              invoice.storage / (1024 * 1024 * 1024)\n            }GB</div>\n            <div><b class=\"color-primary\" style=\"padding-right: 18px;\">Email addresses</b>${\n              invoice.email_addresses\n            }</div>\n            <div><b class=\"color-primary\" style=\"padding-right: 76px;\">Domains</b>${invoice.custom_domains}</div>\n        </div>\n    </div>\n    <div class=\"color-primary divFooter\">\n        <div><b>Orange Project ehf | Armula 4 &amp; 6 | Reykjavk, 108 | Iceland</b></div>\n    </div>\n</body>\n</html>`;\n\n    popupWin = window.open('', '_blank', 'top=0,left=0,height=auto,width=auto');\n    popupWin.document.open();\n    popupWin.document.write(invoiceData);\n    popupWin.document.close();\n  }\n}\n","<div class=\"desc-card\">\n  <div class=\"desc-card-header ui-header ui-header-bordered border-all-corner border-bottom-0 position-relative\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0 d-inline-block\">\n      <strong [translate]=\"'settings.domains_and_users.users'\">Users</strong>\n      <app-loading-spinner [showSpinner]=\"false\" optionalClasses=\"custom-domains-spinner\"></app-loading-spinner>\n    </h5>\n    <a\n      href=\"{{ primaryWebsite }}/help/answer/add-an-user/\"\n      ngbTooltip=\"Learn more\"\n      class=\"users-info-icon\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <i class=\"far fa-question-circle\"></i>\n    </a>\n    <div\n      class=\"beta-users\"\n      placement=\"left\"\n      ngbTooltip=\"This is beta feature and free for all as long as it is in beta, once it is fully released, you will be charged for it.\"\n    >\n      Beta\n      <i class=\"far fa-question-circle info-icon\"></i>\n    </div>\n  </div>\n  <div class=\"desc-card-body bg-faded users-body\">\n    <button\n      class=\"btn btn-secondary users-add-button text-small\"\n      (click)=\"openAddUserModal()\"\n      *ngIf=\"customDomains?.length > 0; else noCustomDomain\"\n    >\n      <span [translate]=\"'settings.add_user'\">Add User</span>\n    </button>\n\n    <ng-template #noCustomDomain>\n      <div\n        class=\"py-4 error-message\"\n        *ngIf=\"userState?.customDomainsLoaded\"\n        [translate]=\"'settings.domains_and_users.custom_domain'\"\n      >\n        Please add a custom domain first in order to add users.\n      </div>\n    </ng-template>\n\n    <app-loading-spinner class=\"loading-spinner\" [showSpinner]=\"organizationState?.inProgress\"></app-loading-spinner>\n\n    <div *ngIf=\"users?.length > 0\">\n      <ul class=\"ui-list ui-list-styled list-styled users-list\">\n        <li class=\"ui-list-item ui-list-item-xs-full\">\n          <div class=\"row row-xs align-items-center\">\n            <div class=\"col-4 font-weight-bold col-item\" [translate]=\"'page_pricing.user'\">User</div>\n            <div class=\"col-2 col-item\">\n              <div class=\"form-label mb-0 font-weight-bold\" [translate]=\"'settings.domain'\">Domain</div>\n            </div>\n            <div class=\"col-3 font-weight-bold col-item\" [translate]=\"'settings.recovery_email'\">Recovery Email</div>\n          </div>\n        </li>\n\n        <li class=\"ui-list-item ui-list-item-xs-full\" *ngFor=\"let user of users\">\n          <div class=\"row row-xs align-items-center\">\n            <div class=\"col-4 text-dark col-item\" [ngbTooltip]=\"user.username\">\n              {{ user.username }}\n            </div>\n            <div class=\"col-2 col-item\">\n              <div class=\"form-label text-dark mb-0\">\n                {{ user.domain }}\n              </div>\n            </div>\n            <div class=\"col-3 text-dark col-item\">\n              <div *ngIf=\"!user.isEditing\">\n                {{ user.recovery_email }}\n              </div>\n              <div *ngIf=\"user.isEditing\">\n                <input\n                  class=\"form-control text-dark\"\n                  [(ngModel)]=\"user.recovery_email\"\n                  [placeholder]=\"'settings.recovery_email' | translate\"\n                  autofocus=\"autofocus\"\n                  type=\"email\"\n                  name=\"recovery_email\"\n                />\n              </div>\n            </div>\n\n            <div class=\"col-3 text-right\">\n              <a\n                class=\"text-muted actions\"\n                *ngIf=\"!user.isEditing\"\n                (click)=\"user.isEditing = true; startUpdatingUser(user)\"\n                [ngbTooltip]=\"'settings.edit' | translate\"\n              >\n                <i class=\"icon icon-edit\"></i>\n              </a>\n              <a\n                class=\"text-muted actions\"\n                *ngIf=\"user.isEditing\"\n                (click)=\"user.isEditing = false; updateUser(user)\"\n                [ngbTooltip]=\"'common.save' | translate\"\n              >\n                <i class=\"icon icon-save-disk\"></i>\n              </a>\n              <a\n                class=\"text-muted actions\"\n                [ngbTooltip]=\"'settings.delete' | translate\"\n                (click)=\"openConfirmDeleteModal(user)\"\n              >\n                <i class=\"icon icon-garbage\"></i>\n              </a>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n<!-- Add user modal -->\n<ng-template #addUserModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'settings.add_user'\">Add User</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"closeAddUserModal()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\" *ngIf=\"isAddingUser\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <!--User Add form-->\n        <div class=\"form\">\n          <form class=\"user-add-form\" [formGroup]=\"addUserForm\" #form=\"ngForm\">\n            <div>\n              <div class=\"full-width\">\n                <strong [translate]=\"'create_account.information_label'\">Information:</strong>\n                <span class=\"information-content mb-4\" [translate]=\"'create_account.create_address_warning'\">\n                  By adding a user, a new mailbox will be created with a free plan. It is usually used when you have a\n                  team and you want to create a separate mailbox. If you are the one who will use the address, in order\n                  to keep the benefits of your paid plan, you have to\n                  <a class=\"ml-1\" [translate]=\"'create_account.go_to_create_address'\" (click)=\"closeAddUserModal()\">\n                    Create an address.\n                  </a>\n                </span>\n              </div>\n              <div class=\"form-step-card\">\n                <label class=\"text-dark mb-0\">\n                  <strong [translate]=\"'create_account.username_and_domain'\">Username and domain</strong>\n                </label>\n                <div class=\"form-group position-relative\">\n                  <div\n                    class=\"form-inline userame-field-group\"\n                    [ngClass]=\"{\n                      'is-validate':\n                        addUserForm.controls.username.invalid && (addUserForm.controls.username.touched || submitted)\n                    }\"\n                  >\n                    <label\n                      for=\"username\"\n                      class=\"d-block text-muted text-left hidden-sm-up\"\n                      [translate]=\"'create_account.choose_username'\"\n                    >\n                      Choose username\n                    </label>\n                    <input\n                      class=\"form-control text-dark mb-3 mb-sm-0 username-container\"\n                      id=\"username\"\n                      [placeholder]=\"'create_account.choose_username' | translate\"\n                      type=\"text\"\n                      name=\"username\"\n                      formControlName=\"username\"\n                    />\n                    <span class=\"domain-separator text-center text-dark\">@</span>\n                    <div class=\"btn-dropdown btn-dropdown-select username-container\">\n                      <div ngbDropdown class=\"dropdown-sm\">\n                        <button\n                          ngbDropdownToggle\n                          class=\"dropdown-toggle custom-domains-dropdown\"\n                          id=\"custom-domains\"\n                          role=\"button\"\n                        >\n                          <div>{{ addUserForm.get('domain').value }}</div>\n                        </button>\n                        <div ngbDropdownMenu aria-labelledby=\"signatureEmailAddressDropdownMenuButton\">\n                          <a\n                            class=\"dropdown-item\"\n                            *ngFor=\"let customDomain of customDomains\"\n                            (click)=\"\n                              addUserForm.get('domain').setValue(customDomain);\n                              addUserForm.get('username').reset();\n                              errorMessage = ''\n                            \"\n                          >\n                            {{ customDomain }}\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n\n                    <ng-container *ngIf=\"newAddressOptions.inProgress; else showIcons\">\n                      <app-loading-spinner class=\"username-availability-spinner\" [showSpinner]=\"true\">\n                      </app-loading-spinner>\n                    </ng-container>\n                    <ng-template #showIcons>\n                      <i\n                        class=\"fas fa-check green input-icon\"\n                        *ngIf=\"newAddressOptions.usernameExists === false && !addUserForm.controls['username'].errors\"\n                      >\n                      </i>\n                      <i\n                        class=\"fas fa-times text-danger input-icon\"\n                        *ngIf=\"\n                          newAddressOptions.usernameExists === true ||\n                          (addUserForm.controls['username'].errors &&\n                            (addUserForm.controls['username'].touched || submitted))\n                        \"\n                      >\n                      </i>\n                    </ng-template>\n                  </div>\n                  <span *ngIf=\"userExistError\" class=\"validate-message\">{{ userExistError }}</span>\n\n                  <ng-container\n                    *ngIf=\"\n                      addUserForm.controls['username'].errors &&\n                        (addUserForm.controls['username'].touched || submitted);\n                      else usernameExistsBlock\n                    \"\n                  >\n                    <span class=\"validate-message\" *ngIf=\"addUserForm.controls['username'].errors\">\n                      <ng-container *ngIf=\"addUserForm.controls['username'].errors.pattern; else usernameLengthBlock\">\n                        <span [translate]=\"'settings.username_allowed_chars'\">\n                          The username must start with a letter and end with a letter or number.It may only contain\n                        </span>\n                        &nbsp;<em>a-z</em>, <em>A-Z</em>, <em>0-9</em> or <em>._-</em> &nbsp;\n                        <span [translate]=\"'settings.username_constraint'\"\n                          > characters and it must be between 1 and 128 characters.\n                        </span>\n                      </ng-container>\n                      <ng-template #usernameLengthBlock>\n                        <ng-container *ngIf=\"addUserForm.controls['username'].errors.maxlength\">\n                          <span [translate]=\"'settings.org_username_len'\">\n                            The username must be between 2 and 128 characters.\n                          </span>\n                        </ng-container>\n                      </ng-template>\n                    </span>\n                    <span\n                      *ngIf=\"addUserForm.controls['username'].errors.required\"\n                      class=\"validate-message\"\n                      [translate]=\"'settings.username_required'\"\n                    >\n                      The username is required.\n                    </span>\n                  </ng-container>\n                  <ng-template #usernameExistsBlock>\n                    <span\n                      *ngIf=\"newAddressOptions.usernameExists === true\"\n                      class=\"validate-message\"\n                      [translate]=\"'settings.username_exist'\"\n                    >\n                      Username already exists.\n                    </span>\n                  </ng-template>\n                </div>\n              </div>\n              <div>\n                <label class=\"text-dark mb-0\">\n                  <strong [translate]=\"'settings.password'\">Password</strong>\n                </label>\n                <div class=\"form-group position-relative\">\n                  <label\n                    for=\"choosePassword\"\n                    class=\"d-block text-muted text-left hidden-sm-up\"\n                    [translate]=\"'create_account.choose_password'\"\n                  >\n                    Choose Password\n                  </label>\n                  <div class=\"input-group\">\n                    <input\n                      #input\n                      class=\"form-control border-right-0\"\n                      id=\"choosePassword\"\n                      [placeholder]=\"'create_account.choose_password' | translate\"\n                      type=\"password\"\n                      aria-describedby=\"passwordToggle\"\n                      name=\"password\"\n                      formControlName=\"password\"\n                    />\n                    <span\n                      class=\"input-group-addon password-toggle bg-white text-muted\"\n                      id=\"passwordToggle\"\n                      (click)=\"togglePassword(input)\"\n                    >\n                      <i class=\"fa fa-eye\"></i>\n                      <i class=\"fa fa-eye-slash\"></i>\n                    </span>\n                  </div>\n                  <i\n                    class=\"fas fa-check green password-ok input-icon\"\n                    *ngIf=\"\n                      addUserForm.controls['password']?.value?.length > 0 &&\n                      addUserForm.controls['password']?.value?.length <= 128\n                    \"\n                  ></i>\n                  <div\n                    *ngIf=\"\n                      addUserForm.controls['password'].errors && (addUserForm.controls['password'].touched || submitted)\n                    \"\n                    class=\"validate-message\"\n                  >\n                    <ng-container *ngIf=\"addUserForm.controls['password'].errors.required\">\n                      <span [translate]=\"'login.password_required'\"> The password is required. </span>\n                    </ng-container>\n                    <ng-container *ngIf=\"addUserForm.controls['password'].errors.maxlength\">\n                      <span [translate]=\"'settings.password_length'\">\n                        The password must be less than 128 characters.\n                      </span>\n                    </ng-container>\n                  </div>\n                </div>\n                <div class=\"form-group position-relative\">\n                  <label\n                    for=\"confirmPassword\"\n                    class=\"d-block text-muted text-left hidden-sm-up\"\n                    [translate]=\"'create_account.confirm_password'\"\n                  >\n                    Confirm Password\n                  </label>\n                  <div\n                    class=\"input-group\"\n                    [ngClass]=\"{\n                      'is-validate':\n                        addUserForm.controls.confirmPwd.invalid && !addUserForm.controls.confirmPwd.pristine\n                    }\"\n                  >\n                    <input\n                      #input2\n                      class=\"form-control border-right-0\"\n                      id=\"confirmPassword\"\n                      [placeholder]=\"'create_account.confirm_password' | translate\"\n                      type=\"password\"\n                      aria-describedby=\"cofirmpasswordToggle\"\n                      name=\"confirmPwd\"\n                      formControlName=\"confirmPwd\"\n                    />\n                    <span\n                      class=\"input-group-addon password-toggle bg-white text-muted\"\n                      id=\"cofirmpasswordToggle\"\n                      (click)=\"togglePassword(input2)\"\n                    >\n                      <i class=\"fa fa-eye\"></i>\n                      <i class=\"fa fa-eye-slash\"></i>\n                    </span>\n                  </div>\n                  <i\n                    class=\"fas fa-check green password-ok input-icon\"\n                    *ngIf=\"!addUserForm.controls['confirmPwd'].errors\"\n                  ></i>\n                  <span\n                    *ngIf=\"\n                      addUserForm.controls['confirmPwd'].errors &&\n                      (!addUserForm.controls.confirmPwd.pristine || submitted)\n                    \"\n                    class=\"validate-message\"\n                  >\n                    <span [translate]=\"'create_account.passwords_not_match'\">Passwords do not match.</span>\n                  </span>\n                </div>\n              </div>\n\n              <div\n                [ngClass]=\"{\n                  'is-validate':\n                    addUserForm.get('recoveryEmail').invalid && addUserForm.controls['recoveryEmail'].touched\n                }\"\n              >\n                <label class=\"text-dark mb-0\">\n                  <strong [translate]=\"'create_account.recovery_email_optional'\">Recovery email (optional)</strong>\n                </label>\n                <div class=\"form-group\">\n                  <label\n                    for=\"recoveryEmail\"\n                    class=\"d-block text-muted text-left hidden-sm-up\"\n                    [translate]=\"'settings.recovery_email'\"\n                  >\n                    Recovery email\n                  </label>\n                  <input\n                    class=\"form-control text-dark\"\n                    id=\"recoveryEmail\"\n                    [placeholder]=\"'settings.recovery_email' | translate\"\n                    type=\"email\"\n                    name=\"recoveryEmail\"\n                    formControlName=\"recoveryEmail\"\n                  />\n                  <span\n                    *ngIf=\"\n                      addUserForm.controls['recoveryEmail'].errors && addUserForm.controls['recoveryEmail'].touched\n                    \"\n                    id=\"email-valid1\"\n                    class=\"validate-message\"\n                    [translate]=\"'settings.email_invalid'\"\n                  >\n                    The email is invalid.\n                  </span>\n                </div>\n              </div>\n\n              <div class=\"form-group text-center\">\n                <button\n                  class=\"btn btn-lg btn-secondary\"\n                  [disabled]=\"isAddingUserInProgress\"\n                  (click)=\"submitAddUser()\"\n                  type=\"submit\"\n                  role=\"button\"\n                >\n                  <span [translate]=\"'settings.add_user'\">Add User</span>\n                </button>\n                <app-loading-spinner [showSpinner]=\"isAddingUserInProgress\"></app-loading-spinner>\n              </div>\n              <div *ngIf=\"errorMessage\" class=\"validate-message\">\n                {{ errorMessage }}\n                <br />\n                <span [translate]=\"'settings.only_allow_5'\">\n                  Note: We only allow 5 users per domain until the feature is in beta.\n                </span>\n              </div>\n            </div>\n          </form>\n        </div>\n        <!--User Add form END-->\n      </div>\n    </div>\n  </div> </ng-template\n><!-- Add User modal ends -->\n\n<!-- Confirm user delete modal -->\n<ng-template #confirmDeleteModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span [translate]=\"'contacts.delete.message'\">Are you sure, you want to delete</span>\n        <strong>{{ selectedUser?.username }}</strong\n        >?<br />\n        <span class=\"warning\">\n          <span class=\"warning-text\" [translate]=\"'settings.warning'\">Warning</span>:\n          <span [translate]=\"'settings.associated_data'\">\n            All the associated data (if any) of this user will also be deleted.\n          </span>\n        </span>\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <app-loading-spinner [showSpinner]=\"organizationState.isDeleteInProgress\"></app-loading-spinner>\n        <button\n          (click)=\"cancelDelete()\"\n          class=\"btn btn-secondary btn-sm mr-2\"\n          [disabled]=\"organizationState.isDeleteInProgress\"\n          [translate]=\"'common.cancel'\"\n          role=\"button\"\n        >\n          <span [translate]=\"'common.cancel'\">Cancel</span>\n        </button>\n        <button\n          (click)=\"confirmDelete()\"\n          class=\"btn btn-danger btn-sm\"\n          [translate]=\"'common.delete'\"\n          [disabled]=\"organizationState.isDeleteInProgress\"\n          role=\"button\"\n        >\n          <span [translate]=\"'common.delete'\">Delete</span>\n        </button>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Confirm delete modal ends -->\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { OrganizationUser } from '../../../../store/models';\nimport { PRIMARY_WEBSITE, VALID_EMAIL_REGEX } from '../../../../shared/config';\nimport { PasswordValidation } from '../../../../users/users-create-account/users-create-account.component';\nimport { AppState, UserState } from '../../../../store/datatypes';\nimport { OpenPgpService, UsersService } from '../../../../store/services';\nimport {\n  AddOrganizationUser,\n  DeleteOrganizationUser,\n  OrganizationState,\n  UpdateOrganizationUser,\n} from '../../../../store/organization.store';\nimport { MoveTab } from '../../../../store/actions';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-organization-users',\n  templateUrl: './organization-users.component.html',\n  styleUrls: ['./organization-users.component.scss'],\n})\nexport class OrganizationUsersComponent implements OnInit {\n  @ViewChild('addUserModal') addUserModal: any;\n\n  @ViewChild('confirmDeleteModal') confirmDeleteModal: any;\n\n  users: OrganizationUser[];\n\n  addUserForm: FormGroup;\n\n  errorMessage: any;\n\n  userExistError: string;\n\n  submitted: boolean;\n\n  organizationState: OrganizationState;\n\n  customDomains: string[];\n\n  newAddressOptions = { usernameExists: false, inProgress: false };\n\n  isAddingUser: boolean;\n\n  isAddingUserInProgress: boolean;\n\n  userState: UserState;\n\n  selectedUser: OrganizationUser;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  private addUserModalRef: NgbModalRef;\n\n  private confirmDeleteModalRef: NgbModalRef;\n\n  private isDeleteInProgress: boolean;\n\n  constructor(\n    private modalService: NgbModal,\n    private store: Store<AppState>,\n    private usersService: UsersService,\n    private openPgpService: OpenPgpService,\n    private formBuilder: FormBuilder,\n  ) {}\n\n  ngOnInit() {\n    this.addUserForm = this.formBuilder.group(\n      {\n        username: [\n          '',\n          [\n            Validators.required,\n            Validators.pattern(/^\\w+([.-]?\\w+)*$/),\n            Validators.maxLength(128),\n            Validators.minLength(1),\n          ],\n        ],\n        domain: ['', Validators.required],\n        password: ['', [Validators.required, Validators.maxLength(128)]],\n        confirmPwd: ['', [Validators.required, Validators.maxLength(128)]],\n        recoveryEmail: ['', [Validators.pattern(VALID_EMAIL_REGEX)]],\n      },\n      {\n        validator: PasswordValidation.MatchPassword,\n      },\n    );\n\n    /**\n     * Get user's custom domains\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.customDomains = user.customDomains\n          .filter(item => item.is_domain_verified && item.is_mx_verified)\n          .map(item => item.domain);\n        if (this.customDomains.length > 0) {\n          this.addUserForm.get('domain').setValue(this.customDomains[0]);\n        }\n      });\n\n    this.store\n      .select(state => state.organization)\n      .pipe(untilDestroyed(this))\n      .subscribe((organizationState: OrganizationState) => {\n        this.organizationState = organizationState;\n        this.users = organizationState.users;\n        if (this.isAddingUserInProgress && !this.organizationState.isAddingUserInProgress) {\n          this.isAddingUserInProgress = false;\n          if (this.organizationState.isError) {\n            this.errorMessage = this.organizationState.error;\n          } else {\n            this.closeAddUserModal();\n          }\n        }\n        if (this.isDeleteInProgress && !this.organizationState.isDeleteInProgress) {\n          this.isDeleteInProgress = false;\n          this.cancelDelete();\n        }\n      });\n\n    this.handleUsernameAvailability();\n  }\n\n  openAddUserModal() {\n    this.errorMessage = null;\n    this.isAddingUser = true;\n    this.addUserForm.get('domain').setValue(this.customDomains[0]);\n    this.addUserModalRef = this.modalService.open(this.addUserModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal org-user-add-modal',\n      backdrop: 'static',\n    });\n    this.addUserModalRef.result.then(\n      result => {\n        this.addUserModalClosed();\n      },\n      error => {\n        this.addUserModalClosed();\n      },\n    );\n  }\n\n  addUserModalClosed() {\n    this.addUserForm.reset();\n    this.isAddingUserInProgress = false;\n    this.isAddingUser = false;\n    this.newAddressOptions = { usernameExists: false, inProgress: false };\n    this.submitted = false;\n  }\n\n  closeAddUserModal() {\n    this.addUserModalRef.close();\n    this.store.dispatch(new MoveTab('addresses-and-signatures'));\n  }\n\n  submitAddUser() {\n    this.submitted = true;\n    this.errorMessage = null;\n    if (this.addUserForm.invalid || this.newAddressOptions.usernameExists === true) {\n      return false;\n    }\n    this.isAddingUserInProgress = true;\n    this.openPgpService.generateUserKeys(\n      this.addUserForm.value.username,\n      this.addUserForm.value.password,\n      this.addUserForm.value.domain,\n    );\n    if (this.openPgpService.getUserKeys()) {\n      this.addNewUser();\n    } else {\n      this.openPgpService.waitForPGPKeys(this, 'addNewUser');\n    }\n  }\n\n  addNewUser() {\n    const user = new OrganizationUser({\n      ...this.addUserForm.value,\n      ...this.openPgpService.getUserKeys(),\n      username: this.getEmail(),\n    });\n    this.store.dispatch(new AddOrganizationUser(user));\n  }\n\n  startUpdatingUser(user: OrganizationUser) {\n    user.unmodifiedUser = new OrganizationUser(user);\n  }\n\n  updateUser(user: OrganizationUser) {\n    this.store.dispatch(new UpdateOrganizationUser(user));\n  }\n\n  openConfirmDeleteModal(user: OrganizationUser) {\n    if (!this.organizationState.inProgress) {\n      this.selectedUser = user;\n      this.confirmDeleteModalRef = this.modalService.open(this.confirmDeleteModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n        backdrop: 'static',\n      });\n    }\n  }\n\n  confirmDelete() {\n    this.isDeleteInProgress = true;\n    this.store.dispatch(new DeleteOrganizationUser(this.selectedUser));\n  }\n\n  cancelDelete() {\n    this.selectedUser = null;\n    this.confirmDeleteModalRef.close();\n  }\n\n  private getEmail() {\n    return `${this.addUserForm.controls.username.value}@${this.addUserForm.controls.domain.value}`;\n  }\n\n  /**\n   * Check username + domain can be used for new address\n   */\n  private handleUsernameAvailability() {\n    this.addUserForm\n      .get('username')\n      .valueChanges.pipe(debounceTime(1000), untilDestroyed(this))\n      .subscribe(username => {\n        this.userExistError = null;\n        if (!username) {\n          return;\n        }\n        if (!this.addUserForm.controls.username.errors) {\n          this.newAddressOptions.inProgress = true;\n          this.usersService.checkUsernameAvailability(this.getEmail()).subscribe(\n            response => {\n              this.newAddressOptions.usernameExists = response.exists;\n              this.newAddressOptions.inProgress = false;\n            },\n            error => {\n              this.userExistError = error.error;\n              this.newAddressOptions.inProgress = false;\n              this.newAddressOptions.usernameExists = null;\n            },\n          );\n        }\n      });\n  }\n\n  // == Toggle password visibility\n  togglePassword(input: any): any {\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n}\n","<ng-template #modalContent let-c=\"close\" let-d=\"dismiss\">\n  <form class=\"whitelist-form\" [formGroup]=\"contactForm\" #form=\"ngForm\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\" id=\"whitelistModalLabel\">\n        <strong>\n          <span [translate]=\"'settings.add_to'\">Add to</span>\n          {{ contactType.toLowerCase() }}\n        </strong>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"form-content-holder\">\n        <div class=\"form-group\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-sm-3\">\n              <label class=\"form-label mb-sm-0\" for=\"whitelistName\" [translate]=\"'common.name'\"> Name: </label>\n            </div>\n            <div class=\"col-sm-9\">\n              <div class=\"form-content-row mb-0\">\n                <input class=\"form-control form-control-sm\" id=\"whitelistName\" type=\"text\" formControlName=\"name\" />\n              </div>\n            </div>\n          </div>\n          <span *ngIf=\"contactForm.controls['name'].errors && showFormErrors\" id=\"name-valid\" class=\"validate-message\">\n            <span *ngIf=\"contactForm.controls['name'].errors.required\" [translate]=\"'settings.username_required'\">\n              The username is required.\n            </span>\n          </span>\n        </div>\n        <div class=\"form-group mb-0\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-sm-3\">\n              <label class=\"form-label mb-sm-0\" for=\"whitelistEmail\" [translate]=\"'common.email'\"> E-mail: </label>\n            </div>\n            <div class=\"col-sm-9\">\n              <div class=\"form-content-row mb-0\">\n                <input class=\"form-control form-control-sm\" id=\"whitelistEmail\" type=\"text\" formControlName=\"email\" />\n              </div>\n            </div>\n          </div>\n          <span\n            *ngIf=\"contactForm.controls['email'].errors && showFormErrors\"\n            id=\"email-valid\"\n            class=\"validate-message\"\n          >\n            <span *ngIf=\"contactForm.hasError('email', 'email')\" [translate]=\"'settings.email_required'\">\n              The email is required.\n            </span>\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"modal-footer justify-content-center justify-content-sm-end\">\n      <button [disabled]=\"inProgress\" (click)=\"addContact()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n        {{ contact?.id ? ('common.save' | translate) : ('settings.add' | translate) }}\n      </button>\n      <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n    </div>\n  </form>\n</ng-template>\n","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, BlackList, UserState, WhiteList } from '../../../store/datatypes';\nimport { BlackListAdd, WhiteListAdd } from '../../../store/actions';\nimport { NotificationService } from '../../../store/services/notification.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-save-list-contact',\n  templateUrl: './save-list-contact.component.html',\n  styleUrls: ['./save-list-contact.component.scss'],\n})\nexport class SaveListContactComponent implements OnInit {\n  @Input() public contactType: 'Whitelist' | 'Blacklist' = 'Whitelist';\n\n  @Input() public contact: WhiteList | BlackList = { email: '', name: '' };\n\n  @Output() public closed = new EventEmitter();\n\n  @ViewChild('modalContent') modalContent: any;\n\n  public contactForm: FormGroup;\n\n  public showFormErrors: boolean;\n\n  private modalRef: NgbModalRef;\n\n  public inProgress: boolean;\n\n  constructor(\n    private modalService: NgbModal,\n    private store: Store<AppState>,\n    private notificationService: NotificationService,\n    private formBuilder: FormBuilder,\n  ) {}\n\n  ngOnInit() {\n    this.contactForm = this.formBuilder.group({\n      name: ['', [Validators.required]],\n      email: ['', [Validators.email]],\n    });\n    setTimeout(() => {\n      this.openModal();\n    }, 50);\n\n    this.handleUserState();\n  }\n\n  /**\n   * Display notification about saving contacts\n   */\n  private handleUserState(): void {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((state: UserState) => {\n        if (this.inProgress && !state.inProgress) {\n          this.inProgress = false;\n          if (!state.isError) {\n            this.notificationService.showSnackBar(\n              `${this.contactType} contact ${this.contact.id ? 'updated' : 'saved'} successfully.`,\n            );\n            this.closed.emit();\n            this.modalRef.close();\n          } else {\n            this.notificationService.showSnackBar(\n              `Failed to ${this.contact.id ? 'update' : 'add'} ${this.contactType} contact.${state.error}`,\n            );\n          }\n        }\n      });\n  }\n\n  openModal() {\n    this.modalRef = this.modalService.open(this.modalContent, {\n      centered: true,\n      windowClass: 'modal-sm',\n    });\n    this.modalRef.result.then(\n      result => {\n        this.closed.emit();\n      },\n      error => {\n        this.closed.emit();\n      },\n    );\n  }\n\n  /**\n   * Save to whitelist or blacklist according to contactType\n   */\n  public addContact() {\n    this.showFormErrors = true;\n    if (this.contactForm.valid) {\n      this.inProgress = true;\n      if (this.contactType === 'Whitelist') {\n        this.store.dispatch(new WhiteListAdd(this.contactForm.value));\n      } else {\n        this.store.dispatch(new BlackListAdd(this.contactForm.value));\n      }\n    }\n  }\n}\n","<section class=\"mailbox-section\">\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.security_settings'\"> Security Settings </strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <!-- Password Change -->\n      <div class=\"form-content-row\">\n        <div class=\"row label-align\">\n          <div class=\"col-sm-3\">\n            <label for=\"securityPassword\" class=\"form-label mb-sm-0\" [translate]=\"'settings.password'\">\n              Password\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <input\n              class=\"form-control form-control-sm\"\n              id=\"securityPassword\"\n              type=\"password\"\n              [disabled]=\"true\"\n              value=\"********\"\n            />\n            <span class=\"form-label-text mt-1\">\n              <a\n                href=\"javascript:void(0);\"\n                role=\"button\"\n                class=\"text-uppercase btn-link\"\n                (click)=\"openChangePasswordModal()\"\n              >\n                <strong>\n                  <u [translate]=\"'settings.change_now'\">Change now</u>\n                </strong>\n              </a>\n            </span>\n          </div>\n        </div>\n      </div>\n      <!-- 2 Factor Authentication -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'page_pricing.two_factore_auth'\">\n              2 Factor authentication\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <a\n                *ngIf=\"!settings.enable_2fa\"\n                (click)=\"get2FASecret(); auth2FAForm = { auth2FAStep: 1, enable_2fa: true }\"\n                href=\"javascript:void(0);\"\n                class=\"col-12 text-uppercase btn-link\"\n                role=\"button\"\n              >\n                <strong>\n                  <u [translate]=\"'settings.security.set_up_2FA'\">Set up 2 Factor authentication</u>\n                </strong>\n              </a>\n              <a\n                *ngIf=\"settings.enable_2fa\"\n                (click)=\"disable2FA()\"\n                href=\"javascript:void(0);\"\n                class=\"col-12 text-uppercase btn-link\"\n                role=\"button\"\n              >\n                <strong>\n                  <u [translate]=\"'settings.security.disable_2FA'\">Disable 2 Factor authentication</u>\n                </strong>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Recovery mail setting -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label for=\"recoveryMail\" class=\"form-label mb-sm-0\" [translate]=\"'settings.recovery_email'\">\n              Recovery email\n            </label>\n          </div>\n          <form class=\"col-sm-7 col-md-5\" autocomplete=\"off\">\n            <input\n              class=\"form-control form-control-sm\"\n              id=\"recoveryMail\"\n              type=\"email\"\n              name=\"email\"\n              autocomplete=\"off\"\n              [(ngModel)]=\"settings.recovery_email\"\n              [ngModelOptions]=\"{ updateOn: 'blur' }\"\n              (change)=\"updateSettings('recovery_email', $event.target.value)\"\n              placeholder=\"example@mail.com\"\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.compose.encryption'\">Encryption</strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <!-- Subject Encryption Automatically -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.security.auto_decrypt_subject'\">\n              Subjects decryption automatically\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5 subject-encryption\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"autoSubjectDecryption1\"\n                    name=\"autoSubjectDecryption\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('is_subject_auto_decrypt', true)\"\n                    [checked]=\"settings?.is_subject_auto_decrypt\"\n                  />\n                  <label for=\"autoSubjectDecryption1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"autoSubjectDecryption2\"\n                    name=\"autoSubjectDecryption\"\n                    type=\"radio\"\n                    (click)=\"updateSettings('is_subject_auto_decrypt', false)\"\n                    [checked]=\"!settings?.is_subject_auto_decrypt\"\n                  />\n                  <label for=\"autoSubjectDecryption2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Contacts Encryption -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.security.contacts_encryption'\">\n              Contacts encryption\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"contactsEncryption1\"\n                    name=\"[3]\"\n                    type=\"radio\"\n                    (click)=\"openConfirmEncryptContactsModal()\"\n                    [checked]=\"isContactsEncrypted\"\n                  />\n                  <label for=\"contactsEncryption1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"contactsEncryption2\"\n                    name=\"[3]\"\n                    type=\"radio\"\n                    (click)=\"openDecryptContactsModal()\"\n                    [checked]=\"!isContactsEncrypted\"\n                  />\n                  <label for=\"contactsEncryption2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- Using Local Storage for Encryption Data -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.security.using_local_storage'\">\n              Using local/session storage\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"usingLocalStorage1\"\n                    name=\"[4]\"\n                    type=\"radio\"\n                    (click)=\"updateUsingLocalStorage(true)\"\n                    [checked]=\"isUsingLocalStorage\"\n                  />\n                  <label for=\"usingLocalStorage1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"usingLocalStorage2\"\n                    name=\"[4]\"\n                    type=\"radio\"\n                    (click)=\"updateUsingLocalStorage(false)\"\n                    [checked]=\"!isUsingLocalStorage\"\n                  />\n                  <label for=\"usingLocalStorage2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <header class=\"ui-header ui-header-bordered\">\n    <h5 class=\"ui-header-subtitle text-dark mb-0\">\n      <strong [translate]=\"'settings.security.phishing_protection'\"> Phishing Protection </strong>\n    </h5>\n  </header>\n  <div class=\"mailbox-section-body mailbox-section-body-sm\">\n    <div class=\"form-content-holder\">\n      <!-- Anti Phishing -->\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.security.anti_phishing'\"> Anti Phishing </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <div class=\"row row-sm\">\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"phishingProtection1\"\n                    name=\"[phishingProtection]\"\n                    type=\"radio\"\n                    (click)=\"updateAntiPhishing(true)\"\n                    [checked]=\"settings.is_anti_phishing_enabled\"\n                  />\n                  <label for=\"phishingProtection1\" [translate]=\"'common.enabled'\">Enabled</label>\n                </div>\n              </div>\n              <div class=\"col-6 flex-auto-col\">\n                <div class=\"fancy-field-group\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-sm\"\n                    id=\"phishingProtection2\"\n                    name=\"[phishingProtection]\"\n                    type=\"radio\"\n                    (click)=\"updateAntiPhishing(false)\"\n                    [checked]=\"!settings.is_anti_phishing_enabled\"\n                  />\n                  <label for=\"phishingProtection2\" [translate]=\"'common.disabled'\">Disabled</label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row align-items-center my-3\" *ngIf=\"settings.is_anti_phishing_enabled\">\n          <div class=\"col-sm-3\">\n            <label class=\"form-label mb-sm-0\" [translate]=\"'settings.security.phishing_phrase_title'\">\n              Anti Phishing Phrase\n            </label>\n          </div>\n          <div class=\"col-sm-7 col-md-5\">\n            <input\n              class=\"form-control form-control-sm\"\n              id=\"antiPhishingPhrase\"\n              type=\"text\"\n              name=\"antiPhishingPhrase\"\n              autocomplete=\"off\"\n              [(ngModel)]=\"settings.anti_phishing_phrase\"\n              [ngModelOptions]=\"{ updateOn: 'blur' }\"\n              (change)=\"updateSettings('anti_phishing_phrase', $event.target.value)\"\n            />\n          </div>\n        </div>\n        <div class=\"info-card mt-2 full-width\">\n          <span [translate]=\"'settings.security.anti_phishing_phrase'\">\n            The Anti-Phishing phrase allows users to link a custom word or phrase of your choice to your CTemplar\n            account. Once set, if you ever log into your webmail and your Anti-Phishing phrase is either missing or\n            incorrect, you may be the victim of phishing. You should immediately confirm that you are visiting\n          </span>\n          <a href=\"https://ctemplar.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://ctemplar.com</a>.\n          <span [translate]=\"'settings.security.malicious_site'\">\n            If you are not, then a malicious site might have your login credentials for your CTemplar account. To\n            prevent harm to your account, you should immediately visit\n          </span>\n          &nbsp;\n          <a href=\"https://ctemplar.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://ctemplar.com </a>\n          <span [translate]=\"'settings.security.and_change_password'\">and change your password.</span>\n        </div>\n      </div>\n      <div class=\"form-content-row\">\n        <div class=\"row align-items-center\"></div>\n      </div>\n    </div>\n  </div>\n</section>\n\n<!--Decrypt Contacts Modal-->\n<ng-template #decryptContactsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"decryptContactsModal\">\n      <strong *ngIf=\"isDecryptingContacts; else decryptingTitle\" [translate]=\"'settings.security.decrypting_contacts'\"\n        >Decrypting contacts</strong\n      >\n      <ng-template #decryptingTitle>\n        <strong [translate]=\"'settings.security.confirm_disable_contacts'\">\n          Confirm disable contacts encryption\n        </strong>\n      </ng-template>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"closeDecryptContactsModal()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div *ngIf=\"isDecryptingContacts; else decryptingContacts\" class=\"px-4\">\n      <label [translate]=\"'settings.security.contacts_being_decrypt'\">\n        Please be patient while your contacts are being decrypted, don't close your browser.\n      </label>\n      <div align=\"center\" *ngIf=\"!contactsState?.loaded && contactsState?.totalContacts === 0\">\n        <app-loading-spinner [showSpinner]=\"true\"></app-loading-spinner>\n      </div>\n      <div class=\"my-4\" *ngIf=\"contactsState?.loaded || contactsState?.totalContacts !== 0\">\n        <div class=\"info-list-val-text text-center\">\n          {{ contactsState.noOfDecryptedContacts }}\n          <span [translate]=\"'settings.of'\">of </span>\n          {{ contactsState.totalContacts }}\n          <span [translate]=\"'settings.security.contacts_decrypted'\">contacts decrypted</span>\n        </div>\n        <div class=\"progress progress-secondary progress-lg\">\n          <div\n            class=\"progress-bar\"\n            role=\"progressbar\"\n            [style.width.%]=\"(contactsState.noOfDecryptedContacts / contactsState.totalContacts) * 100\"\n            [attr.aria-valuenow]=\"contactsState.noOfDecryptedContacts\"\n            aria-valuemin=\"0\"\n            [attr.aria-valuemax]=\"contactsState.totalContacts\"\n          ></div>\n        </div>\n      </div>\n      <div *ngIf=\"contactsState.noOfDecryptedContacts === contactsState.totalContacts && contactsState.loaded\">\n        <div class=\"mb-4 green\" [translate]=\"'settings.security.all_contacts_decrypt'\">\n          All contacts decrypted successfully\n        </div>\n        <div align=\"right\" class=\"mt-3\">\n          <button\n            (click)=\"closeDecryptContactsModal()\"\n            class=\"btn btn-secondary btn-sm cursor-pointer\"\n            [translate]=\"'settings.compose.close'\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n    <ng-template #decryptingContacts>\n      <div class=\"px-4\">\n        <label>\n          <label [translate]=\"'settings.security.disable_contact_decrypt'\">\n            Are you sure you want to disable contacts encryption? </label\n          ><br />\n          <b [translate]=\"'settings.security.note'\">Note:</b>\n          <span [translate]=\"'settings.security.disabling_contacts'\">\n            Disabling contacts encryption can take several minutes depending upon the number of contacts you have. After\n            you confirm, all your contacts will be decrypted inside your browser and saved on server.\n          </span>\n        </label>\n        <div align=\"right\" class=\"mt-3\">\n          <button\n            (click)=\"confirmDecryptContacts()\"\n            class=\"btn btn-secondary btn-sm cursor-pointer\"\n            [translate]=\"'settings.compose.confirm'\"\n          >\n            Confirm\n          </button>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n</ng-template>\n\n<!--Confirm Encryption Contacts Modal-->\n<ng-template #confirmEncryptContactsModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"confirmContactsEncryptionModal\">\n      <strong [translate]=\"'settings.security.decrypting_contacts'\">Decrypting contacts</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"px-4\">\n      <div class=\"row row-sm\">\n        <span [translate]=\"'settings.security.enabling_contacts'\">By enabling contacts encryption</span>\n        <ul>\n          <li [translate]=\"'settings.security.all_contacts_encrypted'\">All your contacts will be encrypted</li>\n          <li [translate]=\"'settings.security.contacts_suggestion'\">\n            Contacts suggestion on compose email won't be available anymore\n          </li>\n          <li [translate]=\"'settings.security.contacts_search'\">Contacts can't be searched anymore</li>\n        </ul>\n      </div>\n      <div align=\"right\" class=\"mt-3\">\n        <button\n          (click)=\"d(); updateSettings('is_contacts_encrypted', true)\"\n          class=\"btn btn-secondary btn-sm cursor-pointer\"\n          [translate]=\"'settings.compose.confirm'\"\n        >\n          Confirm\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!--Auth 2 Factor Modal-->\n<ng-template #auth2FAModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"auth2FAModal\">\n      <strong>\n        {{ auth2FAForm.enable_2fa ? ('settings.security.set_up' | translate) : ('settings.disable' | translate) }}\n        <span [translate]=\"'page_pricing.two_factore_auth'\">2 Factor authentication</span>\n      </strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded py-4\">\n    <div class=\"align-items-center px-4\" *ngIf=\"auth2FA\">\n      <ng-container *ngIf=\"auth2FAForm.auth2FAStep === 1\">\n        <div *ngIf=\"!auth2FA.inProgress\">\n          <div class=\"card-body text-center\">\n            <div class=\"mb-4\" [translate]=\"'settings.security.scan_following_QR'\">\n              Scan the following QR code with your 2 Factor authentication app to set up your account. You can also\n              enter the secret key manually in order to setup.\n            </div>\n            <img\n              class=\"mb-3\"\n              style=\"height: 270px\"\n              src=\"{{ apiUrl }}qr-code/?size=300x300&data={{ auth2FA.secret_url }}\"\n              alt=\"QR\"\n            />\n            <div class=\"bg-white px-3 py-3\">\n              <span class=\"text-dark\"> <b>Secret: </b>{{ auth2FA.secret }} </span>\n              <button mat-icon-button (click)=\"copyToClipboard(auth2FA.secret)\" class=\"copy-btn\">\n                <i class=\"fas fa-copy font-20px\" ngbTooltip=\"Copy to clipboard\"></i>\n              </button>\n            </div>\n          </div>\n          <div align=\"right\" class=\"mt-3\">\n            <button\n              (click)=\"auth2FAForm.auth2FAStep = 2\"\n              class=\"btn btn-secondary btn-sm cursor-pointer\"\n              [translate]=\"'settings.next'\"\n            >\n              Next\n            </button>\n          </div>\n        </div>\n        <div align=\"center\">\n          <app-loading-spinner [showSpinner]=\"auth2FA.inProgress\"></app-loading-spinner>\n        </div>\n      </ng-container>\n      <div *ngIf=\"auth2FAForm.auth2FAStep === 2\">\n        <div>\n          <div class=\"form-group form-group-sm\">\n            <label\n              for=\"password\"\n              class=\"d-block text-muted text-left hidden-sm-up\"\n              [translate]=\"'common.account_password'\"\n            >\n              Your account password\n            </label>\n            <div class=\"input-group\">\n              <input\n                #password\n                class=\"form-control form-control-lg\"\n                id=\"password\"\n                [placeholder]=\"'common.account_password' | translate\"\n                [(ngModel)]=\"auth2FAForm.password\"\n                type=\"password\"\n              />\n              <span class=\"input-group-addon password-toggle bg-white text-muted\" (click)=\"togglePassword(password)\">\n                <i class=\"fa fa-eye\"></i>\n                <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n            <span\n              class=\"validate-message\"\n              *ngIf=\"auth2FAForm.submitted && !auth2FAForm.password\"\n              [translate]=\"'settings.security.enter_acc_password'\"\n            >\n              Please enter your account password.\n            </span>\n          </div>\n          <div class=\"form-group form-group-sm\">\n            <label\n              for=\"passcode\"\n              class=\"d-block text-muted text-left hidden-sm-up\"\n              [translate]=\"'settins.security.passcode'\"\n            >\n              Passcode\n            </label>\n            <div class=\"input-group\">\n              <input\n                class=\"form-control form-control-lg\"\n                id=\"passcode\"\n                [placeholder]=\"'settings.security.gen_by_2FA' | translate\"\n                [(ngModel)]=\"auth2FAForm.passcode\"\n                type=\"text\"\n              />\n            </div>\n            <span\n              class=\"validate-message\"\n              *ngIf=\"auth2FAForm.submitted && !auth2FAForm.passcode\"\n              [translate]=\"'settings.security.enter_passcode_2FA'\"\n            >\n              Please enter passcode generated by 2FA app.\n            </span>\n          </div>\n        </div>\n        <div class=\"modal-footer justify-content-sm-end\">\n          <button class=\"btn btn-default btn-sm cursor-pointer\" type=\"reset\" (click)=\"d()\">\n            <span [translate]=\"'common.cancel'\">Cancel</span>\n          </button>\n          <button\n            class=\"btn btn-secondary btn-sm cursor-pointer\"\n            (click)=\"update2FA(auth2FAForm.enable_2fa); d()\"\n            [disabled]=\"!auth2FAForm.passcode || !auth2FAForm.password\"\n          >\n            {{ auth2FAForm.enable_2fa ? ('settings.enable' | translate) : ('settings.disable' | translate) }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<!-- Change password Modal -->\n<ng-template #changePasswordModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header justify-content-sm-center align-items-center text-sm-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"changePasswordModalLabel\">\n      <strong [translate]=\"'settings.security.change_password'\">Change Password</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div>\n      <p class=\"text-holder text-dark text-medium\" [translate]=\"'settings.security.message'\">\n        Your encryption key is connected to your password. You have the option to either keep all the data and\n        encryption keys and just change the password or you can delete all the data and generate new encryption keys.\n        Choose your option carefully.\n      </p>\n    </div>\n    <div class=\"text-holder text-dark text-medium\">\n      <div class=\"password-content-holder mx-auto mt-2 pt-sm-2\">\n        <div class=\"form\">\n          <form [formGroup]=\"changePasswordForm\" (submit)=\"changePassword()\">\n            <div [class.disabled]=\"inProgress\">\n              <div class=\"form-group form-group-sm\">\n                <label\n                  for=\"oldPassword\"\n                  class=\"d-block text-muted text-left hidden-sm-up\"\n                  [translate]=\"'settings.security.old_password'\"\n                >\n                  Old Password\n                </label>\n                <div class=\"input-group\">\n                  <input\n                    #oldPasswordInput\n                    class=\"form-control form-control-lg\"\n                    id=\"oldPassword\"\n                    formControlName=\"oldPassword\"\n                    [placeholder]=\"'settings.security.old_password' | translate\"\n                    type=\"password\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    (click)=\"togglePassword(oldPasswordInput)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <span\n                  *ngIf=\"changePasswordForm.controls['oldPassword'].errors && showChangePasswordFormErrors\"\n                  class=\"validate-message\"\n                >\n                  <span\n                    *ngIf=\"changePasswordForm.controls['oldPassword'].errors.required\"\n                    [translate]=\"'settings.security.old_password_req'\"\n                  >\n                    Old password is required.\n                  </span>\n                </span>\n              </div>\n              <div class=\"form-group form-group-sm\">\n                <label\n                  for=\"newPassword\"\n                  class=\"d-block text-muted text-left hidden-sm-up\"\n                  [translate]=\"'settings.new_password'\"\n                >\n                  New Password\n                </label>\n                <div class=\"input-group\">\n                  <input\n                    #newPasswordInput\n                    class=\"form-control form-control-lg\"\n                    id=\"newPassword\"\n                    formControlName=\"password\"\n                    [placeholder]=\"'settings.new_password' | translate\"\n                    type=\"password\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    (click)=\"togglePassword(newPasswordInput)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <span\n                  *ngIf=\"changePasswordForm.controls['password'].errors && showChangePasswordFormErrors\"\n                  class=\"validate-message\"\n                >\n                  <span\n                    *ngIf=\"changePasswordForm.controls['password'].errors.required\"\n                    [translate]=\"'settings.security.new_password_req'\"\n                    >New password is required.</span\n                  >\n                </span>\n              </div>\n              <div class=\"form-group form-group-sm\">\n                <label\n                  for=\"confirmNewPassword\"\n                  class=\"d-block text-muted text-left hidden-sm-up\"\n                  [translate]=\"'settings.confirm_new_password'\"\n                  >Confirm New Password</label\n                >\n                <div class=\"input-group\">\n                  <input\n                    #confirmNewPasswordInput\n                    class=\"form-control form-control-lg\"\n                    id=\"confirmNewPassword\"\n                    formControlName=\"confirmPwd\"\n                    [placeholder]=\"'settings.confirm_new_password' | translate\"\n                    type=\"password\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    (click)=\"togglePassword(confirmNewPasswordInput)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <span\n                  *ngIf=\"changePasswordForm.controls['confirmPwd'].errors && showChangePasswordFormErrors\"\n                  class=\"validate-message\"\n                >\n                  <span [translate]=\"'create_account.passwords_not_match'\"> Passwords do not match. </span>\n                </span>\n              </div>\n              <div class=\"form-content-row\">\n                <label class=\"font-weight-bold notice\" [translate]=\"'settings.security.data_message'\">\n                  Select option to keep/delete data! </label\n                ><br />\n                <div class=\"row align-items-center\">\n                  <div class=\"col-sm-7 col-md-5\">\n                    <div class=\"row row-sm\">\n                      <div class=\"col-6 flex-auto-col\" (click)=\"deleteData = false\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"keep_data1\"\n                            [checked]=\"!deleteData\"\n                            name=\"[1]\"\n                            type=\"radio\"\n                          />\n                          <label for=\"keep_data1\" [translate]=\"'settings.security.keep_data'\">Keep data</label>\n                        </div>\n                      </div>\n                      <div class=\"col-6 flex-auto-col\" (click)=\"deleteData = true\">\n                        <div class=\"fancy-field-group\">\n                          <input\n                            class=\"d-none fancy-field-control fancy-field-control-sm\"\n                            id=\"keep_data2\"\n                            [checked]=\"deleteData\"\n                            name=\"[1]\"\n                            type=\"radio\"\n                          />\n                          <label for=\"keep_data2\" [translate]=\"'settings.security.encryption_key_message'\">\n                            Delete all data and generate new encryption keys\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mt-3\" *ngIf=\"inProgress && deleteData\">\n              <span class=\"notice\">Note : </span>\n              <span [translate]=\"'settings.security.encryption_key_progress'\">\n                Generating new encryption keys is in progress, it can take several minutes, please wait for it to\n                complete!\n              </span>\n            </div>\n            <div class=\"form-group form-user-actions text-center mb-0 mt-3\">\n              <button\n                class=\"btn btn-gradient-primary btn-sm reset-btn\"\n                [disabled]=\"inProgress\"\n                role=\"button\"\n                type=\"submit\"\n              >\n                <span [translate]=\"'billing_info.submit'\">Submit</span>\n              </button>\n              <app-loading-spinner [showSpinner]=\"passwordChangeInProgress\"></app-loading-spinner>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div> </ng-template\n><!-- /.Change password Modal ends -->\n","import { Component, OnInit, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, Auth2FA, AuthState, ContactsState, PlanType, Settings, UserState } from '../../../store/datatypes';\nimport { MailSettingsService } from '../../../store/services/mail-settings.service';\nimport {\n  ChangePassphraseSuccess,\n  ChangePassword,\n  Update2FA,\n  Get2FASecret,\n  ContactsGet,\n  ClearContactsToDecrypt,\n} from '../../../store/actions';\nimport { SnackErrorPush } from '../../../store';\nimport { OpenPgpService, SharedService, getCryptoRandom } from '../../../store/services';\nimport { PasswordValidation } from '../../../users/users-create-account/users-create-account.component';\nimport { apiUrl, SYNC_DATA_WITH_STORE, NOT_FIRST_LOGIN } from '../../../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-settings-security',\n  templateUrl: './security.component.html',\n  styleUrls: ['./../mail-settings.component.scss', './security.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SecurityComponent implements OnInit {\n  @ViewChild('changePasswordModal') changePasswordModal: any;\n\n  @ViewChild('auth2FAModal') auth2FAModal: any;\n\n  @ViewChild('decryptContactsModal') decryptContactsModal: any;\n\n  @ViewChild('confirmEncryptContactsModal') confirmEncryptContactsModal: any;\n\n  private changePasswordModalRef: NgbModalRef;\n\n  private decryptContactsModalRef: NgbModalRef;\n\n  settings: Settings;\n\n  changePasswordForm: FormGroup;\n\n  showChangePasswordFormErrors = false;\n\n  userState: UserState;\n\n  inProgress: boolean;\n\n  deleteData: boolean;\n\n  apiUrl = apiUrl;\n\n  auth2FA: Auth2FA;\n\n  auth2FAForm: any = {};\n\n  isDecryptingContacts: boolean;\n\n  contactsState: ContactsState;\n\n  isContactsEncrypted: boolean;\n\n  planTypeEnum = PlanType;\n\n  planType: PlanType;\n\n  isUsingLocalStorage: boolean;\n\n  private updatedPrivateKeys: any;\n\n  passwordChangeInProgress = false;\n\n  constructor(\n    private store: Store<AppState>,\n    private settingsService: MailSettingsService,\n    private modalService: NgbModal,\n    private openPgpService: OpenPgpService,\n    private sharedService: SharedService,\n    private formBuilder: FormBuilder,\n  ) {}\n\n  ngOnInit() {\n    /**\n     * Get user's settings\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.settings = user.settings;\n        this.planType = user.settings.plan_type || PlanType.FREE;\n        this.isContactsEncrypted = this.settings.is_contacts_encrypted;\n      });\n\n    /**\n     * Change password using keys\n     */\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.auth2FA = authState.auth2FA;\n        if (this.passwordChangeInProgress && !authState.passwordChangeInProgress) {\n          this.changePasswordModalRef.dismiss();\n          if (authState.isChangePasswordError) {\n            this.openPgpService.decryptAllPrivateKeys(undefined, this.changePasswordForm.value.password);\n          } else {\n            this.openPgpService.clearData();\n          }\n        }\n        this.passwordChangeInProgress = authState.passwordChangeInProgress;\n      });\n\n    this.store\n      .select(state => state.contacts)\n      .pipe(untilDestroyed(this))\n      .subscribe((contactsState: ContactsState) => {\n        this.contactsState = contactsState;\n      });\n\n    this.changePasswordForm = this.formBuilder.group(\n      {\n        oldPassword: ['', [Validators.required]],\n        password: ['', [Validators.required]],\n        confirmPwd: ['', [Validators.required]],\n      },\n      {\n        validator: PasswordValidation.MatchPassword,\n      },\n    );\n\n    this.isUsingLocalStorage = localStorage.getItem(SYNC_DATA_WITH_STORE) === 'true';\n  }\n\n  updateSettings(key?: string, value?: any) {\n    this.settingsService.updateSettings(this.settings, key, value);\n  }\n\n  /**\n   * Update anti phishing status\n   */\n  updateAntiPhishing(status: boolean) {\n    if (this.settings.is_anti_phishing_enabled !== status) {\n      this.settings.anti_phishing_phrase =\n        getCryptoRandom().toString(36).slice(2, 5) + getCryptoRandom().toString(36).slice(2, 5);\n      this.settingsService.updateSettings(this.settings, 'is_anti_phishing_enabled', status);\n    }\n  }\n\n  get2FASecret() {\n    this.store.dispatch(new Get2FASecret());\n    this.modalService.open(this.auth2FAModal, {\n      centered: true,\n      windowClass: 'modal-md auth2fa-modal',\n    });\n  }\n\n  update2FA(enable_2fa = true) {\n    if (!this.auth2FAForm.passcode || !this.auth2FAForm.password) {\n      this.auth2FAForm.submitted = true;\n      return;\n    }\n    this.store.dispatch(\n      new Update2FA({\n        data: { ...this.auth2FAForm, enable_2fa, username: this.userState.username },\n        settings: { ...this.settings, enable_2fa },\n      }),\n    );\n  }\n\n  disable2FA() {\n    this.auth2FAForm = { auth2FAStep: 2, enable_2fa: false };\n    this.modalService.open(this.auth2FAModal, {\n      centered: true,\n      windowClass: 'modal-md auth2fa-modal',\n    });\n  }\n\n  copyToClipboard(value: string) {\n    this.sharedService.copyToClipboard(value);\n  }\n\n  // == Open decrypt contacts confirmation NgbModal\n  openDecryptContactsModal() {\n    if (!this.settings.is_contacts_encrypted) {\n      return;\n    }\n    this.isContactsEncrypted = false;\n    this.decryptContactsModalRef = this.modalService.open(this.decryptContactsModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-md change-password-modal',\n    });\n    this.decryptContactsModalRef.result.then(reason => {\n      this.isDecryptingContacts = false;\n      this.decryptContactsModalRef = null;\n    });\n    setTimeout(() => {\n      this.isContactsEncrypted = true;\n    }, 100);\n  }\n\n  // == Open encrypt contacts confirmation NgbModal\n  openConfirmEncryptContactsModal() {\n    if (this.settings.is_contacts_encrypted) {\n      return;\n    }\n    this.isContactsEncrypted = true;\n    setTimeout(() => {\n      this.isContactsEncrypted = false;\n    }, 100);\n    this.modalService.open(this.confirmEncryptContactsModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-md change-password-modal',\n    });\n  }\n\n  confirmDecryptContacts() {\n    this.updateSettings('is_contacts_encrypted', false);\n    if (this.contactsState.totalContacts === 0 && this.contactsState.loaded) {\n      this.decryptContactsModalRef.close();\n      return;\n    }\n    this.isDecryptingContacts = true;\n    this.store.dispatch(new ClearContactsToDecrypt({ clearCount: true }));\n    this.store.dispatch(new ContactsGet({ limit: 20, offset: 0, isDecrypting: true }));\n    this.decryptAllContacts();\n  }\n\n  decryptAllContacts() {\n    if (this.contactsState.totalContacts === 0 && this.contactsState.loaded) {\n      this.decryptContactsModalRef.close();\n      return;\n    }\n    if (this.contactsState.contactsToDecrypt.length > 0) {\n      this.openPgpService.decryptAllContacts();\n      return;\n    }\n    setTimeout(() => {\n      this.decryptAllContacts();\n    }, 500);\n  }\n\n  closeDecryptContactsModal() {\n    this.isDecryptingContacts = false;\n    if (this.decryptContactsModalRef) {\n      this.decryptContactsModalRef.close();\n    }\n  }\n\n  /**\n   * Change Password Section\n   */\n  /**\n   * Open Change Password Modal\n   */\n  openChangePasswordModal() {\n    this.deleteData = false;\n    this.inProgress = false;\n    this.showChangePasswordFormErrors = false;\n    this.changePasswordForm.reset();\n    this.changePasswordModalRef = this.modalService.open(this.changePasswordModal, {\n      centered: true,\n      backdrop: 'static',\n      windowClass: 'modal-md change-password-modal',\n    });\n  }\n\n  /**\n   * Change Password Process\n   * Call OpenPGPService for change passphrase\n   */\n  changePassword() {\n    this.showChangePasswordFormErrors = true;\n    if (this.changePasswordForm.valid) {\n      this.passwordChangeInProgress = true;\n      this.openPgpService\n        .changePassphrase(this.changePasswordForm.value.password, this.deleteData, this.userState.username)\n        .subscribe(\n          response => {\n            this.changePasswordConfirmed(response.keys || {});\n          },\n          error => {\n            this.passwordChangeInProgress = false;\n            this.store.dispatch(new SnackErrorPush({ message: `Failed to change password` }));\n          },\n        );\n    }\n  }\n\n  changePasswordConfirmed(updatedKeys: any) {\n    this.updatedPrivateKeys = updatedKeys;\n    const data = this.changePasswordForm.value;\n    const new_keys: any[] = [];\n    const extra_keys: any[] = [];\n    Object.keys(updatedKeys).forEach((mailboxId: string) => {\n      updatedKeys[mailboxId].forEach((key: any) => {\n        if (key.is_primary) {\n          new_keys.push({\n            mailbox_id: mailboxId,\n            private_key: key.private_key,\n            public_key: key.public_key,\n          });\n        } else {\n          extra_keys.push({\n            mailbox_id: mailboxId,\n            private_key: key.private_key,\n            public_key: key.public_key,\n            mailbox_key_id: key.mailbox_key_id,\n          });\n        }\n      });\n    });\n    const requestData = {\n      username: this.userState.username,\n      old_password: data.oldPassword,\n      password: data.password,\n      confirm_password: data.confirmPwd,\n      delete_data: this.deleteData,\n      new_keys,\n      extra_keys,\n    };\n    this.store.dispatch(new ChangePassword(requestData));\n  }\n\n  // == Toggle password visibility\n  togglePassword(input: any): any {\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n\n  updateUsingLocalStorage(isUsing: boolean) {\n    localStorage.setItem(SYNC_DATA_WITH_STORE, isUsing ? 'true' : 'false');\n    localStorage.setItem(NOT_FIRST_LOGIN, 'true');\n    this.store.dispatch(\n      new SnackErrorPush({\n        message: 'Settings updated successfully.',\n      }),\n    );\n  }\n}\n","<div\n  class=\"mail-composer is-sticky is-fullscreenx is-minimizedx is-maximizedx\"\n  [ngClass]=\"{ 'is-minimized': isMinimized, 'is-maximized': isFullScreen }\"\n  [class.keyboard-open]=\"composeMail?.isKeyboardOpened ? true : false\"\n  [class.is-active]=\"isComposeVisible\"\n>\n  <div class=\"mail-composer-dialog\">\n    <div class=\"mail-composer-header p-0\">\n      <div class=\"mail-composer-title mr-4\" (click)=\"toggleMinimized()\">\n        <span\n          class=\"d-inline-block text-truncate\"\n          *ngIf=\"mailSubject; else newMessage\"\n          [ngClass]=\"{ 'maximize-compose-title': !isMinimized, 'minimize-compose-title': isMinimized }\"\n        >\n          {{ mailSubject }}\n        </span>\n        <ng-template #newMessage>\n          <span\n            class=\"d-inline-block text-truncate\"\n            [ngClass]=\"{ 'maximize-compose-title': !isMinimized, 'minimize-compose-title': isMinimized }\"\n          >\n            {{ 'settings.compose.new_message' | translate }}\n          </span>\n        </ng-template>\n      </div>\n      <div class=\"mail-composer-header-actions\">\n        <div class=\"mail-actions-list\">\n          <!--Minimize Modal-->\n          <div class=\"mail-actions-item\">\n            <button\n              role=\"button\"\n              placement=\"top\"\n              ngbTooltip=\"{{\n                isMinimized ? ('settings.compose.maximize' | translate) : ('settings.compose.minimize' | translate)\n              }}\"\n              (click)=\"toggleMinimized()\"\n            >\n              <i class=\"fas fa-minus\"></i>\n            </button>\n          </div>\n          <!--Maximize Modal-->\n          <div class=\"mail-actions-item\">\n            <button\n              role=\"button\"\n              placement=\"top\"\n              ngbTooltip=\"{{\n                isFullScreen\n                  ? ('settings.compose.exit_full_screen' | translate)\n                  : ('settings.compose.full_screen' | translate)\n              }}\"\n              (click)=\"toggleFullScreen()\"\n            >\n              <i class=\"icon icon-maximize\"></i>\n            </button>\n          </div>\n          <!--Close Modal-->\n          <div class=\"mail-actions-item\">\n            <button\n              role=\"button\"\n              placement=\"top\"\n              [ngbTooltip]=\"'settings.compose.close' | translate\"\n              (click)=\"onClose()\"\n            >\n              <i class=\"icon icon-cross\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <app-compose-mail\n      #composeMail\n      [draftMail]=\"draft\"\n      (hide)=\"onHide()\"\n      (subjectChanged)=\"subjectChanged($event)\"\n      [receivers]=\"receivers\"\n      [ngClass]=\"{ 'd-none': isMinimized }\"\n      [isFullScreen]=\"isFullScreen\"\n      [isReplyInPopup]=\"action === 'REPLY' ? true : false\"\n    >\n    </app-compose-mail>\n  </div>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { Mail } from '../../../store/models';\nimport { ComposeMailComponent } from '../compose-mail/compose-mail.component';\nimport { AppState, MailAction } from '../../../store/datatypes';\nimport { SetIsComposerPopUp } from '../../../store/actions';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-compose-mail-dialog',\n  templateUrl: './compose-mail-dialog.component.html',\n  styleUrls: ['./compose-mail-dialog.component.scss', './../mail-sidebar.component.scss'],\n})\nexport class ComposeMailDialogComponent implements OnInit, AfterViewInit {\n  @Input() public isComposeVisible: boolean;\n\n  @Input() public draft: Mail;\n\n  @Input() action: MailAction;\n\n  @Input() parentId: number;\n\n  @Input() public isFullScreen: boolean;\n\n  @Input() public receivers: Array<string>;\n\n  @Output() public hide = new EventEmitter<boolean>();\n\n  @Output() public minimize = new EventEmitter<boolean>();\n\n  @Output() public fullScreen = new EventEmitter<boolean>();\n\n  @ViewChild(ComposeMailComponent) composeMail: ComposeMailComponent;\n\n  @ViewChild('input') input: ElementRef;\n\n  private confirmModalRef: NgbModalRef;\n\n  isMinimized: boolean;\n\n  mailSubject = '';\n\n  isPopupClosed: boolean;\n\n  constructor(private modalService: NgbModal, private cdr: ChangeDetectorRef, private store: Store<AppState>) {}\n\n  ngOnInit(): void {\n    /**\n     * Hide dialog when reply\n     */\n    this.store\n      .select(state => state)\n      .pipe(untilDestroyed(this))\n      .subscribe((appState: AppState) => {\n        this.isPopupClosed = appState.mail.isComposerPopUp;\n        if (\n          this.isPopupClosed !== undefined &&\n          !this.isPopupClosed &&\n          this.action === MailAction.REPLY &&\n          this.composeMail !== undefined\n        ) {\n          this.onHide();\n        }\n      });\n  }\n\n  ngAfterViewInit(): void {\n    if (this.mailSubject && this.action) {\n      if (this.action === MailAction.REPLY) {\n        this.mailSubject = `Reply: ${this.mailSubject}`;\n      }\n    }\n    this.cdr.detectChanges();\n  }\n\n  onClose() {\n    if (this.action === MailAction.REPLY) {\n      setTimeout(() => {\n        this.store.dispatch(new SetIsComposerPopUp(false));\n      }, 2000);\n    }\n    /**\n     * Save draft when close compose dialog\n     */\n    if (this.composeMail.hasData()) {\n      this.saveInDrafts();\n    } else if (this.composeMail.draftMail) {\n      this.discardEmail();\n    }\n  }\n\n  subjectChanged($event: string) {\n    this.mailSubject = $event;\n  }\n\n  saveInDrafts() {\n    this.composeMail.closeCompose();\n  }\n\n  discardEmail() {\n    this.composeMail.discardEmail();\n  }\n\n  onHide() {\n    this.store.dispatch(new SetIsComposerPopUp(false));\n    this.hideMailComposeDialog();\n  }\n\n  toggleMinimized() {\n    this.isMinimized = !this.isMinimized;\n    this.minimize.emit(this.isMinimized);\n    if (this.isFullScreen) {\n      this.isFullScreen = false;\n    }\n  }\n\n  toggleFullScreen() {\n    this.isFullScreen = !this.isFullScreen;\n    this.fullScreen.emit(this.isFullScreen);\n    if (this.isMinimized) {\n      this.isMinimized = false;\n    }\n  }\n\n  private hideMailComposeDialog() {\n    if (this.confirmModalRef) {\n      this.confirmModalRef.dismiss();\n    }\n    this.hide.emit(true);\n  }\n}\n","<div class=\"mail-composer-body\">\n  <form>\n    <div class=\"mail-compose-field-group\">\n      <!-- 'From' field -->\n      <div class=\"mail-compose-field\">\n        <span class=\"mail-label label-from\">{{ 'settings.compose.from' | translate }}</span>\n        <div class=\"col-sm p-0\">\n          <div class=\"btn-dropdown btn-dropdown-select btn-dropdown-lg\">\n            <div ngbDropdown class=\"dropdown-sm\">\n              <button\n                ngbDropdownToggle\n                class=\"dropdown-toggle border-0 from-text\"\n                id=\"fromEmailDropdownMenuButton\"\n                role=\"button\"\n                [disabled]=\"attachments?.length > 0\"\n              >\n                <app-composer-encryption-type-icon\n                  [isAutocrypt]=\"true\"\n                  [autocryptInfo]=\"autocryptInfo\"\n                ></app-composer-encryption-type-icon>\n                <!--                <app-composer-encryption-type-icon [isAutocrypt]=\"true\" [isAutocryptEncrypt]=\"true\" [autocryptInfo]=\"autocryptInfo\"></app-composer-encryption-type-icon>-->\n                {{ selectedMailbox?.email | emailFormat: selectedMailbox?.display_name }}\n              </button>\n              <div\n                *ngIf=\"!attachments || attachments.length === 0\"\n                ngbDropdownMenu\n                class=\"from-dropdown\"\n                aria-labelledby=\"fromEmailDropdownMenuButton\"\n              >\n                <ng-container *ngFor=\"let mailbox of mailBoxesState?.mailboxes\">\n                  <a\n                    class=\"dropdown-item from-text\"\n                    *ngIf=\"mailbox.is_enabled\"\n                    (click)=\"onFromChanged(mailbox, selectedMailbox)\"\n                    >{{ mailbox.email }}</a\n                  >\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 'From' field -->\n      <!-- 'To' field -->\n      <div class=\"mail-compose-field mail-compose-field-to\" #receiverInput>\n        <span class=\"mail-label label-to\">{{ 'settings.compose.to' | translate }}</span>\n        <tag-input\n          [(ngModel)]=\"mailData.receiver\"\n          *ngIf=\"isLoaded\"\n          name=\"to\"\n          [placeholder]=\"' '\"\n          [secondaryPlaceholder]=\"'settings.compose.recipient_email' | translate\"\n          [onTextChangeDebounce]=\"100\"\n          [onlyFromAutocomplete]=\"false\"\n          [addOnBlur]=\"true\"\n          [editable]=\"true\"\n          [separatorKeys]=\"[',']\"\n          [separatorKeyCodes]=\"[13]\"\n          [(inputText)]=\"inputTextValue\"\n          (onAdd)=\"onAddingReceiver($event, mailData.receiver)\"\n          (onRemove)=\"onRemoveReceive()\"\n          (onTextChange)=\"updateInputTextValue($event)\"\n          (paste)=\"onPaste()\"\n          (onTagEdited)=\"onTagEdited($event)\"\n          (click)=\"onClick()\"\n          #input\n        >\n          <ng-template let-item=\"item\" let-index=\"index\">\n            <app-circle-bar-spinner\n              [showSpinner]=\"getUserKeyFetchingStatus(item.email)\"\n              [color]=\"night_mode ? '#fff' : '#333333'\"\n            ></app-circle-bar-spinner>\n            <app-receiver-email-chip\n              [contacts]=\"clonedContacts\"\n              [email]=\"item.email\"\n              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n              [blacklist]=\"blacklist\"\n              [whitelist]=\"whitelist\"\n              [autocryptInfo]=\"autocryptInfo\"\n              [encryptionTypeMap]=\"receiverEncryptTypeMap\"\n            ></app-receiver-email-chip>\n            <delete-icon (click)=\"input.removeItem(item, index)\"></delete-icon>\n          </ng-template>\n          <tag-input-dropdown\n            [showDropdownIfEmpty]=\"false\"\n            [appendToBody]=\"false\"\n            [displayBy]=\"'display'\"\n            [identifyBy]=\"'email'\"\n            [autocompleteItems]=\"contacts\"\n          >\n            <ng-template let-item=\"item\" let-index=\"index\">\n              <div class=\"compose-contacts-container\">\n                <img src=\"assets/images/user-icon-grey.png\" alt=\"user-image\" />\n                <div class=\"compose-contacts-userinfo\">\n                  <div>{{ item.name }}</div>\n                  <div>{{ item.email }}</div>\n                </div>\n              </div>\n            </ng-template>\n          </tag-input-dropdown>\n        </tag-input>\n        <div class=\"extra-mail-label\">\n          <span class=\"mail-label mail-floated-label\" (click)=\"options.isCcVisible = !options.isCcVisible\">Cc</span>\n          <span class=\"mail-label mail-floated-label mr-0\" (click)=\"options.isBccVisible = !options.isBccVisible\"\n            >Bcc</span\n          >\n        </div>\n      </div>\n      <!-- 'To' field -->\n      <!-- 'Cc' field -->\n      <div class=\"mail-compose-field\" [ngClass]=\"{ 'd-none': !options.isCcVisible }\" #ccReceiverInput>\n        <span class=\"mail-label label-cc\">Cc:</span>\n        <tag-input\n          [(ngModel)]=\"mailData.cc\"\n          name=\"cc\"\n          [placeholder]=\"' '\"\n          [secondaryPlaceholder]=\"'settings.compose.cc_email' | translate\"\n          [onTextChangeDebounce]=\"100\"\n          [onlyFromAutocomplete]=\"false\"\n          [addOnBlur]=\"true\"\n          [editable]=\"true\"\n          [separatorKeys]=\"[',']\"\n          [separatorKeyCodes]=\"[13]\"\n          [(inputText)]=\"ccInputTextValue\"\n          (onAdd)=\"onAddingReceiver($event, mailData.cc)\"\n          (onRemove)=\"onRemoveCc()\"\n          (onTextChange)=\"ccUpdateInputTextValue($event)\"\n          (paste)=\"ccOnPaste()\"\n          (onTagEdited)=\"ccOnTagEdited($event)\"\n          (click)=\"onCcClick()\"\n          #ccInput\n        >\n          <ng-template let-item=\"item\" let-index=\"index\">\n            <app-circle-bar-spinner\n              [showSpinner]=\"getUserKeyFetchingStatus(item.email)\"\n              [color]=\"night_mode ? '#fff' : '#333333'\"\n            ></app-circle-bar-spinner>\n            <app-receiver-email-chip\n              [contacts]=\"clonedContacts\"\n              [email]=\"item.email\"\n              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n              [blacklist]=\"blacklist\"\n              [whitelist]=\"whitelist\"\n              [autocryptInfo]=\"autocryptInfo\"\n              [encryptionTypeMap]=\"receiverEncryptTypeMap\"\n            ></app-receiver-email-chip>\n            <delete-icon (click)=\"ccInput.removeItem(item, index)\"></delete-icon>\n          </ng-template>\n          <tag-input-dropdown\n            [showDropdownIfEmpty]=\"false\"\n            [appendToBody]=\"false\"\n            [displayBy]=\"'display'\"\n            [identifyBy]=\"'email'\"\n            [autocompleteItems]=\"contacts\"\n          >\n            <ng-template let-item=\"item\" let-index=\"index\">\n              <div class=\"compose-contacts-container\">\n                <img src=\"assets/images/user-icon-grey.png\" alt=\"user-image\" />\n                <div class=\"compose-contacts-userinfo\">\n                  <div>{{ item.name }}</div>\n                  <div>{{ item.email }}</div>\n                </div>\n              </div>\n            </ng-template>\n          </tag-input-dropdown>\n        </tag-input>\n      </div>\n      <!-- 'Cc' field -->\n      <!-- 'Bcc' field -->\n      <div class=\"mail-compose-field\" [ngClass]=\"{ 'd-none': !options.isBccVisible }\" #bccReceiverInput>\n        <span class=\"mail-label label-bcc\">Bcc:</span>\n        <tag-input\n          [(ngModel)]=\"mailData.bcc\"\n          name=\"bcc\"\n          [placeholder]=\"' '\"\n          [secondaryPlaceholder]=\"'settings.compose.bcc_email' | translate\"\n          [onTextChangeDebounce]=\"100\"\n          [onlyFromAutocomplete]=\"false\"\n          [addOnBlur]=\"true\"\n          [editable]=\"true\"\n          [separatorKeys]=\"[',']\"\n          [separatorKeyCodes]=\"[13]\"\n          [(inputText)]=\"bccInputTextValue\"\n          (onAdd)=\"onAddingReceiver($event, mailData.bcc)\"\n          (onRemove)=\"onRemoveBcc()\"\n          (onTextChange)=\"bccUpdateInputTextValue($event)\"\n          (paste)=\"bccOnPaste()\"\n          (onTagEdited)=\"bccOnTagEdited($event)\"\n          (click)=\"onBccClick()\"\n          #bccInput\n        >\n          <ng-template let-item=\"item\" let-index=\"index\">\n            <app-circle-bar-spinner\n              [showSpinner]=\"getUserKeyFetchingStatus(item.email)\"\n              [color]=\"night_mode ? '#fff' : '#333333'\"\n            ></app-circle-bar-spinner>\n            <app-receiver-email-chip\n              [contacts]=\"clonedContacts\"\n              [email]=\"item.email\"\n              [isContactEncrypted]=\"userState.settings.is_contacts_encrypted\"\n              [blacklist]=\"blacklist\"\n              [whitelist]=\"whitelist\"\n              [autocryptInfo]=\"autocryptInfo\"\n              [encryptionTypeMap]=\"receiverEncryptTypeMap\"\n            ></app-receiver-email-chip>\n            <delete-icon (click)=\"bccInput.removeItem(item, index)\"></delete-icon>\n          </ng-template>\n          <tag-input-dropdown\n            [showDropdownIfEmpty]=\"false\"\n            [appendToBody]=\"false\"\n            [displayBy]=\"'display'\"\n            [identifyBy]=\"'email'\"\n            [autocompleteItems]=\"contacts\"\n          >\n            <ng-template let-item=\"item\" let-index=\"index\">\n              <div class=\"compose-contacts-container\">\n                <img src=\"assets/images/user-icon-grey.png\" alt=\"user-image\" />\n                <div class=\"compose-contacts-userinfo\">\n                  <div>{{ item.name }}</div>\n                  <div>{{ item.email }}</div>\n                </div>\n              </div>\n            </ng-template>\n          </tag-input-dropdown>\n        </tag-input>\n      </div>\n      <!-- 'Bcc' field -->\n      <!-- 'Subject' field -->\n      <div class=\"mail-compose-field\">\n        <span class=\"mail-label label-subject mail-subject\">{{ 'settings.compose.subject' | translate }}</span>\n        <input\n          type=\"text\"\n          class=\"mail-compose-control\"\n          name=\"subject\"\n          [(ngModel)]=\"mailData.subject\"\n          (ngModelChange)=\"valueChanged$.next(mailData.subject); onSubjectChange(mailData.subject)\"\n          id=\"subject\"\n        />\n      </div>\n      <!-- 'Subject' field -->\n    </div>\n  </form>\n  <!-- Main Content field -->\n  <div class=\"mail-compose-editable-body\">\n    <div class=\"mail-compose-box has-custom-scroll\" id=\"editor-cover-scroller\">\n      <div class=\"mail-compose-box-inner\">\n        <div class=\"mail-compose-editable-box\" (drop)=\"onFilesDrop($event)\">\n          <div #editor *ngIf=\"draftMail?.is_html\"></div>\n          <div *ngIf=\"!draftMail?.is_html\">\n            <textarea\n              class=\"plain-editor\"\n              name=\"content\"\n              [(ngModel)]=\"mailData.content\"\n              (ngModelChange)=\"valueChanged$.next(mailData.content)\"\n              id=\"content\"\n              rows=\"1\"\n            >\n            </textarea>\n          </div>\n        </div>\n        <input\n          type=\"file\"\n          #imageInput\n          accept=\"image/*\"\n          multiple\n          (change)=\"onImagesSelected($event.target.files)\"\n          style=\"display: none\"\n        />\n        <input type=\"file\" #fileInput multiple (change)=\"onFilesSelected($event.target.files)\" style=\"display: none\" />\n        <div class=\"attach-uploader-holder\" *ngIf=\"attachments?.length > 0\">\n          <ng-container *ngFor=\"let file of attachments\">\n            <div class=\"attach-uploader\" *ngIf=\"!file.isRemoved && !(file.is_inline && file.progress === 100)\">\n              <div class=\"attach-name\">\n                <div class=\"file-name\">{{ file.name }}</div>\n                <div class=\"attach-size\" *ngIf=\"file.size\">({{ file.size }})</div>\n              </div>\n              <div class=\"progress\" *ngIf=\"file.progress !== 100\">\n                <div\n                  class=\"progress-bar\"\n                  role=\"progressbar\"\n                  [style.width]=\"file.progress + '%'\"\n                  [attr.aria-valuenow]=\"file.progress\"\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                ></div>\n              </div>\n              <button\n                type=\"button\"\n                role=\"button\"\n                (click)=\"removeAttachment(file)\"\n                class=\"attach-uploader-close\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.remove' | translate\"\n              >\n                <i class=\"icon icon-cross\"></i>\n              </button>\n            </div>\n          </ng-container>\n        </div>\n        <div #attachmentHolder style=\"height: 30px\"></div>\n      </div>\n    </div>\n    <div class=\"mail-composer-footer\">\n      <div class=\"mail-composer-actions-row d-flex\">\n        <div\n          class=\"mail-composer-actions-col mail-composer-actions-col-lg\"\n          [ngClass]=\"{ 'composer-footer': !isFullScreen && !isMailDetailPage }\"\n        >\n          <ul class=\"mail-composer-actions d-flex align-items-center\">\n            <!-- Send button -->\n            <li class=\"send-mail-item\">\n              <button\n                class=\"btn btn-sm btn-secondary btn-mail-send btn-xs-rounded\"\n                (click)=\"sendEmailCheck()\"\n                [disabled]=\"this.isPreparingToSendEmail || isUploadingAttachment || isDownloadingAttachmentCounter > 0\"\n                role=\"button\"\n                placement=\"top\"\n              >\n                <i class=\"hidden-sm-up icon icon-paper-plane\"></i>\n                <span class=\"hidden-xs-down\">{{\n                  isPreparingToSendEmail\n                    ? ('settings.compose.processing' | translate)\n                    : ('settings.compose.send' | translate)\n                }}</span>\n              </button>\n            </li>\n            <!-- Text formatting -->\n            <li class=\"pr-0\">\n              <div\n                *ngIf=\"!draftMail?.is_html; else textFormatter\"\n                ngbTooltip=\"Text formatting is not available in plain text editor\"\n                class=\"dropdown\"\n              >\n                <button class=\"actions-btn mail-typo-btn hide-arrow\" disabled>\n                  <i class=\"icon icon-text-color\"></i>\n                </button>\n              </div>\n              <ng-template #textFormatter>\n                <div ngbDropdown [autoClose]=\"'outside'\" [placement]=\"['top-left', 'bottom-left']\" class=\"dropdown\">\n                  <button\n                    ngbDropdownToggle\n                    class=\"actions-btn mail-typo-btn hide-arrow\"\n                    id=\"typoDropdownMenu\"\n                    role=\"button\"\n                    placement=\"top\"\n                    [ngbTooltip]=\"'settings.compose.text_format' | translate\"\n                  >\n                    <i class=\"icon icon-text-color\"></i>\n                  </button>\n                  <div ngbDropdownMenu class=\"typo-actions-dropdown-menu\" aria-labelledby=\"typoDropdownMenu\">\n                    <div #toolbar class=\"mail-comopser-typo-actions-holder\">\n                      <ul class=\"mail-composer-actions d-flex align-items-center justify-content-center pb-1\">\n                        <li class=\"pr-0\">\n                          <div ngbDropdown placement=\"top\" class=\"dropup\">\n                            <button\n                              ngbDropdownToggle\n                              role=\"button\"\n                              ngbTooltip=\"Font family\"\n                              class=\"actions-btn mail-font-family-btn border-right-0 border-radius-r-0\"\n                              id=\"typoFamilyDropdownMenu\"\n                            >\n                              <i class=\"icon icon-text-size\"></i>\n                            </button>\n                            <div\n                              ngbDropdownMenu\n                              class=\"typo-family-dropdown-menu\"\n                              aria-labelledby=\"typoFamilyDropdownMenu\"\n                            >\n                              <div class=\"typo-holder\">\n                                <ul class=\"typo-list list-styled\">\n                                  <li *ngFor=\"let font of fonts\">\n                                    <button [value]=\"font\" class=\"ql-font typo-select-link text-capitalize\">\n                                      {{ font }}\n                                    </button>\n                                  </li>\n                                </ul>\n                              </div>\n                            </div>\n                          </div>\n                        </li>\n                        <li class=\"pl-0\">\n                          <div ngbDropdown placement=\"top\" class=\"dropup\">\n                            <button\n                              ngbDropdownToggle\n                              role=\"button\"\n                              ngbTooltip=\"Font size\"\n                              class=\"actions-btn mail-font-family-btn\"\n                              id=\"typoSizeDropdownMenu\"\n                            >\n                              <i class=\"icon icon-text-size-alt\"></i>\n                            </button>\n                            <div ngbDropdownMenu class=\"typo-size-dropdown-menu\" aria-labelledby=\"typoSizeDropdownMenu\">\n                              <div class=\"typo-holder\">\n                                <ul class=\"typo-list list-styled\">\n                                  <li *ngFor=\"let size of sizes\">\n                                    <button [value]=\"size\" class=\"ql-size typo-select-link\">\n                                      {{ size }}\n                                    </button>\n                                  </li>\n                                </ul>\n                              </div>\n                            </div>\n                          </div>\n                        </li>\n                        <li class=\"pr-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Bold\"\n                            class=\"ql-bold actions-btn mail-bold-btn border-right-0 border-radius-r-0\"\n                          >\n                            <i class=\"icon icon-bold\"></i>\n                          </button>\n                        </li>\n                        <li class=\"px-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Italic\"\n                            class=\"ql-italic actions-btn mail-italic-btn border-right-0 border-radius-0\"\n                          >\n                            <i class=\"icon icon-italic\"></i>\n                          </button>\n                        </li>\n                        <li class=\"px-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Underline\"\n                            class=\"ql-underline actions-btn mail-underline-btn border-right-0 border-radius-0\"\n                          >\n                            <i class=\"icon icon-underline\"></i>\n                          </button>\n                        </li>\n                        <li class=\"pl-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Quote\"\n                            class=\"ql-blockquote actions-btn mail-quote-right-btn border-radius-l-0\"\n                          >\n                            <i class=\"icon icon-quote-right\"></i>\n                          </button>\n                        </li>\n                        <li class=\"pr-0 d-none d-sm-block\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Align right\"\n                            class=\"ql-align actions-btn mail-align-right-btn border-right-0 border-radius-r-0\"\n                            value=\"right\"\n                          >\n                            <i class=\"icon icon-text-align-right\"></i>\n                          </button>\n                        </li>\n                        <li class=\"px-0 d-none d-sm-block\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Align center\"\n                            class=\"ql-align actions-btn mail-align-center-btn border-right-0 border-radius-0\"\n                            value=\"center\"\n                          >\n                            <i class=\"icon icon-text-align-center\"></i>\n                          </button>\n                        </li>\n                        <li class=\"pl-0 d-none d-sm-block\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Align left\"\n                            class=\"ql-align actions-btn mail-align-left-btn border-radius-l-0\"\n                          >\n                            <i class=\"icon icon-text-align-left\"></i>\n                          </button>\n                        </li>\n                      </ul>\n                      <ul class=\"mail-composer-actions d-flex align-items-center justify-content-center\">\n                        <li class=\"pl-0\">\n                          <div ngbDropdown placement=\"top\" class=\"dropdown\">\n                            <button\n                              ngbDropdownToggle\n                              ngbTooltip=\"Font color\"\n                              class=\"actions-btn mail-font-color-btn border-radius-l-0\"\n                              id=\"typoColorDropdownMenu\"\n                              role=\"button\"\n                            >\n                              <i class=\"icon icon-text-color\"></i>\n                            </button>\n                            <div ngbDropdownMenu class=\"left-0\" aria-labelledby=\"typoColorDropdownMenu\">\n                              <div class=\"color-picker-holder\">\n                                <div class=\"row\">\n                                  <div class=\"col-sm-6 mb-3 mb-sm-0\">\n                                    <div class=\"color-picker\">\n                                      <div class=\"color-picker-title\">\n                                        <strong> {{ 'settings.compose.background_color' | translate }}</strong>\n                                      </div>\n                                      <ul class=\"color-picker-list d-flex flex-wrap\">\n                                        <li *ngFor=\"let color of colors\">\n                                          <button\n                                            class=\"ql-background color-shape\"\n                                            [class.border-lightgrey]=\"color === '#ffffff'\"\n                                            [value]=\"color\"\n                                            [style.background]=\"color\"\n                                          ></button>\n                                        </li>\n                                      </ul>\n                                    </div>\n                                  </div>\n                                  <div class=\"col-sm-6 mb-3 mb-sm-0\">\n                                    <div class=\"color-picker\">\n                                      <div class=\"color-picker-title\">\n                                        <strong> {{ 'settings.compose.text_color' | translate }}</strong>\n                                      </div>\n                                      <ul class=\"color-picker-list d-flex flex-wrap\">\n                                        <li *ngFor=\"let color of colors\">\n                                          <button\n                                            class=\"ql-color color-shape\"\n                                            [class.border-lightgrey]=\"color === '#ffffff'\"\n                                            [value]=\"color\"\n                                            [style.background]=\"color\"\n                                          ></button>\n                                        </li>\n                                      </ul>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </li>\n                        <li class=\"pr-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Unordered list\"\n                            class=\"ql-list actions-btn mail-unorder-list-btn border-right-0 border-radius-r-0\"\n                            value=\"bullet\"\n                          >\n                            <i class=\"icon icon-unorder-list\"></i>\n                          </button>\n                        </li>\n                        <li class=\"px-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Ordered list\"\n                            class=\"ql-list actions-btn mail-order-list-btn border-right-0 border-radius-0\"\n                            value=\"ordered\"\n                          >\n                            <i class=\"icon icon-ordered-list\"></i>\n                          </button>\n                        </li>\n                        <li class=\"px-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Decrease indent\"\n                            class=\"ql-indent actions-btn mail-indent-decrease-btn border-right-0 border-radius-0\"\n                            value=\"-1\"\n                          >\n                            <i class=\"icon icon-indent-decrease\"></i>\n                          </button>\n                        </li>\n                        <li class=\"pl-0\">\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Increase indent\"\n                            class=\"ql-indent actions-btn mail-indent-increase-btn\"\n                            value=\"+1\"\n                          >\n                            <i class=\"icon icon-indent-increase\"></i>\n                          </button>\n                        </li>\n                        <li>\n                          <button\n                            role=\"button\"\n                            ngbTooltip=\"Clear formatting\"\n                            class=\"ql-clean actions-btn mail-format-clear-btn\"\n                          >\n                            <i class=\"icon icon-format-clear\"></i>\n                          </button>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </ng-template>\n            </li>\n            <!-- Attachments -->\n            <li class=\"p-0\">\n              <button\n                type=\"button\"\n                role=\"button\"\n                (click)=\"fileInput.value = ''; fileInput.click()\"\n                class=\"actions-btn mail-attach-btn\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.attachments' | translate\"\n              >\n                <i class=\"icon icon-attachment\"></i>\n              </button>\n            </li>\n            <!-- Insert Link -->\n            <li class=\"p-0\">\n              <div\n                *ngIf=\"!draftMail?.is_html; else insertLinkRef\"\n                ngbTooltip=\"Insert link is not available in plain text editor\"\n                class=\"dropdown\"\n              >\n                <button class=\"actions-btn insert-link-btn\" disabled>\n                  <i class=\"fas fa-link\"></i>\n                </button>\n              </div>\n              <ng-template #insertLinkRef>\n                <button\n                  role=\"button\"\n                  ngbTooltip=\"Insert link\"\n                  (click)=\"openInsertLinkModal()\"\n                  class=\"actions-btn insert-link-btn\"\n                >\n                  <i class=\"fas fa-link\"></i>\n                </button>\n              </ng-template>\n            </li>\n            <!-- Insert Image -->\n            <li class=\"p-0\">\n              <div\n                *ngIf=\"!draftMail?.is_html; else insertImageRef\"\n                ngbTooltip=\"Insert Image is not available in plain text editor\"\n                class=\"dropdown\"\n              >\n                <button class=\"actions-btn mail-attach-image-btn\" disabled>\n                  <i class=\"icon fa fa-image\"></i>\n                </button>\n              </div>\n              <ng-template #insertImageRef>\n                <button\n                  role=\"button\"\n                  ngbTooltip=\"Insert Image\"\n                  (click)=\"quillImageHandler()\"\n                  class=\"actions-btn mail-attach-image-btn\"\n                >\n                  <i class=\"icon fa fa-image\"></i>\n                </button>\n              </ng-template>\n            </li>\n            <!-- Encryption -->\n            <li class=\"p-0\" [ngbTooltip]=\"'page_pricing.encryption' | translate\">\n              <button\n                role=\"button\"\n                type=\"button\"\n                class=\"actions-btn mail-envelop-btn border-radius-r-0\"\n                [ngClass]=\"{ 'text-primary': draftMail?.encryption?.password }\"\n                (click)=\"openEncryptionModal()\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.encryption' | translate\"\n              >\n                <i class=\"icon icon-mail\"></i>\n              </button>\n            </li>\n            <!-- Self Destruct-->\n            <li\n              class=\"p-0\"\n              *ngIf=\"\n                (userState?.isPrime || isTrialPrimeFeaturesAvailable) && isSelfDestruction;\n                else disabledSelfDestructBtn\n              \"\n            >\n              <button\n                role=\"button\"\n                type=\"button\"\n                (click)=\"openSelfDestructModal()\"\n                class=\"actions-btn mail-clock-btn border-left-0 border-radius-0\"\n                [ngClass]=\"{ 'badge badge-warning text-white': selfDestruct.value }\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.self_destr_timer' | translate\"\n              >\n                <i class=\"icon icon-clock\"></i>\n              </button>\n            </li>\n            <ng-template #disabledSelfDestructBtn>\n              <li\n                class=\"px-0\"\n                *ngIf=\"userState?.isPrime || isTrialPrimeFeaturesAvailable; else upgradeAccount\"\n                ngbTooltip=\"Self Destruction is only for Ctemplar recipients. Please add ctemplar recipients for self destruction feature\"\n              >\n                <button\n                  type=\"button\"\n                  role=\"button\"\n                  class=\"actions-btn mail-clock-btn border-left-0 border-radius-0\"\n                  disabled\n                >\n                  <i class=\"icon icon-clock\"></i>\n                </button>\n              </li>\n              <ng-template #upgradeAccount>\n                <li class=\"px-0\" ngbTooltip=\"Upgrade account to use Self Destruct Email feature\">\n                  <button\n                    type=\"button\"\n                    role=\"button\"\n                    class=\"actions-btn mail-clock-btn border-left-0 border-radius-0\"\n                    disabled\n                  >\n                    <i class=\"icon icon-clock\"></i>\n                  </button>\n                </li>\n              </ng-template>\n            </ng-template>\n            <!-- Delayed Delivery -->\n            <li\n              class=\"p-0\"\n              *ngIf=\"userState?.isPrime || isTrialPrimeFeaturesAvailable; else disabledDelayedDeliveryBtn\"\n            >\n              <button\n                type=\"button\"\n                role=\"button\"\n                (click)=\"openDelayedDeliveryModal()\"\n                class=\"actions-btn mail-self-timer-btn border-left-0 border-radius-l-0\"\n                [ngClass]=\"{ 'badge badge-success text-white': delayedDelivery.value }\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.delayed_delivery' | translate\"\n              >\n                <i class=\"icon icon-self-timer\"></i>\n              </button>\n            </li>\n            <ng-template #disabledDelayedDeliveryBtn>\n              <li class=\"p-0\" ngbTooltip=\"Upgrade account to use Delayed Delivery feature.\">\n                <button\n                  type=\"button\"\n                  role=\"button\"\n                  class=\"actions-btn mail-self-timer-btn border-left-0 border-radius-l-0\"\n                  disabled\n                >\n                  <i class=\"icon icon-self-timer\"></i>\n                </button>\n              </li>\n            </ng-template>\n            <!-- Dead man Timer -->\n            <li class=\"p-0\" *ngIf=\"userState?.isPrime || isTrialPrimeFeaturesAvailable; else disabledDeadManTimerBtn\">\n              <button\n                type=\"button\"\n                role=\"button\"\n                (click)=\"openDeadManTimerModal()\"\n                class=\"actions-btn mail-dead-btn border-left-0 border-radius-l-0\"\n                [ngClass]=\"{ 'badge badge-danger text-white': deadManTimer.value }\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.dead_man_timer' | translate\"\n              >\n                <i class=\"icon icon-dead\"></i>\n              </button>\n            </li>\n            <ng-template #disabledDeadManTimerBtn>\n              <li class=\"p-0\" ngbTooltip=\"Upgrade account to use Dead Man Timer feature.\">\n                <button\n                  type=\"button\"\n                  role=\"button\"\n                  class=\"actions-btn mail-dead-btn border-left-0 border-radius-l-0\"\n                  disabled\n                >\n                  <i class=\"icon icon-dead\"></i>\n                </button>\n              </li>\n            </ng-template>\n            <!-- More button(version change) -->\n            <li class=\"btn-dropdown\">\n              <div\n                ngbDropdown\n                [autoClose]=\"'outside'\"\n                class=\"dropdown menu-btn\"\n                [placement]=\"['top-left', 'bottom-left']\"\n              >\n                <button\n                  class=\"actions-btn more-btn hide-arrow\"\n                  id=\"btn_more\"\n                  [ngbTooltip]=\"'More'\"\n                  placement=\"right\"\n                  ngbDropdownToggle\n                >\n                  <i class=\"fa fa-ellipsis-v\"></i>\n                </button>\n                <div\n                  ngbDropdownMenu\n                  class=\"dropdown-menu-right text-center dropdown-size\"\n                  aria-labelledby=\"helpDropdownMenuButton\"\n                >\n                  <button\n                    class=\"dropdown-item row\"\n                    style=\"margin: 0px\"\n                    (click)=\"setHtmlEditor(true)\"\n                    [disabled]=\"draftMail.is_html || pgpEncryptionType === 'PGP_INLINE'\"\n                  >\n                    <div class=\"row item\">\n                      <div class=\"col-2\">\n                        <i *ngIf=\"draftMail.is_html\" class=\"fa fa-check text-black-50 ng-star-inserted\"></i>\n                      </div>\n                      <a class=\"col-8 ql-size-small\" target=\"_blank\" rel=\"noopener noreferrer\"> HTML Editor</a>\n                    </div>\n                  </button>\n                  <button class=\"dropdown-item\" (click)=\"setHtmlEditor(false)\" [disabled]=\"!draftMail.is_html\">\n                    <div class=\"row item\">\n                      <div class=\"col-2\">\n                        <i *ngIf=\"!draftMail.is_html\" class=\"fa fa-check text-black-50 ng-star-inserted\"></i>\n                      </div>\n                      <a class=\"col-8 ql-size-small\">Plain Text</a>\n                    </div>\n                  </button>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <!-- save/delete button field on footer -->\n        <div\n          class=\"mail-composer-actions-col mail-composer-actions-col-sm\"\n          [ngClass]=\"{ 'composer-footer': !isFullScreen && !isMailDetailPage }\"\n        >\n          <ul class=\"mail-composer-actions d-flex align-items-center justify-content-end\">\n            <li class=\"pr-1\" *ngIf=\"isDownloadingAttachmentCounter > 0\">\n              <span>{{ 'settings.compose.downloading_attachments' | translate }}</span>\n            </li>\n            <li class=\"pr-1\" *ngIf=\"inProgress || (draftMail && draftMail.id)\">\n              <span>{{\n                inProgress\n                  ? draftMail.send\n                    ? ('settings.compose.sending' | translate)\n                    : ('settings.compose.saving' | translate)\n                  : ('settings.compose.saved' | translate)\n              }}</span>\n            </li>\n            <li class=\"pr-0\" *ngIf=\"showSaveButton\">\n              <button\n                role=\"button\"\n                (click)=\"saveInDrafts()\"\n                [disabled]=\"isUploadingAttachment || isDownloadingAttachmentCounter > 0\"\n                class=\"actions-btn mail-save-disk-btn border-right-0 border-radius-r-0\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.save_to_drafts' | translate\"\n              >\n                <i class=\"icon icon-save-disk\"></i>\n              </button>\n            </li>\n            <li class=\"pl-0\">\n              <button\n                role=\"button\"\n                (click)=\"discardEmail()\"\n                [disabled]=\"isUploadingAttachment || isDownloadingAttachmentCounter > 0\"\n                class=\"actions-btn mail-garbage-btn border-radius-l-0\"\n                placement=\"top\"\n                [ngbTooltip]=\"'settings.compose.delete_draft' | translate\"\n              >\n                <i class=\"icon icon-garbage\"></i>\n              </button>\n            </li>\n            <li class=\"pl-0 pop-up-reply\" *ngIf=\"isMailDetailPage\">\n              <button\n                role=\"button\"\n                (click)=\"openReplyinPopup()\"\n                [disabled]=\"inProgress || isUploadingAttachment || isDownloadingAttachmentCounter > 0\"\n                class=\"actions-btn border-radius-l-0\"\n                placement=\"top\"\n                [ngbTooltip]=\"'Pop out reply'\"\n              >\n                <i class=\"fas fa-external-link-alt\"></i>\n              </button>\n            </li>\n          </ul>\n        </div>\n        <!-- save/delete button field on footer -->\n      </div>\n    </div>\n  </div>\n  <!-- Main Content field -->\n\n  <!-- attach images modal -->\n  <ng-template #attachImagesModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.attach_images' | translate }}</strong>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">{{ 'settings.compose.select_file' | translate }}</div>\n        <div class=\"form-group\">\n          <label for=\"imageURL\">Image URL</label>\n          <input\n            type=\"text\"\n            #imageURL\n            id=\"imageURL\"\n            class=\"form-control\"\n            [placeholder]=\"'settings.compose.image_url' | translate\"\n          />\n        </div>\n        <div class=\"form-group text-right mb-0\">\n          <button\n            type=\"button\"\n            (click)=\"imageInput.value = ''; imageInput.click(); d()\"\n            class=\"btn btn-success btn-sm mr-1\"\n            role=\"button\"\n          >\n            <span>{{ 'settings.compose.attach_files' | translate }}</span>\n          </button>\n          <button type=\"button\" (click)=\"onAttachImageURL(imageURL.value)\" class=\"btn btn-success btn-sm\" role=\"button\">\n            <span>{{ 'settings.compose.attach_url' | translate }}</span>\n          </button>\n        </div>\n      </div>\n    </div> </ng-template\n  ><!-- /.attach images modal ends -->\n\n  <!-- self destruct datetime picker modal -->\n  <ng-template #selfDestructModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.self_dest_email' | translate }}</strong>\n        <ng-container\n          [ngTemplateOutlet]=\"learnMore\"\n          [ngTemplateOutletContext]=\"{ link: 'https://ctemplar.com/help/answer/using-the-self-destruct-timer/' }\"\n        >\n        </ng-container>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">{{ 'settings.compose.email_deleted' | translate }} ({{ settings.timezone }})</div>\n        <div class=\"row\">\n          <div class=\"col-7 form-group\">\n            <label class=\"form-inline\">{{ 'settings.compose.select_date' | translate }}</label>\n            <ngb-datepicker\n              class=\"bg-white ng-datepicker ng-datepicker-265\"\n              ngbAutofocus\n              [(ngModel)]=\"selfDestruct.date\"\n              [minDate]=\"datePickerMinDate\"\n              (ngModelChange)=\"changeSelfDestruct()\"\n            >\n            </ngb-datepicker>\n          </div>\n          <div class=\"col-5 form-group\">\n            <label class=\"form-inline\">{{ 'settings.compose.select_time' | translate }}</label>\n            <div class=\"btn-dropdown btn-dropdown-select btn-dropdown-lg col-4 p-0\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  ngbDropdownToggle\n                  class=\"dropdown-toggle border-0 from-text\"\n                  id=\"selfDestructMeridianDropdownMenuButton\"\n                  role=\"button\"\n                >\n                  {{\n                    selfDestruct.meridian\n                      ? '12 ' + ('settings.compose.hour' | translate)\n                      : '24 ' + ('settings.compose.hour' | translate)\n                  }}\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"selfDestructMeridianDropdownMenuButton\">\n                  <a class=\"dropdown-item from-text\" (click)=\"selfDestruct.meridian = true\"\n                    >12&nbsp;\n                    <span>{{ 'settings.compose.hour' | translate }}</span>\n                  </a>\n                  <a class=\"dropdown-item from-text\" (click)=\"selfDestruct.meridian = false\"\n                    >24&nbsp;\n                    <span>{{ 'settings.compose.hour' | translate }}</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n            <ngb-timepicker\n              [(ngModel)]=\"selfDestruct.time\"\n              [meridian]=\"selfDestruct.meridian\"\n              (ngModelChange)=\"changeSelfDestruct()\"\n            ></ngb-timepicker>\n            <label>{{ 'mail_detail.delete_in' | translate }} {{ selfDestructTimeString | remainingTime }}</label>\n          </div>\n        </div>\n        <div *ngIf=\"selfDestruct.error\" class=\"l-alert l-alert-danger mb-3\">{{ selfDestruct.error }}</div>\n        <div class=\"form-group text-center btns-xs-3 mb-0\">\n          <button type=\"button\" (click)=\"setSelfDestructValue()\" class=\"btn btn-success btn-sm mr-1\" role=\"button\">\n            <span>{{ 'settings.compose.confirm' | translate }}</span>\n          </button>\n          <button type=\"button\" (click)=\"clearSelfDestructValue()\" class=\"btn btn-primary btn-sm mr-1\" role=\"button\">\n            Clear\n          </button>\n          <button (click)=\"d()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n            {{ 'common.cancel' | translate }}\n          </button>\n        </div>\n      </div>\n    </div> </ng-template\n  ><!-- /.self destruct datetime picker modal ends -->\n\n  <!-- delayed delivery datetime picker modal -->\n  <ng-template #delayedDeliveryModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.delayed_delivery' | translate }}</strong>\n        <ng-container\n          [ngTemplateOutlet]=\"learnMore\"\n          [ngTemplateOutletContext]=\"{\n            link: 'https://ctemplar.com/help/answer/delay-or-schedule-sending-email-messages/'\n          }\"\n        >\n        </ng-container>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">{{ 'settings.compose.email_on_datetime' | translate }} ({{ settings.timezone }})</div>\n        <div class=\"row\">\n          <div class=\"col-7 form-group\">\n            <label class=\"form-inline\">{{ 'settings.compose.select_date' | translate }}</label>\n            <ngb-datepicker\n              class=\"bg-white ng-datepicker ng-datepicker-265\"\n              ngbAutofocus\n              [(ngModel)]=\"delayedDelivery.date\"\n              [minDate]=\"datePickerMinDate\"\n              (ngModelChange)=\"changeDelayDeliver()\"\n            ></ngb-datepicker>\n          </div>\n          <div class=\"col-5 form-group\">\n            <label class=\"form-inline\">{{ 'settings.compose.select_time' | translate }}</label>\n            <div class=\"btn-dropdown btn-dropdown-select btn-dropdown-lg col-4 p-0\">\n              <div ngbDropdown class=\"dropdown-sm\">\n                <button\n                  ngbDropdownToggle\n                  class=\"dropdown-toggle border-0 from-text\"\n                  id=\"delayedDeliveryMeridianDropdownMenuButton\"\n                  role=\"button\"\n                >\n                  {{ delayedDelivery.meridian ? '12 Hour' : '24 Hour' }}\n                </button>\n                <div ngbDropdownMenu aria-labelledby=\"delayedDeliveryMeridianDropdownMenuButton\">\n                  <a class=\"dropdown-item from-text\" (click)=\"delayedDelivery.meridian = true\"\n                    >12\n                    <span>{{ 'settings.compose.hour' | translate }}</span>\n                  </a>\n                  <a class=\"dropdown-item from-text\" (click)=\"delayedDelivery.meridian = false\"\n                    >24\n                    <span>{{ 'settings.compose.hour' | translate }}</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n            <ngb-timepicker\n              [(ngModel)]=\"delayedDelivery.time\"\n              [meridian]=\"delayedDelivery.meridian\"\n              (ngModelChange)=\"changeDelayDeliver()\"\n            ></ngb-timepicker>\n            <label>{{ 'mail_detail.delay_delivery' | translate }} {{ delayDeliverTimeString | remainingTime }}</label>\n          </div>\n        </div>\n        <div *ngIf=\"delayedDelivery.error\" class=\"l-alert l-alert-danger mb-3\">{{ delayedDelivery.error }}</div>\n        <div class=\"form-group text-center btns-xs-3 mb-0\">\n          <button type=\"button\" (click)=\"setDelayedDeliveryValue()\" class=\"btn btn-success btn-sm mr-1\" role=\"button\">\n            {{ 'settings.compose.confirm' | translate }}\n          </button>\n          <button type=\"button\" (click)=\"clearDelayedDeliveryValue()\" class=\"btn btn-primary btn-sm mr-1\" role=\"button\">\n            {{ 'settings.compose.clear' | translate }}\n          </button>\n          <button (click)=\"d()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n            {{ 'common.cancel' | translate }}\n          </button>\n        </div>\n      </div>\n    </div> </ng-template\n  ><!-- /.delayed delivery datetime picker modal ends -->\n\n  <!-- dead man timer modal -->\n  <ng-template #deadManTimerModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.dead_man_timer' | translate }}</strong>\n        <ng-container\n          [ngTemplateOutlet]=\"learnMore\"\n          [ngTemplateOutletContext]=\"{ link: 'https://ctemplar.com/help/answer/setting-up-a-dead-mans-timer/' }\"\n        >\n        </ng-container>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">{{ 'settings.compose.email_sent_timer' | translate }}</div>\n        <form (submit)=\"setDeadManTimerValue()\">\n          <div class=\"form-group\">\n            <label class=\"form-inline\" for=\"deadman-days\">{{ 'settings.compose.days' | translate }}</label>\n            <input\n              type=\"number\"\n              class=\"form-control\"\n              id=\"deadman-days\"\n              name=\"deadman-days\"\n              ngbAutofocus\n              [(ngModel)]=\"deadManTimer.days\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-inline\" for=\"deadman-hours\">{{ 'settings.compose.hours' | translate }}</label>\n            <input\n              type=\"number\"\n              class=\"form-control\"\n              id=\"deadman-hours\"\n              name=\"deadman-hours\"\n              [(ngModel)]=\"deadManTimer.hours\"\n            />\n          </div>\n          <div class=\"form-group text-center btns-xs-3 mb-0\">\n            <button type=\"submit\" class=\"btn btn-success btn-sm mr-1\" role=\"button\">\n              {{ 'settings.compose.confirm' | translate }}\n            </button>\n            <button type=\"reset\" (click)=\"clearDeadManTimerValue()\" class=\"btn btn-primary btn-sm mr-1\" role=\"button\">\n              {{ 'settings.compose.clear' | translate }}\n            </button>\n            <button (click)=\"d()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n              {{ 'common.cancel' | translate }}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div> </ng-template\n  ><!-- /.dead man timer modal ends -->\n\n  <!-- Insert link modal -->\n  <ng-template #insertLinkModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.insert_link' | translate }}</strong>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <form (submit)=\"insertLink(insertLinkData.text, insertLinkData.link)\">\n          <div class=\"form-group\">\n            <label class=\"form-inline\" for=\"text-to-display\">{{\n              'settings.compose.text_to_display' | translate\n            }}</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"text-to-display\"\n              name=\"text-to-display\"\n              [(ngModel)]=\"insertLinkData.text\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-inline\" for=\"link-to\">{{ 'settings.compose.link_to' | translate }}</label>\n            <input type=\"text\" class=\"form-control\" id=\"link-to\" name=\"link-to\" [(ngModel)]=\"insertLinkData.link\" />\n          </div>\n          <div class=\"form-group text-center btns-xs-3 mb-0\">\n            <button (click)=\"d()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n              {{ 'common.cancel' | translate }}\n            </button>\n            <button\n              type=\"submit\"\n              class=\"btn btn-success btn-sm ml-2\"\n              [disabled]=\"!insertLinkData.text || !insertLinkData.link\"\n              role=\"button\"\n            >\n              OK\n            </button>\n          </div>\n        </form>\n      </div>\n    </div> </ng-template\n  ><!-- /.Insert link modal ends -->\n\n  <!-- encryption modal -->\n  <ng-template #encryptionModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong>{{ 'settings.compose.encrypt_for_non' | translate }}</strong>\n        <ng-container\n          [ngTemplateOutlet]=\"learnMore\"\n          [ngTemplateOutletContext]=\"{\n            link: 'https://ctemplar.com/help/answer/sending-encrypted-email-to-non-ctemplar-users/'\n          }\"\n        >\n        </ng-container>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded encrypt-non-ctemplar\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <form [formGroup]=\"encryptForm\" (submit)=\"onSubmitEncryption()\">\n          <div class=\"form-group\">\n            <label for=\"encrypt-password\">{{ 'settings.compose.message_password' | translate }}</label>\n            <div class=\"input-group\">\n              <input\n                #encryptPasswordInput\n                type=\"password\"\n                class=\"form-control form-control-lg\"\n                id=\"encrypt-password\"\n                ngbAutofocus\n                formControlName=\"password\"\n                [placeholder]=\"'settings.compose.message_password' | translate\"\n              />\n              <span\n                class=\"input-group-addon password-toggle bg-white text-muted\"\n                (click)=\"encryptPasswordInput.type = encryptPasswordInput.type === 'password' ? 'text' : 'password'\"\n              >\n                <i class=\"fa fa-eye\"></i> <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n            <span *ngIf=\"encryptForm.controls['password'].errors && showEncryptFormErrors\" class=\"validate-message\">\n              <span *ngIf=\"encryptForm.controls['password'].errors.required\">\n                {{ 'settings.compose.message_password_req' | translate }}\n              </span>\n            </span>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"confirm-encrypt-password\">{{ 'create_account.confirm_password' | translate }}</label>\n            <div class=\"input-group\">\n              <input\n                #encryptConfirmPasswordInput\n                type=\"password\"\n                class=\"form-control form-control-lg\"\n                id=\"confirm-encrypt-password\"\n                formControlName=\"confirmPwd\"\n                [placeholder]=\"'create_account.confirm_password' | translate\"\n              />\n              <span\n                class=\"input-group-addon password-toggle bg-white text-muted\"\n                (click)=\"\n                  encryptConfirmPasswordInput.type =\n                    encryptConfirmPasswordInput.type === 'password' ? 'text' : 'password'\n                \"\n              >\n                <i class=\"fa fa-eye\"></i>\n                <i class=\"fa fa-eye-slash\"></i>\n              </span>\n            </div>\n            <span *ngIf=\"encryptForm.controls['confirmPwd'].errors && showEncryptFormErrors\" class=\"validate-message\">\n              <span>{{ 'create_account.passwords_not_match' | translate }}</span>\n            </span>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"password-hint\">{{ 'settings.compose.password_hint' | translate }}</label>\n            <input\n              type=\"text\"\n              id=\"password-hint\"\n              class=\"form-control\"\n              formControlName=\"passwordHint\"\n              [placeholder]=\"'settings.compose.password_hint' | translate\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label>{{ 'settings.compose.encrypt_message_expire' | translate }}</label>\n            <div class=\"row\">\n              <div class=\"col-3\">\n                <label class=\"form-inline\" for=\"encryption-expire-days\">{{\n                  'settings.compose.days' | translate\n                }}</label>\n                <input\n                  type=\"number\"\n                  class=\"form-control\"\n                  formControlName=\"days\"\n                  min=\"0\"\n                  max=\"5\"\n                  name=\"encrypt-non-ctemplar-days\"\n                />\n              </div>\n              <div class=\"col-3\">\n                <label class=\"form-inline\" for=\"encryption-expire-hours\">{{\n                  'settings.compose.hours' | translate\n                }}</label>\n                <input\n                  type=\"number\"\n                  class=\"form-control\"\n                  formControlName=\"hours\"\n                  min=\"0\"\n                  max=\"24\"\n                  name=\"encrypt-non-ctemplar-hours\"\n                />\n              </div>\n            </div>\n            <div>\n              <span\n                *ngIf=\"\n                  showEncryptFormErrors &&\n                  (encryptForm.controls['days'].errors ||\n                    encryptForm.controls['hours'].errors ||\n                    encryptForm.controls['hours'].value + encryptForm.controls['days'].value * 24 === 0 ||\n                    encryptForm.controls['hours'].value + encryptForm.controls['days'].value * 24 > 120)\n                \"\n                class=\"validate-message\"\n              >\n                {{ 'settings.compose.expiry_time_message' | translate }}\n              </span>\n            </div>\n          </div>\n          <div class=\"form-group text-center mb-0\">\n            <button type=\"submit\" class=\"btn btn-success btn-sm mr-1\" role=\"button\">\n              {{ 'settings.compose.confirm' | translate }}\n            </button>\n            <button type=\"button\" (click)=\"clearEncryption()\" class=\"btn btn-primary btn-sm mr-1\" role=\"button\">\n              {{ 'settings.compose.clear' | translate }}\n            </button>\n            <button (click)=\"d()\" class=\"btn btn-secondary btn-sm\" role=\"button\">\n              {{ 'common.cancel' | translate }}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div> </ng-template\n  ><!-- /.encryption modal ends -->\n  <!-- Confirm delete folder modal -->\n  <ng-template #confirmationModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong [translate]=\"'settings.compose.confirm_send'\">Confirm Send </strong>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">\n          <span [translate]=\"'settings.compose.send_without_all'\">\n            Are you sure, send this message without a subject or text in the body?</span\n          >\n        </div>\n        <div class=\"form-group text-right mb-0\">\n          <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n            <span [translate]=\"'common.cancel'\">Cancel</span>\n          </button>\n          <button (click)=\"sendEmail()\" class=\"btn btn-danger btn-sm\" role=\"button\" [disabled]=\"userState?.inProgress\">\n            <span [translate]=\"'settings.compose.send'\">Send</span>\n          </button>\n          <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n        </div>\n      </div>\n    </div> </ng-template\n  ><!-- /.Confirm delete folder modal ends -->\n  <!-- Close Confirm modal -->\n  <ng-template #closeConfirmationModal let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h3 class=\"modal-title w-100 text-dark\">\n        <strong [translate]=\"'settings.compose.confirm_close'\">Confirm Close</strong>\n      </h3>\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body bg-faded\">\n      <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n        <div class=\"form-group\">\n          <span [translate]=\"'settings.compose.close_during_uploading'\">\n            Are you sure to close? the upload and encryption process will be lost if you close before uploading is not\n            completed.</span\n          >\n        </div>\n        <div class=\"form-group text-right mb-0\">\n          <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n            <span [translate]=\"'common.cancel'\">Cancel</span>\n          </button>\n          <button (click)=\"closeComposeConfirm()\" class=\"btn btn-danger btn-sm\" role=\"button\">\n            <span [translate]=\"'settings.compose.confirm'\">Confirm</span>\n          </button>\n        </div>\n      </div>\n    </div> </ng-template\n  ><!-- /.Close Confirm modal ends -->\n  <ng-template #learnMore let-link=\"link\">\n    <a ngbTooltip=\"Learn more\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"learn-more-info-icon\" [href]=\"link\"\n      ><i class=\"far fa-question-circle\"></i>\n    </a>\n  </ng-template>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbDateStruct, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport * as parseEmail from 'email-addresses';\nimport * as QuillNamespace from 'quill';\nimport { Subject, Subscription } from 'rxjs';\nimport { debounceTime, finalize, first } from 'rxjs/operators';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport * as xss from 'xss';\n\nimport { COLORS, FONTS, SummarySeparator, SIZES } from '../../../shared/config';\nimport {\n  CloseMailbox,\n  DeleteAttachment,\n  GetEmailContacts,\n  GetUsersKeys,\n  MoveMail,\n  NewDraft,\n  SetIsComposerPopUp,\n  SnackErrorPush,\n  SnackPush,\n  UpdateDraftAttachment,\n  UpdateLocalDraft,\n  UpdatePGPDecryptedContent,\n  UploadAttachment,\n} from '../../../store/actions';\nimport { FilenamePipe } from '../../../shared/pipes/filename.pipe';\nimport { FilesizePipe } from '../../../shared/pipes/filesize.pipe';\nimport { EmailFormatPipe } from '../../../shared/pipes/email-formatting.pipe';\nimport {\n  AppState,\n  AuthState,\n  AutocryptEncryptDetermine,\n  ComposeMailState,\n  ComposerEncryptionType,\n  Contact,\n  ContactsState,\n  Draft,\n  GlobalPublicKey,\n  MailAction,\n  MailBoxesState,\n  MailState,\n  PGPEncryptionType,\n  SecureContent,\n  Settings,\n  UserState,\n  BlackList,\n  WhiteList,\n} from '../../../store/datatypes';\nimport { Attachment, EncryptionNonCTemplar, Mail, Mailbox, MailFolderType } from '../../../store/models';\nimport { AutocryptProcessService, MailService, SharedService, getCryptoRandom } from '../../../store/services';\nimport { DateTimeUtilService } from '../../../store/services/datetime-util.service';\nimport { OpenPgpService } from '../../../store/services/openpgp.service';\n\nconst Quill: any = QuillNamespace;\nconst BlockEmbed = Quill.import('blots/block/embed');\nclass keepHTML extends BlockEmbed {\n  static create(node: any) {\n    return node;\n  }\n  static value(node: any) {\n    return node;\n  }\n}\nkeepHTML.blotName = 'keepHTML';\nkeepHTML.className = 'keepHTML';\n// keepHTML.tagName = 'div';\n\nQuill.register(keepHTML);\n/**\n * Add custom fonts, sizes, styles to quill\n */\nconst FontAttributor = Quill.import('attributors/class/font');\nFontAttributor.whitelist = [...FONTS];\nQuill.register(FontAttributor, true);\n\nconst SizeAttributor = Quill.import('attributors/style/size');\nconst updatedSizes = SIZES.map(size => {\n  return `${size}px`;\n});\nSizeAttributor.whitelist = updatedSizes;\nQuill.register(SizeAttributor, true);\nQuill.register(Quill.import('attributors/style/align'), true);\nQuill.register(Quill.import('attributors/style/background'), true);\nQuill.register(Quill.import('attributors/style/color'), true);\n\nconst QuillBlockEmbed = Quill.import('blots/block/embed');\nconst Inline = Quill.import('blots/inline');\nconst Delta = Quill.import('delta');\n\n/**\n * Define Custom Image Blot to store meta-data in Quill Editor\n */\nclass ImageBlot extends QuillBlockEmbed {\n  // Converts the HTML tag to image blot\n  static create(value: any) {\n    const node: any = super.create(value);\n    if (value) {\n      node.setAttribute('data-content-id', value.content_id);\n      node.setAttribute('src', value.url ? value.url : value);\n    }\n    return node;\n  }\n\n  // Converts the image blot to HTML tag\n  static value(node: any) {\n    return {\n      content_id: node.getAttribute('data-content-id'),\n      url: node.getAttribute('src'),\n    };\n  }\n}\n\nImageBlot.blotName = 'image';\nImageBlot.tagName = 'img';\n\nQuill.register(ImageBlot);\n\n/**\n * Custom Signature Blot to add custom html signature to Quill Editor\n */\nclass SignatureBlot extends QuillBlockEmbed {\n  // Converts the HTML tag to text version\n  static create(value: string) {\n    const node: any = super.create(value);\n    value = value.replace(/<br>/g, '\\n');\n    node.innerText = value;\n    return node;\n  }\n\n  static value(node: any) {\n    return node.innerHTML;\n  }\n}\n\nSignatureBlot.blotName = 'signature';\nSignatureBlot.tagName = 'div';\nSignatureBlot.className = 'ctemplar-signature';\n\nQuill.register(SignatureBlot);\n\n/**\n * Custom Inline Blot to Quill Editor\n */\nclass OriginalBlot extends Inline {\n  // add custom class to node\n  static create() {\n    const node = super.create();\n    node.setAttribute('class', 'originalblock');\n    return node;\n  }\n\n  static value(node: any) {\n    return node.innerHTML;\n  }\n}\n\nOriginalBlot.blotName = 'originalblock';\nOriginalBlot.tagName = 'div';\nOriginalBlot.className = 'originalblock';\n\nQuill.register(OriginalBlot);\n\nexport class PasswordValidation {\n  static MatchPassword(AC: AbstractControl): any {\n    const password = AC.get('password').value; // to get value in password input tag\n    const confirmPassword = AC.get('confirmPwd').value; // to get value in confirm password input tag\n    if (password !== confirmPassword) {\n      AC.get('confirmPwd').setErrors({ MatchPassword: true });\n    } else {\n      return null;\n    }\n  }\n}\n\n@UntilDestroy()\n@Component({\n  selector: 'app-compose-mail',\n  templateUrl: './compose-mail.component.html',\n  styleUrls: ['./compose-mail.component.scss', './../mail-sidebar.component.scss'],\n})\nexport class ComposeMailComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() receivers: Array<string>;\n\n  @Input() cc: Array<string>;\n\n  @Input() content = '';\n\n  @Input() subject: string;\n\n  @Input() draftMail: Mail;\n\n  @Input() selectedMailbox: Mailbox;\n\n  @Input() parentId: number;\n\n  @Input() showSaveButton = true;\n\n  @Input() forwardAttachmentsMessageId: number;\n\n  @Input() action: MailAction;\n\n  @Input() is_html: boolean;\n\n  @Input() action_parent: number;\n\n  @Input() isMailDetailPage: boolean;\n\n  @Input() isFullScreen: boolean;\n\n  @Input() isPopupOpen: boolean;\n\n  @Input() isReplyInPopup: boolean;\n\n  @Output() hide: EventEmitter<void> = new EventEmitter<void>();\n\n  @Output() subjectChanged: EventEmitter<string> = new EventEmitter<string>();\n\n  @Output() popUpChange: EventEmitter<any> = new EventEmitter<any>();\n\n  @ViewChild('editor', { read: ElementRef, static: false }) editor: any;\n\n  @ViewChild('attachmentHolder') attachmentHolder: any;\n\n  @ViewChild('toolbar') toolbar: any;\n\n  @ViewChild('attachImagesModal') attachImagesModal: any;\n\n  @ViewChild('selfDestructModal') selfDestructModal: any;\n\n  @ViewChild('delayedDeliveryModal') delayedDeliveryModal: any;\n\n  @ViewChild('receiverInput') receiverInputRange: ElementRef;\n\n  @ViewChild('ccReceiverInput') ccReceiverInputRange: ElementRef;\n\n  @ViewChild('bccReceiverInput') bccReceiverInputRange: ElementRef;\n\n  @ViewChild('deadManTimerModal') deadManTimerModal: any;\n\n  @ViewChild('encryptionModal') encryptionModal: any;\n\n  @ViewChild('insertLinkModal') insertLinkModal: any;\n\n  @ViewChild('confirmationModal') confirmationModal: any;\n\n  @ViewChild('closeConfirmationModal') closeConfirmationModal: any;\n\n  confirmModalRef: NgbModalRef;\n\n  closeConfirmModalRef: NgbModalRef;\n\n  draftId: number;\n\n  usersKeys: Map<string, GlobalPublicKey> = new Map();\n\n  colors = COLORS;\n\n  fonts = FONTS;\n\n  sizes = updatedSizes;\n\n  mailData: any = {};\n\n  inputTextValue = '';\n\n  ccInputTextValue = '';\n\n  bccInputTextValue = '';\n\n  night_mode: boolean;\n\n  options: any = {};\n\n  selfDestruct: any = {};\n\n  delayedDelivery: any = {};\n\n  deadManTimer: any = {};\n\n  attachments: Attachment[] = [];\n\n  isKeyboardOpened: boolean;\n\n  isSelfDestruction: boolean;\n\n  encryptForm: FormGroup;\n\n  contacts: any = [];\n\n  datePickerMinDate: NgbDateStruct;\n\n  valueChanged$: Subject<any> = new Subject<any>();\n\n  inProgress: boolean;\n\n  isProcessingAttachments: boolean;\n\n  isLoaded: boolean;\n\n  delayDeliverTimeString: string;\n\n  selfDestructTimeString: string;\n\n  showEncryptFormErrors: boolean;\n\n  isTrialPrimeFeaturesAvailable = false;\n\n  mailBoxesState: MailBoxesState;\n\n  isUploadingAttachment: boolean;\n\n  isDownloadingAttachmentCounter = 0;\n\n  insertLinkData: any = {};\n\n  settings: Settings;\n\n  mailAction = MailAction;\n\n  isPasted = false;\n\n  ccIsPasted = false;\n\n  bccIsPasted = false;\n\n  private isMailSent = false;\n\n  private isSavedInDraft = false;\n\n  private quill: any;\n\n  private autoSaveSubscription: Subscription;\n\n  private firstSaveSubscription: Subscription;\n\n  private attachImagesModalRef: NgbModalRef;\n\n  private selfDestructModalRef: NgbModalRef;\n\n  private delayedDeliveryModalRef: NgbModalRef;\n\n  private deadManTimerModalRef: NgbModalRef;\n\n  private encryptionModalRef: NgbModalRef;\n\n  private defaultLocale = 'US International';\n\n  private draft: Draft;\n\n  private attachmentsQueue: Array<Attachment> = [];\n\n  private downloadingAttachments: any = {};\n\n  private inlineAttachmentContentIds: Array<string> = [];\n\n  private isSignatureAdded = false;\n\n  private isAuthenticated: boolean;\n\n  private saveDraftOnLogout: boolean;\n\n  public userState: UserState = new UserState();\n\n  private decryptedContent: string;\n\n  private encryptionData: any = {};\n\n  private loadContacts = true;\n\n  private contactsState: ContactsState;\n\n  private oldMailbox: Mailbox;\n\n  isPreparingToSendEmail = false;\n\n  /**\n   * Decide to set html or plaintext mode with this variable\n   */\n  pgpEncryptionType: PGPEncryptionType = null;\n\n  autocryptInfo: AutocryptEncryptDetermine;\n\n  receiverEncryptTypeMap: any = {};\n\n  blacklist: BlackList[] = [];\n\n  whitelist: WhiteList[] = [];\n\n  /**\n   * This variable will be used for pass to suggest to add to the contact or update\n   */\n  clonedContacts: any[] = [];\n\n  constructor(\n    private modalService: NgbModal,\n    private store: Store<AppState>,\n    private formBuilder: FormBuilder,\n    private openPgpService: OpenPgpService,\n    private mailService: MailService,\n    private sharedService: SharedService,\n    private dateTimeUtilService: DateTimeUtilService,\n    private filesizePipe: FilesizePipe,\n    private filenamePipe: FilenamePipe,\n    private cdr: ChangeDetectorRef,\n    private autocryptService: AutocryptProcessService,\n  ) {}\n\n  ngOnInit() {\n    this.encryptForm = this.formBuilder.group(\n      {\n        password: ['', [Validators.required]],\n        confirmPwd: ['', [Validators.required]],\n        passwordHint: [''],\n        days: [5, [Validators.required, Validators.min(0), Validators.max(5)]],\n        hours: [0, [Validators.required, Validators.min(0), Validators.max(24)]],\n      },\n      {\n        validator: PasswordValidation.MatchPassword,\n      },\n    );\n    this.resetMailData();\n    this.initializeDraft();\n    /**\n     * Get current Compose state from Store and\n     * Encrypt attachments of compose mail\n     */\n    this.store\n      .select((state: AppState) => state.composeMail)\n      .pipe(untilDestroyed(this))\n      .subscribe((response: ComposeMailState) => {\n        const draft = response.drafts[this.draftId];\n        if (draft) {\n          this.draftMail = draft.draft;\n          this.inProgress = draft.inProgress;\n          if (draft.isProcessingAttachments !== undefined) {\n            this.isProcessingAttachments = draft.isProcessingAttachments;\n            if (!this.isProcessingAttachments && this.closeConfirmModalRef) {\n              this.closeConfirmModalRef.dismiss();\n            }\n          }\n          if (draft.draft && draft.draft.id && this.attachmentsQueue.length > 0) {\n            // when open draft mail with attachments\n            this.attachmentsQueue.forEach(attachment => {\n              attachment.message = draft.draft.id;\n              this.encryptAttachment(attachment);\n            });\n            this.attachmentsQueue = [];\n          }\n          if (!this.inProgress) {\n            this.handleAttachment(draft);\n          }\n        }\n        this.draft = draft;\n        this.usersKeys = response.usersKeys;\n        this.anaylizeUsersKeysWithContact();\n        const receivers = this.draftMail.receiver;\n        if (receivers && receivers.length > 0) {\n          const receiversToFetchKey = receivers\n            .map(rec => (parseEmail.parseOneAddress(rec.toLowerCase()) as parseEmail.ParsedMailbox).address)\n            .filter(\n              rec => !this.usersKeys.has(rec) || (!this.usersKeys.get(rec).key && !this.usersKeys.get(rec).isFetching),\n            );\n          if (receiversToFetchKey.length > 0) {\n            this.store.dispatch(\n              new GetUsersKeys({\n                emails: receiversToFetchKey,\n              }),\n            );\n          }\n        }\n      });\n\n    /**\n     * Get user's information from store.\n     */\n    this.store\n      .select((state: AppState) => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.settings = user.settings;\n        this.night_mode = this.settings.is_night_mode;\n        this.blacklist = this.userState.blackList;\n        this.whitelist = this.userState.whiteList;\n        // Set html/plain version from user's settings.\n        if (\n          (this.action === 'FORWARD' && this.is_html === undefined) ||\n          (this.draftMail && this.draftMail.is_html === null)\n        ) {\n          this.draftMail.is_html = !this.settings.is_html_disabled;\n        }\n        if (user.settings.is_contacts_encrypted) {\n          this.contacts = [];\n        }\n      });\n\n    /**\n     * Get user's contacts from store.\n     */\n    this.store\n      .select((state: AppState) => state.contacts)\n      .pipe(untilDestroyed(this))\n      .subscribe((contactsState: ContactsState) => {\n        this.contacts = [];\n        if (contactsState.emailContacts === undefined) {\n          contactsState.contacts.forEach(x => {\n            this.contacts.push({\n              name: x.name,\n              email: x.email,\n              display: EmailFormatPipe.transformToFormattedEmail(x.email, x.name),\n            });\n          });\n        } else {\n          contactsState.emailContacts.forEach(x => {\n            this.contacts.push({\n              name: x.name,\n              email: x.email,\n              display: EmailFormatPipe.transformToFormattedEmail(x.email, x.name),\n            });\n          });\n        }\n        this.clonedContacts =\n          contactsState.emailContacts === undefined ? contactsState.contacts : contactsState.emailContacts;\n        this.contactsState = contactsState;\n        this.anaylizeUsersKeysWithContact();\n        this.loadEmailContacts();\n      });\n\n    /**\n     * Get user's current authentication status\n     */\n    this.store\n      .select((state: AppState) => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.isAuthenticated = authState.isAuthenticated;\n        this.saveDraftOnLogout = authState.saveDraftOnLogout;\n        if (authState.saveDraftOnLogout) {\n          this.updateEmail();\n        } // save draft before logout\n        this.loadEmailContacts();\n      });\n\n    /**\n     * Get user's mailbox information\n     */\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        if (!this.selectedMailbox) {\n          if (this.draftMail && this.draftMail.mailbox) {\n            this.selectedMailbox = mailBoxesState.mailboxes.find(mailbox => mailbox.id === this.draftMail.mailbox);\n          } else if (mailBoxesState.currentMailbox) {\n            this.selectedMailbox = mailBoxesState.currentMailbox;\n            this.updateSignature();\n          }\n        }\n        if (\n          this.selectedMailbox &&\n          mailBoxesState.currentMailbox &&\n          this.selectedMailbox.id === mailBoxesState.currentMailbox.id\n        ) {\n          this.selectedMailbox = mailBoxesState.currentMailbox;\n        }\n        this.mailBoxesState = mailBoxesState;\n        this.anaylizeUsersKeysWithContact();\n      });\n\n    /**\n     * Get mail status and\n     * add decrypted content if content is not decrypted\n     */\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        if (this.draftMail && !this.decryptedContent) {\n          const decryptedContent = mailState.decryptedContents[this.draftMail.id];\n          if (decryptedContent && !decryptedContent.inProgress && decryptedContent.content) {\n            this.decryptedContent = decryptedContent.content;\n            if (this.draftMail.is_subject_encrypted) {\n              this.subject = decryptedContent.subject;\n              this.subjectChanged.emit(this.subject);\n              this.mailData.subject = decryptedContent.subject;\n            }\n            this.addDecryptedContent();\n          }\n        }\n      });\n\n    const now = new Date();\n    this.datePickerMinDate = {\n      year: now.getFullYear(),\n      month: now.getMonth() + 1,\n      day: now.getDate(),\n    };\n\n    if (this.action === 'FORWARD' && this.is_html !== undefined) {\n      this.draftMail.is_html = this.is_html;\n    }\n    this.isSelfDestructionEnable(); // check self destruction is possible or not\n    this.initializeAutoSave(); // start auto save function\n  }\n\n  onPaste() {\n    this.isPasted = true;\n  }\n\n  ccOnPaste() {\n    this.ccIsPasted = true;\n  }\n\n  bccOnPaste() {\n    this.bccIsPasted = true;\n  }\n\n  onRemoveReceive() {\n    this.valueChanged$.next(this.mailData.receiver);\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  onRemoveCc() {\n    this.valueChanged$.next(this.mailData.cc);\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  onRemoveBcc() {\n    this.valueChanged$.next(this.mailData.bcc);\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  updateInputTextValue(value: string) {\n    // add tag if pasted item is valid email\n    if (this.isPasted && this.validateEmail(value)) {\n      this.mailData.receiver.push({\n        display: value,\n        value,\n        email: value,\n      });\n      this.inputTextValue = '';\n      this.isPasted = false;\n      if (\n        !this.usersKeys.has(value.toLowerCase()) ||\n        (!this.usersKeys.get(value.toLowerCase()).key && !this.usersKeys.get(value.toLowerCase()).isFetching)\n      ) {\n        this.store.dispatch(\n          new GetUsersKeys({\n            emails: [value.toLowerCase()],\n          }),\n        );\n      } else {\n        this.anaylizeUsersKeysWithContact();\n      }\n    }\n  }\n\n  ccUpdateInputTextValue(value: string) {\n    // add tag if pasted item is valid email\n    if (this.ccIsPasted && this.validateEmail(value)) {\n      this.mailData.cc.push({\n        display: value,\n        value,\n        email: value,\n      });\n      this.ccInputTextValue = '';\n      this.ccIsPasted = false;\n      if (\n        !this.usersKeys.has(value.toLowerCase()) ||\n        (!this.usersKeys.get(value.toLowerCase()).key && !this.usersKeys.get(value.toLowerCase()).isFetching)\n      ) {\n        this.store.dispatch(\n          new GetUsersKeys({\n            emails: [value.toLowerCase()],\n          }),\n        );\n      } else {\n        this.anaylizeUsersKeysWithContact();\n      }\n    }\n  }\n\n  bccUpdateInputTextValue(value: string) {\n    // add tag if pasted item is valid email\n    if (this.bccIsPasted && this.validateEmail(value)) {\n      this.mailData.bcc.push({\n        display: value,\n        value,\n        email: value,\n      });\n      this.bccInputTextValue = '';\n      this.bccIsPasted = false;\n      if (\n        !this.usersKeys.has(value.toLowerCase()) ||\n        (!this.usersKeys.get(value.toLowerCase()).key && !this.usersKeys.get(value.toLowerCase()).isFetching)\n      ) {\n        this.store.dispatch(\n          new GetUsersKeys({\n            emails: [value.toLowerCase()],\n          }),\n        );\n      } else {\n        this.anaylizeUsersKeysWithContact();\n      }\n    }\n  }\n\n  validateEmail(email: string) {\n    const re = /^(([^\\s\"(),.:;<>@[\\\\\\]]+(\\.[^\\s\"(),.:;<>@[\\\\\\]]+)*)|(\".+\"))@((\\[(?:\\d{1,3}\\.){3}\\d{1,3}])|(([\\dA-Za-z\\-]+\\.)+[A-Za-z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  onTagEdited($event: any) {\n    this.mailData.receiver[$event.index] = { display: $event.display, value: $event.value, email: $event.value };\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  ccOnTagEdited($event: any) {\n    this.mailData.cc[$event.index] = { display: $event.display, value: $event.value, email: $event.value };\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  bccOnTagEdited($event: any) {\n    this.mailData.bcc[$event.index] = { display: $event.display, value: $event.value, email: $event.value };\n    this.isSelfDestructionEnable();\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  onClick() {\n    this.receiverInputRange.nativeElement.querySelector('input[type=\"text\"]').focus();\n  }\n\n  onCcClick() {\n    this.ccReceiverInputRange.nativeElement.querySelector('input[type=\"text\"]').focus();\n  }\n\n  onBccClick() {\n    this.bccReceiverInputRange.nativeElement.querySelector('input[type=\"text\"]').focus();\n  }\n\n  ngAfterViewInit() {\n    this.initializeComposeMail();\n    if (this.forwardAttachmentsMessageId) {\n      if (this.editor) {\n        this.updateEmail();\n      } else {\n        setTimeout(() => {\n          this.updateEmail();\n        }, 1000);\n      }\n    }\n    this.cdr.detectChanges();\n  }\n\n  initializeComposeMail() {\n    if (this.draftMail.is_html === null || this.draftMail.is_html) {\n      if (this.editor) {\n        this.initializeQuillEditor();\n      }\n    } else {\n      // display mail content and change from html to text if html version\n      let content = this.mailData.content ? this.mailData.content : '';\n      if (this.editor) {\n        this.content = this.editor.nativeElement.firstChild.innerHTML;\n      }\n      this.content = this.content && this.content === '' ? content : this.content;\n\n      if (this.content) {\n        content = this.getPlainText(this.content);\n      }\n      if (content) {\n        setTimeout(() => {\n          this.mailData.content = content;\n          this.updateSignature();\n          this.mailData.content = this.mailData.content.replace(/\\n+$/, '');\n        }, 300);\n      }\n    }\n  }\n\n  setHtmlEditor(value: boolean) {\n    this.draftMail.is_html = value;\n    if (value) {\n      this.cdr.detectChanges();\n    }\n    this.initializeComposeMail();\n    if (!value) {\n      this.cdr.detectChanges();\n    }\n    this.valueChanged$.next();\n  }\n\n  openReplyinPopup() {\n    this.store.dispatch(new SetIsComposerPopUp(true));\n    this.popUpChange.emit({\n      receivers: this.receivers,\n      draftMail: this.draftMail,\n      forwardAttachmentsMessageId: this.forwardAttachmentsMessageId,\n      action: this.action,\n      parentId: this.parentId,\n    });\n  }\n\n  ngOnDestroy(): void {\n    // save to draft when close compose\n    if (this.selectedMailbox.email && !this.isMailSent && !this.isSavedInDraft && !this.saveDraftOnLogout) {\n      this.saveInDrafts();\n      this.isSavedInDraft = true;\n    }\n    if (this.isAuthenticated) {\n      this.store.dispatch(new CloseMailbox(this.draft));\n    }\n  }\n\n  onSubjectChange(subject: string) {\n    this.subjectChanged.emit(subject);\n  }\n\n  private getPlainText(html: string) {\n    // Change html content to text content by deletng html tags\n    if (!/<\\/?[a-z][\\S\\s]*>/i.test(html)) {\n      return html;\n    }\n    const element = document.createElement('div');\n    element.innerHTML = html\n      .replace(/<br>/g, '')\n      .replace(/<\\/div>/g, '<br></div>')\n      .replace(/<\\/p>/g, '<br></p>')\n      .replace(/<br>/g, '\\n')\n      .replace(/<\\/br>/g, '\\n');\n    return element.textContent;\n  }\n\n  loadEmailContacts() {\n    if (\n      this.isAuthenticated &&\n      this.loadContacts &&\n      !this.contacts &&\n      this.contactsState &&\n      !this.contactsState.loaded &&\n      !this.contactsState.inProgress &&\n      !this.userState.settings.is_contacts_encrypted\n    ) {\n      this.loadContacts = false;\n      this.store.dispatch(new GetEmailContacts());\n    }\n  }\n\n  initializeDraft() {\n    // save compose content to draft for the first time\n    this.draftId = Date.now();\n    if (!this.draftMail) {\n      this.draftMail = { is_html: null, content: null, folder: 'draft' };\n    } else {\n      this.openPgpService.decrypt(this.draftMail.mailbox, this.draftMail.id, new SecureContent(this.draftMail));\n      this.isSignatureAdded = true;\n      if (this.draftMail.attachments) {\n        this.inlineAttachmentContentIds = this.draftMail.attachments\n          .filter((attachment: Attachment) => attachment.is_inline)\n          .map(attachment => attachment.content_id);\n      }\n    }\n\n    this.encryptionData = {};\n    if (this.draftMail && this.draftMail.encryption) {\n      this.encryptionData.password = this.draftMail.encryption.password;\n      this.encryptionData.password_hint = this.draftMail.encryption.password_hint;\n      this.encryptionData.expiryHours = this.draftMail.encryption.expiry_hours;\n    }\n\n    const draft: Draft = {\n      id: this.draftId,\n      draft: this.draftMail,\n      inProgress: false,\n      attachments:\n        this.draftMail && this.draftMail.attachments\n          ? this.draftMail.attachments.map(attachment => {\n              attachment.progress = 100;\n              attachment.name = attachment.name ? attachment.name : this.filenamePipe.transform(attachment.document);\n              attachment.draftId = this.draftId;\n              attachment.attachmentId = performance.now() + Math.floor(getCryptoRandom() * 1000);\n              return attachment;\n            })\n          : [],\n      usersKeys: null,\n    };\n\n    this.store.dispatch(new NewDraft({ ...draft }));\n    this.decryptAttachments(draft.attachments);\n  }\n\n  decryptAttachments(attachments: Array<Attachment>) {\n    attachments.forEach(attachment => {\n      // TODO: Do we need to download attachment even if it is not encrypted?\n      if (!attachment.decryptedDocument && !this.downloadingAttachments[attachment.id]) {\n        this.downloadingAttachments[attachment.id] = true;\n        this.isDownloadingAttachmentCounter++;\n        this.mailService\n          .getAttachment(attachment)\n          .pipe(untilDestroyed(this))\n          .pipe(\n            finalize(() => {\n              this.isDownloadingAttachmentCounter--;\n            }),\n          )\n          .subscribe(\n            response => {\n              if (attachment.is_encrypted) {\n                // if attachment is encrypted, update draft attachment with decrypted attachment\n                const fileInfo = { attachment, type: response.file_type };\n                this.openPgpService\n                  .decryptAttachment(this.draftMail.mailbox, response.data, fileInfo)\n                  .subscribe(decryptedAttachment => {\n                    this.store.dispatch(\n                      new UpdateDraftAttachment({\n                        draftId: this.draftId,\n                        attachment: { ...decryptedAttachment },\n                      }),\n                    );\n                  });\n              } else {\n                // if attachment is not encrypted, update draft attachment with decoded attachment\n                const uint8Array = this.sharedService.base64ToUint8Array(response.data);\n                const newDocument = new File(\n                  [uint8Array.buffer.slice(uint8Array.byteOffset, uint8Array.byteLength + uint8Array.byteOffset)],\n                  attachment.name,\n                  { type: response.file_type },\n                );\n                const newAttachment: Attachment = { ...attachment, decryptedDocument: newDocument };\n                this.store.dispatch(\n                  new UpdateDraftAttachment({\n                    draftId: this.draftId,\n                    attachment: { ...newAttachment },\n                  }),\n                );\n              }\n            },\n            error => this.store.dispatch(new SnackErrorPush({ message: 'Failed to get attachments.' })),\n          );\n      }\n    });\n  }\n\n  initializeQuillEditor() {\n    this.quill = new Quill(this.editor.nativeElement, {\n      modules: {\n        toolbar: this.toolbar.nativeElement,\n      },\n      clipboard: {\n        matchVisual: false,\n      },\n    });\n    this.quill.scrollingContainer = document.getElementById('editor-cover-scroller');\n\n    this.quill.on('text-change', () => {\n      this.valueChanged$.next();\n    });\n    // need to change text to html contents\n    if (this.mailData.content) {\n      this.content = this.mailData.content ? this.mailData.content.replace(/\\n/g, '<br>') : this.content;\n      this.quill.clipboard.dangerouslyPasteHTML(0, this.content);\n    } else if (this.content) {\n      this.content = this.formatContent(this.content);\n      const allowedTags = [\n        'a',\n        'b',\n        'br',\n        'div',\n        'font',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n        'hr',\n        'img',\n        'label',\n        'li',\n        'ol',\n        'p',\n        'span',\n        'strong',\n        'table',\n        'td',\n        'th',\n        'tr',\n        'u',\n        'ul',\n        'i',\n        'blockquote',\n      ];\n      // @ts-ignore\n      let xssValue = xss(this.content, {\n        onTag: (tag: string, html: string, options: any) => {\n          if (!options.isClosing && allowedTags.includes(tag.toLowerCase())) {\n            let htmlAttributes = '';\n            const reg = /\\s/;\n            const match = reg.exec(html);\n            const i = match ? match.index : -1;\n            if (i !== -1) {\n              htmlAttributes = html.slice(i + 1, -1).trim();\n            }\n            let attributesHtml = xss.parseAttr(htmlAttributes, (attributeName, attributeValue) => {\n              if (attributeName === 'class') {\n                attributeValue = attributeValue.replace('gmail_quote', '');\n              }\n              return `${attributeName}=\"${attributeValue}\"`;\n            });\n            let outputHtml = `<${tag}`;\n            if (attributesHtml) {\n              outputHtml += ` ${attributesHtml}`;\n            }\n            outputHtml += '>';\n            return outputHtml;\n          } else {\n            return html;\n          }\n        },\n      });\n      this.quill.clipboard.dangerouslyPasteHTML(\n        0,\n        `<div class=\"keepHTML\" style=\"white-space: normal;\">${xssValue}</div>`,\n      );\n    }\n\n    this.updateSignature();\n    if (this.settings) {\n      this.quill.format('color', this.settings.default_color);\n      this.quill.format('size', `${this.settings.default_size}px`);\n      this.quill.format('background', this.settings.default_background);\n      this.quill.format('font', this.settings.default_font);\n\n      const qlEditor = document.querySelectorAll('.ql-editor p');\n      for (var i = 0; i < qlEditor.length; i++) {\n        qlEditor[i].setAttribute('style', '');\n      }\n    }\n    setTimeout(() => {\n      this.quill.setSelection(0, 0, 'silent');\n    }, 100);\n  }\n\n  private formatContent(content: string) {\n    // convert text content to html content\n    return !this.draftMail.is_html ? content.replace(/\\n/g, '<br>') : content;\n  }\n\n  insertLink(text: string, link: string) {\n    // add content with link based on https or http to quill\n    this.insertLinkData.modalRef.close();\n    if (!/^https?:\\/\\//i.test(link)) {\n      link = `http://${link}`;\n    }\n    this.quill.focus();\n    this.quill.updateContents(\n      new Delta().retain(this.quill.getSelection().index).insert(text, { link, target: '_blank' }),\n    );\n  }\n\n  openInsertLinkModal() {\n    this.insertLinkData = {};\n    this.insertLinkData.modalRef = this.modalService.open(this.insertLinkModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  initializeAutoSave() {\n    if (this.settings.autosave_duration !== 'none') {\n      this.autoSaveSubscription = this.valueChanged$\n        .pipe(\n          debounceTime(Number(this.settings.autosave_duration)), // get autosave interval from user's settings\n        )\n        .subscribe(() => {\n          if (!this.draft.isSaving && this.hasData()) {\n            this.updateEmail();\n          }\n        });\n    }\n    this.firstSaveSubscription = this.valueChanged$\n      .pipe(first(() => !this.draft.draft.id && this.hasData()))\n      .subscribe(data => {\n        this.updateEmail();\n      });\n  }\n\n  quillImageHandler() {\n    this.attachImagesModalRef = this.modalService.open(this.attachImagesModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  onFromChanged(mailbox: Mailbox, oldMailbox: Mailbox) {\n    // when user change current mailbox on From field of Compose window\n    if (oldMailbox === mailbox) {\n      return;\n    }\n    this.selectedMailbox = mailbox;\n    this.oldMailbox = oldMailbox;\n    this.updateSignature();\n    this.valueChanged$.next(this.selectedMailbox);\n    this.anaylizeUsersKeysWithContact();\n  }\n\n  onImagesSelected(files: FileList) {\n    if (!this.draftMail || !this.draftMail.id) {\n      this.updateEmail();\n    }\n    for (let i = 0; i < files.length; i++) {\n      const file = files.item(i);\n      if (/^image\\//.test(file.type)) {\n        const FR = new FileReader();\n        FR.addEventListener('load', function (e) {\n          document.querySelector('.ql-editor p').innerHTML += `<img src=${e.target.result} alt=\"image\" />`;\n        });\n        FR.readAsDataURL(file);\n      } else {\n        // TODO: add error notification for invalid file type here\n      }\n    }\n  }\n\n  onFilesSelected(files: FileList) {\n    this.isProcessingAttachments = true;\n    if ((!this.draftMail || !this.draftMail.id) && !this.draft.isSaving) {\n      this.updateEmail();\n    }\n    for (let i = 0; i < files.length; i++) {\n      const file: File = files.item(i);\n      this.uploadAttachment(file, false);\n    }\n  }\n\n  uploadAttachment(file: File, isInline = false) {\n    if (this.checkAttachmentSizeLimit(file)) {\n      this.attachmentHolder.nativeElement.scrollIntoView({ behavior: 'smooth' });\n      const attachment: Attachment = {\n        draftId: this.draftId,\n        document: file,\n        decryptedDocument: file,\n        name: file.name,\n        size: this.filesizePipe.transform(file.size),\n        attachmentId: performance.now() + Math.floor(getCryptoRandom() * 1000),\n        message: this.draftMail.id,\n        is_inline: isInline,\n        is_encrypted: !isInline,\n        inProgress: false,\n        actual_size: file.size,\n      };\n      this.attachments.push(attachment);\n      if (!this.draftMail.id) {\n        this.attachmentsQueue.push(attachment);\n      } else {\n        this.encryptAttachment(attachment);\n      }\n    }\n  }\n\n  checkAttachmentSizeLimit(file: File): boolean {\n    // there is limit size of attachment from user's settings\n    const attachmentLimitInMBs = this.settings.attachment_size_limit / (1024 * 1024);\n    if (file.size > this.settings.attachment_size_limit) {\n      this.store.dispatch(\n        new SnackErrorPush({\n          message: this.settings.attachment_size_error || `Maximum allowed file size is ${attachmentLimitInMBs}MB.`,\n        }),\n      );\n      return false;\n    }\n    return true;\n  }\n\n  encryptAttachment(attachment: Attachment) {\n    if (attachment.is_inline) {\n      this.store.dispatch(new UploadAttachment({ ...attachment }));\n    } else {\n      this.openPgpService.encryptAttachment(this.selectedMailbox.id, attachment);\n    }\n  }\n\n  handleAttachment(draft: Draft) {\n    // usage Object.assign to create new copy and avoid storing reference of draft.attachments\n    this.attachments = Object.assign([], draft.attachments);\n    this.decryptAttachments(this.attachments);\n    this.isUploadingAttachment = false;\n    // TODO: remove this if its not required anymore due to change in handling of inline attachments?\n    this.attachments.forEach(attachment => {\n      if (\n        attachment.is_inline &&\n        attachment.progress === 100 &&\n        !attachment.isRemoved &&\n        attachment.content_id &&\n        (!attachment.is_encrypted || attachment.decryptedDocument) &&\n        !this.inlineAttachmentContentIds.includes(attachment.content_id)\n      ) {\n        this.inlineAttachmentContentIds.push(attachment.content_id);\n        if (!attachment.is_forwarded) {\n          this.embedImageInQuill(attachment.document, attachment.content_id);\n        }\n      }\n      if (attachment.progress < 100 && !attachment.isRemoved) {\n        this.isUploadingAttachment = true;\n      }\n    });\n  }\n\n  onAttachImageURL(url: string) {\n    this.embedImageInQuill(url);\n    this.attachImagesModalRef.dismiss();\n  }\n\n  saveInDrafts() {\n    if (this.inProgress || this.draft.isSaving || this.isProcessingAttachments) {\n      // If saving is in progress, then wait to send.\n      setTimeout(() => {\n        this.saveInDrafts();\n      }, 100);\n      return;\n    }\n    if (this.isSavedInDraft) {\n      // if email already saved in ngOnDestroy.\n      return;\n    }\n    this.isSavedInDraft = true;\n    this.updateEmail();\n    this.hide.emit();\n    this.resetValues();\n  }\n\n  closeCompose() {\n    if (this.isProcessingAttachments) {\n      this.closeConfirmModalRef = this.modalService.open(this.closeConfirmationModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n      });\n    } else {\n      this.saveInDrafts();\n    }\n  }\n\n  closeComposeConfirm() {\n    if (this.closeConfirmModalRef) {\n      this.closeConfirmModalRef.dismiss();\n    }\n    if (this.isProcessingAttachments) {\n      const attachments = this.attachments;\n      for (let i = 0; i < attachments.length; i++) {\n        if (attachments[i].inProgress) {\n          this.removeAttachment(attachments[i]);\n        }\n      }\n    }\n    this.saveInDrafts();\n  }\n\n  discardEmail() {\n    if (this.inProgress || (this.draft && this.draft.isSaving) || this.isProcessingAttachments) {\n      // If saving is in progress, then wait to send.\n      setTimeout(() => {\n        this.discardEmail();\n      }, 100);\n      return;\n    }\n    this.isSavedInDraft = true;\n    if (this.draftMail && this.draftMail.id) {\n      this.store.dispatch(\n        new MoveMail({\n          ids: this.draftMail.id,\n          folder: MailFolderType.TRASH,\n          sourceFolder: MailFolderType.DRAFT,\n          mail: this.draftMail,\n          allowUndo: true,\n        }),\n      );\n    }\n    this.hide.emit();\n    this.resetValues();\n  }\n\n  isSelfDestructionEnable() {\n    this.isSelfDestruction = false;\n    const receivers: string[] = [\n      ...this.mailData.receiver.map((receiver: any) => receiver.email),\n      ...this.mailData.cc.map((cc: any) => cc.email),\n      ...this.mailData.bcc.map((bcc: any) => bcc.email),\n    ];\n    receivers.forEach(receiver => {\n      const getDomain = receiver.substring(receiver.indexOf('@') + 1, receiver.length);\n      if (getDomain === 'ctemplar.com') {\n        this.isSelfDestruction = true;\n      }\n    });\n    if (!this.isSelfDestruction && this.selfDestruct.date) {\n      this.clearSelfDestructValue();\n    }\n  }\n\n  addHyperLink() {\n    var regex = /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.com|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\n    this.quill.focus();\n    var contents = this.quill.getText();\n    var filtered = contents.trim().split(/\\s+/);\n    for (let i = 0; i < filtered.length; i++) {\n      var match = filtered[i].match(regex);\n      if (match !== null) {\n        var url = match[0];\n        var hyperLink = url;\n        if (!/^https?:\\/\\//i.test(url)) {\n          hyperLink = `http://${url}`;\n        }\n        var position = contents.indexOf(url);\n        this.quill.updateContents(\n          new Delta().retain(position).delete(url.length).insert(url, { link: hyperLink, target: '_blank' }),\n        );\n      }\n    }\n  }\n\n  /**\n   * Check exceptions and validations of subject and receiver before send mail\n   */\n  sendEmailCheck() {\n    if (this.isPreparingToSendEmail) return;\n    if (!this.selectedMailbox.is_enabled) {\n      this.store.dispatch(\n        new SnackPush({ message: 'Selected email address is disabled. Please select a different email address.' }),\n      );\n      return;\n    }\n    const receivers: string[] = [\n      ...this.mailData.receiver.map((receiver: any) => receiver.email.toLowerCase()),\n      ...this.mailData.cc.map((cc: any) => cc.email.toLowerCase()),\n      ...this.mailData.bcc.map((bcc: any) => bcc.email.toLowerCase()),\n    ];\n    if (receivers.length === 0) {\n      this.store.dispatch(new SnackErrorPush({ message: 'Please enter receiver email.' }));\n      return;\n    }\n    const invalidAddress = receivers.find(receiver => !this.sharedService.isRFCStandardValidEmail(receiver));\n    if (invalidAddress) {\n      this.store.dispatch(new SnackErrorPush({ message: `\"${invalidAddress}\" is not valid email address.` }));\n      return;\n    }\n    this.isPreparingToSendEmail = true;\n    if (this.inProgress || (this.draft && this.draft.isSaving) || this.isProcessingAttachments) {\n      // If saving is in progress, then wait to send.\n      setTimeout(() => {\n        this.isPreparingToSendEmail = false;\n        this.sendEmailCheck();\n      }, 100);\n      return;\n    }\n    if (\n      receivers.some(\n        receiver => this.usersKeys.has(receiver.toLowerCase()) && this.usersKeys.get(receiver.toLowerCase()).isFetching,\n      )\n    ) {\n      // If fetching for user key, wait to send\n      setTimeout(() => {\n        this.isPreparingToSendEmail = false;\n        this.sendEmailCheck();\n      }, 100);\n      return;\n    }\n    if (\n      this.mailData.subject === '' &&\n      ((this.draftMail.is_html &&\n        this.getPlainText(this.editor.nativeElement.firstChild.innerHTML).replace(/ /g, '').replace(/\\n/g, '')\n          .length === 0) ||\n        (!this.draftMail.is_html && this.mailData.content.replace(/ /g, '').replace(/\\n/g, '').length === 0))\n    ) {\n      // show message to confirm without subject and content\n      this.confirmModalRef = this.modalService.open(this.confirmationModal, {\n        centered: true,\n        windowClass: 'modal-sm users-action-modal',\n      });\n    } else {\n      if (this.draftMail.is_html) {\n        this.addHyperLink();\n      }\n      this.sendEmail();\n    }\n  }\n\n  sendEmail() {\n    if (this.confirmModalRef) {\n      this.confirmModalRef.dismiss();\n    }\n    let receivers: string[] = [\n      ...this.mailData.receiver.map((receiver: any) => receiver.display.toLowerCase()),\n      ...this.mailData.cc.map((cc: any) => cc.display.toLowerCase()),\n      ...this.mailData.bcc.map((bcc: any) => bcc.display.toLowerCase()),\n    ];\n    receivers = receivers.filter(\n      email =>\n        !this.usersKeys.has(email.toLowerCase()) ||\n        (!this.usersKeys.get(email.toLowerCase()).key && !this.usersKeys.get(email.toLowerCase()).isFetching),\n    );\n\n    this.isMailSent = true;\n    this.setMailData(true, false);\n    this.inProgress = true;\n    this.store.dispatch(\n      new GetUsersKeys({\n        draftId: this.draftId,\n        emails: receivers,\n        draft: {\n          ...this.draft,\n          isMailDetailPage: this.isMailDetailPage,\n          isSaving: false,\n          shouldSave: false,\n          shouldSend: true,\n          draft: { ...this.draftMail },\n        },\n      }),\n    );\n    const message = this.delayedDelivery.value || this.deadManTimer.value ? 'Scheduling mail...' : 'Sending mail...';\n\n    this.store.dispatch(new SnackPush({ message, duration: 120000 }));\n    this.resetValues();\n    this.hide.emit();\n  }\n\n  removeAttachment(attachment: Attachment) {\n    if (!attachment.isRemoved) {\n      attachment.isRemoved = true;\n      this.store.dispatch(new DeleteAttachment(attachment));\n    }\n  }\n\n  /**\n   * Add signature on content of Compose message\n   */\n  updateSignature() {\n    if (!this.isSignatureAdded) {\n      if (this.settings && !this.draftMail.is_html) {\n        // add plaintext signature and return if plain text mode\n        this.isSignatureAdded = true;\n        this.mailData.content = this.mailData.content ? this.mailData.content : '';\n        if (this.selectedMailbox.signature) {\n          this.mailData.content = `\\n\\n${this.getPlainText(this.selectedMailbox.signature)}${this.mailData.content}`;\n        }\n        return;\n      }\n      /**\n       * add html signature if html version\n       */\n      let content: string;\n      let oldSig: string;\n      let newSig: string;\n      if (this.quill && this.quill.container) {\n        content = this.quill.container.innerHTML || '';\n        content = content.replace(/\\n\\n/g, '<br>');\n      }\n      if (this.quill && this.quill.container) {\n        if (this.oldMailbox && this.oldMailbox.signature) {\n          // update signature from old to new if signature is updated\n          oldSig = this.oldMailbox.signature.slice(0, Math.max(0, this.oldMailbox.signature.length));\n          if (this.selectedMailbox.signature) {\n            newSig = this.selectedMailbox.signature.slice(0, Math.max(0, this.selectedMailbox.signature.length));\n            content = content.replace(new RegExp(`${oldSig}$`), newSig);\n          } else {\n            content = content.replace(new RegExp(`${oldSig}$`), '');\n          }\n          this.quill.clipboard.dangerouslyPasteHTML(content);\n        } else if (this.selectedMailbox && this.selectedMailbox.signature) {\n          // add two lines and signature after message content with html format\n          newSig = this.selectedMailbox.signature.slice(0, Math.max(0, this.selectedMailbox.signature.length));\n          content = `<br><br>${newSig}` + content;\n          this.isSignatureAdded = true;\n          this.quill.clipboard.dangerouslyPasteHTML(content);\n        }\n      }\n    }\n  }\n\n  addDecryptedContent() {\n    if (!this.draftMail.is_html) {\n      this.mailData.content = this.decryptedContent;\n      return;\n    }\n    if (this.quill) {\n      this.quill.setText('');\n      this.quill.clipboard.dangerouslyPasteHTML(0, this.decryptedContent, 'silent');\n    }\n  }\n\n  openSelfDestructModal() {\n    if (this.selfDestruct.value) {\n      // reset to previous confirmed value\n      this.selfDestruct = {\n        ...this.selfDestruct,\n        ...this.dateTimeUtilService.getNgbDateTimeStructsFromDateTimeStr(this.selfDestruct.value),\n      };\n    } else {\n      this.resetSelfDestructValues();\n    }\n    this.selfDestructModalRef = this.modalService.open(this.selfDestructModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  openDelayedDeliveryModal() {\n    if (this.delayedDelivery.value) {\n      // reset to previous confirmed value\n      this.delayedDelivery = {\n        ...this.delayedDelivery,\n        ...this.dateTimeUtilService.getNgbDateTimeStructsFromDateTimeStr(this.delayedDelivery.value),\n      };\n    } else {\n      this.resetDelayedDeliveryValues();\n    }\n    this.delayedDeliveryModalRef = this.modalService.open(this.delayedDeliveryModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  openDeadManTimerModal() {\n    if (!this.deadManTimer.value) {\n      this.resetDeadManTimerValues();\n    }\n    this.deadManTimerModalRef = this.modalService.open(this.deadManTimerModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n  }\n\n  openEncryptionModal() {\n    this.encryptForm.controls.password.setValue(this.encryptionData.password || '');\n    this.encryptForm.controls.passwordHint.setValue(this.encryptionData.password_hint || '');\n    this.encryptionModalRef = this.modalService.open(this.encryptionModal, {\n      centered: true,\n      windowClass: 'modal-md users-action-modal',\n    });\n  }\n\n  closeEncryptionModal() {\n    this.encryptionModalRef.dismiss();\n  }\n\n  setSelfDestructValue() {\n    this.selfDestruct.error = null;\n    if (this.selfDestruct.date && this.selfDestruct.time) {\n      const dateTimeString = this.dateTimeUtilService.createDateTimeStrFromNgbDateTimeStruct(\n        this.selfDestruct.date,\n        this.selfDestruct.time,\n      );\n      this.selfDestructTimeString = dateTimeString;\n      if (this.dateTimeUtilService.isDateTimeInPast(dateTimeString)) {\n        this.selfDestruct.error = 'Selected datetime is in past.';\n      } else {\n        this.selfDestruct.value = dateTimeString;\n        this.closeSelfDestructModal();\n        this.clearDelayedDeliveryValue();\n        this.clearDeadManTimerValue();\n        this.valueChanged$.next(this.selfDestruct.value);\n      }\n    }\n  }\n\n  changeSelfDestruct() {\n    if (this.selfDestruct.date && this.selfDestruct.time) {\n      const dateTimeString = this.dateTimeUtilService.createDateTimeStrFromNgbDateTimeStruct(\n        this.selfDestruct.date,\n        this.selfDestruct.time,\n      );\n      this.selfDestructTimeString = dateTimeString;\n    }\n  }\n\n  clearSelfDestructValue() {\n    this.resetSelfDestructValues();\n    this.closeSelfDestructModal();\n    this.valueChanged$.next(this.selfDestruct.value);\n  }\n\n  setDelayedDeliveryValue() {\n    if (this.delayedDelivery.date && this.delayedDelivery.time) {\n      const dateTimeString = this.dateTimeUtilService.createDateTimeStrFromNgbDateTimeStruct(\n        this.delayedDelivery.date,\n        this.delayedDelivery.time,\n      );\n      this.delayDeliverTimeString = dateTimeString;\n      if (this.dateTimeUtilService.isDateTimeInPast(dateTimeString)) {\n        this.delayedDelivery.error = 'Selected datetime is in past.';\n      } else {\n        this.delayedDelivery.value = dateTimeString;\n        this.closeDelayedDeliveryModal();\n        this.clearSelfDestructValue();\n        this.clearDeadManTimerValue();\n        this.valueChanged$.next(this.delayedDelivery.value);\n      }\n    }\n  }\n\n  changeDelayDeliver() {\n    if (this.delayedDelivery.date && this.delayedDelivery.time) {\n      const dateTimeString = this.dateTimeUtilService.createDateTimeStrFromNgbDateTimeStruct(\n        this.delayedDelivery.date,\n        this.delayedDelivery.time,\n      );\n      this.delayDeliverTimeString = dateTimeString;\n    }\n  }\n\n  clearDelayedDeliveryValue() {\n    this.resetDelayedDeliveryValues();\n    this.closeDelayedDeliveryModal();\n    this.valueChanged$.next(this.delayedDelivery.value);\n  }\n\n  setDeadManTimerValue() {\n    this.deadManTimer.days =\n      !this.deadManTimer.days || isNaN(this.deadManTimer.days) || this.deadManTimer.days < 0\n        ? 0\n        : Math.floor(this.deadManTimer.days);\n    this.deadManTimer.hours =\n      !this.deadManTimer.hours || isNaN(this.deadManTimer.hours) || this.deadManTimer.hours < 0\n        ? 0\n        : Math.floor(this.deadManTimer.hours);\n    this.deadManTimer.value = this.deadManTimer.days * 24 + this.deadManTimer.hours;\n    this.closeDeadManTimerModal();\n    if (this.deadManTimer.value) {\n      this.clearSelfDestructValue();\n      this.clearDelayedDeliveryValue();\n    }\n    this.valueChanged$.next(this.deadManTimer.value);\n  }\n\n  clearDeadManTimerValue() {\n    this.resetDeadManTimerValues();\n    this.closeDeadManTimerModal();\n    this.valueChanged$.next(this.deadManTimer.value);\n  }\n\n  onSubmitEncryption() {\n    // Set password and expire date for message to non-ctemplar users\n    this.showEncryptFormErrors = true;\n    const { value } = this.encryptForm;\n    const expiryHours = value.hours + value.days * 24;\n    if (this.encryptForm.valid && expiryHours > 0 && expiryHours <= 120) {\n      this.encryptionData = {\n        expiryHours,\n        password: value.password,\n        passwordHint: value.passwordHint,\n      };\n      this.valueChanged$.next(true);\n      this.closeEncryptionModal();\n    }\n  }\n\n  clearEncryption() {\n    this.encryptForm.reset();\n    this.encryptionData = {};\n    this.valueChanged$.next(true);\n  }\n\n  hasData() {\n    // using >1 because there is always a blank line represented by \\n (quill docs)\n    return (\n      (!this.draftMail.is_html\n        ? this.mailData.content.length > 1 &&\n          this.mailData.content.replace(/(^[ \\t]*\\n)/gm, '') !== this.getPlainText(this.selectedMailbox.signature)\n        : this.quill.getLength() > 1 &&\n          this.quill.getText().replace(/(^[ \\t]*\\n)/gm, '') !== this.getPlainText(this.selectedMailbox.signature)) ||\n      this.mailData.receiver.length > 0 ||\n      this.mailData.cc.length > 0 ||\n      this.mailData.bcc.length > 0 ||\n      this.mailData.subject.length > 0\n    );\n  }\n\n  private embedImageInQuill(source: string, contentId?: string) {\n    if (source && this.quill) {\n      const selection = this.quill.getSelection();\n      const index = selection ? selection.index : this.quill.getLength();\n      if (contentId === undefined) {\n        this.quill.insertEmbed(index, 'image', source);\n      } else {\n        this.quill.insertEmbed(index, 'image', {\n          url: source,\n          content_id: contentId,\n        });\n      }\n      this.quill.setSelection(index + 1);\n    }\n  }\n\n  private updateEmail() {\n    this.inProgress = true;\n    this.setMailData(false, true);\n    this.openPgpService.encrypt(this.draftMail.mailbox, this.draftId, new SecureContent(this.draftMail));\n  }\n\n  /**\n   * Handle all compose contents and save to draft or send according to shouldSend and shouldSave\n   */\n  setMailData(shouldSend: boolean, shouldSave: boolean) {\n    if (!this.draftMail) {\n      this.draftMail = { is_html: null, content: null, folder: 'draft' };\n    }\n    this.draft.isSaving = shouldSave;\n    this.draftMail.mailbox = this.selectedMailbox ? this.selectedMailbox.id : null;\n    this.draftMail.sender = this.selectedMailbox.email;\n    this.draftMail.receiver = this.mailData.receiver.map((receiver: any) =>\n      EmailFormatPipe.transformToFormattedEmail(receiver.email, receiver.name),\n    );\n    this.draftMail.receiver = this.draftMail.receiver.filter(receiver =>\n      this.sharedService.isRFCStandardValidEmail(receiver),\n    );\n    this.draftMail.cc = this.mailData.cc.map((cc: any) => EmailFormatPipe.transformToFormattedEmail(cc.email, cc.name));\n    this.draftMail.cc = this.draftMail.cc.filter(receiver => this.sharedService.isRFCStandardValidEmail(receiver));\n    this.draftMail.bcc = this.mailData.bcc.map((bcc: any) =>\n      EmailFormatPipe.transformToFormattedEmail(bcc.email, bcc.name),\n    );\n    this.draftMail.bcc = this.draftMail.bcc.filter(receiver => this.sharedService.isRFCStandardValidEmail(receiver));\n    this.draftMail.subject = this.mailData.subject;\n    this.draftMail.destruct_date = this.selfDestruct.value || null;\n    this.draftMail.delayed_delivery = this.delayedDelivery.value || null;\n    this.draftMail.dead_man_duration = this.deadManTimer.value || null;\n    this.draftMail.is_subject_encrypted = true;\n    let tokens;\n    if (this.draftMail.is_html) {\n      // if html version, convert text to html format with html tags\n      if (this.editor.nativeElement.firstChild !== null) {\n        this.draftMail.content = this.editor.nativeElement.firstChild.innerHTML;\n        tokens = this.draftMail.content.split(`<p>${SummarySeparator}</p>`);\n      }\n      if (tokens && tokens.length > 1) {\n        tokens[0] += `</br><span class=\"gmail_quote ctemplar_quote\">`;\n        tokens[tokens.length - 1] += `</span>`;\n        this.draftMail.content = tokens.join(`<p>${SummarySeparator}</p>`);\n      }\n      if (!shouldSave) {\n        this.draftMail.content = this.draftMail.content.replace('class=\"ctemplar-signature\"', '');\n      }\n\n      if (shouldSend) {\n        this.draftMail.content = this.draftMail.content.replace(new RegExp('<p>', 'g'), '<div>');\n        this.draftMail.content = this.draftMail.content.replace(new RegExp('</p>', 'g'), '</div>');\n      }\n    } else {\n      // if text version, don't convert content\n      this.draftMail.content = this.mailData.content;\n    }\n    this.draftMail.send = shouldSend;\n\n    if (this.action) {\n      this.draftMail.last_action = this.action;\n      this.draftMail.last_action_parent_id = this.action_parent;\n    }\n\n    if (this.forwardAttachmentsMessageId) {\n      this.draftMail.forward_attachments_of_message = this.forwardAttachmentsMessageId;\n      this.forwardAttachmentsMessageId = null;\n    }\n    if (this.parentId) {\n      this.draftMail.parent = this.parentId;\n    }\n    if (this.encryptionData.password) {\n      this.draftMail.encryption = this.draftMail.encryption || new EncryptionNonCTemplar();\n      this.draftMail.encryption.password = this.encryptionData.password;\n      this.draftMail.encryption.password_hint = this.encryptionData.passwordHint;\n      this.draftMail.encryption.expiry_hours = this.encryptionData.expiryHours;\n    } else if (this.draftMail.encryption) {\n      this.draftMail.encryption = new EncryptionNonCTemplar();\n    }\n\n    this.checkInlineAttachments();\n    if (!shouldSend) {\n      this.store.dispatch(\n        new UpdateLocalDraft({\n          ...this.draft,\n          isMailDetailPage: this.isMailDetailPage,\n          shouldSave,\n          shouldSend,\n          draft: { ...this.draftMail },\n        }),\n      );\n    } else {\n      if (this.draftMail.subject !== this.subject) {\n        this.draftMail.parent = null;\n      }\n      this.store.dispatch(\n        new UpdatePGPDecryptedContent({\n          id: this.draftMail.id,\n          isPGPInProgress: false,\n          decryptedContent: { content: this.draftMail.content, subject: this.draftMail.subject },\n        }),\n      );\n    }\n  }\n\n  checkInlineAttachments() {\n    if (!this.draftMail.is_html) {\n      return;\n    }\n    const contents = this.quill.getContents().ops;\n    const currentAttachments: string[] = [];\n    contents.forEach((item: any) => {\n      if (item.insert && item.insert.image && item.insert.image.content_id) {\n        currentAttachments.push(item.insert.image.content_id);\n      }\n    });\n    // inline attachments don't have attachment id\n    this.inlineAttachmentContentIds = this.inlineAttachmentContentIds.filter(contentId => {\n      if (!currentAttachments.includes(contentId)) {\n        const attachmentToRemove = this.attachments.find(attachment => attachment.content_id === contentId);\n        if (attachmentToRemove) {\n          this.removeAttachment(attachmentToRemove);\n        }\n        return false;\n      }\n      return true;\n    });\n  }\n\n  private resetValues() {\n    this.unSubscribeAutoSave();\n    this.firstSaveSubscription.unsubscribe();\n    this.options = {};\n    this.attachments = [];\n    if (this.quill) {\n      this.quill.setText('');\n    }\n    this.resetMailData();\n    this.clearSelfDestructValue();\n    this.clearDelayedDeliveryValue();\n    this.clearDeadManTimerValue();\n  }\n\n  private closeSelfDestructModal() {\n    if (this.selfDestructModalRef) {\n      this.selfDestructModalRef.dismiss();\n    }\n  }\n\n  private closeDelayedDeliveryModal() {\n    if (this.delayedDeliveryModalRef) {\n      this.delayedDeliveryModalRef.dismiss();\n    }\n  }\n\n  private closeDeadManTimerModal() {\n    if (this.deadManTimerModalRef) {\n      this.deadManTimerModalRef.dismiss();\n    }\n  }\n\n  private unSubscribeAutoSave() {\n    if (this.autoSaveSubscription) {\n      this.autoSaveSubscription.unsubscribe();\n    }\n  }\n\n  private resetMailData() {\n    this.resetSelfDestructValues();\n    this.resetDelayedDeliveryValues();\n    this.resetDeadManTimerValues();\n    this.mailData = {\n      receiver: this.receivers\n        ? this.receivers.map(receiver => ({ display: receiver, value: receiver, email: receiver }))\n        : this.draftMail && this.draftMail.receiver\n        ? this.draftMail.receiver.map(receiver => ({ display: receiver, value: receiver, email: receiver }))\n        : [],\n      cc: this.cc\n        ? this.cc.map(address => ({ display: address, value: address, email: address }))\n        : this.draftMail && this.draftMail.cc\n        ? this.draftMail.cc.map(receiver => ({ display: receiver, value: receiver, email: receiver }))\n        : [],\n      bcc:\n        this.draftMail && this.draftMail.bcc\n          ? this.draftMail.bcc.map(receiver => ({ display: receiver, value: receiver, email: receiver }))\n          : [],\n      subject:\n        this.draftMail && this.draftMail.is_subject_encrypted\n          ? ''\n          : this.subject\n          ? this.subject\n          : this.draftMail\n          ? this.draftMail.subject\n          : '',\n      content: '',\n    };\n    if (this.mailData.cc.length > 0) {\n      this.options.isCcVisible = true;\n    }\n    if (this.mailData.bcc.length > 0) {\n      this.options.isBccVisible = true;\n    }\n    this.selfDestruct.value = this.draftMail ? this.draftMail.destruct_date : null;\n    this.deadManTimer.value = this.draftMail ? this.draftMail.dead_man_duration : null;\n    this.delayedDelivery.value = this.draftMail ? this.draftMail.delayed_delivery : null;\n    this.isLoaded = true;\n  }\n\n  private resetSelfDestructValues() {\n    this.selfDestruct.value = null;\n    this.selfDestruct.date = null;\n    this.selfDestruct.time = {\n      hour: 0,\n      minute: 0,\n      second: 0,\n    };\n    this.selfDestruct.meridian = true;\n    this.selfDestruct.error = null;\n  }\n\n  private resetDelayedDeliveryValues() {\n    this.delayedDelivery.value = null;\n    this.delayedDelivery.date = null;\n    this.delayedDelivery.time = {\n      hour: 0,\n      minute: 0,\n      second: 0,\n    };\n    this.delayedDelivery.meridian = true;\n    this.delayedDelivery.error = null;\n  }\n\n  private resetDeadManTimerValues() {\n    this.deadManTimer.value = null;\n    this.deadManTimer.days = 0;\n    this.deadManTimer.hours = 0;\n  }\n\n  onFilesDrop(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.onFilesSelected(event.dataTransfer.files);\n  }\n\n  onAddingReceiver(tag: any, data: any[]) {\n    // convert tag values to custom format with value, display, email, name\n    data.forEach(item => {\n      if (item.email) {\n        item.display = item.email;\n      } else if (item.value) {\n        // TODO\n        // should be updated for support group mailbox\n        // in that case, the below line should be updated for cast into ParsedGroup as well\n        const parsedEmail = parseEmail.parseOneAddress(item.value) as parseEmail.ParsedMailbox;\n        if (parsedEmail) {\n          item.name = parsedEmail.name || parsedEmail.local || '';\n          item.value = parsedEmail.address || item.value;\n          item.email = parsedEmail.address || item.value;\n        } else {\n          item.email = item.name = item.value;\n        }\n      }\n    });\n    if (tag.value && tag.value.split(',').length > 1) {\n      const emails: any[] = [];\n      data.forEach(item => {\n        if (item.value === tag.value) {\n          const tokens = tag.value.split(',');\n          emails.push(\n            ...tokens.map((token: string) => {\n              token = token.trim();\n              return { value: token, display: token, email: token, name: token };\n            }),\n          );\n        } else {\n          emails.push(item);\n        }\n      });\n      data.splice(0, this.mailData.receiver.length);\n      data.push(...emails);\n    }\n    const receiversForKey = data\n      .filter(\n        receiver =>\n          !this.usersKeys.has(receiver.email.toLowerCase()) ||\n          (!this.usersKeys.get(receiver.email.toLowerCase()).key &&\n            !this.usersKeys.get(receiver.email.toLowerCase()).isFetching),\n      )\n      .map(receiver => receiver.email.toLowerCase());\n\n    if (receiversForKey.length > 0) {\n      this.store.dispatch(\n        new GetUsersKeys({\n          emails: receiversForKey,\n        }),\n      );\n    }\n    this.valueChanged$.next(data);\n    this.anaylizeUsersKeysWithContact();\n    this.isSelfDestructionEnable();\n  }\n\n  // Analyze user key based on contact keys\n  anaylizeUsersKeysWithContact() {\n    if (!this.selectedMailbox) return;\n    // Set Encryption Type with contacts\n    const localReceivers: string[] = [\n      ...this.mailData.receiver.map((receiver: any) => receiver.email),\n      ...this.mailData.cc.map((cc: any) => cc.email),\n      ...this.mailData.bcc.map((bcc: any) => bcc.email),\n    ];\n    // Check Autocrypt status\n    this.autocryptInfo = this.autocryptService.decideAutocryptDefaultEncryption(\n      this.selectedMailbox,\n      localReceivers,\n      this.usersKeys,\n    );\n    if (localReceivers.length > 0) {\n      localReceivers.forEach(rec => {\n        const keyInfo = this.sharedService.parseUserKey(this.usersKeys, rec);\n        if (keyInfo.isExistKey) {\n          if (keyInfo.isCTemplarKey) {\n            this.receiverEncryptTypeMap = {\n              ...this.receiverEncryptTypeMap,\n              [rec]: ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_END_TO_END,\n            };\n          } else if (this.contactsState && this.contactsState.contacts.length > 0) {\n            // Checking with contacts\n            this.contactsState.contacts.forEach((contact: Contact) => {\n              if (contact.email === rec && contact.enabled_encryption) {\n                this.receiverEncryptTypeMap = {\n                  ...this.receiverEncryptTypeMap,\n                  [rec]: ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_PGP_MIME_INLINE,\n                };\n              }\n            });\n          }\n        } else {\n          this.receiverEncryptTypeMap = {\n            ...this.receiverEncryptTypeMap,\n            [rec]: ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_NONE,\n          };\n        }\n      });\n      if (!this.autocryptInfo.senderAutocryptEnabled) {\n        // Set Editor style with encryption type\n        // If all receiver is based on PGP Inline, Plain Text Editor\n        // If PGP Mime or null, Do Nothing\n        const isPGPInline = localReceivers.every(rec => {\n          if (this.usersKeys.has(rec) && !this.usersKeys.get(rec).isFetching) {\n            const contactInfo: Contact = this.contactsState.contacts.find((contact: Contact) => contact.email === rec);\n            if (contactInfo?.enabled_encryption && contactInfo?.encryption_type === PGPEncryptionType.PGP_INLINE) {\n              return true;\n            }\n          }\n          return false;\n        });\n        const isPGPMime = localReceivers.every(rec => {\n          if (this.usersKeys.has(rec) && !this.usersKeys.get(rec).isFetching) {\n            const contactInfo: Contact = this.contactsState.contacts.find((contact: Contact) => contact.email === rec);\n            if (contactInfo?.enabled_encryption && contactInfo?.encryption_type === PGPEncryptionType.PGP_MIME) {\n              return true;\n            }\n          }\n          return false;\n        });\n        this.pgpEncryptionType = isPGPInline\n          ? PGPEncryptionType.PGP_INLINE\n          : isPGPMime\n          ? PGPEncryptionType.PGP_MIME\n          : null;\n        if (this.pgpEncryptionType === PGPEncryptionType.PGP_INLINE && this.draftMail.is_html) {\n          this.setHtmlEditor(false);\n        } else if (this.pgpEncryptionType === PGPEncryptionType.PGP_MIME && !this.draftMail.is_html) {\n          this.setHtmlEditor(true);\n        }\n      }\n    }\n  }\n\n  // TODO should be moved to template\n  getUserKeyFetchingStatus(email: string): boolean {\n    return (\n      !this.usersKeys.has(email.toLowerCase()) ||\n      (this.usersKeys.has(email.toLowerCase()) && this.usersKeys.get(email.toLowerCase()).isFetching)\n    );\n  }\n}\n","import { Component, Input, SimpleChanges } from '@angular/core';\nimport {\n  AutocryptEncryptDetermine,\n  AutocryptPreferEncryptType,\n  ComposerEncryptionType,\n  UIRecommendationValue,\n} from '../../../../store/datatypes';\nimport { SharedService } from '../../../../store/services';\n\n@Component({\n  selector: 'app-composer-encryption-type-icon',\n  templateUrl: './composer-encryption-type-icon.component.html',\n  styleUrls: ['./composer-encryption-type-icon.component.scss'],\n})\nexport class ComposerEncryptionTypeIconComponent {\n  @Input() autocryptInfo: AutocryptEncryptDetermine;\n\n  @Input() isAutocrypt: boolean;\n\n  @Input() isAutocryptEncrypt: boolean;\n\n  @Input() encryptionTypeMap: any;\n\n  @Input() selectedEmail: string;\n\n  encryptionType: ComposerEncryptionType;\n\n  constructor(private sharedService: SharedService) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.isAutocrypt) {\n      /**\n       * Sender Icon\n       */\n      if (this.autocryptInfo && this.autocryptInfo.senderAutocryptEnabled) {\n        if (this.isAutocryptEncrypt) {\n          /**\n           * Autocrypt *** Encrypt *** is possible\n           */\n          if (!this.autocryptInfo.encryptTotally) {\n            /**\n             * NO Encrypt\n             */\n            this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT;\n          } else if (this.autocryptInfo.recommendationValue === UIRecommendationValue.DISCOURAGE) {\n            /**\n             * Encrypt, but Discourage\n             */\n            this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT_DISCOURAGE;\n          } else if (\n            this.autocryptInfo.recommendationValue === UIRecommendationValue.ENCRYPT ||\n            this.autocryptInfo.recommendationValue === UIRecommendationValue.AVAILABLE\n          ) {\n            /**\n             * Encrypt!!!\n             */\n            this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT;\n          }\n        } else if (this.autocryptInfo.senderPreferEncrypt === AutocryptPreferEncryptType.MUTUAL) {\n          /**\n           * Autocrypt Enabled and *** Mutual ***\n           */\n          this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_MUTUAL;\n        } else if (\n          !this.autocryptInfo.senderPreferEncrypt ||\n          this.autocryptInfo.senderPreferEncrypt === AutocryptPreferEncryptType.NOPREFERENCE\n        ) {\n          /**\n           * Autocrypt Enabled and *** Preference ***\n           */\n          this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NOPREERENCE;\n        } else {\n          this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_NONE;\n        }\n      } else {\n        this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_NONE;\n      }\n    } else if (this.selectedEmail && this.encryptionTypeMap && this.encryptionTypeMap[this.selectedEmail]) {\n      if (!this.sharedService.isRFCStandardValidEmail(this.selectedEmail)) {\n        this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_NONE;\n      } else {\n        /**\n         * Recipient Icon\n         */\n        if (this.encryptionTypeMap[this.selectedEmail] === ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_END_TO_END) {\n          /**\n           * If it is CTemplar user, don't check below and set as End to End\n           */\n          this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_END_TO_END;\n        } else if (this.autocryptInfo && this.autocryptInfo.senderAutocryptEnabled) {\n          /**\n           * Autocryp Enabled\n           * At this case, Autocrypt icon would be showed\n           */\n          if (\n            this.autocryptInfo.senderPreferEncrypt === AutocryptPreferEncryptType.MUTUAL &&\n            this.autocryptInfo.encryptTotally &&\n            (this.autocryptInfo.recommendationValue === UIRecommendationValue.AVAILABLE ||\n              this.autocryptInfo.recommendationValue === UIRecommendationValue.ENCRYPT)\n          ) {\n            /**\n             * Fully Autocrypt Enabled and Encrypted\n             */\n            this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT;\n          } else {\n            /**\n             * Autocrypt Enabled, but would be attached JUST Autocrypt Header\n             */\n            this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT;\n          }\n        } else {\n          this.encryptionType = this.encryptionTypeMap[this.selectedEmail];\n        }\n      }\n    } else {\n      this.encryptionType = ComposerEncryptionType.COMPOSER_ENCRYPTION_TYPE_NONE;\n    }\n  }\n}\n","<ng-container [ngSwitch]=\"encryptionType\">\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_PGP_MIME_INLINE'\"\n    class=\"fas fa-lock mr-1 pgp-mime-inline-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.pgp_encrypted_message' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_END_TO_END'\"\n    class=\"fas fa-lock mr-1\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.end_end_message' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NOPREERENCE'\"\n    class=\"fas fa-random mr-1 autocrypt-enabled-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.autocyprt_nopreference' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_MUTUAL'\"\n    class=\"fas fa-random mr-1 autocrypt-enabled-mutual-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.autocrypt_mutual' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT'\"\n    class=\"fas fa-lock mr-1 autocrypt-encrypt-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.autocrypt_encrypt' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT_DISCOURAGE'\"\n    class=\"fas fa-lock mr-1 autocrypt-encrypt-discourage-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.autocrypt_discourage' | translate\"\n    container=\"body\"\n  ></i>\n  <i\n    *ngSwitchCase=\"'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT'\"\n    class=\"fa fa-unlock mr-1 autocrypt-encrypt-discourage-icon\"\n    [ngbTooltip]=\"'encryption.composer_encryption_type.autocrypt_non_encrypt' | translate\"\n    container=\"body\"\n  ></i>\n</ng-container>\n","import { Component, Input, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\n\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\n\nimport { AppState, AutocryptEncryptDetermine, BlackList, Contact, WhiteList } from '../../../../store/datatypes';\nimport { Mailbox } from '../../../../store/models';\n\nimport { SharedService } from '../../../../store/services';\n\nimport { BlackListAdd, MoveToBlacklist, MoveToWhitelist } from '../../../../store/actions';\n\n@Component({\n  selector: 'app-receiver-email-chip',\n  templateUrl: './receiver-email-chip.component.html',\n  styleUrls: ['./receiver-email-chip.component.scss'],\n})\nexport class ReceiverEmailChipComponent {\n  @ViewChild('addUserContent') addUserContent: any;\n\n  @Input() composePopover = true;\n\n  @Input() email: string;\n\n  @Input() name = '';\n\n  @Input() contacts: Contact[];\n\n  @Input() isContactEncrypted: boolean;\n\n  @Input() mailboxes: Mailbox[] = [];\n\n  @Input() blacklist: BlackList[] = [];\n\n  @Input() whitelist: WhiteList[] = [];\n\n  @Input() autocryptInfo: AutocryptEncryptDetermine;\n\n  @Input() isAutocrypt?: boolean;\n\n  @Input() isAutocryptEncrypt?: boolean;\n\n  @Input() encryptionTypeMap: any;\n\n  selectedContact: Contact;\n\n  isMyMailbox = false;\n\n  isValidEmail = true;\n\n  myDisplayName: string;\n\n  /**\n   * This contact will be transferred to save contact component\n   */\n  passingContact: Contact;\n\n  isBlacklisted = false;\n\n  isWhitelisted = false;\n\n  constructor(private modalService: NgbModal, private sharedService: SharedService, private store: Store<AppState>) {}\n\n  ngOnChanges(): void {\n    this.selectedContact = this.contacts.find(contact => this.email === contact.email);\n    if (!this.composePopover && this.mailboxes.length > 0) {\n      this.mailboxes.forEach(mailbox => {\n        if (mailbox.email === this.email) {\n          this.isMyMailbox = true;\n          this.myDisplayName = mailbox.display_name ? mailbox.display_name : this.email;\n        }\n      });\n    }\n    this.isValidEmail = this.sharedService.isRFCStandardValidEmail(this.email);\n    this.isBlacklisted = false;\n    this.isWhitelisted = false;\n    if (this.blacklist.length > 0) {\n      this.isBlacklisted = this.blacklist.some(blacklistItem => blacklistItem.email === this.email);\n    }\n    if (this.whitelist.length > 0) {\n      this.isWhitelisted = this.whitelist.some(whitelistItem => whitelistItem.email === this.email);\n    }\n  }\n\n  onAddContact(popOver: any, addUserContent: TemplateRef<any>) {\n    this.passingContact = {\n      email: this.email,\n      name: this.email,\n    };\n    this.modalService.open(addUserContent, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n      beforeDismiss: () => {\n        return true;\n      },\n    });\n  }\n\n  onEditContact(popOver: any, addUserContent: TemplateRef<any>) {\n    this.passingContact = this.selectedContact;\n    this.modalService.open(addUserContent, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n      beforeDismiss: () => {\n        return true;\n      },\n    });\n  }\n\n  onAddBlacklist() {\n    this.store.dispatch(\n      new BlackListAdd({ email: this.email, name: this.name ? this.name : this.email.split('@')[0] }),\n    );\n  }\n\n  onMoveBlacklist() {\n    const whitelistedItem = this.whitelist.find(item => item.email === this.email);\n    if (whitelistedItem) {\n      this.store.dispatch(\n        new MoveToBlacklist({ id: whitelistedItem.id, name: whitelistedItem.name, email: whitelistedItem.email }),\n      );\n    }\n  }\n\n  onMoveWhitelist() {\n    const blacklistedItem = this.blacklist.find(item => item.email === this.email);\n    if (blacklistedItem) {\n      this.store.dispatch(\n        new MoveToWhitelist({ id: blacklistedItem.id, name: blacklistedItem.name, email: blacklistedItem.email }),\n      );\n    }\n  }\n\n  onClickBody(popOver: any) {\n    popOver.isOpen() ? popOver.close() : popOver.open();\n  }\n}\n","<ng-template #addUserContent let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"makeDonationModalLabel\">\n      <strong>{{ 'contacts.details' | translate }}</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <app-save-contact [selectedContact]=\"passingContact\" (userSaved)=\"d()\"></app-save-contact>\n    </div>\n  </div>\n</ng-template>\n\n<!-- Encryption Type Icon -->\n<app-composer-encryption-type-icon\n  *ngIf=\"composePopover\"\n  class=\"align-middle\"\n  [autocryptInfo]=\"autocryptInfo\"\n  [encryptionTypeMap]=\"encryptionTypeMap\"\n  [selectedEmail]=\"email\"\n></app-composer-encryption-type-icon>\n\n<!-- Popver Handler -->\n<i\n  *ngIf=\"composePopover\"\n  class=\"tag-chip-info icon icon-login align-middle ml-1 mt-0 d-inline-block\"\n  [ngClass]=\"{ 'error-message': !isValidEmail, 'font-size-1': !isValidEmail }\"\n  [ngbPopover]=\"popContent\"\n  #popOver=\"ngbPopover\"\n  container=\"body\"\n  popoverClass=\"receiver-email-chip-popover\"\n  placement=\"bottom-left\"\n  [openDelay]=\"300\"\n  triggers=\"manual\"\n  (click)=\"onClickBody(popOver); $event.stopPropagation(); $event.preventDefault()\"\n></i>\n\n<span\n  *ngIf=\"composePopover\"\n  class=\"text-truncate receiver-email\"\n  [ngClass]=\"{ 'error-message': !isValidEmail, 'font-size-1': !isValidEmail }\"\n>\n  {{ email | emailFormat: name:false:true }}\n</span>\n\n<span\n  *ngIf=\"!composePopover\"\n  class=\"text-truncate receiver-email\"\n  [ngbPopover]=\"popContent\"\n  #popOver=\"ngbPopover\"\n  container=\"body\"\n  popoverClass=\"receiver-email-chip-popover\"\n  placement=\"bottom-left\"\n  [openDelay]=\"500\"\n  triggers=\"manual\"\n  (click)=\"onClickBody(popOver); $event.stopPropagation(); $event.preventDefault()\"\n>\n  <a class=\"text-gray-dark text-muted\">\n    {{ email | emailFormat: name }}\n  </a>\n</span>\n\n<ng-template #popContent>\n  <!-- Popover Header -->\n  <div class=\"receiver-email-chip-popover-receiver-info\">\n    <div *ngIf=\"isValidEmail\" class=\"receiver-email-chip-popover-receiver-name\">\n      <i class=\"fas fa-user-circle mr-1\"></i>\n      <ng-container *ngIf=\"isMyMailbox; else contactInfo\">\n        {{ myDisplayName | emailFormat: '':false:true }}\n      </ng-container>\n      <ng-template #contactInfo>\n        {{ (selectedContact ? selectedContact.name : email) | emailFormat: '':false:true }}\n      </ng-template>\n    </div>\n    <div class=\"error-message\" *ngIf=\"!isValidEmail\">\n      {{ 'settings.compose.invalid_email_format' | translate }}\n    </div>\n    <div class=\"receiver-email-chip-popover-receiver-email\">\n      {{ email | emailFormat: '':false:true }}\n    </div>\n  </div>\n  <div class=\"receiver-email-chip-popover-receiver-action\" *ngIf=\"!isMyMailbox\">\n    <a\n      class=\"mr-2\"\n      *ngIf=\"!!selectedContact\"\n      (click)=\"onEditContact(popOver, addUserContent)\"\n      ngbTooltip=\"Edit Contact\"\n    >\n      <i class=\"fas fa-edit\"></i>\n    </a>\n    <a class=\"mr-2\" *ngIf=\"!selectedContact\" (click)=\"onAddContact(popOver, addUserContent)\" ngbTooltip=\"Add Contact\">\n      <i class=\"fas fa-plus-circle\"></i>\n    </a>\n    <ng-container *ngIf=\"isBlacklisted; then moveWhitelist\"></ng-container>\n    <ng-container *ngIf=\"isWhitelisted; then moveBlacklist\"></ng-container>\n    <ng-container *ngIf=\"!isBlacklisted && !isWhitelisted; then addBlacklist\"></ng-container>\n\n    <ng-template #moveWhitelist>\n      <a class=\"mr-1 text-right font-italic hover-text-decoration-underline\" (click)=\"onMoveWhitelist()\">\n        <span>Move to Whitelist</span>\n      </a>\n    </ng-template>\n    <ng-template #moveBlacklist>\n      <a class=\"mr-1 text-right font-italic hover-text-decoration-underline\" (click)=\"onMoveBlacklist()\">\n        <span>Move to Blacklist</span>\n      </a>\n    </ng-template>\n    <ng-template #addBlacklist>\n      <a class=\"mr-1 text-right font-italic hover-text-decoration-underline\" (click)=\"onAddBlacklist()\">\n        <span>Add to Blacklist</span>\n      </a>\n    </ng-template>\n  </div>\n</ng-template>\n","<app-loading [isLoading]=\"isloading\" [quote]=\"quote\"></app-loading>\n<aside\n  id=\"mailbox-sidebar\"\n  (clickOutside)=\"toggleMenu($event)\"\n  class=\"mailbox-sidebar is-sidebar-expandedx\"\n  role=\"complementary\"\n  [ngClass]=\"{ 'is-sidebar-expanded': isSidebarOpened }\"\n  (mouseover)=\"changeAsideExpand($event)\"\n  (mouseout)=\"changeAsideExpand($event)\"\n>\n  <div class=\"mailbox-sidebar-inner\" [class.sidebar-opened]=\"isSidebarOpened\">\n    <!-- CTemplar Logo Section -->\n    <div class=\"mailbox-brand\">\n      <button class=\"navbar-toggler hidden-sm-min\" role=\"button\" (click)=\"toggleMenu()\">\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggler-icon\"></span>\n        <span class=\"navbar-toggle-text\">{{ 'mail_sidebar.menu' | translate }}</span>\n      </button>\n      <figure class=\"navbar-brand-holder hidden-sm-max\">\n        <a class=\"navbar-brand ff-robotos text-uppercase\" routerLink=\"/mail\">\n          <img alt=\"CTemplar Logo\" class=\"navbar-brand-logo\" src=\"assets/images/logo.svg\" />\n          <strong class=\"navbar-brand-name\">ctemplar</strong>\n        </a>\n      </figure>\n      <div class=\"prime-account-content\">\n        <i class=\"icon icon-secure-shield\"></i>\n        <span class=\"prime-account-text\">{{ currentPlan }}</span>\n      </div>\n    </div>\n    <!-- Compose button -->\n    <div class=\"mail-compose-section display-unset hidden-xs-down\">\n      <button\n        class=\"btn btn-lg btn-primary mailbox-btn mailbox-compose-btn btn-xs-squared has-icon\"\n        role=\"button\"\n        (click)=\"openComposeMailDialog()\"\n      >\n        <i class=\"icon icon-plus text-white hidden-md-up\"></i>\n        <span class=\"mailbox-btn-text hidden-sm-down\">{{ 'common.compose' | translate }}</span>\n      </button>\n    </div>\n    <!-- Folders list section -->\n    <nav class=\"mailbox-sidebar-navbar\">\n      <ul class=\"mailbox-sidebar-nav folders-list\">\n        <!-- Inbox -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.INBOX\">\n          <a routerLink=\"/mail/inbox/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-inbox\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.inbox' | translate }}</span>\n            <ng-container *ngIf=\"mailState?.unreadMailsCount?.inbox > 0\">\n              <span class=\"badge\">{{ mailState?.unreadMailsCount?.inbox }}</span>\n            </ng-container>\n          </a>\n        </li>\n        <!-- Draft -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.DRAFT\">\n          <a routerLink=\"/mail/draft/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-draft\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.draft' | translate }}</span>\n            <span *ngIf=\"mailState?.unreadMailsCount?.draft\" class=\"badge\">\n              {{ mailState?.unreadMailsCount?.draft }}\n            </span>\n          </a>\n        </li>\n        <!-- Sent -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.SENT\">\n          <a routerLink=\"/mail/sent/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-paper-plane\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.sent' | translate }}</span>\n          </a>\n        </li>\n        <!-- Outbox -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.OUTBOX\">\n          <a routerLink=\"/mail/outbox/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <img alt=\"outbox\" class=\"icon mail-outbox\" src=\"assets/images/outbox.svg\" />\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.outbox' | translate }}</span>\n            <span class=\"badge outbox\">\n              <span\n                class=\"badge-counter badge-success\"\n                *ngIf=\"mailState?.unreadMailsCount?.outbox_delayed_delivery_counter > 0\"\n              >\n                {{ mailState?.unreadMailsCount?.outbox_delayed_delivery_counter }}\n              </span>\n              <span class=\"badge-counter badge-danger\" *ngIf=\"mailState?.unreadMailsCount?.outbox_dead_man_counter > 0\">\n                {{ mailState?.unreadMailsCount?.outbox_dead_man_counter }}\n              </span>\n            </span>\n          </a>\n        </li>\n        <!-- All emails -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.ALL_EMAILS\">\n          <a routerLink=\"/mail/allmails/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <img alt=\"all emails\" class=\"icon mail-allemails\" src=\"assets/images/all-emails.svg\" />\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.all_emails' | translate }}</span>\n          </a>\n        </li>\n        <!-- Unread -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.UNREAD\">\n          <a routerLink=\"/mail/allunreadmails/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <img alt=\"unread\" class=\"icon mail-unread\" src=\"assets/images/mail-unread.svg\" />\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.unread' | translate }}</span>\n            <ng-container *ngIf=\"mailState?.unreadMailsCount?.total_unread_count > 0\">\n              <span class=\"badge\">{{ mailState?.unreadMailsCount?.total_unread_count }}</span>\n            </ng-container>\n          </a>\n        </li>\n        <!-- Starred -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.STARRED\">\n          <a routerLink=\"/mail/starred/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-star\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.starred' | translate }}</span>\n            <ng-container *ngIf=\"starredCount > 0\">\n              <span class=\"badge\">{{ starredCount }}</span>\n            </ng-container>\n          </a>\n        </li>\n        <!-- Archive -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.ARCHIVE\">\n          <a routerLink=\"/mail/archive/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-archive\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.archive' | translate }}</span>\n          </a>\n        </li>\n        <!-- Spam -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.SPAM\">\n          <a routerLink=\"/mail/spam/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-warning\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.spam' | translate }}</span>\n            <span *ngIf=\"mailState?.unreadMailsCount?.spam\" class=\"badge\">\n              {{ mailState?.unreadMailsCount?.spam }}\n            </span>\n          </a>\n        </li>\n        <!-- Trash -->\n        <li class=\"mailbox-sidebar-nav-item\" [class.active]=\"currentFolder === mailFolderType.TRASH\">\n          <a routerLink=\"/mail/trash/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n            <i class=\"icon icon-garbage\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.trash' | translate }}</span>\n          </a>\n        </li>\n\n        <!-- Custom Folder -->\n        <li class=\"divider-item\"></li>\n        <li class=\"mailbox-sidebar-nav-item\">\n          <a class=\"mailbox-sidebar-nav-link\" (click)=\"createFolder()\">\n            <i class=\"icon icon-folder\"></i>\n            <span class=\"mailbox-sidebar-nav-label\">{{ 'mail_sidebar.add_folder' | translate }}</span>\n          </a>\n        </li>\n        <li\n          class=\"mailbox-sidebar-nav-item custom-folder\"\n          [class.active]=\"currentFolder === folder.name\"\n          *ngFor=\"let folder of customFolders | slice: 0:LIMIT; let i = index\"\n        >\n          <div>\n            <a routerLink=\"/mail/{{ folder.name }}/page/1\" class=\"mailbox-sidebar-nav-link\" (click)=\"toggleMenu()\">\n              <i class=\"folder-color-box icon\" [style.background]=\"folder.color\"></i>\n              <span class=\"mailbox-sidebar-nav-label\">\n                {{ folder.name }}\n              </span>\n              <span\n                class=\"badge badge-square badge-position badge-hover-action\"\n                *ngIf=\"mailState?.unreadMailsCount && mailState?.unreadMailsCount[folder.name] > 0\"\n                >{{ mailState?.unreadMailsCount[folder.name] }}</span\n              >\n              <div class=\"action\">\n                <a\n                  role=\"button\"\n                  [ngbTooltip]=\"'settings.edit_folder' | translate\"\n                  container=\"body\"\n                  (click)=\"editFolder(folder); $event.stopPropagation(); $event.preventDefault()\"\n                >\n                  <i class=\"icon icon-edit\"></i>\n                </a>\n                <a\n                  class=\"ml-2\"\n                  role=\"button\"\n                  [ngbTooltip]=\"'settings.delete_folder' | translate\"\n                  container=\"body\"\n                  (click)=\"showConfirmationModal(folder); $event.stopPropagation(); $event.preventDefault()\"\n                >\n                  <i class=\"icon icon-garbage\"></i>\n                </a>\n              </div>\n            </a>\n          </div>\n        </li>\n        <li class=\"mailbox-sidebar-nav-item\" *ngIf=\"customFolders.length > 3\">\n          <a (click)=\"toggleDisplayLimit(customFolders.length)\" class=\"mailbox-sidebar-nav-link\">\n            <i class=\"icon icon-more ml-1\"></i>\n            <span class=\"mailbox-sidebar-nav-label text-capitalize\">\n              {{\n                LIMIT === customFolders.length ? ('create_account.less' | translate) : ('mail_list.more' | translate)\n              }}\n            </span>\n          </a>\n        </li>\n      </ul>\n    </nav>\n    <!-- Sidebar footer -->\n    <div class=\"mailbox-sidebar-footer text-center mt-4 py-2\">\n      <div class=\"mailbox-sidebar-footer-text mb-0 mb-md-1 visible-in-sm\">\n        <span translate=\"mail_sidebar.used\"></span>\n        <div class=\"text-white mt-1\">{{ userState.settings?.used_storage | filesize }}</div>\n      </div>\n      <div class=\"mailbox-sidebar-footer-text hidden-in-sm\">\n        <span>{{ 'common.used_storage' | translate }}</span\n        >:<br />\n        {{ userState.settings?.used_storage | filesize }} <span>{{ 'settings.of' | translate }}</span>\n        {{ userState.settings.allocated_storage | filesize }}\n      </div>\n      <a\n        routerLink=\"/mail/settings/dashboard-and-plans\"\n        class=\"btn-link text-white hidden-in-sm\"\n        *ngIf=\"!userState.isPrime\"\n      >\n        <small>\n          <u>{{ 'common.upgrade_account' | translate }}</u>\n        </small>\n      </a>\n      <a href=\"{{ primaryWebsite }}/transparency-report-ctemplar/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <img alt=\"warranty-canary\" class=\"warranty-canary-image\" src=\"assets/icons/warranty-canary.png\" />\n      </a>\n    </div>\n  </div>\n</aside>\n\n<!-- Compose button to be used in small screens -->\n<div class=\"btn-xs-holder is-sticky hidden-sm-up\">\n  <button\n    class=\"btn btn-primary mailbox-btn mailbox-compose-btn btn-xs-rounded has-icon\"\n    role=\"button\"\n    placement=\"top\"\n    [ngbTooltip]=\"'common.compose' | translate\"\n    (click)=\"openComposeMailDialog()\"\n  >\n    <i class=\"icon icon-plus text-white\"></i>\n  </button>\n</div>\n\n<!-- Mail compose dialog container -->\n<div class=\"compose-mail-container\">\n  <ng-template #composeMailContainer></ng-template>\n</div>\n\n<!-- Confirm delete folder modal -->\n<ng-template #confirmationModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h3 class=\"modal-title w-100 text-dark\">\n      <strong [translate]=\"'contacts.delete.title'\">Confirm Delete</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n      <div class=\"form-group\">\n        <span [translate]=\"'settings.delete_folder_message'\">Are you sure, you want to delete folder </span>\n        <b>\"{{ selectedFolderForRemove?.name }}\"</b>?\n      </div>\n      <div class=\"form-group text-right mb-0\">\n        <button (click)=\"d()\" class=\"btn btn-secondary btn-sm mr-2\" role=\"button\">\n          <span [translate]=\"'common.cancel'\">Cancel</span>\n        </button>\n        <button (click)=\"deleteFolder()\" class=\"btn btn-danger btn-sm\" role=\"button\" [disabled]=\"userState?.inProgress\">\n          <span [translate]=\"'settings.delete'\">Delete</span>\n        </button>\n        <app-loading-spinner [showSpinner]=\"userState?.inProgress\"></app-loading-spinner>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- /.Confirm delete folder modal ends -->\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Inject,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { NgbDropdownConfig, NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { DOCUMENT } from '@angular/common';\nimport { ActivatedRoute, NavigationEnd, Params, Router } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { Title } from '@angular/platform-browser';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport {\n  AppState,\n  MailBoxesState,\n  MailState,\n  PlanType,\n  UserState,\n  NotificationPermission,\n} from '../../store/datatypes';\nimport { ComposeMailService } from '../../store/services/compose-mail.service';\nimport { Folder, Mail, Mailbox, MailFolderType } from '../../store/models/mail.model';\nimport { BreakpointsService } from '../../store/services/breakpoint.service';\nimport {\n  GetMails,\n  GetMailsSuccess,\n  GetUnreadMailsCount,\n  GetUnreadMailsCountSuccess,\n  ReadMailSuccess,\n  SettingsUpdateUsedStorage,\n  StarredFolderCountUpdate,\n  SnackErrorPush,\n  DeleteFolder,\n} from '../../store/actions';\nimport { WebsocketService } from '../../shared/services/websocket.service';\nimport { ThemeToggleService } from '../../shared/services/theme-toggle-service';\nimport { WebSocketState } from '../../store';\nimport { PushNotificationOptions, PushNotificationService } from '../../shared/services/push-notification.service';\nimport { SharedService } from '../../store/services';\nimport { PRIMARY_WEBSITE } from '../../shared/config';\nimport { QuoteType } from '../../store/quotes';\n\nimport { CreateFolderComponent } from '../dialogs/create-folder/create-folder.component';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail-sidebar',\n  templateUrl: './mail-sidebar.component.html',\n  styleUrls: ['./mail-sidebar.component.scss'],\n})\nexport class MailSidebarComponent implements OnInit, AfterViewInit, OnDestroy {\n  LIMIT = 3; // limit of displayed custom folder's count\n\n  EMAIL_LIMIT = 20; // limit to display emails\n\n  starredCount = 0; // starred folder count\n  // Public property of boolean type set false by default\n  public isComposeVisible = false;\n\n  public userState: UserState;\n\n  mailState: MailState;\n\n  mailFolderType = MailFolderType;\n\n  currentRoute: string;\n\n  isloading = true;\n\n  quote: QuoteType;\n\n  isMenuOpened: boolean;\n\n  notificationsPermission: string;\n\n  notificationPermissionType = NotificationPermission;\n\n  isSidebarOpened: boolean;\n\n  customFolders: Folder[] = [];\n\n  currentMailbox: Mailbox;\n\n  @ViewChild('input') input: ElementRef;\n\n  currentPlan: PlanType;\n\n  currentFolder: MailFolderType;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  private forceLightMode: boolean;\n\n  @ViewChild('confirmationModal') confirmationModal: any;\n\n  confirmModalRef: NgbModalRef;\n\n  selectedFolderForRemove: Folder;\n\n  constructor(\n    private store: Store<AppState>,\n    config: NgbDropdownConfig,\n    private breakpointsService: BreakpointsService,\n    private composeMailService: ComposeMailService,\n    private router: Router,\n    private websocketService: WebsocketService,\n    private pushNotificationService: PushNotificationService,\n    private titleService: Title,\n    private activatedRoute: ActivatedRoute,\n    @Inject(DOCUMENT) private document: Document,\n    private sharedService: SharedService,\n    private cdr: ChangeDetectorRef,\n    private themeToggleService: ThemeToggleService,\n    private modalService: NgbModal,\n  ) {\n    // customize default values of dropdowns used by this component tree\n    config.autoClose = 'outside';\n    const nextPage = localStorage.getItem('nextPage');\n    if (nextPage) {\n      localStorage.setItem('nextPage', '');\n      this.router.navigateByUrl(nextPage);\n    }\n    this.currentRoute = router.url;\n\n    this.store.dispatch(new GetUnreadMailsCount());\n    this.websocketService.connect();\n\n    /**\n     * Listen to web sockets events to get new emails from server\n     */\n    this.store\n      .select(state => state.webSocket)\n      .pipe(untilDestroyed(this))\n      .subscribe((webSocketState: WebSocketState) => {\n        if (webSocketState.message && !webSocketState.isClosed) {\n          if (webSocketState.message.mail) {\n            this.store.dispatch(\n              new GetMailsSuccess({\n                limit: this.EMAIL_LIMIT,\n                offset: 0,\n                folder: webSocketState.message.folder,\n                folders: webSocketState.message.folders,\n                read: false,\n                mails: [webSocketState.message.mail],\n                total_mail_count: webSocketState.message.total_count,\n                is_from_socket: true,\n              }),\n            );\n            if (\n              webSocketState.message.folder !== MailFolderType.SPAM &&\n              this.notificationsPermission === this.notificationPermissionType.GRANTED\n            ) {\n              this.showNotification(webSocketState.message.mail, webSocketState.message.folder);\n            }\n            this.updateUnreadCount(webSocketState);\n          } else if (webSocketState.message.is_outbox_mail_sent) {\n            this.store.dispatch(\n              new GetUnreadMailsCountSuccess({ ...webSocketState.message.unread_count, updateUnreadCount: true }),\n            );\n            if (this.mailState.currentFolder === MailFolderType.OUTBOX) {\n              this.store.dispatch(new GetMails({ limit: this.LIMIT, offset: 0, folder: MailFolderType.OUTBOX }));\n            }\n          } else if (webSocketState.message.hasOwnProperty('used_storage')) {\n            this.store.dispatch(new SettingsUpdateUsedStorage(webSocketState.message));\n          } else if (webSocketState.message.hasOwnProperty('starred_count')) {\n            this.store.dispatch(new StarredFolderCountUpdate(webSocketState.message));\n          } else if (webSocketState.message.marked_as_read !== null) {\n            this.updateUnreadCount(webSocketState);\n            this.store.dispatch(\n              new ReadMailSuccess({\n                ids: webSocketState.message.ids.join(','),\n                read: webSocketState.message.marked_as_read,\n              }),\n            );\n          }\n        }\n      });\n  }\n\n  ngOnInit() {\n    this.quote = { content: 'Loading your settings...', author: '' };\n    if (this.pushNotificationService.isDefault()) {\n      setTimeout(() => {\n        this.pushNotificationService.requestPermission();\n      }, 3000);\n    }\n    if ('Notification' in window) {\n      this.notificationsPermission = Notification.permission;\n    }\n    /**\n     * Set state variables from user's settings.\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        this.userState = user;\n        this.currentPlan = user.settings.plan_type || PlanType.FREE;\n        this.EMAIL_LIMIT = this.userState.settings.emails_per_page ? this.userState.settings.emails_per_page : 20;\n        this.customFolders = user.customFolders;\n        if (this.breakpointsService.isSM() || this.breakpointsService.isXS()) {\n          this.LIMIT = this.customFolders.length;\n        }\n        this.handleCustomCss(user.settings.custom_css);\n        if (user.settings) {\n          setTimeout(() => {\n            this.isloading = false;\n          }, 1000);\n        }\n      });\n\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailboxes: MailBoxesState) => {\n        this.currentMailbox = mailboxes.currentMailbox;\n      });\n\n    this.store\n      .select(state => state.mail)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailState: MailState) => {\n        this.mailState = mailState;\n        this.starredCount = this.mailState.starredFolderCount ? this.mailState.starredFolderCount : 0;\n        this.currentFolder = mailState.currentFolder;\n        this.updateTitle();\n      });\n    /**\n     * Update Title on contacts or settings page\n     */\n    this.router.events\n      .pipe(\n        untilDestroyed(this),\n        filter(event => event instanceof NavigationEnd),\n      )\n      .subscribe((event: NavigationEnd) => {\n        this.currentRoute = event.url;\n        if (event.url === '/mail/contacts') {\n          this.updateTitle(`${this.capitalize(event.url.split('/mail/')[1])} - CTemplar: Armored Email`);\n        } else if (event.url.includes('/mail/settings/')) {\n          this.updateTitle(`Settings - CTemplar: Armored Email`);\n        }\n      });\n\n    this.activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe((parameters: Params) => {\n      this.forceLightMode = parameters.lightMode;\n      if (this.forceLightMode) {\n        this.themeToggleService.forceLightModeTheme();\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.cdr.detectChanges();\n  }\n\n  private updateUnreadCount(webSocketState: WebSocketState) {\n    this.store.dispatch(\n      new GetUnreadMailsCountSuccess({ ...webSocketState.message.unread_count, updateUnreadCount: true }),\n    );\n  }\n\n  updateTitle(title: string = null) {\n    // Set tab title\n    if (!title) {\n      title = `${this.mailState.currentFolder ? this.capitalize(this.mailState.currentFolder) : ''} `;\n      if (\n        this.mailState.currentFolder &&\n        this.mailState.unreadMailsCount[this.mailState.currentFolder] &&\n        (this.mailState.currentFolder === 'inbox' ||\n          this.customFolders.some(folder => this.mailState.currentFolder === folder.name))\n      ) {\n        title += `(${this.mailState.unreadMailsCount[this.mailState.currentFolder]}) - `;\n      } else if (this.mailState.currentFolder) {\n        title += ' - ';\n      }\n      title += 'CTemplar: Armored Email';\n    }\n    this.titleService.setTitle(title);\n  }\n\n  capitalize(s: string) {\n    if (typeof s !== 'string') {\n      return '';\n    }\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  handleCustomCss(customCss: string) {\n    document.querySelector('#ctemplar-custom-css').innerHTML = customCss;\n  }\n\n  /**\n   * @description\n   * Prime Users - Can create as many folders as they want\n   * Free Users - Only allow a maximum of 5 folders per account\n   */\n  // == Open NgbModal\n  createFolder() {\n    this.sharedService.openCreateFolderDialog(this.userState.isPrime, this.customFolders);\n  }\n\n  // == Show mail compose modal\n  openComposeMailDialog() {\n    this.composeMailService.openComposeMailDialog({ isFullScreen: this.userState.settings.is_composer_full_screen });\n  }\n\n  // Toggle between display entire custom folders or limited count of folders\n  toggleDisplayLimit(totalItems: number) {\n    if (this.LIMIT === totalItems) {\n      this.LIMIT = 3;\n    } else {\n      this.LIMIT = totalItems;\n    }\n  }\n\n  // Toggle menu according to screen size\n  toggleMenu(event?: any) {\n    if (this.breakpointsService.isXS()) {\n      if (this.isMenuOpened) {\n        this.document.body.classList.remove('menu-open');\n        this.isMenuOpened = false;\n      }\n      if (this.document.body.classList.contains('menu-open')) {\n        this.isMenuOpened = true;\n      }\n    } else if (this.breakpointsService.isMD()) {\n      if (event) {\n        this.isSidebarOpened = false;\n      } else {\n        this.isSidebarOpened = !this.isSidebarOpened;\n      }\n    }\n  }\n\n  changeAsideExpand(event: any) {\n    if (this.breakpointsService.isSM()) {\n      this.isSidebarOpened = event.type === 'mouseover' ? true : false;\n    }\n  }\n\n  showNotification(mail: Mail, folder: string) {\n    const title = mail.sender_display_name ? mail.sender_display_name : mail.sender_display.name;\n    const options = new PushNotificationOptions();\n    options.body = 'You have received a new email';\n    options.icon = 'https://mail.ctemplar.com/assets/images/media-kit/mediakit-logo4.png';\n\n    this.pushNotificationService.create(title, options).subscribe(\n      (notif: any) => {\n        if (notif.event.type === 'click') {\n          notif.notification.close();\n          window.open(`/mail/${folder}/page/1/message/${mail.id}`, '_blank');\n        }\n      },\n      (error: any) => {\n        this.store.dispatch(new SnackErrorPush({ message: 'Failed to send push notification.' }));\n      },\n    );\n  }\n\n  /**\n   * @description\n   */\n  // == Open NgbModal\n  editFolder(folder: Folder) {\n    if (folder) {\n      const options: any = {\n        centered: true,\n        windowClass: 'modal-sm mailbox-modal create-folder-modal',\n      };\n      const component = this.modalService.open(CreateFolderComponent, options).componentInstance;\n      component.folder = folder;\n      component.edit = true;\n    }\n  }\n\n  showConfirmationModal(folder: Folder) {\n    this.confirmModalRef = this.modalService.open(this.confirmationModal, {\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    });\n    this.selectedFolderForRemove = folder;\n  }\n\n  deleteFolder() {\n    this.store.dispatch(new DeleteFolder(this.selectedFolderForRemove));\n    setTimeout(() => {\n      this.confirmModalRef.dismiss();\n    }, 1000);\n  }\n\n  ngOnDestroy(): void {\n    this.titleService.setTitle('CTemplar: Armored Email');\n  }\n}\n","<div class=\"mailbox-content-outer\">\n  <app-mail-sidebar></app-mail-sidebar>\n  <div class=\"banner row ml-lg-5 -align-center\" *ngIf=\"autoresponder_status\">\n    <p>\n      <span>{{ 'settings.autoresponder_active' | translate }}</span> &nbsp;\n      <a (click)=\"endAutoResponder()\">{{ 'settings.end_now' | translate }}</a\n      >&nbsp;-\n      <a [routerLink]=\"'./settings/forwarding-and-auto-responder'\">{{ 'mail_header.settings' | translate }}</a>\n    </p>\n  </div>\n\n  <div class=\"banner row ml-lg-5\" *ngIf=\"notificationMessage && !autoresponder_status && !hideNotification\">\n    <div class=\"col-11 mt-1\">\n      <p [innerHTML]=\"notificationMessage\"></p>\n    </div>\n    <div>\n      <a type=\"button\" class=\"close font-20px\" aria-label=\"Close\" (click)=\"hideNotification = !hideNotification\">\n        <span aria-hidden=\"true\">&times;</span>\n      </a>\n    </div>\n  </div>\n  <div class=\"mailbox-main-content\">\n    <app-mail-header></app-mail-header>\n    <router-outlet></router-outlet>\n  </div>\n  <!-- Mail compose dialog container -->\n  <div class=\"compose-mail-container\">\n    <ng-template #composeMailContainer></ng-template>\n  </div>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation,\n  HostListener,\n} from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { formatDate } from '@angular/common';\nimport { Router } from '@angular/router';\nimport * as Sentry from '@sentry/browser';\n\nimport {\n  AccountDetailsGet,\n  BlackListGet,\n  GetDomains,\n  GetDomainsSuccess,\n  GetFilters,\n  GetInvoices,\n  GetMailboxes,\n  GetNotification,\n  SaveAutoResponder,\n  WhiteListGet,\n  CardGet,\n  ContactsGet,\n  FetchMailboxKeys,\n} from '../store/actions';\nimport { TimezoneGet } from '../store/actions/timezone.action';\nimport { AppState, AutoResponder, UserState } from '../store/datatypes';\nimport { SharedService } from '../store/services';\nimport { ComposeMailService } from '../store/services/compose-mail.service';\nimport { GetOrganizationUsers } from '../store/organization.store';\nimport { SENTRY_DSN } from '../shared/config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-mail',\n  templateUrl: './mail.component.html',\n  styleUrls: ['./mail.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class MailComponent implements OnDestroy, OnInit, AfterViewInit {\n  @ViewChild('input') input: ElementRef;\n\n  @ViewChild('composeMailContainer', { read: ViewContainerRef }) composeMailContainer: ViewContainerRef;\n\n  private isLoadedData: boolean;\n\n  autoresponder: AutoResponder = {};\n\n  autoresponder_status = false;\n\n  currentDate: string;\n\n  canLoadNotification = true;\n\n  hideNotification: boolean;\n\n  notificationMessage: string;\n\n  constructor(\n    private store: Store<AppState>,\n    private sharedService: SharedService,\n    private composeMailService: ComposeMailService,\n    private router: Router,\n    private cdr: ChangeDetectorRef,\n  ) {\n    this.currentDate = formatDate(new Date(), 'yyyy-MM-dd', 'en');\n  }\n\n  ngOnInit() {\n    this.store.dispatch(new AccountDetailsGet());\n    /**\n     * Get user's state from store\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        if (userState.isLoaded && !this.isLoadedData) {\n          // Initialize Sentry according to user's setting after login\n          if (userState.settings.is_enable_report_bugs) {\n            Sentry.init({\n              dsn: SENTRY_DSN,\n              enabled: true,\n            });\n          }\n          this.isLoadedData = true;\n          this.store.dispatch(new GetMailboxes());\n          this.store.dispatch(new TimezoneGet());\n\n          setTimeout(() => {\n            this.store.dispatch(new GetFilters());\n            this.store.dispatch(new WhiteListGet());\n            this.store.dispatch(new BlackListGet());\n            this.store.dispatch(new GetInvoices());\n            this.store.dispatch(new CardGet());\n            this.store.dispatch(new ContactsGet());\n          }, 500);\n\n          if (userState.isPrime) {\n            setTimeout(() => {\n              this.store.dispatch(new GetDomains());\n              this.store.dispatch(new GetOrganizationUsers());\n            }, 1000);\n          } else {\n            this.store.dispatch(new GetDomainsSuccess([]));\n          }\n        }\n        if (userState.autoresponder) {\n          this.autoresponder = userState.autoresponder;\n          if (\n            this.autoresponder.autoresponder_active ||\n            (this.autoresponder.vacationautoresponder_active &&\n              this.autoresponder.vacationautoresponder_message &&\n              this.autoresponder.start_date &&\n              this.autoresponder.end_date &&\n              this.currentDate >= this.autoresponder.start_date)\n          ) {\n            this.autoresponder_status = true;\n          } else {\n            this.autoresponder_status = false;\n          }\n        }\n        if (userState.has_notification && this.canLoadNotification) {\n          this.store.dispatch(new GetNotification());\n          this.canLoadNotification = false;\n        }\n        if (userState.notifications) {\n          this.notificationMessage = userState.notifications[0].message;\n        }\n      });\n\n    this.sharedService.hideFooter.emit(true);\n    this.sharedService.hideHeader.emit(true);\n    this.sharedService.hideEntireFooter.emit(true);\n    this.sharedService.isMail.emit(true);\n    this.composeMailService.getWindowWidth(window.innerWidth);\n  }\n\n  // get window width as real time when change screen's size\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    this.composeMailService.getWindowWidth(window.innerWidth);\n  }\n\n  endAutoResponder() {\n    this.autoresponder.autoresponder_active = false;\n    this.autoresponder.vacationautoresponder_active = false;\n    this.store.dispatch(new SaveAutoResponder(this.autoresponder));\n    this.autoresponder_status = false;\n  }\n\n  ngAfterViewInit() {\n    this.composeMailService.initComposeMailContainer(this.composeMailContainer);\n    this.cdr.detectChanges();\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideFooter.emit(false);\n    this.sharedService.hideHeader.emit(false);\n    this.sharedService.hideEntireFooter.emit(false);\n    this.sharedService.isMail.emit(false);\n    this.composeMailService.destroyAllComposeMailDialogs();\n  }\n\n  navigateToPage(path: string) {\n    this.router.navigateByUrl(path);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatStepperModule } from '@angular/material/stepper';\nimport { NgbModalModule, NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { QuillModule } from 'ngx-quill';\n\nimport { SharedModule } from '../shared/shared.module';\nimport { ComposeMailService } from '../store/services/compose-mail.service';\nimport { MailSettingsService } from '../store/services/mail-settings.service';\nimport { PushNotificationService } from '../shared/services/push-notification.service';\nimport { WebsocketService } from '../shared/services/websocket.service';\n\nimport { AddressesSignatureComponent } from './mail-settings/addresses-signature/addresses-signature.component';\nimport { ComposeMailComponent } from './mail-sidebar/compose-mail/compose-mail.component';\nimport { ComposeMailDialogComponent } from './mail-sidebar/compose-mail-dialog/compose-mail-dialog.component';\nimport { CustomDomainsComponent } from './mail-settings/custom-domains/custom-domains.component';\nimport { FoldersComponent } from './mail-settings/folders/folders.component';\nimport { GenericFolderComponent } from './mail-list/mail-folder/generic-folder/generic-folder.component';\nimport { InviteCodesComponent } from './mail-settings/invite-codes/invite-codes.component';\nimport { MailAutoresponderComponent } from './mail-settings/mail-autoresponder/mail-autoresponder.component';\nimport { MailComponent } from './mail.component';\nimport { MailContactComponent } from './mail-contact/mail-contact.component';\nimport { MailDetailComponent } from './mail-detail/mail-detail.component';\nimport { MailFiltersComponent } from './mail-settings/mail-filters/mail-filters.component';\nimport { MailFooterComponent } from './mail-footer/mail-footer.component';\nimport { MailForwardingComponent } from './mail-settings/mail-forwarding/mail-forwarding.component';\nimport { MailHeaderComponent } from './mail-header/mail-header.component';\nimport { MailListComponent } from './mail-list/mail-list.component';\nimport { MailSettingsComponent } from './mail-settings/mail-settings.component';\nimport { MailSidebarComponent } from './mail-sidebar/mail-sidebar.component';\nimport { OrganizationUsersComponent } from './mail-settings/organization/organization-users/organization-users.component';\nimport { SaveContactComponent } from './mail-contact/save-contact/save-contact.component';\nimport { SaveListContactComponent } from './mail-settings/save-list-contact/save-list-contact.component';\nimport { SecurityComponent } from './mail-settings/security/security.component';\nimport { MailRoutingModule } from './mail-routing.module';\nimport { MailDetailDecryptionErrorComponent } from './mail-detail/mail-detail-decryption-error/mail-detail-decryption-error.component';\nimport { MailDetailEncryptionTypeIconComponent } from './mail-detail/mail-detail-encryption-type-icon/mail-detail-encryption-type-icon.component';\nimport { ComposerEncryptionTypeIconComponent } from './mail-sidebar/compose-mail/composer-encryption-type-icon/composer-encryption-type-icon.component';\nimport { ReceiverEmailChipComponent } from './mail-sidebar/compose-mail/receiver-email-chip/receiver-email-chip.component';\nimport { ImportPrivateKeyComponent } from './dialogs/import-private-key/import-private-key.component';\n\n@NgModule({\n  entryComponents: [ComposeMailDialogComponent],\n  declarations: [\n    AddressesSignatureComponent,\n    ComposeMailComponent,\n    ComposeMailDialogComponent,\n    CustomDomainsComponent,\n    FoldersComponent,\n    GenericFolderComponent,\n    InviteCodesComponent,\n    MailAutoresponderComponent,\n    MailComponent,\n    MailContactComponent,\n    MailDetailComponent,\n    MailFiltersComponent,\n    MailFooterComponent,\n    MailForwardingComponent,\n    MailHeaderComponent,\n    MailListComponent,\n    MailSettingsComponent,\n    MailSidebarComponent,\n    OrganizationUsersComponent,\n    SaveContactComponent,\n    SaveListContactComponent,\n    SecurityComponent,\n    MailDetailDecryptionErrorComponent,\n    MailDetailEncryptionTypeIconComponent,\n    ComposerEncryptionTypeIconComponent,\n    ReceiverEmailChipComponent,\n    ImportPrivateKeyComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MailRoutingModule,\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatCheckboxModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatStepperModule,\n    NgbModalModule,\n    NgbModule,\n    DragDropModule,\n    QuillModule.forRoot(),\n    ReactiveFormsModule,\n    SharedModule,\n  ],\n  exports: [MailFooterComponent],\n  providers: [MailSettingsService, ComposeMailService, WebsocketService, PushNotificationService],\n})\nexport class MailModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../store/datatypes';\nimport { SnackErrorPush } from '../../store/actions';\nimport { DynamicScriptLoaderService } from '../../shared/services/dynamic-script-loader.service';\n\n@Component({\n  selector: 'app-pages-donate',\n  templateUrl: './pages-donate.component.html',\n  styleUrls: ['./pages-donate.component.scss'],\n})\nexport class PagesDonateComponent implements OnInit {\n  constructor(private dynamicScriptLoader: DynamicScriptLoaderService, private store: Store<AppState>) {}\n\n  ngOnInit() {\n    this.loadStripeScripts();\n  }\n\n  private loadStripeScripts() {\n    this.dynamicScriptLoader\n      .load('stripe')\n      .then(data => {\n        this.dynamicScriptLoader\n          .load('stripe-key')\n          .then(() => {\n            // Stripe Loaded Successfully\n          })\n          .catch(() => {});\n      })\n      .catch(() =>\n        this.store.dispatch(new SnackErrorPush({ message: 'Failed to load the payment processing gateway.' })),\n      );\n  }\n}\n","<!-- PAGE INTRO SECTION -->\n<section class=\"l-block l-block-text bg-white text-center gap-p-eq\">\n  <div class=\"container container-sm\">\n    <header class=\"l-block-header position-relative\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 px-sm-5 px-md-0\">\n          <h1 class=\"l-block-title text-uppercase text-secondary\">\n            <strong>Donate</strong>\n          </h1>\n          <h2 class=\"text-dark mb-3 pb-1\">\n            <strong>Your Support Makes Us Stronger</strong>\n          </h2>\n          <h4 class=\"l-block-subtitle mb-0 text-dark fw-light\">\n            Your donation allows us to strengthen our platform and further develop CTemplar as free and open source\n            software. Ongoing support from the user community is what makes us able to continue providing CTemplar to\n            security conscience people throughout the world.\n          </h4>\n        </div>\n      </div>\n    </header>\n    <div class=\"l-block-body px-xs\">\n      <div class=\"l-content-holder donate-content-holder mx-auto mt-4 mt-sm-5\">\n        <!-- Render Payment Options -->\n        <router-outlet></router-outlet>\n\n        <div class=\"text-holder pt-2 pt-sm-0 mt-4 mt-sm-6 mt-md-7\">\n          <h2 class=\"text-secondary mb-0\"><strong>Thank you</strong> for your support!</h2>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- /.Site container ends -->\n</section>\n<!-- /.PAGE INTRO SECTION ENDS -->\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-payment-options',\n  templateUrl: './payment-options.component.html',\n  styleUrls: ['./payment-options.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentOptionsComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"row\">\n  <div class=\"col-sm-6 mb-4 mb-sm-0\">\n    <a class=\"v-card square-card bg-faded has-border br-4\" routerLink=\"/donate/stripe\">\n      <div class=\"square-card-content\">\n        <figure>\n          <img alt=\"Donate via CREDIT/DEBIT Card\" class=\"img\" src=\"assets/images/donate/donate-by-card.png\" />\n        </figure>\n      </div>\n      <div class=\"square-card-footer\">\n        <div class=\"donate-text text-secondary text-uppercase\">\n          <strong>Donate via CREDIT/DEBIT Card</strong>\n        </div>\n      </div>\n    </a>\n  </div>\n  <div class=\"col-sm-6\">\n    <a class=\"v-card square-card bg-faded has-border br-4\" routerLink=\"/donate/bitcoin\">\n      <div class=\"square-card-content\">\n        <figure>\n          <img alt=\"Donate via bitcoin\" class=\"img\" src=\"assets/images/donate/bitcoin.png\" />\n        </figure>\n      </div>\n      <div class=\"square-card-footer\">\n        <div class=\"donate-text text-secondary text-uppercase\">\n          <strong>Donate via bitcoin</strong>\n        </div>\n      </div>\n    </a>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { BitcoinFormComponent } from '../shared/components/bitcoin-form/bitcoin-form.component';\nimport { PricingPlansComponent } from '../shared/components/pricing-plans/pricing-plans.component';\nimport { StripeFormComponent } from '../shared/components/stripe-form/stripe-form.component';\n\nimport { PagesDonateComponent } from './pages-donate/pages-donate.component';\nimport { PaymentOptionsComponent } from './pages-donate/payment-options/payment-options.component';\n\nconst routes: Routes = [\n  {\n    path: 'donate',\n    component: PagesDonateComponent,\n    children: [\n      { path: '', component: PaymentOptionsComponent },\n      { path: 'stripe', component: StripeFormComponent },\n      { path: 'bitcoin', component: BitcoinFormComponent },\n    ],\n  },\n  { path: 'pricing', component: PricingPlansComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PagesRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { PagesDonateComponent } from './pages-donate/pages-donate.component';\nimport { PaymentOptionsComponent } from './pages-donate/payment-options/payment-options.component';\nimport { PagesRoutingModule } from './pages-routing.module';\n\n@NgModule({\n  imports: [CommonModule, NgbModule, PagesRoutingModule, SharedModule],\n  declarations: [PagesDonateComponent, PaymentOptionsComponent],\n})\nexport class PagesModule {}\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-circle-bar-spinner',\n  templateUrl: './circle-bar-spinner.component.html',\n  styleUrls: ['./circle-bar-spinner.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CircleBarSpinnerComponent {\n  @Input() showSpinner: boolean;\n  @Input() color = '#333333';\n  constructor() {}\n}\n","<div class=\"spinner-container\" *ngIf=\"showSpinner\" [ngbTooltip]=\"'Loading Encryption Info...'\">\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    style=\"margin: auto; background: transparent; display: inline; shape-rendering: auto\"\n    width=\"16px\"\n    height=\"16px\"\n    viewBox=\"0 0 100 100\"\n    preserveAspectRatio=\"xMidYMid\"\n  >\n    <g transform=\"rotate(0 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.9s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(36 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.8s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(72 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.7s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(108 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.6s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(144 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.5s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(180 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.4s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(216 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.3s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(252 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.2s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(288 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"-0.1s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <g transform=\"rotate(324 50 50)\">\n      <rect x=\"47\" y=\"10.5\" rx=\"2.75\" ry=\"2.75\" width=\"6\" height=\"25\" [ngStyle]=\"{ fill: color }\">\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur=\"1s\"\n          begin=\"0s\"\n          repeatCount=\"indefinite\"\n        ></animate>\n      </rect>\n    </g>\n    <!-- [ldio] generated by https://loading.io/ -->\n  </svg>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\nimport { apiUrl } from '../../config';\n\n@Component({\n  selector: 'app-bitcoin-form',\n  templateUrl: './bitcoin-form.component.html',\n  styleUrls: ['./bitcoin-form.component.scss'],\n})\nexport class BitcoinFormComponent implements OnInit {\n  public apiUrl: string = apiUrl;\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"row\">\n  <div class=\"col-sm-12\">\n    <div class=\"form-step-card\">\n      <h6 class=\"form-step-card-title text-dark mt-3 text-left\">\n        <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n      </h6>\n\n      <p>Please send your donations to following bitcoin address.</p>\n\n      <div class=\"card mb-3\">\n        <div class=\"card-header text-center\">\n          <h6>BITCOIN WALLET</h6>\n          <h5><strong>1612e9NUhwCGDAizMfk5VQa3pzMemDSGik</strong></h5>\n        </div>\n        <div class=\"card-body text-center\">\n          <img\n            class=\"p-4\"\n            src=\"{{ apiUrl }}qr-code/?size=225x225&data=1612e9NUhwCGDAizMfk5VQa3pzMemDSGik\"\n            alt=\"captcha\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output, ChangeDetectionStrategy } from '@angular/core';\nimport { takeWhile } from 'rxjs/operators';\nimport { timer } from 'rxjs/internal/observable/timer';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-countdown-timer',\n  templateUrl: './countdown-timer.component.html',\n  styleUrls: ['./countdown-timer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CountdownTimerComponent implements OnInit, OnDestroy {\n  @Input() duration: number; // duration in seconds\n\n  @Output() finished = new EventEmitter<boolean>();\n\n  days: number;\n\n  hours: number;\n\n  minutes: number;\n\n  seconds: number;\n\n  constructor() {}\n\n  ngOnInit() {\n    timer(0, 1000)\n      .pipe(untilDestroyed(this))\n      .pipe(takeWhile(() => this.duration > 0))\n      .subscribe(res => {\n        this.calculate();\n        this.duration--;\n        if (this.duration === 0) {\n          this.finished.emit(true);\n        }\n      });\n  }\n\n  calculate() {\n    let durationCopy = this.duration;\n    this.days = Math.floor(durationCopy / 86400);\n    durationCopy -= this.days * 86400;\n    this.hours = Math.floor(durationCopy / 3600) % 24;\n    durationCopy -= this.hours * 3600;\n    this.minutes = Math.floor(durationCopy / 60) % 60;\n    durationCopy -= this.minutes * 60;\n    this.seconds = durationCopy % 60;\n  }\n\n  ngOnDestroy() {}\n}\n","<span\n  >{{ days }} Day{{ days === 1 ? '' : 's' }} {{ hours }} Hour{{ hours === 1 ? '' : 's' }} {{ minutes }} Minute{{\n    minutes === 1 ? '' : 's'\n  }}\n  {{ seconds }} Second{{ seconds === 1 ? '' : 's' }}</span\n>\n","import { Component, Input, OnChanges, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\n\nimport { ClearAuthErrorMessage, ClearSignUpState, FinalLoading } from '../../../store/actions';\nimport { UpdateSignupData } from '../../../store/actions/auth.action';\nimport { PaymentMethod, PaymentType, PlanType, PricingPlan } from '../../../store/datatypes';\nimport { LOADING_IMAGE, SharedService } from '../../../store/services';\nimport { DynamicScriptLoaderService } from '../../services/dynamic-script-loader.service';\n\n@Component({\n  selector: 'app-pricing-plans',\n  templateUrl: './pricing-plans.component.html',\n  styleUrls: ['./pricing-plans.component.scss'],\n})\nexport class PricingPlansComponent implements OnInit, OnDestroy {\n  readonly planType = PlanType;\n\n  @Input() hideHeader: boolean;\n\n  @Input() blockGapsZero: boolean; // Flag to add top and bottom gap conditionally\n\n  @Input() showCurrentPlan: boolean;\n\n  @Input() userPlanType: PlanType = null;\n\n  @Input() openBillingInfoInModal: boolean;\n\n  @Input() selectedCurrency: string;\n\n  @Input() paymentType: PaymentType = PaymentType.ANNUALLY;\n\n  @Input() paymentMethod: PaymentMethod;\n\n  @ViewChild('billingInfoModal') billingInfoModal: any;\n\n  private billingInfoModalRef: NgbModalRef;\n\n  selectedIndex = -1; // Assuming no element are selected initially\n\n  selectedPlan: PlanType;\n\n  availableStorage: number[] = [];\n\n  availableEmailAddress: number[] = [];\n\n  availableCustomDomain: number[] = [];\n\n  pricingPlans: Array<PricingPlan> = [];\n\n  loadingImage = LOADING_IMAGE;\n\n  paymentTypeEnum = PaymentType;\n\n  selectedPaymentType: PaymentType = PaymentType.ANNUALLY;\n\n  constructor(\n    private sharedService: SharedService,\n    private store: Store<any>,\n    private router: Router,\n    private dynamicScriptLoader: DynamicScriptLoaderService,\n    private modalService: NgbModal,\n  ) {}\n\n  ngOnInit() {\n    this.sharedService.hideFooter.emit(true);\n    for (let i = 6; i <= 50; i++) {\n      this.availableStorage.push(i);\n    }\n    for (let i = 20; i <= 100; i += 10) {\n      this.availableEmailAddress.push(i);\n    }\n    for (let i = 2; i <= 10; i++) {\n      this.availableCustomDomain.push(i);\n    }\n    this.paymentType = this.paymentType || PaymentType.MONTHLY;\n    this.paymentMethod = this.paymentMethod || PaymentMethod.STRIPE;\n    this.selectedCurrency = this.selectedCurrency || 'USD';\n    this.store.dispatch(new FinalLoading({ loadingState: false }));\n    this.sharedService.loadPricingPlans();\n    this.setPricingPlans();\n  }\n\n  setPricingPlans() {\n    if (SharedService.PRICING_PLANS_ARRAY.length > 0) {\n      this.pricingPlans = SharedService.PRICING_PLANS_ARRAY;\n      return;\n    }\n    setTimeout(() => {\n      this.setPricingPlans();\n    }, 1000);\n  }\n\n  selectPlan(plan: PlanType, paymentType: PaymentType = null) {\n    this.selectedPaymentType = paymentType || this.paymentType;\n    this.selectedPlan = plan;\n    this.store.dispatch(new ClearSignUpState());\n    this.store.dispatch(new ClearAuthErrorMessage());\n    this.store.dispatch(\n      new UpdateSignupData({\n        plan_type: this.selectedPlan,\n        payment_type: this.paymentType,\n        payment_method: this.paymentMethod,\n        currency: this.selectedCurrency,\n      }),\n    );\n    if (this.openBillingInfoInModal) {\n      this.billingInfoModalRef = this.modalService.open(this.billingInfoModal, {\n        centered: true,\n        windowClass: 'modal-lg users-action-modal',\n        backdrop: 'static',\n      });\n    } else if (plan === PlanType.FREE) {\n      this.router.navigateByUrl(`/create-account?plan=${plan}`);\n    } else {\n      this.router.navigateByUrl(`/create-account?plan=${plan}&billing=${this.selectedPaymentType}`);\n    }\n  }\n\n  togglePaymentType() {\n    this.selectedPaymentType =\n      this.selectedPaymentType === PaymentType.MONTHLY ? PaymentType.ANNUALLY : PaymentType.MONTHLY;\n    this.paymentType = this.selectedPaymentType;\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideFooter.emit(false);\n  }\n}\n","<!-- PAGE SECTION -->\n<section *ngIf=\"pricingPlans?.length > 0\" class=\"l-block l-block-text bg-white\" [class.gap-p-eq]=\"!blockGapsZero\">\n  <div class=\"container\">\n    <header class=\"l-block-header position-relative text-center mb-4 mb-sm-5 mb-md-8\" [hidden]=\"hideHeader\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 position-sm-static px-sm-5 px-md-0\">\n          <h1 class=\"l-block-title fw-light text-uppercase text-secondary\">\n            <strong [translate]=\"'home_header.pricing'\">Pricing</strong>\n            <span [translate]=\"'settings.plans'\">Plans</span>\n          </h1>\n          <h4 class=\"l-block-subtitle mb-0 text-dark fw-light\">\n            <p [translate]=\"'page_pricing.world_most_secure'\">\n              CTemplar is the world's most secure & private email service based on an analysis of technical\n              specifications.\n            </p>\n            <p [translate]=\"'page_pricing.sending_spam'\">**CTemplar can not be used for sending spam or bulk emails</p>\n          </h4>\n        </div>\n      </div>\n    </header>\n    <div class=\"l-block-body px-xs pricing-plans\">\n      <div class=\"row\" style=\"margin: 0 0.4rem\">\n        <div class=\"col-3 p-0 plan-titles\">\n          <div class=\"pl-2 plan-item pt-4\">\n            <label class=\"pt-3\" [translate]=\"'page_pricing.plan_price'\">Plan & Price</label>\n          </div>\n          <h3 class=\"heading mt-4\" [translate]=\"'page_pricing.packages'\">Packages</h3>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.emails_allowed_to_send' | translate\"\n            [translate]=\"'page_pricing.messages_per_day'\"\n          >\n            Sending limits\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.upload_limit_MB' | translate\"\n            [translate]=\"'page_pricing.attachment_limit'\"\n          >\n            Attachments limit\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.storage_in_GB' | translate\"\n            [translate]=\"'page_pricing.storage'\"\n          >\n            Storage\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.mail_aliases' | translate\"\n            [translate]=\"'page_pricing.aliases'\"\n          >\n            Aliases\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.custom_domains' | translate\"\n            [translate]=\"'page_pricing.custom_domains'\"\n          >\n            Custom domains\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.folders' | translate\"\n            [translate]=\"'page_pricing.folders'\"\n          >\n            Folders\n          </div>\n          <h3 class=\"heading mt-4\" [translate]=\"'page_pricing.features'\">Features</h3>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.encryption_in_transit' | translate\"\n            [translate]=\"'page_pricing.encryption_in_transit'\"\n          >\n            Encryption in transit\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.encryption_at_rest' | translate\"\n            [translate]=\"'page_pricing.encryption_at_rest'\"\n          >\n            Encryption at rest\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.encrypted_attachments' | translate\"\n            [translate]=\"'page_pricing.encrypted_attachments' | translate\"\n          >\n            Encrypted attachments\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.encrypted_subjects' | translate\"\n            [translate]=\"'page_pricing.encrypted_subjects'\"\n          >\n            Encrypted subject\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.encrypted_body' | translate\"\n            [translate]=\"'page_pricing.encrypted_body'\"\n          >\n            Encrypted body\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.virus_protection' | translate\"\n            [translate]=\"'page_pricing.virus_protection'\"\n          >\n            Virus protection\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.2fa_security' | translate\"\n            [translate]=\"'page_pricing.2fa_security'\"\n          >\n            2FA security\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.anti_phishing' | translate\"\n            [translate]=\"'page_pricing.anti_phishing'\"\n          >\n            Anti-phishing phrase\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.brute_force' | translate\"\n            [translate]=\"'page_pricing.brute_force'\"\n          >\n            Brute-force proof\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.zero_knowledge' | translate\"\n            [translate]=\"'page_pricing.zero_knowledge'\"\n          >\n            Zero-knowledge privacy\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.anonymized_ip' | translate\"\n            [translate]=\"'page_pricing.anonymized_ip'\"\n          >\n            Anonymized IP\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.self_destructing' | translate\"\n            [translate]=\"'page_pricing.self_destructing'\"\n          >\n            Self-destructing emails\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.dead_man_timer' | translate\"\n            [translate]=\"'page_pricing.dead_man_timer'\"\n          >\n            Dead-man timer\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.delayed_delivery' | translate\"\n            [translate]=\"'page_pricing.delayed_delivery'\"\n          >\n            Delayed delivery\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.mails_of_custom_dom' | translate\"\n            [translate]=\"'page_pricing.catch_all_emails'\"\n          >\n            Catch-all domains\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.remote_encrypted_link' | translate\"\n            [translate]=\"'page_pricing.remote_encrypted_link'\"\n          >\n            Remote encrypted link\n          </div>\n          <div\n            class=\"bold px-2 py-3 plan-sub-item\"\n            [ngbTooltip]=\"'page_pricing.exclusive_access' | translate\"\n            [translate]=\"'page_pricing.exclusive_access'\"\n          >\n            Exclusive beta access\n          </div>\n        </div>\n        <div class=\"col-9\">\n          <div class=\"row pricing-plans-list\">\n            <div *ngFor=\"let plan of pricingPlans\" class=\"col-2 p-0\">\n              <div class=\"plan-item\">\n                <div class=\"text-center\">\n                  <div class=\"bold mt-3\">{{ plan.name }}</div>\n                  <div class=\"plan-title-info\" *ngIf=\"plan.name !== planType.FREE; else freePlan\">\n                    <div class=\"monthly-price\">\n                      $<b>{{\n                        selectedPaymentType === paymentTypeEnum.MONTHLY ? plan.monthly_price : plan.annually_price / 12\n                      }}</b\n                      >/m\n                    </div>\n                    <!--<div>${{plan.annually_price/12}}/m billed as <br>${{plan.annually_price}}/y</div>-->\n                    <div class=\"mt-3\">\n                      <span [translate]=\"'page_pricing.billed_as'\">Billed </span>\n                      {{ selectedPaymentType === paymentTypeEnum.MONTHLY ? 'monthly' : 'yearly' }}\n                    </div>\n                  </div>\n                  <ng-template #freePlan>\n                    <div class=\"plan-title-info\" [innerHTML]=\"'page_pricing.upgrade_anytime' | translate\">\n                      Upgrade<br />anytime\n                    </div>\n                  </ng-template>\n                  <a\n                    class=\"btn cursor-pointer select-btn\"\n                    [style.background]=\"plan.background\"\n                    *ngIf=\"userPlanType !== plan.name; else currentPlan\"\n                    (click)=\"selectPlan(plan.name)\"\n                    [translate]=\"'page_pricing.select'\"\n                    >Select</a\n                  >\n                  <ng-template #currentPlan>\n                    <label\n                      class=\"current-plan-upgrade\"\n                      *ngIf=\"paymentType === paymentTypeEnum.MONTHLY && plan.name !== planType.FREE\"\n                    >\n                      <a\n                        (click)=\"selectPlan(plan.name, paymentTypeEnum.ANNUALLY)\"\n                        [translate]=\"'page_pricing.upgrade_yearly'\"\n                        >Upgrade yearly</a\n                      >\n                    </label>\n                    <label\n                      [ngClass]=\"paymentType === paymentTypeEnum.MONTHLY ? 'current-plan' : 'current-plan-upgrade'\"\n                      [translate]=\"'page_pricing.current_plan'\"\n                      >Current plan</label\n                    >\n                  </ng-template>\n                </div>\n              </div>\n              <h3 class=\"heading mt-4 position-relative\">\n                <a *ngIf=\"plan.name === planType.PRIME\" class=\"switch-payment-type\" (click)=\"togglePaymentType()\">\n                  Click here to switch to {{ selectedPaymentType === paymentTypeEnum.ANNUALLY ? 'monthly' : 'yearly' }}\n                </a>\n              </h3>\n              <div class=\"px-2 py-3 plan-sub-item\">\n                {{ plan.messages_per_day }}<label *ngIf=\"plan.name !== planType.CHAMPION\">/day</label>\n              </div>\n              <div class=\"px-2 py-3 plan-sub-item\">{{ plan.attachment_upload_limit }}MB</div>\n              <div class=\"px-2 py-3 plan-sub-item\">{{ plan.gb }}GB</div>\n              <div class=\"px-2 py-3 plan-sub-item\">{{ plan.aliases }}</div>\n              <div class=\"px-2 py-3 plan-sub-item\">{{ plan.custom_domains }}</div>\n              <div class=\"px-2 py-3 plan-sub-item\">Unlimited</div>\n              <h3 class=\"heading mt-4\"></h3>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.encryption_in_transit }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.encryption_at_rest }\"></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.encrypted_attachments }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.encrypted_subjects }\"></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.encrypted_body }\"></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.virus_detection_tool }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.two_fa }\"></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.anti_phishing }\"></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.brute_force_protection }\"\n              ></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.zero_knowledge_password }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.anonymized_ip }\"></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.self_destructing_emails }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.dead_man_timer }\"></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.delayed_delivery }\"></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.catch_all_email }\"></ng-container>\n              <ng-container\n                *ngTemplateOutlet=\"featureIcon; context: { value: plan.remote_encrypted_link }\"\n              ></ng-container>\n              <ng-container *ngTemplateOutlet=\"featureIcon; context: { value: plan.exclusive_access }\"></ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- /.Site container ends -->\n</section>\n<!-- /.PAGE SECTION ENDS -->\n<div align=\"center\" *ngIf=\"pricingPlans?.length === 0\">\n  <img class=\"logo\" style=\"width: 200px; height: 300px\" [src]=\"loadingImage | safe: 'url'\" />\n</div>\n\n<ng-template #featureIcon let-value=\"value\">\n  <div class=\"px-2 py-3 plan-sub-item\">\n    <i class=\"fa fa-check text-green\" *ngIf=\"value\"></i>\n    <i class=\"fa fa-times text-danger\" *ngIf=\"!value\"></i>\n  </div>\n</ng-template>\n\n<!-- billing info modal -->\n<ng-template #billingInfoModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"billing-header\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body user-billing-upgrade-modal bg-faded px-3 py-0 bg-white\">\n    <app-users-billing-info\n      [isUpgradeAccount]=\"true\"\n      [planType]=\"selectedPlan\"\n      [paymentType]=\"selectedPaymentType\"\n      [paymentMethod]=\"paymentMethod\"\n      [currency]=\"selectedCurrency\"\n      (closeBillingInfo)=\"d()\"\n    ></app-users-billing-info>\n  </div> </ng-template\n><!-- /.billing info modal ends -->\n","import { Component, OnInit, NgZone } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\n\nimport { AppState } from '../../../store/datatypes';\nimport { SnackErrorPush } from '../../../store';\nimport { DonationService } from '../../../store/services/donation.service';\nimport { MakeStripDonation } from '../../../store/actions/donate.actions';\n\n@Component({\n  selector: 'app-stripe-form',\n  templateUrl: './stripe-form.component.html',\n  styleUrls: ['./stripe-form.component.scss'],\n})\nexport class StripeFormComponent implements OnInit {\n  /**\n   * Messages recieved from Stripe API will be displayed using this model\n   */\n  stripePaymentValidation: any = {\n    message: '',\n    param: '',\n  };\n\n  // Angular Reactive Form for binding it with inputs\n  billingForm: FormGroup;\n\n  /**\n   * donationAmount : The amount user wants to donate to CTemplar\n   * cardNumber: 16 digit long Credti/Debit card number\n   * cvc: 3 or 4 digit decurity code of the card\n   */\n  donationAmount: number;\n\n  cardNumber: number;\n\n  expiryMonth = 'Month';\n\n  expiryYear = 'Year';\n\n  cvc: number;\n\n  /**\n   * For filling Month and Year dropdowns\n   */\n  months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\n\n  years = ['2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025', '2026'];\n\n  /**\n   * Display loader on form submission\n   */\n  inProgress = false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private _zone: NgZone,\n    private store: Store<AppState>,\n    private donationService: DonationService,\n  ) {}\n\n  /**\n   * Initializing billing form and adding validation check of 16 digits length\n   */\n  ngOnInit() {\n    this.billingForm = this.formBuilder.group({\n      cardNumber: ['', [Validators.minLength(16), Validators.maxLength(16)]],\n    });\n  }\n\n  /**\n   * Selection method for month and initiating form validation\n   * @param month - Expiry month specified on the card\n   */\n  selectMonth(month: string) {\n    this.expiryMonth = month;\n    this.checkStripeValidation();\n  }\n\n  /**\n   * @description\n   * Selection method for year and initiating form validation\n   *\n   * @param year - Expiry year specified on the card\n   */\n  selectYear(year: string) {\n    this.expiryYear = year;\n    this.checkStripeValidation();\n  }\n\n  /**\n   * @description\n   * Checks the inputs validity after each on change event on cardNumber, expiryMonth and expiredYear and CVC\n   *\n   * As soon as the Stripe API returns an error on any input, respective param is assigned which highlights the input\n   * by showing red border.\n   */\n  checkStripeValidation() {\n    this.stripePaymentValidation.param = '';\n    this.stripePaymentValidation.message = '';\n    if (!(<any>window).Stripe.card.validateCardNumber(this.cardNumber)) {\n      this.stripePaymentValidation.param = 'number';\n    } else if (!(<any>window).Stripe.card.validateExpiry(this.expiryMonth, this.expiryYear)) {\n      this.stripePaymentValidation.param = 'exp_year exp_month';\n    } else if (!(<any>window).Stripe.card.validateCVC(this.cvc)) {\n      this.stripePaymentValidation.param = 'cvc';\n    }\n  }\n\n  /**\n   * @description\n   * Submits form to Stripe API after the inputs are validated\n   *\n   * After successful response from the Stripe API, token from the response is extracted\n   * token is passed to a method that makes payment using CTemplar API\n   */\n  submitStripeForm() {\n    this.inProgress = true;\n    (<any>window).Stripe.card.createToken(\n      {\n        number: this.cardNumber,\n        exp_month: this.expiryMonth,\n        exp_year: this.expiryYear,\n        cvc: this.cvc,\n      },\n      (status: number, response: any) => {\n        // Wrapping inside the Angular zone\n        this._zone.run(() => {\n          this.inProgress = false;\n          if (status === 200) {\n            this.performStripeDonationTransaction(response.id);\n          } else {\n            this.stripePaymentValidation = {\n              message: response.error.message,\n              param: response.error.param,\n            };\n          }\n        });\n      },\n    );\n  }\n\n  /**\n   * @description\n   * Peforms transaction after successfully validating information provided in the Stripe form\n   *\n   * @param token - string recieved from Stripe API\n   */\n  private performStripeDonationTransaction(token: any) {\n    if (token) {\n      this.store.dispatch(\n        new MakeStripDonation({\n          stripe_token: token,\n          amount: this.donationAmount,\n        }),\n      );\n    } else {\n      this.store.dispatch(new SnackErrorPush('Cannot make donation, please reload page and try again.'));\n    }\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-sm-12\">\n    <form [formGroup]=\"billingForm\" #form=\"ngForm\">\n      <div class=\"form-step-card\" [class]=\"stripePaymentValidation.param\">\n        <h6 class=\"form-step-card-title text-dark mb-3 text-left\">\n          <strong [translate]=\"'billing_info.donation_amount'\">Amount</strong>\n        </h6>\n        <div\n          class=\"d-flex justify-content-between btn-group btn-group-toggle text-left\"\n          ngbRadioGroup\n          name=\"donationAmount\"\n          [(ngModel)]=\"donationAmount\"\n          [ngModelOptions]=\"{ standalone: true }\"\n        >\n          <label ngbButtonLabel class=\"btn-outline-secondary\"> <input ngbButton type=\"radio\" [value]=\"1\" /> $1 </label>\n          <label ngbButtonLabel class=\"btn-outline-secondary\"> <input ngbButton type=\"radio\" [value]=\"5\" /> $5 </label>\n          <label ngbButtonLabel class=\"btn-outline-secondary\">\n            <input ngbButton type=\"radio\" [value]=\"10\" /> $10\n          </label>\n          <div class=\"form-group mb-0\">\n            <label for=\"donationAmount\" class=\"text-muted text-left hidden-sm-up\">Other</label>\n            <input\n              class=\"form-control\"\n              (click)=\"donationAmount = 0\"\n              [(ngModel)]=\"donationAmount\"\n              [ngModelOptions]=\"{ standalone: true }\"\n              [placeholder]=\"'settings.donate.select_amount' | translate\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n\n        <h6 class=\"form-step-card-title text-dark mb-3 text-left\">\n          <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n        </h6>\n        <div class=\"form-group\">\n          <label for=\"personName\" class=\"d-block text-muted text-left hidden-sm-up\">Name on Card</label>\n          <input\n            class=\"form-control\"\n            id=\"personName\"\n            [placeholder]=\"'settings.donate.name_on_card' | translate\"\n            type=\"text\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <span class=\"d-block text-right error-msg\"\n            >Required field <sup class=\"font-weight-bold error-msg\">*</sup></span\n          >\n          <label\n            for=\"cardName\"\n            class=\"d-block text-left hidden-sm-up label-error\"\n            [translate]=\"'settings.donate.card_number'\"\n            >Card Number\n          </label>\n          <input\n            class=\"form-control stripe-error number\"\n            id=\"cardName\"\n            name=\"cardName\"\n            [placeholder]=\"'settings.donate.card_number' | translate\"\n            type=\"text\"\n            formControlName=\"cardNumber\"\n            [(ngModel)]=\"cardNumber\"\n            (change)=\"checkStripeValidation()\"\n          />\n        </div>\n        <div class=\"form-group form-group-3-col\">\n          <div class=\"form-group-row\">\n            <div class=\"form-group-col\">\n              <span class=\"d-block text-right error-msg font-weight-bold\">*</span>\n              <label class=\"d-block text-muted text-left hidden-sm-up\" [translate]=\"'billing_info.month'\">Month</label>\n              <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                <div ngbDropdown class=\"date-select-dropdown\">\n                  <button role=\"button\" id=\"dateDropdownMenuButton\" ngbDropdownToggle class=\"stripe-error exp_month\">\n                    {{ expiryMonth }}\n                  </button>\n                  <div ngbDropdownMenu aria-labelledby=\"dateDropdownMenuButton\">\n                    <a class=\"dropdown-item text-muted\">\n                      <em>Date</em>\n                    </a>\n                    <a class=\"dropdown-item text-muted\" *ngFor=\"let month of months\" (click)=\"selectMonth(month)\">\n                      <em>{{ month }}</em>\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"form-group-col\">\n              <span class=\"d-block text-right error-msg font-weight-bold\">*</span>\n              <label class=\"d-block text-muted text-left hidden-sm-up\" [translate]=\"'billing_info.year'\">Year</label>\n              <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                <div ngbDropdown class=\"year-select-dropdown\">\n                  <button role=\"button\" id=\"yearDropdownMenuButton\" ngbDropdownToggle class=\"stripe-error exp_year\">\n                    {{ expiryYear }}\n                  </button>\n                  <div ngbDropdownMenu aria-labelledby=\"yearDropdownMenuButton\">\n                    <a class=\"dropdown-item text-muted\" href=\"\">\n                      <em>Year</em>\n                    </a>\n                    <a class=\"dropdown-item text-muted\" *ngFor=\"let year of years\" (click)=\"selectYear(year)\">\n                      <em>{{ year }}</em>\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"form-group-col\">\n              <span class=\"d-block text-right error-msg font-weight-bold\">&nbsp;</span>\n              <label\n                for=\"securityCode\"\n                class=\"d-block text-muted text-left hidden-sm-up\"\n                [translate]=\"'home_header.security'\"\n              >\n                Security Code</label\n              >\n              <input\n                class=\"form-control stripe-error cvc p-2\"\n                id=\"securityCode\"\n                [placeholder]=\"'home_header.security' | translate\"\n                type=\"text\"\n                [(ngModel)]=\"cvc\"\n                name=\"securityCode\"\n                [ngModelOptions]=\"{ standalone: true }\"\n                (change)=\"checkStripeValidation()\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- ERROR -->\n        <div *ngIf=\"stripePaymentValidation.message\" class=\"l-alert l-alert-danger\">\n          {{ stripePaymentValidation.message }}\n        </div>\n\n        <!-- SUBMIT BUTTON -->\n        <div class=\"form-group text-center mt-3 mt-sm-4 mb-0\">\n          <button\n            class=\"btn btn-lg btn-secondary billing-submit-btn\"\n            role=\"button\"\n            [disabled]=\"inProgress\"\n            (click)=\"submitStripeForm()\"\n          >\n            Donate\n          </button>\n          <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n","<!-- PAGE SECTION -->\n<section class=\"l-block l-block-text bg-white pt-3\">\n  <div class=\"container container-sm\">\n    <header class=\"l-block-header position-relative text-center\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 position-sm-static px-sm-5 px-md-0 mt-4\">\n          <h6 class=\"text-uppercase text-secondary m-0\">\n            <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n          </h6>\n        </div>\n      </div>\n    </header>\n    <div class=\"l-block-body\">\n      <div class=\"form-card-holder mx-auto\">\n        <div class=\"form\">\n          <form [formGroup]=\"billingForm\" #form=\"ngForm\">\n            <div class=\"form-card-holder billing-form-card-holder form-card-holder-top-border mt-md-3\">\n              <div class=\"form-step-card\" *ngIf=\"planType !== planTypeEnum.FREE\">\n                <h3 class=\"form-step-card-title text-dark mb-3\">\n                  <strong [translate]=\"'settings.overview'\">Overview</strong>\n                </h3>\n                <div class=\"billing-overview\">\n                  <div class=\"billing-overview-row row\">\n                    <label class=\"billing-overview-label mb-0 col-3\" [translate]=\"'billing_info.plan'\">Plan</label>\n                    <div class=\"billing-overview-val text-secondary col\">\n                      <strong>CTemplar {{ planType }}</strong>\n                    </div>\n                  </div>\n                  <div class=\"billing-overview-row payment-method-row row\" *ngIf=\"!isAddNewCard\">\n                    <label class=\"billing-overview-label col-3\" [translate]=\"'billing_info.payment_method'\"\n                      >Payment Method:\n                    </label>\n                    <div class=\"billing-overview-val text-secondary col\">\n                      <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                        <div ngbDropdown class=\"payment-select-dropdown\">\n                          <button ngbDropdownToggle role=\"button\" id=\"paymentDropdownMenuButton\">\n                            {{ paymentMethod }}\n                          </button>\n                          <div ngbDropdownMenu aria-labelledby=\"paymentDropdownMenuButton\">\n                            <a class=\"dropdown-item text-muted\" (click)=\"loadStripeScripts()\">\n                              <em>Stripe (Credit/Debit Card)</em>\n                            </a>\n                            <a class=\"dropdown-item text-muted\" (click)=\"selectBitcoinMethod()\">\n                              <em>Bitcoin</em>\n                            </a>\n                            <a class=\"dropdown-item text-muted\" (click)=\"selectMoneroMethod()\">\n                              <em>Monero</em>\n                            </a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"billing-overview-row row\" *ngIf=\"!isAddNewCard\">\n                    <label class=\"billing-overview-label mb-0 col-3\" [translate]=\"'billing_info.billing'\"\n                      >Billing</label\n                    >\n                    <div class=\"billing-overview-val text-secondary col\">\n                      <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                        <div ngbDropdown class=\"payment-select-dropdown\">\n                          <button ngbDropdownToggle role=\"button\" id=\"paymentTypeDropdownMenuButton\">\n                            {{ paymentType }}\n                          </button>\n                          <div ngbDropdownMenu aria-labelledby=\"paymentTypeDropdownMenuButton\">\n                            <a\n                              class=\"dropdown-item text-muted\"\n                              *ngIf=\"paymentMethod === paymentMethodType.STRIPE\"\n                              (click)=\"selectPaymentType(paymentTypeEnum.MONTHLY)\"\n                            >\n                              <em>Monthly</em>\n                            </a>\n                            <a class=\"dropdown-item text-muted\" (click)=\"selectPaymentType(paymentTypeEnum.ANNUALLY)\">\n                              <em>Annually</em>\n                            </a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"billing-overview-row row\" *ngIf=\"!isAddNewCard\">\n                    <label class=\"billing-overview-label mb-0 col-3\" [translate]=\"'billing_info.price'\">Price</label>\n                    <div class=\"billing-overview-val text-secondary col\">\n                      <strong *ngIf=\"paymentType === paymentTypeEnum.ANNUALLY\">\n                        {{ currentPlan?.annually_price | currency: currency }}/<span [translate]=\"'settings.annually'\"\n                          >Yearly</span\n                        >\n                        ({{ currentPlan?.annually_price / 12 | currency: currency }}/<span\n                          [translate]=\"'billing_info.month'\"\n                          >month</span\n                        >)\n                      </strong>\n                      <strong *ngIf=\"paymentType === paymentTypeEnum.MONTHLY\">\n                        {{ currentPlan?.monthly_price | currency: currency }}/<span [translate]=\"'billing_info.month'\"\n                          >month</span\n                        >\n                      </strong>\n                    </div>\n                  </div>\n                  <div class=\"billing-overview-row row\" *ngIf=\"!isPrime && !isAddNewCard\">\n                    <label class=\"billing-overview-label mb-0 col-3\">Promo code</label>\n                    <div class=\"billing-overview-val text-secondary col-9\">\n                      <input\n                        class=\"form-control\"\n                        [(ngModel)]=\"promoCode.value\"\n                        formControlName=\"promoCode\"\n                        placeholder=\"Optional promo code\"\n                        id=\"promo-code\"\n                        type=\"text\"\n                      />\n                      <i *ngIf=\"promoCode.is_valid\" class=\"fas fa-check input-ok\"></i>\n                      <i *ngIf=\"promoCode.is_valid === false\" class=\"fas fa-times text-danger input-invalid\"></i>\n                      <app-loading-spinner\n                        class=\"promo-code-spinner\"\n                        [showSpinner]=\"promoCode.inProgress\"\n                      ></app-loading-spinner>\n                    </div>\n                    <div class=\"col-3\"></div>\n                    <div class=\"col-9 position-relative error-block\" align=\"left\">\n                      <span class=\"mr-4 text-danger\" *ngIf=\"promoCode.is_valid === false\">{{ promoCode.message }}</span>\n                      <a class=\"validate-promo-code\" (click)=\"validatePromoCode()\">Validate</a>\n                    </div>\n\n                    <ng-container *ngIf=\"promoCode.is_valid\">\n                      <label class=\"billing-overview-label mb-0 col-3\" ngbTooltip=\"Actual amount that will be charged.\"\n                        >Discounted price</label\n                      >\n                      <div class=\"billing-overview-val text-secondary col-9\">\n                        <strong>${{ promoCode.new_amount }}/-</strong>\n                      </div>\n                      <label class=\"billing-overview-label mb-0 col-3\">You will save</label>\n                      <div class=\"billing-overview-val text-secondary col-9\">\n                        <strong>${{ promoCode.discount_amount }}/-</strong>\n                      </div>\n                    </ng-container>\n                  </div>\n\n                  <div\n                    class=\"billing-overview-row row\"\n                    *ngIf=\"\n                      isUpgradeAccount && upgradeAmount != null && !promoCode.is_valid && !isRenew && !isAddNewCard\n                    \"\n                  >\n                    <label\n                      class=\"billing-overview-label mb-0 col-3\"\n                      ngbTooltip=\"This is the amount which you will be charged right now.\"\n                    >\n                      Amount to charge</label\n                    >\n                    <div class=\"billing-overview-val text-secondary col\">\n                      <strong>{{ upgradeAmount | currency: currency }}</strong>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div\n                class=\"form-step-card\"\n                *ngIf=\"paymentMethod === paymentMethodType.BITCOIN && planType !== planTypeEnum.FREE\"\n              >\n                <h3 class=\"form-step-card-title text-dark mb-3\">\n                  <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n                </h3>\n                <p>\n                  <strong>{{ minutes }} minutes : {{ seconds }} seconds </strong>\n                  <span [translate]=\"'billing_info.bitcoin_sent_timer'\">BTC sent after timer will be lost!</span>\n                </p>\n\n                <div class=\"bitcoin-payment card mb-3\">\n                  <div class=\"card-header text-center\">\n                    <h6 [innerHTML]=\"'billing_info.send_exactly' | translate\">SEND <strong>EXACTLY</strong></h6>\n                    <h5>\n                      <strong *ngIf=\"bitcoinState?.loaded\">\n                        {{ bitcoinState?.bitcoinRequired | number: '1.5-5' }}\n                      </strong>\n                    </h5>\n                    <app-loading-spinner [showSpinner]=\"!bitcoinState?.loaded\"></app-loading-spinner>\n                  </div>\n                  <div class=\"card-body text-center\">\n                    <p class=\"justify-content-center\" *ngIf=\"bitcoinState?.loaded\">\n                      {{ bitcoinState.newWalletAddress }}\n                    </p>\n                    <img\n                      *ngIf=\"bitcoinState?.loaded\"\n                      class=\"mb-3\"\n                      src=\"{{ apiUrl }}qr-code/?size=225x225&data=bitcoin:{{ bitcoinState.newWalletAddress }}?amount={{\n                        bitcoinState.bitcoinRequired\n                      }}\"\n                      alt=\"captcha\"\n                    />\n                    <app-loading-spinner [showSpinner]=\"!bitcoinState?.loaded\"></app-loading-spinner>\n                  </div>\n                </div>\n                <strong class=\"text-center green\" *ngIf=\"paymentSuccess\">\n                  <i class=\"fa fa-check-circle green\"></i>\n                  Your payment has been made successfully, Please click on\n                  {{ authState?.isAuthenticated ? 'upgrade' : 'create' }} account in order to proceed.\n                </strong>\n              </div>\n\n              <div\n                class=\"form-step-card\"\n                *ngIf=\"paymentMethod === paymentMethodType.MONERO && planType !== planTypeEnum.FREE\"\n              >\n                <h3 class=\"form-step-card-title text-dark mb-3\">\n                  <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n                </h3>\n                <p>\n                  <span [translate]=\"'billing_info.about_monero'\"\n                    >To complete your payment using Monero (XMR) please create a free account then email\n                    Support@ctemplar.com. Our Support team will send you instructions on how to complete the payment and\n                    thenupgrade your account once payment is made.</span\n                  >\n                </p>\n              </div>\n              <app-loading-spinner\n                *ngIf=\"paymentMethod === paymentMethodType.STRIPE\"\n                [showSpinner]=\"isScriptsLoading\"\n              ></app-loading-spinner>\n\n              <div\n                class=\"form-step-card\"\n                [class]=\"stripePaymentValidation.param\"\n                *ngIf=\"paymentMethod === paymentMethodType.STRIPE && isScriptsLoaded && planType !== planTypeEnum.FREE\"\n              >\n                <h3 class=\"form-step-card-title text-dark mb-3\">\n                  <strong [translate]=\"'billing_info.payment_information'\">Payment Information</strong>\n                </h3>\n                <div class=\"form-group\">\n                  <label for=\"personName\" class=\"d-block text-muted text-left hidden-sm-up\">Name on Card</label>\n                  <input\n                    class=\"form-control\"\n                    id=\"personName\"\n                    [placeholder]=\"'settings.donate.name_on_card' | translate\"\n                    type=\"text\"\n                  />\n                </div>\n                <div class=\"form-group\">\n                  <label\n                    for=\"cardName\"\n                    class=\"d-block text-left hidden-sm-up label-error\"\n                    [translate]=\"'settings.donate.card_number'\"\n                    >Card Number\n                  </label>\n                  <span class=\"d-block text-right font-weight-bold\">*</span>\n                  <input\n                    id=\"cardNumber\"\n                    name=\"cardNumber\"\n                    class=\"form-control number\"\n                    [ngClass]=\"{\n                      error:\n                        cardNumberFormControl.invalid && (cardNumberFormControl.dirty || cardNumberFormControl.touched),\n                      'stripe-error':\n                        cardNumberFormControl.invalid && (cardNumberFormControl.dirty || cardNumberFormControl.touched)\n                    }\"\n                    [placeholder]=\"'settings.donate.card_number' | translate\"\n                    type=\"text\"\n                    formControlName=\"cardNumber\"\n                    required\n                    (change)=\"checkStripeValidation()\"\n                  />\n                  <ng-container\n                    *ngIf=\"\n                      cardNumberFormControl.invalid && (cardNumberFormControl.dirty || cardNumberFormControl.touched)\n                    \"\n                  >\n                    <span\n                      *ngIf=\"cardNumberFormControl.errors.required\"\n                      class=\"d-block text-right error-msg\"\n                      [translate]=\"'settings.required_field'\"\n                      >Required field</span\n                    >\n                    <span *ngIf=\"cardNumberFormControl.errors.pattern\" class=\"d-block text-right error-msg\"\n                      >Number Only</span\n                    >\n                  </ng-container>\n                </div>\n                <div class=\"form-group form-group-3-col\">\n                  <div class=\"form-group-row\">\n                    <div class=\"form-group-col\">\n                      <span class=\"d-block text-right font-weight-bold\">*</span>\n                      <label class=\"d-block text-muted text-left hidden-sm-up\" [translate]=\"'billing_info.month'\"\n                        >Month</label\n                      >\n                      <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                        <div ngbDropdown class=\"date-select-dropdown\">\n                          <button\n                            role=\"button\"\n                            id=\"dateDropdownMenuButton\"\n                            ngbDropdownToggle\n                            class=\"stripe-error exp_month\"\n                          >\n                            {{ expiryMonth }}\n                          </button>\n                          <div ngbDropdownMenu aria-labelledby=\"dateDropdownMenuButton\">\n                            <a class=\"dropdown-item text-muted\">\n                              <em>Date</em>\n                            </a>\n                            <a\n                              class=\"dropdown-item text-muted\"\n                              *ngFor=\"let month of months\"\n                              (click)=\"selectMonth(month)\"\n                            >\n                              <em>{{ month }}</em>\n                            </a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"form-group-col\">\n                      <span class=\"d-block text-right font-weight-bold\">*</span>\n                      <label class=\"d-block text-muted text-left hidden-sm-up\" [translate]=\"'billing_info.year'\"\n                        >Year</label\n                      >\n                      <div class=\"btn-dropdown btn-dropdown-lg btn-dropdown-select\">\n                        <div ngbDropdown class=\"year-select-dropdown\">\n                          <button\n                            role=\"button\"\n                            id=\"yearDropdownMenuButton\"\n                            ngbDropdownToggle\n                            class=\"stripe-error exp_year\"\n                          >\n                            {{ expiryYear }}\n                          </button>\n                          <div ngbDropdownMenu aria-labelledby=\"yearDropdownMenuButton\">\n                            <a class=\"dropdown-item text-muted\" href=\"\">\n                              <em [translate]=\"'billing_info.year'\">Year</em>\n                            </a>\n                            <a class=\"dropdown-item text-muted\" *ngFor=\"let year of years\" (click)=\"selectYear(year)\">\n                              <em>{{ year }}</em>\n                            </a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"form-group-col\">\n                      <span class=\"d-block text-right error-msg font-weight-bold\">&nbsp;</span>\n                      <label\n                        for=\"securityCode\"\n                        class=\"d-block text-muted text-left hidden-sm-up\"\n                        [translate]=\"'home_header.security'\"\n                        >Security Code</label\n                      >\n                      <input\n                        class=\"form-control stripe-error cvc p-2\"\n                        id=\"securityCode\"\n                        [placeholder]=\"'home_header.security' | translate\"\n                        type=\"text\"\n                        [(ngModel)]=\"cvc\"\n                        name=\"securityCode\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                        (change)=\"checkStripeValidation()\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div *ngIf=\"stripePaymentValidation.message\" class=\"l-alert l-alert-danger\">\n                {{ stripePaymentValidation.message }}\n              </div>\n              <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger\">{{ errorMessage }}</div>\n\n              <div\n                class=\"form-group text-center mt-3 mt-sm-4 mb-0\"\n                *ngIf=\"planType === planTypeEnum.FREE && isUpgradeAccount; else paidPlanButton\"\n              >\n                <div class=\"cancel-subscription\">\n                  You are about to cancel your subscription. If you cancel, you can keep using the subscription until\n                  the next billing date: {{ payment?.billing_cycle_ends | momentDate: 'mediumDate' }}.<br /><br />\n\n                  After that date, your account will be automatically reverted to FREE. Additional aliases and domains\n                  will stop working.\n                </div>\n                <button\n                  class=\"btn btn-lg btn-secondary billing-submit-btn\"\n                  type=\"submit\"\n                  role=\"button\"\n                  (click)=\"submitForm()\"\n                >\n                  Cancel Subscription\n                </button>\n                <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n              </div>\n              <ng-template #paidPlanButton>\n                <div\n                  class=\"form-group text-center mt-3 mt-sm-4 mb-0\"\n                  [ngbTooltip]=\"\n                    paymentMethod === paymentMethodType.BITCOIN && !authState.isAuthenticated && !paymentSuccess\n                      ? ('billing_info.pay_to_proceed' | translate)\n                      : ''\n                  \"\n                >\n                  <button\n                    class=\"btn btn-lg btn-secondary billing-submit-btn\"\n                    type=\"submit\"\n                    role=\"button\"\n                    [disabled]=\"\n                      inProgress ||\n                      (paymentMethod === paymentMethodType.BITCOIN && authState.isAuthenticated && !paymentSuccess) ||\n                      paymentMethod === paymentMethodType.MONERO\n                    \"\n                    (click)=\"submitForm()\"\n                  >\n                    <span *ngIf=\"!isAddNewCard && !isUpgradeAccount\" [translate]=\"'login.create_account'\"\n                      >Create Account</span\n                    >\n                    <span *ngIf=\"!isAddNewCard && isUpgradeAccount\" [translate]=\"'common.upgrade_account'\"\n                      >Upgrade Account</span\n                    >\n                    <span *ngIf=\"isAddNewCard\" [translate]=\"'settings.add_new_method'\">Add new payment</span>\n                  </button>\n                  <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n                </div>\n              </ng-template>\n\n              <div class=\"text-holder mt-2 mb-5 text-center\">\n                <a href=\"\" [translate]=\"'common.cancel'\" (click)=\"onCancel($event)\">Cancel</a>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- /.Site container ends -->\n</section>\n<!-- /.PAGE SECTION ENDS -->\n","import { Component, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { Subscription } from 'rxjs';\nimport { TranslateService } from '@ngx-translate/core';\nimport { timer } from 'rxjs/internal/observable/timer';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport {\n  CheckTransaction,\n  ClearPromoCode,\n  ClearWallet,\n  CreateNewWallet,\n  FinalLoading,\n  GetUpgradeAmount,\n  SignUp,\n  SnackErrorPush,\n  UpgradeAccount,\n  ValidatePromoCode,\n  CardAdd,\n} from '../../../store/actions';\nimport {\n  AppState,\n  AuthState,\n  BitcoinState,\n  CheckTransactionResponse,\n  Payment,\n  PaymentMethod,\n  PaymentType,\n  PlanType,\n  PricingPlan,\n  PromoCode,\n  SignupState,\n  TransactionStatus,\n  UserState,\n} from '../../../store/datatypes';\nimport { OpenPgpService, SharedService } from '../../../store/services';\nimport { UserAccountInitDialogComponent } from '../../../users/dialogs/user-account-init-dialog/user-account-init-dialog.component';\nimport { DynamicScriptLoaderService } from '../../services/dynamic-script-loader.service';\nimport { apiUrl, PROMO_CODE_KEY, LANGUAGES } from '../../config';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-users-billing-info',\n  templateUrl: './users-billing-info.component.html',\n  styleUrls: ['./users-billing-info.component.scss'],\n})\nexport class UsersBillingInfoComponent implements OnDestroy, OnInit {\n  @Input() isUpgradeAccount: boolean;\n\n  @Input() isRenew: boolean;\n\n  @Input() isAddNewCard = false;\n\n  @Input() paymentType: PaymentType;\n\n  @Input() paymentMethod: PaymentMethod;\n\n  @Input() currency: any;\n\n  @Input() storage: number;\n\n  @Input() planType: PlanType;\n\n  @Output() closeBillingInfo = new EventEmitter<boolean>();\n\n  paymentTypeEnum = PaymentType;\n\n  cardNumber: number;\n\n  promoCode: PromoCode = new PromoCode();\n\n  billingForm: FormGroup;\n\n  expiryMonth = 'Month';\n\n  expiryYear = 'Year';\n\n  cvc: number;\n\n  months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\n\n  years: number[] = [];\n\n  paymentMethodType = PaymentMethod;\n\n  seconds = 60;\n\n  minutes = 60;\n\n  bitcoinState: BitcoinState;\n\n  signupState: SignupState;\n\n  inProgress: boolean;\n\n  planTypeEnum = PlanType;\n\n  stripePaymentValidation: any = {\n    message: '',\n    param: '',\n  };\n\n  showPaymentPending: boolean;\n\n  paymentSuccess: boolean;\n\n  errorMessage: string;\n\n  authState: AuthState;\n\n  isScriptsLoaded: boolean;\n\n  isScriptsLoading: boolean;\n\n  apiUrl: string = apiUrl;\n\n  currentPlan: PricingPlan;\n\n  upgradeAmount: number;\n\n  payment: Payment;\n\n  isPrime: boolean;\n\n  private checkTransactionResponse: CheckTransactionResponse;\n\n  private timerObservable: Subscription;\n\n  private modalRef: NgbModalRef;\n\n  private btcTimer: Subscription;\n\n  get cardNumberFormControl() {\n    return this.billingForm.get('cardNumber');\n  }\n\n  get promoCodeFormControl() {\n    return this.billingForm.get('promoCode');\n  }\n\n  constructor(\n    private sharedService: SharedService,\n    private store: Store<AppState>,\n    private router: Router,\n    private formBuilder: FormBuilder,\n    private openPgpService: OpenPgpService,\n    private translate: TranslateService,\n    private dynamicScriptLoader: DynamicScriptLoaderService,\n    private activatedRoute: ActivatedRoute,\n    private modalService: NgbModal,\n    private _zone: NgZone,\n  ) {}\n\n  ngOnInit() {\n    let year = new Date().getFullYear();\n    for (let i = 0; i < 11; i++) {\n      this.years.push(year++);\n    }\n    this.store.dispatch(new ClearPromoCode());\n    this.sharedService.hideFooter.emit(true);\n    setTimeout(() => this.store.dispatch(new FinalLoading({ loadingState: false })));\n    if (this.isUpgradeAccount) {\n      if (this.planType === PlanType.FREE) {\n        this.paymentType = null;\n        this.paymentMethod = null;\n      }\n    }\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        if (this.isUpgradeAccount) {\n          this.upgradeAmount = userState.upgradeAmount;\n          this.payment = userState.payment_transaction;\n        }\n        this.promoCode = userState.promoCode;\n        this.promoCode.new_amount = this.promoCode.new_amount < 0 ? 0 : this.promoCode.new_amount;\n        this.isPrime = userState.isPrime;\n      });\n\n    this.billingForm = this.formBuilder.group({\n      cardNumber: ['', [Validators.required, Validators.pattern('^[0-9]*$')]],\n      promoCode: '',\n    });\n\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.signupState = authState.signupState;\n\n        const { queryParams } = this.activatedRoute.snapshot;\n        this.planType = this.planType || this.signupState.plan_type || queryParams.plan || PlanType.PRIME;\n        this.paymentType =\n          this.paymentType || this.signupState.payment_type || queryParams.billing || PaymentType.ANNUALLY;\n        this.paymentMethod = this.paymentMethod || this.signupState.payment_method || PaymentMethod.STRIPE;\n        this.currency = this.currency || this.signupState.currency || 'USD';\n        if (!this.promoCode.value) {\n          this.promoCode.value = queryParams[PROMO_CODE_KEY] || localStorage.getItem(PROMO_CODE_KEY);\n          this.validatePromoCode();\n        }\n\n        if (SharedService.PRICING_PLANS && (this.signupState.plan_type || this.planType)) {\n          this.currentPlan = SharedService.PRICING_PLANS[this.signupState.plan_type || this.planType];\n        }\n\n        this.authState = authState;\n        if (this.inProgress && !authState.inProgress) {\n          if (authState.errorMessage) {\n            this.errorMessage = authState.errorMessage;\n          } else {\n            this.closeBillingInfo.emit(true);\n          }\n        }\n        if (this.paymentMethod === PaymentMethod.STRIPE) {\n          this.loadStripeScripts();\n        }\n        this.inProgress = authState.inProgress;\n      });\n    this.store\n      .select(state => state.bitcoin)\n      .pipe(untilDestroyed(this))\n      .subscribe((bitcoinState: BitcoinState) => {\n        this.bitcoinState = bitcoinState;\n        if (this.promoCode.is_valid) {\n          this.promoCode.new_amount = this.promoCode.new_amount < 0 ? 0 : this.promoCode.new_amount;\n          this.bitcoinState.bitcoinRequired = this.promoCode.new_amount_btc;\n        }\n        this.checkTransactionResponse = this.bitcoinState.checkTransactionResponse;\n\n        if (this.checkTransactionResponse && this.checkTransactionResponse.status === TransactionStatus.RECEIVED) {\n          this.paymentSuccess = true;\n        }\n      });\n    if (!this.isUpgradeAccount) {\n      setTimeout(() => {\n        this.validateSignupData();\n      }, 3000);\n    }\n    this.sharedService.loadPricingPlans();\n  }\n\n  timer() {\n    if (this.timerObservable) {\n      this.timerObservable.unsubscribe();\n    }\n    const timerReference: any = timer(1000, 1000);\n    this.timerObservable = timerReference.pipe(untilDestroyed(this)).subscribe((t: number) => {\n      this.seconds = (3600 - t) % 60;\n      this.minutes = (3600 - t - this.seconds) / 60;\n    });\n  }\n\n  private loadStripeScripts() {\n    this.paymentMethod = PaymentMethod.STRIPE;\n    this.getUpgradeAmount();\n    if (this.btcTimer) {\n      this.btcTimer.unsubscribe();\n      this.btcTimer = null;\n    }\n    if (this.isScriptsLoading || this.isScriptsLoaded) {\n      return;\n    }\n    this.isScriptsLoading = true;\n    this.dynamicScriptLoader\n      .load('stripe')\n      .then(data => {\n        this.dynamicScriptLoader\n          .load('stripe-key')\n          .then(stripeKeyLoaded => {\n            this.isScriptsLoaded = true;\n            this.isScriptsLoading = false;\n          })\n          .catch(() => {\n            this.isScriptsLoading = false;\n          });\n      })\n      .catch(() =>\n        this.store.dispatch(new SnackErrorPush({ message: 'Failed to load the payment processing gateway.' })),\n      );\n  }\n\n  getToken() {\n    this.inProgress = true;\n    (<any>window).Stripe.card.createToken(\n      {\n        number: this.cardNumberFormControl.value,\n        exp_month: this.expiryMonth,\n        exp_year: this.expiryYear,\n        cvc: this.cvc,\n      },\n      (status: number, response: any) => {\n        // Wrapping inside the Angular zone\n        this._zone.run(() => {\n          this.inProgress = false;\n          if (status === 200) {\n            this.stripeSignup(response.id);\n          } else {\n            this.stripePaymentValidation = {\n              message: response.error.message,\n              param: response.error.param,\n            };\n          }\n        });\n      },\n    );\n  }\n\n  getUpgradeAmount() {\n    if (this.isUpgradeAccount) {\n      this.store.dispatch(\n        new GetUpgradeAmount({\n          plan_type: this.planType,\n          payment_type: this.paymentType,\n          payment_method: this.paymentMethod,\n          is_renew: this.isRenew,\n        }),\n      );\n    }\n  }\n\n  submitForm() {\n    if (this.planType === PlanType.FREE && this.isUpgradeAccount) {\n      this.store.dispatch(new UpgradeAccount({ stripe_token: null, payment_type: null, plan_type: this.planType }));\n      return;\n    }\n    // Reset Stripe validation\n    this.stripePaymentValidation = {\n      message: '',\n      param: '',\n    };\n\n    if (this.paymentMethod === PaymentMethod.STRIPE) {\n      this.getToken();\n    } else {\n      this.bitcoinSignup();\n    }\n  }\n\n  validateSignupData() {\n    if (this.signupState && this.signupState.username && this.signupState.password) {\n      return true;\n    }\n    this.router.navigateByUrl(`/create-account?plan=${this.planType}&billing=${this.paymentType}`);\n  }\n\n  stripeSignup(stripe_token: any) {\n    if (stripe_token) {\n      if (this.isAddNewCard) {\n        this.store.dispatch(new CardAdd(stripe_token));\n        this.closeBillingInfo.emit(true);\n      } else if (this.isUpgradeAccount) {\n        this.store.dispatch(new UpgradeAccount(this.getSignupData({ stripe_token })));\n      } else {\n        this.inProgress = true;\n        this.openAccountInitModal();\n        this.openPgpService.generateUserKeys(this.signupState.username, this.signupState.password);\n        this.waitForPGPKeys({ ...this.signupState, stripe_token });\n      }\n    } else {\n      this.store.dispatch(new SnackErrorPush('Cannot create account, please reload page and try again.'));\n    }\n  }\n\n  bitcoinSignup() {\n    if (this.bitcoinState.newWalletAddress) {\n      if (this.isUpgradeAccount) {\n        this.store.dispatch(\n          new UpgradeAccount(this.getSignupData({ from_address: this.bitcoinState.newWalletAddress })),\n        );\n      } else {\n        this.inProgress = true;\n        this.openAccountInitModal();\n        this.openPgpService.generateUserKeys(this.signupState.username, this.signupState.password);\n        this.waitForPGPKeys({ ...this.signupState, from_address: this.bitcoinState.newWalletAddress });\n      }\n    } else {\n      this.store.dispatch(\n        new SnackErrorPush('No bitcoin wallet found, Unable to signup, please reload page and try again.'),\n      );\n    }\n  }\n\n  waitForPGPKeys(data: any) {\n    setTimeout(() => {\n      const userKeys = this.openPgpService.getUserKeys();\n      if (userKeys) {\n        this.pgpKeyGenerationCompleted({ ...userKeys, ...data });\n        return;\n      }\n      this.waitForPGPKeys(data);\n    }, 1000);\n  }\n\n  private getSignupData(data: any = {}) {\n    if (this.promoCode.is_valid && this.promoCode.value) {\n      data.promo_code = this.promoCode.value;\n    }\n    const currentLocale = this.translate.currentLang ? this.translate.currentLang : 'en';\n    const currentLang = LANGUAGES.find(lang => {\n      if (lang.locale === currentLocale) {\n        return true;\n      }\n    });\n    return {\n      ...data,\n      plan_type: this.planType,\n      payment_type: this.paymentType,\n      payment_method: this.paymentMethod,\n      is_renew: this.isRenew,\n      language: currentLang.name,\n    };\n  }\n\n  pgpKeyGenerationCompleted(data: any) {\n    if (this.modalRef) {\n      this.modalRef.componentInstance.pgpGenerationCompleted();\n    }\n    this.store.dispatch(new SignUp(this.getSignupData(data)));\n  }\n\n  checkTransaction() {\n    if (this.checkTransactionResponse.status === TransactionStatus.RECEIVED) {\n      this.paymentSuccess = true;\n      return;\n    }\n    const data: any = { from_address: this.bitcoinState.newWalletAddress };\n    if (this.promoCode && this.promoCode.is_valid && this.promoCode.value) {\n      data.promo_code = this.promoCode.value;\n    }\n    // check after every one minute\n    this.store.dispatch(new CheckTransaction(data));\n  }\n\n  selectBitcoinMethod(forceLoad = true) {\n    this.paymentMethod = PaymentMethod.BITCOIN;\n    this.selectPaymentType(PaymentType.ANNUALLY);\n    if (this.bitcoinState && this.bitcoinState.newWalletAddress && !forceLoad) {\n      return;\n    }\n    this.stripePaymentValidation = {\n      message: '',\n      param: '',\n    };\n    setTimeout(() => {\n      this.showPaymentPending = true;\n    }, 15000);\n\n    this.timer();\n    this.paymentSuccess = false;\n    this.createNewWallet();\n    this.btcTimer = timer(15000, 10000)\n      .pipe(untilDestroyed(this))\n      .subscribe(() => {\n        this.checkTransaction();\n      });\n  }\n\n  selectMoneroMethod() {\n    this.paymentMethod = PaymentMethod.MONERO;\n  }\n\n  selectPaymentType(paymentType: PaymentType) {\n    this.paymentType = paymentType;\n    this.getUpgradeAmount();\n    if (this.promoCode.is_valid) {\n      this.validatePromoCode();\n    }\n  }\n\n  createNewWallet() {\n    this.store.dispatch(\n      new CreateNewWallet({\n        payment_type: this.paymentType,\n        plan_type: this.planType,\n        payment_method: this.paymentMethod,\n        is_renew: this.isRenew,\n      }),\n    );\n  }\n\n  selectMonth(month: string) {\n    this.expiryMonth = month;\n    this.checkStripeValidation();\n  }\n\n  selectYear(year: string) {\n    this.expiryYear = year;\n    this.checkStripeValidation();\n  }\n\n  checkStripeValidation() {\n    this.stripePaymentValidation.message = '';\n    if (!(<any>window).Stripe.card.validateCardNumber(this.cardNumberFormControl.value)) {\n      this.stripePaymentValidation.param = 'number';\n    } else if (!(<any>window).Stripe.card.validateExpiry(this.expiryMonth, this.expiryYear)) {\n      this.stripePaymentValidation.param = 'exp_year exp_month';\n    } else if (!(<any>window).Stripe.card.validateCVC(this.cvc)) {\n      this.stripePaymentValidation.param = 'cvc';\n    }\n  }\n\n  onCancel(event: any) {\n    event.preventDefault();\n    if (this.isUpgradeAccount) {\n      this.closeBillingInfo.emit(true);\n    } else {\n      this.router.navigateByUrl('/');\n    }\n  }\n\n  openAccountInitModal() {\n    this.modalRef = this.modalService.open(UserAccountInitDialogComponent, {\n      centered: true,\n      windowClass: 'modal-sm',\n      backdrop: 'static',\n      keyboard: false,\n    });\n  }\n\n  validatePromoCode() {\n    if (this.promoCode.value) {\n      this.store.dispatch(\n        new ValidatePromoCode({\n          plan_type: this.planType,\n          payment_type: this.paymentType,\n          promo_code: this.promoCode.value,\n        }),\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideFooter.emit(false);\n    this.store.dispatch(new ClearWallet());\n    if (this.timerObservable) {\n      this.timerObservable.unsubscribe();\n    }\n\n    this.dynamicScriptLoader.removeStripeFromDOM();\n  }\n}\n","import * as QuillNamespace from 'quill';\nimport ImageResize from 'quill-image-resize-module';\n\nimport { AppConfig } from '../../environments/environment';\n\nexport const IS_ELECTRON = window.location.protocol === 'file:';\nexport const apiUrl = getBaseUrl();\nexport const PRIMARY_DOMAIN = AppConfig.production ? 'ctemplar.com' : 'dev.ctemplar.net';\nexport const PRIMARY_WEBSITE = 'https://ctemplar.com';\nexport const SENTRY_DSN = 'https://e768a553906d4f87bcb0419a151e36b0@o190614.ingest.sentry.io/5256284';\n\nexport const COLORS: string[] = [\n  '#000000',\n  '#616161',\n  '#828282',\n  '#adadad',\n  '#d2d2d2',\n  '#e9e9e9',\n  '#ffffff',\n  '#730000',\n  '#ae0000',\n  '#e60000',\n  '#ff2121',\n  '#ff7676',\n  '#ffc9c9',\n  '#ffefef',\n  '#734600',\n  '#ae6200',\n  '#e66300',\n  '#ff8c21',\n  '#ffc576',\n  '#ffe9c9',\n  '#ffe9c9',\n  '#737200',\n  '#a0ae00',\n  '#e6e300',\n  '#fff621',\n  '#fdff76',\n  '#fffdc9',\n  '#ffffef',\n  '#0f7300',\n  '#0eae00',\n  '#1ee600',\n  '#21ff38',\n  '#76ff76',\n  '#c9ffd0',\n  '#effff1',\n  '#006e73',\n  '#00aeac',\n  '#00dce6',\n  '#21f4ff',\n  '#76fff4',\n  '#c9fffc',\n  '#effeff',\n  '#000173',\n  '#0016ae',\n  '#0100e6',\n  '#5555ff',\n  '#7681ff',\n  '#cdc9ff',\n  '#f1efff',\n  '#530073',\n  '#7500ae',\n  '#ba00e6',\n  '#e955ff',\n  '#de76ff',\n  '#f2c9ff',\n  '#fcefff',\n];\n\nexport const FOLDER_COLORS: string[] = [\n  '#ced4da',\n  '#868e96',\n  '#212529',\n  '#da77f2',\n  '#be4bdb',\n  '#8e44ad',\n  '#f783ac',\n  '#e64980',\n  '#a61e4d',\n  '#748ffc',\n  '#4c6ef5',\n  '#364fc7',\n  '#9775fa',\n  '#7950f2',\n  '#5f3dc4',\n  '#ff8787',\n  '#fa5252',\n  '#c0392b',\n  '#4dabf7',\n  '#3498db',\n  '#1864ab',\n  '#2ecc71',\n  '#27ae60',\n  '#16a085',\n  '#ffd43b',\n  '#fab005',\n  '#e67e22',\n  '#3bc9db',\n  '#15aabf',\n  '#0b7285',\n  '#a9e34b',\n  '#82c91e',\n  '#5c940d',\n  '#f39c12',\n  '#fd7e14',\n  '#e74c3c',\n];\n\nexport const LANGUAGES: Language[] = [\n  { name: 'English', locale: 'en' },\n  { name: 'Arabic', locale: 'ar' },\n  { name: 'Chinese', locale: 'zh' },\n  { name: 'French', locale: 'fr' },\n  { name: 'German', locale: 'de' },\n  { name: 'Italian', locale: 'it' },\n  { name: 'Portuguese', locale: 'pt' },\n  { name: 'Russian', locale: 'ru' },\n  { name: 'Spanish', locale: 'es' },\n  { name: 'Ukrainian', locale: 'uk' },\n];\n\nexport interface Language {\n  name: string;\n  locale: string;\n}\n\nexport const ESCAPE_KEYCODE = 27;\nexport const MAX_FOLDERS_COUNT = 5;\n\nexport const VALID_EMAIL_REGEX: any = /^(([^\\s\"(),.:;<>@[\\\\\\]]+(\\.[^\\s\"(),.:;<>@[\\\\\\]]+)*)|(\".+\"))@((\\[(?:\\d{1,3}\\.){3}\\d{1,3}])|(([\\dA-Za-z\\-]+\\.)+[A-Za-z]{2,}))$/;\n\nexport const FONTS = ['lato', 'roboto', 'arial', 'times-new-roman'];\nexport const COMPOSE_COLORS = ['none', 'red', 'blue', 'green', 'white', 'black', 'pink', 'grey'];\nexport const SIZES = [10, 12, 14, 16, 18, 20, 24, 32];\nexport const BACKGROUNDS = ['none', 'red', 'blue', 'green', 'white', 'black', 'pink', 'grey'];\nexport const AUTOSAVE_DURATION = ['none', '5000', '10000', '20000', '30000'];\nexport const DEFAULT_FONT_SIZE = 14;\n\nexport const REFFERAL_CODE_KEY = 'referral_code';\nexport const PROMO_CODE_KEY = 'promo_code';\nexport const REFFERAL_ID_KEY = 'cjevent';\nexport const JWT_AUTH_COOKIE = 'jwt_auth_cookie';\nexport const REMEMBER_ME = 'remember_me';\nexport const SYNC_DATA_WITH_STORE = 'sync_data_with_store';\nexport const NOT_FIRST_LOGIN = 'not_first_login';\n\nexport const SummarySeparator = '';\nconst Quill: any = QuillNamespace;\n\nQuill.register('modules/imageResize', ImageResize);\n\nexport const QUILL_FORMATTING_MODULES = {\n  toolbar: [\n    ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n    ['blockquote'],\n    [{ list: 'ordered' }, { list: 'bullet' }],\n    [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\n    [{ direction: 'rtl' }], // text direction\n    [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\n    [{ color: COLORS }, { background: COLORS }], // dropdown with defaults from theme\n    [{ align: [] as any[] }],\n    ['clean'], // remove formatting button\n    ['link', 'image'], // link /not-allowed-in-simple-version(and image, video)\n  ],\n  imageResize: true,\n};\n\nfunction getBaseUrl() {\n  const config = getWindowConfig();\n  if (AppConfig.production) {\n    return config.host === 'mail.ctemplarpizuduxk3fkwrieizstx33kg5chlvrh37nz73pv5smsvl6ad.onion'\n      ? 'http://api.ctemplarpizuduxk3fkwrieizstx33kg5chlvrh37nz73pv5smsvl6ad.onion/'\n      : 'https://api.ctemplar.com/';\n  }\n  if (AppConfig.local) {\n    return 'http://localhost:8000/';\n  }\n  if (config.host === 'test.ctemplar.net') {\n    return 'https://testapi.ctemplar.net/';\n  }\n  return 'https://devapi.ctemplar.net/';\n}\n\nexport function getWindowConfig(): { host: string; protocol: string } {\n  let { protocol } = window.location;\n  let { host } = location;\n  if (IS_ELECTRON || location.hostname === 'localhost') {\n    protocol = 'https:';\n    host = AppConfig.production ? 'mail.ctemplar.com' : 'dev.ctemplar.net';\n  }\n  return { host, protocol };\n}\n\nexport function getEmailDomain(): string {\n  const config = getWindowConfig();\n  if (AppConfig.production) {\n    return 'ctemplar.com';\n  }\n  if (AppConfig.local) {\n    return 'dev.ctemplar.com';\n  }\n  if (config.host === 'test.ctemplar.net') {\n    return 'test.ctemplar.com';\n  }\n  return 'dev.ctemplar.com';\n}\n","import { Directive, ElementRef, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[clickOutside]',\n})\nexport class ClickOutsideDirective {\n  constructor(private elementReference: ElementRef) {}\n\n  @Output()\n  public clickOutside = new EventEmitter<MouseEvent>();\n\n  @HostListener('document:click', ['$event', '$event.target'])\n  public onClick(event: MouseEvent, targetElement: HTMLElement): void {\n    if (!targetElement) {\n      return;\n    }\n\n    const clickedInside = this.elementReference.nativeElement.contains(targetElement);\n    if (!clickedInside) {\n      this.clickOutside.emit(event);\n    }\n  }\n}\n","import { Directive, ViewContainerRef, TemplateRef, Input } from '@angular/core';\n\nimport { BrowserDetectorService } from '../services/browser-detector.service';\n\n@Directive({\n  selector: '[showInIE]',\n})\nexport class IsIeDirective {\n  constructor(\n    private templateReference: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private browserDetector: BrowserDetectorService,\n  ) {}\n\n  @Input()\n  set showInIE(value: boolean) {\n    if (value) {\n      if (this.browserDetector.isIEBrowser()) {\n        this.viewContainer.createEmbeddedView(this.templateReference);\n      } else {\n        this.viewContainer.clear();\n      }\n    } else if (!this.browserDetector.isIEBrowser()) {\n      this.viewContainer.createEmbeddedView(this.templateReference);\n    } else {\n      this.viewContainer.clear();\n    }\n  }\n}\n","import { Component, Input, OnInit, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-loading-spinner',\n  templateUrl: './loading-spinner.component.html',\n  styleUrls: ['./loading-spinner.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LoadingSpinnerComponent implements OnInit {\n  @Input() showSpinner: boolean;\n\n  @Input() optionalClasses = '';\n\n  // Width and Height in Pixel unit\n  @Input() width = 40;\n  @Input() height = 40;\n  @Input() color = '#3a4e63';\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"loader {{ optionalClasses }}\" *ngIf=\"showSpinner\">\n  <svg\n    version=\"1.1\"\n    id=\"loader-1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    x=\"0px\"\n    y=\"0px\"\n    [style.width.px]=\"width\"\n    [style.height.px]=\"height\"\n    viewBox=\"0 0 50 50\"\n    style=\"enable-background: new 0 0 50 50\"\n    xml:space=\"preserve\"\n  >\n    <path\n      [attr.fill]=\"color\"\n      d=\"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z\"\n    >\n      <animateTransform\n        attributeType=\"xml\"\n        attributeName=\"transform\"\n        type=\"rotate\"\n        from=\"0 25 25\"\n        to=\"360 25 25\"\n        dur=\"0.6s\"\n        repeatCount=\"indefinite\"\n      />\n    </path>\n  </svg>\n</div>\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\nimport { LOADING_IMAGE } from '../../store/services';\n\n@Component({\n  selector: 'app-loading',\n  templateUrl: './loading.component.html',\n  styleUrls: ['./loading.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LoadingComponent {\n  @Input() isLoading?: boolean;\n\n  @Input() quote?: any;\n\n  loadingImage = LOADING_IMAGE;\n\n  constructor() {}\n}\n","<div\n  class=\"loading\"\n  style=\"\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #3a4e63;\n    width: 100%;\n    height: 100%;\n  \"\n  [hidden]=\"!isLoading\"\n>\n  <div>\n    <img class=\"logo\" style=\"width: 400px; height: 300px\" [src]=\"loadingImage | safe: 'url'\" />\n    <p class=\"quote\">{{ quote.content }}</p>\n    <p class=\"author\">{{ quote.author }}</p>\n  </div>\n</div>\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'creditcardnumber',\n})\nexport class CreditCardNumberPipe implements PipeTransform {\n  transform(plainCreditCard: string): string {\n    const defaultCardNumberLength = 16;\n    if (plainCreditCard.length < 16) {\n      plainCreditCard = plainCreditCard.padStart(defaultCardNumberLength, '0');\n    }\n    return plainCreditCard\n      .replace(/\\s+/g, '')\n      .replace(/(\\d{4})/g, '$1 ')\n      .replace(/\\d{4}(?= \\d{4})/g, 'xxxx')\n      .trim();\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n/**\n * @name EmailFormatPipe\n * @description Return formatted email fully with pure email and display name,\n * @description if flagged `isHtmlFormat`, it would return formatted email with html entities.\n * @example If flagged isHtmlFormat, `Display Name&nbsp;&lt;example@example.com&gt;, if not `Display Name <example&example.com>`\n * @params email: Email address to format\n * @params displayName: Display Name to format\n * @params isHtmlFormat: Flag for indicating whether html format or not\n * @returns fomatted email\n */\n@Pipe({\n  name: 'emailFormat',\n})\nexport class EmailFormatPipe implements PipeTransform {\n  static transformToFormattedEmail(email: string, displayName = '', isHtmlFormat = false, isTruncate = false) {\n    if (!email) return '';\n\n    let formattedEmail = email.toLowerCase().trim();\n    if (!displayName || displayName === formattedEmail.split('@')[0]) {\n      return isTruncate ? EmailFormatPipe.getTrucatedString(formattedEmail) : formattedEmail;\n    } else if (isHtmlFormat) {\n      return isTruncate\n        ? EmailFormatPipe.getTrucatedString(`${displayName.trim()}&nbsp;&lt;${formattedEmail}&gt;`)\n        : `${displayName.trim()}&nbsp;&lt;${formattedEmail}&gt;`;\n    } else {\n      return isTruncate\n        ? EmailFormatPipe.getTrucatedString(`${displayName.trim()} <${formattedEmail}>`)\n        : `${displayName.trim()} <${formattedEmail}>`;\n    }\n  }\n\n  transform(email: string, displayName = '', isHtmlFormat = false, isTruncate = false): string {\n    return EmailFormatPipe.transformToFormattedEmail(email, displayName, isHtmlFormat, isTruncate);\n  }\n  static getTrucatedString(content: string): string {\n    const MAX_LENGTH_EMAIL = 40;\n    if (content.length > MAX_LENGTH_EMAIL) {\n      return content.slice(0, MAX_LENGTH_EMAIL) + '...';\n    }\n    return content;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filename',\n})\nexport class FilenamePipe implements PipeTransform {\n  static tranformToFilename(value: any) {\n    if (!value) {\n      return value;\n    }\n\n    const filePathTokens = value.split('/');\n    return filePathTokens[filePathTokens.length - 1];\n  }\n\n  transform(value: any, arguments_?: any): any {\n    return FilenamePipe.tranformToFilename(value);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filesize',\n})\nexport class FilesizePipe implements PipeTransform {\n  private units = ['B', 'KB', 'MB', 'GB', 'TB'];\n\n  transform(bytes: any, preferredUnit?: any, precision = 2): any {\n    if (isNaN(Number.parseFloat(String(bytes))) || !isFinite(bytes)) {\n      return '?';\n    }\n\n    let unit = 0;\n\n    // Check if preferred unit exist preset the unit\n    if (preferredUnit && this.units.includes(preferredUnit)) {\n      while (this.units[unit] !== preferredUnit) {\n        unit++;\n      }\n    }\n\n    while (bytes >= 1024) {\n      bytes /= 1024;\n\n      if (!preferredUnit) {\n        unit++;\n      }\n    }\n\n    return `${bytes.toFixed(+precision)} ${this.units[unit]}`;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport { MailAction } from '../../store/datatypes';\n\n@Pipe({\n  name: 'lastAction',\n})\nexport class LastActionPipe implements PipeTransform {\n  transform(value: MailAction, ...arguments_: any[]): any {\n    switch (value) {\n      case MailAction.FORWARD:\n        return 'share';\n      case MailAction.REPLY_ALL:\n        return 'reply-all';\n      default:\n        return value.toLowerCase();\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport * as moment from 'moment-timezone';\n\nimport { DateTimeUtilService } from '../../store/services/datetime-util.service';\n\n@Pipe({\n  name: 'momentDate',\n})\nexport class MomentDatePipe implements PipeTransform {\n  constructor(private dateTimeUtilService: DateTimeUtilService) {}\n\n  transform(value: string, format = 'mediumDate', timezone?: string): string {\n    if (value) {\n      if (format === 'mail-list') {\n        format = moment().isSame(moment(value), 'day') ? 'HH:mm' : 'MMM D, YYYY';\n      }\n      return this.dateTimeUtilService.formatDateTimeStr(value, format, timezone);\n    }\n    return '';\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport * as moment from 'moment-timezone';\n\n@Pipe({\n  name: 'remainingTime',\n})\nexport class RemainingTimePipe implements PipeTransform {\n  transform(value: any, hoursOnly = false): any {\n    if (!value) {\n      return '';\n    }\n\n    if (hoursOnly) {\n      return this.getTimeRemainingFromHours(value);\n    }\n\n    return this.getTimeRemaining(value);\n  }\n\n  private getTimeRemainingFromHours(hours: number) {\n    const seconds = hours * 60 * 60;\n    return this.getFormattedTime(seconds);\n  }\n\n  private getTimeRemaining(date: any) {\n    const now = moment();\n    const end = moment(date);\n    const duration = moment.duration(end.diff(now));\n    const seconds = duration.asSeconds();\n\n    return this.getFormattedTime(seconds);\n  }\n\n  private getFormattedTime(seconds: number) {\n    if (seconds < 0) {\n      return 'progress';\n    }\n    const days = Math.floor(seconds / (3600 * 24));\n    seconds -= days * 3600 * 24;\n    const hrs = Math.floor(seconds / 3600);\n    seconds -= hrs * 3600;\n    const mnts = Math.floor(seconds / 60);\n    seconds -= hrs * 3600;\n    return `${days}d ${this.padLeft(hrs)}:${this.padLeft(mnts)}`;\n  }\n\n  private padLeft(number: number, size = 2) {\n    let s = `${number}`;\n    while (s.length < size) {\n      s = `0${s}`;\n    }\n    return s;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'linebreaktobrtag',\n})\nexport class LineBreakToBrTag implements PipeTransform {\n  transform(mailContent: string): string {\n    mailContent = mailContent.replace(new RegExp('\\r?\\n', 'g'), '<br />');\n    return mailContent;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeUrl } from '@angular/platform-browser';\nimport * as xss from 'xss';\nimport * as cssfilter from 'cssfilter';\nimport * as juice from 'juice';\n\nimport { apiUrl, PRIMARY_DOMAIN } from '../config';\n\n@Pipe({\n  name: 'safe',\n})\nexport class SafePipe implements PipeTransform {\n  static hasExternalImages: boolean;\n\n  constructor(private sanitizer: DomSanitizer) {}\n\n  public transform(value: any, type = '', disableExternalImages?: boolean, fromEmail?: string): SafeHtml | SafeUrl {\n    switch (type.toLowerCase()) {\n      case 'html':\n        value = this.removeTitle(value);\n        const cssFilter = new cssfilter.FilterCSS({\n          onIgnoreAttr: (styleName: any, styleValue: string) => {\n            const blackList: any = {\n              position: ['fixed'],\n            };\n            if (blackList.hasOwnProperty(styleName)) {\n              const blackValueList = blackList[styleName];\n              const value_ = styleValue.replace(/!important/g, '').trim();\n              if (blackValueList.includes(value_)) {\n                return '';\n              }\n            }\n            const safeAttributeValue = cssfilter.safeAttrValue(styleName, styleValue);\n            if (safeAttributeValue) {\n              return `${styleName}:${safeAttributeValue}`;\n            }\n            return '';\n          },\n        });\n        // @ts-ignore\n        let xssValue = xss(value, {\n          stripIgnoreTag: true,\n          stripIgnoreTagBody: ['script', 'style'],\n          onTag: (tag: string, html: string, options: any) => {\n            if (tag === 'a' && !(options && options.isClosing === true)) {\n              let htmlAttributes = '';\n\n              // \"<a href='' target=''>\" => \"href='' target=''\"\n              const reg = /\\s/;\n              const match = reg.exec(html);\n              const i = match ? match.index : -1;\n              if (i !== -1) {\n                htmlAttributes = html.slice(i + 1, -1).trim();\n              }\n\n              let containsTargetAttribute = false;\n              let attributesHtml = xss.parseAttr(htmlAttributes, (attributeName, attributeValue) => {\n                if (attributeName === 'target') {\n                  containsTargetAttribute = true;\n                  return `${attributeName}=\"_blank\"`;\n                }\n\n                // call `onTagAttr()`\n                const whiteList = xss.getDefaultWhiteList();\n                const whiteAttributeList = whiteList[tag] || [];\n                whiteAttributeList.push('style');\n                const isWhiteAttribute = whiteAttributeList.includes(attributeName);\n                const returnValue1 = xss.onTagAttr(tag, attributeName, attributeValue, isWhiteAttribute) || '';\n                if (returnValue1 !== '') {\n                  return returnValue1;\n                }\n\n                if (isWhiteAttribute) {\n                  // call `safeAttrValue()`\n                  attributeValue = xss.safeAttrValue(tag, attributeName, attributeValue, cssFilter);\n                  if (attributeValue) {\n                    return `${attributeName}=\"${attributeValue}\"`;\n                  }\n                  return attributeName;\n                }\n                // call `onIgnoreTagAttr()`\n                const returnValue2 = xss.onIgnoreTagAttr(tag, attributeName, attributeValue, isWhiteAttribute) || '';\n                return returnValue2;\n              });\n\n              if (!containsTargetAttribute) {\n                attributesHtml += ' target=\"_blank\" rel=\"noopener noreferrer\"';\n              }\n\n              let outputHtml = `<${tag}`;\n              if (attributesHtml) {\n                outputHtml += ` ${attributesHtml}`;\n              }\n              outputHtml += '>';\n              return outputHtml;\n            }\n          },\n          onIgnoreTagAttr: (tag: string, attributeName: string, attributeValue: string) => {\n            if (attributeName === 'style' || attributeName === 'bgcolor') {\n              const safeAttributeValue = xss.safeAttrValue(tag, attributeName, attributeValue, cssFilter);\n              return `${attributeName}=\"${safeAttributeValue}\"`;\n            }\n            if (\n              attributeName === 'class' &&\n              (attributeValue === 'gmail_quote ctemplar_quote' || attributeValue === 'gmail_quote')\n            ) {\n              return `${attributeName}=\"${attributeValue}\"`;\n            }\n          },\n          onTagAttr: (tag: string, attributeName: string, attributeValue: string) => {\n            if (tag === 'img' && attributeName === 'src' && attributeValue.indexOf('data:image/png;base64,') === 0) {\n              return `${attributeName}=\"${xss.friendlyAttrValue(attributeValue)}\"`;\n            }\n            if (disableExternalImages && tag === 'img' && attributeName === 'src') {\n              if (\n                !(attributeValue.indexOf(`https://${PRIMARY_DOMAIN}`) === 0 || attributeValue.indexOf(apiUrl) === 0)\n              ) {\n                SafePipe.hasExternalImages = true;\n                return `${attributeName}=\"\"`;\n              }\n            }\n            // Return nothing, means keep the default handling measure\n          },\n        });\n        xssValue = this.replaceLinksInText(xssValue);\n        return this.sanitizer.bypassSecurityTrustHtml(xssValue);\n      case 'url':\n        return this.sanitizer.bypassSecurityTrustUrl(value);\n      case 'sanitize':\n        // Move style from style tag to inline style\n        value = juice(value);\n        // Sanitize Mail\n        value = SafePipe.processSanitization(value, disableExternalImages);\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n      default:\n        throw new Error(`Invalid safe type specified: ${type}`);\n    }\n  }\n\n  static processSanitization(value: string, disableExternalImages: boolean) {\n    const allowedTags: any = {\n      a: [],\n      b: [],\n      br: [],\n      div: [],\n      font: [],\n      h1: [],\n      h2: [],\n      h3: [],\n      h4: [],\n      h5: [],\n      h6: [],\n      hr: [],\n      img: [],\n      label: [],\n      li: [],\n      ol: [],\n      p: [],\n      span: [],\n      strong: [],\n      table: [],\n      td: [],\n      th: [],\n      tr: [],\n      u: [],\n      ul: [],\n      i: [],\n    };\n    const headingAttributes = ['align', 'dir', 'id', 'style'];\n    const allowedAttributes: any = {\n      a: ['href', 'style', 'target'],\n      b: ['style'],\n      br: ['style'],\n      div: ['align', 'dir', 'style'],\n      font: ['color', 'face', 'size', 'style'],\n      h1: headingAttributes,\n      h2: headingAttributes,\n      h3: headingAttributes,\n      h4: headingAttributes,\n      h5: headingAttributes,\n      h6: headingAttributes,\n      hr: ['align', 'size', 'width'],\n      img: ['align', 'border', 'height', 'hspace', 'src', 'style', 'usemap', 'vspace', 'width'],\n      label: ['id', 'style'],\n      li: ['dir', 'style', 'type'],\n      ol: ['dir', 'style', 'type'],\n      p: ['align', 'dir', 'style'],\n      span: ['style'],\n      strong: ['style'],\n      table: ['align', 'bgcolor', 'border', 'cellpadding', 'cellspacing', 'dir', 'frame', 'rules', 'style', 'width'],\n      td: [\n        'abbr',\n        'align',\n        'bgcolor',\n        'colspan',\n        'dir',\n        'height',\n        'lang',\n        'rowspan',\n        'scope',\n        'style',\n        'valign',\n        'width',\n      ],\n      th: [\n        'abbr',\n        'align',\n        'background',\n        'bgcolor',\n        'colspan',\n        'dir',\n        'height',\n        'lang',\n        'scope',\n        'style',\n        'valign',\n        'width',\n      ],\n      tr: ['align', 'bgcolor', 'dir', 'style', 'valign'],\n      u: ['style'],\n      ul: ['dir', 'style'],\n      i: ['style'],\n    };\n    // @ts-ignore\n    value = xss(value, {\n      whiteList: allowedTags,\n      stripIgnoreTag: true,\n      stripIgnoreTagBody: ['script', 'style'],\n      onIgnoreTagAttr: (tag: string, name: string, attribute: string) => {\n        if (name !== 'class') {\n          // get attr whitelist for specific tag\n          const attributeWhitelist = allowedAttributes[tag];\n          // if the current attr is whitelisted, should be added to tag\n          if (attributeWhitelist.includes(name)) {\n            if (disableExternalImages && tag === 'img' && name === 'src') {\n              if (!(attribute.indexOf(`https://${PRIMARY_DOMAIN}`) === 0 || attribute.indexOf(apiUrl) === 0)) {\n                SafePipe.hasExternalImages = true;\n                return `${attribute}=\"\"`;\n              }\n            }\n            return `${name}=\"${xss.escapeAttrValue(attribute)}\"`;\n          }\n        }\n      },\n    });\n    return value;\n  }\n\n  replaceLinksInText(inputText: string) {\n    if (!/<[a-z][\\S\\s]*>/i.test(inputText)) {\n      if (typeof inputText === 'string') {\n        // URLs starting with http://, https://, or ftp://\n        const urlPattern = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n\n        // URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n        const pseudoUrlPattern = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n\n        // Change email addresses to mailto:: links.\n        const emailAddressPattern = /(\\w+@[a-zA-Z_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n\n        inputText = inputText\n          .replace(urlPattern, '<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"$1\">$1</a>')\n          .replace(pseudoUrlPattern, '$1<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://$2\">$2</a>')\n          .replace(emailAddressPattern, '<a href=\"mailto:$1\">$1</a>');\n      }\n      inputText = inputText.replace(/\\n/g, '<br>');\n    }\n    return inputText;\n  }\n\n  private removeTitle(value: string) {\n    const element = document.createElement('div');\n    element.innerHTML = value;\n    if (element.querySelectorAll('title').length > 0) {\n      element.querySelectorAll('title')[0].innerText = '';\n      return element.innerHTML;\n    }\n    return value;\n  }\n}\n","import { Component, OnInit, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'app-progress-bar',\n  templateUrl: './progress-bar.component.html',\n  styleUrls: ['./progress-bar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProgressBarComponent implements OnInit {\n  @Input() active: boolean;\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"loader\" *ngIf=\"active\"></div>\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BrowserDetectorService {\n  constructor() {}\n\n  isIEBrowser() {\n    return !!this.checkIEVersion();\n  }\n\n  private checkIEVersion() {\n    // Ref: https://stackoverflow.com/a/46116505/3502008\n    const ua = window.navigator.userAgent;\n\n    const msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n      // IE 10 or older => return version number\n      return Number.parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n\n    const trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n      // IE 11 => return version number\n      const rv = ua.indexOf('rv:');\n      return Number.parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n\n    // other browser\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { AppConfig } from '../../../environments/environment';\n\ninterface Scripts {\n  name: string;\n  src: string;\n}\n\nexport const ScriptStore: Scripts[] = [{ name: 'stripe', src: 'https://js.stripe.com/v2/' }];\n\ndeclare let document: any;\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DynamicScriptLoaderService {\n  private scripts: any = {};\n\n  constructor() {\n    if (AppConfig.production) {\n      ScriptStore.push({ name: 'stripe-key', src: 'assets/js/stripe-key.js' });\n    } else {\n      ScriptStore.push({ name: 'stripe-key', src: 'assets/js/stripe-test-key.js' });\n    }\n    ScriptStore.forEach((script: any) => {\n      this.scripts[script.name] = {\n        loaded: false,\n        src: script.src,\n      };\n    });\n  }\n\n  load(...scripts: string[]) {\n    const promises: any[] = [];\n    scripts.forEach(script => promises.push(this.loadScript(script)));\n    return Promise.all(promises);\n  }\n\n  loadScript(name: string) {\n    return new Promise((resolve, reject) => {\n      if (!this.scripts[name].loaded) {\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = this.scripts[name].src;\n        script.id = name;\n\n        script.addEventListener('load', () => {\n          this.scripts[name].loaded = true;\n          resolve({ script: name, loaded: true, status: 'Loaded' });\n        });\n        script.addEventListener('error', (error: any) => resolve({ script: name, loaded: false, status: 'Loaded' }));\n        document.querySelectorAll('head')[0].append(script);\n      } else {\n        resolve({ script: name, loaded: true, status: 'Already Loaded' });\n      }\n    });\n  }\n\n  removeStripeFromDOM() {\n    if (document.querySelectorAll('iframe')[0]) {\n      document.querySelectorAll('body')[0].removeChild(document.querySelectorAll('iframe')[0]);\n      this.removeStripeFromDOM();\n    } else {\n      if (this.scripts.stripe.loaded && document.querySelector('#stripe')) {\n        document.querySelectorAll('head')[0].removeChild(document.querySelector('#stripe'));\n        this.scripts.stripe.loaded = false;\n      }\n      if (this.scripts['stripe-key'].loaded && document.querySelector('#stripe-key')) {\n        document.querySelectorAll('head')[0].removeChild(document.querySelector('#stripe-key'));\n        this.scripts['stripe-key'].loaded = false;\n      }\n    }\n  }\n}\n","import { AppConfig } from '../../../environments/environment';\n\nexport class LoggerService {\n  constructor() {}\n\n  public static log(message?: any, ...optionalParameters: any[]) {\n    if (AppConfig.production === false) {\n      console.log(message, optionalParameters);\n    }\n  }\n\n  public static error(message?: any, ...optionalParameters: any[]) {\n    if (AppConfig.production === false) {\n      console.error(message, optionalParameters);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../store/datatypes';\nimport { SnackPush } from '../../store/actions';\n@Injectable({\n  providedIn: 'root',\n})\nexport class PushNotificationService {\n  public permission: Permission;\n\n  constructor(private store: Store<AppState>) {\n    if (this.isSupported()) {\n      this.permission = Notification.permission;\n    }\n  }\n\n  public isSupported(): boolean {\n    return 'Notification' in window;\n  }\n\n  isDefault() {\n    return this.permission === 'default';\n  }\n\n  requestPermission(): void {\n    if ('Notification' in window) {\n      Notification.requestPermission()\n        .then(permission => {\n          this.permission = permission;\n        })\n        .catch(() => {});\n    }\n  }\n\n  create(title: string, options?: PushNotificationOptions): any {\n    if (!('Notification' in window)) {\n      this.store.dispatch(new SnackPush({ message: 'Notifications are not available in this environment' }));\n      return;\n    }\n    return new Observable(function (obs) {\n      const _notify = new Notification(title, options);\n      _notify.addEventListener('show', function (e) {\n        return obs.next({\n          notification: _notify,\n          event: e,\n        });\n      });\n      _notify.addEventListener('click', function (e) {\n        return obs.next({\n          notification: _notify,\n          event: e,\n        });\n      });\n      _notify.addEventListener('error', function (e) {\n        return obs.error({\n          notification: _notify,\n          event: e,\n        });\n      });\n      _notify.onclose = function () {\n        return obs.complete();\n      };\n    });\n  }\n\n  generateNotification(source: Array<any>): void {\n    source.forEach(item => {\n      const options = {\n        body: item.alertContent,\n        icon: '../resource/images/bell-icon.png',\n      };\n      const notify = this.create(item.title, options).subscribe();\n    });\n  }\n}\n\nexport declare type Permission = 'denied' | 'granted' | 'default';\n\nexport class PushNotificationOptions {\n  body?: string;\n\n  icon?: string;\n\n  tag?: string;\n\n  data?: any;\n\n  renotify?: boolean;\n\n  silent?: boolean;\n\n  sound?: string;\n\n  noscreen?: boolean;\n\n  sticky?: boolean;\n\n  dir?: 'auto' | 'ltr' | 'rtl';\n\n  lang?: string;\n\n  vibrate?: number[];\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, UserState } from '../../store/datatypes';\n\nexport enum ThemeMode {\n  DARK,\n  LIGHT,\n}\n\n@UntilDestroy()\n@Injectable({\n  providedIn: 'root',\n})\nexport class ThemeToggleService {\n  private readonly LIGHT_THEME_CLASS_NAME = 'theme-light';\n  private readonly DARK_THEME_CLASS_NAME = 'theme-dark';\n\n  private isDarkMode = false;\n  private isForceLightMode = false;\n  public theme$ = new BehaviorSubject<ThemeMode>(ThemeMode.LIGHT);\n\n  constructor(private store: Store<AppState>) {\n    /**\n     * Get user settings\n     */\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((user: UserState) => {\n        const isDarkMode = user.settings.is_night_mode;\n        if (this.isDarkMode !== isDarkMode) {\n          this.isDarkMode = isDarkMode;\n          this.updateTheme(this.isDarkMode);\n        }\n      });\n  }\n\n  private updateTheme(isDarkMode: boolean) {\n    if (isDarkMode && !this.isForceLightMode) {\n      document.body.classList.add(this.DARK_THEME_CLASS_NAME);\n      document.body.classList.remove(this.LIGHT_THEME_CLASS_NAME);\n      this.theme$.next(ThemeMode.DARK);\n    } else {\n      document.body.classList.add(this.LIGHT_THEME_CLASS_NAME);\n      document.body.classList.remove(this.DARK_THEME_CLASS_NAME);\n      this.theme$.next(ThemeMode.LIGHT);\n    }\n  }\n\n  public forceLightModeTheme() {\n    this.isForceLightMode = true;\n    this.updateTheme(false);\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, UserState, AuthState } from '../../store/datatypes';\nimport { WebSocketNewMessage } from '../../store/websocket.store';\nimport { Logout } from '../../store/actions';\nimport { Mail } from '../../store/models';\nimport { apiUrl } from '../config';\n\nimport { LoggerService } from './logger.service';\n\n@UntilDestroy()\n@Injectable({\n  providedIn: 'root',\n})\nexport class WebsocketService {\n  private webSocket: WebSocket;\n\n  private retryCount = 1;\n\n  private userId: number = Date.now();\n\n  private isAuthenticated = false;\n\n  constructor(private store: Store<AppState>) {\n    this.store\n      .select(state => state.user)\n      .pipe(untilDestroyed(this))\n      .subscribe((userState: UserState) => {\n        this.userId = userState.id ? userState.id : this.userId;\n      });\n\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.isAuthenticated = authState.isAuthenticated;\n      });\n  }\n\n  public connect() {\n    const url = `${apiUrl.replace('http', 'ws')}connect/?user_id=${this.userId}`;\n    this.webSocket = new WebSocket(url);\n    this.webSocket.onmessage = response => {\n      const data = JSON.parse(response.data);\n      if (data.logout === true || data.reason === 'INVALID_TOKEN') {\n        this.disconnect();\n        this.store.dispatch(new Logout(data));\n      } else {\n        this.store.dispatch(new WebSocketNewMessage(data));\n      }\n    };\n\n    this.webSocket.onclose = e => {\n      if (this.isAuthenticated) {\n        LoggerService.log(\n          `Socket is closed. Reconnect will be attempted in ${1000 + this.retryCount * 1000} second. ${e.reason}`,\n        );\n        setTimeout(() => {\n          this.connect();\n          this.retryCount += 1;\n        }, 1000 + this.retryCount * 1000);\n      } else {\n        LoggerService.log('Socket is closed.');\n      }\n    };\n\n    this.webSocket.addEventListener('error', (error: any) => {\n      LoggerService.error('Socket encountered error: ', error.message, 'Closing socket');\n      this.webSocket.close();\n    });\n  }\n\n  public disconnect() {\n    if (this.webSocket) {\n      this.webSocket.close();\n      this.webSocket = null;\n    }\n  }\n}\n\nexport interface Message extends Object {\n  id: number;\n  folder: string;\n  parent_id?: number;\n  mail: Mail;\n  total_count?: number;\n  marked_as_read?: boolean;\n  is_outbox_mail_sent?: boolean;\n  unread_count?: any;\n  folders: string[];\n\n  /**\n   * Id's list when a messsage is marked as read/unread.\n   */\n  ids?: Array<number>;\n  used_storage: number;\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatIconModule } from '@angular/material/icon';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TagInputModule } from 'ngx-chips';\n\nimport { CreateFolderComponent } from '../mail/dialogs/create-folder/create-folder.component';\nimport { PaymentFailureNoticeComponent } from '../mail/dialogs/payment-failure-notice/payment-failure-notice.component';\n\nimport { UsersBillingInfoComponent } from './components/users-billing-info/users-billing-info.component';\nimport { SpinnerComponent } from './spinner/components/spinner.component';\nimport { SpinnerService } from './spinner/services/spinner.service';\nimport { SpinnerImageComponent } from './spinner-image/spinner-image.component';\nimport { LoadingComponent } from './loading/loading.component';\nimport { LoadingSpinnerComponent } from './loading-spinner/loading-spinner.component';\nimport { SafePipe } from './pipes/safe.pipe';\nimport { ProgressBarComponent } from './progress-bar/progress-bar.component';\nimport { DynamicScriptLoaderService } from './services/dynamic-script-loader.service';\nimport { FilenamePipe } from './pipes/filename.pipe';\nimport { PricingPlansComponent } from './components/pricing-plans/pricing-plans.component';\nimport { FilesizePipe } from './pipes/filesize.pipe';\nimport { RemainingTimePipe } from './pipes/remaining-time.pipe';\nimport { ClickOutsideDirective } from './directives/click-outside.directive';\nimport { CountdownTimerComponent } from './components/countdown-timer/countdown-timer.component';\nimport { BrowserDetectorService } from './services/browser-detector.service';\nimport { IsIeDirective } from './directives/is-ie.directive';\nimport { MomentDatePipe } from './pipes/moment-date.pipe';\nimport { StripeFormComponent } from './components/stripe-form/stripe-form.component';\nimport { BitcoinFormComponent } from './components/bitcoin-form/bitcoin-form.component';\nimport { LastActionPipe } from './pipes/last-action.pipe';\nimport { CreditCardNumberPipe } from './pipes/creditcard-number.pipe';\nimport { EmailFormatPipe } from './pipes/email-formatting.pipe';\nimport { LineBreakToBrTag } from './pipes/replace-linebreak-brtag.pipe';\nimport { CircleBarSpinnerComponent } from './circle-bar-spinner/circle-bar-spinner.component';\nimport { ThemeToggleService } from './services/theme-toggle-service';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, TranslateModule, TagInputModule, MatIconModule, NgbModule],\n  declarations: [\n    SpinnerComponent,\n    SpinnerImageComponent,\n    LoadingComponent,\n    LoadingSpinnerComponent,\n    SafePipe,\n    ProgressBarComponent,\n    FilenamePipe,\n    PricingPlansComponent,\n    UsersBillingInfoComponent,\n    FilesizePipe,\n    RemainingTimePipe,\n    ClickOutsideDirective,\n    CountdownTimerComponent,\n    IsIeDirective,\n    MomentDatePipe,\n    StripeFormComponent,\n    BitcoinFormComponent,\n    CreateFolderComponent,\n    PaymentFailureNoticeComponent,\n    LastActionPipe,\n    CreditCardNumberPipe,\n    LineBreakToBrTag,\n    EmailFormatPipe,\n    CircleBarSpinnerComponent,\n  ],\n  exports: [\n    TranslateModule,\n    SpinnerComponent,\n    LoadingComponent,\n    SpinnerImageComponent,\n    LoadingSpinnerComponent,\n    SafePipe,\n    LastActionPipe,\n    TagInputModule,\n    ProgressBarComponent,\n    FilenamePipe,\n    MatIconModule,\n    PricingPlansComponent,\n    UsersBillingInfoComponent,\n    FilesizePipe,\n    RemainingTimePipe,\n    ClickOutsideDirective,\n    CountdownTimerComponent,\n    IsIeDirective,\n    MomentDatePipe,\n    StripeFormComponent,\n    CreateFolderComponent,\n    PaymentFailureNoticeComponent,\n    CreditCardNumberPipe,\n    LineBreakToBrTag,\n    EmailFormatPipe,\n    CircleBarSpinnerComponent,\n  ],\n  providers: [\n    SpinnerService,\n    DynamicScriptLoaderService,\n    BrowserDetectorService,\n    FilesizePipe,\n    FilenamePipe,\n    CreditCardNumberPipe,\n    LineBreakToBrTag,\n    EmailFormatPipe,\n    ThemeToggleService,\n  ],\n  entryComponents: [CreateFolderComponent, PaymentFailureNoticeComponent],\n})\nexport class SharedModule {}\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-spinner-image',\n  templateUrl: './spinner-image.component.html',\n  styleUrls: ['./spinner-image.component.scss'],\n})\nexport class SpinnerImageComponent implements OnInit {\n  isLoaded = false;\n\n  @Input() src: string;\n\n  @Input() class: string;\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<div class=\"loader-area\" [hidden]=\"isLoaded\">\n  <img src=\"assets/icons/spinner.svg\" />\n</div>\n<img [class]=\"class\" (load)=\"isLoaded = true\" [hidden]=\"!isLoaded\" [src]=\"src\" />\n","import { Component, OnInit, Input, OnDestroy, Output, EventEmitter } from '@angular/core';\n\nimport { SpinnerService } from '../services/spinner.service';\n\n@Component({\n  selector: 'app-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.scss'],\n})\nexport class SpinnerComponent implements OnInit, OnDestroy {\n  private isShowing = false;\n\n  @Input() name: string;\n\n  @Input() group: string;\n\n  @Input() loadingImage: string;\n\n  @Output() showChange = new EventEmitter();\n\n  @Input()\n  get show(): boolean {\n    return this.isShowing;\n  }\n\n  set show(value: boolean) {\n    this.isShowing = value;\n    this.showChange.emit(this.isShowing);\n  }\n\n  constructor(private spinnerService: SpinnerService) {}\n\n  ngOnInit() {\n    if (!this.name) {\n      throw new Error('Name attribute must be supplied for this spinner');\n    }\n\n    this.spinnerService.register(this);\n  }\n\n  ngOnDestroy(): void {\n    this.spinnerService.unregister(this);\n  }\n}\n","<div *ngIf=\"show\">\n  <img *ngIf=\"loadingImage\" [src]=\"loadingImage\" />\n  <ng-content></ng-content>\n</div>\n","import { Injectable } from '@angular/core';\n\nimport { SpinnerComponent } from '../components/spinner.component';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SpinnerService {\n  private spinnerCache = new Set<SpinnerComponent>();\n\n  constructor() {}\n\n  register(spinner: SpinnerComponent): void {\n    this.spinnerCache.add(spinner);\n  }\n\n  show(spinnerName: string): void {\n    this.spinnerCache.forEach(spinner => {\n      if (spinner.name === spinnerName) {\n        spinner.show = true;\n      }\n    });\n  }\n\n  hide(spinnerName: string): void {\n    this.spinnerCache.forEach(spinner => {\n      if (spinner.name === spinnerName) {\n        spinner.show = false;\n      }\n    });\n  }\n\n  showGroup(spinnerGroup: string): void {\n    this.spinnerCache.forEach(spinner => {\n      if (spinner.group === spinnerGroup) {\n        spinner.show = true;\n      }\n    });\n  }\n\n  hideGroup(spinnerGroup: string): void {\n    this.spinnerCache.forEach(spinner => {\n      if (spinner.group === spinnerGroup) {\n        spinner.show = false;\n      }\n    });\n  }\n\n  showAll(): void {\n    this.spinnerCache.forEach(spinner => (spinner.show = true));\n  }\n\n  hideAll(): void {\n    this.spinnerCache.forEach(spinner => (spinner.show = false));\n  }\n\n  isShowing(spinnerName: string): boolean | undefined {\n    let showing;\n    this.spinnerCache.forEach(spinner => {\n      if (spinner.name === spinnerName) {\n        showing = spinner.show;\n      }\n    });\n\n    return showing;\n  }\n\n  unregister(spinnerToRemove: SpinnerComponent): void {\n    this.spinnerCache.forEach(spinner => {\n      if (spinner === spinnerToRemove) {\n        this.spinnerCache.delete(spinner);\n      }\n    });\n  }\n}\n","import { AbstractControl, ValidationErrors } from '@angular/forms';\n\nexport class NoWhiteSpaceValidator {\n  static noWhiteSpaceValidator(control: AbstractControl): ValidationErrors | null {\n    if (((control.value as string) || '').trim().length === 0) {\n      return { invalid: true };\n    }\n    return null;\n  }\n}\n","import { Action } from '@ngrx/store';\n\nexport enum AuthActionTypes {\n  LOGIN = '[Auth] Login',\n  LOGIN_SUCCESS = '[Auth] Login Success',\n  LOGIN_FAILURE = '[Auth] Login Failure',\n  SIGNUP = '[Auth] Signup',\n  SIGNUP_SUCCESS = '[Auth] Signup Success',\n  SIGNUP_FAILURE = '[Auth] Signup Failure',\n  LOGOUT = '[Auth] Logout',\n  SAVE_DRAFT_ON_LOGOUT = '[Auth] Save Draft on Logout',\n  EXPIRE_SESSION = '[Auth] EXPIRE SESSION',\n  GET_STATUS = '[Auth] GetStatus',\n  UPDATE_SIGNUP_DATA = '[Auth] Update Signup Data',\n  CHECK_USERNAME_AVAILABILITY = '[Auth] Check Username Availability',\n  CHECK_USERNAME_AVAILABILITY_SUCCESS = '[Auth] Check Username Availability Success',\n  CHECK_USERNAME_AVAILABILITY_ERROR = '[Auth] Check Username Availability Error',\n  RECOVER_PASSWORD = '[Auth] Recover Password',\n  RECOVER_PASSWORD_SUCCESS = '[Auth] Recover Password Success',\n  RECOVER_PASSWORD_FAILURE = '[Auth] Recover Password Failure',\n  RESET_PASSWORD = '[Auth] Reset Password',\n  RESET_PASSWORD_SUCCESS = '[Auth] Reset Password Success',\n  RESET_PASSWORD_FAILURE = '[Auth] Reset Password Failure',\n  UPGRADE_ACCOUNT = '[Auth] Upgrade Account',\n  UPGRADE_ACCOUNT_SUCCESS = '[Auth] Upgrade Account Success',\n  UPGRADE_ACCOUNT_FAILURE = '[Auth] Upgrade Account Failure',\n  CHANGE_PASSWORD = '[Auth] Change Password',\n  CHANGE_PASSWORD_SUCCESS = '[Auth] Change Password Success',\n  CHANGE_PASSWORD_FAILED = '[Auth] Change Password Failed',\n  CHANGE_PASSPHRASE_SUCCESS = '[Auth] Change Passphrase in keys Success',\n  DELETE_ACCOUNT = '[Auth] Delete Account',\n  DELETE_ACCOUNT_SUCCESS = '[Auth] Delete Account Success',\n  DELETE_ACCOUNT_FAILURE = '[Auth] Delete Account Failure',\n  CLEAR_SIGNUP_STATE = '[Auth] Clear Signup State',\n  CLEAR_AUTH_ERROR_MESSAGE = '[Auth] Clear Auth Error',\n  GET_CAPTCHA = '[Auth] Get Captcha',\n  GET_CAPTCHA_SUCCESS = '[Auth] Get Captcha Success',\n  VERIFY_CAPTCHA = '[Auth] Verify Captcha',\n  VERIFY_CAPTCHA_SUCCESS = '[Auth] Verify Captcha Success',\n  VERIFY_CAPTCHA_FAILURE = '[Auth] Verify Captcha Failure',\n  GET_2FA_SECRET = '[Auth] Get 2FA otp secret',\n  GET_2FA_SECRET_SUCCESS = '[Auth] Get 2FA otp secret Success',\n  UPDATE_2FA = '[Auth] Enable 2FA',\n  UPDATE_2FA_SUCCESS = '[Auth] Enable 2FA Success',\n  REFRESH_TOKEN = '[Auth] Refresh Token',\n  SET_AUTHENTICATED = '[Auth] Set Authenticated',\n}\n\nexport class LogIn implements Action {\n  readonly type = AuthActionTypes.LOGIN;\n\n  constructor(public payload: any) {}\n}\n\nexport class LogInSuccess implements Action {\n  readonly type = AuthActionTypes.LOGIN_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class LogInFailure implements Action {\n  readonly type = AuthActionTypes.LOGIN_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class SignUp implements Action {\n  readonly type = AuthActionTypes.SIGNUP;\n\n  constructor(public payload: any) {}\n}\n\nexport class SignUpSuccess implements Action {\n  readonly type = AuthActionTypes.SIGNUP_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class SignUpFailure implements Action {\n  readonly type = AuthActionTypes.SIGNUP_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class Logout implements Action {\n  readonly type = AuthActionTypes.LOGOUT;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class SaveDraftOnLogout implements Action {\n  readonly type = AuthActionTypes.SAVE_DRAFT_ON_LOGOUT;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class GetStatus implements Action {\n  readonly type = AuthActionTypes.GET_STATUS;\n}\n\nexport class UpdateSignupData implements Action {\n  readonly type = AuthActionTypes.UPDATE_SIGNUP_DATA;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CheckUsernameAvailability implements Action {\n  readonly type = AuthActionTypes.CHECK_USERNAME_AVAILABILITY;\n\n  constructor(public payload: any) {}\n}\n\nexport class CheckUsernameAvailabilitySuccess implements Action {\n  readonly type = AuthActionTypes.CHECK_USERNAME_AVAILABILITY_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CheckUsernameAvailabilityError implements Action {\n  readonly type = AuthActionTypes.CHECK_USERNAME_AVAILABILITY_ERROR;\n\n  constructor(public payload?: any) {}\n}\n\nexport class RecoverPassword implements Action {\n  readonly type = AuthActionTypes.RECOVER_PASSWORD;\n\n  constructor(public payload: any) {}\n}\n\nexport class RecoverPasswordSuccess implements Action {\n  readonly type = AuthActionTypes.RECOVER_PASSWORD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class RecoverPasswordFailure implements Action {\n  readonly type = AuthActionTypes.RECOVER_PASSWORD_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ResetPassword implements Action {\n  readonly type = AuthActionTypes.RESET_PASSWORD;\n\n  constructor(public payload: any) {}\n}\n\nexport class ResetPasswordSuccess implements Action {\n  readonly type = AuthActionTypes.RESET_PASSWORD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ResetPasswordFailure implements Action {\n  readonly type = AuthActionTypes.RESET_PASSWORD_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpgradeAccount implements Action {\n  readonly type = AuthActionTypes.UPGRADE_ACCOUNT;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpgradeAccountSuccess implements Action {\n  readonly type = AuthActionTypes.UPGRADE_ACCOUNT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpgradeAccountFailure implements Action {\n  readonly type = AuthActionTypes.UPGRADE_ACCOUNT_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ChangePassword implements Action {\n  readonly type = AuthActionTypes.CHANGE_PASSWORD;\n\n  constructor(public payload: any) {}\n}\n\nexport class ChangePasswordSuccess implements Action {\n  readonly type = AuthActionTypes.CHANGE_PASSWORD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ChangePasswordFailed implements Action {\n  readonly type = AuthActionTypes.CHANGE_PASSWORD_FAILED;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ChangePassphraseSuccess implements Action {\n  readonly type = AuthActionTypes.CHANGE_PASSPHRASE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteAccount implements Action {\n  readonly type = AuthActionTypes.DELETE_ACCOUNT;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteAccountSuccess implements Action {\n  readonly type = AuthActionTypes.DELETE_ACCOUNT_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class DeleteAccountFailure implements Action {\n  readonly type = AuthActionTypes.DELETE_ACCOUNT_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearSignUpState implements Action {\n  readonly type = AuthActionTypes.CLEAR_SIGNUP_STATE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ClearAuthErrorMessage implements Action {\n  readonly type = AuthActionTypes.CLEAR_AUTH_ERROR_MESSAGE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetCaptcha implements Action {\n  readonly type = AuthActionTypes.GET_CAPTCHA;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetCaptchaSuccess implements Action {\n  readonly type = AuthActionTypes.GET_CAPTCHA_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class VerifyCaptcha implements Action {\n  readonly type = AuthActionTypes.VERIFY_CAPTCHA;\n\n  constructor(public payload: any) {}\n}\n\nexport class VerifyCaptchaSuccess implements Action {\n  readonly type = AuthActionTypes.VERIFY_CAPTCHA_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class VerifyCaptchaFailure implements Action {\n  readonly type = AuthActionTypes.VERIFY_CAPTCHA_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ExpireSession implements Action {\n  readonly type = AuthActionTypes.EXPIRE_SESSION;\n\n  constructor(public payload?: any) {}\n}\n\nexport class Get2FASecret implements Action {\n  readonly type = AuthActionTypes.GET_2FA_SECRET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class Get2FASecretSuccess implements Action {\n  readonly type = AuthActionTypes.GET_2FA_SECRET_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class Update2FA implements Action {\n  readonly type = AuthActionTypes.UPDATE_2FA;\n\n  constructor(public payload: any) {}\n}\n\nexport class Update2FASuccess implements Action {\n  readonly type = AuthActionTypes.UPDATE_2FA_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class RefreshToken implements Action {\n  readonly type = AuthActionTypes.REFRESH_TOKEN;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SetAuthenticatedState implements Action {\n  readonly type = AuthActionTypes.SET_AUTHENTICATED;\n\n  constructor(public payload?: any) {}\n}\n\nexport type AuthActionAll =\n  | LogIn\n  | LogInSuccess\n  | LogInFailure\n  | SignUp\n  | SignUpSuccess\n  | SignUpFailure\n  | Logout\n  | SaveDraftOnLogout\n  | GetStatus\n  | UpdateSignupData\n  | CheckUsernameAvailability\n  | CheckUsernameAvailabilitySuccess\n  | CheckUsernameAvailabilityError\n  | RecoverPassword\n  | RecoverPasswordSuccess\n  | RecoverPasswordFailure\n  | ResetPassword\n  | ResetPasswordSuccess\n  | ResetPasswordFailure\n  | UpgradeAccount\n  | UpgradeAccountSuccess\n  | UpgradeAccountFailure\n  | ChangePassword\n  | ChangePasswordSuccess\n  | ChangePasswordFailed\n  | ChangePassphraseSuccess\n  | DeleteAccount\n  | DeleteAccountSuccess\n  | DeleteAccountFailure\n  | ClearSignUpState\n  | ClearAuthErrorMessage\n  | GetCaptcha\n  | GetCaptchaSuccess\n  | VerifyCaptcha\n  | VerifyCaptchaSuccess\n  | VerifyCaptchaFailure\n  | ExpireSession\n  | Get2FASecret\n  | Get2FASecretSuccess\n  | Update2FA\n  | Update2FASuccess\n  | RefreshToken\n  | SetAuthenticatedState;\n","import { Action } from '@ngrx/store';\n\nexport enum BitcoinActionTypes {\n  CREATE_NEW_WALLET = '[BITCOIN ] CREATE NEW WALLET',\n  CREATE_NEW_WALLET_SUCCESS = '[BITCOIN] CREATE NEW WALLET',\n  CHECK_TRANSACTION = '[BITCOIN] CHECK TRANSACTION',\n  CHECK_TRANSACTION_SUCCESS = '[BITCOIN] CHECK TRANSACTION SUCCESS',\n  CLEAR_WALLET = '[BITCOIN] CLEAR WALLET',\n}\n\nexport class CreateNewWallet implements Action {\n  readonly type = BitcoinActionTypes.CREATE_NEW_WALLET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CheckTransaction implements Action {\n  readonly type = BitcoinActionTypes.CHECK_TRANSACTION;\n\n  constructor(public payload: any) {}\n}\n\nexport class CheckTransactionSuccess implements Action {\n  readonly type = BitcoinActionTypes.CHECK_TRANSACTION_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateNewWalletSuccess implements Action {\n  readonly type = BitcoinActionTypes.CREATE_NEW_WALLET_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearWallet implements Action {\n  readonly type = BitcoinActionTypes.CLEAR_WALLET;\n\n  constructor(public payload?: any) {}\n}\n\nexport type BitcoinActionAll =\n  | CreateNewWallet\n  | CreateNewWalletSuccess\n  | CheckTransaction\n  | CheckTransactionSuccess\n  | ClearWallet;\n","import { Action } from '@ngrx/store';\n\nexport enum ComposeMailActionTypes {\n  CREATE_MAIL = '[Mail] CREATE',\n  CREATE_MAIL_SUCCESS = '[Mail] CREATE SUCCESS',\n  SEND_MAIL = '[Mail] SEND_MAIL',\n  SEND_MAIL_SUCCESS = '[Mail] SEND_MAIL SUCCESS',\n  SEND_MAIL_FAILURE = '[Mail] SEND_MAIL FAILURE',\n  UPDATE_LOCAL_DRAFT = '[Mail] UPDATE LOCAL DRAFT',\n  CLOSE_MAILBOX = '[Mailbox] CLOSE',\n  UPDATE_PGP_ENCRYPTED_CONTENT = '[PGP] UPDATE PGP ENCRYPTED CONTENT',\n  UPDATE_PGP_MIME_ENCRYPTED = '[PGP] UPDATE PGP MIME ENCRYPTED',\n  UPDATE_PGP_SSH_KEYS = '[PGP] UPDATE PGP SSH KEYS',\n  UPLOAD_ATTACHMENT = '[Attachment] UPLOAD_ATTACHMENT',\n  UPLOAD_ATTACHMENT_PROGRESS = '[Attachment] UPLOAD_ATTACHMENT_PROGRESS',\n  UPLOAD_ATTACHMENT_REQUEST = '[Attachment] UPLOAD_ATTACHMENT_REQUEST',\n  UPLOAD_ATTACHMENT_SUCCESS = '[Attachment] UPLOAD_ATTACHMENT_SUCCESS',\n  UPLOAD_ATTACHMENT_FAILURE = '[Attachment] UPLOAD_ATTACHMENT_FAILURE',\n  DELETE_ATTACHMENT = '[Attachment] DELETE_ATTACHMENT',\n  DELETE_ATTACHMENT_SUCCESS = '[Attachment] DELETE_ATTACHMENT_SUCCESS',\n  DELETE_ATTACHMENT_FAILURE = '[Attachment] DELETE_ATTACHMENT_FAILURE',\n  START_ATTACHMENT_ENCRYPTION = '[Attachment] START_ATTACHMENT_ENCRYPTION',\n  GET_USERS_KEYS = '[USERS] GET KEYS',\n  GET_USERS_KEYS_SUCCESS = '[USERS] GET KEYS SUCCESS',\n  NEW_DRAFT = '[DraftState] NEW_DRAFT',\n  CLEAR_DRAFT = '[DRAFT] CLEAR',\n  UPDATE_DRAFT_ATTACHMENT = '[Attachment] UPDATE_DRAFT_ATTACHMENT',\n  MATCH_CONTACT_USER_KEYS = '[Mail] MATCH_CONTACT_USER_KEYS',\n}\n\nexport class CreateMail implements Action {\n  readonly type = ComposeMailActionTypes.CREATE_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateMailSuccess implements Action {\n  readonly type = ComposeMailActionTypes.CREATE_MAIL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateLocalDraft implements Action {\n  readonly type = ComposeMailActionTypes.UPDATE_LOCAL_DRAFT;\n\n  constructor(public payload: any) {}\n}\n\nexport class CloseMailbox implements Action {\n  readonly type = ComposeMailActionTypes.CLOSE_MAILBOX;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SendMail implements Action {\n  readonly type = ComposeMailActionTypes.SEND_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class SendMailSuccess implements Action {\n  readonly type = ComposeMailActionTypes.SEND_MAIL_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SendMailFailure implements Action {\n  readonly type = ComposeMailActionTypes.SEND_MAIL_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdatePGPEncryptedContent implements Action {\n  readonly type = ComposeMailActionTypes.UPDATE_PGP_ENCRYPTED_CONTENT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdatePGPMimeEncrytion implements Action {\n  readonly type = ComposeMailActionTypes.UPDATE_PGP_MIME_ENCRYPTED;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdatePGPSshKeys implements Action {\n  readonly type = ComposeMailActionTypes.UPDATE_PGP_SSH_KEYS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UploadAttachment implements Action {\n  readonly type = ComposeMailActionTypes.UPLOAD_ATTACHMENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class UploadAttachmentProgress implements Action {\n  readonly type = ComposeMailActionTypes.UPLOAD_ATTACHMENT_PROGRESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UploadAttachmentRequest implements Action {\n  readonly type = ComposeMailActionTypes.UPLOAD_ATTACHMENT_REQUEST;\n\n  constructor(public payload: any) {}\n}\n\nexport class UploadAttachmentSuccess implements Action {\n  readonly type = ComposeMailActionTypes.UPLOAD_ATTACHMENT_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UploadAttachmentFailure implements Action {\n  readonly type = ComposeMailActionTypes.UPLOAD_ATTACHMENT_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class DeleteAttachment implements Action {\n  readonly type = ComposeMailActionTypes.DELETE_ATTACHMENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteAttachmentSuccess implements Action {\n  readonly type = ComposeMailActionTypes.DELETE_ATTACHMENT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteAttachmentFailure implements Action {\n  readonly type = ComposeMailActionTypes.DELETE_ATTACHMENT_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class StartAttachmentEncryption implements Action {\n  readonly type = ComposeMailActionTypes.START_ATTACHMENT_ENCRYPTION;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetUsersKeys implements Action {\n  readonly type = ComposeMailActionTypes.GET_USERS_KEYS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetUsersKeysSuccess implements Action {\n  readonly type = ComposeMailActionTypes.GET_USERS_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class NewDraft implements Action {\n  readonly type = ComposeMailActionTypes.NEW_DRAFT;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearDraft implements Action {\n  readonly type = ComposeMailActionTypes.CLEAR_DRAFT;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateDraftAttachment implements Action {\n  readonly type = ComposeMailActionTypes.UPDATE_DRAFT_ATTACHMENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class MatchContactUserKeys implements Action {\n  readonly type = ComposeMailActionTypes.MATCH_CONTACT_USER_KEYS;\n\n  constructor(public payload: any) {}\n}\n\nexport type ComposeMailActions =\n  | CreateMail\n  | CreateMailSuccess\n  | UpdateLocalDraft\n  | CloseMailbox\n  | SendMail\n  | SendMailSuccess\n  | SendMailFailure\n  | UpdatePGPEncryptedContent\n  | UpdatePGPSshKeys\n  | UploadAttachment\n  | UploadAttachmentProgress\n  | UploadAttachmentRequest\n  | UploadAttachmentSuccess\n  | UploadAttachmentFailure\n  | DeleteAttachment\n  | DeleteAttachmentSuccess\n  | DeleteAttachmentFailure\n  | StartAttachmentEncryption\n  | GetUsersKeys\n  | GetUsersKeysSuccess\n  | NewDraft\n  | ClearDraft\n  | UpdateDraftAttachment\n  | MatchContactUserKeys\n  | UpdatePGPMimeEncrytion;\n","import { Action } from '@ngrx/store';\n\nexport enum ContactsActionTypes {\n  CONTACT_GET = '[Contacts] ContactGet GET',\n  CONTACT_GET_SUCCESS = '[Contacts] Contact_GET_Success',\n  CONTACT_GET_FAILURE = '[Contacts] Contact_GET_Failure',\n  CONTACT_ADD = '[Contacts] Contact_Add',\n  CONTACT_ADD_SUCCESS = '[Contacts] Contact_Add_Success',\n  CONTACT_ADD_ERROR = '[Contacts] Contact_Add_Error',\n  CONTACT_DELETE = '[Contacts] Contact_Delete',\n  CONTACT_DELETE_SUCCESS = '[Contacts] Contact_Delete_Success',\n  CONTACT_NOTIFY = '[Contacts] Contact_Notify',\n  CONTACT_NOTIFY_SUCCESS = '[Contacts] Contact_Notify_Success',\n  CONTACT_NOTIFY_FAILURE = '[Contacts] Contact_Notify_Failure',\n  CONTACT_IMPORT = '[Contacts] Contact Import',\n  CONTACT_IMPORT_SUCCESS = '[Contacts] Contact Import Success',\n  CONTACT_IMPORT_FAILURE = '[Contacts] Contact Import Failure',\n  CONTACT_DECRYPT_SUCCESS = '[Contacts] Contact_Decrypt_Success',\n  GET_EMAIL_CONTACTS = '[Contacts] GET EMAIL CONTACTS',\n  GET_EMAIL_CONTACTS_SUCCESS = '[Contacts] GET EMAIL CONTACTS SUCCESS',\n  CLEAR_CONTACTS_TO_DECRYPT = '[Contacts] CLEAR CONTACTS TO DECRYPT',\n  CONTACT_BATCH_UPDATE = '[Contacts] Batch update',\n  CONTACT_BATCH_UPDATE_SUCCESS = '[Contacts] Batch update Success',\n  CONTACT_FETCH_KEYS = '[Contacts] Fetch Contact Keys',\n  CONTACT_FETCH_KEYS_SUCCESS = '[Contacts] Fetch Contact Keys Success',\n  CONTACT_FETCH_KEYS_FAILURE = '[Contacts] Fetch Contact Keys Failure',\n  CONTACT_ADD_KEYS = '[Contacts] Add Contact Keys',\n  CONTACT_ADD_KEYS_SUCCESS = '[Contacts] Add Contact Keys Success',\n  CONTACT_ADD_KEYS_FAILURE = '[Contacts] Add Contact Keys Failure',\n  CONTACT_UPDATE_KEYS = '[Contacts] Update Contact Keys',\n  CONTACT_UPDATE_KEYS_SUCCESS = '[Contacts] Update Contact Keys Success',\n  CONTACT_UPDATE_KEYS_FAILURE = '[Contacts] Update Contact Keys Failure',\n  CONTACT_REMOVE_KEYS = '[Contacts] Remove Contact Keys',\n  CONTACT_REMOVE_KEYS_SUCCESS = '[Contacts] Remove Contact Keys Success',\n  CONTACT_REMOVE_KEYS_FAILURE = '[Contacts] Remove Contact Keys Failure',\n  CONTACT_BULK_UPDATE_KEYS = '[Contacts] Bulk Update Contact Keys',\n  CONTACT_BULK_UPDATE_KEYS_SUCCESS = '[Contacts] Bulk Update Contact Keys Success',\n  CONTACT_BULK_UPDATE_KEYS_FAILURE = '[Contacts] Bulk Update Contact Keys Failure',\n}\n\nexport class ContactsGet implements Action {\n  readonly type = ContactsActionTypes.CONTACT_GET;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class ContactGetSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_GET_SUCCESS;\n\n  constructor(public payload: any) {}\n}\nexport class ContactGetFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_GET_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactAdd implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactAddSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactAddError implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD_ERROR;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactDelete implements Action {\n  readonly type = ContactsActionTypes.CONTACT_DELETE;\n\n  constructor(public payload: string) {}\n}\n\nexport class ContactDeleteSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_DELETE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactNotify implements Action {\n  readonly type = ContactsActionTypes.CONTACT_NOTIFY;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactNotifySuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_NOTIFY_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactNotifyFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_NOTIFY_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactImport implements Action {\n  readonly type = ContactsActionTypes.CONTACT_IMPORT;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactImportSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_IMPORT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactImportFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_IMPORT_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ContactDecryptSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_DECRYPT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetEmailContacts implements Action {\n  readonly type = ContactsActionTypes.GET_EMAIL_CONTACTS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetEmailContactsSuccess implements Action {\n  readonly type = ContactsActionTypes.GET_EMAIL_CONTACTS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearContactsToDecrypt implements Action {\n  readonly type = ContactsActionTypes.CLEAR_CONTACTS_TO_DECRYPT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdateBatchContacts implements Action {\n  readonly type = ContactsActionTypes.CONTACT_BATCH_UPDATE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateBatchContactsSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_BATCH_UPDATE_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactFetchKeys implements Action {\n  readonly type = ContactsActionTypes.CONTACT_FETCH_KEYS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactFetchKeysSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_FETCH_KEYS_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactFetchKeysFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_FETCH_KEYS_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactAddKeys implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD_KEYS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactAddKeysSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD_KEYS_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactAddKeysFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_ADD_KEYS_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactRemoveKeys implements Action {\n  readonly type = ContactsActionTypes.CONTACT_REMOVE_KEYS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactRemoveKeysSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_REMOVE_KEYS_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactRemoveKeysFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_REMOVE_KEYS_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactBulkUpdateKeys implements Action {\n  readonly type = ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactBulkUpdateKeysSuccess implements Action {\n  readonly type = ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ContactBulkUpdateKeysFailure implements Action {\n  readonly type = ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport type ContactsActionAll =\n  | ContactsGet\n  | ContactGetSuccess\n  | ContactGetFailure\n  | ContactAdd\n  | ContactAddSuccess\n  | ContactAddError\n  | ContactDelete\n  | ContactDeleteSuccess\n  | ContactImport\n  | ContactImportSuccess\n  | ContactImportFailure\n  | ContactDecryptSuccess\n  | GetEmailContacts\n  | GetEmailContactsSuccess\n  | ClearContactsToDecrypt\n  | UpdateBatchContacts\n  | UpdateBatchContactsSuccess\n  | ContactNotify\n  | ContactNotifySuccess\n  | ContactNotifyFailure\n  | ContactFetchKeys\n  | ContactFetchKeysSuccess\n  | ContactFetchKeysFailure\n  | ContactAddKeys\n  | ContactAddKeysSuccess\n  | ContactAddKeysFailure\n  | ContactRemoveKeys\n  | ContactRemoveKeysSuccess\n  | ContactRemoveKeysFailure\n  | ContactBulkUpdateKeys\n  | ContactBulkUpdateKeysSuccess\n  | ContactBulkUpdateKeysFailure;\n","import { Action } from '@ngrx/store';\n\nexport enum DonationActionTypes {\n  MAKE_STRIPE_DONATION = '[DONATE] STRIPE DONATION',\n  MAKE_STRIPE_DONATION_SUCCESS = '[DONATE] STRIPE DONATION SUCCESS',\n  MAKE_STRIPE_DONATION_FAILURE = '[DONATE] STRIPE DONATION FAILURE',\n}\n\nexport class MakeStripDonation implements Action {\n  readonly type = DonationActionTypes.MAKE_STRIPE_DONATION;\n\n  constructor(public payload: any) {}\n}\n\nexport class MakeStripeDonationSuccess implements Action {\n  readonly type = DonationActionTypes.MAKE_STRIPE_DONATION_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class MakeStripeDonationFailure implements Action {\n  readonly type = DonationActionTypes.MAKE_STRIPE_DONATION_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport type DonateActionAll = MakeStripDonation | MakeStripeDonationSuccess | MakeStripeDonationFailure;\n","export * from './router.action';\nexport * from './auth.action';\nexport * from './mail.actions';\nexport * from './loading.action';\nexport * from './keyboard.action';\nexport * from './users.action';\nexport * from './bitcoin.action';\nexport * from './compose-mail.actions';\nexport * from './secure-message.actions';\nexport * from './donate.actions';\nexport * from './contacts.action';\n","import { Action } from '@ngrx/store';\n\nexport enum KeyboardActionTypes {\n  KEYBOARD_FOCUSED = '[Keyboard] GetFocus',\n  KEYBOARD_FOCUSED_OUT = '[Keyboard] GetFocusOut',\n  KEY_PRESSED = '[Keyboard] KeyPressed',\n  FOCUSED_INPUT = '[Keyboard] FocusedInput',\n}\n\nexport class KeyboardFocus implements Action {\n  readonly type = KeyboardActionTypes.KEYBOARD_FOCUSED;\n\n  constructor(public payload: any) {}\n}\n\nexport class KeyboardFocusOut implements Action {\n  readonly type = KeyboardActionTypes.KEYBOARD_FOCUSED_OUT;\n\n  constructor(public payload: any) {}\n}\n\nexport class KeyPressed implements Action {\n  readonly type = KeyboardActionTypes.KEY_PRESSED;\n\n  constructor(public payload: any) {}\n}\n\nexport class FocusedInputID implements Action {\n  readonly type = KeyboardActionTypes.FOCUSED_INPUT;\n\n  constructor(public payload: any) {}\n}\n\nexport type KeyboardActionAll = KeyboardFocus | KeyboardFocusOut | KeyPressed | FocusedInputID;\n","import { Action } from '@ngrx/store';\n\nexport enum LoadingActionTypes {\n  RELATED_LOADING = '[Loading] Related Loading',\n  RELATED_LOADED = '[Loading] Related Loaded',\n  RECENT_LOADING = '[Loading] Recent Loading',\n  RECENT_LOADED = '[Loading] Recent Loaded',\n  FINAL_LOADING = '[Loading] Loading',\n}\n\nexport class RelatedBlogLoading implements Action {\n  readonly type = LoadingActionTypes.RELATED_LOADING;\n\n  constructor(public payload: any) {}\n}\n\nexport class RecentBlogLoading implements Action {\n  readonly type = LoadingActionTypes.RECENT_LOADING;\n\n  constructor(public payload: any) {}\n}\n\nexport class FinalLoading implements Action {\n  readonly type = LoadingActionTypes.FINAL_LOADING;\n\n  constructor(public payload: any) {}\n}\n\nexport type LoadingActionAll = RelatedBlogLoading | RecentBlogLoading | FinalLoading;\n","import { Action } from '@ngrx/store';\n\nexport enum MailActionTypes {\n  GET_MAILS = '[Mail] GET_MAILS',\n  STARRED_FOLDER_COUNT_UPDATE = '[Mail] STARRED_FOLDER_COUNT_UPDATE',\n  GET_MAILS_SUCCESS = '[Mail] GET_MAILS_SUCCESS',\n  GET_UNREAD_MAILS_COUNT = '[Unread Mail Count] GET_UNREAD_MAILS_COUNT',\n  GET_UNREAD_MAILS_COUNT_SUCCESS = '[Unread Mail Count] GET_UNREAD_MAILS_COUNT_SUCCESS',\n  GET_CUSTOMFOLDER_MESSAGE_COUNT = '[Unread Mail Count] GET_CUSTOMFOLDER_MESSAGE_COUNT',\n  GET_CUSTOMFOLDER_MESSAGE_COUNT_SUCCESS = '[Unread Mail Count] GET_CUSTOMFOLDER_MESSAGE_COUNT_SUCCESS',\n  STOP_GETTING_UNREAD_MAILS_COUNT = '[STOP getting unread mails] STOP_GETTING_UNREAD_MAILS_COUNT',\n  GET_MAILBOXES = '[Mail] GET_MAILBOXES',\n  GET_MAILBOXES_SUCCESS = '[Mail] GET_MAILBOXES_SUCCESS',\n  GET_MAIL_DETAIL = '[Mail] GET_MAIL_DETAIL',\n  CLEAR_MAILS_ON_LOGOUT = '[Mail] CLEAR_MAILS',\n  CLEAR_MAILS_ON_CONVERSATION_MODE_CHANGE = '[Mail] CLEAR_MAILS_CONVERSATION_MODE_CHANGE',\n  CLEAR_MAIL_DETAIL = '[Mail] CLEAR_MAIL_DETAIL',\n  GET_MAIL_DETAIL_SUCCESS = '[Mail] GET_MAIL_DETAIL_SUCCESS',\n  GET_MAIL_DETAIL_FAILURE = '[Mail] GET_MAIL_DETAIL_FAILURE',\n  UPDATE_MAIL_DETAIL_CHILDREN = '[Mail] UPDATE_MAIL_DETAIL_CHILDREN',\n  MOVE_MAIL = '[Mail] MOVE',\n  MOVE_MAIL_SUCCESS = '[Mail] MOVE SUCCESS',\n  REVERT_MAILS_MOVED = '[Mail] REVERT_MAILS_MOVED',\n  DELETE_MAIL = '[Mail] DELETE',\n  DELETE_MAIL_SUCCESS = '[Mail] DELETE SUCCESS',\n  DELETE_MAIL_FOR_ALL = '[Mail] DELETE FOR ALL',\n  DELETE_MAIL_FOR_ALL_SUCCESS = '[Mail] DELETE FOR ALL SUCCESS',\n  READ_MAIL = '[Mail] READ_MAIL',\n  READ_MAIL_SUCCESS = '[Mail] READ_MAIL SUCCESS',\n  STAR_MAIL = '[Mail] STAR_MAIL',\n  STAR_MAIL_SUCCESS = '[Mail] STAR_MAIL SUCCESS',\n  SET_DECRYPT_INPROGRESS = '[DECRYPT] SET INPROGRESS STATUS',\n  SET_DECRYPTED_KEY = '[DECRYPTED] SET KEY',\n  SET_CURRENT_MAILBOX = '[MAILBOX] SET CURRENTLY SELECTED',\n  UNDO_DELETE_MAIL = '[Mail] UNDO DELETE DRAFT MAIL',\n  UNDO_DELETE_MAIL_SUCCESS = '[Mail] UNDO DELETE DRAFT MAIL SUCCESS',\n  SET_CURRENT_FOLDER = '[FOLDER] SET CURRENT',\n  UPDATE_PGP_DECRYPTED_CONTENT = '[PGP] UPDATE PGP DECRYPTED CONTENT',\n  UPDATE_CURRENT_FOLDER = '[FOLDER] UPDATE CURRENT FOLDER',\n  MAILBOX_SETTINGS_UPDATE = '[MAILBOX SETTINGS] UPDATE',\n  MAILBOX_SETTINGS_UPDATE_SUCCESS = '[MAILBOX SETTINGS] UPDATE SUCCESS',\n  MAILBOX_SETTINGS_UPDATE_FAILURE = '[MAILBOX SETTINGS] UPDATE FAILURE',\n  CREATE_MAILBOX = '[MAILBOX] CREATE MAILBOX',\n  CREATE_MAILBOX_SUCCESS = '[MAILBOX] CREATE MAILBOX SUCCESS',\n  CREATE_MAILBOX_FAILURE = '[MAILBOX] CREATE MAILBOX FAILURE',\n  SET_DEFAULT_MAILBOX = '[MAILBOX] SET DEFAULT MAILBOX',\n  SET_DEFAULT_MAILBOX_SUCCESS = '[MAILBOX] SET DEFAULT MAILBOX SUCCESS',\n  UPDATE_MAILBOX_ORDER = '[MAILBOX] UPDATE ORDER',\n  UPDATE_MAILBOX_ORDER_SUCCESS = '[MAILBOX] UPDATE ORDER SUCCESS',\n  EMPTY_FOLDER = '[Mail] EMPTY TRASH',\n  EMPTY_FOLDER_SUCCESS = '[Mail] EMPTY TRASH SUCCESS',\n  EMPTY_FOLDER_FAILURE = '[Mail] EMPTY TRASH FAILURE',\n  DELETE_MAILBOX = '[MAILBOX] DELETE',\n  DELETE_MAILBOX_SUCCESS = '[MAILBOX] DELETE SUCCESS',\n  SET_IS_COMPOSER_POPUP = '[MAIL] SET IS COMPOSERPOPUP ',\n  MOVE_TAB = '[MAIL] MOVE TAB',\n  EMPTY_ONLY_FOLDER = '[Mail] EMPTY ONLY FOLDER',\n  FETCH_MAILBOX_KEYS = '[MAILBOX] FETCH MAILBOX KEYS',\n  FETCH_MAILBOX_KEYS_SUCCESS = '[MAILBOX] FETCH MAILBOX KEYS SUCCESS',\n  FETCH_MAILBOX_KEYS_FAILURE = '[MAILBOX] FETCH MAILBOX KEYS FAILURE',\n  ADD_MAILBOX_KEYS = '[MAILBOX] ADD MAILBOX KEYS',\n  ADD_MAILBOX_KEYS_SUCCESS = '[MAILBOX] ADD MAILBOX KEYS SUCCESS',\n  ADD_MAILBOX_KEYS_FAILURE = '[MAILBOX] ADD MAILBOX KEYS FAILURE',\n  DELETE_MAILBOX_KEYS = '[MAILBOX] DELETE MAILBOX KEYS',\n  DELETE_MAILBOX_KEYS_SUCCESS = '[MAILBOX] DELETE MAILBOX KEYS SUCCESS',\n  DELETE_MAILBOX_KEYS_FAILURE = '[MAILBOX] DELETE MAILBOX KEYS FAILURE',\n  SET_PRIMARY_MAILBOX_KEYS = '[MAILBOX] SET_PRIMARY MAILBOX KEYS',\n  SET_PRIMARY_MAILBOX_KEYS_SUCCESS = '[MAILBOX] SET_PRIMARY MAILBOX KEYS SUCCESS',\n  SET_PRIMARY_MAILBOX_KEYS_FAILURE = '[MAILBOX] SET_PRIMARY MAILBOX KEYS FAILURE',\n  SET_ATTACHMENTS_FOR_PGP_MIME = '[Mail] SET ATTACHMENTS FOR PGP MIME',\n  RESET_MAILBOX_KEY_OPERATION_STATE = '[MAILBOX] RESET MAILBOX KEY OPERATION STATE',\n}\n\nexport class GetMails implements Action {\n  readonly type = MailActionTypes.GET_MAILS;\n\n  constructor(public payload: any) {}\n}\n\nexport class StarredFolderCountUpdate implements Action {\n  readonly type = MailActionTypes.STARRED_FOLDER_COUNT_UPDATE;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetMailsSuccess implements Action {\n  readonly type = MailActionTypes.GET_MAILS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\nexport class SetIsComposerPopUp implements Action {\n  readonly type = MailActionTypes.SET_IS_COMPOSER_POPUP;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetUnreadMailsCount implements Action {\n  readonly type = MailActionTypes.GET_UNREAD_MAILS_COUNT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetUnreadMailsCountSuccess implements Action {\n  readonly type = MailActionTypes.GET_UNREAD_MAILS_COUNT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetCustomFolderMessageCount implements Action {\n  readonly type = MailActionTypes.GET_CUSTOMFOLDER_MESSAGE_COUNT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetCustomFolderMessageCountSuccess implements Action {\n  readonly type = MailActionTypes.GET_CUSTOMFOLDER_MESSAGE_COUNT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class StopGettingUnreadMailsCount implements Action {\n  readonly type = MailActionTypes.STOP_GETTING_UNREAD_MAILS_COUNT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetMailboxes implements Action {\n  readonly type = MailActionTypes.GET_MAILBOXES;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class GetMailboxesSuccess implements Action {\n  readonly type = MailActionTypes.GET_MAILBOXES_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetMailDetail implements Action {\n  readonly type = MailActionTypes.GET_MAIL_DETAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearMailsOnConversationModeChange implements Action {\n  readonly type = MailActionTypes.CLEAR_MAILS_ON_CONVERSATION_MODE_CHANGE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ClearMailsOnLogout implements Action {\n  readonly type = MailActionTypes.CLEAR_MAILS_ON_LOGOUT;\n\n  constructor(public payload?: any) {}\n}\n\nexport class ClearMailDetail implements Action {\n  readonly type = MailActionTypes.CLEAR_MAIL_DETAIL;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetMailDetailSuccess implements Action {\n  readonly type = MailActionTypes.GET_MAIL_DETAIL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetMailDetailFailure implements Action {\n  readonly type = MailActionTypes.GET_MAIL_DETAIL_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateMailDetailChildren implements Action {\n  readonly type = MailActionTypes.UPDATE_MAIL_DETAIL_CHILDREN;\n\n  constructor(public payload: any) {}\n}\n\nexport class MoveMail implements Action {\n  readonly type = MailActionTypes.MOVE_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class MoveMailSuccess implements Action {\n  readonly type = MailActionTypes.MOVE_MAIL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class RevertMailsMoved implements Action {\n  readonly type = MailActionTypes.REVERT_MAILS_MOVED;\n}\n\nexport class DeleteMail implements Action {\n  readonly type = MailActionTypes.DELETE_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class ReadMail implements Action {\n  readonly type = MailActionTypes.READ_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class ReadMailSuccess implements Action {\n  readonly type = MailActionTypes.READ_MAIL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class StarMail implements Action {\n  readonly type = MailActionTypes.STAR_MAIL;\n\n  constructor(public payload: any) {}\n}\n\nexport class StarMailSuccess implements Action {\n  readonly type = MailActionTypes.STAR_MAIL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailSuccess implements Action {\n  readonly type = MailActionTypes.DELETE_MAIL_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SetDecryptInProgress implements Action {\n  readonly type = MailActionTypes.SET_DECRYPT_INPROGRESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SetDecryptedKey implements Action {\n  readonly type = MailActionTypes.SET_DECRYPTED_KEY;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SetCurrentMailbox implements Action {\n  readonly type = MailActionTypes.SET_CURRENT_MAILBOX;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UndoDeleteMail implements Action {\n  readonly type = MailActionTypes.UNDO_DELETE_MAIL;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UndoDeleteMailSuccess implements Action {\n  readonly type = MailActionTypes.UNDO_DELETE_MAIL_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SetCurrentFolder implements Action {\n  readonly type = MailActionTypes.SET_CURRENT_FOLDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdatePGPDecryptedContent implements Action {\n  readonly type = MailActionTypes.UPDATE_PGP_DECRYPTED_CONTENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateCurrentFolder implements Action {\n  readonly type = MailActionTypes.UPDATE_CURRENT_FOLDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class MailboxSettingsUpdate implements Action {\n  readonly type = MailActionTypes.MAILBOX_SETTINGS_UPDATE;\n\n  constructor(public payload: any) {}\n}\n\nexport class MailboxSettingsUpdateSuccess implements Action {\n  readonly type = MailActionTypes.MAILBOX_SETTINGS_UPDATE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class MailboxSettingsUpdateFailure implements Action {\n  readonly type = MailActionTypes.MAILBOX_SETTINGS_UPDATE_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CreateMailbox implements Action {\n  readonly type = MailActionTypes.CREATE_MAILBOX;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateMailboxSuccess implements Action {\n  readonly type = MailActionTypes.CREATE_MAILBOX_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateMailboxFailure implements Action {\n  readonly type = MailActionTypes.CREATE_MAILBOX_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class SetDefaultMailbox implements Action {\n  readonly type = MailActionTypes.SET_DEFAULT_MAILBOX;\n\n  constructor(public payload: any) {}\n}\n\nexport class SetDefaultMailboxSuccess implements Action {\n  readonly type = MailActionTypes.SET_DEFAULT_MAILBOX_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateMailboxOrder implements Action {\n  readonly type = MailActionTypes.UPDATE_MAILBOX_ORDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateMailboxOrderSuccess implements Action {\n  readonly type = MailActionTypes.UPDATE_MAILBOX_ORDER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class EmptyFolder implements Action {\n  readonly type = MailActionTypes.EMPTY_FOLDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class EmptyFolderSuccess implements Action {\n  readonly type = MailActionTypes.EMPTY_FOLDER_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class EmptyFolderFailure implements Action {\n  readonly type = MailActionTypes.EMPTY_FOLDER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailForAll implements Action {\n  readonly type = MailActionTypes.DELETE_MAIL_FOR_ALL;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailForAllSuccess implements Action {\n  readonly type = MailActionTypes.DELETE_MAIL_FOR_ALL_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailbox implements Action {\n  readonly type = MailActionTypes.DELETE_MAILBOX;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailboxSuccess implements Action {\n  readonly type = MailActionTypes.DELETE_MAILBOX_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class MoveTab implements Action {\n  readonly type = MailActionTypes.MOVE_TAB;\n\n  constructor(public payload: any) {}\n}\n\nexport class EmptyOnlyFolder implements Action {\n  readonly type = MailActionTypes.EMPTY_ONLY_FOLDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class FetchMailboxKeys implements Action {\n  readonly type = MailActionTypes.FETCH_MAILBOX_KEYS;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class FetchMailboxKeysSuccess implements Action {\n  readonly type = MailActionTypes.FETCH_MAILBOX_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class FetchMailboxKeysFailure implements Action {\n  readonly type = MailActionTypes.FETCH_MAILBOX_KEYS_FAILURE;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class AddMailboxKeys implements Action {\n  readonly type = MailActionTypes.ADD_MAILBOX_KEYS;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class AddMailboxKeysSuccess implements Action {\n  readonly type = MailActionTypes.ADD_MAILBOX_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class AddMailboxKeysFailure implements Action {\n  readonly type = MailActionTypes.ADD_MAILBOX_KEYS_FAILURE;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class DeleteMailboxKeys implements Action {\n  readonly type = MailActionTypes.DELETE_MAILBOX_KEYS;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class DeleteMailboxKeysSuccess implements Action {\n  readonly type = MailActionTypes.DELETE_MAILBOX_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteMailboxKeysFailure implements Action {\n  readonly type = MailActionTypes.DELETE_MAILBOX_KEYS_FAILURE;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class SetMailboxKeyPrimary implements Action {\n  readonly type = MailActionTypes.SET_PRIMARY_MAILBOX_KEYS;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class SetMailboxKeyPrimarySuccess implements Action {\n  readonly type = MailActionTypes.SET_PRIMARY_MAILBOX_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class SetMailboxKeyPrimaryFailure implements Action {\n  readonly type = MailActionTypes.SET_PRIMARY_MAILBOX_KEYS_FAILURE;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class SetAttachmentsForPGPMime implements Action {\n  readonly type = MailActionTypes.SET_ATTACHMENTS_FOR_PGP_MIME;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class ResetMailboxKeyOperationState implements Action {\n  readonly type = MailActionTypes.RESET_MAILBOX_KEY_OPERATION_STATE;\n}\n\nexport type MailActions =\n  | GetMails\n  | GetMailsSuccess\n  | StarredFolderCountUpdate\n  | GetUnreadMailsCount\n  | GetUnreadMailsCountSuccess\n  | GetCustomFolderMessageCount\n  | GetCustomFolderMessageCountSuccess\n  | StopGettingUnreadMailsCount\n  | GetMailboxes\n  | GetMailboxesSuccess\n  | GetMailDetail\n  | ClearMailsOnConversationModeChange\n  | ClearMailsOnLogout\n  | ClearMailDetail\n  | GetMailDetailSuccess\n  | GetMailDetailFailure\n  | UpdateMailDetailChildren\n  | MoveMail\n  | MoveMailSuccess\n  | RevertMailsMoved\n  | DeleteMail\n  | DeleteMailSuccess\n  | ReadMail\n  | ReadMailSuccess\n  | StarMail\n  | StarMailSuccess\n  | SetDecryptInProgress\n  | SetDecryptedKey\n  | SetCurrentMailbox\n  | UndoDeleteMail\n  | UndoDeleteMailSuccess\n  | SetCurrentFolder\n  | UpdatePGPDecryptedContent\n  | UpdateCurrentFolder\n  | MailboxSettingsUpdate\n  | MailboxSettingsUpdateSuccess\n  | MailboxSettingsUpdateFailure\n  | CreateMailbox\n  | CreateMailboxSuccess\n  | CreateMailboxFailure\n  | SetDefaultMailbox\n  | SetDefaultMailboxSuccess\n  | UpdateMailboxOrder\n  | UpdateMailboxOrderSuccess\n  | EmptyFolder\n  | EmptyFolderSuccess\n  | EmptyFolderFailure\n  | DeleteMailForAll\n  | DeleteMailForAllSuccess\n  | DeleteMailbox\n  | DeleteMailboxSuccess\n  | SetIsComposerPopUp\n  | MoveTab\n  | EmptyOnlyFolder\n  | FetchMailboxKeys\n  | FetchMailboxKeysSuccess\n  | FetchMailboxKeysFailure\n  | AddMailboxKeys\n  | AddMailboxKeysSuccess\n  | AddMailboxKeysFailure\n  | DeleteMailboxKeys\n  | DeleteMailboxKeysSuccess\n  | DeleteMailboxKeysFailure\n  | SetMailboxKeyPrimary\n  | SetMailboxKeyPrimarySuccess\n  | SetMailboxKeyPrimaryFailure\n  | SetAttachmentsForPGPMime\n  | ResetMailboxKeyOperationState;\n","import { NavigationExtras } from '@angular/router';\nimport { Action } from '@ngrx/store';\n\nexport const GO = '[Router] Go';\nexport const BACK = '[Router] Back';\nexport const FORWARD = '[Router] Forward';\n\nexport class Go implements Action {\n  readonly type = GO;\n\n  constructor(\n    public payload: {\n      path: any[];\n      query?: object;\n      extras?: NavigationExtras;\n    },\n  ) {}\n}\n\nexport class Back implements Action {\n  readonly type = BACK;\n}\n\nexport class Forward implements Action {\n  readonly type = FORWARD;\n}\n\nexport type Actions = Go | Back | Forward;\n","import { Action } from '@ngrx/store';\n\nexport enum SearchActionTypes {\n  CLEAR_SEARCH = '[SEARCH] update',\n}\n\nexport class ClearSearch implements Action {\n  readonly type = SearchActionTypes.CLEAR_SEARCH;\n\n  constructor(public payload?: any) {}\n}\n\nexport type SearchActionAll = ClearSearch;\n","import { Action } from '@ngrx/store';\n\nexport enum SecureMessageActionTypes {\n  GET_MESSAGE = '[Mail] GET MESSAGE',\n  GET_MESSAGE_SUCCESS = '[Mail] GET MESSAGE SUCCESS',\n  GET_MESSAGE_FAILURE = '[Mail] GET MESSAGE FAILURE',\n  UPDATE_SECURE_MESSAGE_KEY = '[Mail] UPDATE SECURE MESSAGE KEY',\n  UPDATE_SECURE_MESSAGE_CONTENT = '[Mail] UPDATE SECURE MESSAGE CONTENT',\n  UPDATE_SECURE_MESSAGE_ENCRYPTED_CONTENT = 'UPDATE_SECURE_MESSAGE_CONTENT',\n  SEND_SECURE_MESSAGE_REPLY = '[Mail] SEND SECURE MESSAGE REPLY MAIL',\n  SEND_SECURE_MESSAGE_REPLY_SUCCESS = '[Mail] SEND SECURE MESSAGE REPLY SUCCESS',\n  SEND_SECURE_MESSAGE_REPLY_FAILURE = '[Mail] SEND SECURE MESSAGE REPLY FAILURE',\n  GET_SECURE_MESSAGE_USERS_KEYS = '[USERS] GET SECURE MESSAGE USER KEYS',\n  GET_SECURE_MESSAGE_USERS_KEYS_SUCCESS = '[USERS] GET SECURE MESSAGE USER KEYS SUCCESS',\n}\n\nexport class GetMessage implements Action {\n  readonly type = SecureMessageActionTypes.GET_MESSAGE;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetMessageSuccess implements Action {\n  readonly type = SecureMessageActionTypes.GET_MESSAGE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetMessageFailure implements Action {\n  readonly type = SecureMessageActionTypes.GET_MESSAGE_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateSecureMessageKey implements Action {\n  readonly type = SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_KEY;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateSecureMessageContent implements Action {\n  readonly type = SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_CONTENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateSecureMessageEncryptedContent implements Action {\n  readonly type = SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_ENCRYPTED_CONTENT;\n\n  constructor(public payload: any) {}\n}\n\nexport class SendSecureMessageReply implements Action {\n  readonly type = SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY;\n\n  constructor(public payload: any) {}\n}\n\nexport class SendSecureMessageReplySuccess implements Action {\n  readonly type = SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class SendSecureMessageReplyFailure implements Action {\n  readonly type = SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetSecureMessageUserKeys implements Action {\n  readonly type = SecureMessageActionTypes.GET_SECURE_MESSAGE_USERS_KEYS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetSecureMessageUserKeysSuccess implements Action {\n  readonly type = SecureMessageActionTypes.GET_SECURE_MESSAGE_USERS_KEYS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport type SecureMessageActions =\n  | GetMessage\n  | GetMessageSuccess\n  | GetMessageFailure\n  | UpdateSecureMessageKey\n  | UpdateSecureMessageContent\n  | UpdateSecureMessageEncryptedContent\n  | SendSecureMessageReply\n  | SendSecureMessageReplySuccess\n  | SendSecureMessageReplyFailure\n  | GetSecureMessageUserKeys\n  | GetSecureMessageUserKeysSuccess;\n","import { Action } from '@ngrx/store';\n\nexport enum TimezoneActionTypes {\n  TIMEZONE_GET = '[TIMEZONE] GET',\n  TIMEZONE_GET_SUCCESS = '[TIMEZONE] GET SUCCESS',\n}\n\nexport class TimezoneGet implements Action {\n  readonly type = TimezoneActionTypes.TIMEZONE_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class TimezoneGetSuccess implements Action {\n  readonly type = TimezoneActionTypes.TIMEZONE_GET_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport type TimezoneActionAll = TimezoneGet | TimezoneGetSuccess;\n","import { Action } from '@ngrx/store';\n\nimport { Settings } from '../datatypes';\nimport { Folder } from '../models';\nimport { Filter } from '../models/filter.model';\n\nexport enum UsersActionTypes {\n  ACCOUNTS = '[Users] Accounts',\n  ACCOUNTS_READ_SUCCESS = '[Users] Accounts_Read_Success',\n  WHITELIST_GET = '[Users] WhiteLists',\n  WHITELIST_READ_SUCCESS = '[Users] WhiteList_Read_Success',\n  WHITELIST_ADD = '[Users] WhiteList_Add',\n  WHITELIST_ADD_SUCCESS = '[Users] WhiteList_Add_Success',\n  WHITELIST_ADD_ERROR = '[Users] WhiteList_Add_Error',\n  MOVE_TO_BLACKLIST = '[Users] Move_to_Blacklist',\n  MOVE_TO_WHITELIST = '[Users] Move_to_Whitelist',\n  WHITELIST_DELETE = '[Users] WhiteList_Delete',\n  WHITELIST_DELETE_SUCCESS = '[Users] WhiteList_Delete_Success',\n  CARD_GET = '[Users] CardLists',\n  CARD_READ_SUCCESS = '[Users] Card_Read_Success',\n  CARD_ADD = '[Users] Card_Add',\n  CARD_ADD_SUCCESS = '[Users] Card_Add_Success',\n  CARD_ADD_ERROR = '[Users] Card_Add_Error',\n  CARD_DELETE = '[Users] Card_Delete',\n  CARD_DELETE_SUCCESS = '[Users] Card_Delete_Success',\n  CARD_MAKE_PRIMARY = '[Users] Card_Make_Primary',\n  CARD_MAKE_PRIMARY_SUCCESS = '[Users] Card_Make_Primary_Success',\n  BLACKLIST_GET = '[Users] BlackLists',\n  BLACKLIST_READ_SUCCESS = '[Users] BlackList_Read_Success',\n  BLACKLIST_ADD = '[Users] BlackList_Add',\n  BLACKLIST_ADD_SUCCESS = '[Users] BlackList_Add_Success',\n  BLACKLIST_ADD_ERROR = '[Users] BlackList_Add_ERROR',\n  BLACKLIST_DELETE = '[Users] BlackList_Delete',\n  BLACKLIST_DELETE_SUCCESS = '[Users] BlackList_Delete_Success',\n  ACCOUNT_DETAILS_GET = '[Users] ACCOUNT_DETAILS_GET',\n  ACCOUNT_DETAILS_GET_SUCCESS = '[Users] ACCOUNT_DETAILS_GET_SUCCESS',\n  SNACK_PUSH = '[Snacks] Push',\n  SNACK_PUSH_SUCCESS = '[Snacks] Push success',\n  SNACK_ERROR_PUSH = '[Snacks] Error Push',\n  SNACK_ERROR_PUSH_SUCCESS = '[Snacks] Error Push success',\n  MEMBERSHIP_UPDATE = '[Membership] Update',\n  SETTINGS_UPDATE = '[SETTINGS] UPDATE',\n  SETTINGS_UPDATE_SUCCESS = '[SETTINGS] UPDATE SUCCESS',\n  SETTINGS_UPDATE_USED_STORAGE = '[SETTINGS] UPDATE USED STORAGE',\n  CREATE_FOLDER = '[USER] CREATE FOLDER',\n  CREATE_FOLDER_SUCCESS = '[USER] CREATE FOLDER SUCCESS',\n  CREATE_FOLDER_FAILURE = '[USER] CREATE FOLDER FAILURE',\n  DELETE_FOLDER = '[USER] DELETE FOLDER',\n  DELETE_FOLDER_SUCCESS = '[USER] DELETE FOLDER SUCCESS',\n  GET_FILTERS = '[USER] GET FILTERS',\n  GET_FILTERS_SUCCESS = '[USER] GET FILTERS SUCCESS',\n  CREATE_FILTER = '[USER] CREATE FILTER',\n  CREATE_FILTER_SUCCESS = '[USER] CREATE FILTER SUCCESS',\n  CREATE_FILTER_FAILURE = '[USER] CREATE FILTER FAILURE',\n  UPDATE_FILTER = '[USER] UPDATE FILTER',\n  UPDATE_FILTER_SUCCESS = '[USER] UPDATE FILTER SUCCESS',\n  UPDATE_FILTER_FAILURE = '[USER] UPDATE FILTER FAILURE',\n  UPDATE_FILTER_ORDER = '[USER] UPDATE ORDER FILTER',\n  UPDATE_FILTER_ORDER_SUCCESS = '[USER] UPDATE FILTER ORDER SUCCESS',\n  UPDATE_FILTER_ORDER_FAILURE = '[USER] UPDATE FILTER ORDER FAILURE',\n  DELETE_FILTER = '[USER] DELETE FILTER',\n  DELETE_FILTER_SUCCESS = '[USER] DELETE FILTER SUCCESS',\n  DELETE_FILTER_FAILURE = '[USER] DELETE FILTER FAILURE',\n  GET_DOMAINS = '[Users] GET_DOMAINS',\n  GET_DOMAINS_SUCCESS = '[Users] GET_DOMAINS_SUCCESS',\n  CREATE_DOMAIN = '[Users] CREATE_DOMAIN',\n  CREATE_DOMAIN_SUCCESS = '[Users] CREATE_DOMAIN_SUCCESS',\n  CREATE_DOMAIN_FAILURE = '[Users] CREATE_DOMAIN_FAILURE',\n  UPDATE_DOMAIN = '[Users] UPDATE_DOMAIN',\n  UPDATE_DOMAIN_SUCCESS = '[Users] UPDATE_DOMAIN_SUCCESS',\n  UPDATE_DOMAIN_FAILURE = '[Users] UPDATE_DOMAIN_FAILURE',\n  READ_DOMAIN = '[Users] READ_DOMAIN',\n  READ_DOMAIN_SUCCESS = '[Users] READ_DOMAIN_SUCCESS',\n  READ_DOMAIN_FAILURE = '[Users] READ_DOMAIN_FAILURE',\n  DELETE_DOMAIN = '[Users] DELETE_DOMAIN',\n  DELETE_DOMAIN_SUCCESS = '[Users] DELETE_DOMAIN_SUCCESS',\n  DELETE_DOMAIN_FAILURE = '[Users] DELETE_DOMAIN_FAILURE',\n  VERIFY_DOMAIN = '[Users] VERIFY_DOMAIN',\n  VERIFY_DOMAIN_SUCCESS = '[Users] VERIFY_DOMAIN_SUCCESS',\n  VERIFY_DOMAIN_FAILURE = '[Users] VERIFY_DOMAIN_FAILURE',\n  PAYMENT_FAILURE = '[USER] PAYMENT FAILURE',\n  SEND_EMAIL_FORWARDING_CODE = '[USER] SEND EMAIL FORWARDING CODE',\n  SEND_EMAIL_FORWARDING_CODE_SUCCESS = '[USER] SEND EMAIL FORWARDING CODE SUCCESS',\n  SEND_EMAIL_FORWARDING_CODE_FAILURE = '[USER] SEND EMAIL FORWARDING CODE FAILURE',\n  VERIFY_EMAIL_FORWARDING_CODE = '[USER] VERIFY EMAIL FORWARDING CODE',\n  VERIFY_EMAIL_FORWARDING_CODE_SUCCESS = '[USER] VERIFY EMAIL FORWARDING CODE SUCCESS',\n  VERIFY_EMAIL_FORWARDING_CODE_FAILURE = '[USER] VERIFY EMAIL FORWARDING CODE FAILURE',\n  UPDATE_FOLDER_ORDER = '[USER] UPDATE FOLDER ORDER',\n  UPDATE_FOLDER_ORDER_SUCCESS = '[USER] UPDATE FOLDER ORDER SUCCESS',\n  SAVE_AUTORESPONDER = '[USER] SAVE AUTORESPONDER',\n  SAVE_AUTORESPONDER_SUCCESS = '[USER] SAVE AUTORESPONDER SUCCESS',\n  SAVE_AUTORESPONDER_FAILURE = '[USER] SAVE AUTORESPONDER FAILURE',\n  GET_INVOICES = '[USER] GET INVOICES',\n  GET_INVOICES_SUCCESS = '[USER] GET INVOICES SUCCESS',\n  GET_UPGRADE_AMOUNT = '[USER] GET UPGRADE AMOUNT',\n  GET_UPGRADE_AMOUNT_SUCCESS = '[USER] GET UPGRADE AMOUNT SUCCESS',\n  VALIDATE_PROMO_CODE = '[USER] VALIDATE PROMO CODE',\n  VALIDATE_PROMO_CODE_SUCCESS = '[USER] VALIDATE PROMO CODE SUCCESS',\n  CLEAR_PROMO_CODE = '[USER] CLEAR PROMO CODE',\n  INVITE_CODE_GET = '[USER] INVITE CODE GET',\n  INVITE_CODE_GET_SUCCESS = '[USER] INVITE CODE GET SUCCESS',\n  INVITE_CODE_GENERATE = '[USER] INVITE CODE GENERATE',\n  INVITE_CODE_GENERATE_SUCCESS = '[USER] INVITE CODE GENERATE SUCCESS',\n  INVITE_CODE_GENERATE_FAILURE = '[USER] INVITE CODE GENERATE FAILURE',\n  GET_NOTIFICATION = '[USER] GET NOTIFICATION',\n  GET_NOTIFICATION_SUCCESS = '[USER] GET NOTIFICATION SUCCESS',\n}\n\nexport class GetNotification implements Action {\n  readonly type = UsersActionTypes.GET_NOTIFICATION;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetNotificationSuccess implements Action {\n  readonly type = UsersActionTypes.GET_NOTIFICATION_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class Accounts implements Action {\n  readonly type = UsersActionTypes.ACCOUNTS;\n\n  constructor(public payload: any) {}\n}\n\nexport class AccountsReadSuccess implements Action {\n  readonly type = UsersActionTypes.ACCOUNTS_READ_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardGet implements Action {\n  readonly type = UsersActionTypes.CARD_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CardReadSuccess implements Action {\n  readonly type = UsersActionTypes.CARD_READ_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardAdd implements Action {\n  readonly type = UsersActionTypes.CARD_ADD;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardAddSuccess implements Action {\n  readonly type = UsersActionTypes.CARD_ADD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardAddError implements Action {\n  readonly type = UsersActionTypes.CARD_ADD_ERROR;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CardDelete implements Action {\n  readonly type = UsersActionTypes.CARD_DELETE;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardDeleteSuccess implements Action {\n  readonly type = UsersActionTypes.CARD_DELETE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardMakePrimary implements Action {\n  readonly type = UsersActionTypes.CARD_MAKE_PRIMARY;\n\n  constructor(public payload: any) {}\n}\n\nexport class CardMakePrimarySuccess implements Action {\n  readonly type = UsersActionTypes.CARD_MAKE_PRIMARY_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class WhiteListGet implements Action {\n  readonly type = UsersActionTypes.WHITELIST_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class WhiteListsReadSuccess implements Action {\n  readonly type = UsersActionTypes.WHITELIST_READ_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class WhiteListAdd implements Action {\n  readonly type = UsersActionTypes.WHITELIST_ADD;\n\n  constructor(public payload: any) {}\n}\n\nexport class MoveToBlacklist implements Action {\n  readonly type = UsersActionTypes.MOVE_TO_BLACKLIST;\n\n  constructor(public payload: any) {}\n}\n\nexport class MoveToWhitelist implements Action {\n  readonly type = UsersActionTypes.MOVE_TO_WHITELIST;\n\n  constructor(public payload: any) {}\n}\n\nexport class WhiteListAddSuccess implements Action {\n  readonly type = UsersActionTypes.WHITELIST_ADD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class WhiteListAddError implements Action {\n  readonly type = UsersActionTypes.WHITELIST_ADD_ERROR;\n\n  constructor(public payload?: any) {}\n}\n\nexport class WhiteListDelete implements Action {\n  readonly type = UsersActionTypes.WHITELIST_DELETE;\n\n  constructor(public payload: any) {}\n}\n\nexport class WhiteListDeleteSuccess implements Action {\n  readonly type = UsersActionTypes.WHITELIST_DELETE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class BlackListGet implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class BlackListsReadSuccess implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_READ_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class BlackListAdd implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_ADD;\n\n  constructor(public payload: any) {}\n}\n\nexport class BlackListAddSuccess implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_ADD_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class BlackListAddError implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_ADD_ERROR;\n\n  constructor(public payload?: any) {}\n}\n\nexport class BlackListDelete implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_DELETE;\n\n  constructor(public payload: any) {}\n}\n\nexport class BlackListDeleteSuccess implements Action {\n  readonly type = UsersActionTypes.BLACKLIST_DELETE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class AccountDetailsGet implements Action {\n  readonly type = UsersActionTypes.ACCOUNT_DETAILS_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class AccountDetailsGetSuccess implements Action {\n  readonly type = UsersActionTypes.ACCOUNT_DETAILS_GET_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SnackPush implements Action {\n  readonly type = UsersActionTypes.SNACK_PUSH;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SnackPushSuccess implements Action {\n  readonly type = UsersActionTypes.SNACK_PUSH_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SnackErrorPush implements Action {\n  readonly type = UsersActionTypes.SNACK_ERROR_PUSH;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SnackErrorPushSuccess implements Action {\n  readonly type = UsersActionTypes.SNACK_ERROR_PUSH_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class MembershipUpdate implements Action {\n  readonly type = UsersActionTypes.MEMBERSHIP_UPDATE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SettingsUpdate implements Action {\n  readonly type = UsersActionTypes.SETTINGS_UPDATE;\n\n  constructor(public payload: Settings) {}\n}\n\nexport class SettingsUpdateSuccess implements Action {\n  readonly type = UsersActionTypes.SETTINGS_UPDATE_SUCCESS;\n\n  constructor(public payload: Settings) {}\n}\n\nexport class SettingsUpdateUsedStorage implements Action {\n  readonly type = UsersActionTypes.SETTINGS_UPDATE_USED_STORAGE;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateFolder implements Action {\n  readonly type = UsersActionTypes.CREATE_FOLDER;\n\n  constructor(public payload: Folder) {}\n}\n\nexport class CreateFolderSuccess implements Action {\n  readonly type = UsersActionTypes.CREATE_FOLDER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateFolderFailure implements Action {\n  readonly type = UsersActionTypes.CREATE_FOLDER_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class DeleteFolder implements Action {\n  readonly type = UsersActionTypes.DELETE_FOLDER;\n\n  constructor(public payload: Folder) {}\n}\n\nexport class DeleteFolderSuccess implements Action {\n  readonly type = UsersActionTypes.DELETE_FOLDER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetFilters implements Action {\n  readonly type = UsersActionTypes.GET_FILTERS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetFiltersSuccess implements Action {\n  readonly type = UsersActionTypes.GET_FILTERS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateFilter implements Action {\n  readonly type = UsersActionTypes.CREATE_FILTER;\n\n  constructor(public payload: Filter) {}\n}\n\nexport class CreateFilterSuccess implements Action {\n  readonly type = UsersActionTypes.CREATE_FILTER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateFilterFailure implements Action {\n  readonly type = UsersActionTypes.CREATE_FILTER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFilter implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER;\n\n  constructor(public payload: Filter) {}\n}\n\nexport class UpdateFilterSuccess implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFilterFailure implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFilterOrder implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER_ORDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFilterOrderSuccess implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER_ORDER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFilterOrderFailure implements Action {\n  readonly type = UsersActionTypes.UPDATE_FILTER_ORDER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteFilter implements Action {\n  readonly type = UsersActionTypes.DELETE_FILTER;\n\n  constructor(public payload: Filter) {}\n}\n\nexport class DeleteFilterSuccess implements Action {\n  readonly type = UsersActionTypes.DELETE_FILTER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteFilterFailure implements Action {\n  readonly type = UsersActionTypes.DELETE_FILTER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetDomains implements Action {\n  readonly type = UsersActionTypes.GET_DOMAINS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetDomainsSuccess implements Action {\n  readonly type = UsersActionTypes.GET_DOMAINS_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class CreateDomain implements Action {\n  readonly type = UsersActionTypes.CREATE_DOMAIN;\n\n  constructor(public payload: string) {}\n}\n\nexport class CreateDomainSuccess implements Action {\n  readonly type = UsersActionTypes.CREATE_DOMAIN_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class CreateDomainFailure implements Action {\n  readonly type = UsersActionTypes.CREATE_DOMAIN_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateDomain implements Action {\n  readonly type = UsersActionTypes.UPDATE_DOMAIN;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateDomainSuccess implements Action {\n  readonly type = UsersActionTypes.UPDATE_DOMAIN_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdateDomainFailure implements Action {\n  readonly type = UsersActionTypes.UPDATE_DOMAIN_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ReadDomain implements Action {\n  readonly type = UsersActionTypes.READ_DOMAIN;\n\n  constructor(public payload: number) {}\n}\n\nexport class ReadDomainSuccess implements Action {\n  readonly type = UsersActionTypes.READ_DOMAIN_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ReadDomainFailure implements Action {\n  readonly type = UsersActionTypes.READ_DOMAIN_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteDomain implements Action {\n  readonly type = UsersActionTypes.DELETE_DOMAIN;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteDomainSuccess implements Action {\n  readonly type = UsersActionTypes.DELETE_DOMAIN_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class DeleteDomainFailure implements Action {\n  readonly type = UsersActionTypes.DELETE_DOMAIN_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class VerifyDomain implements Action {\n  readonly type = UsersActionTypes.VERIFY_DOMAIN;\n\n  constructor(public payload: any) {}\n}\n\nexport class VerifyDomainSuccess implements Action {\n  readonly type = UsersActionTypes.VERIFY_DOMAIN_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class VerifyDomainFailure implements Action {\n  readonly type = UsersActionTypes.VERIFY_DOMAIN_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class PaymentFailure implements Action {\n  readonly type = UsersActionTypes.PAYMENT_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SendEmailForwardingCode implements Action {\n  readonly type = UsersActionTypes.SEND_EMAIL_FORWARDING_CODE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SendEmailForwardingCodeSuccess implements Action {\n  readonly type = UsersActionTypes.SEND_EMAIL_FORWARDING_CODE_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SendEmailForwardingCodeFailure implements Action {\n  readonly type = UsersActionTypes.SEND_EMAIL_FORWARDING_CODE_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class VerifyEmailForwardingCode implements Action {\n  readonly type = UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class VerifyEmailForwardingCodeSuccess implements Action {\n  readonly type = UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class VerifyEmailForwardingCodeFailure implements Action {\n  readonly type = UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class UpdateFolderOrder implements Action {\n  readonly type = UsersActionTypes.UPDATE_FOLDER_ORDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateFolderOrderSuccess implements Action {\n  readonly type = UsersActionTypes.UPDATE_FOLDER_ORDER_SUCCESS;\n\n  constructor(public payload?: any) {}\n}\n\nexport class SaveAutoResponder implements Action {\n  readonly type = UsersActionTypes.SAVE_AUTORESPONDER;\n\n  constructor(public payload: any) {}\n}\n\nexport class SaveAutoResponderSuccess implements Action {\n  readonly type = UsersActionTypes.SAVE_AUTORESPONDER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class SaveAutoResponderFailure implements Action {\n  readonly type = UsersActionTypes.SAVE_AUTORESPONDER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetInvoices implements Action {\n  readonly type = UsersActionTypes.GET_INVOICES;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetInvoicesSuccess implements Action {\n  readonly type = UsersActionTypes.GET_INVOICES_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetUpgradeAmount implements Action {\n  readonly type = UsersActionTypes.GET_UPGRADE_AMOUNT;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetUpgradeAmountSuccess implements Action {\n  readonly type = UsersActionTypes.GET_UPGRADE_AMOUNT_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ValidatePromoCode implements Action {\n  readonly type = UsersActionTypes.VALIDATE_PROMO_CODE;\n\n  constructor(public payload: any) {}\n}\n\nexport class ValidatePromoCodeSuccess implements Action {\n  readonly type = UsersActionTypes.VALIDATE_PROMO_CODE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class ClearPromoCode implements Action {\n  readonly type = UsersActionTypes.CLEAR_PROMO_CODE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetInviteCodes implements Action {\n  readonly type = UsersActionTypes.INVITE_CODE_GET;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GetInviteCodesSuccess implements Action {\n  readonly type = UsersActionTypes.INVITE_CODE_GET_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GenerateInviteCode implements Action {\n  readonly type = UsersActionTypes.INVITE_CODE_GENERATE;\n\n  constructor(public payload?: any) {}\n}\n\nexport class GenerateInviteCodeSuccess implements Action {\n  readonly type = UsersActionTypes.INVITE_CODE_GENERATE_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GenerateInviteCodeFailure implements Action {\n  readonly type = UsersActionTypes.INVITE_CODE_GENERATE_FAILURE;\n\n  constructor(public payload?: any) {}\n}\n\nexport type UsersActionAll =\n  | Accounts\n  | AccountsReadSuccess\n  | CardGet\n  | CardReadSuccess\n  | CardAdd\n  | CardAddSuccess\n  | CardAddError\n  | CardDelete\n  | CardDeleteSuccess\n  | CardMakePrimary\n  | CardMakePrimarySuccess\n  | WhiteListGet\n  | WhiteListsReadSuccess\n  | WhiteListAdd\n  | WhiteListAddSuccess\n  | WhiteListAddError\n  | MoveToBlacklist\n  | MoveToWhitelist\n  | WhiteListDelete\n  | WhiteListDeleteSuccess\n  | BlackListGet\n  | BlackListsReadSuccess\n  | BlackListAdd\n  | BlackListAddSuccess\n  | BlackListAddError\n  | BlackListDelete\n  | BlackListDeleteSuccess\n  | AccountDetailsGet\n  | AccountDetailsGetSuccess\n  | SnackPush\n  | SnackPushSuccess\n  | SnackErrorPush\n  | SnackErrorPushSuccess\n  | MembershipUpdate\n  | SettingsUpdate\n  | SettingsUpdateSuccess\n  | SettingsUpdateUsedStorage\n  | CreateFolder\n  | CreateFolderSuccess\n  | CreateFolderFailure\n  | DeleteFolder\n  | DeleteFolderSuccess\n  | GetFilters\n  | GetFiltersSuccess\n  | CreateFilter\n  | CreateFilterSuccess\n  | CreateFilterFailure\n  | UpdateFilter\n  | UpdateFilterSuccess\n  | UpdateFilterFailure\n  | UpdateFilterOrder\n  | UpdateFilterOrderSuccess\n  | UpdateFilterOrderFailure\n  | DeleteFilter\n  | DeleteFilterSuccess\n  | DeleteFilterFailure\n  | GetDomains\n  | GetDomainsSuccess\n  | CreateDomain\n  | CreateDomainSuccess\n  | CreateDomainFailure\n  | UpdateDomain\n  | UpdateDomainSuccess\n  | UpdateDomainFailure\n  | ReadDomain\n  | ReadDomainSuccess\n  | ReadDomainFailure\n  | DeleteDomain\n  | DeleteDomainSuccess\n  | DeleteDomainFailure\n  | PaymentFailure\n  | VerifyDomain\n  | VerifyDomainSuccess\n  | VerifyDomainFailure\n  | SendEmailForwardingCode\n  | SendEmailForwardingCodeSuccess\n  | SendEmailForwardingCodeFailure\n  | VerifyEmailForwardingCode\n  | VerifyEmailForwardingCodeSuccess\n  | VerifyEmailForwardingCodeFailure\n  | UpdateFolderOrder\n  | UpdateFolderOrderSuccess\n  | SaveAutoResponder\n  | SaveAutoResponderSuccess\n  | SaveAutoResponderFailure\n  | GetInvoices\n  | GetInvoicesSuccess\n  | GetUpgradeAmount\n  | GetUpgradeAmountSuccess\n  | ValidatePromoCode\n  | ValidatePromoCodeSuccess\n  | ClearPromoCode\n  | GetInviteCodes\n  | GetInviteCodesSuccess\n  | GenerateInviteCode\n  | GenerateInviteCodeSuccess\n  | GenerateInviteCodeFailure\n  | GetNotification\n  | GetNotificationSuccess;\n","import { Params } from '@angular/router';\n\nimport { Attachment, Mail, Mailbox, MailFolderType, Membership, User, UserMailbox } from './models';\nimport { Filter } from './models/filter.model';\nimport { SearchState } from './reducers/search.reducers';\nimport { Folder } from './models/mail.model';\nimport { WebSocketState } from './websocket.store';\nimport { OrganizationState } from './organization.store';\n\nexport interface RouterStateUrl {\n  url: string;\n  queryParams: Params;\n  params: Params;\n  state: any;\n}\n\nexport interface AuthState {\n  // is a user authenticated?\n  isAuthenticated: boolean;\n  // if authenticated, there should be a user object\n  user: User | null;\n  // error message\n  errorMessage: string | null;\n  inProgress: boolean;\n  passwordChangeInProgress: boolean;\n  signupState: SignupState;\n  isRecoveryCodeSent: boolean;\n  resetPasswordErrorMessage: string | null;\n  updatedPrivateKeys?: any;\n  isChangePasswordError?: boolean;\n  captcha?: Captcha;\n  auth2FA?: Auth2FA;\n  anti_phishing_phrase?: string;\n  recovery_key?: string;\n  saveDraftOnLogout?: boolean;\n}\n\nexport interface CardState {\n  id: string | null;\n  brand: string | null;\n  country: string | null;\n  exp_month: number;\n  exp_year: number;\n  last4: string | null;\n  is_primary: boolean;\n}\n\nexport class Auth2FA {\n  secret?: string;\n\n  secret_url?: string;\n\n  inProgress?: boolean;\n\n  is_2fa_enabled?: boolean;\n\n  show2FALogin?: boolean;\n\n  constructor(data?: any) {\n    if (data) {\n      this.inProgress = data.inProgress;\n      this.secret = data.secret;\n      this.secret_url = encodeURIComponent(data.secret_url);\n    }\n  }\n}\n\nexport interface Captcha {\n  captcha_image?: string;\n  captcha_key?: string;\n  value?: string;\n  inProgress?: boolean;\n  isInvalid?: boolean;\n  verified?: boolean;\n}\n\nexport interface SignupState {\n  username?: string;\n  password?: string;\n  recovery_email?: string;\n  usernameExists?: boolean;\n  inProgress?: boolean;\n  recaptcha: string;\n  public_key?: string;\n  private_key?: string;\n  fingerprint?: string;\n  plan_type?: PlanType;\n  payment_type?: PaymentType;\n  payment_method?: PaymentMethod;\n  currency?: string;\n  memory?: number;\n  email_count?: number;\n  domain_count?: number;\n  monthlyPrice?: number;\n  annualPricePerMonth?: number;\n  annualPriceTotal?: number;\n}\n\nexport class UserState {\n  username: string | null;\n\n  id: number | null;\n\n  whiteList: WhiteList[];\n\n  blackList: BlackList[];\n\n  settings: Settings;\n\n  payment_transaction?: Payment;\n\n  isPrime?: boolean;\n\n  joinedDate?: string;\n\n  inProgress?: boolean;\n\n  isError?: boolean;\n\n  error?: string;\n\n  membership: Membership;\n\n  mailboxes: UserMailbox[];\n\n  customFolders: Folder[];\n\n  filters: Filter[];\n\n  filtersError?: any;\n\n  autoresponder?: AutoResponder;\n\n  customDomains: Domain[];\n\n  customDomainsLoaded?: boolean;\n\n  newCustomDomain?: Domain;\n\n  newCustomDomainError?: string;\n\n  currentCreationStep: number;\n\n  isForwardingVerificationCodeSent?: boolean;\n\n  emailForwardingErrorMessage?: string;\n\n  autoResponderErrorMessage?: string;\n\n  isLoaded?: boolean;\n\n  invoices: Invoice[];\n\n  isInvoiceLoaded?: boolean;\n\n  upgradeAmount?: number;\n\n  promoCode: PromoCode;\n\n  inviteCodes: InviteCode[];\n\n  has_notification?: boolean;\n\n  notifications?: any;\n\n  cards?: Array<CardState>;\n}\n\nexport interface InviteCode {\n  expiration_date: string;\n  is_used: boolean;\n  code: string;\n}\n\nexport class PromoCode {\n  is_valid: boolean = null;\n\n  discount_amount?: number;\n\n  new_amount: number = null;\n\n  new_amount_btc: number = null;\n\n  message?: string;\n\n  value = '';\n\n  enabled = false;\n\n  inProgress = false;\n}\n\nexport interface ContactsState {\n  contacts: Contact[];\n  totalContacts: number;\n  inProgress?: boolean;\n  advancedSettingInProgress?: boolean;\n  isError?: boolean;\n  emailContacts?: EmailContact[];\n  noOfDecryptedContacts: number;\n  contactsToDecrypt: Contact[];\n  loaded: boolean;\n  selectedContactKeys: ContactKey[];\n}\n\nexport interface EmailContact {\n  name: string;\n  email: string;\n}\n\nexport class Settings {\n  id?: number;\n\n  emails_per_page?: number;\n\n  embed_content?: boolean;\n\n  newsletter?: boolean;\n\n  recovery_email?: string;\n\n  save_contacts?: boolean;\n\n  show_snippets?: boolean;\n\n  timezone?: string;\n\n  language?: string;\n\n  signature?: string;\n\n  allocated_storage?: number;\n\n  used_storage?: number;\n\n  display_name?: string;\n\n  email_count?: number;\n\n  domain_count?: number;\n\n  default_font?: string;\n\n  default_color?: string;\n\n  default_background?: string;\n\n  default_size?: number;\n\n  autosave_duration?: string;\n\n  enable_forwarding?: boolean;\n\n  enable_copy_forwarding?: boolean;\n\n  forwarding_address?: string;\n\n  plan_type?: PlanType;\n\n  notification_email?: string;\n\n  recurrence_billing?: boolean;\n\n  is_attachments_encrypted?: boolean;\n\n  enable_2fa?: boolean;\n\n  is_contacts_encrypted?: boolean;\n\n  is_anti_phishing_enabled?: boolean;\n\n  anti_phishing_phrase?: string;\n\n  is_html_disabled?: boolean;\n\n  attachment_size_limit?: number;\n\n  attachment_size_error?: string;\n\n  is_composer_full_screen?: boolean;\n\n  is_night_mode?: boolean;\n\n  is_conversation_mode?: boolean;\n\n  is_enable_report_bugs?: boolean;\n\n  include_original_message?: boolean;\n\n  custom_css?: string;\n\n  is_disable_loading_images?: boolean;\n\n  is_subject_auto_decrypt?: boolean;\n}\n\nexport interface Invoice {\n  id: number;\n  invoice_id: number;\n  invoice_date: Date;\n  plan_type: PlanType;\n  payment_type: PaymentType;\n  payment_method: PaymentMethod;\n  total_amount: number;\n  total_amount_btc?: number;\n  custom_domains: number;\n  email_addresses: number;\n  storage: number;\n  items: InvoiceItem[];\n}\n\nexport interface InvoiceItem {\n  description?: string;\n  quantity: number;\n  amount: number;\n  amount_btc?: number;\n  type: string;\n}\n\nexport interface AutoResponder {\n  id?: number;\n  is_time_range_restricted?: boolean;\n  start_time?: string;\n  end_time?: string;\n  autoresponder_message?: string;\n  autoresponder_active?: boolean;\n  start_date?: string;\n  end_date?: string;\n  vacationautoresponder_message?: string;\n  vacationautoresponder_active?: boolean;\n  only_contacts?: boolean;\n}\n\nexport class Payment {\n  id?: number;\n\n  transaction_id?: string;\n\n  amount?: number;\n\n  currency?: string;\n\n  created?: string;\n\n  billing_cycle_ends?: string;\n\n  payment_method?: PaymentMethod;\n\n  payment_type?: PaymentType;\n}\n\nexport interface MailState {\n  mails: Mail[];\n  total_mail_count: number;\n  mailDetail: Mail;\n  currentFolder?: MailFolderType;\n  loaded?: boolean;\n  inProgress?: boolean;\n  decryptedContents: DecryptedContentState;\n  decryptedSubjects: any;\n  unreadMailsCount: any;\n  customFolderMessageCount: any;\n  noUnreadCountChange: boolean;\n  mailDetailLoaded?: boolean;\n  canGetUnreadCount: boolean;\n  starredFolderCount: number;\n  isMailsMoved?: boolean;\n  isComposerPopUp?: boolean;\n  currentSettingsTab?: string;\n\n  mailMap: any;\n  folderMap: Map<string, FolderState>;\n  pageLimit?: number;\n  /**\n   * TODO - should be updated so as to contain all of decrypted attachments\n   * currently it stores only PGP/MIME message's attachment\n   */\n  decryptedAttachmentsMap?: Map<number, Attachment[]>;\n}\n\nexport interface FolderState {\n  mails: Array<number>;\n  total_mail_count: number;\n  is_not_first_page: boolean;\n  offset: number;\n  is_dirty: boolean;\n}\n\nexport class SecureContent {\n  id?: number;\n\n  content?: string;\n\n  content_plain?: string;\n\n  incomingHeaders?: string;\n\n  subject?: string;\n\n  inProgress?: boolean;\n\n  isSubjectEncrypted?: boolean;\n\n  parent?: number;\n\n  decryptError?: boolean;\n\n  constructor(data?: Mail) {\n    if (data) {\n      this.content = data.content;\n      this.content_plain = data.content_plain;\n      this.subject = data.subject;\n      this.incomingHeaders = data.incoming_headers;\n      this.isSubjectEncrypted = data.is_subject_encrypted;\n      this.parent = data.parent;\n    }\n  }\n}\n\nexport interface DecryptedContentState {\n  [key: number]: SecureContent;\n}\n\nexport interface Draft {\n  id: number;\n  draft: Mail;\n  inProgress?: boolean;\n  encryptedContent?: SecureContent;\n  decryptedContent?: string;\n  isPGPInProgress?: boolean;\n  isPGPMimeInProgress?: boolean;\n  // isSshInProgress?: boolean;\n  attachments: Attachment[];\n  shouldSend?: boolean;\n  shouldSave?: boolean;\n  getUserKeyInProgress?: boolean;\n  usersKeys?: UserKey;\n  isMailDetailPage?: boolean;\n  isSent?: boolean;\n  isSaving?: boolean;\n  /**\n   * @var isProcessingAttachments\n   * @description It represents if any of the attachments is being processed (encrypting/uploading).\n   */\n  isProcessingAttachments?: boolean;\n\n  /**\n   * @var isClosed\n   * @description It represents if the compose mail editor has been closed or not.\n   */\n  isClosed?: boolean;\n  /**\n   * @var pgpMimeContent\n   * @description will be used to store encrypted data, which would be used to make `encrypted.asc`\n   */\n  pgpMimeContent?: string;\n  /**\n   * @var isPGPMimeMessage\n   * @description Represents if draft is PGPMime message or not -\n   * when would be decided after done to upload attachment (encrypted.asc): real composing process\n   */\n  isPGPMimeMessage?: boolean;\n}\n\nexport interface DraftState {\n  [key: number]: Draft;\n}\n\nexport interface ComposeMailState {\n  drafts: DraftState;\n  usersKeys?: Map<string, GlobalPublicKey>;\n  getUserKeyEveryInProgress?: boolean;\n}\n\nexport interface GlobalPublicKey {\n  isFetching: boolean;\n  key: Array<PublicKey>;\n  pgpEncryptionType?: PGPEncryptionType;\n  autocryptPreferEncrypt?: AutocryptPreferEncryptType;\n}\n\nexport interface MailBoxesState {\n  mailboxes: Mailbox[];\n  currentMailbox: Mailbox;\n  decryptKeyInProgress: boolean;\n  decryptedKey?: any;\n  encryptionInProgress: boolean;\n  inProgress?: boolean;\n  isUpdatingOrder?: boolean;\n  mailboxKeysMap?: Map<number, Array<MailboxKey>>; // Date Type => <Mailbox ID, Array of Keys>\n  mailboxKeyInProgress?: boolean;\n  mailboxKeyFailure?: boolean;\n}\n\nexport interface SecureMessageState {\n  decryptedContent?: SecureContent;\n  decryptedKey?: any;\n  encryptedContent?: string;\n  errorMessage?: string;\n  getUserKeyInProgress?: boolean;\n  inProgress?: boolean;\n  isContentDecryptionInProgress?: boolean;\n  isEncryptionInProgress?: boolean;\n  isKeyDecryptionInProgress?: boolean;\n  message: Mail;\n  usersKeys?: PublicKey[];\n}\n\nexport interface UserKey {\n  encrypt: boolean;\n  keys: PublicKey[];\n}\n\nexport interface PublicKey {\n  exists?: boolean;\n  email: string;\n  is_enabled?: boolean;\n  public_key: string;\n}\n\nexport interface LoadingState {\n  RecentBlogLoading: boolean | true;\n  RelatedBlogLoading: boolean | true;\n  Loading: boolean | true;\n}\n\nexport interface KeyboardState {\n  keyboardFocused: boolean;\n  keyPressed: {\n    key: string;\n  };\n  focusedInput: string;\n}\n\nexport interface WhiteList {\n  id?: number;\n  email: string;\n  name: string;\n}\n\nexport interface BlackList {\n  id?: number;\n  email: string;\n  name: string;\n}\n\nexport interface Contact {\n  id?: number;\n  address?: string;\n  email?: string;\n  enabled_encryption?: boolean;\n  encrypted_data?: string;\n  extra_emails?: Array<string>;\n  extra_phones?: Array<string>;\n  is_decryptionInProgress?: boolean;\n  is_encrypted?: boolean;\n  isDecryptedFrontend?: boolean; // If the contact is decrypted on frontend or not\n  markForDelete?: boolean; // To handle delete multiple contacts using checkboxes\n  name?: string;\n  note?: string;\n  phone?: string;\n  phone2?: string;\n  provider?: string;\n  encryption_type?: PGPEncryptionType;\n  // Autocrypt\n  prefer_encrypt?: AutocryptPreferEncryptType;\n  autocrypt_timestamp?: string;\n  last_seen?: string;\n}\n\nexport interface AppState {\n  auth: AuthState;\n  bitcoin: BitcoinState;\n  composeMail: ComposeMailState;\n  contacts: ContactsState;\n  keyboard: KeyboardState;\n  loading: LoadingState;\n  mail: MailState;\n  mailboxes: MailBoxesState;\n  organization: OrganizationState;\n  search: SearchState;\n  secureMessage: SecureMessageState;\n  timezone: TimezonesState;\n  user: UserState;\n  webSocket: WebSocketState;\n}\n\nexport interface TimezonesState {\n  timezones: Timezone[];\n}\n\nexport interface Timezone {\n  value: string;\n  key: string;\n}\n\nexport interface BitcoinState {\n  bitcoinRequired: number;\n  newWalletAddress: string;\n  loaded: boolean;\n  checkTransactionResponse: CheckTransactionResponse;\n}\n\nexport interface CheckTransactionResponse {\n  address?: string;\n  balance?: number;\n  confirmed?: boolean;\n  paid_out?: number;\n  pending_balance?: number;\n  required_balance?: number;\n  status: TransactionStatus;\n}\n\nexport interface DomainRecord {\n  host: string;\n  priority?: number;\n  type: string;\n  value: string;\n}\n\nexport interface Domain {\n  id: number;\n  catch_all?: boolean;\n  catch_all_email?: string;\n  created: string;\n  dkim_record: DomainRecord;\n  dmarc_record: DomainRecord;\n  domain: string;\n  is_dkim_verified: boolean;\n  is_dmarc_verified: boolean;\n  is_domain_verified: boolean;\n  is_mx_verified: boolean;\n  is_spf_verified: boolean;\n  mx_record: DomainRecord;\n  number_of_aliases?: number;\n  number_of_users?: number;\n  spf_record: DomainRecord;\n  verification_record: DomainRecord;\n  verified_at?: string;\n}\n\nexport interface PricingPlan {\n  aliases: number;\n  annually_price: number;\n  anti_phishing: boolean;\n  attachment_upload_limit: number;\n  background: string;\n  brute_force_protection: boolean;\n  catch_all_email: boolean;\n  checksums: boolean;\n  custom_domains: number;\n  dead_man_timer: boolean;\n  delayed_delivery: boolean;\n  domain_count: number;\n  email_count: number;\n  encrypted_attachments: boolean;\n  encryption_at_rest: boolean;\n  encrypted_body: boolean;\n  encrypted_contacts: boolean;\n  encrypted_content: boolean;\n  encrypted_metadata: boolean;\n  encrypted_subjects: boolean;\n  exclusive_access: boolean;\n  four_data_deletion_methods: boolean;\n  gb: number;\n  messages_per_day: number | string;\n  monthly_price: number;\n  multi_user_support: boolean;\n  name: PlanType;\n  self_destructing_emails: boolean;\n  sri: boolean;\n  ssl_tls: boolean;\n  storage: number;\n  strip_ips: boolean;\n  two_fa: boolean;\n  unlimited_folders: boolean;\n  virus_detection_tool: boolean;\n  anonymized_ip: boolean;\n  zero_knowledge_password: boolean;\n  remote_encrypted_link: boolean;\n}\n\n// Key model for mailbox key\nexport interface MailboxKey {\n  id?: number;\n  mailbox?: number;\n  public_key?: string;\n  private_key?: string;\n  fingerprint?: string;\n  key_type?: string;\n  is_primary?: boolean;\n  // Handling key update would need to represent password\n  password?: string;\n}\n\n// Key model for contact public key\nexport interface ContactKey {\n  id?: number;\n  public_key?: string;\n  fingerprint?: string;\n  key_type?: string;\n  is_primary?: boolean;\n  // created_at?: Date;\n  parsed_emails?: Array<string>;\n  contact?: number;\n}\n\nexport enum TransactionStatus {\n  PENDING = 'Pending',\n  RECEIVED = 'Received',\n  SENT = 'Sent',\n  WAITING = 'Waiting',\n}\n\nexport enum PaymentMethod {\n  bitcoin = 'bitcoin',\n  BITCOIN = 'Bitcoin',\n  stripe = 'stripe',\n  STRIPE = 'Stripe',\n  monero = 'monero',\n  MONERO = 'Monero',\n}\n\nexport enum PaymentType {\n  MONTHLY = 'monthly',\n  ANNUALLY = 'annually',\n}\n\nexport enum PlanType {\n  FREE = 'FREE',\n  PRIME = 'PRIME',\n  KNIGHT = 'KNIGHT',\n  MARSHAL = 'MARSHALL',\n  PARAGON = 'PARAGON',\n  CHAMPION = 'CHAMPION',\n}\n\nexport enum NotificationPermission {\n  DEFAULT = 'default',\n  GRANTED = 'granted',\n  DENIED = 'denied',\n}\n\nexport enum MailAction {\n  REPLY = 'REPLY',\n  REPLY_ALL = 'REPLY_ALL',\n  FORWARD = 'FORWARD',\n}\n\nexport type NumberBooleanMappedType = {\n  [key: number]: boolean;\n};\n\nexport type NumberStringMappedType = {\n  [key: number]: string;\n};\n\nexport type StringBooleanMappedType = {\n  [key: string]: boolean;\n};\n\nexport type StringStringMappedType = {\n  [key: string]: string;\n};\n\nexport enum PGPEncryptionType {\n  PGP_MIME = 'PGP_MIME',\n  PGP_INLINE = 'PGP_INLINE',\n}\n\nexport enum EncryptionType {\n  PGP_MIME_INLINE = 'PGP_MIME_INLINE',\n  PGP_PASSWORD = 'PGP_PASSWORD',\n  PGP_END_TO_END = 'PGP_END_TO_END',\n}\n\nexport enum AutocryptPreferEncryptType {\n  NOPREFERENCE = 'nopreference',\n  MUTUAL = 'mutual',\n}\n\nexport enum UIRecommendationValue {\n  CTEMPLAR = 'CTEMPLAR',\n  DISABLE = 'DISABLE',\n  DISCOURAGE = 'DISCOURAGE',\n  AVAILABLE = 'AVAILABLE',\n  ENCRYPT = 'ENCRYPT',\n}\n\nexport interface AutocryptEncryptDetermineForSingle {\n  recommendationValue: UIRecommendationValue;\n  encrypt: boolean;\n}\n\nexport interface AutocryptEncryptDetermine {\n  encryptTotally: boolean; // Store determined value whehter encrypt or decrypt\n  senderAutocryptEnabled: boolean;\n  senderPreferEncrypt: AutocryptPreferEncryptType;\n  recommendationValue: UIRecommendationValue; // Store UIRecommendationValue totally\n  receiversStatus?: Map<string, AutocryptEncryptDetermineForSingle>;\n}\n\nexport enum PGPKeyType {\n  RSA_4096 = 'RSA 4096',\n  ECC = 'ECC',\n}\n\n// Email Builder - Content Type\nexport enum EmailContentType {\n  TEXT_HTML = 'text/html',\n  TEXT_HTML_CHARSET_UTF8 = 'text/html; charset=UTF-8',\n  PLAIN_TEXT = 'text/plain',\n  PLAIN_TEXT_CHARSET_UTF8 = 'text/plain; charset=UTF-8',\n  MULTIPART_MIXED = 'multipart/mixed',\n  MULTIPART_ALTERNATE = 'multipart/alternate',\n  APPLICATION_OCTET_STREAM = 'application/octet-stream',\n  APPLICATION_PGP_ENCRYPTED = 'application/pgp-encrypted',\n  APPLICATION_PGP_SIGNATURE = 'application/pgp-signature',\n}\n\nexport const PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME = 'encrypted.asc';\nexport const PGP_MIME_DEFAULT_CONTENT = 'Version 1';\n\n// eslint-disable-next-line no-shadow\nexport enum ComposerEncryptionType {\n  COMPOSER_ENCRYPTION_TYPE_PGP_MIME_INLINE = 'COMPOSER_ENCRYPTION_TYPE_PGP_MIME_INLINE',\n  COMPOSER_ENCRYPTION_TYPE_END_TO_END = 'COMPOSER_ENCRYPTION_TYPE_END_TO_END',\n  COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NOPREERENCE = 'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NOPREERENCE',\n  COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_MUTUAL = 'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_MUTUAL',\n  COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT = 'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT',\n  COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT = 'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_NON_ENCRYPT',\n  COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT_DISCOURAGE = 'COMPOSER_ENCRYPTION_TYPE_AUTOCRYPT_ENCRYPT_DISCOURAGE',\n  COMPOSER_ENCRYPTION_TYPE_NONE = 'COMPOSER_ENCRYPTION_TYPE_NONE',\n}\n\nexport interface ImportContactResponse {\n  detail?: string;\n  success_count?: number;\n  fail_count?: number;\n}\n\nexport interface MoveMailActionPayloadType {\n  ids: number;\n  folder: MailFolderType;\n  sourceFolder: MailFolderType | string;\n  mail: Mail;\n  allowUndo: boolean;\n  fromTrash?: boolean;\n  withChildren?: boolean;\n  shouldDeleteFolder?: boolean;\n  folderToDelete?: Folder;\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\nimport { EMPTY } from 'rxjs/internal/observable/empty';\nimport { NgbModal, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\n\nimport { UsersService } from '../services';\nimport {\n  AccountDetailsGet,\n  AuthActionTypes,\n  ChangePassword,\n  ChangePasswordFailed,\n  ChangePasswordSuccess,\n  CheckUsernameAvailability,\n  CheckUsernameAvailabilityError,\n  CheckUsernameAvailabilitySuccess,\n  DeleteAccount,\n  DeleteAccountFailure,\n  DeleteAccountSuccess,\n  Update2FA,\n  Update2FASuccess,\n  ExpireSession,\n  Get2FASecret,\n  Get2FASecretSuccess,\n  GetCaptcha,\n  GetCaptchaSuccess,\n  GetInvoices,\n  LogIn,\n  LogInFailure,\n  LogInSuccess,\n  Logout,\n  RecoverPassword,\n  RecoverPasswordFailure,\n  RecoverPasswordSuccess,\n  ResetPassword,\n  ResetPasswordFailure,\n  ResetPasswordSuccess,\n  SignUp,\n  SignUpFailure,\n  SignUpSuccess,\n  SnackErrorPush,\n  SnackPush,\n  UpgradeAccount,\n  UpgradeAccountFailure,\n  UpgradeAccountSuccess,\n  VerifyCaptcha,\n  VerifyCaptchaSuccess,\n  SettingsUpdateSuccess,\n  GetMailboxes,\n  RefreshToken,\n} from '../actions';\nimport { PlanType, SignupState } from '../datatypes';\nimport { SYNC_DATA_WITH_STORE, REMEMBER_ME, NOT_FIRST_LOGIN } from '../../shared/config';\nimport { UseCacheDialogComponent } from '../../users/dialogs/use-cache-dialog/use-cache-dialog.component';\nimport { MailboxEffects } from './mailbox.effects';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthEffects {\n  constructor(\n    private actions: Actions,\n    private authService: UsersService,\n    private router: Router,\n    private modalService: NgbModal,\n  ) {}\n\n  @Effect()\n  LogIn: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.LOGIN),\n    map((action: LogIn) => action.payload),\n    switchMap(payload => {\n      return this.authService.signIn(payload).pipe(\n        map(response => new LogInSuccess({ ...response, rememberMe: payload.rememberMe, fromLoginRequest: true })),\n        catchError((errorResponse: any) => of(new LogInFailure(errorResponse.error))),\n      );\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  LogInSuccess: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.LOGIN_SUCCESS),\n    tap(response => {\n      if (response.payload.token) {\n        if (response.payload.rememberMe) {\n          localStorage.setItem(REMEMBER_ME, 'true');\n        }\n        if (response.payload.is_2fa_enabled || !response.payload.anti_phishing_phrase) {\n          this.router.navigateByUrl('/mail');\n        }\n        /**\n         * Check if first login or fresh login\n         */\n        if (localStorage.getItem(NOT_FIRST_LOGIN) !== 'true' && response.payload.fromLoginRequest) {\n          this.openUseCacheConfirmDialog();\n        }\n      }\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  LogInFailure: Observable<any> = this.actions.pipe(ofType(AuthActionTypes.LOGIN_FAILURE));\n\n  @Effect({ dispatch: false })\n  RefreshToken: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.REFRESH_TOKEN),\n    map((action: RefreshToken) => action.payload),\n    switchMap(() => {\n      return this.authService.refreshToken();\n    }),\n  );\n\n  @Effect()\n  SignUp: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.SIGNUP),\n    map((action: SignUp) => action.payload),\n    switchMap((payload: SignupState) => {\n      delete payload.monthlyPrice;\n      delete payload.annualPricePerMonth;\n      delete payload.annualPriceTotal;\n      localStorage.removeItem(NOT_FIRST_LOGIN);\n      localStorage.removeItem(SYNC_DATA_WITH_STORE);\n      sessionStorage.removeItem(NOT_FIRST_LOGIN);\n      sessionStorage.removeItem(SYNC_DATA_WITH_STORE);\n      return this.authService.signUp(payload).pipe(\n        switchMap(user => of(new SignUpSuccess(user), new LogInSuccess(user))),\n        catchError(errorResponse =>\n          of(\n            new SignUpFailure(errorResponse.error),\n            new SnackErrorPush({ message: 'Failed to signup, please try again.' }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  public LogOut: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.LOGOUT),\n    tap(action => {\n      this.authService.signOut();\n    }),\n  );\n\n  @Effect()\n  expireSession: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.EXPIRE_SESSION),\n    map((action: ExpireSession) => action.payload),\n    switchMap(() => {\n      return this.authService.expireSession().pipe(\n        switchMap(() => EMPTY),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to expire user session.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  checkUsernameAvailability: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.CHECK_USERNAME_AVAILABILITY),\n    map((action: CheckUsernameAvailability) => action.payload),\n    switchMap(payload => {\n      if (!payload) {\n        return of(new CheckUsernameAvailabilitySuccess({ exists: true }));\n      }\n      return this.authService.checkUsernameAvailability(payload).pipe(\n        map(response => new CheckUsernameAvailabilitySuccess(response)),\n        catchError(error =>\n          of(\n            new SnackErrorPush({ message: `Failed to check username availability. ${error.error}` }),\n            new CheckUsernameAvailabilityError(),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  RecoverPassword: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.RECOVER_PASSWORD),\n    map((action: RecoverPassword) => action.payload),\n    switchMap(payload => {\n      return this.authService.recoverPassword(payload).pipe(\n        switchMap(res => of(new RecoverPasswordSuccess(res))),\n        catchError(error => of(new RecoverPasswordFailure(error.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  ResetPassword: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.RESET_PASSWORD),\n    map((action: ResetPassword) => action.payload),\n    switchMap(payload => {\n      return this.authService.resetPassword(payload).pipe(\n        switchMap(user => of(new LogInSuccess(user), new ResetPasswordSuccess(user))),\n        catchError(error => of(new ResetPasswordFailure(error.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  UpgradeAccount: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.UPGRADE_ACCOUNT),\n    map((action: UpgradeAccount) => action.payload),\n    switchMap(payload => {\n      if (payload.plan_type === PlanType.FREE) {\n        payload = { plan_type: PlanType.FREE };\n      }\n      return this.authService.upgradeAccount(payload).pipe(\n        switchMap(res => {\n          return of(new UpgradeAccountSuccess(res), new AccountDetailsGet(), new GetInvoices(), new GetMailboxes());\n        }),\n        catchError(error =>\n          of(\n            new UpgradeAccountFailure(error.error),\n            new SnackErrorPush({ message: 'Failed to upgrade account, please try again.' }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  ChangePassword: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.CHANGE_PASSWORD),\n    map((action: ChangePassword) => action.payload),\n    switchMap(payload => {\n      return this.authService.changePassword(payload).pipe(\n        switchMap(user =>\n          of(\n            new ChangePasswordSuccess(payload),\n            new GetMailboxes(),\n            new SnackPush({ message: 'Password changed successfully.' }),\n          ),\n        ),\n        catchError((response: any) =>\n          of(\n            new SnackErrorPush({ message: `Failed to change password, ${response.error}` }),\n            new ChangePasswordFailed(response),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  DeleteAccount: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.DELETE_ACCOUNT),\n    map((action: DeleteAccount) => action.payload),\n    switchMap(payload => {\n      return this.authService.deleteAccount(payload).pipe(\n        switchMap(() =>\n          of(new DeleteAccountSuccess(), new SnackPush({ message: 'Account deleted successfully.' }), new Logout()),\n        ),\n        catchError(errorResponse =>\n          of(\n            new DeleteAccountFailure(errorResponse.error),\n            new SnackErrorPush({\n              message:\n                errorResponse.error && errorResponse.error.detail\n                  ? errorResponse.error.detail\n                  : 'Failed to delete account, please try again.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  getCaptcha: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.GET_CAPTCHA),\n    map((action: GetCaptcha) => action.payload),\n    switchMap(() => {\n      return this.authService.getCaptcha().pipe(\n        switchMap((response: any) => of(new GetCaptchaSuccess(response))),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message:\n                errorResponse.error && errorResponse.error.detail\n                  ? errorResponse.error.detail\n                  : 'Failed to load Captcha.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  verifyCaptcha: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.VERIFY_CAPTCHA),\n    map((action: VerifyCaptcha) => action.payload),\n    switchMap(payload => {\n      return this.authService.verifyCaptcha(payload).pipe(\n        switchMap((response: any) => {\n          const events: any[] = [new VerifyCaptchaSuccess(response)];\n          if (response.status === false) {\n            events.push(new GetCaptcha());\n          }\n          return of(...events);\n        }),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message:\n                errorResponse.error && errorResponse.error.detail\n                  ? errorResponse.error.detail\n                  : 'Failed to verify Captcha.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  get2FASecret: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.GET_2FA_SECRET),\n    map((action: Get2FASecret) => action.payload),\n    switchMap(() => {\n      return this.authService.get2FASecret().pipe(\n        switchMap((response: any) => of(new Get2FASecretSuccess(response))),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message: `Failed to load secret, ${errorResponse.error}`,\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  enable2FA: Observable<any> = this.actions.pipe(\n    ofType(AuthActionTypes.UPDATE_2FA),\n    map((action: Update2FA) => action.payload),\n    switchMap(payload => {\n      return this.authService.update2FA(payload.data).pipe(\n        switchMap((response: any) =>\n          of(\n            new Update2FASuccess(response),\n            new SettingsUpdateSuccess(payload.settings),\n            new SnackPush({\n              message: `2 Factor authentication ${payload.data.enable_2fa ? 'enabled' : 'disabled'} successfully.`,\n            }),\n          ),\n        ),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message: `Failed to ${payload.data.enable_2fa ? 'enable' : 'disable'} 2FA, ${\n                errorResponse.error\n              } Please try again.`,\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  openUseCacheConfirmDialog() {\n    const ngbModalOptions: NgbModalOptions = {\n      backdrop: 'static',\n      keyboard: false,\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    };\n    /*this.useCacheDialogRef =  */ this.modalService.open(UseCacheDialogComponent, ngbModalOptions);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport {\n  BitcoinActionTypes,\n  CheckTransaction,\n  CheckTransactionSuccess,\n  CreateNewWallet,\n  CreateNewWalletSuccess,\n} from '../actions/bitcoin.action';\nimport { SnackErrorPush } from '../actions';\nimport { BitcoinService } from '../services/bitcoin.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BitcoinEffects {\n  constructor(private actions: Actions, private bitcoinService: BitcoinService) {}\n\n  @Effect()\n  createWalletAddress: Observable<any> = this.actions.pipe(\n    ofType(BitcoinActionTypes.CREATE_NEW_WALLET),\n    map((action: CreateNewWallet) => action.payload),\n    switchMap(payload => {\n      return this.bitcoinService.createNewWallet(payload).pipe(\n        switchMap(res => of(new CreateNewWalletSuccess(res))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to create a new Bitcoin wallet.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  checkPendingTransaction: Observable<any> = this.actions.pipe(\n    ofType(BitcoinActionTypes.CHECK_TRANSACTION),\n    map((action: CheckTransaction) => action.payload),\n    switchMap(payload => {\n      return this.bitcoinService.checkTransaction(payload).pipe(\n        map(response => new CheckTransactionSuccess(response)),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to check the Bitcoin transaction.' }))),\n      );\n    }),\n  );\n}\n","import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable, Subscription } from 'rxjs';\nimport { catchError, finalize, map, mergeMap, switchMap, concatMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { MailService } from '../services';\nimport {\n  ComposeMailActionTypes,\n  CreateMail,\n  CreateMailSuccess,\n  DeleteAttachment,\n  DeleteAttachmentFailure,\n  DeleteAttachmentSuccess,\n  DeleteMailSuccess,\n  GetUnreadMailsCount,\n  GetUsersKeys,\n  GetUsersKeysSuccess,\n  SendMail,\n  SendMailFailure,\n  SendMailSuccess,\n  SnackErrorPush,\n  SnackPush,\n  UpdateCurrentFolder,\n  UpdateMailDetailChildren,\n  UploadAttachment,\n  UploadAttachmentFailure,\n  UploadAttachmentProgress,\n  UploadAttachmentRequest,\n  UploadAttachmentSuccess,\n} from '../actions';\nimport { Draft } from '../datatypes';\nimport { MailFolderType } from '../models';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComposeMailEffects {\n  constructor(private actions: Actions, private mailService: MailService) {}\n\n  @Effect()\n  createMailEffect: Observable<any> = this.actions.pipe(\n    ofType(ComposeMailActionTypes.CREATE_MAIL),\n    map((action: CreateMail) => action.payload),\n    mergeMap(payload => {\n      return this.mailService.createMail(payload.draft).pipe(\n        switchMap(res =>\n          of(\n            new CreateMailSuccess({ draft: payload, response: res }),\n            new UpdateCurrentFolder(res),\n            new GetUnreadMailsCount(),\n          ),\n        ),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to save mail.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  uploadAttachmentEffect: Observable<any> = this.actions.pipe(\n    ofType(ComposeMailActionTypes.UPLOAD_ATTACHMENT),\n    map((action: UploadAttachment) => action.payload),\n    mergeMap(payload => {\n      // TODO: replace custom observable with switchMap\n      return Observable.create((observer: any) => {\n        const request: Subscription = this.mailService\n          .uploadFile(payload)\n          .pipe(finalize(() => observer.complete()))\n          .subscribe(\n            (event: any) => {\n              if (event.type === HttpEventType.UploadProgress) {\n                const progress = Math.round((100 * event.loaded) / event.total);\n                observer.next(new UploadAttachmentProgress({ ...payload, progress }));\n              } else if (event instanceof HttpResponse) {\n                observer.next(\n                  new UploadAttachmentSuccess({\n                    data: payload,\n                    response: event.body,\n                    isPGPMimeMessage: !!payload.isPGPMimeMessage,\n                  }),\n                );\n              }\n            },\n            error => {\n              observer.next(new SnackErrorPush({ message: 'Failed to upload attachment.' }));\n              observer.next(new UploadAttachmentFailure(payload));\n            },\n          );\n        observer.next(new UploadAttachmentRequest({ ...payload, request }));\n      });\n    }),\n  );\n\n  @Effect()\n  deleteAttachmentEffect: Observable<any> = this.actions.pipe(\n    ofType(ComposeMailActionTypes.DELETE_ATTACHMENT),\n    map((action: DeleteAttachment) => action.payload),\n    mergeMap(payload => {\n      if (payload.id) {\n        return this.mailService.deleteAttachment(payload).pipe(\n          switchMap(() => of(new DeleteAttachmentSuccess(payload))),\n          catchError(() =>\n            of(new SnackErrorPush({ message: 'Failed to delete attachment.' }), new DeleteAttachmentFailure(payload)),\n          ),\n        );\n      }\n      return of(new DeleteAttachmentSuccess(payload));\n    }),\n  );\n\n  @Effect()\n  sendMailEffect: Observable<any> = this.actions.pipe(\n    ofType(ComposeMailActionTypes.SEND_MAIL),\n    map((action: SendMail) => action.payload),\n    mergeMap((payload: Draft) => {\n      let message: string;\n      if (payload.draft.dead_man_duration || payload.draft.delayed_delivery) {\n        if (payload.draft.delayed_delivery === 'CancelSend') {\n          payload.draft.delayed_delivery = null;\n          payload.draft.send = false;\n          payload.draft.folder = MailFolderType.DRAFT;\n          message = `Delay delivery send cancelled and message reverted to draft.`;\n        } else {\n          payload.draft.send = false;\n          payload.draft.folder = MailFolderType.OUTBOX;\n          message = `Mail scheduled`;\n        }\n      } else {\n        payload.draft.send = true;\n        payload.draft.folder = MailFolderType.SENT;\n        message = `Mail sent successfully`;\n      }\n      payload.draft.is_subject_encrypted = payload.draft.is_subject_encrypted && payload.draft.is_encrypted;\n      return this.mailService.createMail(payload.draft).pipe(\n        switchMap((res: any) => {\n          res.last_action_data = {\n            last_action: payload.draft.last_action,\n            last_action_parent_id: payload.draft.last_action_parent_id,\n          };\n          res.folder = MailFolderType.SENT;\n          const events: any[] = [\n            new SendMailSuccess(payload),\n            new UpdateCurrentFolder(res),\n            new UpdateMailDetailChildren(res),\n            new DeleteMailSuccess({ ids: `${res.id}`, isDraft: true, isMailDetailPage: payload.isMailDetailPage }),\n            new SnackPush({\n              message,\n            }),\n            new GetUnreadMailsCount(),\n          ];\n          return events;\n        }),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message: errorResponse.error || 'Failed to send mail.',\n              duration: 10000,\n            }),\n            new SendMailFailure(payload),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  getUsersKeysEffect: Observable<any> = this.actions.pipe(\n    ofType(ComposeMailActionTypes.GET_USERS_KEYS),\n    map((action: GetUsersKeys) => action.payload),\n    concatMap((payload: any) => {\n      if (payload.emails.length > 0) {\n        return this.mailService.getUsersPublicKeys(payload.emails).pipe(\n          switchMap(keys =>\n            of(new GetUsersKeysSuccess({ draftId: payload.draftId ? payload.draftId : 0, data: keys, isBlind: false })),\n          ),\n          catchError(() => of(new SnackErrorPush({ message: 'Failed to get public keys.' }))),\n        );\n      } else {\n        return of(new GetUsersKeysSuccess({ draftId: payload.draftId ? payload.draftId : 0, isBlind: true }));\n      }\n    }),\n  );\n}\n","import { HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { EMPTY } from 'rxjs/internal/observable/empty';\nimport { of } from 'rxjs/internal/observable/of';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\n\nimport { OpenPgpService, UsersService } from '../services';\nimport {\n  Accounts,\n  ContactAddError,\n  ContactAddSuccess,\n  ContactDeleteSuccess,\n  ContactGetFailure,\n  ContactNotifySuccess,\n  ContactNotifyFailure,\n  ContactGetSuccess,\n  ContactImport,\n  ContactImportFailure,\n  ContactImportSuccess,\n  ContactsActionTypes,\n  ContactsGet,\n  GetEmailContacts,\n  GetEmailContactsSuccess,\n  SnackErrorPush,\n  SnackPush,\n  UpdateBatchContacts,\n  UpdateBatchContactsSuccess,\n  EmptyOnlyFolder,\n  ContactFetchKeys,\n  ContactFetchKeysSuccess,\n  ContactFetchKeysFailure,\n  ContactAddKeys,\n  ContactAddKeysSuccess,\n  ContactAddKeysFailure,\n  ContactRemoveKeys,\n  ContactRemoveKeysSuccess,\n  ContactRemoveKeysFailure,\n  ContactBulkUpdateKeys,\n  ContactBulkUpdateKeysSuccess,\n  ContactBulkUpdateKeysFailure,\n  MatchContactUserKeys,\n  GetUsersKeys,\n} from '../actions';\nimport { Contact, ImportContactResponse } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ContactsEffects {\n  constructor(private actions: Actions, private openPgpService: OpenPgpService, private userService: UsersService) {}\n\n  @Effect()\n  Contact: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_GET),\n    map((action: ContactsGet) => action.payload),\n    switchMap(payload => {\n      return this.userService.getContact(payload.limit, payload.offset, payload.q).pipe(\n        map(response => {\n          if (payload.isDecrypting) {\n            response.isDecrypting = true;\n            return new ContactGetSuccess(response);\n          }\n          let count = 0;\n          const contacts: Contact[] = response.results;\n          contacts.forEach(contact => {\n            if (contact.is_encrypted) {\n              contact.is_decryptionInProgress = true;\n              count += 1;\n              setTimeout(() => {\n                this.openPgpService.decryptContact(contact.encrypted_data, contact.id);\n              }, count * 300);\n            }\n          });\n\n          return new ContactGetSuccess(response);\n        }),\n        catchError(() => of(new ContactGetFailure())),\n      );\n    }),\n  );\n\n  @Effect()\n  ContactAdd: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_ADD),\n    switchMap((action: Accounts) =>\n      this.userService.addContact(action.payload).pipe(\n        switchMap(contact => {\n          contact.isUpdating = action.payload.id;\n          if (contact.is_encrypted) {\n            setTimeout(() => {\n              this.openPgpService.decryptContact(contact.encrypted_data, contact.id);\n            }, 150);\n          }\n          return of(\n            new ContactAddSuccess(contact),\n            // new MatchContactUserKeys({ ...contact, contactAdd: true }),\n            new GetUsersKeys({\n              emails: [contact.email],\n            }),\n            new SnackPush({ message: `Contact ${action.payload.id ? 'updated' : 'saved'} successfully.` }),\n          );\n        }),\n        catchError(() =>\n          of(\n            new ContactAddError(),\n            new SnackErrorPush({ message: `Failed to ${action.payload.id ? 'update' : 'save'} contact.` }),\n          ),\n        ),\n      ),\n    ),\n  );\n\n  @Effect()\n  ContactDelete: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_DELETE),\n    map((action: Accounts) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteContact(payload).pipe(\n        switchMap(() => {\n          return of(new ContactDeleteSuccess(payload), new SnackPush({ message: 'Contacts deleted successfully.' }));\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to delete contacts.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  ContactNotify: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_NOTIFY),\n    map((action: Accounts) => action.payload),\n    switchMap(payload => {\n      return this.userService.notifyContact(payload).pipe(\n        switchMap(res => {\n          if (res && res.length === 0) {\n            return of(new SnackErrorPush({ message: 'Failed to notify' }), new ContactNotifyFailure({}));\n          }\n          return of(\n            new EmptyOnlyFolder({ folder: 'sent' }),\n            new ContactNotifySuccess(payload),\n            new SnackPush({ message: 'Notification emails have been sent successfully.' }),\n          );\n        }),\n        catchError(error => {\n          return of(\n            new SnackErrorPush({ message: error.error.msg ? error.error.msg : 'Failed to notify' }),\n            new ContactNotifyFailure(error.error),\n          );\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  ContactImport: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_IMPORT),\n    map((action: ContactImport) => action.payload),\n    switchMap(payload => {\n      return this.userService.importContacts(payload).pipe(\n        mergeMap(event => {\n          if (event instanceof HttpResponse) {\n            const result: ImportContactResponse = event.body;\n            let message =\n              result.detail === 'success'\n                ? `${result.success_count} contacts imported, ${result.fail_count} contacts failed`\n                : 'Failed to import contacts.';\n            return of(\n              new ContactImportSuccess(event.body),\n              new ContactsGet({ limit: 50, offset: 0 }),\n              new SnackPush({ message }),\n            );\n          }\n          return EMPTY;\n        }),\n        catchError(error => {\n          return of(\n            new SnackErrorPush({ message: 'Failed to import contacts.' }),\n            new ContactImportFailure(error.error),\n          );\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  getEmailsContactsEffect: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.GET_EMAIL_CONTACTS),\n    map((action: GetEmailContacts) => action.payload),\n    switchMap(() => {\n      return this.userService.getEmailContacts().pipe(\n        switchMap(res => of(new GetEmailContactsSuccess(res.results))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get email contacts.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  updateBatchContacts: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_BATCH_UPDATE),\n    map((action: UpdateBatchContacts) => action.payload),\n    switchMap(payload => {\n      return this.userService.updateBatchContacts(payload).pipe(\n        switchMap(() => of(new UpdateBatchContactsSuccess(payload))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to update batch contacts.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  contactFetchKeys: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_FETCH_KEYS),\n    map((action: ContactFetchKeys) => action.payload),\n    switchMap(payload => {\n      return this.userService.contactFetchKeys(payload).pipe(\n        switchMap(res => of(new ContactFetchKeysSuccess(res))),\n        catchError(error => {\n          return of(new ContactFetchKeysFailure(error.error));\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  contactAddKeys: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_ADD_KEYS),\n    map((action: ContactAddKeys) => action.payload),\n    switchMap(payload => {\n      return this.userService.contactAddKeys(payload.key).pipe(\n        switchMap(res => {\n          if (payload.id) {\n            return of(\n              new ContactAddKeysSuccess(res),\n              // new MatchContactUserKeys({ ...res, email: payload.email, contactKeyUpdate: true }),\n              new GetUsersKeys({\n                emails: [payload.email],\n              }),\n              new SnackPush({ message: `Public Key with fingerprint ${payload.fingerprint} has been updated` }),\n            );\n          } else {\n            return of(\n              new ContactAddKeysSuccess(res),\n              // new MatchContactUserKeys({ ...res, email: payload.email, contactKeyAdd: true })\n              new GetUsersKeys({\n                emails: [payload.email],\n              }),\n            );\n          }\n        }),\n        catchError(error => {\n          return of(\n            new ContactAddKeysFailure(error.error),\n            new SnackErrorPush({ message: 'Failed to add public key' }),\n          );\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  contactRemoveKeys: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_REMOVE_KEYS),\n    map((action: ContactRemoveKeys) => action.payload),\n    switchMap(payload => {\n      return this.userService.contactRemoveKeys(payload.key).pipe(\n        switchMap(res =>\n          of(\n            new ContactRemoveKeysSuccess(payload.key),\n            // new MatchContactUserKeys({ ...res, email: payload.email, contactKeyRemove: true })\n            new GetUsersKeys({\n              emails: [payload.email],\n            }),\n          ),\n        ),\n        catchError(error => {\n          return of(\n            new ContactRemoveKeysFailure(error.error),\n            new SnackErrorPush({ message: 'Failed to remove public key' }),\n          );\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  contactBulkUpdateKeys: Observable<any> = this.actions.pipe(\n    ofType(ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS),\n    map((action: ContactBulkUpdateKeys) => action.payload),\n    switchMap(payload => {\n      return this.userService.contactBulkUpdateKeys(payload).pipe(\n        switchMap(res => of(new ContactBulkUpdateKeysSuccess(payload))),\n        catchError(error => {\n          return of(\n            new ContactBulkUpdateKeysFailure(error.error),\n            new SnackErrorPush({ message: 'Failed to update advanced settings' }),\n          );\n        }),\n      );\n    }),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, tap, switchMap } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { DonationService } from '../services/donation.service';\nimport { DonationActionTypes, MakeStripDonation, MakeStripeDonationSuccess } from '../actions/donate.actions';\nimport { SnackErrorPush } from '../actions/users.action';\nimport { NotificationService } from '../services/notification.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DonateEffects {\n  constructor(\n    private actions: Actions,\n    private donationService: DonationService,\n    private notificationService: NotificationService,\n    private router: Router,\n  ) {}\n\n  @Effect()\n  makeStripeDonation: Observable<any> = this.actions.pipe(\n    ofType(DonationActionTypes.MAKE_STRIPE_DONATION),\n    map((action: MakeStripDonation) => action.payload),\n    switchMap(payload => {\n      return this.donationService.makeStripeDonation(payload).pipe(\n        map(payment_success => new MakeStripeDonationSuccess(payment_success)),\n        catchError(errorResponse => of(new SnackErrorPush({ message: errorResponse.error.detail }))),\n      );\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  makeStripeDonationSuccess: Observable<any> = this.actions.pipe(\n    ofType(DonationActionTypes.MAKE_STRIPE_DONATION_SUCCESS),\n    tap(response => {\n      this.notificationService.showSnackBar('Donated Successfully. Thank you for your donation.', 'CLOSE', {\n        duration: 10000,\n      });\n      this.router.navigateByUrl('/donate');\n    }),\n  );\n}\n","import { OrganizationEffects } from '../organization.store';\n\nimport { ComposeMailEffects } from './compose-mail.effects';\nimport { RouterEffects } from './router.effect';\nimport { AuthEffects } from './auth.effects';\nimport { MailEffects } from './mail.effects';\nimport { SecureMessageEffects } from './secure-message.effects';\nimport { UsersEffects } from './users.effects';\nimport { TimezoneEffects } from './timezone.effects';\nimport { BitcoinEffects } from './bitcoin.effects';\nimport { MailboxEffects } from './mailbox.effects';\nimport { DonateEffects } from './donate.effects';\nimport { ContactsEffects } from './contacts.effects';\n\nexport const effects: any[] = [\n  RouterEffects,\n  AuthEffects,\n  MailEffects,\n  UsersEffects,\n  TimezoneEffects,\n  BitcoinEffects,\n  MailboxEffects,\n  ComposeMailEffects,\n  SecureMessageEffects,\n  DonateEffects,\n  OrganizationEffects,\n  ContactsEffects,\n];\n\nexport * from './router.effect';\nexport * from './auth.effects';\nexport * from './mail.effects';\nexport * from './users.effects';\nexport * from './timezone.effects';\nexport * from './bitcoin.effects';\nexport * from './mailbox.effects';\nexport * from './compose-mail.effects';\nexport * from './secure-message.effects';\nexport * from './donate.effects';\nexport * from './contacts.effects';\nexport { OrganizationEffects } from '../organization.store';\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { MailService } from '../services';\nimport {\n  BlackListGet,\n  DeleteFolder,\n  DeleteMail,\n  DeleteMailForAll,\n  DeleteMailForAllSuccess,\n  DeleteMailSuccess,\n  EmptyFolder,\n  EmptyFolderFailure,\n  EmptyFolderSuccess,\n  GetMailDetail,\n  GetMailDetailSuccess,\n  GetMailDetailFailure,\n  GetMails,\n  GetMailsSuccess,\n  GetUnreadMailsCount,\n  GetUnreadMailsCountSuccess,\n  GetCustomFolderMessageCount,\n  GetCustomFolderMessageCountSuccess,\n  MailActionTypes,\n  MoveMail,\n  MoveMailSuccess,\n  ReadMail,\n  ReadMailSuccess,\n  SnackErrorPush,\n  SnackPush,\n  StarMailSuccess,\n  UndoDeleteMail,\n  UndoDeleteMailSuccess,\n} from '../actions';\nimport { MailFolderType } from '../models';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MailEffects {\n  constructor(private actions: Actions, private mailService: MailService) {}\n\n  @Effect()\n  getMailsEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.GET_MAILS),\n    map((action: GetMails) => action.payload),\n    switchMap(payload => {\n      return this.mailService.getMessages(payload).pipe(\n        map(response => {\n          return new GetMailsSuccess({\n            ...payload,\n            is_not_first_page: !!response.previous,\n            mails: response.results,\n            total_mail_count: response.total_count,\n            is_from_socket: false,\n          });\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get messages.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getUnreadMailsCountEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.GET_UNREAD_MAILS_COUNT),\n    map((action: GetUnreadMailsCount) => action.payload),\n    mergeMap(() => {\n      return this.mailService.getUnreadMailsCount().pipe(\n        map(response => {\n          return new GetUnreadMailsCountSuccess(response);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get unread mails count.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getCustomFolderMessageCountEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.GET_CUSTOMFOLDER_MESSAGE_COUNT),\n    map((action: GetCustomFolderMessageCount) => action.payload),\n    mergeMap(() => {\n      return this.mailService.getCustomFolderMessageCount().pipe(\n        map(response => {\n          return new GetCustomFolderMessageCountSuccess(response);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get custome folder message count.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  moveMailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.MOVE_MAIL),\n    map((action: MoveMail) => action.payload),\n    switchMap(payload => {\n      return this.mailService\n        .moveMail(payload.ids, payload.folder, payload.sourceFolder, payload.withChildren, payload.fromTrash)\n        .pipe(\n          switchMap(() => {\n            const updateFolderActions = [];\n\n            if (payload.shouldDeleteFolder) {\n              updateFolderActions.push(new DeleteFolder(payload.folderToDelete));\n            }\n            updateFolderActions.push(new MoveMailSuccess(payload));\n            if (!payload.shouldDeleteFolder) {\n              updateFolderActions.push(\n                new SnackPush({\n                  message: `Mail moved to ${payload.folder}`,\n                  ids: payload.ids,\n                  folder: payload.folder,\n                  sourceFolder: payload.sourceFolder,\n                  mail: payload.mail,\n                  allowUndo: payload.allowUndo,\n                }),\n              );\n            }\n            if (payload.folder === MailFolderType.SPAM) {\n              updateFolderActions.push(new BlackListGet());\n            }\n            return of(...updateFolderActions);\n          }),\n          catchError(() => of(new SnackErrorPush({ message: `Failed to move mail to ${payload.folder}.` }))),\n        );\n    }),\n  );\n\n  @Effect()\n  deleteMailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.DELETE_MAIL),\n    map((action: DeleteMail) => action.payload),\n    switchMap(payload => {\n      return this.mailService.deleteMails(payload.ids, payload.folder, payload.parent_only).pipe(\n        switchMap(() => of(new DeleteMailSuccess(payload))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to delete mail.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteMailForAllEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.DELETE_MAIL_FOR_ALL),\n    map((action: DeleteMailForAll) => action.payload),\n    switchMap(payload => {\n      return this.mailService.deleteMailForAll(payload.id).pipe(\n        switchMap(() =>\n          of(new DeleteMailForAllSuccess(payload), new SnackErrorPush({ message: 'Mail deleted successfully.' })),\n        ),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to delete mail.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  readMailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.READ_MAIL),\n    map((action: ReadMail) => action.payload),\n    switchMap(payload => {\n      return this.mailService.markAsRead(payload.ids, payload.read, payload.folder).pipe(\n        switchMap(() => of(new ReadMailSuccess(payload))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to mark mail as read.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  starMailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.STAR_MAIL),\n    map((action: ReadMail) => action.payload),\n    mergeMap(payload => {\n      return this.mailService.markAsStarred(payload.ids, payload.starred, payload.folder, payload.withChildren).pipe(\n        switchMap(() => of(new StarMailSuccess(payload))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to mark as starred.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getMailDetailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.GET_MAIL_DETAIL),\n    map((action: GetMailDetail) => action.payload),\n    switchMap(payload => {\n      return this.mailService.getMessage(payload).pipe(\n        switchMap(res => of(new GetMailDetailSuccess(res))),\n        catchError(error => of(new GetMailDetailFailure(error))),\n      );\n    }),\n  );\n\n  @Effect()\n  undoDeleteDraftMailEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.UNDO_DELETE_MAIL),\n    map((action: UndoDeleteMail) => action.payload),\n    switchMap(payload => {\n      return this.mailService.moveMail(payload.ids, payload.sourceFolder, payload.sourceFolder).pipe(\n        switchMap(() => of(new UndoDeleteMailSuccess(payload))),\n        catchError(() => of(new SnackErrorPush({ message: `Failed to move mail to ${payload.folder}.` }))),\n      );\n    }),\n  );\n\n  @Effect()\n  emptyTrashEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.EMPTY_FOLDER),\n    map((action: EmptyFolder) => action.payload),\n    switchMap(payload => {\n      return this.mailService.emptyFolder(payload).pipe(\n        switchMap(() =>\n          of(new EmptyFolderSuccess(payload), new SnackErrorPush({ message: `Mails deleted permanently.` })),\n        ),\n        catchError(error =>\n          of(\n            new SnackErrorPush({ message: `Failed to delete mails, please try again.` }),\n            new EmptyFolderFailure(error.error),\n          ),\n        ),\n      );\n    }),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { MailService } from '../services';\nimport {\n  CreateMailbox,\n  CreateMailboxFailure,\n  CreateMailboxSuccess,\n  DeleteMailbox,\n  DeleteMailboxSuccess,\n  GetDomains,\n  GetMailboxes,\n  GetMailboxesSuccess,\n  MailActionTypes,\n  MailboxSettingsUpdateFailure,\n  SetDefaultMailbox,\n  SetDefaultMailboxSuccess,\n  UpdateMailboxOrder,\n  UpdateMailboxOrderSuccess,\n} from '../actions';\nimport { Mailbox } from '../models';\nimport {\n  FetchMailboxKeys,\n  FetchMailboxKeysFailure,\n  FetchMailboxKeysSuccess,\n  MailboxSettingsUpdate,\n  MailboxSettingsUpdateSuccess,\n  AddMailboxKeys,\n  AddMailboxKeysFailure,\n  AddMailboxKeysSuccess,\n  DeleteMailboxKeys,\n  DeleteMailboxKeysFailure,\n  DeleteMailboxKeysSuccess,\n  SetMailboxKeyPrimary,\n  SetMailboxKeyPrimarySuccess,\n  SetMailboxKeyPrimaryFailure,\n} from '../actions/mail.actions';\nimport { SnackErrorPush, SnackPush } from '../actions/users.action';\nimport { MailboxKey } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MailboxEffects {\n  constructor(private actions: Actions, private mailService: MailService) {}\n\n  @Effect()\n  getMailboxesEffect: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.GET_MAILBOXES),\n    map((action: GetMailboxes) => action.payload),\n    switchMap(payload => {\n      return this.mailService.getMailboxes(payload.limit, payload.offset).pipe(\n        switchMap(mails => of(new GetMailboxesSuccess(mails), new FetchMailboxKeys())),\n        catchError(error => of(new SnackErrorPush({ message: 'Failed to get mailboxes.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  mailboxSettingsUpdate: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.MAILBOX_SETTINGS_UPDATE),\n    map((action: MailboxSettingsUpdate) => action.payload),\n    switchMap((payload: any) => {\n      payload.inProgress = false;\n      return this.mailService.updateMailBoxSettings(payload).pipe(\n        switchMap(res => {\n          const actions: any[] = [new MailboxSettingsUpdateSuccess(res)];\n          if (payload.successMsg) {\n            actions.push(new SnackErrorPush({ message: payload.successMsg }));\n          } else {\n            actions.push(new SnackErrorPush({ message: 'Settings updated successfully.' }));\n          }\n          return of(...actions);\n        }),\n        catchError(error =>\n          of(\n            new SnackErrorPush({ message: error.error ? error.error : 'Failed to update mailbox settings.' }),\n            new MailboxSettingsUpdateFailure(payload),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  createMailbox: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.CREATE_MAILBOX),\n    map((action: CreateMailbox) => action.payload),\n    switchMap((payload: any) => {\n      return this.mailService.createMailbox(payload).pipe(\n        switchMap(response => of(new CreateMailboxSuccess(response), new GetDomains(), new FetchMailboxKeys())),\n        catchError(error =>\n          of(\n            new CreateMailboxFailure(error.error),\n            new SnackErrorPush({ message: 'Failed to create new email address.' }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  setDefaultMailbox: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.SET_DEFAULT_MAILBOX),\n    map((action: SetDefaultMailbox) => action.payload),\n    switchMap((payload: Mailbox) => {\n      return this.mailService.updateMailBoxSettings({ ...payload, is_default: true }).pipe(\n        switchMap(res => of(new SetDefaultMailboxSuccess(res))),\n        catchError(error => of(new SnackErrorPush({ message: 'Failed to set email address as default.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  updateMailboxOrder: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.UPDATE_MAILBOX_ORDER),\n    map((action: UpdateMailboxOrder) => action.payload),\n    switchMap((payload: any) => {\n      return this.mailService.updateMailboxOrder(payload.data).pipe(\n        switchMap(() =>\n          of(\n            new SnackErrorPush({ message: 'Sort order saved successfully.' }),\n            new UpdateMailboxOrderSuccess({ mailboxes: payload.mailboxes }),\n          ),\n        ),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to update emails sort order.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteMailbox: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.DELETE_MAILBOX),\n    map((action: DeleteMailbox) => action.payload),\n    switchMap((payload: Mailbox) => {\n      return this.mailService.deleteMailbox(payload.id).pipe(\n        switchMap(() =>\n          of(\n            new SnackErrorPush({ message: `Alias '${payload.email}' deleted successfully.` }),\n            new DeleteMailboxSuccess(payload),\n          ),\n        ),\n        catchError(error => of(new SnackErrorPush({ message: `Failed to delete alias: ${error.error}` }))),\n      );\n    }),\n  );\n\n  @Effect()\n  fetchMailboxKeys: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.FETCH_MAILBOX_KEYS),\n    map((action: FetchMailboxKeys) => action.payload),\n    switchMap(() => {\n      return this.mailService.fetchMailboxKeys().pipe(\n        switchMap(res => of(new FetchMailboxKeysSuccess(res))),\n        catchError(error => of(new FetchMailboxKeysFailure())),\n      );\n    }),\n  );\n\n  @Effect()\n  addMailboxKeys: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.ADD_MAILBOX_KEYS),\n    map((action: AddMailboxKeys) => action.payload),\n    switchMap((payload: MailboxKey) => {\n      return this.mailService.addMailboxKeys(payload).pipe(\n        switchMap(res =>\n          of(\n            new AddMailboxKeysSuccess({ ...res, private_key: payload.private_key }),\n            new SnackPush({ message: 'Mailbox Key has been added successfully' }),\n          ),\n        ),\n        catchError(error =>\n          of(\n            new AddMailboxKeysFailure(),\n            new SnackErrorPush({\n              message: typeof error.error === 'string' ? error.error : 'Failed to add mailbox key',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteMailboxKeys: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.DELETE_MAILBOX_KEYS),\n    map((action: DeleteMailboxKeys) => action.payload),\n    switchMap((payload: MailboxKey) => {\n      return this.mailService.deleteMailboxKeys(payload).pipe(\n        switchMap(res =>\n          of(\n            new DeleteMailboxKeysSuccess(payload),\n            new SnackPush({ message: 'Mailbox Key has been deleted successfully' }),\n          ),\n        ),\n        catchError(error => {\n          return of(\n            new DeleteMailboxKeysFailure(),\n            new SnackErrorPush({\n              message: typeof error.error === 'string' ? error.error : 'Failed to delete mailbox key',\n            }),\n          );\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  setPrimaryMailboxKeys: Observable<any> = this.actions.pipe(\n    ofType(MailActionTypes.SET_PRIMARY_MAILBOX_KEYS),\n    map((action: SetMailboxKeyPrimary) => action.payload),\n    switchMap((payload: MailboxKey) => {\n      return this.mailService.setPrimaryMailboxKeys(payload).pipe(\n        switchMap(res =>\n          of(\n            new SetMailboxKeyPrimarySuccess(payload),\n            new SnackPush({ message: 'Mailbox key has been updated successfully' }),\n          ),\n        ),\n        catchError(error =>\n          of(\n            new SetMailboxKeyPrimaryFailure(),\n            new SnackErrorPush({ message: 'Failed to set mailbox key as primary' }),\n          ),\n        ),\n      );\n    }),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Effect, Actions, ofType } from '@ngrx/effects';\nimport { tap, map } from 'rxjs/operators';\n\nimport * as RouterActions from '../actions';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RouterEffects {\n  constructor(private actions$: Actions, private router: Router, private location: Location) {}\n\n  @Effect({ dispatch: false })\n  navigate$ = this.actions$.pipe(\n    ofType(RouterActions.GO),\n    map((action: RouterActions.Go) => action.payload),\n    tap(({ path, query: queryParams, extras }) => {\n      this.router.navigate(path, { queryParams, ...extras });\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  navigateBack$ = this.actions$.pipe(\n    ofType(RouterActions.BACK),\n    tap(() => this.location.back()),\n  );\n\n  @Effect({ dispatch: false })\n  navigateForward$ = this.actions$.pipe(\n    ofType(RouterActions.FORWARD),\n    tap(() => this.location.forward()),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport {\n  GetMessage,\n  GetMessageFailure,\n  GetMessageSuccess,\n  GetSecureMessageUserKeys,\n  GetSecureMessageUserKeysSuccess,\n  SecureMessageActionTypes,\n  SendSecureMessageReply,\n  SendSecureMessageReplySuccess,\n  SnackErrorPush,\n  SnackPush,\n} from '../actions';\nimport { MailService } from '../services';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SecureMessageEffects {\n  constructor(private actions: Actions, private mailService: MailService) {}\n\n  @Effect()\n  getMessageEffect: Observable<any> = this.actions.pipe(\n    ofType(SecureMessageActionTypes.GET_MESSAGE),\n    map((action: GetMessage) => action.payload),\n    switchMap(payload => {\n      return this.mailService.getSecureMessage(payload.hash, payload.secret).pipe(\n        switchMap(res => of(new GetMessageSuccess(res))),\n        catchError(error => of(new GetMessageFailure({ error: error.error }))),\n      );\n    }),\n  );\n\n  @Effect()\n  sendReplyEffect: Observable<any> = this.actions.pipe(\n    ofType(SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY),\n    map((action: SendSecureMessageReply) => action.payload),\n    switchMap(payload => {\n      return this.mailService.secureReply(payload.hash, payload.secret, payload.message).pipe(\n        switchMap(res => {\n          return of(\n            new SendSecureMessageReplySuccess({ data: payload, response: res }),\n            new SnackPush({\n              message: `Reply sent successfully`,\n            }),\n          );\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to send reply.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getUsersKeysEffect: Observable<any> = this.actions.pipe(\n    ofType(SecureMessageActionTypes.GET_SECURE_MESSAGE_USERS_KEYS),\n    map((action: GetSecureMessageUserKeys) => action.payload),\n    mergeMap((payload: any) => {\n      return this.mailService.getSecureMessageKeys(payload.hash, payload.secret).pipe(\n        switchMap(keys => of(new GetSecureMessageUserKeysSuccess(keys))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get secure message user keys.' }))),\n      );\n    }),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Observable } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { TimezoneActionTypes, TimezoneGet, TimezoneGetSuccess } from '../actions/timezone.action';\nimport { TimezoneService } from '../services/timezone.service';\nimport { SnackErrorPush } from '../actions';\n@Injectable({\n  providedIn: 'root',\n})\nexport class TimezoneEffects {\n  constructor(private actions: Actions, private timezoneService: TimezoneService) {}\n\n  @Effect()\n  getTimezones: Observable<any> = this.actions.pipe(\n    ofType(TimezoneActionTypes.TIMEZONE_GET),\n    map((action: TimezoneGet) => action.payload),\n    switchMap(() => {\n      return this.timezoneService.getTimezones().pipe(\n        map(timezones => {\n          return new TimezoneGetSuccess(timezones);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get timezones.' }))),\n      );\n    }),\n  );\n}\n","import { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { Action } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { of } from 'rxjs/internal/observable/of';\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\nimport { MatSnackBarConfig } from '@angular/material/snack-bar';\n\nimport { MailService, SharedService, UsersService } from '../services';\nimport {\n  AccountDetailsGet,\n  AccountDetailsGetSuccess,\n  Accounts,\n  AccountsReadSuccess,\n  BlackListAdd,\n  BlackListAddError,\n  BlackListAddSuccess,\n  BlackListDelete,\n  BlackListDeleteSuccess,\n  BlackListGet,\n  BlackListsReadSuccess,\n  CreateDomain,\n  CreateDomainFailure,\n  CreateDomainSuccess,\n  CreateFilter,\n  CreateFilterFailure,\n  CreateFilterSuccess,\n  CreateFolder,\n  CreateFolderFailure,\n  CreateFolderSuccess,\n  DeleteDomain,\n  DeleteDomainFailure,\n  DeleteDomainSuccess,\n  DeleteFilter,\n  DeleteFilterFailure,\n  DeleteFilterSuccess,\n  DeleteFolder,\n  DeleteFolderSuccess,\n  GenerateInviteCode,\n  GenerateInviteCodeFailure,\n  GenerateInviteCodeSuccess,\n  GetDomains,\n  GetDomainsSuccess,\n  GetFilters,\n  GetFiltersSuccess,\n  GetInviteCodes,\n  GetInviteCodesSuccess,\n  GetInvoices,\n  GetInvoicesSuccess,\n  GetNotification,\n  GetNotificationSuccess,\n  GetUnreadMailsCount,\n  GetUpgradeAmount,\n  GetUpgradeAmountSuccess,\n  PaymentFailure,\n  ReadDomain,\n  ReadDomainFailure,\n  ReadDomainSuccess,\n  SaveAutoResponder,\n  SaveAutoResponderFailure,\n  SaveAutoResponderSuccess,\n  SendEmailForwardingCode,\n  SendEmailForwardingCodeFailure,\n  SendEmailForwardingCodeSuccess,\n  SettingsUpdate,\n  SettingsUpdateSuccess,\n  SnackErrorPush,\n  SnackErrorPushSuccess,\n  SnackPush,\n  SnackPushSuccess,\n  UpdateDomain,\n  UpdateDomainFailure,\n  UpdateDomainSuccess,\n  UpdateFilter,\n  UpdateFilterFailure,\n  UpdateFilterSuccess,\n  UpdateFilterOrder,\n  UpdateFilterOrderFailure,\n  UpdateFilterOrderSuccess,\n  UpdateFolderOrder,\n  UpdateFolderOrderSuccess,\n  UsersActionTypes,\n  ValidatePromoCode,\n  ValidatePromoCodeSuccess,\n  VerifyDomain,\n  VerifyDomainFailure,\n  VerifyDomainSuccess,\n  VerifyEmailForwardingCode,\n  VerifyEmailForwardingCodeFailure,\n  VerifyEmailForwardingCodeSuccess,\n  WhiteListAdd,\n  WhiteListAddError,\n  WhiteListAddSuccess,\n  WhiteListDelete,\n  WhiteListDeleteSuccess,\n  MoveToBlacklist,\n  MoveToWhitelist,\n  WhiteListGet,\n  WhiteListsReadSuccess,\n  CardAdd,\n  CardAddError,\n  CardAddSuccess,\n  CardDelete,\n  CardDeleteSuccess,\n  CardGet,\n  CardReadSuccess,\n  CardMakePrimary,\n  CardMakePrimarySuccess,\n} from '../actions';\nimport { Settings } from '../datatypes';\nimport { NotificationService } from '../services/notification.service';\nimport { GetOrganizationUsers } from '../organization.store';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UsersEffects {\n  constructor(\n    private actions: Actions,\n    private userService: UsersService,\n    private notificationService: NotificationService,\n    private mailService: MailService,\n    private sharedService: SharedService,\n  ) {}\n\n  @Effect()\n  Accounts: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.ACCOUNTS),\n    map((action: Accounts) => action.payload),\n    switchMap(() => {\n      return this.userService.getAccounts('34324').pipe(\n        map(user => {\n          return new AccountsReadSuccess(user);\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  AccountDetails: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.ACCOUNT_DETAILS_GET),\n    map((action: Accounts) => action.payload),\n    switchMap(() => {\n      return this.userService.getAccountDetails().pipe(\n        map(user => {\n          return new AccountDetailsGetSuccess(user[0]);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get account details.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  WhiteLists: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.WHITELIST_GET),\n    map((action: WhiteListGet) => action.payload),\n    switchMap(() => {\n      return this.userService.getWhiteList().pipe(\n        map(whiteList => {\n          return new WhiteListsReadSuccess(whiteList.results);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get whitelist addresses.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  WhiteListAdd: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.WHITELIST_ADD),\n    map((action: WhiteListAdd) => action.payload),\n    switchMap(payload => {\n      return this.userService.addWhiteList(payload.email, payload.name).pipe(\n        switchMap(contact => {\n          contact.isUpdating = payload.id;\n          return of(\n            new WhiteListAddSuccess(contact),\n            new WhiteListGet(),\n            new BlackListGet(),\n            new SnackPush({ message: 'Email added to whitelist successfully.' }),\n          );\n        }),\n        catchError(error => of(new WhiteListAddError(error.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  WhiteListDelete: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.WHITELIST_DELETE),\n    map((action: WhiteListDelete) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteWhiteList(payload).pipe(\n        switchMap(() => {\n          return of(\n            new WhiteListDeleteSuccess(payload),\n            new SnackPush({ message: 'Whitelist contact deleted successfully.' }),\n          );\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to delete whitelist contact.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  MoveToBlacklist: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.MOVE_TO_BLACKLIST),\n    map((action: MoveToBlacklist) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteWhiteList(payload.id).pipe(\n        switchMap(() => {\n          return of(\n            new WhiteListDeleteSuccess(payload.id),\n            new BlackListAdd({ email: payload.email, name: payload.name }),\n          );\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed moving to the blacklist.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  MoveToWhitelist: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.MOVE_TO_WHITELIST),\n    map((action: MoveToWhitelist) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteBlackList(payload.id).pipe(\n        switchMap(() => {\n          return of(\n            new BlackListDeleteSuccess(payload.id),\n            new WhiteListAdd({ email: payload.email, name: payload.name }),\n          );\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed moving to the whitelist.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  CardLists: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CARD_GET),\n    map((action: CardGet) => action.payload),\n    switchMap(() => {\n      return this.userService.getPaymentMethods().pipe(\n        map(cardList => {\n          return new CardReadSuccess(cardList);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get payment methods.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  CardAdd: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CARD_ADD),\n    map((action: CardAdd) => action.payload),\n    switchMap(payload => {\n      return this.userService.addPaymentMethod(payload).pipe(\n        switchMap(card => {\n          return of(new CardAddSuccess(card), new SnackPush({ message: 'Payment method added successfully.' }));\n        }),\n        catchError(error => {\n          return of(new CardAddError(error.error), new SnackPush({ message: error.error.msg || '' }));\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  CardDelete: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CARD_DELETE),\n    map((action: CardDelete) => action.payload),\n    switchMap(payload => {\n      return this.userService.deletePaymentMethod(payload).pipe(\n        switchMap(() => {\n          return of(new CardDeleteSuccess(payload), new SnackPush({ message: 'Payment method deleted successfully.' }));\n        }),\n        catchError(error => {\n          return of(new SnackPush({ message: error.error.msg || '' }));\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  CardMakePrimary: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CARD_MAKE_PRIMARY),\n    map((action: CardMakePrimary) => action.payload),\n    switchMap(payload => {\n      return this.userService.makePaymentPrimary(payload).pipe(\n        switchMap(() => {\n          return of(\n            new CardMakePrimarySuccess(payload),\n            new SnackPush({ message: 'Primary card has been changed successfully.' }),\n          );\n        }),\n        catchError(error => {\n          return of(new SnackPush({ message: error.error.msg || '' }));\n        }),\n      );\n    }),\n  );\n\n  @Effect()\n  BlackLists: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.BLACKLIST_GET),\n    map((action: BlackListGet) => action.payload),\n    switchMap(() => {\n      return this.userService.getBlackList().pipe(\n        map(blackList => {\n          return new BlackListsReadSuccess(blackList.results);\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get blacklist.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  BlackListAdd: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.BLACKLIST_ADD),\n    map((action: BlackListAdd) => action.payload),\n    switchMap(payload => {\n      return this.userService.addBlackList(payload.email, payload.name).pipe(\n        switchMap(contact => {\n          contact.isUpdating = payload.id;\n          return of(\n            new BlackListAddSuccess(contact),\n            new BlackListGet(),\n            new WhiteListGet(),\n            new SnackPush({ message: 'Email added to blacklist successfully.' }),\n          );\n        }),\n        catchError(error => of(new BlackListAddError(error))),\n      );\n    }),\n  );\n\n  @Effect()\n  BlackListDelete: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.BLACKLIST_DELETE),\n    map((action: BlackListDelete) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteBlackList(payload).pipe(\n        switchMap(() => {\n          return of(\n            new BlackListDeleteSuccess(payload),\n            new SnackPush({ message: 'Blacklist contact deleted successfully.' }),\n          );\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to delete blacklist contact.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  settingsUpdate: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.SETTINGS_UPDATE),\n    map((action: SettingsUpdate) => action.payload),\n    switchMap((payload: Settings) => {\n      return this.userService.updateSettings(payload).pipe(\n        switchMap(() => {\n          return of(new SettingsUpdateSuccess(payload), new SnackPush({ message: 'Settings updated successfully.' }));\n        }),\n        catchError(error => of(new SnackErrorPush({ message: `Failed to save changes: ${error.error}` }))),\n      );\n    }),\n  );\n\n  @Effect()\n  requestSnacks$: Observable<Action> = this.actions.pipe(\n    ofType(UsersActionTypes.SNACK_PUSH),\n    map((action: SnackPush) => {\n      if (action.payload) {\n        if (action.payload.message) {\n          if (action.payload.ids && action.payload.allowUndo) {\n            this.notificationService.showUndo(action.payload);\n          } else {\n            const config: MatSnackBarConfig = { duration: 5000 };\n            if (action.payload.duration) {\n              config.duration = action.payload.duration;\n            }\n            this.notificationService.showSnackBar(action.payload.message, 'CLOSE', config);\n          }\n        } else {\n          let message = 'An error has occured.';\n          if (action.payload.type) {\n            message = `${action.payload.type} ${message}`;\n          }\n          this.notificationService.showSnackBar(message);\n        }\n      } else {\n        this.notificationService.showSnackBar('An error has occured.');\n      }\n      return new SnackPushSuccess();\n    }),\n  );\n\n  @Effect()\n  requestErrorSnacks$: Observable<Action> = this.actions.pipe(\n    ofType(UsersActionTypes.SNACK_ERROR_PUSH),\n    map((snackPushAction: SnackErrorPush) => {\n      if (snackPushAction.payload && snackPushAction.payload.message) {\n        this.notificationService.showSnackBar(\n          snackPushAction.payload.message,\n          snackPushAction.payload.action || 'CLOSE',\n          { duration: snackPushAction.payload.duration || 5000 },\n        );\n      } else {\n        let message = 'An error has occured';\n        if (snackPushAction.payload && snackPushAction.payload.type) {\n          message = `${snackPushAction.payload.type} ${message}`;\n        }\n        this.notificationService.showSnackBar(message);\n      }\n      return new SnackErrorPushSuccess();\n    }),\n  );\n\n  @Effect()\n  createFolderEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CREATE_FOLDER),\n    map((action: CreateFolder) => action.payload),\n    switchMap(folder => {\n      return this.mailService.createFolder(folder).pipe(\n        switchMap(res => {\n          const actions: any[] = [\n            new CreateFolderSuccess(res),\n            new SnackErrorPush({\n              message: `'${folder.name}' folder ${folder.id ? 'updated' : 'created'} successfully.`,\n            }),\n          ];\n          if (folder.id) {\n            actions.push(new GetUnreadMailsCount(), new GetFilters());\n          }\n          return of(...actions);\n        }),\n        catchError(error =>\n          of(\n            new SnackErrorPush({ message: error.error ? error.error : 'Failed to create folder.' }),\n            new CreateFolderFailure(),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteFolderEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.DELETE_FOLDER),\n    map((action: DeleteFolder) => action.payload),\n    switchMap(folder => {\n      return this.mailService.deleteFolder(`${folder.id}`).pipe(\n        switchMap(() => {\n          return of(\n            new DeleteFolderSuccess(folder),\n            new SnackErrorPush({ message: `'${folder.name}' folder deleted successfully.` }),\n          );\n        }),\n        catchError(error =>\n          of(new SnackErrorPush({ message: error.error ? error.error : 'Failed to delete folder.' })),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  updateFoldersOrder: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.UPDATE_FOLDER_ORDER),\n    map((action: UpdateFolderOrder) => action.payload),\n    switchMap(payload => {\n      return this.mailService.updateFoldersOrder(payload.data).pipe(\n        switchMap(() => {\n          return of(\n            new UpdateFolderOrderSuccess({ folders: payload.folders }),\n            new SnackErrorPush({ message: 'Sort order saved successfully.' }),\n          );\n        }),\n        catchError(error =>\n          of(new SnackErrorPush({ message: error.error ? error.error : 'Failed to update folders sort order.' })),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  getFiltersEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.GET_FILTERS),\n    map((action: GetFilters) => action.payload),\n    switchMap(payload => {\n      return this.userService.getFilters(payload).pipe(\n        switchMap(res => of(new GetFiltersSuccess(res.results))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get filters.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  createFilterEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CREATE_FILTER),\n    map((action: CreateFilter) => action.payload),\n    switchMap(payload => {\n      return this.userService.createFilter(payload).pipe(\n        switchMap(res =>\n          of(\n            new CreateFilterSuccess(res),\n            new SnackErrorPush({ message: `The filter ${payload.name} has been added.` }),\n          ),\n        ),\n        catchError(errorResponse =>\n          of(\n            new CreateFilterFailure(errorResponse.error),\n            new SnackErrorPush({\n              message: errorResponse.error ? errorResponse.error : 'An error occurred, please try again.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  updateFilterEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.UPDATE_FILTER),\n    map((action: UpdateFilter) => action.payload),\n    switchMap(payload => {\n      return this.userService.createFilter(payload).pipe(\n        switchMap(res =>\n          of(\n            new UpdateFilterSuccess(res),\n            new SnackErrorPush({ message: `The filter ${payload.name} has been updated.` }),\n          ),\n        ),\n        catchError(errorResponse =>\n          of(\n            new UpdateFilterFailure(errorResponse.error),\n            new SnackErrorPush({\n              message: errorResponse.error ? errorResponse.error : 'An error occurred, please try again.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  updateFilterOrderEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.UPDATE_FILTER_ORDER),\n    map((action: UpdateFilterOrder) => action.payload),\n    switchMap(payload => {\n      return this.userService.updateFilterOrder(payload).pipe(\n        switchMap(res =>\n          of(new UpdateFilterOrderSuccess(res), new SnackErrorPush({ message: `The filter order has been updated.` })),\n        ),\n        catchError(errorResponse =>\n          of(\n            new UpdateFilterOrderFailure(errorResponse.error),\n            new SnackErrorPush({\n              message: errorResponse.error ? errorResponse.error : 'An error occurred, please try again.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteFilterEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.DELETE_FILTER),\n    map((action: DeleteFilter) => action.payload),\n    switchMap(filter => {\n      return this.userService.deleteFilter(filter.id).pipe(\n        switchMap(() =>\n          of(\n            new DeleteFilterSuccess(filter),\n            new SnackErrorPush({ message: `The filter ${filter.name} has been deleted.` }),\n          ),\n        ),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({ message: errorResponse.error ? errorResponse.error : 'Failed to delete filter.' }),\n            new DeleteFilterFailure(errorResponse.error),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  Domains: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.GET_DOMAINS),\n    map((action: GetDomains) => action.payload),\n    switchMap(() => {\n      return this.userService.getDomains().pipe(\n        map(emailDomains => {\n          return new GetDomainsSuccess(emailDomains.results.sort((a: any, b: any) => a.id - b.id));\n        }),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get domains.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  DomainCreate: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.CREATE_DOMAIN),\n    map((action: CreateDomain) => action.payload),\n    switchMap(payload => {\n      return this.userService.createDomain(payload).pipe(\n        switchMap(res => of(new CreateDomainSuccess(res))),\n        catchError(errorResponse => of(new CreateDomainFailure(errorResponse.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  updateDomain: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.UPDATE_DOMAIN),\n    map((action: UpdateDomain) => action.payload),\n    switchMap(payload => {\n      return this.userService.updateDomain(payload).pipe(\n        switchMap(res => of(new UpdateDomainSuccess(res), new SnackPush({ message: `Domain updated successfully` }))),\n        catchError(errorResponse =>\n          of(\n            new UpdateDomainFailure(errorResponse.error),\n            new SnackPush({\n              message: errorResponse.error ? errorResponse.error : 'Failed to update domain.',\n            }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  DomainRead: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.READ_DOMAIN),\n    map((action: ReadDomain) => action.payload),\n    switchMap(payload => {\n      return this.userService.readDomain(payload).pipe(\n        switchMap(res => of(new ReadDomainSuccess(res))),\n        catchError(errorResponse => of(new ReadDomainFailure({ err: errorResponse.error }))),\n      );\n    }),\n  );\n\n  @Effect()\n  DomainDelete: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.DELETE_DOMAIN),\n    map((action: DeleteDomain) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteDomain(payload).pipe(\n        switchMap(() => of(new DeleteDomainSuccess(payload), new GetOrganizationUsers())),\n        catchError(errorResponse => of(new DeleteDomainFailure(errorResponse.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  DomainVerify: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.VERIFY_DOMAIN),\n    map((action: VerifyDomain) => action.payload),\n    switchMap(payload => {\n      return this.userService.verifyDomain(payload.id).pipe(\n        switchMap(res => {\n          return of(\n            new VerifyDomainSuccess({\n              res,\n              step: payload.currentStep,\n              gotoNextStep: payload.gotoNextStep,\n              reverify: payload.reverify,\n            }),\n          );\n        }),\n        catchError(errorResponse =>\n          of(new VerifyDomainFailure({ err: errorResponse.error, step: payload.currentStep })),\n        ),\n      );\n    }),\n  );\n\n  @Effect({ dispatch: false })\n  paymentFailureEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.PAYMENT_FAILURE),\n    map((action: PaymentFailure) => action.payload),\n    tap(() => {\n      this.sharedService.showPaymentFailureDialog();\n    }),\n  );\n\n  @Effect()\n  SendEmailForwardingCode: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.SEND_EMAIL_FORWARDING_CODE),\n    map((action: SendEmailForwardingCode) => action.payload),\n    switchMap(payload => {\n      return this.userService.sendEmailForwardingCode(payload.email).pipe(\n        switchMap(res => of(new SendEmailForwardingCodeSuccess(res))),\n        catchError(errorResponse => of(new SendEmailForwardingCodeFailure(errorResponse.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  VerifyEmailForwardingCode: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE),\n    map((action: VerifyEmailForwardingCode) => action.payload),\n    switchMap(payload => {\n      return this.userService.verifyEmailForwardingCode(payload.email, payload.code).pipe(\n        switchMap(res => {\n          return of(new AccountDetailsGet(), new VerifyEmailForwardingCodeSuccess(res));\n        }),\n        catchError(errorResponse => of(new VerifyEmailForwardingCodeFailure(errorResponse.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  SaveAutoResponder: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.SAVE_AUTORESPONDER),\n    map((action: SaveAutoResponder) => action.payload),\n    switchMap(payload => {\n      return this.userService.saveAutoResponder(payload).pipe(\n        switchMap(res => {\n          return of(new SnackPush({ message: `Saved successfully` }), new SaveAutoResponderSuccess(res));\n        }),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({ message: 'Failed to save autoresponder.' }),\n            new SaveAutoResponderFailure(errorResponse.error),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  getInvoicesEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.GET_INVOICES),\n    map((action: GetInvoices) => action.payload),\n    switchMap(() => {\n      return this.userService.getInvoices().pipe(\n        switchMap(res => of(new GetInvoicesSuccess(res.results))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get invoices.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getUpgradeAmountEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.GET_UPGRADE_AMOUNT),\n    map((action: GetUpgradeAmount) => action.payload),\n    switchMap(payload => {\n      return this.userService.getUpgradeAmount(payload).pipe(\n        switchMap(res => of(new GetUpgradeAmountSuccess(res))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get upgrade amount.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  validatePromoCode: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.VALIDATE_PROMO_CODE),\n    map((action: ValidatePromoCode) => action.payload),\n    switchMap(payload => {\n      return this.userService.validatePromoCode(payload).pipe(\n        switchMap(res => of(new ValidatePromoCodeSuccess(res))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to validate promo code.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  getInviteCodes: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.INVITE_CODE_GET),\n    map((action: GetInviteCodes) => action.payload),\n    switchMap(() => {\n      return this.userService.getInviteCodes().pipe(\n        switchMap(res => of(new GetInviteCodesSuccess(res))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get invite codes.' }))),\n      );\n    }),\n  );\n\n  @Effect()\n  generateInviteCode: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.INVITE_CODE_GENERATE),\n    map((action: GenerateInviteCode) => action.payload),\n    switchMap(() => {\n      return this.userService.generateInviteCodes().pipe(\n        switchMap(res => of(new GenerateInviteCodeSuccess(res))),\n        catchError(errorResponse =>\n          of(\n            new SnackErrorPush({\n              message: errorResponse.error ? errorResponse.error : 'Failed generate invite code.',\n            }),\n            new GenerateInviteCodeFailure(),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  GetNotificationsEffect: Observable<any> = this.actions.pipe(\n    ofType(UsersActionTypes.GET_NOTIFICATION),\n    map((action: GetNotification) => action.payload),\n    switchMap(() => {\n      return this.userService.getUserNotifications().pipe(\n        switchMap(resp => of(new GetNotificationSuccess(resp))),\n        catchError(() => of(new SnackErrorPush({ message: 'Failed to get user notifications.' }))),\n      );\n    }),\n  );\n}\n","export * from './actions';\nexport * from './effects';\nexport * from './reducers';\nexport * from './selectors';\nexport * from './websocket.store';\n","export interface Filter {\n  id?: number;\n  condition?: FilterCondition;\n  filter_text?: string;\n  folder?: string;\n  mark_as_read?: boolean;\n  mark_as_starred?: boolean;\n  move_to?: boolean;\n  name: string;\n  parameter?: FilterParameter;\n  priority_order?: number;\n}\n\nexport enum FilterParameter {\n  RECIPIENT = 'recipient',\n  SENDER = 'sender',\n  SUBJECT = 'subject',\n}\n\nexport enum FilterCondition {\n  CONTAINS = 'contains',\n  STARTSWITH = 'startswith',\n}\n","export * from './filter.model';\nexport * from './mail.model';\nexport * from './users.model';\n","import { Subscription } from 'rxjs';\n\nimport { MailAction, PGPEncryptionType } from '../datatypes';\n\nexport interface Mail {\n  id?: number;\n  attachments?: Array<any>;\n  bcc_display?: Array<EmailDisplay>;\n  bcc?: Array<string>;\n  cc?: Array<string>;\n  checked?: boolean;\n  children_count?: number;\n  children?: Array<Mail>;\n  content: string;\n  content_plain?: string;\n  created_at?: string;\n  datetime?: string;\n  dead_man_duration?: string;\n  delayed_delivery?: string;\n  destruct_date?: string;\n  encryption?: EncryptionNonCTemplar;\n  folder?: string;\n  forward_attachments_of_message?: number;\n  from?: string;\n  has_attachments?: boolean;\n  has_children?: boolean;\n  incoming_headers?: string;\n  is_encrypted?: boolean;\n  is_html?: boolean;\n  is_protected?: boolean;\n  is_subject_encrypted?: boolean;\n  last_action_parent_id?: number;\n  last_action_thread?: MailAction;\n  last_action?: MailAction;\n  mailbox?: number;\n  marked?: boolean;\n  parent?: number;\n  read?: boolean;\n  receiver_display?: Array<EmailDisplay>;\n  receiver_list?: string;\n  receiver?: Array<string>;\n  reply_to?: Array<string>;\n  send?: boolean;\n  sender_display_name?: string;\n  sender_display?: EmailDisplay;\n  sender?: string;\n  sent_at?: string;\n  spam_reason?: string | [];\n  starred?: boolean;\n  subject?: string;\n  thread_count?: number;\n  children_folder_info?: any;\n  has_starred_children?: boolean;\n  is_autocrypt_encrypted?: boolean;\n  encryption_type?: PGPEncryptionType;\n}\n\nexport class EncryptionNonCTemplar {\n  id?: number;\n\n  expires?: string;\n\n  expiry_hours = 120;\n\n  password_hint?: string;\n\n  password: string;\n\n  random_secret?: string;\n}\n\nexport interface Mailbox {\n  id?: number;\n  display_name?: string;\n  email: string;\n  fingerprint?: string;\n  folders: string[];\n  inProgress?: boolean;\n  is_active?: boolean;\n  is_default?: boolean;\n  is_enabled?: boolean;\n  messages: string[];\n  private_key: string;\n  public_key: string;\n  signature?: string;\n  sort_order: number;\n  key_type: string;\n  // Autocrypt settings\n  is_autocrypt_enabled?: boolean;\n  prefer_encrypt?: string;\n}\n\nexport interface Folder {\n  id?: number;\n  name: string;\n  color: string;\n  sort_order?: number;\n}\n\nexport enum MailFolderType {\n  ALL_EMAILS = 'allmails',\n  UNREAD = 'allunreadmails',\n  INBOX = 'inbox',\n  SENT = 'sent',\n  DRAFT = 'draft',\n  STARRED = 'starred',\n  ARCHIVE = 'archive',\n  SPAM = 'spam',\n  TRASH = 'trash',\n  OUTBOX = 'outbox',\n  SEARCH = 'search',\n}\n\nexport interface Attachment {\n  id?: number;\n  attachmentId?: number;\n  content_id?: string;\n  decryptedDocument?: File;\n  document: any;\n  draftId: number;\n  inProgress: boolean;\n  is_encrypted?: boolean;\n  is_forwarded?: boolean;\n  is_inline: boolean;\n  isRemoved?: boolean;\n  message: number;\n  name: string;\n  progress?: number;\n  request?: Subscription;\n  size: string;\n  actual_size?: number;\n  is_pgp_mime?: boolean;\n}\n\nexport interface EmailDisplay {\n  email: string;\n  name?: string;\n}\n\nexport interface PGPMimeMessageProgressModel {\n  content?: string;\n  attachments?: Attachment[];\n  encrypted_content?: string;\n  encrypted_attachments?: Map<number, string>; // Map<attachmentId, encrypted_content>\n}\n","export class Membership {\n  id?: number;\n\n  name?: string;\n\n  price?: number;\n\n  users?: number;\n\n  storage?: number;\n\n  aliases?: number;\n\n  sending_limit?: number;\n\n  filters?: boolean;\n\n  autoresponders?: boolean;\n\n  catch_all?: boolean;\n}\n\nexport class User {\n  id?: number;\n\n  username?: string;\n\n  password?: string;\n\n  is_active?: boolean;\n\n  newsletter?: boolean;\n\n  membership?: Membership;\n\n  token?: string;\n\n  pubkey?: string;\n\n  privkey?: string;\n}\n\nexport class OrganizationUser {\n  user_id?: number;\n\n  username: string;\n\n  domain: string;\n\n  password?: string;\n\n  recovery_email?: string;\n\n  private_key?: string;\n\n  public_key?: string;\n\n  fingerprint?: string;\n\n  isEditing?: boolean;\n\n  unmodifiedUser?: OrganizationUser;\n\n  constructor(data: any = {}) {\n    this.user_id = data.user_id || data.id;\n    this.username = data.username;\n    this.domain = data.domain;\n    this.password = data.password;\n    this.recovery_email = data.recovery_email || data.recoveryEmail || '';\n    this.private_key = data.private_key;\n    this.public_key = data.public_key;\n    this.fingerprint = data.fingerprint;\n  }\n}\n\nexport interface Storage {\n  id: number;\n  type: string;\n  price: number;\n}\n\nexport interface Payment {\n  id: number;\n  annualDiscountRate?: number;\n  classId?: string;\n  monthlyDiscountRate?: number;\n  monthlyFee: number;\n  selected: boolean;\n  title: string;\n  totalAnnualFee: number;\n}\n\nexport interface UserMailbox {\n  id: number;\n  email?: string;\n}\n\nexport const StorageData: Storage[] = [\n  { id: 1, type: '5 Gb Storage', price: 2 },\n  { id: 2, type: '10 Gb Storage', price: 4 },\n  { id: 3, type: '15 Gb Storage', price: 8 },\n  { id: 4, type: '20 Gb Storage', price: 12 },\n  { id: 5, type: '25 Gb Storage', price: 16 },\n];\n\nexport const PaymentData: Payment[] = [\n  {\n    id: 1,\n    annualDiscountRate: 0.9,\n    classId: 'pay-monthly',\n    monthlyDiscountRate: 0.8,\n    monthlyFee: 0,\n    selected: true,\n    title: 'Pay Monthly',\n    totalAnnualFee: 0,\n  },\n  {\n    id: 2,\n    annualDiscountRate: 0.9,\n    classId: 'pay-monthly',\n    monthlyDiscountRate: 0.8,\n    monthlyFee: 0,\n    selected: false,\n    title: 'Pay Annually',\n    totalAnnualFee: 0,\n  },\n];\n","import { Action } from '@ngrx/store';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { GetDomains, SnackErrorPush } from './actions';\nimport { OrganizationUser } from './models';\nimport { sortByString, UsersService } from './services';\n\nexport enum OrganizationActionTypes {\n  GET_ORGANIZATION_USERS = '[ORGANIZATION] GET USERS',\n  GET_ORGANIZATION_USERS_SUCCESS = '[ORGANIZATION] GET USERS SUCCESS',\n  GET_ORGANIZATION_USERS_FAILURE = '[ORGANIZATION] GET USERS FAILURE',\n  ADD_ORGANIZATION_USER = '[ORGANIZATION] ADD USER',\n  ADD_ORGANIZATION_USER_SUCCESS = '[ORGANIZATION] ADD USER SUCCESS',\n  ADD_ORGANIZATION_USER_FAILURE = '[ORGANIZATION] ADD USER FAILURE',\n  DELETE_ORGANIZATION_USER = '[ORGANIZATION] DELETE USER',\n  DELETE_ORGANIZATION_USER_SUCCESS = '[ORGANIZATION] DELETE USER SUCCESS',\n  DELETE_ORGANIZATION_USER_FAILURE = '[ORGANIZATION] DELETE USER FAILURE',\n  UPDATE_ORGANIZATION_USER = '[ORGANIZATION] UPDATE USER',\n  UPDATE_ORGANIZATION_USER_SUCCESS = '[ORGANIZATION] UPDATE USER SUCCESS',\n  UPDATE_ORGANIZATION_USER_FAILURE = '[ORGANIZATION] UPDATE USER FAILURE',\n}\n\nexport class GetOrganizationUsers implements Action {\n  readonly type = OrganizationActionTypes.GET_ORGANIZATION_USERS;\n\n  constructor(public payload: any = {}) {}\n}\n\nexport class GetOrganizationUsersSuccess implements Action {\n  readonly type = OrganizationActionTypes.GET_ORGANIZATION_USERS_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class GetOrganizationUsersFailure implements Action {\n  readonly type = OrganizationActionTypes.GET_ORGANIZATION_USERS_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class AddOrganizationUser implements Action {\n  readonly type = OrganizationActionTypes.ADD_ORGANIZATION_USER;\n\n  constructor(public payload: any) {}\n}\n\nexport class AddOrganizationUserSuccess implements Action {\n  readonly type = OrganizationActionTypes.ADD_ORGANIZATION_USER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class AddOrganizationUserFailure implements Action {\n  readonly type = OrganizationActionTypes.ADD_ORGANIZATION_USER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteOrganizationUser implements Action {\n  readonly type = OrganizationActionTypes.DELETE_ORGANIZATION_USER;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteOrganizationUserSuccess implements Action {\n  readonly type = OrganizationActionTypes.DELETE_ORGANIZATION_USER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class DeleteOrganizationUserFailure implements Action {\n  readonly type = OrganizationActionTypes.DELETE_ORGANIZATION_USER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateOrganizationUser implements Action {\n  readonly type = OrganizationActionTypes.UPDATE_ORGANIZATION_USER;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateOrganizationUserSuccess implements Action {\n  readonly type = OrganizationActionTypes.UPDATE_ORGANIZATION_USER_SUCCESS;\n\n  constructor(public payload: any) {}\n}\n\nexport class UpdateOrganizationUserFailure implements Action {\n  readonly type = OrganizationActionTypes.UPDATE_ORGANIZATION_USER_FAILURE;\n\n  constructor(public payload: any) {}\n}\n\nexport type OrganizationActionAll =\n  | GetOrganizationUsers\n  | GetOrganizationUsersSuccess\n  | GetOrganizationUsersFailure\n  | AddOrganizationUser\n  | AddOrganizationUserSuccess\n  | AddOrganizationUserFailure\n  | DeleteOrganizationUser\n  | DeleteOrganizationUserSuccess\n  | DeleteOrganizationUserFailure\n  | UpdateOrganizationUser\n  | UpdateOrganizationUserSuccess\n  | UpdateOrganizationUserFailure;\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrganizationEffects {\n  constructor(private actions: Actions, private userService: UsersService) {}\n\n  @Effect()\n  getOrganizationUsers: Observable<any> = this.actions.pipe(\n    ofType(OrganizationActionTypes.GET_ORGANIZATION_USERS),\n    map((action: GetOrganizationUsers) => action.payload),\n    switchMap(payload => {\n      return this.userService.getOrganizationUsers(payload.limit, payload.offset).pipe(\n        switchMap((response: any) => {\n          return of(new GetOrganizationUsersSuccess(response.results));\n        }),\n        catchError(response =>\n          of(\n            new GetOrganizationUsersFailure(response.error),\n            new SnackErrorPush({ message: 'Failed to load organization users.' }),\n          ),\n        ),\n      );\n    }),\n  );\n\n  @Effect()\n  addOrganizationUser: Observable<any> = this.actions.pipe(\n    ofType(OrganizationActionTypes.ADD_ORGANIZATION_USER),\n    map((action: AddOrganizationUser) => action.payload),\n    switchMap(payload => {\n      return this.userService.addOrganizationUser(payload).pipe(\n        switchMap((response: any) => {\n          return of(\n            new AddOrganizationUserSuccess({ ...payload, ...response }),\n            new SnackErrorPush({ message: `User '${payload.username}' added successfully.` }),\n            new GetDomains(),\n          );\n        }),\n        catchError(response => of(new AddOrganizationUserFailure(response.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  deleteOrganizationUser: Observable<any> = this.actions.pipe(\n    ofType(OrganizationActionTypes.DELETE_ORGANIZATION_USER),\n    map((action: DeleteOrganizationUser) => action.payload),\n    switchMap(payload => {\n      return this.userService.deleteOrganizationUser(payload).pipe(\n        switchMap((response: any) => {\n          return of(\n            new DeleteOrganizationUserSuccess(payload),\n            new SnackErrorPush({ message: `User '${payload.username}' deleted successfully.` }),\n            new GetDomains(),\n          );\n        }),\n        catchError(response => of(new DeleteOrganizationUserFailure(response.error))),\n      );\n    }),\n  );\n\n  @Effect()\n  updateOrganizationUser: Observable<any> = this.actions.pipe(\n    ofType(OrganizationActionTypes.UPDATE_ORGANIZATION_USER),\n    map((action: UpdateOrganizationUser) => action.payload),\n    switchMap(payload => {\n      return this.userService.updateOrganizationUser(payload).pipe(\n        switchMap(() => {\n          return of(\n            new UpdateOrganizationUserSuccess(payload),\n            new SnackErrorPush({ message: `Recovery email for user: '${payload.username}', updated successfully.` }),\n          );\n        }),\n        catchError(response =>\n          of(\n            new UpdateOrganizationUserFailure({ user: payload, error: response.error }),\n            new SnackErrorPush({ message: `Failed to update recovery email. ${response.error}` }),\n          ),\n        ),\n      );\n    }),\n  );\n}\n\nexport interface OrganizationState {\n  users: OrganizationUser[];\n  inProgress?: boolean;\n  isAddingUserInProgress?: boolean;\n  isDeleteInProgress?: boolean;\n  isError?: boolean;\n  error?: string;\n}\n\nexport function reducer(state: OrganizationState = { users: [] }, action: OrganizationActionAll) {\n  switch (action.type) {\n    case OrganizationActionTypes.GET_ORGANIZATION_USERS: {\n      return { ...state, inProgress: true };\n    }\n\n    case OrganizationActionTypes.GET_ORGANIZATION_USERS_SUCCESS: {\n      return {\n        ...state,\n        inProgress: false,\n        users: sortByString(action.payload, 'username'),\n      };\n    }\n\n    case OrganizationActionTypes.GET_ORGANIZATION_USERS_FAILURE: {\n      return { ...state, inProgress: false };\n    }\n\n    case OrganizationActionTypes.ADD_ORGANIZATION_USER: {\n      return { ...state, isAddingUserInProgress: true, isError: false };\n    }\n\n    case OrganizationActionTypes.ADD_ORGANIZATION_USER_SUCCESS: {\n      return {\n        ...state,\n        isAddingUserInProgress: false,\n        users: sortByString([...state.users, new OrganizationUser(action.payload)], 'username'),\n        isError: false,\n      };\n    }\n\n    case OrganizationActionTypes.ADD_ORGANIZATION_USER_FAILURE: {\n      return { ...state, isAddingUserInProgress: false, error: action.payload, isError: true };\n    }\n\n    case OrganizationActionTypes.DELETE_ORGANIZATION_USER: {\n      return { ...state, isDeleteInProgress: true };\n    }\n\n    case OrganizationActionTypes.DELETE_ORGANIZATION_USER_SUCCESS: {\n      return {\n        ...state,\n        isDeleteInProgress: false,\n        users: state.users.filter(user => user.username !== action.payload.username),\n      };\n    }\n\n    case OrganizationActionTypes.UPDATE_ORGANIZATION_USER: {\n      return { ...state, isAddingUserInProgress: true, isError: false };\n    }\n\n    case OrganizationActionTypes.UPDATE_ORGANIZATION_USER_SUCCESS: {\n      return {\n        ...state,\n        isAddingUserInProgress: false,\n        users: state.users.map(user => {\n          if (user.user_id === action.payload.user_id) {\n            user = action.payload;\n          }\n          return user;\n        }),\n        isError: false,\n      };\n    }\n\n    case OrganizationActionTypes.UPDATE_ORGANIZATION_USER_FAILURE: {\n      return {\n        ...state,\n        isAddingUserInProgress: false,\n        users: state.users.map(user => {\n          if (user.user_id === action.payload.user.user_id) {\n            user = action.payload.user.unmodifiedUser;\n          }\n          return user;\n        }),\n        error: action.payload.error,\n        isError: true,\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","export interface QuoteType {\n  content: string;\n  author: string;\n}\n\nexport const quotes = [\n  {\n    content: 'Veritas vos liberabit  The truth shall set you free.',\n    author: '- Templar Saying -',\n  },\n  {\n    content: 'You assist an evil system most by following its orders and decrees.',\n    author: '- Mahatma Gandhi -',\n  },\n  {\n    content: 'Safeguard the helpless',\n    author: \"- Templar's honor code -\",\n  },\n  {\n    content: 'Do no wrong.',\n    author: \"- Templar's honor code -\",\n  },\n  {\n    content: 'In a time of universal deceit, telling the truth is a revolutionary act.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'The essence of government is control, or the attempt to control.',\n    author: '- Benjamin Tucker -',\n  },\n  {\n    content: 'You are not what you were born, but what you have it in yourself to be.',\n    author: '- Godfrey of Ibelin -',\n  },\n  {\n    content: 'It is a kingdom of conscience, or nothing.',\n    author: '- Balian of Ibelin -',\n  },\n  {\n    content: 'But man is not made for defeat. A man can be destroyed but not defeated.',\n    author: '- Ernest Hemingway -',\n  },\n  {\n    content: 'All men having power ought to be distrusted to a certain degree.',\n    author: '- James Madison -',\n  },\n  {\n    content: 'Keep your face always toward the sunshine - and shadows will fall behind you.',\n    author: '- Walt Whitman -',\n  },\n  {\n    content: 'Honesty is the first chapter in the book of wisdom.',\n    author: '- Thomas Jefferson -',\n  },\n  {\n    content: 'The first casualty when war comes is truth.',\n    author: '- Hiram Johnson -',\n  },\n  {\n    content: 'None are more hopelessly enslaved than those who believe they are free.',\n    author: '- Johann Wolfgang von Goethe -',\n  },\n  {\n    content: 'The further a society drifts from truth, the more it will hate those who speak it.',\n    author: '- George Orwell -',\n  },\n  {\n    content:\n      'The disappearance of a sense of morality is the most far-reaching consequence of submission to a system of authority.',\n    author: '- Stanley Milgram -',\n  },\n  {\n    content: 'It is dangerous to be right when the government is wrong.',\n    author: '- Voltaire -',\n  },\n  {\n    content:\n      'There is no greater tyranny than that which is perpetrated under the shield of the law and in the name of justice.',\n    author: '- Charles-Louis de Secondat -',\n  },\n  {\n    content: 'All human beings have three lives: public, private, and secret.',\n    author: '- Gabriel Garca Mrquez -',\n  },\n  {\n    content: 'If liberty means anything at all, it means the right to tell people what they do not want to hear.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'No one likes to see a government folder with their name on it.',\n    author: '- Stephen King -',\n  },\n  {\n    content: 'You assist an evil system most by following its orders and decrees.',\n    author: '- Mahatma Gandhi -',\n  },\n  {\n    content:\n      'They who can give up essential liberty to obtain a little temporary safety deserve neither liberty nor safety.',\n    author: '- Benjamin Franklin -',\n  },\n  {\n    content:\n      'A people that elect corrupt politicians, imposters, thieves and traitors are not victims, but accomplices.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'In a time of universal deceit, telling the truth is a revolutionary act.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'The ultimate goal of the NSA is total population control.',\n    author: '- William Binney, Whistleblower -',\n  },\n  {\n    content:\n      'Encryption works. Properly implemented strong crypto systems are one of the few things that you can rely on.',\n    author: '- Edward Snowden -',\n  },\n  {\n    content: 'It is a kingdom of conscience, or nothing.',\n    author: '- Balian of Ibelin -',\n  },\n  {\n    content: 'One person can make a difference, and everyone should try.',\n    author: '- John F. Kennedy -',\n  },\n  {\n    content: 'Our lives begin to end the day we become silent about things that matter.',\n    author: '- Martin Luther King Jr. -',\n  },\n  {\n    content:\n      'Darkness cannot drive out darkness: only light can do that. Hate cannot drive out hate: only love can do that.',\n    author: '- Martin Luther King Jr. -',\n  },\n  {\n    content: 'Keep your face always toward the sunshine - and shadows will fall behind you.',\n    author: '- Walt Whitman -',\n  },\n  {\n    content: 'Conformity is the jailer of freedom and the enemy of growth.',\n    author: '- John F. Kennedy -',\n  },\n  {\n    content: 'Big Brother is Watching You.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'No one ever seizes power with the intention of relinquishing it.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'The further a society drifts from truth, the more it will hate those who speak it.',\n    author: '- George Orwell -',\n  },\n  {\n    content: 'Cryptography is the ultimate form of non-violent direct action.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'It is dangerous to be right when the government is wrong.',\n    author: '- Voltaire -',\n  },\n  {\n    content:\n      'There is no greater tyranny than that which is perpetrated under the shield of the law and in the name of justice.',\n    author: '- Charles-Louis de Secondat, baron de La Brde et de Montesquieu -',\n  },\n  {\n    content: 'The rights of every man are diminished when the rights of one man are threatened.',\n    author: '- John F. Kennedy -',\n  },\n  {\n    content: 'Injustice anywhere is a threat to justice everywhere.',\n    author: '- Martin Luther King Jr. -',\n  },\n  {\n    content: 'One of the best ways to achieve justice is to expose injustice.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'Under observation, we act less free, which means we effectively are less free.',\n    author: '- Edward Snowden -',\n  },\n  {\n    content: 'You have to start with the truth.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'The law does not defend us; we defend the law.',\n    author: '- Edward Snowden -',\n  },\n  {\n    content: 'I prefer liberty with danger than peace with slavery.',\n    author: '- Jean-Jacques Rousseau -',\n  },\n  {\n    content: \"If we don't believe in freedom of expression for people we despise, we don't believe in it at all.\",\n    author: '- Noam Chomsky -',\n  },\n  {\n    content: 'Better to die fighting for freedom then be a prisoner all the days of your life.',\n    author: '- Bob Marley -',\n  },\n  {\n    content: 'We must find time to stop and thank the people who make a difference in our lives.',\n    author: '- John F. Kennedy -',\n  },\n  {\n    content:\n      'If you become a target, they will retroactively analyze every phone call, every email, every financial transaction, everything electronic that youve ever done.',\n    author: '- William Binney, Whistleblower -',\n  },\n  {\n    content: 'You are now under 24-hours per day surveillance.',\n    author: '- William Binney, Whistleblower -',\n  },\n  {\n    content: 'Your Government is profiling you.',\n    author: '- William Binney, Whistleblower -',\n  },\n  {\n    content: 'You could end up on a kill list without knowing.',\n    author: '- William Binney, Whistleblower -',\n  },\n  {\n    content: 'It is impossible to seal oneself off from injustice.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'It is impossible to correct abuses unless we know that theyre going on.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'The goal is justice, the method is transparency.',\n    author: '- Julian Assange -',\n  },\n  {\n    content:\n      \"All administrations, governments, officials lie and nothing they say is to be believed. That's a pretty good rule.\",\n    author: '- Daniel Ellsberg, Whistleblower -',\n  },\n  {\n    content:\n      'Power is a thing of perception. They don/t need to be able to kill you. They just need you to think they are able to kill you.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'If wars can be started by lies, they can be stopped by truth.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'Secrecy breeds incompetence because where there is failure, failure is kept secret.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'If journalism is good, it is controversial, by its nature.',\n    author: '- Julian Assange -',\n  },\n  {\n    content: 'If liberty means anything at all, it means the right to tell people what they do not want to hear.',\n    author: '- George Orwell -',\n  },\n  {\n    content:\n      'The worlds entire scientific and cultural heritage, is being digitized and locked up by a handful of private corporations.',\n    author: '- Aaron Swartz, Reddit Co-Founder -',\n  },\n  {\n    content: 'There is no justice in following unjust laws.',\n    author: '- Aaron Swartz, Reddit Co-Founder -',\n  },\n  {\n    content: 'Its time to come into the light.',\n    author: '- Aaron Swartz, Reddit Co-Founder -',\n  },\n  {\n    content: 'The future depends on what we do in the present.',\n    author: '- Mahatma Gandhi -',\n  },\n  {\n    content: 'In a gentle way, you can shake the world.',\n    author: '- Mahatma Gandhi -',\n  },\n];\n","import { AuthActionAll, AuthActionTypes } from '../actions';\nimport { Auth2FA, AuthState } from '../datatypes';\nimport { REFFERAL_CODE_KEY } from '../../shared/config';\n\nexport const initialState: AuthState = {\n  isAuthenticated: false,\n  user: null,\n  errorMessage: null,\n  inProgress: false,\n  signupState: {\n    username: null,\n    password: null,\n    recaptcha: null,\n    currency: 'USD',\n  },\n  resetPasswordErrorMessage: null,\n  isRecoveryCodeSent: false,\n  captcha: {},\n  auth2FA: {},\n  saveDraftOnLogout: false,\n  passwordChangeInProgress: false,\n};\n\nexport function logoutReducer(reducerAction: any) {\n  return function (state: any, action: any) {\n    return reducerAction(action.type === AuthActionTypes.LOGOUT ? undefined : state, action);\n  };\n}\n\nexport function reducer(state = initialState, action: AuthActionAll): AuthState {\n  switch (action.type) {\n    case AuthActionTypes.LOGIN: {\n      return {\n        ...state,\n        errorMessage: null,\n        inProgress: true,\n      };\n    }\n    case AuthActionTypes.SAVE_DRAFT_ON_LOGOUT: {\n      return {\n        ...state,\n        saveDraftOnLogout: true,\n      };\n    }\n    case AuthActionTypes.LOGIN_SUCCESS: {\n      if (action.payload.token) {\n        localStorage.removeItem(REFFERAL_CODE_KEY);\n        return {\n          ...state,\n          isAuthenticated: true,\n          user: action.payload,\n          errorMessage: null,\n          inProgress: false,\n          auth2FA: { is_2fa_enabled: action.payload.is_2fa_enabled, show2FALogin: false },\n          anti_phishing_phrase: action.payload.is_2fa_enabled ? '' : action.payload.anti_phishing_phrase,\n        };\n      }\n      if (action.payload.is_2fa_enabled) {\n        return {\n          ...state,\n          inProgress: false,\n          errorMessage: null,\n          auth2FA: { is_2fa_enabled: true, show2FALogin: true },\n          anti_phishing_phrase: action.payload.anti_phishing_phrase,\n        };\n      }\n      return { ...state };\n    }\n    case AuthActionTypes.LOGIN_FAILURE: {\n      return {\n        ...state,\n        errorMessage: action.payload || 'Incorrect username or password.',\n        inProgress: false,\n      };\n    }\n    case AuthActionTypes.SET_AUTHENTICATED: {\n      if (state.isAuthenticated) {\n        return { ...state };\n      }\n      return {\n        ...state,\n        isAuthenticated: action.payload.isAuthenticated,\n      };\n    }\n    case AuthActionTypes.SIGNUP_SUCCESS: {\n      return {\n        ...state,\n        user: action.payload,\n        errorMessage: null,\n        inProgress: false,\n        signupState: { ...state.signupState, inProgress: false },\n        recovery_key: action.payload.recovery_key,\n      };\n    }\n    case AuthActionTypes.SIGNUP_FAILURE: {\n      const error = action.payload ? action.payload : 'Failed to signup, please try again.';\n\n      return {\n        ...state,\n        errorMessage: error,\n        inProgress: false,\n        signupState: { ...state.signupState, inProgress: false },\n      };\n    }\n    case AuthActionTypes.SIGNUP: {\n      return {\n        ...state,\n        inProgress: true,\n        signupState: { ...state.signupState, inProgress: true },\n      };\n    }\n    case AuthActionTypes.UPDATE_SIGNUP_DATA: {\n      return {\n        ...state,\n        signupState: { ...state.signupState, ...action.payload },\n      };\n    }\n    case AuthActionTypes.CHECK_USERNAME_AVAILABILITY: {\n      return {\n        ...state,\n        signupState: { ...state.signupState, inProgress: true },\n      };\n    }\n    case AuthActionTypes.CHECK_USERNAME_AVAILABILITY_SUCCESS: {\n      return {\n        ...state,\n        signupState: { ...state.signupState, usernameExists: action.payload.exists, inProgress: false },\n      };\n    }\n\n    case AuthActionTypes.CHECK_USERNAME_AVAILABILITY_ERROR: {\n      return {\n        ...state,\n        signupState: { ...state.signupState, usernameExists: null, inProgress: false },\n      };\n    }\n\n    case AuthActionTypes.RECOVER_PASSWORD: {\n      return {\n        ...state,\n        errorMessage: null,\n        inProgress: true,\n        resetPasswordErrorMessage: null,\n        isRecoveryCodeSent: false,\n      };\n    }\n\n    case AuthActionTypes.RECOVER_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n        inProgress: false,\n        resetPasswordErrorMessage: null,\n        isRecoveryCodeSent: true,\n      };\n    }\n\n    case AuthActionTypes.RECOVER_PASSWORD_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n        resetPasswordErrorMessage: action.payload || 'Failed to send recovery email, please try again.',\n        isRecoveryCodeSent: false,\n      };\n    }\n\n    case AuthActionTypes.RESET_PASSWORD: {\n      return {\n        ...state,\n        errorMessage: null,\n        inProgress: true,\n        isRecoveryCodeSent: true,\n        resetPasswordErrorMessage: null,\n      };\n    }\n\n    case AuthActionTypes.RESET_PASSWORD_SUCCESS: {\n      return {\n        ...state,\n        inProgress: false,\n        resetPasswordErrorMessage: null,\n      };\n    }\n\n    case AuthActionTypes.RESET_PASSWORD_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n        resetPasswordErrorMessage: 'Failed to reset password, please try again.',\n      };\n    }\n    case AuthActionTypes.UPGRADE_ACCOUNT: {\n      return {\n        ...state,\n        errorMessage: null,\n        inProgress: true,\n      };\n    }\n    case AuthActionTypes.UPGRADE_ACCOUNT_SUCCESS: {\n      return {\n        ...state,\n        errorMessage: null,\n        inProgress: false,\n      };\n    }\n    case AuthActionTypes.UPGRADE_ACCOUNT_FAILURE: {\n      return {\n        ...state,\n        errorMessage: 'Failed to upgrade account. Please try again.',\n        inProgress: false,\n      };\n    }\n    case AuthActionTypes.DELETE_ACCOUNT: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n    case AuthActionTypes.DELETE_ACCOUNT_SUCCESS:\n    case AuthActionTypes.DELETE_ACCOUNT_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n    case AuthActionTypes.CLEAR_SIGNUP_STATE: {\n      return {\n        ...state,\n        signupState: initialState.signupState,\n      };\n    }\n    case AuthActionTypes.CLEAR_AUTH_ERROR_MESSAGE: {\n      return {\n        ...state,\n        errorMessage: null,\n      };\n    }\n    case AuthActionTypes.CHANGE_PASSPHRASE_SUCCESS: {\n      return {\n        ...state,\n        updatedPrivateKeys: action.payload,\n      };\n    }\n    case AuthActionTypes.CHANGE_PASSWORD: {\n      return {\n        ...state,\n        inProgress: true,\n        passwordChangeInProgress: true,\n        isChangePasswordError: false,\n      };\n    }\n    case AuthActionTypes.CHANGE_PASSWORD_SUCCESS: {\n      if (localStorage.getItem('user_key')) {\n        localStorage.setItem('user_key', btoa(action.payload.password));\n      }\n      return {\n        ...state,\n        inProgress: false,\n        passwordChangeInProgress: false,\n        isChangePasswordError: false,\n      };\n    }\n    case AuthActionTypes.CHANGE_PASSWORD_FAILED: {\n      return {\n        ...state,\n        inProgress: false,\n        passwordChangeInProgress: false,\n        isChangePasswordError: true,\n      };\n    }\n    case AuthActionTypes.GET_CAPTCHA: {\n      return {\n        ...state,\n        captcha: { ...state.captcha, inProgress: true },\n      };\n    }\n    case AuthActionTypes.GET_CAPTCHA_SUCCESS: {\n      return {\n        ...state,\n        captcha: { ...state.captcha, ...action.payload, inProgress: false },\n      };\n    }\n\n    case AuthActionTypes.VERIFY_CAPTCHA: {\n      return {\n        ...state,\n        captcha: { ...state.captcha, isInvalid: null, inProgress: true },\n      };\n    }\n    case AuthActionTypes.VERIFY_CAPTCHA_SUCCESS: {\n      return {\n        ...state,\n        captcha: {\n          ...state.captcha,\n          inProgress: false,\n          isInvalid: !action.payload.status,\n          verified: action.payload.status,\n          value: action.payload.status ? state.captcha.value : '',\n        },\n      };\n    }\n\n    case AuthActionTypes.GET_2FA_SECRET: {\n      return { ...state, auth2FA: { inProgress: true } };\n    }\n\n    case AuthActionTypes.GET_2FA_SECRET_SUCCESS: {\n      return { ...state, auth2FA: new Auth2FA({ ...action.payload, inProgress: false }) };\n    }\n\n    case AuthActionTypes.LOGOUT: {\n      return initialState;\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { BitcoinState, TransactionStatus } from '../datatypes';\nimport { BitcoinActionAll, BitcoinActionTypes } from '../actions/bitcoin.action';\n\nexport const initialState: BitcoinState = {\n  bitcoinRequired: 0.0021,\n  newWalletAddress: null,\n  loaded: false,\n  checkTransactionResponse: { status: TransactionStatus.WAITING },\n};\n\nexport function reducer(state = initialState, action: BitcoinActionAll): BitcoinState {\n  switch (action.type) {\n    case BitcoinActionTypes.CREATE_NEW_WALLET: {\n      return {\n        ...state,\n        loaded: false,\n      };\n    }\n    case BitcoinActionTypes.CREATE_NEW_WALLET_SUCCESS: {\n      return {\n        ...state,\n        loaded: true,\n        newWalletAddress: action.payload.address,\n        bitcoinRequired: action.payload.amount,\n      };\n    }\n    case BitcoinActionTypes.CHECK_TRANSACTION_SUCCESS: {\n      return {\n        ...state,\n        checkTransactionResponse: action.payload,\n      };\n    }\n    case BitcoinActionTypes.CLEAR_WALLET: {\n      return {\n        ...initialState,\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { FilenamePipe } from '../../shared/pipes/filename.pipe';\nimport { ComposeMailActions, ComposeMailActionTypes } from '../actions';\nimport {\n  ComposeMailState,\n  Draft,\n  PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME,\n  PGP_MIME_DEFAULT_CONTENT,\n  PGPEncryptionType,\n} from '../datatypes';\nimport { Attachment, MailFolderType } from '../models';\nimport { getCryptoRandom } from '../services';\n\n/**\n * 1. Force Making Draft Mail that contains general text content and  `encrypted.asc` as an attachment\n * 2. Remove the other attachment because `encrypted.asc` already contains all of attachment and content\n * 3. Set all of flags, so that it would be really composed after passed\n * @param draftMail\n * @param pgpMimeAttachment\n * @private\n */\nfunction updateDraftMailForPGPMimeMessage(\n  draftMail: Draft,\n  oldAttachment: Attachment,\n  newAttachment: Attachment,\n): Draft {\n  const newDraftMail = { ...draftMail };\n  newDraftMail.draft.content = PGP_MIME_DEFAULT_CONTENT;\n  newDraftMail.draft.content_plain = PGP_MIME_DEFAULT_CONTENT;\n  newDraftMail.draft.is_encrypted = false;\n  newDraftMail.draft.is_subject_encrypted = false;\n  newDraftMail.draft.is_autocrypt_encrypted = false;\n  newDraftMail.draft.encryption_type = PGPEncryptionType.PGP_MIME;\n  newDraftMail.draft.attachments = [{ ...newAttachment, is_inline: true }];\n  newDraftMail.attachments = [{ ...newAttachment, is_inline: true }];\n  newDraftMail.isProcessingAttachments = false;\n  newDraftMail.encryptedContent = undefined;\n  newDraftMail.pgpMimeContent = undefined;\n  newDraftMail.isPGPMimeMessage = true;\n  return newDraftMail;\n}\n\nexport function reducer(\n  state: ComposeMailState = { drafts: {}, usersKeys: new Map() },\n  action: ComposeMailActions,\n): ComposeMailState {\n  switch (action.type) {\n    case ComposeMailActionTypes.SEND_MAIL:\n    case ComposeMailActionTypes.CREATE_MAIL: {\n      state.drafts[action.payload.id] = {\n        ...state.drafts[action.payload.id],\n        isSaving: true,\n        inProgress: true,\n        shouldSend: false,\n        shouldSave: false,\n        isSent: false,\n      };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.CREATE_MAIL_SUCCESS: {\n      const oldDraft = state.drafts[action.payload.draft.id];\n      const draftMail = action.payload.response;\n      if (action.payload.draft.draft.forward_attachments_of_message) {\n        oldDraft.attachments = draftMail.attachments.map((attachment: any) => {\n          attachment.progress = 100;\n          if (!attachment.name) {\n            attachment.name = FilenamePipe.tranformToFilename(attachment.document);\n          }\n          attachment.draftId = oldDraft.id;\n          attachment.attachmentId = performance.now() + Math.floor(getCryptoRandom() * 1000);\n          return attachment;\n        });\n      }\n      draftMail.is_html = oldDraft.draft.is_html;\n      state.drafts[action.payload.draft.id] = {\n        ...oldDraft,\n        inProgress: false,\n        isSent: false,\n        draft: draftMail,\n        isSaving: false,\n      };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.SEND_MAIL_SUCCESS: {\n      delete state.drafts[action.payload.id];\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.SEND_MAIL_FAILURE: {\n      state.drafts[action.payload.id] = {\n        ...state.drafts[action.payload.id],\n        draft: { ...state.drafts[action.payload.id].draft, send: false, folder: MailFolderType.DRAFT },\n        inProgress: false,\n        isSent: false,\n      };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPDATE_LOCAL_DRAFT: {\n      state.drafts[action.payload.id] = { ...state.drafts[action.payload.id], ...action.payload, inProgress: true };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.GET_USERS_KEYS: {\n      if (action.payload.draftId && action.payload.draft) {\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          ...action.payload.draft,\n          // inProgress: true,\n          getUserKeyInProgress: true,\n        };\n      }\n      let usersKeys = state.usersKeys;\n      action.payload.emails.forEach((email: string) => {\n        usersKeys.set(email, { key: null, isFetching: true });\n      });\n      return { ...state, drafts: { ...state.drafts }, usersKeys };\n    }\n\n    case ComposeMailActionTypes.GET_USERS_KEYS_SUCCESS: {\n      if (action.payload.draftId) {\n        // TODO - should be check\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          getUserKeyInProgress: false,\n          usersKeys: !action.payload.isBlind ? action.payload.data : state.drafts[action.payload.draftId].usersKeys,\n        };\n      }\n      // Saving on global user keys\n      let usersKeys = state.usersKeys;\n      if (!action.payload.isBlind && action.payload.data && action.payload.data.keys) {\n        action.payload.data.keys.forEach((key: any) => {\n          usersKeys.set(key.email, {\n            key:\n              usersKeys.has(key.email) && usersKeys.get(key.email).key && usersKeys.get(key.email).key.length > 0\n                ? [...usersKeys.get(key.email).key, key]\n                : [key],\n            isFetching: false,\n          });\n        });\n      }\n      return {\n        ...state,\n        drafts: { ...state.drafts },\n        usersKeys,\n      };\n    }\n\n    case ComposeMailActionTypes.UPDATE_PGP_ENCRYPTED_CONTENT: {\n      if (action.payload.draftId) {\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          isPGPInProgress: action.payload.isPGPInProgress,\n          encryptedContent: action.payload.encryptedContent,\n        };\n      }\n      return {\n        ...state,\n        drafts: { ...state.drafts },\n      };\n    }\n\n    case ComposeMailActionTypes.UPDATE_PGP_MIME_ENCRYPTED: {\n      if (action.payload.draftId) {\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          isPGPMimeInProgress: action.payload.isPGPMimeInProgress,\n          pgpMimeContent: action.payload.encryptedContent,\n        };\n      }\n      return {\n        ...state,\n        drafts: { ...state.drafts },\n      };\n    }\n\n    case ComposeMailActionTypes.UPDATE_PGP_SSH_KEYS: {\n      if (action.payload.draftId) {\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          // isSshInProgress: action.payload.isSshInProgress,\n        };\n        if (action.payload.keys) {\n          state.drafts[action.payload.draftId].draft = {\n            ...state.drafts[action.payload.draftId].draft,\n            encryption: {\n              ...state.drafts[action.payload.draftId].draft.encryption,\n              // private_key: action.payload.keys.private_key,\n              // public_key: action.payload.keys.public_key,\n            },\n          };\n        }\n      }\n      return {\n        ...state,\n        drafts: { ...state.drafts },\n      };\n    }\n\n    case ComposeMailActionTypes.CLOSE_MAILBOX: {\n      if (action.payload && state.drafts[action.payload.id]) {\n        state.drafts[action.payload.id] = { ...state.drafts[action.payload.id], isClosed: true };\n        return { ...state, drafts: { ...state.drafts } };\n      }\n      return state;\n    }\n\n    case ComposeMailActionTypes.CLEAR_DRAFT: {\n      delete state.drafts[action.payload.id];\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.START_ATTACHMENT_ENCRYPTION: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            inProgress: true,\n          };\n          state.drafts[action.payload.draftId] = {\n            ...state.drafts[action.payload.draftId],\n            isProcessingAttachments: true,\n          };\n        }\n      });\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPLOAD_ATTACHMENT: {\n      if (action.payload.id) {\n        state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n          if (attachment.attachmentId === action.payload.attachmentId) {\n            state.drafts[action.payload.draftId].attachments[index] = {\n              ...state.drafts[action.payload.draftId].attachments[index],\n              inProgress: true,\n            };\n            state.drafts[action.payload.draftId] = {\n              ...state.drafts[action.payload.draftId],\n              isProcessingAttachments: true,\n            };\n          }\n        });\n      } else {\n        state.drafts[action.payload.draftId].attachments = [\n          ...state.drafts[action.payload.draftId].attachments,\n          { ...action.payload, inProgress: true },\n        ];\n        state.drafts[action.payload.draftId] = {\n          ...state.drafts[action.payload.draftId],\n          isProcessingAttachments: true,\n        };\n      }\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPLOAD_ATTACHMENT_PROGRESS: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            progress: action.payload.progress,\n          };\n        }\n      });\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPLOAD_ATTACHMENT_REQUEST: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            request: action.payload.request,\n          };\n        }\n      });\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPLOAD_ATTACHMENT_SUCCESS: {\n      const { data, isPGPMimeMessage } = action.payload;\n      state.drafts[data.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === data.attachmentId) {\n          state.drafts[data.draftId].attachments[index] = {\n            ...state.drafts[data.draftId].attachments[index],\n            id: action.payload.response.id,\n            document: action.payload.response.document,\n            content_id: action.payload.response.content_id,\n            inProgress: false,\n            request: null,\n          };\n        }\n      });\n      const isProcessingAttachments = !!state.drafts[data.draftId].attachments.find(\n        attachment => attachment.inProgress,\n      );\n      state.drafts[data.draftId] = { ...state.drafts[data.draftId], isProcessingAttachments };\n      if (isPGPMimeMessage && data.name === PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME) {\n        // PGP/MIME message process\n        state.drafts[data.draftId] = updateDraftMailForPGPMimeMessage(\n          state.drafts[data.draftId],\n          data,\n          action.payload.response,\n        );\n      }\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPLOAD_ATTACHMENT_FAILURE: {\n      state.drafts[action.payload.draftId].attachments = state.drafts[action.payload.draftId].attachments.filter(\n        attachment => attachment.attachmentId !== action.payload.attachmentId,\n      );\n      const isProcessingAttachments = !!state.drafts[action.payload.draftId].attachments.find(\n        attachment => attachment.inProgress,\n      );\n      state.drafts[action.payload.draftId] = { ...state.drafts[action.payload.draftId], isProcessingAttachments };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.DELETE_ATTACHMENT: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            isRemoved: true,\n            inProgress: true,\n          };\n        }\n      });\n      state.drafts[action.payload.draftId] = { ...state.drafts[action.payload.draftId], isProcessingAttachments: true };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.DELETE_ATTACHMENT_SUCCESS: {\n      state.drafts[action.payload.draftId].attachments = state.drafts[action.payload.draftId].attachments.filter(\n        attachment => {\n          if (attachment.attachmentId === action.payload.attachmentId) {\n            if (!attachment.id) {\n              attachment.request.unsubscribe();\n            }\n            return false;\n          }\n          return true;\n        },\n      );\n      const isProcessingAttachments = !!state.drafts[action.payload.draftId].attachments.find(\n        attachment => attachment.inProgress,\n      );\n      state.drafts[action.payload.draftId] = { ...state.drafts[action.payload.draftId], isProcessingAttachments };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.DELETE_ATTACHMENT_FAILURE: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            isRemoved: false,\n            inProgress: false,\n          };\n        }\n      });\n      const isProcessingAttachments = !!state.drafts[action.payload.draftId].attachments.find(\n        attachment => attachment.inProgress,\n      );\n      state.drafts[action.payload.draftId] = { ...state.drafts[action.payload.draftId], isProcessingAttachments };\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.NEW_DRAFT: {\n      state.drafts[action.payload.id] = action.payload;\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.UPDATE_DRAFT_ATTACHMENT: {\n      state.drafts[action.payload.draftId].attachments.forEach((attachment, index) => {\n        if (attachment.attachmentId === action.payload.attachment.attachmentId) {\n          state.drafts[action.payload.draftId].attachments[index] = {\n            ...state.drafts[action.payload.draftId].attachments[index],\n            ...action.payload.attachment,\n          };\n        }\n      });\n      return { ...state, drafts: { ...state.drafts } };\n    }\n\n    case ComposeMailActionTypes.MATCH_CONTACT_USER_KEYS: {\n      const usersKeys = state.usersKeys;\n      if (action.payload.contactKeyAdd) {\n        const key = action.payload;\n        usersKeys.set(key.email, {\n          key:\n            usersKeys.has(key.email) && usersKeys.get(key.email).key && usersKeys.get(key.email).key.length > 0\n              ? [...usersKeys.get(key.email).key, { email: key.email, public_key: key.public_key }]\n              : [{ email: key.email, public_key: key.public_key }],\n          isFetching: false,\n        });\n      } else if (action.payload.contactKeyUpdate) {\n      } else if (action.payload.contactKeyRemove) {\n      } else if (action.payload.contactAdd) {\n        // setting encryption type\n        const email = action.payload.email;\n        if (usersKeys.has(email) && usersKeys.get(email).key && usersKeys.get(email).key.length > 0) {\n          usersKeys.set(email, {\n            ...usersKeys.get(email),\n            pgpEncryptionType: action.payload.enabled_encryption ? action.payload.encryption_type : null,\n          });\n        }\n      }\n      return { ...state, usersKeys };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { ContactKey, ContactsState } from '../datatypes';\nimport { ContactsActionAll, ContactsActionTypes } from '../actions/contacts.action';\nimport { sortByString } from '../services';\n\nexport const initialState: ContactsState = {\n  contacts: [],\n  totalContacts: 0,\n  noOfDecryptedContacts: 0,\n  loaded: false,\n  contactsToDecrypt: [],\n  selectedContactKeys: [],\n};\n\nexport function reducer(state = initialState, action: ContactsActionAll): ContactsState {\n  switch (action.type) {\n    case ContactsActionTypes.CONTACT_GET: {\n      return { ...state, loaded: false, inProgress: true, contactsToDecrypt: [] };\n    }\n\n    case ContactsActionTypes.CONTACT_GET_SUCCESS: {\n      return {\n        ...state,\n        contacts: action.payload.results,\n        contactsToDecrypt: action.payload.isDecrypting ? action.payload.results : [],\n        totalContacts: action.payload.total_count,\n        loaded: true,\n        inProgress: false,\n      };\n    }\n\n    case ContactsActionTypes.CONTACT_GET_FAILURE: {\n      return {\n        ...state,\n        loaded: true,\n        inProgress: false,\n      };\n    }\n\n    case ContactsActionTypes.CLEAR_CONTACTS_TO_DECRYPT: {\n      return {\n        ...state,\n        contactsToDecrypt: [],\n        noOfDecryptedContacts: action.payload && action.payload.clearCount ? 0 : state.noOfDecryptedContacts,\n      };\n    }\n\n    case ContactsActionTypes.CONTACT_BATCH_UPDATE: {\n      return { ...state, noOfDecryptedContacts: state.noOfDecryptedContacts + action.payload.contact_list.length };\n    }\n\n    case ContactsActionTypes.CONTACT_NOTIFY:\n    case ContactsActionTypes.CONTACT_DELETE:\n    case ContactsActionTypes.CONTACT_ADD: {\n      return { ...state, inProgress: true, isError: false };\n    }\n    case ContactsActionTypes.CONTACT_NOTIFY_SUCCESS:\n    case ContactsActionTypes.CONTACT_NOTIFY_FAILURE: {\n      return { ...state, inProgress: false, isError: false };\n    }\n    case ContactsActionTypes.CONTACT_ADD_SUCCESS: {\n      if (action.payload.isUpdating) {\n        const contact = state.contacts.find(item => item.id === action.payload.id);\n        contact.note = action.payload.note;\n        contact.address = action.payload.address;\n        contact.phone = action.payload.phone;\n        contact.phone2 = action.payload.phone2;\n        contact.email = action.payload.email;\n        contact.name = action.payload.name;\n        contact.enabled_encryption = action.payload.enabled_encryption;\n        contact.encryption_type = action.payload.encryption_type;\n        // TODO should be updated to set public key list\n        // contact.public_key = action.payload.public_key;\n        return { ...state, inProgress: false, isError: false };\n      }\n      state.totalContacts += 1;\n\n      return {\n        ...state,\n        contacts: sortByString(state.contacts.concat([action.payload]), 'name'),\n        inProgress: false,\n        isError: false,\n      };\n    }\n    case ContactsActionTypes.CONTACT_ADD_ERROR: {\n      return { ...state, inProgress: false, isError: true };\n    }\n\n    case ContactsActionTypes.CONTACT_DELETE_SUCCESS: {\n      const ids = action.payload.split(',');\n      const contacts = state.contacts.filter(item => ids.includes(`${item.id}`));\n      contacts.forEach(contact => {\n        state.contacts.splice(state.contacts.indexOf(contact), 1);\n      });\n      state.totalContacts -= ids.length;\n      return { ...state, inProgress: false, isError: false };\n    }\n\n    case ContactsActionTypes.CONTACT_IMPORT: {\n      return { ...state, inProgress: true };\n    }\n\n    case ContactsActionTypes.CONTACT_IMPORT_SUCCESS: {\n      return { ...state, inProgress: false };\n    }\n\n    case ContactsActionTypes.CONTACT_IMPORT_FAILURE: {\n      return { ...state, inProgress: false };\n    }\n\n    case ContactsActionTypes.GET_EMAIL_CONTACTS: {\n      return { ...state, emailContacts: [] };\n    }\n\n    case ContactsActionTypes.GET_EMAIL_CONTACTS_SUCCESS: {\n      return { ...state, emailContacts: action.payload };\n    }\n\n    case ContactsActionTypes.CONTACT_DECRYPT_SUCCESS: {\n      const contacts = state.contacts.map(contact => {\n        if (contact.id === action.payload.id) {\n          contact = action.payload;\n          contact.isDecryptedFrontend = true;\n          contact.is_decryptionInProgress = false;\n        }\n        return contact;\n      });\n      return { ...state, contacts };\n    }\n\n    // Contact Fetch Keys\n    case ContactsActionTypes.CONTACT_FETCH_KEYS: {\n      return { ...state, advancedSettingInProgress: true };\n    }\n    case ContactsActionTypes.CONTACT_FETCH_KEYS_SUCCESS: {\n      const selectedContactKeys = action.payload.results;\n      return {\n        ...state,\n        selectedContactKeys,\n        advancedSettingInProgress: false,\n      };\n    }\n    case ContactsActionTypes.CONTACT_FETCH_KEYS_FAILURE: {\n      return { ...state, advancedSettingInProgress: false };\n    }\n\n    // Contact Add Keys\n    case ContactsActionTypes.CONTACT_ADD_KEYS: {\n      return { ...state, advancedSettingInProgress: true };\n    }\n    case ContactsActionTypes.CONTACT_ADD_KEYS_SUCCESS: {\n      const selectedContactKeys = state.selectedContactKeys;\n      let filteredKeys = selectedContactKeys.filter(key => key.fingerprint !== action.payload.fingerprint);\n      filteredKeys = [...filteredKeys, action.payload];\n      return {\n        ...state,\n        selectedContactKeys: filteredKeys,\n        advancedSettingInProgress: false,\n      };\n    }\n    case ContactsActionTypes.CONTACT_ADD_KEYS_FAILURE: {\n      return { ...state, advancedSettingInProgress: false };\n    }\n\n    // Contact Remove Public Keys\n    case ContactsActionTypes.CONTACT_REMOVE_KEYS: {\n      return { ...state, advancedSettingInProgress: true };\n    }\n    case ContactsActionTypes.CONTACT_REMOVE_KEYS_SUCCESS: {\n      const newContactKeys = state.selectedContactKeys.filter(key => key.fingerprint !== action.payload.fingerprint);\n      return {\n        ...state,\n        selectedContactKeys: newContactKeys,\n        advancedSettingInProgress: false,\n      };\n    }\n    case ContactsActionTypes.CONTACT_REMOVE_KEYS_FAILURE: {\n      return { ...state, advancedSettingInProgress: false };\n    }\n\n    // Contact Bulk Update Public Keys\n    case ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS: {\n      return { ...state, advancedSettingInProgress: true };\n    }\n    case ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS_SUCCESS: {\n      const contacts = state.contacts;\n      contacts.forEach(contact => {\n        if (contact.id === action.payload.id) {\n          contact.encryption_type = action.payload.encryption_type;\n        }\n      });\n      return {\n        ...state,\n        selectedContactKeys: action.payload,\n        advancedSettingInProgress: false,\n      };\n    }\n    case ContactsActionTypes.CONTACT_BULK_UPDATE_KEYS_FAILURE: {\n      return { ...state, advancedSettingInProgress: false };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { ActionReducerMap } from '@ngrx/store';\n\nimport { AppState } from '../datatypes';\nimport * as webSocket from '../websocket.store';\nimport * as organization from '../organization.store';\n\nimport * as auth from './auth.reducers';\nimport * as mail from './mail.reducers';\nimport * as mailboxes from './mailboxes.reducers';\nimport * as loading from './loading.reducers';\nimport * as keyboard from './keyboard.reducers';\nimport * as user from './users.reducers';\nimport * as timezone from './timezone.reducer';\nimport * as bitcoin from './bitcoin.reducers';\nimport * as composeMail from './compose-mail.reducers';\nimport * as search from './search.reducers';\nimport * as secureMessage from './secure-message.reducers';\nimport * as contacts from './contacts.reducers';\n\nexport const reducers: ActionReducerMap<AppState> = {\n  auth: auth.reducer,\n  mail: mail.reducer,\n  mailboxes: mailboxes.reducer,\n  loading: loading.reducer,\n  keyboard: keyboard.reducer,\n  user: user.reducer,\n  contacts: contacts.reducer,\n  timezone: timezone.reducer,\n  bitcoin: bitcoin.reducer,\n  composeMail: composeMail.reducer,\n  search: search.reducer,\n  secureMessage: secureMessage.reducer,\n  webSocket: webSocket.reducer,\n  organization: organization.reducer,\n};\n","import { KeyboardActionTypes, KeyboardActionAll } from '../actions';\nimport { KeyboardState } from '../datatypes';\n\nexport const initialState: KeyboardState = { keyboardFocused: false, keyPressed: { key: '' }, focusedInput: '' };\n\nexport function reducer(state = initialState, action: KeyboardActionAll): KeyboardState {\n  switch (action.type) {\n    case KeyboardActionTypes.KEYBOARD_FOCUSED: {\n      if (action.payload.keyboard === false) {\n        return { ...state, keyboardFocused: false };\n      }\n      return { ...state, keyboardFocused: !state.keyboardFocused };\n    }\n    case KeyboardActionTypes.KEYBOARD_FOCUSED_OUT: {\n      return initialState;\n    }\n    case KeyboardActionTypes.KEY_PRESSED: {\n      return { ...state, keyPressed: action.payload };\n    }\n    case KeyboardActionTypes.FOCUSED_INPUT: {\n      return { ...state, focusedInput: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { LoadingActionAll, LoadingActionTypes } from '../actions';\nimport { LoadingState } from '../datatypes';\n\nexport const initialState: LoadingState = {\n  RecentBlogLoading: false,\n  RelatedBlogLoading: false,\n  Loading: false,\n};\n\nexport function reducer(state = initialState, action: LoadingActionAll): LoadingState {\n  switch (action.type) {\n    case LoadingActionTypes.RECENT_LOADING: {\n      return { ...state, RecentBlogLoading: action.payload.loadingState };\n    }\n    case LoadingActionTypes.RELATED_LOADING: {\n      return { ...state, RelatedBlogLoading: action.payload.loadingState };\n    }\n    case LoadingActionTypes.FINAL_LOADING: {\n      return { ...state, Loading: action.payload.loadingState };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { MailActions, MailActionTypes } from '../actions';\nimport { FolderState, MailState, PGPEncryptionType, SecureContent } from '../datatypes';\nimport { Attachment, EmailDisplay, Mail, MailFolderType } from '../models';\nimport { FilenamePipe } from '../../shared/pipes/filename.pipe';\n\n/**\n ---Start Reducer Utilities---\n * */\nfunction transformFilename(attachments: Attachment[]) {\n  if (attachments && attachments.length > 0) {\n    attachments = attachments.map(attachment => {\n      if (!attachment.name) {\n        attachment.name = FilenamePipe.tranformToFilename(attachment.document);\n      }\n      return attachment;\n    });\n  }\n  return attachments;\n}\n\nfunction sortByDueDateWithID(sortArray: Array<number>, mailMap: any): any[] {\n  const mails = sortArray\n    .map(mailID => {\n      if (mailMap.hasOwnProperty(mailID)) {\n        return mailMap[mailID];\n      }\n      return null;\n    })\n    .filter(mail => !!mail);\n  const sorted = mails\n    .sort((previous: any, next: any) => {\n      const next_updated = next.updated || 0;\n      const previous_updated = previous.updated || 0;\n      return <any>new Date(next_updated) - <any>new Date(previous_updated);\n    })\n    .map(mail => mail.id);\n  return sorted;\n}\n\nfunction getTotalUnreadCount(data: any): number {\n  if (data) {\n    let total_count = 0;\n    Object.keys(data).forEach(key => {\n      if (\n        key !== MailFolderType.SENT &&\n        key !== MailFolderType.TRASH &&\n        key !== MailFolderType.DRAFT &&\n        key !== MailFolderType.OUTBOX &&\n        key !== MailFolderType.SPAM &&\n        key !== 'total_unread_count' &&\n        key !== MailFolderType.STARRED &&\n        key !== 'updateUnreadCount' &&\n        key !== 'outbox_dead_man_counter' &&\n        key !== 'outbox_delayed_delivery_counter' &&\n        key !== 'outbox_self_destruct_counter'\n      ) {\n        if (!isNaN(data[`${key}`])) {\n          total_count += data[`${key}`];\n        }\n      }\n    });\n\n    return total_count;\n  }\n  return 0;\n}\n\nfunction updateMailMap(currentMap: any, mails: Mail[]): any {\n  if (mails && mails.length > 0) {\n    let temporaryMailMap = {};\n    mails.forEach(mail => {\n      temporaryMailMap = { ...temporaryMailMap, [mail.id]: mail };\n    });\n    return { ...currentMap, ...temporaryMailMap };\n  }\n  return currentMap;\n}\n\nfunction filterAndMergeMailIDs(\n  newMails: Array<Mail>,\n  originalMailIDs: Array<number>,\n  limit: number,\n  checkUnread = false,\n): Array<number> {\n  let mailIDs = newMails.filter(mail => (checkUnread ? !mail.read : true)).map(mail => mail.id);\n  const newMailsMap: any = {};\n  newMails.forEach(mail => {\n    newMailsMap[mail.id] = mail;\n  });\n  if (originalMailIDs && originalMailIDs.length > 0) {\n    originalMailIDs = originalMailIDs.filter(id => !mailIDs.includes(id));\n    mailIDs = mailIDs.map(mailID => {\n      const newMail = newMailsMap[mailID];\n      if (newMail.parent && originalMailIDs.includes(newMail.parent)) {\n        originalMailIDs = originalMailIDs.filter(originMailID => originMailID !== newMail.parent);\n        return newMail.parent;\n      }\n      return mailID;\n    });\n    originalMailIDs = [...mailIDs, ...originalMailIDs];\n    if (originalMailIDs.length > limit) {\n      originalMailIDs = originalMailIDs.slice(0, limit);\n    }\n    return originalMailIDs;\n  }\n  return mailIDs;\n}\n\nfunction getUpdatesFolderMap(\n  newMails: Array<Mail>,\n  originalFolderState: FolderState,\n  limit: number,\n  checkUnread = false,\n  isConversationViewMode = true,\n): any {\n  let originalMailIDs = originalFolderState.mails;\n  let mailIDs = newMails.filter(mail => (checkUnread ? !mail.read : true)).map(mail => mail.id);\n  const newMailsMap: any = {};\n  newMails.forEach(mail => {\n    newMailsMap[mail.id] = mail;\n  });\n  if (originalMailIDs && originalMailIDs.length > 0) {\n    // Remove duplicated mails\n    let duplicatedMailIDS: any = [];\n    originalMailIDs = originalMailIDs.filter(id => {\n      if (!mailIDs.includes(id)) {\n        return true;\n      }\n      duplicatedMailIDS = [...duplicatedMailIDS, id];\n      return false;\n    });\n    // Check children mails\n    // If new's parent is same with any original mail\n    // Replace it with original mail on new mail array\n    let parentWithChild: any = [];\n    if (isConversationViewMode) {\n      mailIDs = mailIDs.map(mailID => {\n        const newMail = newMailsMap[mailID];\n        if (newMail.parent && originalMailIDs.includes(newMail.parent)) {\n          originalMailIDs = originalMailIDs.filter(originMailID => originMailID !== newMail.parent);\n          parentWithChild = [...parentWithChild.filter((item: any) => newMail.parent !== item), newMail.parent];\n          return newMail.parent;\n        }\n        return mailID;\n      });\n    }\n    // Merge new with old\n    originalMailIDs = [...mailIDs, ...originalMailIDs];\n    // Check overflow\n    if (originalMailIDs.length > limit) {\n      originalMailIDs = originalMailIDs.slice(0, limit);\n    }\n    const total_mail_count =\n      originalFolderState.total_mail_count + mailIDs.length - parentWithChild.length - duplicatedMailIDS.length >= 0\n        ? originalFolderState.total_mail_count + mailIDs.length - parentWithChild.length - duplicatedMailIDS.length\n        : 0;\n    return {\n      mails: originalMailIDs,\n      total_mail_count,\n    };\n  }\n  return {\n    mails: mailIDs,\n    total_mail_count: mailIDs.length,\n  };\n}\n\nfunction prepareMails(folderName: MailFolderType, folders: Map<string, FolderState>, mailMap: any): Array<Mail> {\n  if (folders.has(folderName)) {\n    const folderInfo = folders.get(folderName);\n    const mails = folderInfo.mails\n      .map(mailID => {\n        const mail = mailMap[mailID] ? mailMap[mailID] : null;\n        if (mail) {\n          mail.receiver_list = mail.receiver_display.map((item: EmailDisplay) => item.name).join(', ');\n          if (mail.children_folder_info) {\n            if (folderName === MailFolderType.TRASH && mail.folder === MailFolderType.TRASH) {\n              mail.thread_count = mail.children_folder_info ? mail.children_folder_info.trash_children_count + 1 : 0;\n            } else if (folderName === MailFolderType.TRASH && mail.folder !== MailFolderType.TRASH) {\n              mail.thread_count = mail.children_folder_info ? mail.children_folder_info.trash_children_count : 0;\n            } else if (folderName !== MailFolderType.TRASH && mail.folder !== MailFolderType.TRASH) {\n              mail.thread_count = mail.children_folder_info\n                ? mail.children_folder_info.non_trash_children_count + 1\n                : 0;\n            } else if (folderName !== MailFolderType.TRASH && mail.folder === MailFolderType.TRASH) {\n              mail.thread_count = mail.children_folder_info ? mail.children_folder_info.non_trash_children_count : 0;\n            }\n          }\n        }\n        return mail;\n      })\n      .filter(mail => mail !== null);\n    return mails;\n  }\n  return [];\n}\n\n/**\n ---End Reducer Utilities---\n * */\n\nexport function reducer(\n  state: MailState = {\n    mails: [],\n    total_mail_count: 0,\n    mailDetail: undefined,\n    starredFolderCount: 0,\n    loaded: false,\n    decryptedContents: {},\n    unreadMailsCount: { inbox: 0 },\n    noUnreadCountChange: true,\n    canGetUnreadCount: true,\n    decryptedSubjects: {},\n    isMailsMoved: false,\n    customFolderMessageCount: [],\n    isComposerPopUp: false,\n    mailMap: {},\n    folderMap: new Map(),\n    pageLimit: 20,\n    decryptedAttachmentsMap: new Map(),\n  },\n  action: MailActions,\n): MailState {\n  switch (action.type) {\n    case MailActionTypes.GET_MAILS: {\n      let mails = prepareMails(action.payload.folder, state.folderMap, state.mailMap);\n      if (mails && mails.length === 0) {\n        mails = undefined;\n      }\n      return {\n        ...state,\n        loaded: !!(mails && !action.payload.forceReload),\n        inProgress: !!action.payload.inProgress,\n        currentFolder: action.payload.folder as MailFolderType,\n        mails: mails || [],\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.GET_MAILS_SUCCESS: {\n      const payloadMails = action.payload.mails;\n      const mailMap = updateMailMap(state.mailMap, payloadMails);\n      const folderMap = new Map(state.folderMap);\n      // Update Folder Map for ###TARGET FOLDER###\n      if (!action.payload.is_from_socket || (action.payload.is_from_socket && folderMap.has(action.payload.folder))) {\n        const oldFolderInfo = folderMap.get(action.payload.folder);\n        const mailIDS = action.payload.is_from_socket\n          ? oldFolderInfo && !oldFolderInfo.is_not_first_page\n            ? filterAndMergeMailIDs(payloadMails, oldFolderInfo.mails, action.payload.limit)\n            : oldFolderInfo.mails\n          : payloadMails.map((mail: any) => mail.id);\n        const folderState = {\n          mails: mailIDS,\n          total_mail_count: action.payload.total_mail_count,\n          is_not_first_page: action.payload.is_from_socket\n            ? oldFolderInfo && oldFolderInfo.is_not_first_page\n            : action.payload.is_not_first_page,\n          offset: action.payload.offset,\n          is_dirty: false,\n        };\n        folderMap.set(`${action.payload.folder}`, folderState);\n      }\n\n      // Update Folder Map for ###UNREAD FOLDER###\n      if (\n        action.payload.is_from_socket &&\n        action.payload.folder !== MailFolderType.UNREAD &&\n        action.payload.folder !== MailFolderType.SPAM &&\n        folderMap.has(MailFolderType.UNREAD)\n      ) {\n        const oldFolderInfo = folderMap.get(MailFolderType.UNREAD);\n        const basicFolderState = getUpdatesFolderMap(payloadMails, oldFolderInfo, action.payload.limit, true);\n        const folderState = {\n          ...oldFolderInfo,\n          mails: basicFolderState.mails,\n          total_mail_count: basicFolderState.total_mail_count,\n        };\n        folderMap.set(MailFolderType.UNREAD, folderState);\n      }\n      // Update Folder Map for ###ALL EMAILS FOLDER###\n      if (\n        action.payload.is_from_socket &&\n        action.payload.folder !== MailFolderType.ALL_EMAILS &&\n        action.payload.folder !== MailFolderType.SPAM &&\n        folderMap.has(MailFolderType.ALL_EMAILS)\n      ) {\n        const oldFolderInfo = folderMap.get(MailFolderType.ALL_EMAILS);\n        const basicFolderState = getUpdatesFolderMap(payloadMails, oldFolderInfo, action.payload.limit);\n        const folderState = {\n          ...oldFolderInfo,\n          mails: basicFolderState.mails,\n          total_mail_count: basicFolderState.total_mail_count,\n        };\n        folderMap.set(MailFolderType.ALL_EMAILS, folderState);\n      }\n      // Update Current Viewing Folder\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      const currentFolderMap = folderMap.get(state.currentFolder);\n      state.total_mail_count = currentFolderMap.total_mail_count;\n      mails.forEach((mail: Mail) => {\n        mail.receiver_list = mail.receiver_display.map((item: EmailDisplay) => item.name).join(', ');\n        if (mail.is_subject_encrypted && state.decryptedSubjects[mail.id]) {\n          mail.subject = state.decryptedSubjects[mail.id];\n          mail.is_subject_encrypted = false;\n        }\n      });\n      state.pageLimit = action.payload.limit;\n      return {\n        ...state,\n        mails,\n        loaded: true,\n        inProgress: false,\n        noUnreadCountChange: true,\n        mailMap,\n        folderMap,\n      };\n    }\n\n    case MailActionTypes.STOP_GETTING_UNREAD_MAILS_COUNT: {\n      return {\n        ...state,\n        canGetUnreadCount: false,\n      };\n    }\n\n    case MailActionTypes.STARRED_FOLDER_COUNT_UPDATE: {\n      return { ...state, starredFolderCount: action.payload.starred_count };\n    }\n\n    case MailActionTypes.GET_UNREAD_MAILS_COUNT: {\n      return { ...state, noUnreadCountChange: false };\n    }\n    case MailActionTypes.GET_UNREAD_MAILS_COUNT_SUCCESS: {\n      if (action.payload.updateUnreadCount) {\n        const totalUnreadMailCount = getTotalUnreadCount({ ...state.unreadMailsCount, ...action.payload });\n        const unreadMailData = {\n          ...state.unreadMailsCount,\n          ...action.payload,\n          total_unread_count: totalUnreadMailCount,\n        };\n        return {\n          ...state,\n          unreadMailsCount: unreadMailData,\n          noUnreadCountChange: false,\n        };\n      }\n      return {\n        ...state,\n        unreadMailsCount: { ...action.payload, total_unread_count: getTotalUnreadCount(action.payload) },\n        noUnreadCountChange: false,\n      };\n    }\n    case MailActionTypes.GET_CUSTOMFOLDER_MESSAGE_COUNT_SUCCESS: {\n      return { ...state, customFolderMessageCount: action.payload };\n    }\n    case MailActionTypes.SET_IS_COMPOSER_POPUP: {\n      state.isComposerPopUp = action.payload;\n      return {\n        ...state,\n      };\n    }\n    case MailActionTypes.MOVE_MAIL: {\n      return { ...state, inProgress: true, noUnreadCountChange: true, isMailsMoved: false };\n    }\n\n    case MailActionTypes.REVERT_MAILS_MOVED: {\n      return { ...state, isMailsMoved: false };\n    }\n\n    case MailActionTypes.MOVE_MAIL_SUCCESS: {\n      const listOfIDs = action.payload.ids.toString().split(',');\n      const { folderMap } = state;\n      const { mailMap } = state;\n\n      // Update source folder's mails\n      const sourceFolderName = action.payload.sourceFolder;\n      if (sourceFolderName && folderMap.has(sourceFolderName)) {\n        const sourceFolderState = folderMap.get(sourceFolderName);\n        sourceFolderState.mails = sourceFolderState.mails.filter(mail => !listOfIDs.includes(mail.toString()));\n        sourceFolderState.total_mail_count =\n          sourceFolderState.total_mail_count >= listOfIDs.length\n            ? sourceFolderState.total_mail_count - listOfIDs.length\n            : 0;\n        folderMap.set(sourceFolderName, sourceFolderState);\n      }\n      // Update target folder's mails\n      const targetFolderName = action.payload.folder;\n      if (targetFolderName && folderMap.has(targetFolderName)) {\n        const targetFolderState = folderMap.get(targetFolderName);\n        const movedMails = listOfIDs\n          .map((movedID: any) => (mailMap[movedID] ? mailMap[movedID] : null))\n          .filter((mail: any) => !!mail);\n        const basicFolderState = getUpdatesFolderMap(movedMails, targetFolderState, state.pageLimit);\n        const folderState = {\n          ...targetFolderState,\n          mails: sortByDueDateWithID(basicFolderState.mails, state.mailMap),\n          total_mail_count: basicFolderState.total_mail_count,\n        };\n        folderMap.set(targetFolderName, folderState);\n      }\n      // Update other folders\n      const folder_keys = [...folderMap.keys()].filter(\n        key => key !== sourceFolderName && key !== targetFolderName && key !== state.currentFolder,\n      );\n      folder_keys.forEach(key => {\n        const folderInfo = folderMap.get(key);\n        folderInfo.is_dirty = true;\n        folderInfo.mails = [];\n        folderMap.set(key, folderInfo);\n      });\n      // Update mail map\n      const mailMapKeys = Object.keys(mailMap);\n      mailMapKeys.forEach(key => {\n        if (listOfIDs.includes(mailMap[key].id.toString())) {\n          mailMap[key] = { ...mailMap[key], folder: action.payload.folder };\n          if (\n            action.payload.folder === MailFolderType.TRASH &&\n            mailMap[key].has_children &&\n            mailMap[key].children_count > 0 &&\n            action.payload.withChildren !== false\n          ) {\n            // If moving parent to trash, children would be moved to trash as well\n            mailMap[key].children_folder_info = {\n              trash_children_count: mailMap[key].children_count,\n              non_trash_children_count: 0,\n            };\n          } else if (\n            action.payload.sourceFolder === MailFolderType.TRASH &&\n            mailMap[key].has_children &&\n            mailMap[key].children_count > 0\n          ) {\n            // If moving parent from trash, children would be moved as well\n            mailMap[key].children_folder_info = {\n              trash_children_count: 0,\n              non_trash_children_count: mailMap[key].children_count,\n            };\n          }\n        }\n      });\n      // This is to move to trash only child from any folder\n      // should update children_folder_info as well\n      const incomeMails = Array.isArray(action.payload.mail) ? action.payload.mail : [action.payload.mail];\n      incomeMails.forEach((mail: any) => {\n        if (action.payload.folder === MailFolderType.TRASH && mail.parent) {\n          const parentID = mail.parent;\n          if (mailMap[parentID] && mailMap[parentID].children_folder_info) {\n            mailMap[parentID].children_folder_info = {\n              trash_children_count: mailMap[parentID].children_folder_info.trash_children_count + 1,\n              non_trash_children_count:\n                mailMap[parentID].children_folder_info.non_trash_children_count > 0\n                  ? mailMap[parentID].children_folder_info.non_trash_children_count - 1\n                  : 0,\n            };\n          }\n        }\n      });\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      const currentMailFolder = folderMap.get(state.currentFolder);\n      state.total_mail_count = currentMailFolder ? currentMailFolder.total_mail_count : 0;\n      if (\n        state.mailDetail &&\n        state.mailDetail.children &&\n        state.mailDetail.children.some(child => listOfIDs.includes(child.id.toString()))\n      ) {\n        state.mailDetail.children.forEach((child, index) => {\n          if (listOfIDs.includes(child.id.toString())) {\n            state.mailDetail.children[index] = { ...state.mailDetail.children[index], folder: action.payload.folder };\n            state.mailDetail.children_count = state.mailDetail.children.length;\n          }\n        });\n        const sourceFolderChildren = state.mailDetail.children.filter(child => child.folder === sourceFolderName);\n        if (sourceFolderName && folderMap.has(sourceFolderName)) {\n          const sourceFolderState = folderMap.get(sourceFolderName);\n          sourceFolderState.mails = sourceFolderState.mails.filter(mailID => {\n            if (mailID === state.mailDetail.id && sourceFolderChildren.length === 0) {\n              return false;\n            }\n            return true;\n          });\n          folderMap.set(sourceFolderName, sourceFolderState);\n        }\n      }\n      if (state.mailDetail && listOfIDs.includes(state.mailDetail.id.toString())) {\n        state.mailDetail = { ...state.mailDetail, folder: action.payload.folder };\n      }\n\n      return {\n        ...state,\n        mails,\n        mailMap,\n        folderMap,\n        inProgress: false,\n        noUnreadCountChange: true,\n        isMailsMoved: true,\n      };\n    }\n\n    case MailActionTypes.UNDO_DELETE_MAIL_SUCCESS: {\n      let { mails } = state;\n      const { mailMap } = state;\n      const undo_mails = Array.isArray(action.payload.mail) ? action.payload.mail : [action.payload.mail];\n      const { folderMap } = state;\n      // Destination folder map\n      if (state.folderMap.has(action.payload.sourceFolder)) {\n        const oldFolderMap = folderMap.get(action.payload.sourceFolder);\n        const basicFolderState = getUpdatesFolderMap(undo_mails, oldFolderMap, state.pageLimit);\n        basicFolderState.mails = sortByDueDateWithID(basicFolderState.mails, mailMap);\n        folderMap.set(action.payload.sourceFolder, basicFolderState);\n      }\n      // Source folder map\n      if (state.folderMap.has(action.payload.folder)) {\n        const oldFolderMap = folderMap.get(action.payload.folder);\n        oldFolderMap.mails = [];\n        oldFolderMap.is_dirty = true;\n        folderMap.set(action.payload.folder, oldFolderMap);\n      }\n      // Update mail children info\n      undo_mails.forEach((mail: any) => {\n        if (action.payload.sourceFolder === MailFolderType.TRASH && mail.has_children && mail.children_count > 0) {\n          // Action from the other to Trash folder (undo from trash to the other folder)\n          // All children would be set with Trash again\n          // TODO, needs to get which chilren are needed to undo exactly\n          if (mailMap[mail.id]) {\n            mailMap[mail.id].children_folder_info = {\n              trash_children_count: mailMap[mail.id].children_count,\n              non_trash_children_count: 0,\n            };\n          }\n        }\n      });\n      // Update current folder map\n      if (action.payload.sourceFolder === state.currentFolder) {\n        mails = prepareMails(action.payload.sourceFolder, folderMap, state.mailMap);\n        const curMailFolder = folderMap.get(state.currentFolder);\n        state.total_mail_count = curMailFolder ? curMailFolder.total_mail_count : 0;\n      }\n      const listOfIDs = action.payload.ids.toString().split(',');\n      if (\n        state.mailDetail &&\n        state.mailDetail.children &&\n        state.mailDetail.children.some(child => listOfIDs.includes(child.id.toString()))\n      ) {\n        state.mailDetail.children.forEach((child, index) => {\n          if (listOfIDs.includes(child.id.toString())) {\n            state.mailDetail.children[index] = {\n              ...state.mailDetail.children[index],\n              folder: action.payload.sourceFolder,\n            };\n          }\n        });\n      }\n      if (state.mailDetail && listOfIDs.includes(state.mailDetail.id.toString())) {\n        state.mailDetail = { ...state.mailDetail, folder: action.payload.sourceFolder };\n      }\n      return {\n        ...state,\n        mails,\n        folderMap,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.READ_MAIL_SUCCESS: {\n      const listOfIDs = action.payload.ids.split(',');\n      const { folderMap } = state;\n      const { mailMap } = state;\n      const allIDS = Object.keys(mailMap);\n      allIDS.forEach(mailID => {\n        if (listOfIDs.includes(mailID.toString())) {\n          mailMap[mailID] = { ...mailMap[mailID], read: action.payload.read };\n        }\n      });\n\n      // Update Unread folder\n      if (state.currentFolder !== MailFolderType.UNREAD) {\n        if (folderMap.has(MailFolderType.UNREAD)) {\n          // TODO should update manually\n          const unreadFolderMap = folderMap.get(MailFolderType.UNREAD);\n          unreadFolderMap.is_dirty = true;\n          folderMap.set(MailFolderType.UNREAD, unreadFolderMap);\n        }\n      } else {\n        const currentFolderInfo = folderMap.get(MailFolderType.UNREAD);\n        let updatedMailCount = 0;\n        const updatedCurrentFolderMails = currentFolderInfo.mails.filter(mailID => {\n          if (listOfIDs.includes(mailID.toString()) && action.payload.read) {\n            updatedMailCount++;\n            return false;\n          }\n          return true;\n        });\n        currentFolderInfo.mails = updatedCurrentFolderMails;\n        if (action.payload.read) {\n          currentFolderInfo.total_mail_count =\n            currentFolderInfo.total_mail_count >= updatedMailCount\n              ? currentFolderInfo.total_mail_count - updatedMailCount\n              : 0;\n        }\n        folderMap.set(MailFolderType.UNREAD, currentFolderInfo);\n      }\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      const curMailFolder = folderMap.get(state.currentFolder);\n      state.total_mail_count = curMailFolder ? curMailFolder.total_mail_count : 0;\n\n      if (state.mailDetail && listOfIDs.includes(state.mailDetail.id.toString())) {\n        state.mailDetail = { ...state.mailDetail, read: action.payload.read };\n      }\n\n      return {\n        ...state,\n        mails,\n        mailMap,\n        folderMap,\n        inProgress: false,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.STAR_MAIL_SUCCESS: {\n      const listOfIDs = action.payload.ids.split(',');\n      const { folderMap } = state;\n      const { mailMap } = state;\n      const allIDS = Object.keys(mailMap);\n      allIDS.forEach(mailID => {\n        if (listOfIDs.includes(mailID.toString())) {\n          const has_starred_children = !(!action.payload.starred && action.payload.withChildren);\n          mailMap[mailID] = { ...mailMap[mailID], starred: action.payload.starred, has_starred_children };\n        }\n      });\n\n      // Update Star folder\n      if (state.currentFolder !== MailFolderType.STARRED) {\n        if (folderMap.has(MailFolderType.STARRED)) {\n          // TODO should update manually\n          const starredFolderMap = folderMap.get(MailFolderType.STARRED);\n          starredFolderMap.is_dirty = true;\n          folderMap.set(MailFolderType.STARRED, starredFolderMap);\n        }\n      } else {\n        const currentFolderInfo = folderMap.get(MailFolderType.STARRED);\n        let updatedMailCount = 0;\n        const updatedCurrentFolderMails = currentFolderInfo.mails.filter(mailID => {\n          if (listOfIDs.includes(mailID.toString()) && !action.payload.starred) {\n            updatedMailCount++;\n            return false;\n          }\n          if (state.mailDetail && mailID === state.mailDetail.id) {\n            const { children } = state.mailDetail;\n            if (children && children.length > 0) {\n              children.forEach((child, index) => {\n                if (listOfIDs.includes(child.id.toString())) {\n                  children[index] = { ...child, starred: action.payload.starred };\n                }\n              });\n              return children.some(child => child.starred);\n            }\n          }\n          return true;\n        });\n        if (!action.payload.starred) {\n          currentFolderInfo.total_mail_count =\n            currentFolderInfo.total_mail_count >= updatedMailCount\n              ? currentFolderInfo.total_mail_count - updatedMailCount\n              : 0;\n        }\n        currentFolderInfo.mails = updatedCurrentFolderMails;\n        folderMap.set(MailFolderType.STARRED, currentFolderInfo);\n      }\n\n      if (state.mailDetail) {\n        const { children } = state.mailDetail;\n        if (listOfIDs.includes(state.mailDetail.id.toString())) {\n          if (action.payload.withChildren && children && children.length > 0) {\n            children.forEach((child, index) => (children[index].starred = action.payload.starred));\n          }\n          const has_starred_children =\n            children && children.length > 0\n              ? children.some(child => child.starred) || action.payload.starred\n              : action.payload.starred;\n          state.mailDetail = { ...state.mailDetail, starred: action.payload.starred, children, has_starred_children };\n        } else if (children && children.length > 0) {\n          children.forEach((child, index) => {\n            if (listOfIDs.includes(child.id.toString())) {\n              children[index] = { ...child, starred: action.payload.starred };\n            }\n          });\n          const has_starred_children = children.some(child => child.starred) || state.mailDetail.starred;\n          state.mailDetail = { ...state.mailDetail, children, has_starred_children };\n          if (state.mailDetail.id in mailMap) {\n            mailMap[state.mailDetail.id] = { ...mailMap[state.mailDetail.id], has_starred_children };\n          }\n        }\n      }\n\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      const curMailFolder = folderMap.get(state.currentFolder);\n      state.total_mail_count = curMailFolder ? curMailFolder.total_mail_count : 0;\n\n      return {\n        ...state,\n        mails,\n        mailMap,\n        folderMap,\n        inProgress: false,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.DELETE_MAIL_FOR_ALL_SUCCESS:\n    case MailActionTypes.DELETE_MAIL_SUCCESS: {\n      const listOfIDs = action.payload.ids.split(',');\n      const folderMap = new Map(state.folderMap);\n      const mailMap = { ...state.mailMap };\n      const folder_keys = [MailFolderType.DRAFT, MailFolderType.TRASH, MailFolderType.SPAM];\n      folder_keys.forEach(key => {\n        if (folderMap.has(key)) {\n          const folderInfo = folderMap.get(key);\n          folderInfo.mails = folderInfo.mails.filter(mailID => !listOfIDs.includes(mailID.toString()));\n          folderInfo.total_mail_count = folderInfo.total_mail_count > 0 ? folderInfo.total_mail_count - 1 : 0;\n          folderInfo.is_dirty = true;\n          folderMap.set(key, folderInfo);\n        }\n      });\n      if (action.payload.isMailDetailPage) {\n        return {\n          ...state,\n          folderMap,\n        };\n      }\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      const curMailFolder = folderMap.get(state.currentFolder);\n      state.total_mail_count = curMailFolder ? curMailFolder.total_mail_count : 0;\n      if (\n        state.mailDetail &&\n        state.mailDetail.children &&\n        state.mailDetail.children.some(child => listOfIDs.includes(child.id.toString()))\n      ) {\n        state.mailDetail.children = state.mailDetail.children.filter(child => !listOfIDs.includes(child.id.toString()));\n        state.mailDetail.children_count = state.mailDetail.children.length;\n      }\n\n      return {\n        ...state,\n        mails,\n        folderMap,\n        mailMap,\n        inProgress: false,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.GET_MAIL_DETAIL_SUCCESS: {\n      const { decryptedAttachmentsMap } = state;\n      const mail: Mail = action.payload;\n      if (mail) {\n        if (mail.is_subject_encrypted && state.decryptedSubjects[mail.id]) {\n          mail.is_subject_encrypted = false;\n          mail.subject = state.decryptedSubjects[mail.id];\n        }\n        if (\n          mail.encryption_type === PGPEncryptionType.PGP_MIME &&\n          decryptedAttachmentsMap.has(mail.id) &&\n          decryptedAttachmentsMap.get(mail.id).length > 0\n        ) {\n          mail.attachments = decryptedAttachmentsMap.get(mail.id);\n        } else {\n          mail.attachments = transformFilename(mail.attachments);\n        }\n        if (mail.children && mail.children.length > 0) {\n          mail.children.forEach(item => {\n            if (\n              item.encryption_type === PGPEncryptionType.PGP_MIME &&\n              decryptedAttachmentsMap.has(item.id) &&\n              decryptedAttachmentsMap.get(item.id).length > 0\n            ) {\n              item.attachments = decryptedAttachmentsMap.get(item.id);\n            } else {\n              item.attachments = transformFilename(item.attachments);\n            }\n          });\n        }\n      }\n      return {\n        ...state,\n        mailDetail: action.payload,\n        mailDetailLoaded: true,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.GET_MAIL_DETAIL_FAILURE: {\n      return {\n        ...state,\n        mailDetailLoaded: true,\n      };\n    }\n\n    case MailActionTypes.GET_MAIL_DETAIL: {\n      return {\n        ...state,\n        mailDetail: null,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.CLEAR_MAILS_ON_CONVERSATION_MODE_CHANGE: {\n      return {\n        ...state,\n        mails: [],\n        total_mail_count: 0,\n        mailDetail: null,\n        loaded: false,\n        unreadMailsCount: { inbox: 0 },\n        noUnreadCountChange: true,\n        canGetUnreadCount: true,\n        mailMap: {},\n        folderMap: new Map(),\n      };\n    }\n\n    case MailActionTypes.CLEAR_MAILS_ON_LOGOUT: {\n      return {\n        mails: [],\n        total_mail_count: 0,\n        mailDetail: null,\n        loaded: false,\n        starredFolderCount: 0,\n        decryptedContents: {},\n        unreadMailsCount: { inbox: 0 },\n        noUnreadCountChange: true,\n        canGetUnreadCount: true,\n        decryptedSubjects: {},\n        customFolderMessageCount: [],\n        mailMap: {},\n        folderMap: new Map(),\n      };\n    }\n\n    case MailActionTypes.CLEAR_MAIL_DETAIL: {\n      return {\n        ...state,\n        mailDetail: null,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.UPDATE_MAIL_DETAIL_CHILDREN: {\n      if (state.mailDetail) {\n        if (action.payload.last_action_data.last_action) {\n          if (state.mailDetail.id === action.payload.last_action_data.last_action_parent_id) {\n            state.mailDetail.last_action = action.payload.last_action_data.last_action;\n          } else {\n            state.mailDetail.children = state.mailDetail.children.map(mail => {\n              if (mail.id === action.payload.last_action_data.last_action_parent_id) {\n                mail.last_action = action.payload.last_action_data.last_action;\n              }\n              return mail;\n            });\n          }\n        }\n        if (action.payload.parent === state.mailDetail.id) {\n          state.mailDetail.children = state.mailDetail.children || [];\n          state.mailDetail.children = state.mailDetail.children.filter(child => !(child.id === action.payload.id));\n          state.mailDetail.children = [...state.mailDetail.children, action.payload];\n          state.mailDetail.children_count = state.mailDetail.children.length;\n        }\n      }\n      return { ...state, noUnreadCountChange: true };\n    }\n\n    case MailActionTypes.SET_CURRENT_FOLDER: {\n      const { folderMap } = state;\n      const { mailMap } = state;\n      const mails = prepareMails(action.payload, folderMap, state.mailMap);\n      const total_mail_count = folderMap.has(action.payload) ? folderMap.get(action.payload).total_mail_count : 0;\n      Object.keys(mailMap).forEach(key => {\n        const mail = mailMap[key];\n        mail.marked = false;\n        mailMap[key] = { ...mail };\n      });\n      mails.forEach(mail => {\n        if (state.decryptedSubjects[mail.id]) {\n          mail.subject = state.decryptedSubjects[mail.id];\n          mail.is_subject_encrypted = false;\n        }\n      });\n      return {\n        ...state,\n        mails,\n        mailMap,\n        total_mail_count,\n        currentFolder: action.payload,\n      };\n    }\n\n    case MailActionTypes.UPDATE_PGP_DECRYPTED_CONTENT: {\n      if (action.payload.isDecryptingAllSubjects) {\n        if (!action.payload.isPGPInProgress) {\n          state.mails = state.mails.map(mail => {\n            if (mail.id === action.payload.id) {\n              mail.subject = action.payload.decryptedContent.subject;\n              mail.is_subject_encrypted = false;\n            }\n            return mail;\n          });\n          state.decryptedSubjects[action.payload.id] = action.payload.decryptedContent.subject;\n        }\n        return { ...state };\n      }\n      const { decryptedContents } = state;\n      let decryptedContent: SecureContent = decryptedContents[action.payload.id] || {};\n      decryptedContent = {\n        ...decryptedContent,\n        id: action.payload.id,\n        content: action.payload.decryptedContent.content,\n        content_plain: action.payload.decryptedContent.content_plain,\n        subject: action.payload.decryptedContent.subject,\n        inProgress: action.payload.isPGPInProgress,\n        incomingHeaders: action.payload.decryptedContent.incomingHeaders,\n        decryptError: action.payload.decryptError,\n      };\n      decryptedContents[action.payload.id] = decryptedContent;\n      return { ...state, decryptedContents, noUnreadCountChange: true };\n    }\n\n    case MailActionTypes.UPDATE_CURRENT_FOLDER: {\n      let mailMap = { ...state.mailMap };\n      const folderMap = new Map(state.folderMap);\n      const newMail = { ...action.payload };\n      // Update mail map\n      mailMap = updateMailMap(mailMap, [newMail]);\n      if (newMail.parent) {\n        const mailIDs = Object.keys(mailMap);\n        mailIDs.forEach(mailID => {\n          if (mailMap[mailID].id === newMail.parent) {\n            mailMap[mailID].has_children = true;\n            mailMap[mailID].children_count = mailMap[mailID].children_count + 1;\n            if (mailMap[mailID].children_folder_info) {\n              mailMap[mailID].children_folder_info = {\n                ...mailMap[mailID].children_folder_info,\n                non_trash_children_count: mailMap[mailID].children_folder_info.non_trash_children_count + 1,\n              };\n            } else {\n              mailMap[mailID].children_folder_info = {\n                trash_children_count: 0,\n                non_trash_children_count: 1,\n              };\n            }\n          }\n        });\n      }\n      // update target folder map\n      if (folderMap.has(newMail.folder)) {\n        const targetFolderMap = folderMap.get(newMail.folder);\n        const basicFolderState = getUpdatesFolderMap([newMail], targetFolderMap, state.pageLimit);\n        folderMap.set(newMail.folder, basicFolderState);\n      }\n      const mails = prepareMails(state.currentFolder, folderMap, mailMap);\n      if (state.currentFolder) {\n        const curMailFolder = folderMap.get(state.currentFolder);\n        state.total_mail_count = curMailFolder ? curMailFolder.total_mail_count : 0;\n      }\n      return {\n        ...state,\n        mails,\n        mailMap,\n        folderMap,\n        noUnreadCountChange: true,\n      };\n    }\n\n    case MailActionTypes.EMPTY_FOLDER: {\n      return { ...state, inProgress: true, noUnreadCountChange: true };\n    }\n\n    case MailActionTypes.EMPTY_FOLDER_SUCCESS: {\n      if (state.folderMap.has(action.payload.folder)) {\n        state.folderMap.delete(action.payload.folder);\n      }\n      return { ...state, mails: [], inProgress: false };\n    }\n\n    case MailActionTypes.EMPTY_FOLDER_FAILURE: {\n      return { ...state, inProgress: false };\n    }\n\n    case MailActionTypes.MOVE_TAB: {\n      return { ...state, currentSettingsTab: action.payload };\n    }\n\n    case MailActionTypes.EMPTY_ONLY_FOLDER: {\n      if (state.folderMap.has(action.payload.folder)) {\n        state.folderMap.delete(action.payload.folder);\n      }\n      return { ...state, inProgress: false };\n    }\n\n    case MailActionTypes.SET_ATTACHMENTS_FOR_PGP_MIME: {\n      const { mailDetail, mailMap, decryptedAttachmentsMap } = state;\n      const { attachments, messageID } = action.payload;\n      if (mailDetail) {\n        if (messageID === mailDetail.id) {\n          mailDetail.attachments = attachments;\n        } else if (mailDetail.children?.length > 0) {\n          mailDetail.children.forEach(child => {\n            if (child.id === messageID) {\n              child.attachments = attachments;\n            }\n          });\n        }\n      }\n      Object.keys(mailMap).forEach(mailID => {\n        if (mailID === messageID.toString()) {\n          mailMap[mailID].attachments = attachments;\n        }\n      });\n      decryptedAttachmentsMap.set(messageID, attachments);\n      return { ...state, mailDetail, mailMap, decryptedAttachmentsMap };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { MailActions, MailActionTypes } from '../actions';\nimport { MailBoxesState, MailboxKey } from '../datatypes';\nimport { Mailbox } from '../models/mail.model';\nimport { SafePipe } from '../../shared/pipes/safe.pipe';\n\nexport function reducer(\n  state: MailBoxesState = {\n    mailboxes: [],\n    currentMailbox: null,\n    decryptKeyInProgress: false,\n    encryptionInProgress: false,\n    mailboxKeysMap: new Map(),\n  },\n  action: MailActions,\n): MailBoxesState {\n  switch (action.type) {\n    case MailActionTypes.GET_MAILBOXES: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n    case MailActionTypes.GET_MAILBOXES_SUCCESS: {\n      const mailboxes = action.payload;\n      // Filling up primary keys for multiple keys\n      const mailboxKeysMap = new Map();\n      mailboxes.forEach((mailbox: Mailbox) => {\n        const primaryKey: MailboxKey = {};\n        primaryKey.public_key = mailbox.public_key;\n        primaryKey.private_key = mailbox.private_key;\n        primaryKey.fingerprint = mailbox.fingerprint;\n        primaryKey.key_type = mailbox.key_type;\n        primaryKey.is_primary = true;\n        if (mailboxKeysMap.has(mailbox.id) && mailboxKeysMap.get(mailbox.id).length > 0) {\n          const temporaryKeys = mailboxKeysMap.get(mailbox.id).filter((key: MailboxKey, index: number) => index !== 0);\n          mailboxKeysMap.set(mailbox.id, [primaryKey, ...temporaryKeys]);\n        } else {\n          mailboxKeysMap.set(mailbox.id, [primaryKey]);\n        }\n      });\n      return {\n        ...state,\n        mailboxes: action.payload.map((item: any, index: number) => {\n          item.sort_order = item.sort_order ? item.sort_order : index + 1;\n          item.display_name = SafePipe.processSanitization(item.display_name, false);\n          item.signature = SafePipe.processSanitization(item.signature, false);\n          return item;\n        }),\n        mailboxKeysMap,\n        inProgress: false,\n        currentMailbox: action.payload.find((item: Mailbox) => item.is_enabled),\n      };\n    }\n\n    case MailActionTypes.SET_DECRYPT_INPROGRESS: {\n      return {\n        ...state,\n        decryptKeyInProgress: action.payload,\n      };\n    }\n\n    case MailActionTypes.SET_DECRYPTED_KEY: {\n      return {\n        ...state,\n        decryptKeyInProgress: false,\n        decryptedKey: action.payload.decryptedKey,\n      };\n    }\n\n    case MailActionTypes.SET_CURRENT_MAILBOX: {\n      return {\n        ...state,\n        currentMailbox: action.payload,\n      };\n    }\n\n    case MailActionTypes.MAILBOX_SETTINGS_UPDATE: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case MailActionTypes.MAILBOX_SETTINGS_UPDATE_SUCCESS: {\n      const updatedCurrentMailBox: Mailbox = action.payload;\n      updatedCurrentMailBox.inProgress = false;\n      let { mailboxes } = state;\n\n      mailboxes = mailboxes.map(mailbox => {\n        if (mailbox.id === updatedCurrentMailBox.id) {\n          return { ...updatedCurrentMailBox };\n        }\n        return mailbox;\n      });\n\n      if (updatedCurrentMailBox.id === state.currentMailbox.id) {\n        state.currentMailbox = { ...updatedCurrentMailBox };\n      }\n\n      return {\n        ...state,\n        mailboxes,\n        inProgress: false,\n      };\n    }\n\n    case MailActionTypes.MAILBOX_SETTINGS_UPDATE_FAILURE: {\n      return {\n        ...state,\n        mailboxes: state.mailboxes.map(mailbox => {\n          if (mailbox.id === action.payload.id) {\n            mailbox.inProgress = false;\n          }\n          return mailbox;\n        }),\n      };\n    }\n\n    case MailActionTypes.CREATE_MAILBOX: {\n      return { ...state, inProgress: true };\n    }\n\n    case MailActionTypes.CREATE_MAILBOX_SUCCESS: {\n      state.mailboxes = [...state.mailboxes, action.payload];\n      return { ...state, inProgress: false };\n    }\n\n    case MailActionTypes.CREATE_MAILBOX_FAILURE: {\n      return { ...state, inProgress: false };\n    }\n\n    case MailActionTypes.SET_DEFAULT_MAILBOX_SUCCESS: {\n      const updatedCurrentMailBox: Mailbox = action.payload;\n      const previousDefaultMailBox = state.mailboxes.find(mailbox => !!mailbox.is_default);\n      let { mailboxes } = state;\n      mailboxes = mailboxes.map(mailbox => {\n        if (mailbox.id === updatedCurrentMailBox.id) {\n          return { ...updatedCurrentMailBox };\n        }\n        if (mailbox.id === previousDefaultMailBox.id) {\n          return { ...mailbox, is_default: false };\n        }\n        return mailbox;\n      });\n\n      if (updatedCurrentMailBox.id === state.currentMailbox.id) {\n        state.currentMailbox = { ...updatedCurrentMailBox };\n      } else if (previousDefaultMailBox.id === state.currentMailbox.id) {\n        state.currentMailbox = { ...state.currentMailbox, is_default: false };\n      }\n\n      return {\n        ...state,\n        mailboxes,\n      };\n    }\n\n    case MailActionTypes.UPDATE_MAILBOX_ORDER: {\n      return { ...state, isUpdatingOrder: true };\n    }\n\n    case MailActionTypes.UPDATE_MAILBOX_ORDER_SUCCESS: {\n      return {\n        ...state,\n        mailboxes: action.payload.mailboxes,\n        currentMailbox: action.payload.mailboxes[0],\n        isUpdatingOrder: false,\n      };\n    }\n\n    case MailActionTypes.DELETE_MAILBOX_SUCCESS: {\n      return { ...state, mailboxes: state.mailboxes.filter(mailbox => mailbox.id !== action.payload.id) };\n    }\n\n    case MailActionTypes.FETCH_MAILBOX_KEYS: {\n      return {\n        ...state,\n        mailboxKeyInProgress: true,\n      };\n    }\n\n    case MailActionTypes.FETCH_MAILBOX_KEYS_SUCCESS: {\n      const { mailboxKeysMap } = state;\n      if (action.payload.updateKeyMap) {\n        const { keyMap } = action.payload;\n        [...mailboxKeysMap.keys()].forEach(mailboxId => {\n          if (mailboxKeysMap.get(mailboxId).length > 0 && keyMap[mailboxId] && keyMap[mailboxId].length > 0) {\n            const updatedKeys = mailboxKeysMap.get(mailboxId).map((key, index) => {\n              if (keyMap[mailboxId].length > index + 1) {\n                return {\n                  ...key,\n                  private_key: keyMap[mailboxId][index].private_key,\n                  public_key: keyMap[mailboxId][index].public_key,\n                };\n              }\n              return key;\n            });\n            mailboxKeysMap.set(mailboxId, updatedKeys);\n          }\n        });\n        return {\n          ...state,\n          mailboxKeysMap,\n          mailboxKeyInProgress: false,\n        };\n      }\n      const mailboxKeys = action.payload.results;\n      const { mailboxes } = state;\n      if (mailboxKeys && mailboxKeys.length > 0) {\n        mailboxes.forEach((mailbox: Mailbox) => {\n          const specificKeys = mailboxKeys.filter((key: MailboxKey) => key.mailbox === mailbox.id);\n          if (mailboxKeysMap.has(mailbox.id)) {\n            const originKeys = mailboxKeysMap.get(mailbox.id);\n            mailboxKeysMap.set(mailbox.id, [...originKeys, ...specificKeys]);\n          } else {\n            mailboxKeysMap.set(mailbox.id, specificKeys);\n          }\n        });\n      }\n      return {\n        ...state,\n        mailboxKeysMap,\n        mailboxKeyInProgress: false,\n      };\n    }\n\n    case MailActionTypes.FETCH_MAILBOX_KEYS_FAILURE: {\n      return {\n        ...state,\n        mailboxKeyInProgress: false,\n      };\n    }\n\n    case MailActionTypes.ADD_MAILBOX_KEYS: {\n      return {\n        ...state,\n        mailboxKeyInProgress: true,\n        mailboxKeyFailure: false,\n      };\n    }\n\n    case MailActionTypes.ADD_MAILBOX_KEYS_SUCCESS: {\n      const newKey = action.payload;\n      const { mailboxKeysMap } = state;\n      if (mailboxKeysMap.has(newKey.mailbox)) {\n        const originKeys = mailboxKeysMap.get(newKey.mailbox);\n        mailboxKeysMap.set(newKey.mailbox, [...originKeys, newKey]);\n      } else {\n        mailboxKeysMap.set(newKey.mailbox, [newKey]);\n      }\n      return {\n        ...state,\n        mailboxKeysMap,\n        mailboxKeyInProgress: false,\n        mailboxKeyFailure: false,\n      };\n    }\n\n    case MailActionTypes.ADD_MAILBOX_KEYS_FAILURE: {\n      return {\n        ...state,\n        mailboxKeyInProgress: false,\n        mailboxKeyFailure: true,\n      };\n    }\n\n    case MailActionTypes.DELETE_MAILBOX_KEYS: {\n      return {\n        ...state,\n        mailboxKeyInProgress: true,\n        mailboxKeyFailure: false,\n      };\n    }\n\n    case MailActionTypes.DELETE_MAILBOX_KEYS_SUCCESS: {\n      const deletedKey = action.payload;\n      const { mailboxKeysMap } = state;\n      if (mailboxKeysMap.has(deletedKey.mailbox)) {\n        const originKeys = mailboxKeysMap.get(deletedKey.mailbox);\n        mailboxKeysMap.set(\n          deletedKey.mailbox,\n          originKeys.filter(key => deletedKey.id !== key.id),\n        );\n      }\n      return {\n        ...state,\n        mailboxKeysMap,\n        mailboxKeyInProgress: false,\n        mailboxKeyFailure: false,\n      };\n    }\n\n    case MailActionTypes.DELETE_MAILBOX_KEYS_FAILURE: {\n      return {\n        ...state,\n        mailboxKeyFailure: true,\n        mailboxKeyInProgress: false,\n      };\n    }\n\n    case MailActionTypes.SET_PRIMARY_MAILBOX_KEYS: {\n      return {\n        ...state,\n        mailboxKeyInProgress: true,\n      };\n    }\n\n    case MailActionTypes.SET_PRIMARY_MAILBOX_KEYS_SUCCESS: {\n      const newPrimaryKey: MailboxKey = action.payload;\n      // Update mailbox to set key info\n      const { mailboxes } = state;\n      let currentPrimaryMailbox: Mailbox;\n      mailboxes.forEach(mailbox => {\n        if (mailbox.id === newPrimaryKey.mailbox) {\n          currentPrimaryMailbox = { ...mailbox };\n          mailbox.public_key = newPrimaryKey.public_key;\n          mailbox.private_key = newPrimaryKey.private_key;\n          mailbox.fingerprint = newPrimaryKey.fingerprint;\n          mailbox.key_type = newPrimaryKey.key_type;\n        }\n      });\n\n      // Update mailbox key list\n      const { mailboxKeysMap } = state;\n      if (mailboxKeysMap.has(newPrimaryKey.mailbox) && mailboxKeysMap.get(newPrimaryKey.mailbox).length > 0) {\n        mailboxKeysMap.get(newPrimaryKey.mailbox).forEach((key, index) => {\n          if (index === 0) {\n            key.private_key = newPrimaryKey.private_key;\n            key.public_key = newPrimaryKey.public_key;\n            key.fingerprint = newPrimaryKey.fingerprint;\n            key.key_type = newPrimaryKey.key_type;\n          }\n          if (key.id === newPrimaryKey.id) {\n            key.private_key = currentPrimaryMailbox.private_key;\n            key.public_key = currentPrimaryMailbox.public_key;\n            key.fingerprint = currentPrimaryMailbox.fingerprint;\n            key.key_type = currentPrimaryMailbox.key_type;\n          }\n        });\n      }\n      return {\n        ...state,\n        mailboxes,\n        mailboxKeysMap,\n        mailboxKeyInProgress: false,\n      };\n    }\n\n    case MailActionTypes.SET_PRIMARY_MAILBOX_KEYS_FAILURE: {\n      return {\n        ...state,\n        mailboxKeyInProgress: false,\n      };\n    }\n\n    case MailActionTypes.RESET_MAILBOX_KEY_OPERATION_STATE: {\n      return {\n        ...state,\n        mailboxKeyInProgress: false,\n        mailboxKeyFailure: false,\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { SearchActionAll, SearchActionTypes } from '../actions/search.action';\n\nexport interface SearchState {\n  searchText: string;\n}\n\nexport const initialState: SearchState = { searchText: '' };\n\nexport function reducer(state = initialState, action: SearchActionAll): SearchState {\n  switch (action.type) {\n    case SearchActionTypes.CLEAR_SEARCH: {\n      return { ...state };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { SecureMessageActions, SecureMessageActionTypes } from '../actions';\nimport { SecureMessageState } from '../datatypes';\n\nexport function reducer(\n  state: SecureMessageState = {\n    message: null,\n    inProgress: false,\n  },\n  action: SecureMessageActions,\n): SecureMessageState {\n  switch (action.type) {\n    case SecureMessageActionTypes.GET_MESSAGE_SUCCESS: {\n      return { ...state, message: action.payload, inProgress: false, errorMessage: null };\n    }\n    case SecureMessageActionTypes.GET_MESSAGE_FAILURE: {\n      return { ...state, message: null, inProgress: false, errorMessage: 'Unable to load message.' };\n    }\n    case SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_KEY: {\n      return {\n        ...state,\n        decryptedKey: action.payload.decryptedKey,\n        isKeyDecryptionInProgress: action.payload.inProgress,\n        errorMessage: action.payload.error ? 'Unable to decrypt message. Please try again.' : null,\n      };\n    }\n    case SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_CONTENT: {\n      return {\n        ...state,\n        decryptedContent: action.payload.decryptedContent,\n        isContentDecryptionInProgress: action.payload.inProgress,\n      };\n    }\n    case SecureMessageActionTypes.UPDATE_SECURE_MESSAGE_ENCRYPTED_CONTENT: {\n      return {\n        ...state,\n        isEncryptionInProgress: action.payload.inProgress,\n        encryptedContent: action.payload.encryptedContent,\n      };\n    }\n    case SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY: {\n      return { ...state, inProgress: true, errorMessage: null };\n    }\n    case SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY_SUCCESS: {\n      return { ...state, inProgress: false, errorMessage: null };\n    }\n    case SecureMessageActionTypes.SEND_SECURE_MESSAGE_REPLY_FAILURE: {\n      return { ...state, inProgress: false, errorMessage: 'Unable to send secure reply.' };\n    }\n    case SecureMessageActionTypes.GET_SECURE_MESSAGE_USERS_KEYS: {\n      return { ...state, inProgress: true, getUserKeyInProgress: true };\n    }\n    case SecureMessageActionTypes.GET_SECURE_MESSAGE_USERS_KEYS_SUCCESS: {\n      return { ...state, inProgress: false, getUserKeyInProgress: false, usersKeys: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { TimezonesState } from '../datatypes';\nimport { TimezoneActionAll, TimezoneActionTypes } from '../actions/timezone.action';\n\nexport function reducer(state: any = { timezones: [] }, action: TimezoneActionAll): TimezonesState {\n  switch (action.type) {\n    case TimezoneActionTypes.TIMEZONE_GET_SUCCESS: {\n      return {\n        ...state,\n        timezones: action.payload,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import { UsersActionAll, UsersActionTypes } from '../actions';\nimport { Domain, PromoCode, Settings, UserState } from '../datatypes';\nimport { SafePipe } from '../../shared/pipes/safe.pipe';\n\nexport const initialState: UserState = {\n  username: null,\n  id: null,\n  isPrime: false,\n  whiteList: [],\n  blackList: [],\n  settings: new Settings(),\n  membership: {},\n  mailboxes: [],\n  payment_transaction: {},\n  customFolders: [],\n  filters: [],\n  customDomains: [],\n  currentCreationStep: 0,\n  invoices: [],\n  promoCode: new PromoCode(),\n  inviteCodes: [],\n  notifications: null,\n  cards: [],\n};\n\nexport function reducer(state = initialState, action: UsersActionAll): UserState {\n  switch (action.type) {\n    case UsersActionTypes.ACCOUNTS_READ_SUCCESS: {\n      return { ...state, id: action.payload.id, username: action.payload.username };\n    }\n    case UsersActionTypes.WHITELIST_READ_SUCCESS: {\n      return { ...state, whiteList: action.payload };\n    }\n\n    case UsersActionTypes.CARD_READ_SUCCESS: {\n      const cardsPayload = action.payload.cards;\n      const cards: any[] = [];\n      cardsPayload.forEach((card: any) => {\n        cards.push(card);\n      });\n      return {\n        ...state,\n        cards,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CARD_ADD_SUCCESS: {\n      return {\n        ...state,\n        cards: [...state.cards, action.payload],\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CARD_ADD_ERROR: {\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CARD_DELETE_SUCCESS: {\n      let { cards } = state;\n      cards = cards.filter(card => action.payload !== card.id);\n      return {\n        ...state,\n        cards,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CARD_MAKE_PRIMARY_SUCCESS: {\n      const { cards } = state;\n      cards.forEach(card => (card.is_primary = action.payload === card.id));\n      return {\n        ...state,\n        cards,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CARD_ADD:\n    case UsersActionTypes.CARD_DELETE:\n    case UsersActionTypes.CARD_MAKE_PRIMARY: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case UsersActionTypes.WHITELIST_ADD:\n    case UsersActionTypes.BLACKLIST_ADD:\n    case UsersActionTypes.WHITELIST_DELETE:\n    case UsersActionTypes.BLACKLIST_DELETE: {\n      return { ...state, inProgress: true, isError: false, error: '' };\n    }\n\n    case UsersActionTypes.WHITELIST_ADD_SUCCESS: {\n      if (!state.whiteList) {\n        state.whiteList = [];\n      }\n      return {\n        ...state,\n        whiteList: state.whiteList.concat(action.payload),\n        inProgress: false,\n        isError: false,\n        error: '',\n      };\n    }\n\n    case UsersActionTypes.BLACKLIST_ADD_SUCCESS: {\n      if (!state.blackList) {\n        state.blackList = [];\n      }\n      return {\n        ...state,\n        blackList: state.blackList.concat(action.payload),\n        inProgress: false,\n        isError: false,\n      };\n    }\n\n    case UsersActionTypes.WHITELIST_DELETE_SUCCESS: {\n      state.whiteList.splice(state.whiteList.indexOf(state.whiteList.find(item => item.id === action.payload)), 1);\n      return {\n        ...state,\n        inProgress: false,\n        isError: false,\n        error: '',\n      };\n    }\n\n    case UsersActionTypes.BLACKLIST_DELETE_SUCCESS: {\n      state.blackList.splice(state.blackList.indexOf(state.blackList.find(item => item.id === action.payload)), 1);\n      return {\n        ...state,\n        inProgress: false,\n        isError: false,\n        error: '',\n      };\n    }\n\n    case UsersActionTypes.WHITELIST_ADD_ERROR:\n    case UsersActionTypes.BLACKLIST_ADD_ERROR: {\n      return {\n        ...state,\n        inProgress: false,\n        isError: true,\n        error: action.payload,\n      };\n    }\n\n    case UsersActionTypes.BLACKLIST_READ_SUCCESS: {\n      return { ...state, blackList: action.payload };\n    }\n\n    case UsersActionTypes.ACCOUNT_DETAILS_GET: {\n      return { ...state, isLoaded: false };\n    }\n    case UsersActionTypes.ACCOUNT_DETAILS_GET_SUCCESS: {\n      // Sanitize auto responder msg\n      if (action.payload.autoresponder && action.payload.autoresponder.autoresponder_message) {\n        action.payload.autoresponder.autoresponder_message = SafePipe.processSanitization(\n          action.payload.autoresponder.autoresponder_message,\n          false,\n        );\n      }\n      if (action.payload.autoresponder && action.payload.autoresponder.vacationautoresponder_message) {\n        action.payload.autoresponder.vacationautoresponder_message = SafePipe.processSanitization(\n          action.payload.autoresponder.vacationautoresponder_message,\n          false,\n        );\n      }\n      return {\n        ...state,\n        id: action.payload.id,\n        username: action.payload.username,\n        isPrime: action.payload.is_prime,\n        joinedDate: action.payload.joined_date,\n        settings: action.payload.settings,\n        mailboxes: action.payload.mailboxes.map((item: any, index: number) => {\n          item.sort_order = item.sort_order || index + 1;\n          return item;\n        }),\n        payment_transaction: action.payload.payment_transaction ? action.payload.payment_transaction : {},\n        customFolders: action.payload.custom_folders.map((item: any, index: number) => {\n          item.sort_order = item.sort_order || index + 1;\n          return item;\n        }),\n        autoresponder: action.payload.autoresponder,\n        isLoaded: true,\n        has_notification: action.payload.has_notification,\n      };\n    }\n\n    case UsersActionTypes.SETTINGS_UPDATE_SUCCESS: {\n      return {\n        ...state,\n        settings: action.payload,\n      };\n    }\n\n    case UsersActionTypes.SETTINGS_UPDATE_USED_STORAGE: {\n      return {\n        ...state,\n        settings: { ...state.settings, ...action.payload },\n      };\n    }\n\n    case UsersActionTypes.MEMBERSHIP_UPDATE: {\n      return { ...state, membership: action.payload };\n    }\n\n    case UsersActionTypes.CREATE_FOLDER: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case UsersActionTypes.CREATE_FOLDER_SUCCESS: {\n      let index = -1;\n      action.payload.sort_order = action.payload.sort_order || state.customDomains.length;\n      state.customFolders.forEach((folder, i) => {\n        if (folder.id === action.payload.id) {\n          index = i;\n        }\n      });\n      if (index > -1) {\n        state.customFolders[index] = action.payload;\n      } else {\n        state.customFolders = [...state.customFolders, action.payload];\n      }\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.CREATE_FOLDER_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.DELETE_FOLDER: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case UsersActionTypes.DELETE_FOLDER_SUCCESS: {\n      state.customFolders = state.customFolders.filter(folder => folder.id !== action.payload.id);\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.UPDATE_FOLDER_ORDER: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case UsersActionTypes.UPDATE_FOLDER_ORDER_SUCCESS: {\n      return {\n        ...state,\n        inProgress: false,\n        customFolders: action.payload.folders,\n      };\n    }\n\n    case UsersActionTypes.GET_FILTERS_SUCCESS: {\n      return { ...state, filters: action.payload };\n    }\n\n    case UsersActionTypes.CREATE_FILTER:\n    case UsersActionTypes.UPDATE_FILTER:\n    case UsersActionTypes.DELETE_FILTER:\n    case UsersActionTypes.UPDATE_FILTER_ORDER: {\n      return { ...state, inProgress: true, filtersError: null };\n    }\n\n    case UsersActionTypes.CREATE_FILTER_SUCCESS: {\n      state.filters = [...state.filters, action.payload];\n      return { ...state, inProgress: false, filtersError: null };\n    }\n\n    case UsersActionTypes.UPDATE_FILTER_SUCCESS: {\n      state.filters = state.filters.map(filter => {\n        if (filter.id === action.payload.id) {\n          return { ...action.payload };\n        }\n        return filter;\n      });\n      return { ...state, inProgress: false, filtersError: null };\n    }\n\n    case UsersActionTypes.UPDATE_FILTER_ORDER_SUCCESS: {\n      state.filters = state.filters.map(filter => {\n        if (filter.id === action.payload.id) {\n          return { ...action.payload };\n        }\n        return filter;\n      });\n      return { ...state, inProgress: false, filtersError: null };\n    }\n\n    case UsersActionTypes.DELETE_FILTER_SUCCESS: {\n      state.filters = state.filters.filter(filter => filter.id !== action.payload.id);\n      return { ...state, inProgress: false, filtersError: null };\n    }\n\n    case UsersActionTypes.CREATE_FILTER_FAILURE:\n    case UsersActionTypes.UPDATE_FILTER_FAILURE:\n    case UsersActionTypes.DELETE_FILTER_FAILURE:\n    case UsersActionTypes.UPDATE_FILTER_ORDER_FAILURE: {\n      const error = Object.keys(action.payload)\n        .map(key => `${key}: ${action.payload[key]}`)\n        .join(', ');\n      return { ...state, inProgress: false, filtersError: error };\n    }\n\n    case UsersActionTypes.GET_DOMAINS: {\n      return {\n        ...state,\n        inProgress: true,\n        isError: false,\n        customDomainsLoaded: false,\n        newCustomDomainError: null,\n      };\n    }\n    case UsersActionTypes.GET_DOMAINS_SUCCESS: {\n      return {\n        ...state,\n        customDomains: action.payload,\n        customDomainsLoaded: true,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.READ_DOMAIN:\n    case UsersActionTypes.DELETE_DOMAIN:\n    case UsersActionTypes.VERIFY_DOMAIN: {\n      return {\n        ...state,\n        inProgress: true,\n        isError: false,\n        error: '',\n        newCustomDomainError: null,\n        currentCreationStep: action.payload.currentStep,\n      };\n    }\n\n    case UsersActionTypes.CREATE_DOMAIN: {\n      return {\n        ...state,\n        inProgress: true,\n        isError: false,\n        error: '',\n        newCustomDomainError: null,\n        currentCreationStep: 0,\n      };\n    }\n\n    case UsersActionTypes.UPDATE_DOMAIN: {\n      return {\n        ...state,\n        inProgress: true,\n      };\n    }\n\n    case UsersActionTypes.UPDATE_DOMAIN_SUCCESS:\n    case UsersActionTypes.UPDATE_DOMAIN_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.READ_DOMAIN_SUCCESS: {\n      return {\n        ...state,\n        inProgress: false,\n        isError: false,\n        newCustomDomain: action.payload,\n      };\n    }\n\n    case UsersActionTypes.VERIFY_DOMAIN_SUCCESS: {\n      const domain: Domain = action.payload.res;\n      let isError = false;\n      let { step } = action.payload;\n      if (domain.is_domain_verified) {\n        if (action.payload.gotoNextStep) {\n          step++;\n        }\n      } else {\n        isError = true;\n      }\n      return {\n        ...state,\n        customDomains: action.payload.reverify\n          ? state.customDomains.map(item => {\n              if (item.id === domain.id) {\n                return domain;\n              }\n              return item;\n            })\n          : state.customDomains,\n        isError,\n        inProgress: false,\n        newCustomDomain: action.payload.res,\n        currentCreationStep: step,\n      };\n    }\n\n    case UsersActionTypes.CREATE_DOMAIN_SUCCESS: {\n      state.customDomains = [...state.customDomains, action.payload];\n      return {\n        ...state,\n        inProgress: false,\n        isError: false,\n        newCustomDomain: action.payload,\n        currentCreationStep: 1,\n      };\n    }\n\n    case UsersActionTypes.CREATE_DOMAIN_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n        isError: true,\n        newCustomDomainError: action.payload,\n        currentCreationStep: 0,\n      };\n    }\n\n    case UsersActionTypes.READ_DOMAIN_FAILURE:\n    case UsersActionTypes.VERIFY_DOMAIN_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n        isError: true,\n        error: Object.keys(action.payload.err)\n          .map(key => `${key}: ${action.payload.err[key]}`)\n          .join(', '),\n        currentCreationStep: action.payload.step,\n      };\n    }\n\n    case UsersActionTypes.DELETE_DOMAIN_SUCCESS: {\n      state.customDomains = state.customDomains.filter(domain => domain.id !== action.payload);\n      return {\n        ...state,\n        inProgress: false,\n      };\n    }\n\n    case UsersActionTypes.DELETE_DOMAIN_FAILURE: {\n      return {\n        ...state,\n        inProgress: false,\n        isError: true,\n        error: action.payload.detail,\n      };\n    }\n\n    case UsersActionTypes.SEND_EMAIL_FORWARDING_CODE: {\n      return { ...state, inProgress: true, emailForwardingErrorMessage: null, isForwardingVerificationCodeSent: false };\n    }\n\n    case UsersActionTypes.SEND_EMAIL_FORWARDING_CODE_SUCCESS: {\n      return { ...state, inProgress: false, emailForwardingErrorMessage: null, isForwardingVerificationCodeSent: true };\n    }\n\n    case UsersActionTypes.SEND_EMAIL_FORWARDING_CODE_FAILURE:\n    case UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE_FAILURE: {\n      return { ...state, inProgress: false, emailForwardingErrorMessage: action.payload };\n    }\n\n    case UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE: {\n      return { ...state, inProgress: true, emailForwardingErrorMessage: null, isForwardingVerificationCodeSent: true };\n    }\n\n    case UsersActionTypes.VERIFY_EMAIL_FORWARDING_CODE_SUCCESS: {\n      return { ...state, inProgress: false, emailForwardingErrorMessage: null };\n    }\n\n    case UsersActionTypes.SAVE_AUTORESPONDER: {\n      return { ...state, inProgress: true, autoresponder: action.payload, autoResponderErrorMessage: null };\n    }\n\n    case UsersActionTypes.SAVE_AUTORESPONDER_SUCCESS: {\n      return { ...state, inProgress: false, autoresponder: action.payload, autoResponderErrorMessage: null };\n    }\n\n    case UsersActionTypes.SAVE_AUTORESPONDER_FAILURE: {\n      state.autoresponder.autoresponder_active = false;\n      return { ...state, inProgress: false, autoResponderErrorMessage: action.payload };\n    }\n\n    case UsersActionTypes.GET_INVOICES: {\n      return { ...state, invoices: [], isInvoiceLoaded: false };\n    }\n\n    case UsersActionTypes.GET_INVOICES_SUCCESS: {\n      return { ...state, invoices: action.payload, isInvoiceLoaded: true };\n    }\n\n    case UsersActionTypes.GET_UPGRADE_AMOUNT: {\n      return { ...state, upgradeAmount: null };\n    }\n\n    case UsersActionTypes.GET_UPGRADE_AMOUNT_SUCCESS: {\n      return { ...state, upgradeAmount: action.payload.prorated_price / 100 };\n    }\n\n    case UsersActionTypes.VALIDATE_PROMO_CODE: {\n      return { ...state, promoCode: { ...state.promoCode, new_amount: null, is_valid: null, inProgress: true } };\n    }\n\n    case UsersActionTypes.VALIDATE_PROMO_CODE_SUCCESS: {\n      const promoCode: PromoCode = { ...state.promoCode, ...action.payload, inProgress: false };\n      promoCode.new_amount /= 100;\n      promoCode.discount_amount /= 100;\n      return { ...state, promoCode };\n    }\n\n    case UsersActionTypes.CLEAR_PROMO_CODE: {\n      return { ...state, promoCode: new PromoCode() };\n    }\n\n    case UsersActionTypes.INVITE_CODE_GET: {\n      return { ...state, inProgress: true };\n    }\n\n    case UsersActionTypes.INVITE_CODE_GET_SUCCESS: {\n      return { ...state, inProgress: false, inviteCodes: action.payload };\n    }\n\n    case UsersActionTypes.INVITE_CODE_GENERATE: {\n      return { ...state, inProgress: true };\n    }\n\n    case UsersActionTypes.INVITE_CODE_GENERATE_SUCCESS: {\n      return { ...state, inProgress: false, inviteCodes: [...state.inviteCodes, action.payload] };\n    }\n\n    case UsersActionTypes.INVITE_CODE_GENERATE_FAILURE: {\n      return { ...state, inProgress: false };\n    }\n\n    case UsersActionTypes.GET_NOTIFICATION_SUCCESS: {\n      return { ...state, notifications: action.payload };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport * as fromRouter from '@ngrx/router-store';\nimport { Injectable } from '@angular/core';\n\nimport { RouterStateUrl } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CustomSerializer implements fromRouter.RouterStateSerializer<RouterStateUrl> {\n  serialize(routerState: RouterStateSnapshot): RouterStateUrl {\n    const { url } = routerState;\n    const { queryParams } = routerState.root;\n\n    let state: ActivatedRouteSnapshot = routerState.root;\n    while (state.firstChild) {\n      state = state.firstChild;\n    }\n    const { params } = state;\n\n    return { url, queryParams, params, state };\n  }\n}\n","import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Injectable } from '@angular/core';\n\nimport { UsersService } from './users.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  constructor(private usersService: UsersService, private router: Router) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    if (this.usersService.getUserKey()) {\n      if (state.url === '/signin') {\n        this.router.navigateByUrl('/mail');\n      }\n      return true;\n    }\n    if (state.url === '/signin') {\n      return true;\n    }\n    if (state.url.includes('/mail/')) {\n      localStorage.setItem('nextPage', state.url);\n    }\n    this.router.navigateByUrl('/signin');\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport * as parseEmail from 'email-addresses';\n\nimport { Mailbox } from '../models';\nimport {\n  AppState,\n  AutocryptEncryptDetermine,\n  AutocryptEncryptDetermineForSingle,\n  AutocryptPreferEncryptType,\n  Contact,\n  ContactsState,\n  Draft,\n  GlobalPublicKey,\n  MailBoxesState,\n  UIRecommendationValue,\n} from '../datatypes';\nimport { SharedService } from './shared.service';\n\n@Injectable()\nexport class AutocryptProcessService {\n  private mailboxes: Mailbox[] = [];\n\n  private contacts: Contact[] = [];\n\n  constructor(private store: Store<AppState>, private sharedService: SharedService) {\n    this.store\n      .select(state => state.mailboxes)\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        this.mailboxes = mailBoxesState.mailboxes;\n      });\n    this.store\n      .select(state => state.contacts)\n      .subscribe((contactsState: ContactsState) => {\n        this.contacts = contactsState.contacts;\n      });\n  }\n\n  decideAutocryptDefaultEncryptionWithDraft(\n    draftMail: Draft,\n    usersKeys: Map<string, GlobalPublicKey>,\n  ): AutocryptEncryptDetermine {\n    if (draftMail.draft) {\n      const senderMailbox: Mailbox = this.mailboxes.find(mailbox => draftMail.draft.mailbox === mailbox.id);\n      const receivers: string[] = [\n        ...draftMail.draft.receiver.map(\n          receiver => (parseEmail.parseOneAddress(receiver) as parseEmail.ParsedMailbox).address,\n        ),\n        ...draftMail.draft.cc.map(cc => (parseEmail.parseOneAddress(cc) as parseEmail.ParsedMailbox).address),\n        ...draftMail.draft.bcc.map(bcc => (parseEmail.parseOneAddress(bcc) as parseEmail.ParsedMailbox).address),\n      ];\n      return this.decideAutocryptDefaultEncryption(senderMailbox, receivers, usersKeys);\n    }\n    return {\n      encryptTotally: false,\n      senderAutocryptEnabled: false,\n      senderPreferEncrypt: AutocryptPreferEncryptType.NOPREFERENCE,\n      recommendationValue: UIRecommendationValue.DISABLE,\n    };\n  }\n\n  /**\n   * Lanuch Autocrypt Default Encryption checking based on\n   * https://autocrypt.org/level1.html#provide-a-recommendation-for-message-encryption\n   * @param draftMail\n   * @param usersKeys\n   */\n  decideAutocryptDefaultEncryption(\n    senderMailbox: Mailbox,\n    receivers: string[],\n    usersKeys: Map<string, GlobalPublicKey>,\n  ): AutocryptEncryptDetermine {\n    // Check sender mailbox is enabled for Autocrypt\n    if (!senderMailbox.is_autocrypt_enabled) {\n      return {\n        encryptTotally: false,\n        senderAutocryptEnabled: false,\n        senderPreferEncrypt: AutocryptPreferEncryptType.NOPREFERENCE,\n        recommendationValue: UIRecommendationValue.DISABLE,\n      };\n    }\n    if (!receivers || receivers.length === 0) {\n      return {\n        encryptTotally: senderMailbox.prefer_encrypt === 'mutual',\n        senderAutocryptEnabled: true,\n        senderPreferEncrypt:\n          senderMailbox.prefer_encrypt === 'mutual'\n            ? AutocryptPreferEncryptType.MUTUAL\n            : AutocryptPreferEncryptType.NOPREFERENCE,\n        recommendationValue: UIRecommendationValue.AVAILABLE,\n      };\n    }\n    const receiversStatus = new Map<string, AutocryptEncryptDetermineForSingle>();\n    receivers.forEach(receiver => {\n      const parsedEmail = parseEmail.parseOneAddress(receiver) as parseEmail.ParsedMailbox;\n      if (!parsedEmail) {\n        receiversStatus.set(receiver, {\n          recommendationValue: UIRecommendationValue.DISABLE,\n          encrypt: false,\n        });\n      } else {\n        const contact = this.contacts.find(everyContact => everyContact.email === parsedEmail.address);\n        if (!contact) {\n          receiversStatus.set(parsedEmail.address, {\n            recommendationValue: UIRecommendationValue.DISABLE,\n            encrypt: false,\n          });\n        } else {\n          const keyInfo = this.sharedService.parseUserKey(usersKeys, receiver);\n          if (keyInfo.isCTemplarKey) {\n            receiversStatus.set(contact.email, {\n              recommendationValue: UIRecommendationValue.CTEMPLAR,\n              encrypt: false,\n            });\n          } else if (keyInfo.isExistKey) {\n            // Completed checking STEP 1 (Determine if encryption is possible),\n            // the result is OK, will jump into the next process\n            // https://autocrypt.org/level1.html#determine-if-encryption-is-possible\n            const processResult = this.launchProcessForCheckAutocryptPossible(senderMailbox, contact);\n            receiversStatus.set(contact.email, processResult);\n          } else {\n            receiversStatus.set(contact.email, {\n              recommendationValue: UIRecommendationValue.DISABLE,\n              encrypt: false,\n            });\n          }\n        }\n      }\n    });\n    const encryptTotally = [...receiversStatus.keys()].every(key => receiversStatus.get(key).encrypt);\n    let recommendationValue = UIRecommendationValue.DISABLE;\n    if (encryptTotally) {\n      const isCourage = [...receiversStatus.keys()].every(\n        key =>\n          receiversStatus.get(key).recommendationValue === UIRecommendationValue.ENCRYPT ||\n          receiversStatus.get(key).recommendationValue === UIRecommendationValue.AVAILABLE,\n      );\n      recommendationValue = isCourage ? UIRecommendationValue.ENCRYPT : UIRecommendationValue.DISCOURAGE;\n    }\n    return {\n      encryptTotally,\n      recommendationValue,\n      senderPreferEncrypt:\n        senderMailbox.prefer_encrypt === 'mutual'\n          ? AutocryptPreferEncryptType.MUTUAL\n          : AutocryptPreferEncryptType.NOPREFERENCE,\n      senderAutocryptEnabled: true,\n      receiversStatus,\n    };\n  }\n\n  private launchProcessForCheckAutocryptPossible(senderMailbox: Mailbox, contact: Contact): any {\n    // STEP 2\n    // Checking Preliminary Recommendation\n    // https://autocrypt.org/level1.html#preliminary-recommendation\n\n    // If autocrypt_timestamp is more than 35 days older than last_seen, set preliminary-recommendation to discourage.\n    // Otherwise, set preliminary-recommendation to available.\n    let recommendationValue = UIRecommendationValue.AVAILABLE;\n    const MAX_DISCOURAGE_DAY = 35;\n    const autocryptTimestamp: Date = new Date(contact.autocrypt_timestamp);\n    const lastSeen: Date = new Date(contact.last_seen);\n    if (!contact.last_seen && this.dateDiffInDays(autocryptTimestamp, lastSeen) >= MAX_DISCOURAGE_DAY) {\n      recommendationValue = UIRecommendationValue.DISCOURAGE;\n    }\n\n    // STEP 3\n    // Checking whether decide encrypt by default\n    // https://autocrypt.org/level1.html#deciding-to-encrypt-by-default\n\n    // If preliminary-recommendation is either available or discourage,\n    // and the message is composed as a reply to an encrypted message, or\n    // TODO - Skipping now for above condition\n    let encrypt = false;\n    // If the preliminary-recommendation is available and\n    // both peers[to-addr].prefer_encrypt and accounts[from-addr].prefer_encrypt are mutual.\n    if (\n      senderMailbox.is_autocrypt_enabled &&\n      senderMailbox.prefer_encrypt === AutocryptPreferEncryptType.MUTUAL &&\n      contact.prefer_encrypt === AutocryptPreferEncryptType.MUTUAL\n    ) {\n      encrypt = true;\n    }\n    return {\n      recommendationValue,\n      encrypt,\n    };\n  }\n\n  dateDiffInDays(start: Date, end: Date) {\n    // Discard the time and time-zone information.\n    const utc1 = Date.UTC(start.getFullYear(), start.getMonth(), start.getDate());\n    const utc2 = Date.UTC(end.getFullYear(), end.getMonth(), end.getDate());\n    const MS_PER_DAY = 1000 * 60 * 60 * 24;\n    return Math.floor((utc2 - utc1) / MS_PER_DAY);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { apiUrl } from '../../shared/config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BitcoinService {\n  constructor(private http: HttpClient) {}\n\n  createNewWallet(data: any) {\n    return this.http.post<any>(`${apiUrl}btc-wallet/create/`, data);\n  }\n\n  checkTransaction(data: any) {\n    return this.http.get(\n      `${apiUrl}btc-wallet/check/?address=${data.from_address}${\n        data.promo_code ? `&promo_code=${data.promo_code}` : ''\n      }`,\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\n\nexport interface Breakpoint {\n  min?: number;\n  max?: number;\n}\n\nexport interface BreakpointConfig {\n  [name: string]: Breakpoint;\n}\n\nexport const defaultBreakpoints: BreakpointConfig = {\n  xs: { max: 768 },\n  sm: { min: 768, max: 992 },\n  md: { min: 992, max: 1200 },\n  lg: { min: 1200 },\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BreakpointsService {\n  private breakpoints: BreakpointConfig = defaultBreakpoints;\n\n  public getBreakpoint(): string {\n    const currentSize: number = window.innerWidth;\n    const keys = Object.keys(this.breakpoints);\n    for (const key of keys) {\n      const value = this.breakpoints[key];\n      const min = value.min || 0;\n      const max = value.max || Number.MAX_SAFE_INTEGER;\n\n      if (currentSize >= min && currentSize < max) {\n        return key;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * @Description Returns true if the current layout is `sm`(small)\n   * @returns {boolean}\n   */\n  public isSM() {\n    return this.getBreakpoint() === 'sm';\n  }\n\n  /**\n   * @Description Returns true if the current layout is `xs`(extra small)\n   * @returns {boolean}\n   */\n  public isXS() {\n    return this.getBreakpoint() === 'xs';\n  }\n\n  /**\n   * @Description Returns true if the current layout is `md`(medium)\n   * @returns {boolean}\n   */\n  public isMD() {\n    return this.getBreakpoint() === 'md';\n  }\n\n  /**\n   * @Description Returns true if the current layout is `lg`(large)\n   * @returns {boolean}\n   */\n  public isLG() {\n    return this.getBreakpoint() === 'lg';\n  }\n}\n","import { Observable } from 'rxjs';\n\nimport { takeUntil } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\n\nimport { HttpCancelService } from './cancel.request.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CancelPendingRequestInterceptor implements HttpInterceptor {\n  constructor(private httpCancelService: HttpCancelService) {}\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(request).pipe(takeUntil(this.httpCancelService.onCancelPendingRequests()));\n  }\n}\n","import { Subject } from 'rxjs/internal/Subject';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HttpCancelService {\n  private cancelPendingRequests$ = new Subject<void>();\n\n  constructor() {}\n\n  /** Cancels all pending Http requests. */\n  public cancelPendingRequests() {\n    this.cancelPendingRequests$.next();\n  }\n\n  public onCancelPendingRequests() {\n    return this.cancelPendingRequests$.asObservable();\n  }\n}\n","import { ComponentFactoryResolver, ComponentRef, Injectable, ViewContainerRef } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { finalize, take } from 'rxjs/operators';\nimport { forkJoin, Observable } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport * as parseEmail from 'email-addresses';\n\nimport { ComposeMailDialogComponent } from '../../mail/mail-sidebar/compose-mail-dialog/compose-mail-dialog.component';\nimport {\n  AppState,\n  ComposeMailState,\n  Contact,\n  ContactsState,\n  Draft,\n  DraftState,\n  GlobalPublicKey,\n  PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME,\n  PGPEncryptionType,\n  PublicKey,\n  SecureContent,\n  UserState,\n} from '../datatypes';\nimport { ClearDraft, CreateMail, SendMail, SnackPush, UploadAttachment } from '../actions';\nimport { Attachment } from '../models';\n\nimport { MailService } from './mail.service';\nimport { OpenPgpService } from './openpgp.service';\nimport { MessageBuilderService } from './message.builder.service';\nimport { AutocryptProcessService } from './autocrypt.process.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComposeMailService {\n  private drafts: DraftState;\n\n  private composeMailContainer: ViewContainerRef;\n\n  private componentRefList: Array<ComponentRef<ComposeMailDialogComponent>> = [];\n\n  private userState: UserState;\n\n  minimizedWidth = 192;\n\n  originWidth = 640;\n\n  windowWidth: number;\n\n  maxComposeCount = 5;\n\n  composesWidth: number;\n\n  countCommonCompose: number;\n\n  contacts: Contact[] = [];\n\n  constructor(\n    private store: Store<AppState>,\n    private openPgpService: OpenPgpService,\n    private mailService: MailService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private messageBuilderService: MessageBuilderService,\n    private autocryptProcessService: AutocryptProcessService,\n  ) {\n    this.store\n      .select((state: AppState) => state.composeMail)\n      .subscribe((response: ComposeMailState) => {\n        Object.keys(response.drafts).forEach((key: any) => {\n          const draftMail: Draft = response.drafts[key];\n          const { usersKeys } = response;\n          if (draftMail.draft) {\n            if (\n              draftMail.shouldSave &&\n              this.drafts[key] &&\n              this.drafts[key].isPGPInProgress &&\n              !draftMail.isPGPInProgress\n            ) {\n              this.setEncryptedContent(draftMail);\n              this.store.dispatch(new CreateMail({ ...draftMail }));\n            } else if (draftMail.shouldSend && this.drafts[key]) {\n              if (\n                (this.drafts[key].isPGPInProgress &&\n                  !draftMail.isPGPInProgress &&\n                  !draftMail.isProcessingAttachments) ||\n                (this.drafts[key].isProcessingAttachments &&\n                  !draftMail.isProcessingAttachments &&\n                  !draftMail.isPGPInProgress)\n              ) {\n                // PGP Encryption has been finished, don't need to set encryption data, if it is PGP/MIME message\n                if (!draftMail.isPGPMimeMessage) {\n                  this.setEncryptedContent(draftMail);\n                }\n                if (!draftMail.isSaving) {\n                  if (draftMail.draft && draftMail.draft.encryption && draftMail.draft.encryption.password) {\n                    draftMail.draft.encryption.password = '';\n                  }\n                  this.store.dispatch(new SendMail({ ...draftMail }));\n                } else {\n                  this.store.dispatch(\n                    new SnackPush({\n                      message: 'Failed to send email, please try again. Email has been saved in draft.',\n                    }),\n                  );\n                }\n              } else if (this.drafts[key].isPGPMimeInProgress && !draftMail.isPGPMimeInProgress) {\n                // Finished to encrypt PGP/MIME message context\n                if (draftMail.pgpMimeContent) {\n                  this.processPGPMimeMessage(draftMail);\n                } else {\n                  this.store.dispatch(\n                    new SnackPush({\n                      message: 'Failed to send email, please try again. Email has been saved in draft.',\n                    }),\n                  );\n                }\n              } else if (this.drafts[key].getUserKeyInProgress && !draftMail.getUserKeyInProgress) {\n                // Finished to get the user keys\n                let publicKeys: any[] = [];\n                if (this.getShouldBeEncrypted(draftMail, usersKeys)) {\n                  draftMail.draft.is_encrypted = true;\n                  publicKeys = this.getPublicKeys(draftMail, usersKeys).map(item => item.public_key);\n                }\n                const encryptionTypeForExternal = this.getEncryptionTypeForExternal(draftMail, usersKeys);\n                if (encryptionTypeForExternal !== null && publicKeys.length > 0) {\n                  draftMail.draft.is_encrypted = false;\n                  draftMail.draft.is_subject_encrypted = false;\n                  if (encryptionTypeForExternal === PGPEncryptionType.PGP_INLINE) {\n                    draftMail.draft.encryption_type = PGPEncryptionType.PGP_INLINE;\n                  }\n                }\n                if (draftMail.draft && draftMail.draft.encryption && draftMail.draft.encryption.password) {\n                  draftMail.attachments.forEach(attachment => {\n                    this.openPgpService.encryptAttachmentWithOnlyPassword(\n                      attachment,\n                      draftMail.draft.encryption.password,\n                    );\n                  });\n                  this.openPgpService.encryptWithOnlyPassword(\n                    draftMail.id,\n                    new SecureContent(draftMail.draft),\n                    draftMail.draft.encryption.password,\n                  );\n                } else if (publicKeys.length > 0) {\n                  const determinedAutocryptStatus = autocryptProcessService.decideAutocryptDefaultEncryptionWithDraft(\n                    draftMail,\n                    usersKeys,\n                  );\n                  if (determinedAutocryptStatus.encryptTotally) {\n                    this.buildPGPMimeMessageAndEncrypt(draftMail.id, publicKeys);\n                  } else if (determinedAutocryptStatus.senderAutocryptEnabled) {\n                    draftMail.draft.is_encrypted = false;\n                    draftMail.draft.is_subject_encrypted = false;\n                    this.sendEmailWithDecryptedData(false, draftMail, publicKeys, encryptionTypeForExternal);\n                  } else if (encryptionTypeForExternal === PGPEncryptionType.PGP_MIME) {\n                    this.buildPGPMimeMessageAndEncrypt(draftMail.id, publicKeys);\n                  } else {\n                    draftMail.attachments.forEach(attachment => {\n                      this.openPgpService.encryptAttachment(draftMail.draft.mailbox, attachment, publicKeys);\n                    });\n                    this.openPgpService.encrypt(\n                      draftMail.draft.mailbox,\n                      draftMail.id,\n                      new SecureContent(draftMail.draft),\n                      publicKeys,\n                      encryptionTypeForExternal,\n                    );\n                  }\n                } else if (!draftMail.isSaving) {\n                  this.sendEmailWithDecryptedData(true, draftMail, publicKeys, encryptionTypeForExternal);\n                } else {\n                  this.store.dispatch(\n                    new SnackPush({\n                      message: 'Failed to send email, please try again. Email has been saved in draft.',\n                    }),\n                  );\n                }\n                // }\n              }\n            }\n          }\n          if (draftMail.isClosed && !draftMail.shouldSend && !draftMail.shouldSave && !draftMail.inProgress) {\n            this.store.dispatch(new ClearDraft(draftMail));\n          }\n        });\n\n        this.drafts = { ...response.drafts };\n      });\n\n    this.store\n      .select((state: AppState) => state.user)\n      .subscribe((user: UserState) => {\n        this.userState = user;\n      });\n\n    this.store\n      .select((state: AppState) => state.contacts)\n      .subscribe((contactsState: ContactsState) => {\n        this.contacts = contactsState.contacts;\n      });\n  }\n\n  private getShouldBeEncrypted(draftMail: Draft, usersKeys: Map<string, GlobalPublicKey>): boolean {\n    if (draftMail.draft) {\n      const keys = this.getPublicKeys(draftMail, usersKeys);\n      return keys.every(key => key.public_key);\n    }\n    return false;\n  }\n\n  private getPublicKeys(draftMail: Draft, usersKeys: Map<string, GlobalPublicKey>): Array<PublicKey> {\n    if (draftMail.draft) {\n      const receivers: string[] = [\n        ...draftMail.draft.receiver.map(receiver => receiver),\n        ...draftMail.draft.cc.map(cc => cc),\n        ...draftMail.draft.bcc.map(bcc => bcc),\n      ];\n      let keys: any[] = [];\n      receivers.forEach(receiver => {\n        const parsedEmail = parseEmail.parseOneAddress(receiver) as parseEmail.ParsedMailbox;\n        if (usersKeys.has(parsedEmail.address)) {\n          keys = [...keys, ...usersKeys.get(parsedEmail.address).key];\n        }\n      });\n      return keys;\n    }\n    return [];\n  }\n\n  private getEncryptionTypeForExternal(draftMail: Draft, usersKeys: Map<string, GlobalPublicKey>): PGPEncryptionType {\n    if (draftMail.draft) {\n      const receivers: string[] = [\n        ...draftMail.draft.receiver.map(\n          receiver => (parseEmail.parseOneAddress(receiver) as parseEmail.ParsedMailbox).address,\n        ),\n        ...draftMail.draft.cc.map(cc => (parseEmail.parseOneAddress(cc) as parseEmail.ParsedMailbox).address),\n        ...draftMail.draft.bcc.map(bcc => (parseEmail.parseOneAddress(bcc) as parseEmail.ParsedMailbox).address),\n      ];\n      const isPGPInline = receivers.every(rec => {\n        if (usersKeys.has(rec) && !usersKeys.get(rec).isFetching) {\n          const contactInfo: Contact = this.contacts.find((contact: Contact) => contact.email === rec);\n          if (\n            contactInfo &&\n            contactInfo.enabled_encryption &&\n            contactInfo.encryption_type === PGPEncryptionType.PGP_INLINE\n          ) {\n            return true;\n          }\n        }\n        return false;\n      });\n      if (isPGPInline) {\n        return PGPEncryptionType.PGP_INLINE;\n      }\n      const isPGPMime = receivers.every(rec => {\n        if (usersKeys.has(rec) && !usersKeys.get(rec).isFetching) {\n          const contactInfo: Contact = this.contacts.find((contact: Contact) => contact.email === rec);\n          if (\n            contactInfo &&\n            contactInfo.enabled_encryption &&\n            contactInfo.encryption_type === PGPEncryptionType.PGP_MIME\n          ) {\n            return true;\n          }\n        }\n        return false;\n      });\n      if (isPGPMime) {\n        return PGPEncryptionType.PGP_MIME;\n      }\n      return null;\n    }\n    return null;\n  }\n\n  private setEncryptedContent(draftMail: Draft) {\n    draftMail.draft.content = draftMail.encryptedContent.content;\n    if (this.userState.settings) {\n      draftMail.draft.subject = draftMail.encryptedContent.subject;\n    }\n    if (draftMail.draft.encryption && draftMail.draft.encryption.password) {\n      draftMail.draft.is_subject_encrypted = true;\n      draftMail.draft.is_encrypted = true;\n    }\n  }\n\n  /**\n   * Check if there is encrypted attachment,\n   * If existed, decrypt and upload again attachment and\n   * Encrypted or decrypted message is sent by `isEncryptMessageContent` flag\n   * @param isEncryptMessageContent - Decide to encrypt the message content after proceed attachment\n   * @param draftMail\n   * @param publicKeys\n   * @param encryptionTypeForExternal\n   * @private\n   */\n  private sendEmailWithDecryptedData(\n    isEncryptMessageContent: boolean,\n    draftMail: Draft,\n    publicKeys: any[] = [],\n    encryptionTypeForExternal: PGPEncryptionType,\n  ) {\n    const encryptedAttachments = draftMail.attachments.filter(attachment => !!attachment.is_encrypted);\n    if (encryptedAttachments.length > 0) {\n      forkJoin(\n        ...encryptedAttachments.map(attachment => {\n          attachment.is_encrypted = false;\n          attachment.document = attachment.decryptedDocument;\n          return Observable.create((observer: any) => {\n            this.mailService\n              .uploadFile(attachment)\n              .pipe(finalize(() => observer.complete()))\n              .subscribe(\n                event => {\n                  if (event instanceof HttpResponse) {\n                    observer.next(event.body);\n                  }\n                },\n                error => observer.error(error),\n              );\n          });\n        }),\n      )\n        .pipe(take(1))\n        .subscribe(\n          responses => {\n            if (!isEncryptMessageContent || publicKeys.length === 0) {\n              this.store.dispatch(new SendMail({ ...draftMail }));\n            } else {\n              this.openPgpService.encrypt(\n                draftMail.draft.mailbox,\n                draftMail.id,\n                new SecureContent(draftMail.draft),\n                publicKeys,\n              );\n            }\n          },\n          error =>\n            this.store.dispatch(\n              new SnackPush({\n                message: 'Failed to send email, please try again. Email has been saved in draft.',\n              }),\n            ),\n        );\n    } else if (!isEncryptMessageContent || publicKeys.length === 0) {\n      this.store.dispatch(new SendMail({ ...draftMail }));\n    } else {\n      this.openPgpService.encrypt(\n        draftMail.draft.mailbox,\n        draftMail.id,\n        new SecureContent(draftMail.draft),\n        publicKeys,\n      );\n    }\n  }\n\n  /**\n   * Force Making `encrypted.asc` file with `draftMail.encryptedContent`\n   * @param draftMail\n   * @private\n   */\n  private processPGPMimeMessage(draftMail: Draft) {\n    const { pgpMimeContent } = draftMail;\n    const newDocument = new File([pgpMimeContent], PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME, {\n      type: '',\n    });\n    const attachmentToUpload: Attachment = {\n      document: newDocument,\n      draftId: draftMail.id,\n      inProgress: false,\n      is_inline: false,\n      is_encrypted: false,\n      message: draftMail.draft.id,\n      name: PGP_MIME_DEFAULT_ATTACHMENT_FILE_NAME,\n      size: newDocument.size.toString(),\n      actual_size: newDocument.size,\n      is_pgp_mime: true,\n    };\n    this.store.dispatch(new UploadAttachment({ ...attachmentToUpload, isPGPMimeMessage: true }));\n  }\n\n  /**\n   * Build PGP/MIME message with the standard format\n   * @param draftMailId\n   * @param publicKeys\n   */\n  buildPGPMimeMessageAndEncrypt(draftMailId: number, publicKeys: Array<any>) {\n    const draftMail: Draft = this.drafts[draftMailId];\n    if (draftMail?.draft?.id) {\n      this.messageBuilderService\n        .getMimeData(\n          new SecureContent(draftMail.draft),\n          draftMail.attachments,\n          true,\n          true,\n          true,\n          PGPEncryptionType.PGP_MIME,\n        )\n        .then(mimeData => {\n          this.openPgpService.encryptForPGPMime(mimeData, draftMail.draft.mailbox, draftMail.id, publicKeys);\n        })\n        .catch(error => {\n          this.store.dispatch(\n            new SnackPush({\n              message: 'Failed to send email, please try again. Email has been saved in draft.',\n            }),\n          );\n        });\n    } else {\n      setTimeout(() => {\n        this.buildPGPMimeMessageAndEncrypt(draftMailId, publicKeys);\n      }, 500);\n    }\n  }\n\n  initComposeMailContainer(container: ViewContainerRef) {\n    this.composeMailContainer = container;\n    this.componentRefList = [];\n  }\n\n  getWindowWidth(width: any = {}) {\n    // get current window's width\n    this.windowWidth = width > 768 && width < 999 ? width - 68 : width;\n    if (this.windowWidth > this.originWidth) {\n      this.countCommonCompose =\n        Math.trunc((this.windowWidth - this.originWidth) / this.minimizedWidth) + 1 > this.maxComposeCount\n          ? this.maxComposeCount\n          : Math.trunc((this.windowWidth - this.originWidth) / this.minimizedWidth) + 1;\n    } else {\n      this.countCommonCompose = 0;\n    }\n    let composesWidth = 0;\n    if (this.componentRefList.length > 0) {\n      for (let i = this.componentRefList.length - 1; i > -1; i--) {\n        composesWidth += this.componentRefList[i].instance.isMinimized ? this.minimizedWidth : this.originWidth;\n        if (composesWidth > this.windowWidth) {\n          if (!this.componentRefList[i].instance.isMinimized) {\n            this.componentRefList[i].instance.isComposeVisible = true;\n            this.componentRefList[i + 1].instance.isComposeVisible = false;\n          } else {\n            this.componentRefList[i].instance.isComposeVisible = false;\n          }\n          break;\n        } else {\n          this.componentRefList[i].instance.isComposeVisible = true;\n        }\n      }\n    }\n  }\n\n  getComposesWidth() {\n    // get entire width of opened Compose windows\n    let temporaryWidth = 0;\n    this.componentRefList.forEach(componentReference => {\n      if (componentReference.instance.isComposeVisible) {\n        temporaryWidth += componentReference.instance.isMinimized ? this.minimizedWidth : this.originWidth;\n      }\n    });\n    this.composesWidth = temporaryWidth;\n  }\n\n  openComposeMailDialog(inputData: any = {}) {\n    if (this.userState && this.componentRefList.length < this.maxComposeCount) {\n      this.componentRefList.forEach(componentReference => {\n        componentReference.instance.isMinimized = true;\n      });\n\n      if (inputData.draft) {\n        const oldComponentReference = this.componentRefList.find(componentReference => {\n          return (\n            componentReference.instance.composeMail.draftMail &&\n            componentReference.instance.composeMail.draftMail.id === inputData.draft.id\n          );\n        });\n        if (oldComponentReference) {\n          oldComponentReference.instance.isMinimized = false;\n          return;\n        }\n      }\n      const factory = this.componentFactoryResolver.resolveComponentFactory(ComposeMailDialogComponent);\n      const newComponentReference: ComponentRef<ComposeMailDialogComponent> = this.composeMailContainer.createComponent(\n        factory,\n      );\n      this.componentRefList.push(newComponentReference);\n      Object.keys(inputData).forEach(key => {\n        (newComponentReference as any).instance[key] = inputData[key];\n      });\n      newComponentReference.instance.isComposeVisible = true;\n      newComponentReference.instance.isMinimized = false;\n      this.getComposesWidth();\n      newComponentReference.instance.hide.subscribe(() => {\n        const index = this.componentRefList.indexOf(newComponentReference);\n        this.destroyComponent(newComponentReference, index);\n      });\n      newComponentReference.instance.minimize.subscribe((isMinimized: boolean) => {\n        if (!isMinimized) {\n          // when Compose window is maximized\n          this.componentRefList.forEach(componentReference => {\n            componentReference.instance.isMinimized = true;\n            componentReference.instance.isFullScreen = false;\n            componentReference.instance.isComposeVisible = true;\n          });\n          newComponentReference.instance.isMinimized = false;\n          if (this.windowWidth < this.minimizedWidth * (this.componentRefList.length - 1) + this.originWidth) {\n            let temporaryCount = 0;\n            for (let i = 0; i < this.componentRefList.length; i++) {\n              if (temporaryCount === this.componentRefList.length - this.countCommonCompose) {\n                break;\n              }\n              if (this.componentRefList[i].instance.isMinimized) {\n                temporaryCount += 1;\n                this.componentRefList[i].instance.isComposeVisible = false;\n              }\n            }\n          }\n        } else {\n          // when Compose window is minimized\n          this.componentRefList.forEach(componentReference => {\n            componentReference.instance.isMinimized = true;\n            componentReference.instance.isComposeVisible = false;\n          });\n          let count = Math.trunc(this.windowWidth / this.minimizedWidth);\n          if (this.componentRefList.length < count) {\n            count = this.componentRefList.length;\n          }\n          for (let i = this.componentRefList.length - 1; i >= this.componentRefList.length - count; i--) {\n            this.componentRefList[i].instance.isComposeVisible = true;\n          }\n        }\n      });\n      newComponentReference.instance.fullScreen.subscribe((isFullScreen: boolean) => {\n        if (isFullScreen) {\n          this.componentRefList.forEach(componentReference => {\n            componentReference.instance.isFullScreen = false;\n            componentReference.instance.isMinimized = true;\n          });\n          newComponentReference.instance.isFullScreen = true;\n        }\n      });\n    } else {\n      // display error message when user open more than 5 composer\n      this.store.dispatch(new SnackPush({ message: 'Maximum composer reached.', duration: 5000 }));\n    }\n  }\n\n  destroyAllComposeMailDialogs(): void {\n    this.componentRefList.forEach(componentReference => {\n      componentReference.destroy();\n    });\n    this.componentRefList = [];\n  }\n\n  private destroyComponent(newComponentReference: ComponentRef<ComposeMailDialogComponent>, index: number) {\n    newComponentReference.destroy();\n    this.componentRefList.splice(index, 1);\n    this.getComposesWidth();\n    let countNewCompose = (this.windowWidth - this.composesWidth) / this.minimizedWidth;\n    for (let i = this.componentRefList.length; i > 0; i--) {\n      if (!this.componentRefList[i - 1].instance.isComposeVisible && countNewCompose >= 1) {\n        countNewCompose -= 1;\n        this.componentRefList[i - 1].instance.isComposeVisible = true;\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NgbDateStruct, NgbTimeStruct } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport * as moment from 'moment-timezone';\n\nimport { AppState, UserState } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DateTimeUtilService {\n  readonly ISO8601_DATETIME_FORMAT = 'YYYY-MM-DDTHH:mm:ss.SSSZ';\n\n  readonly preDefinedFormats: any = {\n    short: 'M/D/YY, h:mm A',\n    medium: 'MMM D, YYYY, h:mm:ss A',\n    long: 'MMMM D, YYYY, h:mm:ss A Z',\n    full: 'dddd, MMMM D, YYYY, h:mm:ss A Z',\n    shortDate: 'M/D/YY',\n    mediumDate: 'MMM D, YYYY',\n    longDate: 'MMMM D, YYYY',\n    fullDate: 'dddd, MMMM D, YYYY',\n    shortTime: 'h:mm A',\n    mediumTime: 'h:mm:ss A',\n    longTime: 'h:mm:ss A Z',\n    fullTime: 'h:mm:ss A Z',\n  };\n\n  private timezone: string;\n\n  constructor(private store: Store<AppState>) {\n    this.store\n      .select(state => state.user)\n      .subscribe((user: UserState) => {\n        if (user.settings && user.settings.timezone !== this.timezone) {\n          this.timezone = user.settings.timezone;\n          if (this.timezone) {\n            moment.tz.setDefault(this.timezone);\n          } else {\n            moment.tz.setDefault(); // set user's local timezone as default\n          }\n        }\n      });\n  }\n\n  createDateTimeStrFromNgbDateTimeStruct(date: NgbDateStruct, time: NgbTimeStruct): string {\n    return moment([date.year, date.month - 1, date.day, time.hour, time.minute, time.second])\n      .utc()\n      .format(this.ISO8601_DATETIME_FORMAT);\n  }\n\n  createDateTimeFromNgbDateTimeStruct(date: NgbDateStruct, time: NgbTimeStruct): moment.Moment {\n    return moment([date.year, date.month - 1, date.day, time.hour, time.minute, time.second]).utc();\n  }\n\n  getNgbDateTimeStructsFromDateTimeStr(dateTimeString: string): { date: NgbDateStruct; time: NgbTimeStruct } {\n    const datetime = moment(dateTimeString);\n    if (datetime) {\n      return {\n        date: {\n          year: datetime.year(),\n          month: datetime.month() + 1,\n          day: datetime.date(),\n        },\n        time: {\n          hour: datetime.hour(),\n          minute: datetime.minute(),\n          second: datetime.second(),\n        },\n      };\n    }\n    return { date: null, time: null };\n  }\n\n  getNgbDateStructFromDateStr(dateString: string, format: string): NgbDateStruct {\n    const datetime = moment(dateString, format);\n    if (datetime) {\n      return { year: datetime.year(), month: datetime.month() + 1, day: datetime.date() };\n    }\n    return null;\n  }\n\n  getNgbTimeStructFromTimeStr(timeString: string, format: string): NgbTimeStruct {\n    const datetime = moment(timeString, format);\n    if (datetime) {\n      return { hour: datetime.hour(), minute: datetime.minute(), second: datetime.second() };\n    }\n    return null;\n  }\n\n  createDateStrFromNgbDateStruct(date: NgbDateStruct, format: string): string {\n    return moment({ year: date.year, month: date.month - 1, day: date.day }).format(format);\n  }\n\n  createTimeStrFromNgbTimeStruct(time: NgbTimeStruct, format: string): string {\n    return moment({ hour: time.hour, minute: time.minute, second: time.second }).format(format);\n  }\n\n  isDateTimeInPast(dateTimeString: string): boolean {\n    return moment().diff(moment(dateTimeString)) >= 0;\n  }\n\n  isBefore(start: string, end: string, format?: string): boolean {\n    return moment(start, format).isBefore(moment(end, format));\n  }\n\n  getDiffFromCurrentDateTime(dateTimeString: string, unit?: any): number {\n    return moment(dateTimeString).diff(moment(), unit);\n  }\n\n  getDiffToCurrentDateTime(dateTimeString: string, unit?: any): number {\n    return moment().diff(moment(dateTimeString), unit);\n  }\n\n  formatDateTimeStr(dateTimeString: string, format: string, timezone?: string): string {\n    if (this.preDefinedFormats[format]) {\n      format = this.preDefinedFormats[format];\n    }\n    if (timezone) {\n      return moment(dateTimeString, timezone).format(format);\n    }\n    return moment(dateTimeString).format(format); // using the default timezone set in moment\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { apiUrl } from '../../shared/config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DonationService {\n  constructor(private http: HttpClient) {}\n\n  /**\n   * @description\n   * Endpoint for accepting Stripe Donations\n   *\n   * @param data - stripe_token (required) | amount (required)\n   */\n  makeStripeDonation(data: any): Observable<any> {\n    return this.http.post<any>(`${apiUrl}donate/stripe/`, data);\n  }\n}\n","export * from './auth.guard';\nexport * from './mail.service';\nexport * from './openpgp.service';\nexport * from './users.service';\nexport * from './token.interceptor';\nexport * from './shared.service';\nexport * from './bitcoin.service';\nexport * from './donation.service';\nexport * from './cancel.request.interceptor';\nexport * from './cancel.request.service';\nexport * from './message.builder.service';\nexport * from './message.decrypt.service';\nexport * from './autocrypt.process.service';\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\n\nimport { SettingsUpdate } from '../actions';\nimport { AppState } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MailSettingsService {\n  constructor(private store: Store<AppState>) {}\n\n  updateSettings(settings: any, key?: string, value?: any) {\n    if (key) {\n      if (settings[key] !== value) {\n        settings[key] = value;\n        this.store.dispatch(new SettingsUpdate(settings));\n      }\n    } else {\n      this.store.dispatch(new SettingsUpdate(settings));\n    }\n  }\n}\n","import { HttpClient, HttpEvent, HttpHeaders, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport * as Sentry from '@sentry/browser';\n\nimport { apiUrl } from '../../shared/config';\nimport { MailboxKey } from '../datatypes';\nimport { Attachment, Folder, Mail, Mailbox } from '../models';\nimport { MailFolderType } from '../models/mail.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MailService {\n  constructor(private http: HttpClient) {}\n\n  getMessages(payload: {\n    limit: number;\n    offset: number;\n    folder: MailFolderType;\n    read?: boolean;\n    seconds?: number;\n    searchText?: string;\n  }): Observable<any> {\n    payload.limit = payload.limit ? payload.limit : 20;\n    if (payload.searchText && payload.folder === MailFolderType.SEARCH) {\n      return this.searchMessages(payload);\n    }\n    let url = `${apiUrl}emails/messages/?limit=${payload.limit}&offset=${payload.offset}`;\n    if (!payload.folder) {\n      payload.folder = MailFolderType.INBOX;\n    }\n    if (payload.folder === MailFolderType.STARRED) {\n      url = `${url}&starred=true`;\n    } else {\n      url = `${url}&folder=${payload.folder}`;\n    }\n    if (payload.read === false || payload.read === true) {\n      url = `${url}&read=${payload.read}`;\n    }\n    if (payload.seconds) {\n      url = `${url}&seconds=${payload.seconds}`;\n    }\n    return this.http.get<Mail[]>(url);\n  }\n\n  searchMessages(payload: {\n    limit: number;\n    offset: number;\n    folder: MailFolderType;\n    read?: boolean;\n    seconds?: number;\n    searchText?: string;\n  }): Observable<any> {\n    const url = `${apiUrl}search/messages/?q=${payload.searchText}&limit=${payload.limit}&offset=${payload.offset}`;\n    return this.http.get<Mail[]>(url);\n  }\n\n  getMessage(payload: { messageId: number; folder: string }): Observable<Mail> {\n    const url = `${apiUrl}emails/messages/?id__in=${payload.messageId}&folder=${payload.folder}`;\n    return this.http.get<Mail>(url).pipe(\n      map((data: any) => {\n        return data['results'] ? data['results'][0] : null;\n      }),\n    );\n  }\n\n  getUnreadMailsCount(): Observable<any> {\n    return this.http.get<Mail>(`${apiUrl}emails/unread/`);\n  }\n\n  getCustomFolderMessageCount(): Observable<any> {\n    return this.http.get<Mail>(`${apiUrl}emails/customfolder-message-count/`);\n  }\n\n  getMailboxes(limit = 50, offset = 0): Observable<any> {\n    const url = `${apiUrl}emails/mailboxes/?limit=${limit}&offset=${offset}`;\n    return this.http.get<any>(url).pipe(\n      map(data => {\n        const newData = data.results.map((mailbox: any) => {\n          mailbox.customFolders = mailbox.custom_folders;\n          return mailbox;\n        });\n        return newData;\n      }),\n    );\n  }\n\n  getUsersPublicKeys(emails: Array<string>): Observable<any> {\n    const body = { emails };\n    return this.http.post<any>(`${apiUrl}emails/keys/`, body);\n  }\n\n  getSecureMessage(hash: string, secret: string): Observable<any> {\n    const url = `${apiUrl}emails/secure-message/${hash}/${secret}/`;\n    return this.http.get<any>(url);\n  }\n\n  getSecureMessageKeys(hash: string, secret: string): Observable<any> {\n    const url = `${apiUrl}emails/secure-message/${hash}/${secret}/keys/`;\n    return this.http.get<any>(url);\n  }\n\n  createFolder(folder: Folder): Observable<any> {\n    if (folder.id) {\n      return this.http.patch<any>(`${apiUrl}emails/custom-folder/${folder.id}/`, folder);\n    }\n    return this.http.post<any>(`${apiUrl}emails/custom-folder/`, folder);\n  }\n\n  updateFoldersOrder(data: any) {\n    return this.http.post<any>(`${apiUrl}emails/folder-order/`, data);\n  }\n\n  createMail(data: any): Observable<any[]> {\n    let url = `${apiUrl}emails/messages/`;\n    if (data.id) {\n      url = `${url}${data.id}/`;\n      return this.http.patch<any>(url, data);\n    }\n    return this.http.post<any>(url, data);\n  }\n\n  secureReply(hash: string, secret: string, data: any): Observable<any> {\n    const url = `${apiUrl}emails/secure-message/${hash}/${secret}/reply/`;\n    return this.http.post<any>(url, data);\n  }\n\n  markAsRead(ids: string, isMailRead: boolean, folder: string): Observable<any[]> {\n    if (ids === 'all') {\n      return this.http.patch<any>(`${apiUrl}emails/messages/?folder=${folder}`, { read: isMailRead });\n    }\n    return this.http.patch<any>(`${apiUrl}emails/messages/?id__in=${ids}`, { read: isMailRead });\n  }\n\n  markAsStarred(ids: string, isMailStarred: boolean, folder: string, withChildren: boolean): Observable<any[]> {\n    if (ids === 'all') {\n      return this.http.patch<any>(`${apiUrl}emails/messages/?folder=${folder}`, {\n        starred: isMailStarred,\n        with_children: withChildren,\n      });\n    }\n    return this.http.patch<any>(`${apiUrl}emails/messages/?id__in=${ids}`, {\n      starred: isMailStarred,\n      with_children: withChildren,\n    });\n  }\n\n  moveMail(\n    ids: string,\n    folder: string,\n    sourceFolder: string,\n    withChildren = true,\n    fromTrash = false,\n  ): Observable<any[]> {\n    if (ids === 'all') {\n      return this.http.patch<any>(`${apiUrl}emails/messages/?folder=${sourceFolder}`, {\n        folder,\n        with_children: withChildren,\n        from_trash: fromTrash,\n      });\n    }\n    return this.http.patch<any>(`${apiUrl}emails/messages/?id__in=${ids}`, {\n      folder,\n      with_children: withChildren,\n      from_trash: fromTrash,\n    });\n  }\n\n  deleteMails(ids: string, folder: string, parent_only = false): Observable<any[]> {\n    if (ids === 'all') {\n      return this.http.delete<any>(`${apiUrl}emails/messages/?folder=${folder}&parent_only=${parent_only ? 1 : 0}`);\n    }\n    return this.http.delete<any>(`${apiUrl}emails/messages/?id__in=${ids}&parent_only=${parent_only ? 1 : 0}`);\n  }\n\n  deleteMailForAll(id: string): Observable<any[]> {\n    return this.http.post<any>(`${apiUrl}emails/delete-message/${id}/`, {});\n  }\n\n  deleteFolder(id: string): Observable<any[]> {\n    return this.http.delete<any>(`${apiUrl}emails/custom-folder/${id}/`);\n  }\n\n  uploadFile(attachment: Attachment): Observable<HttpEvent<any>> {\n    const formData = new FormData();\n    formData.append('document', attachment.document);\n    formData.append('message', attachment.message.toString());\n    formData.append('is_inline', attachment.is_inline.toString());\n    formData.append('is_encrypted', attachment.is_encrypted.toString());\n    formData.append('file_type', attachment.document.type.toString());\n    formData.append('name', attachment.name.toString());\n    formData.append('actual_size', attachment.actual_size.toString());\n    if (attachment.is_pgp_mime) {\n      formData.append('is_pgp_mime', attachment.is_pgp_mime.toString());\n    }\n    let request;\n    if (attachment.id) {\n      request = new HttpRequest('PATCH', `${apiUrl}emails/attachments/update/${attachment.id}/`, formData, {\n        reportProgress: true,\n      });\n    } else {\n      request = new HttpRequest('POST', `${apiUrl}emails/attachments/create/`, formData, {\n        reportProgress: true,\n      });\n    }\n\n    return this.http.request(request);\n  }\n\n  deleteAttachment(attachment: Attachment): Observable<any> {\n    return this.http.delete<any>(`${apiUrl}emails/attachments/${attachment.id}/`);\n  }\n\n  getAttachment(attachment: Attachment): Observable<any> {\n    return this.http.get(`${apiUrl}emails/attachments/${attachment.id}/`);\n  }\n\n  getSecureMessageAttachment(attachment: Attachment, hash: string, randomSecret: string): Observable<any> {\n    return this.http.get(`${apiUrl}emails/secure-message/${hash}/${randomSecret}/attachment/${attachment.id}/`);\n  }\n\n  updateMailBoxSettings(data: Mailbox) {\n    return this.http.patch<any>(`${apiUrl}emails/mailboxes/${data.id}/`, data);\n  }\n\n  createMailbox(data: any) {\n    return this.http.post<any>(`${apiUrl}emails/mailboxes/`, data);\n  }\n\n  updateMailboxOrder(data: any) {\n    return this.http.post<any>(`${apiUrl}emails/mailbox-order/`, data);\n  }\n\n  deleteMailbox(id: number) {\n    return this.http.delete<any>(`${apiUrl}emails/mailboxes/${id}/`);\n  }\n\n  emptyFolder(data: any) {\n    return this.http.post<any>(`${apiUrl}emails/empty-folder/`, data);\n  }\n\n  fetchMailboxKeys() {\n    return this.http.get(`${apiUrl}emails/mailbox-keys/`);\n  }\n\n  addMailboxKeys(data: MailboxKey) {\n    return this.http.post(`${apiUrl}emails/mailbox-keys/`, data);\n  }\n\n  deleteMailboxKeys(data: MailboxKey) {\n    const options = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n      }),\n      body: { password: data.password },\n    };\n    return this.http.delete<any>(`${apiUrl}emails/mailbox-keys/${data.id}`, options);\n  }\n\n  setPrimaryMailboxKeys(data: MailboxKey) {\n    return this.http.post<any>(`${apiUrl}emails/mailboxes-change-primary/`, {\n      mailbox_id: data.mailbox,\n      mailboxkey_id: data.id,\n    });\n  }\n\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      // TODO: send the error to remote logging infrastructure\n      Sentry.captureException(error.originalError || error);\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\n// @ts-ignore\nimport * as mimemessage from 'mimemessage';\n\nimport { EmailContentType, PGPEncryptionType, SecureContent } from '../datatypes';\nimport { Attachment } from '../models';\nimport { SharedService } from './shared.service';\n\n@Injectable()\nexport class MessageBuilderService {\n  constructor(private sharedService: SharedService) {}\n  /**\n   * Build mime message raw data, will be used for only PGP/MIME now\n   * @param mailData - SecureContent that contains message content and content_plain\n   * @param attachments - Attachment list\n   * @param isHtml\n   * @param isBase64EncodeForBody - Decide to encode\n   * @param isPGPMessage - Decide to build for PGP/Inline or PGP/Mime\n   * @param pgpEncryptionType - PGP/Inline or PGP/Mime\n   */\n  async getMimeData(\n    mailData: SecureContent,\n    attachments: Attachment[] = [],\n    isHtml: boolean,\n    isBase64EncodeForBody = false,\n    isPGPMessage = false,\n    pgpEncryptionType: PGPEncryptionType,\n  ): Promise<any> {\n    if (isPGPMessage) {\n      const message = mimemessage.factory({\n        contentType: EmailContentType.MULTIPART_MIXED,\n        body: [],\n      });\n      // Content Body\n      const content = isHtml\n        ? isBase64EncodeForBody\n          ? btoa(unescape(encodeURIComponent(mailData.content)))\n          : mailData.content\n        : (isBase64EncodeForBody\n            ? btoa(unescape(encodeURIComponent(mailData.content_plain)))\n            : mailData.content_plain) || '';\n      const contentEntity = mimemessage.factory({\n        contentType: isHtml ? EmailContentType.TEXT_HTML_CHARSET_UTF8 : EmailContentType.PLAIN_TEXT_CHARSET_UTF8,\n        body: content,\n      });\n      if (isBase64EncodeForBody) {\n        contentEntity.header('Content-Transfer-Encoding', 'base64');\n      }\n      const attachmentsEntities = await this.processAttachments(attachments);\n      message.body = [contentEntity, ...attachmentsEntities];\n      return message.toString();\n    }\n  }\n\n  private async processAttachments(attachments: Array<Attachment>): Promise<any> {\n    const attachmentsEntities: any[] = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const attachment of attachments) {\n      // eslint-disable-next-line no-await-in-loop\n      const contentBuffer = await this.readFileAsync(attachment.decryptedDocument);\n      const attachmentsEntity = mimemessage.factory({\n        contentType: `${EmailContentType.APPLICATION_OCTET_STREAM}; name=\"${attachment.name}\"`,\n        contentTransferEncoding: 'base64',\n        body: contentBuffer,\n      });\n      attachmentsEntity.header('Content-Disposition', `attachment; filename=\"${attachment.name}\"`);\n      attachmentsEntities.push(attachmentsEntity);\n    }\n    return attachmentsEntities;\n  }\n\n  private readFileAsync(file: File): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.addEventListener('load', (event: any) => {\n        resolve(this.sharedService.arrayBufferToBase64(event.target.result));\n      });\n      reader.addEventListener('error', reject);\n      reader.readAsArrayBuffer(file);\n    });\n  }\n}\n","// @ts-ignore\nimport * as postal_mime from 'postal-mime';\nimport { Store } from '@ngrx/store';\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { take } from 'rxjs/operators';\n\nimport { Attachment, Mail } from '../models';\nimport { AppState, PGP_MIME_DEFAULT_CONTENT, PGPEncryptionType, SecureContent } from '../datatypes';\nimport { SetAttachmentsForPGPMime, SnackErrorPush, UpdatePGPDecryptedContent } from '../actions';\nimport { FilenamePipe } from '../../shared/pipes/filename.pipe';\n\nimport { OpenPgpService } from './openpgp.service';\nimport { MailService } from './mail.service';\n\n@Injectable()\nexport class MessageDecryptService {\n  private currentDecryptingMail: Mail;\n\n  constructor(\n    private openpgpService: OpenPgpService,\n    private store: Store<AppState>,\n    private mailService: MailService,\n  ) {}\n\n  /**\n   * TODO - This should be updated for support all of decryption, currently this supports only PGP/MIME message decryption\n   * This is external interface function,\n   * Decrypt the message by the type\n   * Message Type:\n   * 1. General Message\n   * 2. PGP/MIME Message\n   * 3. Password Encrypted Message\n   * @param mailData\n   * @param isDecryptingAllSubjects\n   * @param password\n   */\n  decryptMessage(mail: Mail, isDecryptingAllSubjects = false, password = ''): Observable<any> {\n    this.currentDecryptingMail = mail;\n    const subject = new Subject<any>();\n    if (mail.encryption_type === PGPEncryptionType.PGP_MIME) {\n      if (mail.content === '' || mail.content === PGP_MIME_DEFAULT_CONTENT) {\n        if (mail.attachments.length > 0) {\n          // The first attachment would be encrypted.asc\n          const encryptedDotAsc = mail.attachments[0];\n          this.mailService.getAttachment(encryptedDotAsc).subscribe(\n            response => {\n              this.decryptPGPMessageProcess(\n                subject,\n                { ...mail, content: atob(response.data), content_plain: '' },\n                isDecryptingAllSubjects,\n              );\n            },\n            errorResponse => {\n              this.store.dispatch(\n                new UpdatePGPDecryptedContent({\n                  id: mail.id,\n                  isPGPInProgress: false,\n                  decryptedContent: {},\n                  isDecryptingAllSubjects: false,\n                  decryptError: true,\n                }),\n              );\n              subject.error(1);\n            },\n          );\n        } else {\n          // If there is no encrypted.asc, raise failure to decrypt\n          this.store.dispatch(\n            new UpdatePGPDecryptedContent({\n              id: mail.id,\n              isPGPInProgress: false,\n              decryptedContent: '',\n              isDecryptingAllSubjects: false,\n              decryptError: true,\n            }),\n          );\n          subject.error(1);\n        }\n      } else {\n        this.decryptPGPMessageProcess(subject, mail, isDecryptingAllSubjects);\n      }\n    }\n    return subject.asObservable();\n  }\n\n  /**\n   * parse message\n   * @param message\n   * @return message object as Promise\n   */\n  async parseEmail(message: string): Promise<any> {\n    const PostalMime = postal_mime.default;\n    const parser = new PostalMime();\n    const email = await parser.parse(message);\n    return email;\n  }\n\n  decryptPGPMessageProcess(subject: Subject<any>, mail: Mail, isDecryptingAllSubjects: boolean) {\n    this.openpgpService\n      .decrypt(mail.mailbox, mail.id, new SecureContent(mail), isDecryptingAllSubjects, true)\n      .subscribe(\n        (decryptedData: any) => {\n          this.parseEmail(decryptedData.decryptedContent.content)\n            .then(messageObject => {\n              const decryptedContent: SecureContent = {\n                content: messageObject.html ? messageObject.html : messageObject.text,\n                content_plain: messageObject.text,\n                incomingHeaders: '',\n                subject: decryptedData.decryptedContent.subject,\n              };\n              this.store.dispatch(\n                new UpdatePGPDecryptedContent({\n                  id: decryptedData.callerId,\n                  isPGPInProgress: false,\n                  decryptedContent,\n                  isDecryptingAllSubjects: decryptedData.isDecryptingAllSubjects,\n                  decryptError: false,\n                }),\n              );\n              if (messageObject.attachments?.length > 0) {\n                let attachments: Attachment[] = [];\n                messageObject.attachments.forEach((parsedAttachment: any) => {\n                  const attachment: Attachment = {\n                    size: '',\n                    draftId: 0,\n                    document: URL.createObjectURL(\n                      new Blob([parsedAttachment.content], { type: parsedAttachment.mimeType }),\n                    ),\n                    content_id: parsedAttachment.contentId,\n                    is_encrypted: false,\n                    name: parsedAttachment.filename || 'attachment',\n                    is_inline: false,\n                    inProgress: false,\n                    message: decryptedData.callerId,\n                  };\n                  attachments = [...attachments, attachment];\n                });\n                this.store.dispatch(new SetAttachmentsForPGPMime({ attachments, messageID: decryptedData.callerId }));\n              } else {\n                this.store.dispatch(\n                  new SetAttachmentsForPGPMime({ attachments: [], messageID: decryptedData.callerId }),\n                );\n              }\n              subject.next();\n              subject.complete();\n            })\n            .catch(error => {\n              this.store.dispatch(\n                new UpdatePGPDecryptedContent({\n                  id: error.callerId,\n                  isPGPInProgress: false,\n                  decryptedContent: error.decryptedContent,\n                  isDecryptingAllSubjects: error.isDecryptingAllSubjects,\n                  decryptError: true,\n                }),\n              );\n              subject.error(error);\n            });\n        },\n        error => {\n          this.store.dispatch(\n            new UpdatePGPDecryptedContent({\n              id: error.callerId,\n              isPGPInProgress: false,\n              decryptedContent: error.decryptedContent,\n              isDecryptingAllSubjects: error.isDecryptingAllSubjects,\n              decryptError: true,\n            }),\n          );\n          subject.error(error);\n        },\n      );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { Store } from '@ngrx/store';\n\nimport { AppState } from '../datatypes';\nimport { UndoDeleteMail } from '../actions';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotificationService {\n  constructor(private snackBar: MatSnackBar, private store: Store<AppState>) {}\n\n  showSnackBar(message: string, action = 'CLOSE', config: MatSnackBarConfig = { duration: 5000 }) {\n    this.snackBar.open(message, action, config);\n  }\n\n  showUndo(payload: any) {\n    if (payload.sourceFolder) {\n      const snackBarReference = this.snackBar.open(payload.message, 'Undo', { duration: 5000 });\n\n      snackBarReference.onAction().subscribe(() => {\n        this.store.dispatch(new UndoDeleteMail(payload));\n      });\n    } else {\n      this.showSnackBar(payload.message);\n    }\n  }\n}\n","import { Store } from '@ngrx/store';\nimport { Observable, Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\nimport { PRIMARY_DOMAIN } from '../../shared/config';\nimport {\n  ChangePassphraseSuccess,\n  ClearContactsToDecrypt,\n  ContactAdd,\n  ContactDecryptSuccess,\n  ContactsGet,\n  FetchMailboxKeysSuccess,\n  Logout,\n  SetDecryptedKey,\n  SetDecryptInProgress,\n  StartAttachmentEncryption,\n  UpdateBatchContacts,\n  UpdatePGPDecryptedContent,\n  UpdatePGPEncryptedContent,\n  UpdatePGPMimeEncrytion,\n  UpdatePGPSshKeys,\n  UpdateSecureMessageContent,\n  UpdateSecureMessageEncryptedContent,\n  UpdateSecureMessageKey,\n  UploadAttachment,\n} from '../actions';\nimport {\n  AppState,\n  AuthState,\n  Contact,\n  ContactsState,\n  MailBoxesState,\n  PGPEncryptionType,\n  PGPKeyType,\n  SecureContent,\n  Settings,\n  UserState,\n} from '../datatypes';\nimport { Attachment, Mailbox, PGPMimeMessageProgressModel } from '../models';\n\nimport { UsersService } from './users.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OpenPgpService {\n  encrypted: any;\n\n  options: any;\n\n  private contactsState: ContactsState;\n\n  private decryptedAllPrivKeys: any;\n\n  private decryptInProgress: boolean;\n\n  private isAuthenticated: boolean;\n\n  private mailboxes: Mailbox[];\n\n  private pgpWorker: Worker;\n\n  private primaryMailbox: Mailbox;\n\n  /**\n   * Stores all private keys by mailbox_id\n   * @example\n   * {\n   *   1111(mailbox_id): [\n   *     {\n   *       is_primary: true,\n   *       mailbox_key_id: 0, // is_primary is true, then mailbox_key_id has no value\n   *       private_key: xxx\n   *     },\n   *     {\n   *       mailbox_key_id: 123,\n   *       private_key: yyy\n   *     }\n   *   ],\n   * }\n   *\n   * @private\n   */\n  private privateKeys: any;\n\n  /**\n   * Stores all private keys by mailbox_id\n   * @example\n   * {\n   *   1111(mailbox_id): [\n   *     {\n   *       is_primary: true,\n   *       mailbox_key_id: 0, // is_primary is true, then mailbox_key_id has no value\n   *       public_key: xxx\n   *     },\n   *     {\n   *       mailbox_key_id: 123,\n   *       public_key: yyy\n   *     }\n   *   ],\n   * }\n   *\n   * @private\n   */\n  private publicKeys: any;\n\n  private subjects: any = {};\n\n  private userKeys: any;\n\n  private userSettings: Settings;\n\n  private mailboxKeysInProgress: boolean;\n\n  private messageForPGPMimeInProcess: Map<number, PGPMimeMessageProgressModel> = new Map<\n    number,\n    PGPMimeMessageProgressModel\n  >();\n\n  constructor(private store: Store<AppState>, private usersService: UsersService) {\n    this.pgpWorker = new Worker('assets/static/pgp-worker.js');\n    this.listenWorkerPostMessages();\n\n    this.store\n      .select(state => state.mailboxes)\n      .subscribe((mailBoxesState: MailBoxesState) => {\n        if (mailBoxesState.mailboxes.length > 0) {\n          this.mailboxes = mailBoxesState.mailboxes;\n          this.privateKeys = this.privateKeys || {};\n          this.publicKeys = this.publicKeys || {};\n          const { mailboxKeysMap } = mailBoxesState;\n          mailBoxesState.mailboxes.forEach(mailbox => {\n            if (mailboxKeysMap.has(mailbox.id) && mailboxKeysMap.get(mailbox.id).length > 0) {\n              this.privateKeys[mailbox.id] = mailboxKeysMap.get(mailbox.id).map(key => {\n                return {\n                  private_key: key.private_key,\n                  is_primary: key.is_primary,\n                  mailbox_key_id: key.id,\n                };\n              });\n              this.publicKeys[mailbox.id] = mailboxKeysMap.get(mailbox.id).map(key => {\n                return {\n                  public_key: key.public_key,\n                  is_primary: key.is_primary,\n                  mailbox_key_id: key.id,\n                };\n              });\n            }\n            if (mailbox.is_default && !this.primaryMailbox) {\n              this.primaryMailbox = mailbox;\n            }\n          });\n          if (this.mailboxKeysInProgress && !mailBoxesState.mailboxKeyInProgress && this.privateKeys) {\n            this.decryptAllPrivateKeys();\n          }\n        }\n        this.decryptInProgress = mailBoxesState.decryptKeyInProgress;\n        this.mailboxKeysInProgress = mailBoxesState.mailboxKeyInProgress;\n      });\n\n    this.store\n      .select((state: AppState) => state.auth)\n      .subscribe((authState: AuthState) => {\n        if (this.isAuthenticated && !authState.isAuthenticated) {\n          this.clearData();\n        }\n        this.isAuthenticated = authState.isAuthenticated;\n      });\n    this.store\n      .select((state: AppState) => state.user)\n      .subscribe((userState: UserState) => {\n        this.userSettings = userState.settings;\n      });\n  }\n\n  decryptAllPrivateKeys(privKeys?: any, password?: string) {\n    const userKey = password ? btoa(password) : this.usersService.getUserKey();\n    if (!userKey) {\n      this.store.dispatch(new Logout());\n      return;\n    }\n    this.privateKeys = privKeys || this.privateKeys;\n    this.store.dispatch(new SetDecryptInProgress(true));\n    this.pgpWorker.postMessage({\n      decryptAllPrivateKeys: true,\n      privateKeys: this.privateKeys,\n      user_key: atob(userKey),\n    });\n  }\n\n  // Encrypt - Decrypt content\n  encrypt(\n    mailboxId: number,\n    draftId: number,\n    mailData: SecureContent,\n    publicKeys: any[] = [],\n    pgpEncryptionTypeForExternal: PGPEncryptionType = null,\n  ) {\n    this.store.dispatch(new UpdatePGPEncryptedContent({ isPGPInProgress: true, encryptedContent: {}, draftId }));\n    const pubKeys =\n      publicKeys.length > 0\n        ? publicKeys.concat(this.publicKeys[mailboxId].map((key: any) => key.public_key))\n        : this.publicKeys[mailboxId].map((key: any) => key.public_key);\n    this.pgpWorker.postMessage({\n      mailData,\n      publicKeys: pubKeys,\n      encrypt: true,\n      callerId: draftId,\n      pgpEncryptionTypeForExternal,\n    });\n  }\n\n  decryptProcess(\n    mailboxId: number,\n    mailId: number,\n    mailData: SecureContent,\n    isDecryptingAllSubjects = false,\n    subjectId: number,\n    isPGPMime = false,\n  ) {\n    if (this.decryptedAllPrivKeys) {\n      if (!mailData.isSubjectEncrypted) {\n        mailData.subject = null;\n      }\n      this.store.dispatch(\n        new UpdatePGPDecryptedContent({\n          isDecryptingAllSubjects,\n          id: mailId,\n          isPGPInProgress: true,\n          decryptedContent: {},\n        }),\n      );\n      this.pgpWorker.postMessage({\n        mailboxId,\n        mailData,\n        isDecryptingAllSubjects,\n        decrypt: true,\n        callerId: mailId,\n        subjectId,\n        isPGPMime,\n      });\n    } else {\n      setTimeout(() => {\n        this.decryptProcess(mailboxId, mailId, mailData, isDecryptingAllSubjects, subjectId, isPGPMime);\n      }, 1000);\n    }\n  }\n\n  decrypt(\n    mailboxId: number,\n    mailId: number,\n    mailData: SecureContent,\n    isDecryptingAllSubjects = false,\n    isPGPMime = false,\n  ) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.decryptProcess(mailboxId, mailId, mailData, isDecryptingAllSubjects, subjectId, isPGPMime);\n    return subject.asObservable();\n  }\n\n  // Encrypt - Decrypt Contacts\n  encryptContact(contact: Contact, isAddContact = true) {\n    contact.is_encrypted = true;\n    const content = JSON.stringify(contact);\n    const allPublicKeysArray: any[] = [];\n    Object.keys(this.publicKeys).forEach(mailboxId => {\n      this.publicKeys[mailboxId].forEach((key: any) => {\n        allPublicKeysArray.push(key.public_key);\n      });\n    });\n    this.pgpWorker.postMessage({\n      content,\n      isAddContact,\n      email: contact.email,\n      publicKeys: allPublicKeysArray,\n      encryptJson: true,\n      id: contact.id,\n    });\n  }\n\n  decryptContact(content: string, id: number) {\n    if (this.decryptedAllPrivKeys) {\n      this.pgpWorker.postMessage({\n        id,\n        content,\n        mailboxId: this.primaryMailbox.id,\n        decryptJson: true,\n        isContact: true,\n      });\n    } else {\n      setTimeout(() => {\n        this.decryptContact(content, id);\n      }, 1000);\n    }\n  }\n\n  decryptAllContacts() {\n    if (!this.contactsState) {\n      this.store\n        .select(state => state.contacts)\n        .subscribe((contactsState: ContactsState) => {\n          this.contactsState = contactsState;\n          if (contactsState.contactsToDecrypt.length > 0) {\n            this.store.dispatch(new ClearContactsToDecrypt());\n            const contacts = this.contactsState.contacts.filter(contact => contact.is_encrypted);\n            this.pgpWorker.postMessage({\n              contacts,\n              mailboxId: this.primaryMailbox.id,\n              decryptJson: true,\n              isContactsArray: true,\n            });\n          }\n        });\n    }\n  }\n\n  // Encrypt - Decrypt attachment\n  encryptAttachment(mailboxId: number, attachment: Attachment, publicKeys: any[] = []) {\n    this.store.dispatch(new StartAttachmentEncryption({ ...attachment }));\n    const pubKeys =\n      publicKeys.length > 0\n        ? publicKeys.concat(this.publicKeys[mailboxId].map((key: any) => key.public_key))\n        : this.publicKeys[mailboxId].map((key: any) => key.public_key);\n    const reader = new FileReader();\n    reader.addEventListener('load', (event: any) => {\n      const buffer = event.target.result;\n      const uint8Array = new Uint8Array(buffer);\n      this.pgpWorker.postMessage({ fileData: uint8Array, publicKeys: pubKeys, encryptAttachment: true, attachment });\n    });\n    reader.readAsArrayBuffer(attachment.decryptedDocument);\n  }\n\n  decryptAttachment(mailboxId: number, fileData: string, fileInfo: any): Observable<Attachment> {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({ mailboxId, fileData, decryptAttachment: true, fileInfo, subjectId });\n    return subject.asObservable();\n  }\n\n  clearData(keyMap?: any) {\n    this.decryptedAllPrivKeys = null;\n    this.publicKeys = null;\n    this.userKeys = null;\n    this.primaryMailbox = null;\n    this.privateKeys = null;\n    this.store.dispatch(new SetDecryptedKey({ decryptedKey: null }));\n    this.pgpWorker.postMessage({ clear: true });\n\n    if (keyMap) {\n      this.store.dispatch(new FetchMailboxKeysSuccess({ keyMap, updateKeyMap: true }));\n    }\n  }\n\n  generateUserKeys(\n    username: string,\n    password: string,\n    domain: string = PRIMARY_DOMAIN,\n    key_type: PGPKeyType = PGPKeyType.ECC,\n  ) {\n    if (username.split('@').length > 1) {\n      domain = username.split('@')[1];\n      username = username.split('@')[0];\n    }\n    this.userKeys = null;\n    let options = {};\n    if (key_type === PGPKeyType.ECC) {\n      options = {\n        userIds: [{ email: `${username}@${domain}` }],\n        curve: 'ed25519',\n        passphrase: password,\n      };\n    } else if (key_type === PGPKeyType.RSA_4096) {\n      options = {\n        userIds: [{ email: `${username}@${domain}` }],\n        numBits: 4096,\n        passphrase: password,\n      };\n    } else {\n      options = {\n        userIds: [{ email: `${username}@${domain}` }],\n        numBits: 2048,\n        passphrase: password,\n      };\n    }\n    this.pgpWorker.postMessage({ options, generateKeys: true });\n  }\n\n  generateEmailSshKeys(password: string, draftId: number) {\n    this.store.dispatch(new UpdatePGPSshKeys({ isSshInProgress: true, sshKeys: null, draftId }));\n    const options = {\n      userIds: [{ name: `${draftId}` }],\n      numBits: 4096,\n      passphrase: password,\n    };\n    this.pgpWorker.postMessage({ options, generateKeys: true, forEmail: true, callerId: draftId });\n  }\n\n  getUserKeys() {\n    return this.userKeys;\n  }\n\n  waitForPGPKeys(self: any, callbackFn: string) {\n    setTimeout(() => {\n      if (this.getUserKeys()) {\n        self[callbackFn]();\n        return;\n      }\n      this.waitForPGPKeys(self, callbackFn);\n    }, 500);\n  }\n\n  changePassphrase(passphrase: string, deleteData: boolean, username: string) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({\n      passphrase,\n      deleteData,\n      username,\n      mailboxes: this.mailboxes,\n      changePassphrase: true,\n      subjectId,\n    });\n    return subject.asObservable();\n  }\n\n  revertChangedPassphrase(passphrase: string, deleteData: boolean) {\n    if (!deleteData) {\n      this.pgpWorker.postMessage({ passphrase, revertPassphrase: true });\n    }\n  }\n\n  // For encrypting with password - CTemplar's end\n  encryptWithOnlyPassword(draftId: number, mailData: SecureContent, password: string) {\n    this.store.dispatch(new UpdatePGPEncryptedContent({ isPGPInProgress: true, encryptedContent: {}, draftId }));\n    this.pgpWorker.postMessage({ mailData, encryptWithPassword: true, callerId: draftId, password });\n  }\n\n  encryptAttachmentWithOnlyPassword(attachment: Attachment, password: string) {\n    this.store.dispatch(new StartAttachmentEncryption({ ...attachment }));\n    const reader = new FileReader();\n    reader.addEventListener('load', (event: any) => {\n      const buffer = event.target.result;\n      const uint8Array = new Uint8Array(buffer);\n      this.pgpWorker.postMessage({ fileData: uint8Array, password, encryptAttachmentWithPassword: true, attachment });\n    });\n    reader.readAsArrayBuffer(attachment.decryptedDocument);\n  }\n\n  // For decrypting password encrypted content - CTemplar's end\n  decryptPasswordEncryptedContent(mailboxId: number, mailId: number, mailData: SecureContent, password: string) {\n    if (!mailData.isSubjectEncrypted) {\n      mailData.subject = null;\n    }\n\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n\n    this.store.dispatch(\n      new UpdatePGPDecryptedContent({\n        id: mailId,\n        isPGPInProgress: true,\n        decryptedContent: {},\n      }),\n    );\n    this.pgpWorker.postMessage({\n      mailboxId,\n      mailData,\n      decryptPasswordEncryptedContent: true,\n      callerId: mailId,\n      password,\n      subjectId,\n    });\n    return subject.asObservable();\n  }\n\n  // For encrypting & decrypting password encrypted content - External's end\n  encryptSecureMessageContent(content: string, publicKeys: any[]) {\n    this.store.dispatch(new UpdateSecureMessageEncryptedContent({ inProgress: true, encryptedContent: null }));\n    this.pgpWorker.postMessage({ content, publicKeys, encryptSecureMessageReply: true });\n  }\n\n  decryptWithOnlyPassword(mailData: SecureContent, password: string) {\n    if (!mailData.isSubjectEncrypted) {\n      mailData.subject = null;\n    }\n    this.pgpWorker.postMessage({ decryptSecureMessageContent: true, password, mailData });\n    this.store.dispatch(new UpdateSecureMessageContent({ decryptedContent: null, inProgress: true }));\n  }\n\n  decryptAttachmentWithOnlyPassword(fileData: string, fileInfo: any, password: string): Observable<Attachment> {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({\n      password,\n      fileData,\n      decryptSecureMessageAttachment: true,\n      fileInfo,\n      subjectId,\n    });\n    return subject.asObservable();\n  }\n\n  validatePrivateKey(privateKey: string) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({ privateKey, validatePrivateKey: true, subjectId });\n    return subject.asObservable();\n  }\n\n  decryptPrivateKey(privateKey: string, passphrase: string) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({ privateKey, decryptPrivateKey: true, subjectId, passphrase });\n    return subject.asObservable();\n  }\n\n  encryptPrivateKey(privateKey: string, password: string, passphrase: string) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({ privateKey, encryptPrivateKey: true, subjectId, password, passphrase });\n    return subject.asObservable();\n  }\n\n  getKeyInfoFromPublicKey(publicKey: string) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    this.pgpWorker.postMessage({ publicKey, getKeyInfoFromPublicKey: true, subjectId });\n    return subject.asObservable();\n  }\n\n  // Multiple mailbox keys\n  generateUserKeysWithEmail(email: string, password: string, key_type: PGPKeyType) {\n    const subject = new Subject<any>();\n    const subjectId = performance.now();\n    this.subjects[subjectId] = subject;\n    let options = {};\n    if (key_type === PGPKeyType.ECC) {\n      options = {\n        userIds: [{ email }],\n        curve: 'ed25519',\n        passphrase: password,\n      };\n    } else if (key_type === PGPKeyType.RSA_4096) {\n      options = {\n        userIds: [{ email }],\n        numBits: 4096,\n        passphrase: password,\n      };\n    } else {\n      options = {\n        userIds: [{ email }],\n        numBits: 2048,\n        passphrase: password,\n      };\n    }\n\n    this.pgpWorker.postMessage({ options, generateKeysForEmail: true, subjectId });\n    return subject.asObservable();\n  }\n\n  /**\n   * PGP/MIME encryption\n   * Try to encrypt everything for PGP/MIME message's content and attachment\n   */\n  encryptForPGPMime(pgpMimeData: string, mailboxId: number, draftId: number, publicKeys: any[] = []) {\n    this.store.dispatch(new UpdatePGPMimeEncrytion({ isPGPMimeInProgress: true, encryptedContent: {}, draftId }));\n    if (pgpMimeData) {\n      const pubKeys =\n        publicKeys.length > 0\n          ? publicKeys.concat(this.publicKeys[mailboxId].map((key: any) => key.public_key))\n          : this.publicKeys[mailboxId].map((key: any) => key.public_key);\n      this.pgpWorker.postMessage({ pgpMimeData, publicKeys: pubKeys, encryptForPGPMimeContent: true, draftId });\n    }\n  }\n\n  handleObservable(subjectId: number, data: any) {\n    if (this.subjects[subjectId]) {\n      if (data.error) {\n        this.subjects[subjectId].error(data);\n      } else {\n        this.subjects[subjectId].next(data);\n        this.subjects[subjectId].complete();\n      }\n      delete this.subjects[subjectId];\n    }\n  }\n\n  listenWorkerPostMessages() {\n    this.pgpWorker.onmessage = (event: MessageEvent) => {\n      // Generate Keys\n      if (event.data.generateKeys) {\n        if (event.data.forEmail) {\n          this.store.dispatch(\n            new UpdatePGPSshKeys({\n              isSshInProgress: false,\n              keys: event.data.keys,\n              draftId: event.data.callerId,\n            }),\n          );\n        } else {\n          this.userKeys = event.data.keys;\n        }\n      } else if (event.data.decryptAllPrivateKeys) {\n        this.decryptedAllPrivKeys = event.data.keys;\n        this.store.dispatch(new SetDecryptedKey({ decryptedKey: this.decryptedAllPrivKeys }));\n      } else if (event.data.decrypted) {\n        // TODO - should be updated while integrating all of decryption logic\n        // Currently PGP/MIME message logic is separated with the others\n        if (event.data.decryptedPGPMime) {\n          if (this.subjects[event.data.subjectId]) {\n            if (event.data.error) {\n              this.subjects[event.data.subjectId].error(event.data);\n            } else {\n              this.subjects[event.data.subjectId].next(event.data);\n              this.subjects[event.data.subjectId].complete();\n            }\n            delete this.subjects[event.data.subjectId];\n          }\n        } else {\n          this.store.dispatch(\n            new UpdatePGPDecryptedContent({\n              id: event.data.callerId,\n              isPGPInProgress: false,\n              decryptedContent: event.data.decryptedContent,\n              isDecryptingAllSubjects: event.data.isDecryptingAllSubjects,\n              decryptError: event.data.error,\n              isSubjectDecryptedError: event.data.isSubjectDecryptedError,\n            }),\n          );\n          if (this.subjects[event.data.subjectId]) {\n            if (event.data.error) {\n              this.subjects[event.data.subjectId].error();\n            } else {\n              this.subjects[event.data.subjectId].next();\n              this.subjects[event.data.subjectId].complete();\n            }\n            delete this.subjects[event.data.subjectId];\n          }\n        }\n      } else if (event.data.decryptSecureMessageKey) {\n        this.store.dispatch(\n          new UpdateSecureMessageKey({\n            decryptedKey: event.data.decryptedKey,\n            inProgress: false,\n            error: event.data.error,\n          }),\n        );\n      } else if (event.data.decryptSecureMessageContent) {\n        this.store.dispatch(\n          new UpdateSecureMessageContent({ decryptedContent: event.data.mailData, inProgress: false }),\n        );\n      } else if (event.data.changePassphrase) {\n        Object.keys(event.data.keys).forEach(mailboxId => {\n          event.data.keys[mailboxId].forEach((key: any) => {\n            if (!key.public_key) {\n              const properPublicKey = this.publicKeys[mailboxId].find((pubKey: any) =>\n                key.is_primary ? pubKey.is_primary : key.id === pubKey.id,\n              );\n              // eslint-disable-next-line no-param-reassign\n              key.public_key = properPublicKey ? properPublicKey.public_key : '';\n            }\n            if (event.data.deleteData) {\n              // eslint-disable-next-line no-param-reassign\n              key.is_primary = true;\n            }\n          });\n        });\n        this.handleObservable(event.data.subjectId, event.data);\n        this.store.dispatch(new ChangePassphraseSuccess(event.data.keys));\n      } else if (event.data.encrypted) {\n        this.store.dispatch(\n          new UpdatePGPEncryptedContent({\n            isPGPInProgress: false,\n            encryptedContent: event.data.encryptedContent,\n            draftId: event.data.callerId,\n          }),\n        );\n      } else if (event.data.encryptedAttachment) {\n        const oldDocument = event.data.attachment.decryptedDocument;\n        const newDocument = new File([event.data.encryptedContent], oldDocument.name, {\n          type: oldDocument.type,\n          lastModified: oldDocument.lastModified,\n        });\n        const attachment: Attachment = { ...event.data.attachment, document: newDocument, is_encrypted: true };\n        this.store.dispatch(new UploadAttachment({ ...attachment }));\n      } else if (event.data.decryptedAttachment || event.data.decryptedSecureMessageAttachment) {\n        const array = event.data.decryptedContent;\n        const newDocument = new File(\n          [array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset)],\n          event.data.fileInfo.attachment.name,\n          { type: event.data.fileInfo.type },\n        );\n        const newAttachment: Attachment = { ...event.data.fileInfo.attachment, decryptedDocument: newDocument };\n        this.subjects[event.data.subjectId].next(newAttachment);\n        this.subjects[event.data.subjectId].complete();\n        delete this.subjects[event.data.subjectId];\n      } else if (event.data.encryptSecureMessageReply) {\n        this.store.dispatch(\n          new UpdateSecureMessageEncryptedContent({\n            inProgress: false,\n            encryptedContent: event.data.encryptedContent,\n          }),\n        );\n      } else if (event.data.encryptJson) {\n        if (event.data.isAddContact) {\n          this.store.dispatch(\n            new ContactAdd({\n              id: event.data.id,\n              encrypted_data: event.data.encryptedContent,\n              is_encrypted: true,\n            }),\n          );\n        }\n      } else if (event.data.decryptJson) {\n        if (event.data.isContact) {\n          this.store.dispatch(new ContactDecryptSuccess({ ...JSON.parse(event.data.content), id: event.data.id }));\n        } else if (event.data.isContactsArray) {\n          const totalDecryptedContacts = this.contactsState.noOfDecryptedContacts + event.data.contacts.length;\n          this.store.dispatch(new UpdateBatchContacts({ contact_list: event.data.contacts }));\n          if (this.contactsState.totalContacts > totalDecryptedContacts) {\n            this.store.dispatch(\n              new ContactsGet({\n                limit: 20,\n                offset: totalDecryptedContacts,\n                isDecrypting: true,\n              }),\n            );\n          }\n        }\n      } else if (event.data.getKeyInfoFromPublicKey) {\n        // Handling error\n        if (event.data.error) {\n          if (this.subjects[event.data.subjectId]) {\n            this.subjects[event.data.subjectId].error(event.data.errorMessage);\n          }\n        } else if (this.subjects[event.data.subjectId]) {\n          this.subjects[event.data.subjectId].next(event.data.keyInfo);\n          this.subjects[event.data.subjectId].complete();\n          delete this.subjects[event.data.subjectId];\n        }\n      } else if (event.data.generateKeysForEmail) {\n        // Handling error\n        if (event.data.error) {\n          if (this.subjects[event.data.subjectId]) {\n            this.subjects[event.data.subjectId].error(event.data.errorMessage);\n          }\n        } else if (this.subjects[event.data.subjectId]) {\n          this.subjects[event.data.subjectId].next(event.data.keys);\n          this.subjects[event.data.subjectId].complete();\n          delete this.subjects[event.data.subjectId];\n        }\n      } else if (event.data.encryptedForPGPMimeContent) {\n        this.store.dispatch(\n          new UpdatePGPMimeEncrytion({\n            isPGPMimeInProgress: false,\n            encryptedContent: event.data.data,\n            draftId: event.data.draftId,\n          }),\n        );\n      } else if (event.data.decryptedPrivateKey) {\n        this.handleObservable(event.data.subjectId, event.data);\n      } else if (event.data.validatedPrivateKey) {\n        this.handleObservable(event.data.subjectId, event.data);\n      } else if (event.data.encryptedPrivateKey) {\n        this.handleObservable(event.data.subjectId, event.data);\n      }\n    };\n  }\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport Quill from 'quill';\nimport * as parseEmail from 'email-addresses';\n\nimport { CreateFolderComponent } from '../../mail/dialogs/create-folder/create-folder.component';\nimport { PaymentFailureNoticeComponent } from '../../mail/dialogs/payment-failure-notice/payment-failure-notice.component';\nimport { Folder } from '../models';\nimport { AppState, GlobalPublicKey, PlanType, PricingPlan, UserState } from '../datatypes';\nimport { NotificationService } from './notification.service';\nimport bcrypt from 'bcryptjs';\nimport { untilDestroyed } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\n\n// image format for retrieving custom attributes\n\nconst BaseImageFormat = Quill.import('formats/image');\nconst ImageFormatAttributesList = ['alt', 'height', 'width', 'style'];\n\nexport class ImageFormat extends BaseImageFormat {\n  static formats(domNode: any) {\n    return ImageFormatAttributesList.reduce(function (formats: any, attribute) {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n\n  format(name: string, value: any) {\n    if (ImageFormatAttributesList.includes(name)) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SharedService {\n  static PRICING_PLANS: any;\n\n  static PRICING_PLANS_ARRAY: Array<PricingPlan> = [];\n\n  static isQuillEditorOpen: boolean;\n\n  isReady: EventEmitter<boolean> = new EventEmitter();\n\n  hideFooter: EventEmitter<boolean> = new EventEmitter();\n\n  hideHeader: EventEmitter<boolean> = new EventEmitter();\n\n  hideEntireFooter: EventEmitter<boolean> = new EventEmitter();\n\n  keyPressed: EventEmitter<any> = new EventEmitter();\n\n  isMail: EventEmitter<boolean> = new EventEmitter();\n\n  isExternalPage: EventEmitter<boolean> = new EventEmitter();\n\n  private paymentFailureModalRef: NgbModalRef;\n\n  username: string;\n\n  //\n  constructor(\n    private http: HttpClient,\n    private modalService: NgbModal,\n    private notificationService: NotificationService,\n    private store: Store<AppState>,\n  ) {\n    /**\n     * Get user's settings\n     */\n    this.store\n      .select(state => state.user)\n      .subscribe((user: UserState) => {\n        this.username = user.username;\n      });\n  }\n\n  sortByDate(data: any[], sortField: string): any[] {\n    return data.sort((a: any, b: any) => new Date(b[sortField]).getTime() - new Date(a[sortField]).getTime());\n  }\n\n  getHashPurePasswordWithUserName(password: string): string {\n    const username = this.username.toLowerCase();\n    const salt = this.createSalt('$2a$10$', username);\n    return bcrypt.hashSync(password, salt);\n  }\n\n  private createSalt(salt: string, username: string): any {\n    username = username.replace(/[^ A-Za-z]/g, '');\n    username = username || 'test';\n    if (salt.length < 29) {\n      return this.createSalt(salt + username, username);\n    }\n    return salt.slice(0, 29);\n  }\n\n  /**\n   * @description\n   * Prime Users - Can create as many folders as they want\n   */\n  openCreateFolderDialog(isPrime: boolean, customFolders: Folder[], callback: { self: any; method: string } = null) {\n    this.openModal(callback);\n  }\n\n  private openModal(callback: { self: any; method: string } = null) {\n    const modal: NgbModalRef = this.modalService.open(CreateFolderComponent, {\n      centered: true,\n      windowClass: 'modal-sm mailbox-modal create-folder-modal',\n    });\n    (<CreateFolderComponent>modal.componentInstance).callback = callback;\n  }\n\n  loadPricingPlans() {\n    if (SharedService.PRICING_PLANS) {\n      return;\n    }\n    this.http.get('./assets/static/pricing-plans.json').subscribe((data: any) => {\n      SharedService.PRICING_PLANS = data;\n      SharedService.PRICING_PLANS_ARRAY = [];\n      Object.keys(data).forEach(key => {\n        if (key !== PlanType.PARAGON) {\n          data[key].name = key;\n          SharedService.PRICING_PLANS_ARRAY.push(data[key]);\n        }\n      });\n    });\n  }\n\n  showPaymentFailureDialog() {\n    if (!this.paymentFailureModalRef) {\n      this.paymentFailureModalRef = this.modalService.open(PaymentFailureNoticeComponent, {\n        centered: true,\n        windowClass: 'modal-sm',\n        backdrop: 'static',\n        keyboard: false,\n      });\n      this.paymentFailureModalRef.result.then(() => (this.paymentFailureModalRef = null));\n    }\n  }\n\n  copyToClipboard(value: string) {\n    const selBox = document.createElement('textarea');\n    selBox.style.position = 'fixed';\n    selBox.style.left = '0';\n    selBox.style.top = '0';\n    selBox.style.opacity = '0';\n    selBox.value = value;\n    document.body.append(selBox);\n    selBox.focus();\n    selBox.select();\n    document.execCommand('copy');\n    selBox.remove();\n    this.notificationService.showSnackBar('Copied to clipboard successfully.');\n  }\n\n  base64ToUint8Array(base64Data: string): Uint8Array {\n    const decodedData: any = atob(base64Data);\n    const { length } = decodedData;\n    const uint8Array = new Uint8Array(length);\n    for (let i = 0; i < length; i++) {\n      uint8Array[i] = decodedData.charCodeAt(i);\n    }\n    return uint8Array;\n  }\n\n  downloadFile(file: File) {\n    const a = document.createElement('a');\n    a.style.display = 'none';\n    const url = window.URL.createObjectURL(file);\n    a.href = url;\n    a.download = file.name;\n    document.body.append(a);\n    a.click();\n    window.URL.revokeObjectURL(url);\n    a.remove();\n  }\n\n  arrayBufferToBase64(buffer: ArrayBuffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const length = bytes.byteLength;\n    for (let i = 0; i < length; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  }\n\n  /**\n   * Parsing UsersKeys is very annoying now due to unstructured BACKEND response for several user types\n   * Parsing UsersKeys with given email and RETURN\n   * @param usersKeys\n   * @param email\n   */\n  parseUserKey(usersKeys: Map<string, GlobalPublicKey>, email: string): any {\n    const parsedData = parseEmail.parseOneAddress(email) as parseEmail.ParsedMailbox;\n    if (!parsedData) {\n      return {\n        isCTemplarKey: false,\n        isExistKey: false,\n        keys: [],\n      };\n    }\n    const parsedEmail = parsedData.address;\n    let isCTemplarKey = false;\n    let isExistKey = false;\n    let keys = [];\n    if (\n      usersKeys.has(parsedEmail) &&\n      !usersKeys.get(parsedEmail).isFetching &&\n      usersKeys.get(parsedEmail).key &&\n      usersKeys.get(parsedEmail).key.length > 0\n    ) {\n      const keyObject: any = usersKeys.get(parsedEmail).key[0];\n      // Check if it has keys, but STILL not sure if it is CTemplar user or NOT\n      if (keyObject.exists) {\n        isExistKey = true;\n      }\n      // Check if it is CTemplar user - checking with `is_enabled` flag,\n      // TODO - Should be improved to check with `is_enabled` flag\n      if (keyObject.internal || keyObject.local) {\n        isCTemplarKey = true;\n      }\n      if (isExistKey) {\n        keys = keyObject.key;\n      }\n    }\n    return {\n      isCTemplarKey,\n      isExistKey,\n      keys,\n    };\n  }\n\n  isRFCStandardValidEmail(address: string): boolean {\n    return !!parseEmail.parseOneAddress({ input: address, rejectTLD: true });\n  }\n}\n\nexport function sortByString(data: any[], field: string) {\n  return data.sort((a, b) => {\n    if (a[field] < b[field]) {\n      return -1;\n    }\n    if (a[field] > b[field]) {\n      return 1;\n    }\n    return 0;\n  });\n}\n\nexport function isComposeEditorOpen(): boolean {\n  return (\n    SharedService.isQuillEditorOpen ||\n    document.querySelectorAll('app-compose-mail-dialog').length > 0 ||\n    document.querySelectorAll('app-compose-mail').length > 0 ||\n    document.querySelectorAll('ngb-modal-window').length > 0\n  );\n}\n\nexport function getCryptoRandom(): number {\n  let array = new Uint32Array(1),\n    max = Math.pow(2, 32),\n    randomValue = window.crypto.getRandomValues(array)[0] / max;\n  return randomValue;\n}\n\nexport const LOADING_IMAGE =\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyBpZD0ibWFzdGVyLWFydGJvYXJkIiB2aWV3Qm94PSIwIDAgMTA2MS40MzE1MTg1NTQ2ODc1IDkxNi42MjI2ODA2NjQwNjI1IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE0MDAgOTgwOyIgd2lkdGg9IjEwNjEuNDMxNTE4NTU0Njg3NXB4IiBoZWlnaHQ9IjkxNi42MjI2ODA2NjQwNjI1cHgiPjxyZWN0IGlkPSJlZS1iYWNrZ3JvdW5kIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTA2MS40MzE1MTg1NTQ2ODc1IiBoZWlnaHQ9IjkxNi42MjI2ODA2NjQwNjI1IiBzdHlsZT0iZmlsbDogd2hpdGU7IGZpbGwtb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7Ii8+PGRlZnM+PHN0eWxlIGlkPSJlZS1nb29nbGUtZm9udHMiPkBpbXBvcnQgdXJsKGh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1BbnRvbjo0MDB8Um9ib3RvK1NsYWI6MTAwLDMwMCw0MDAsNzAwKTs8L3N0eWxlPjxwYXRoIGlkPSJ0ZXh0LXBhdGgtMCIgZD0iTSA3NzguODQ2NDk2NTgyMDMxMiAyMTMuNDYxMjI3NDE2OTkyMiBBIDEwMCAxOCAwIDAgMSA5ODguMzUzMzkzNTU0Njg3NSAyMTMuNDYxMjI3NDE2OTkyMiBBIDEwMCAxOCAwIDAgMSA3NzguODQ2NDk2NTgyMDMxMiAyMTMuNDYxMjI3NDE2OTkyMiBaIiBzdHlsZT0iZmlsbDogbm9uZTsgc3Ryb2tlOiByZWQ7IHN0cm9rZS13aWR0aDogMjsiLz48cGF0aCBpZD0idGV4dC1wYXRoLTEiIGQ9Ik0gNjY0LjU0NjQ0Nzc1MzkwNjIgMzcuOTYxMjI3NDE2OTkyMTkgQSAxMDAgMTkgMCAwIDEgODc2LjU4MTIzNzc5Mjk2ODggMzcuOTYxMjI3NDE2OTkyMTkgQSAxMDAgMTkgMCAwIDEgNjY0LjU0NjQ0Nzc1MzkwNjIgMzcuOTYxMjI3NDE2OTkyMTkiIHN0eWxlPSJmaWxsOiBub25lOyBzdHJva2U6IHJlZDsgc3Ryb2tlLXdpZHRoOiAyOyIvPjxwYXRoIGlkPSJ0ZXh0LXBhdGgtMiIgZD0iTSA3NjUuMzY1MDUxMjY5NTMxMiAyMTEuNzA4NTExMzUyNTM5MDYgQSAxMDAgMTcgMCAwIDEgOTkxLjUwMTc3MDAxOTUzMTIgMjExLjcwODUxMTM1MjUzOTA2IEEgMTAwIDE3IDAgMCAxIDc2NS4zNjUwNTEyNjk1MzEyIDIxMS43MDg1MTEzNTI1MzkwNiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogcmVkOyBzdHJva2Utd2lkdGg6IDI7Ii8+PHBhdGggaWQ9InBhdGgtMSIgZD0iTSA3NjUuMzY1MDUxMjY5NTMxMiAyMTEuNzA4NTExMzUyNTM5MDYgQSAxMDAgMTcgMCAwIDEgOTkxLjUwMTc3MDAxOTUzMTIgMjExLjcwODUxMTM1MjUzOTA2IEEgMTAwIDE3IDAgMCAxIDc2NS4zNjUwNTEyNjk1MzEyIDIxMS43MDg1MTEzNTI1MzkwNiIgc3R5bGU9ImZpbGw6IG5vbmU7IHN0cm9rZTogcmVkOyBzdHJva2Utd2lkdGg6IDI7Ii8+PC9kZWZzPgoKCjxwYXRoIGQ9Ik0gODgwLjM4NzAyMzkyNTc4MTIgMjM5LjkwNjA2Njg5NDUzMTI1IiBzdHlsZT0iZmlsbDogcmdiKDYzLCA2MSwgNjEpOyBmaWxsLW9wYWNpdHk6IDE7IHN0cm9rZTogcmdiKDAsIDAsIDApOyBzdHJva2Utb3BhY2l0eTogMTsgc3Ryb2tlLXdpZHRoOiAwOyBwYWludC1vcmRlcjogZmlsbDsiIHRyYW5zZm9ybT0ibWF0cml4KDEsIDAsIDAsIDEsIDMuMzM1NjQ5MjUxOTM3ODY2LCAtMjYuNjg1MTk1OTIyODUxNTYyKSIvPjxwYXRoIGQ9Ik0gODY0LjE0NDc3NTM5MDYyNSAyMjkuNDg2NTExMjMwNDY4NzUiIHN0eWxlPSJmaWxsOiByZ2IoNjMsIDYxLCA2MSk7IGZpbGwtb3BhY2l0eTogMTsgc3Ryb2tlOiByZ2IoMCwgMCwgMCk7IHN0cm9rZS1vcGFjaXR5OiAxOyBzdHJva2Utd2lkdGg6IDA7IHBhaW50LW9yZGVyOiBmaWxsOyIgdHJhbnNmb3JtPSJtYXRyaXgoMSwgMCwgMCwgMSwgMy4zMzU2NDkyNTE5Mzc4NjYsIC0yNi42ODUxOTU5MjI4NTE1NjIpIi8+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMjUuNzg5NDc0NDg3MzA0Njg4LCAwLCAwLCAyNS43ODk0NzQ0ODczMDQ2ODgsIDQwLjMzNTYyMjU0OTA1NzAxLCAtMjYuNjg1MTk1OTIyODUxNTYyKSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09Im1hdHJpeCgwLjE3MTAzODY0MjUyNTY3MjksIDAsIDAsIDAuMTcxMDM4NjQyNTI1NjcyOSwgMTUuMTMyOTUzMjA1MjkzNjYsIDE2LjI5NzAyMTkzMTY1NDg1KSI+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTUwLjU4OSA5LjA1N2wuMDg0LjA1Mi4wODQuMDU0LjA2OS4wNy4wNjMuMDg0LjA0OC4wODQuMDM2LjEuMDIxLjA5LjAwNi4xMDYtLjAwNi4xLS4xODMgMS4yNDktLjE2Ljk5OC0uMDI2LjEzOS0uMTUzLjg1LS4xOTkuOTkzLS4yMS45OS0uMjI4Ljk3Ny0uMjQ1Ljk4NC0uMjY4Ljk3Ny0uMjcuOTY5LS4zLjk2Mi0uMzA2Ljk2My0uMzI3Ljk1Ni0uMzM2Ljk0OC0uMzY2Ljk0LS4zNy45MzYtLjM5LjkzNS0uMzk5LjkyNy0uNDE3LjkxNC0uNDQuOTE0LS40NDguODk2LS40NjIuOTAyLS40OC44ODQtNy44MzgtNi42MTZMMzQgMjIuNTQ5IDQ5Ljg1NyA5LjE2M2wuMTUyLS4wOTcuMDktLjAzNi4wOTYtLjAyLjEtLjAxaC4wOTlsLjA5Ni4wMjR6TTQxIDM0LjM2M2wtMS4wOSAxLjU3Ny0uNTc0Ljc4Ny0uNTg4Ljc3NS0uNi43NzItLjYwOC43NDktLjYyOC43NTUtLjYzNC43My0uNjQ4LjcyNi0uNjYuNzEtLjY2NS43MDUtLjY4OC42OS0uNjk1LjY3OC0uNzAyLjY3LS43MTIuNjU1LS43MjkuNjQzLS43MzEuNjMtLjc1Mi42MTUtLjc1NC42MDEtLjc2Ni41OTZMMjcgNDloLS4wMDVsLTEuNTE1LTEuMTQ4LS43NTQtLjU5OS0uNzUtLjYxNy0uNzMtLjYzLS43My0uNjQ0LS43MTQtLjY1NS0uNzA4LS42NjMtLjY5NC0uNjg0LS42OC0uNjktLjY3NC0uNy0uNjYzLS43MS0uNjQ1LS43MjUtLjYzNC0uNzM3LS42MjgtLjc0Ni0uNjA4LS43Ni0uNi0uNzYzLS41ODgtLjc4Mi0uNTc0LS43ODYtLjU2LS43OTMtLjU0Ny0uODA1IDguODA3LTcuNTc4TDIzLjg4MyAyNWwxLjM5NyAxLjIwNC4xNjEuMTIzLjE2Ni4xMTUuMTcyLjEwNS4xODEuMDgzLjE4Ny4wNzMuMTk1LjA1Ni4xOTIuMDQuMi4wMzYuMjY3LjAxMi4xOTYtLjAxMi4yLS4wMjMuMTk4LS4wMzMuMTktLjA1NS4xOTItLjA2OC4xOC0uMDgyLjE3Mi0uMDk3LjE3NS0uMTA5LjIxMy0uMTY0TDMwLjExNCAyNWwyLjA3NyAxLjc4NXoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjRkZGIiBkPSJNNi4zNDIgOS4xOTNMMjUgMjUuMDEzbC0yLjU1NyAyLjE2OEwxMy4yMTggMzVsLS43MDYtMS4zMTItLjU0NC0xLjA2My0uNTE2LTEuMDctLjUxMS0xLjA4LS40ODUtMS4wOUw5Ljk4IDI4LjNsLS40NTItMS4xMDUtLjQzNS0xLjExMi0uNDEtMS4xMTMtLjM5NS0xLjEzLS4zODUtMS4xMy0uMzUzLTEuMTM0LS4zNDYtMS4xMzgtLjMyMi0xLjE0OC0uMzAzLTEuMTUxLS4yOC0xLjE2Ni0uMjcxLTEuMTYzLS4yMzctMS4xNjItLjIzLTEuMTctLjEyMy0uNzE2LS4wODEtLjQ2NC0uMTkxLTEuMThMNSA5Ljk0di0uMjE3bC4wMjgtLjExOC4wMzItLjExNC4wNTctLjEuMDYzLS4xLjA4NS0uMDgyLjA5OS0uMDc1LjA5OS0uMDU3LjEwNi0uMDQyLjExMy0uMDI1TDUuNzk4IDloLjEyNGwuMTE3LjAyOS4xMDUuMDM5LjEwNi4wNnpNNDUgOC4yMzdMMjcuNTAzIDIzIDEwIDguMjM3bC45NjItLjM1Ny44NDItLjI5Ljg0LS4yNzkuODUzLS4yNjEuODU2LS4yNDQuODUyLS4yMzUuODYyLS4yMTIuODY3LS4yLjg2Ny0uMTg2Ljg3Mi0uMTY5Ljg3Ni0uMTU0Ljg3My0uMTM2Ljg4MS0uMTIyLjg4Mi0uMTAyLjg4MS0uMDg3Ljg4OC0uMDc1Ljg4Ny0uMDU1Ljg4Ny0uMDM4Ljg4Mi0uMDMuODkzLS4wMDUgMS4wMjMuMDE1Ljg4Ny4wMjYuODg4LjA0Ljg4Ny4wNjEuODgxLjA3Ni44ODIuMDg3Ljg4MS4xMDcuODgyLjEyMi44NzguMTQyLjg3My4xNTcuODcuMTY2Ljg2Ny4xODYuODY3LjIuODYyLjIyNi44NTIuMjMuODU2LjI1Ljg0Ny4yNi44NC4yOC44NDIuMjk1eiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNFNzRDM0MiIGQ9Ik0xOC41OTYgMjQuNjg0bDEuOTgtMS42NzJMNi4xMzQgMTAuODFsLS4wNzEtLjA1LS4wODItLjA0Ni0uMDgyLS4wMy0uMDktLjAyMmgtLjA5NmwtLjA5LjAwOC0uMDg3LjAyLS4wODMuMDMyLS4wNzYuMDQ0LS4wNzcuMDU4LS4wNjUuMDYzLS4wNS4wNzctLjA0My4wNzctLjAyNS4wODgtLjAyMi4wOTF2LjE2OGwuMTI5LjkwNy4xNDcuOTEuMDYzLjM1OC4wOTYuNTUzLjE3OC45MDIuMTgzLjg5Ni4yMS44OTcuMjE2Ljg5OS4yMzUuODg4LjI1Ljg4Ni4yNjcuODc3LjI3My44NzQuMjk4Ljg3Mi4zMDYuODcyLjMxNy44NTguMzM3Ljg1OC4zNS44NTIuMzY5LjgzNy4zNzQuODQxLjM5Ni44MzMuNC44MjUuNDIuODIuNTQ3IDEuMDEyIDcuMTQtNi4wMzF6TTM5LjgwNCAzNi42bDEuMDM5LTEuNDc3LTguMzk1LTcuMDk4LTEuOTgtMS42NzItMS4zMyAxLjEyOC0uMjAzLjE1NC0uMTY3LjEwMS0uMTY0LjA5MS0uMTcyLjA3Ny0uMTgzLjA2NC0uMTguMDUyLS4xOS4wMy0uMTkuMDIyLS4xODYuMDExLS4yNTUtLjAxMS0uMTkxLS4wMzMtLjE4My0uMDM5LS4xODYtLjA1Mi0uMTc4LS4wNjktLjE3Mi0uMDc3LS4xNjQtLjA5OS0uMTU4LS4xMDctLjE1NC0uMTE1LTEuMzMtMS4xMjgtMS45OCAxLjY3Mi04LjM5MiA3LjA5OC41MjIuNzU0LjUzMy43NDIuNTQ3LjczNy41Ni43MzEuNTcyLjcxNS41OC43MTMuNTk4LjY5OC42MDQuNjkuNjE1LjY4LjYzMi42NjUuNjQyLjY1NS42NDguNjQ2LjY2MS42NC42NzUuNjIyLjY4MS42MTQuNjk0LjYwMi42OTcuNTkxLjcxNC41NzguNzE5LjU2IDEuNDQzIDEuMDc2aC4wMDZsLjczOC0uNTM3LjczLS41NTguNzE4LS41NjQuNzE3LS41NzQuNjk3LS41OTEuNjk0LS42MDMuNjc4LS42MTMuNjctLjYyNy42NjItLjYzNS42NTUtLjY0Ny42MzUtLjY2LjYyOC0uNjY1LjYxOC0uNjguNjA0LS42ODQuNTk5LS43MDcuNTgtLjcwMS41Ny0uNzIzLjU2MS0uNzI2LjU0Ny0uNzM3ek0yNy41MDMgMjIuMTczTDQ0LjA1MiA4LjE5bC0uNzg3LS4yOTUtLjc5Ni0uMjgtLjc5NS0uMjY0LS44MDEtLjI0OC0uODEtLjIzNi0uODA2LS4yMTgtLjgxNC0uMjE0LS44Mi0uMTktLjgyLS4xNzYtLjgyMy0uMTU3LS44MjYtLjE0OC0uODMxLS4xMzUtLjgzNC0uMTE1LS44MzMtLjEwMi0uODM0LS4wODItLjgzNC0uMDcyLS44MzktLjA1OC0uODQtLjAzOC0uODM5LS4wMjUtLjk2Ny0uMDE0LS44NDUuMDA2LS44MzQuMDI3LS44NC4wMzYtLjgzOC4wNTItLjg0LjA3Mi0uODMzLjA4Mi0uODM0LjA5Ny0uODM0LjExNS0uODI1LjEzLS44MjkuMTQ1LS44MjUuMTYtLjgyLjE3Ni0uODIuMTktLjgxNS4yLS44MDYuMjIzLS44MS4yMy0uODA2LjI0OC0uNzk1LjI2NC0uNzk2LjI3NS0uOTEuMzM5IDE2LjU1NSAxMy45ODN6TTQ5LjkxIDExLjI5N2wtLjAwNS0uMDk2LS4wMi0uMDgzLS4wMzItLjA5LS4wNDQtLjA3OC0uMDU3LS4wNzYtLjA2My0uMDY0LS4wNzctLjA1LS4wNzYtLjA0Ni0uMDktLjAzLS4wODgtLjAyMmgtLjA5bC0uMDkuMDA4LS4wODguMDItLjA4Mi4wMzItLjE0LjA4OC0xNC40NDQgMTIuMjAyIDEuOTggMS42NzIgNy4xNCA2LjAzLjQzNy0uODA1LjQyLS44MjIuNDA4LS44MTcuNDAyLS44MzMuMzgtLjgzNC4zNjMtLjg0NC4zNTYtLjg1Mi4zMzYtLjg1My4zMzQtLjg1OC4zMDYtLjg2My4yOTgtLjg3Mi4yNzktLjg3Ny4yNzMtLjg3OC4yNDYtLjg4Mi4yNDMtLjg5MS4yMjQtLjg5Ny4yMDgtLjg5LjE5MS0uOTAzLjE4LS45MDUuMTQtLjc3NS4wMjUtLjEyNy4xNDUtLjkxLjE2Ny0xLjEzOC4wMDUtLjA5MXptNS4wOS0uMTAydi4yOTRsLS4wMjIuMjk1LS4wMy4yODgtLjIzIDEuNTY4LS4xNjQuOTUxLS4xNzIuOTQ3LS4xOTEuOTQ1LS4yMS45NDQtLjIxNy45NC0uMjM1LjkzNS0uMjU0LjkzLS4yNjguOTI3LS4yNzkuOTI0LS4yOTIuOTE1LS4zMTIuOTE2LS4zMTcuOTEtLjM0NC45MDItLjM1Ljg5Ny0uMzY5Ljg5LS4zODMuODgzLS4zOTMuODgzLS40MDguODcyLS40MjYuODY0LS40MzIuODYtLjQ1MS44NS0uNDY1Ljg0Ny0uNDc2LjgzOS0uNDkyLjgyNS0uNTAzLjgyMi0uNTEzLjgxMS0uNTI4LjgwOS0uNTQ3Ljc5Mi0uNTU1Ljc4Ni0uNTY2Ljc3Ni0uNTguNzctLjU5Ljc2MS0uNjA0Ljc0OC0uNjE1LjczNy0uNjI2LjczMi0uNjQyLjcyMy0uNjQ4LjcwNC0uNjYyLjY5OS0uNjcyLjY5My0uNjguNjctLjY5NS42NjYtLjcwNS42Ni0uNzE0LjY0MS0uNzI0LjYzNS0uNzM4LjYxMy0uNzQ2LjYwOC0uNzUuNTk3LS43NjIuNTgzLS43NzcuNTctLjc4MS41NTgtLjc4OC41NS0uODAzLjUzMy0uODAxLjUxNy0xLjMyLS44NjYtLjc5Ni0uNTM3LS43OS0uNTUtLjc3Ny0uNTY5LS43NjUtLjU3Ny0uNzU0LS41OTctLjc1Mi0uNi0uNzM2LS42MTUtLjcyNy0uNjI3LS43MTktLjYzNi0uNzEtLjY1NC0uNjk0LS42Ni0uNjg3LS42NzEtLjY4LS42ODUtLjY2Mi0uNjk4LS42NTYtLjcwNC0uNjQyLS43MTMtLjYzLS43MjgtLjYyMi0uNzM4LS42MDQtLjc0Mi0uNi0uNzU2LS41ODItLjc2Ny0uNTczLS43NzYtLjU1My0uNzgxLS41NDktLjc5NS0uNTMzLS44LS41MjItLjgwNi0uNTA5LS44MjItLjQ5NS0uODI1LS40ODMtLjgzMy0uNDY1LS44NDQtLjQ2LS44NDctLjQzNy0uODU4LS40MjYtLjg2NC0uNDIxLS44NzItLjM5NC0uODc3LS4zODgtLjg4My0uMzc1LS44ODUtLjM1Ny0uODk3LS4zNDItLjkwMi0uMzMtLjkwMi0uMzEzLS45MTUtLjMtLjkxNi0uMjg1LS45MjItLjI3My0uOTI0LS4yNTQtLjkyNi0uMjQ0LS45MzgtLjIyMS0uOTM1LS4yMTYtLjk0LS4xOTEtLjk1LS4xODQtLjk0NS0uMTY2LS45NDktLjE1My0uOTU0LS4xMzQtLjk1NC0uMDQ0LS41NS0uMDA4LS4yOS4wMTQtLjI5Ni4wMjQtLjI4Ni4wMzgtLjI4OS4wNi0uMjg2LjA2My0uMjkyLjA4LS4yNjYuMDAyLS4wMDkuMTAxLS4yNzQuMTEtLjI3LjEyNi0uMjcuMTM0LS4yNTUuMTUzLS4yNS4xNTgtLjIzNC4xNzgtLjI0LjE4Ni0uMjIyLjE5Ni0uMjEyLjIxMS0uMjA2LjIxNi0uMTkzLjIzLS4xODQuMjM1LS4xNjUuMjQtLjE2Mi4yNTctLjE0NiAxLjU0LS44MDMuNzkyLS4zOS43OTYtLjM3Mi44MDYtLjM1Ny44MDktLjM1NS44Mi0uMzI1LjgyLS4zMjEuODI4LS4zMDUuODMxLS4yOS44NDItLjI3NC44MzctLjI2Mi44NDctLjI0NC44NTMtLjIzMS44NTMtLjIxOC44NTgtLjIwNi44NTktLjE4NC44NjQtLjE3My44NjYtLjE2My44Ny0uMTM3Ljg3MS0uMTMuODczLS4xMTUuODc3LS4wOTYuODc3LS4wODMuODc4LS4wNzEuODgtLjA1Mi44ODMtLjAzNi44NzgtLjAyOC44ODMtLjAwNSAxLjczNi4wMzMuODc3LjAzNi44OC4wNTIuODc4LjA2My44NzcuMDg2Ljg3OC4wOTYuODcyLjExNS44NzIuMTI3Ljg3LjE0My44NjYuMTU2Ljg2My4xNzYuODY3LjE4NS44NS4yMDYuODU5LjIxNy44NDcuMjMxLjg0NC4yNDIuODQ4LjI2NC44My4yNzUuODM1LjI4Ni44MjguMzA4LjgyNi4zMTQuODE0LjMzNS44MTUuMzQ3LjguMzU0LjgwMi4zOC43ODcuMzg1Ljc5LjQwMi43NzYuNDEyLjQ3LjI4Ni4yMzYuMTY4LjIzLjE3OS4yMTUuMTkyLjIxLjIwNi4xOTcuMjEuMTkyLjIyNS4xNzIuMjI4LjE2NC4yNDUuMTUzLjI1LjE0LjI1Ni4xMjUuMjY0LjExLjI2Ni4xMDQuMjc4LjAxMy4wNDR2LjAwM2wuMDY2LjIyOC4wNzQuMjg2LjA1NC4yODQuMDQ3LjI4OC4wMjQuMjk0LjAxNC4yOXoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjMDAwIiBkPSJNNTMuODU1IDkuNjg1bC0uMTU3LS4xMjMtLjE2NS0uMTE3LS4xNzItLjEwMy0uMTc2LS4wOTFMNTMgOS4xNzNsLS4xOS0uMDYzLS4xOS0uMDQ2LS4xOTYtLjAzOS0uMTk0LS4wMThMNTIuMDI3IDlsLS4xOTYuMDA3LS4xOTUuMDI1LS4xOTYuMDMyLS4xOTcuMDUyLS4xOS4wNjQtLjE3Ni4wNzgtLjE4NC4wOTgtLjE2NS4xMDMtLjI3Ny4yMDgtMS41IDEuMjg4LTE0LjM2NSAxMi4zMy0zLjkzNSAzLjM3OC0xLjMyMiAxLjE0LS4yMDIuMTU1LS4xNjUuMTAzLS4xNjUuMDkxLS4xNy4wNzgtLjE4My4wNjMtLjE3OS4wNTMtLjE4OC4wMzItLjE5LjAyLS4xODUuMDEyLS4yNTItLjAxMS0uMTktLjAzMi0uMTgzLS4wNC0uMTg0LS4wNTItLjE3Ni0uMDctLjE3Mi0uMDc4LS4xNjMtLjA5OC0uMTU5LS4xMS0uMTUyLS4xMTYtMS4zMjItMS4xNC0zLjkzNS0zLjM3OEw2LjI1IDEwLjk1NSA0Ljc1MSA5LjY2N2wtLjE1OC0uMTI0LS4xNjYtLjExNi0uMTctLjEwNS0uMTc2LS4wODItLjE5LS4wNzgtLjE5LS4wNi0uMTktLjA0NS0uMTk2LS4wMzktLjE5Ny0uMDExTDIuOTE3IDlsLS4xOTcuMDExLS4xOTYuMDItLjE5Ny4wNDctLjE5NC4wNS0uMTg2LjA2Ni0uMTgzLjA4NC0uMTc2LjA5LS4xNy4xMS0uMTU5LjExNkwxIDkuODI3bDQuNTQ3IDMuOTAzLjAwNi4wMDUgMTMuMDkzIDExLjI0IDMuOTM0IDMuMzc4IDEuNjY1IDEuNDMuMjEuMTY5LjIxNC4xNjIuMjIxLjE0Mi4yMzUuMTM3LjIzNC4xMi4yNDYuMTA2LjI0OC4wOTYuMjUzLjA4NC4yNi4wNjQuMjU4LjA1My4yNi4wNDUuMjY1LjAyNi4zNTMuMDEzLjI2Mi0uMDEzLjI2My0uMDE5LjI2Ni0uMDMyLjI2LS4wNTIuMjYtLjA2NC4yNTMtLjA3OC4yNDYtLjA5MS4yNDgtLjEwMy4yNC0uMTE2LjIyNy0uMTMuMjI4LS4xMzguMjIxLS4xNTUuMjgtLjIyNiAxLjY2NC0xLjQzIDMuOTM0LTMuMzc4IDEzLjA5NS0xMS4yNC4wMDQtLjAwNUw1NCA5LjgyN3oiIG9wYWNpdHk9Ii4xMiIvPgogICAgPC9nPjxwYXRoIGZpbGw9IiNjZmQwZDIiIGQ9Ik0yMCwzNWMtOC4yNzEsMC0xNS02LjcyOS0xNS0xNVMxMS43MjksNSwyMCw1czE1LDYuNzI5LDE1LDE1UzI4LjI3MSwzNSwyMCwzNXogTTIwLDUuMjAzJiMxMDsgICAgQzExLjg0MSw1LjIwMyw1LjIwMywxMS44NDEsNS4yMDMsMjBjMCw4LjE1OSw2LjYzOCwxNC43OTcsMTQuNzk3LDE0Ljc5N1MzNC43OTcsMjguMTU5LDM0Ljc5NywyMCYjMTA7ICAgIEMzNC43OTcsMTEuODQxLDI4LjE1OSw1LjIwMywyMCw1LjIwM3oiPgogIDwvcGF0aD48cGF0aCBmaWxsPSIjY2ZkMGQyIiBkPSJNMjAsMzMuMTI1Yy03LjIzNywwLTEzLjEyNS01Ljg4OC0xMy4xMjUtMTMuMTI1UzEyLjc2Myw2Ljg3NSwyMCw2Ljg3NVMzMy4xMjUsMTIuNzYzLDMzLjEyNSwyMCYjMTA7ICAgIFMyNy4yMzcsMzMuMTI1LDIwLDMzLjEyNXogTTIwLDcuMDc4QzEyLjg3NSw3LjA3OCw3LjA3OCwxMi44NzUsNy4wNzgsMjBjMCw3LjEyNSw1Ljc5NywxMi45MjIsMTIuOTIyLDEyLjkyMiYjMTA7ICAgIFMzMi45MjIsMjcuMTI1LDMyLjkyMiwyMEMzMi45MjIsMTIuODc1LDI3LjEyNSw3LjA3OCwyMCw3LjA3OHoiPgogIDwvcGF0aD48cGF0aCBmaWxsPSIjM2E0ZTYzIiBzdHJva2U9IiMzYTRlNjMiIHN0cm9rZS13aWR0aD0iMC42MDI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik01LjIwMywyMCYjMTA7JiM5OyYjOTsmIzk7YzAtOC4xNTksNi42MzgtMTQuNzk3LDE0Ljc5Ny0xNC43OTdWNUMxMS43MjksNSw1LDExLjcyOSw1LDIwczYuNzI5LDE1LDE1LDE1di0wLjIwM0MxMS44NDEsMzQuNzk3LDUuMjAzLDI4LjE1OSw1LjIwMywyMHoiIHRyYW5zZm9ybT0icm90YXRlKDApIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAyMCAyMCIgdG89IjM2MCAyMCAyMCIgY2FsY01vZGU9InNwbGluZSIga2V5U3BsaW5lcz0iMC40LCAwLCAwLjIsIDEiIGtleVRpbWVzPSIwOzEiIGR1cj0iMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+ICAgICAgCiAgIDwvcGF0aD48cGF0aCBmaWxsPSIjZTc0YzNjIiBzdHJva2U9IiNlNzRjM2MiIHN0cm9rZS13aWR0aD0iMC4yMDI3IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjA3OCwyMCYjMTA7ICBjMC03LjEyNSw1Ljc5Ny0xMi45MjIsMTIuOTIyLTEyLjkyMlY2Ljg3NUMxMi43NjMsNi44NzUsNi44NzUsMTIuNzYzLDYuODc1LDIwUzEyLjc2MywzMy4xMjUsMjAsMzMuMTI1di0wLjIwMyYjMTA7ICBDMTIuODc1LDMyLjkyMiw3LjA3OCwyNy4xMjUsNy4wNzgsMjB6IiB0cmFuc2Zvcm09InJvdGF0ZSgwKSI+CiAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDIwIDIwIiB0bz0iMzYwIDIwIDIwIiBkdXI9IjEuOHMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgICA8L3BhdGg+PC9nPjwvc3ZnPg==';\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\n\nimport { apiUrl } from '../../shared/config';\nimport { Timezone } from '../datatypes';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TimezoneService {\n  constructor(private http: HttpClient) {}\n\n  getTimezones() {\n    return this.http.get<Timezone[]>(`${apiUrl}data/timezones/`).pipe(map((item: any) => item.timezones));\n  }\n}\n","import { Observable, throwError as observableThrowError } from 'rxjs';\nimport { Injectable, Injector } from '@angular/core';\nimport {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest,\n  HttpResponse,\n} from '@angular/common/http';\nimport { Store } from '@ngrx/store';\nimport { catchError, tap } from 'rxjs/operators';\n\nimport {\n  Logout,\n  PaymentFailure,\n  StopGettingUnreadMailsCount,\n  SetAuthenticatedState,\n  ClearMailsOnLogout,\n} from '../actions';\nimport { AppState, AuthState } from '../datatypes';\nimport { apiUrl } from '../../shared/config';\nimport { WebsocketService } from '../../shared/services/websocket.service';\n\nimport { UsersService } from './users.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TokenInterceptor implements HttpInterceptor {\n  private authService: UsersService;\n\n  private isAuthenticated = false;\n\n  constructor(private injector: Injector, private store: Store<AppState>, private websocketService: WebsocketService) {\n    this.store\n      .select(state => state.auth)\n      .pipe()\n      .subscribe((authState: AuthState) => {\n        this.isAuthenticated = authState.isAuthenticated;\n      });\n  }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    this.authService = this.injector.get(UsersService);\n    if (!request.url.includes('emails/secure-message')) {\n      request = request.clone({\n        withCredentials: true,\n      });\n    }\n\n    return next.handle(request).pipe(\n      tap(event => {\n        if (event instanceof HttpResponse) {\n          if (\n            event.ok &&\n            event.url.includes(apiUrl) &&\n            !event.url.includes('auth/sign-out') &&\n            !event.url.includes('auth/sign-in') &&\n            !event.url.includes('auth/check-username') &&\n            !event.url.includes('emails/secure-message') &&\n            !this.isAuthenticated\n          ) {\n            this.store.dispatch(new SetAuthenticatedState({ isAuthenticated: true }));\n          }\n        }\n      }),\n      catchError((error: any) => {\n        if (error instanceof HttpErrorResponse) {\n          if (error.status === 401 && !error.url.includes('auth/sign-out')) {\n            this.websocketService.disconnect();\n            this.store.dispatch(new ClearMailsOnLogout());\n            this.store.dispatch(new Logout({ session_expired: true }));\n          } else if (error.status === 423) {\n            this.store.dispatch(new StopGettingUnreadMailsCount());\n            this.store.dispatch(new PaymentFailure());\n          }\n        }\n        if (error.error.error) {\n          error.error = error.error.error.error;\n        } else if (error.error.detail) {\n          error.error = error.error.detail;\n        }\n        return observableThrowError(error);\n      }),\n    );\n  }\n}\n","import { HttpClient, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { distinctUntilChanged, map, tap } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport * as bcrypt from 'bcryptjs';\nimport * as Sentry from '@sentry/browser';\n\nimport { LogInSuccess } from '../actions';\nimport {\n  apiUrl,\n  PRIMARY_DOMAIN,\n  PROMO_CODE_KEY,\n  REFFERAL_CODE_KEY,\n  REFFERAL_ID_KEY,\n  JWT_AUTH_COOKIE,\n  REMEMBER_ME,\n} from '../../shared/config';\nimport { AppState, AutoResponder, Contact, Settings, AuthState, Domain } from '../datatypes';\nimport { Filter } from '../models/filter.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UsersService {\n  private userKey: string;\n\n  constructor(private http: HttpClient, private router: Router, private store: Store<AppState>) {\n    this.store\n      .select(state => state.auth)\n      .pipe(distinctUntilChanged((previous, current) => previous.isAuthenticated === current.isAuthenticated))\n      .subscribe((authState: AuthState) => {\n        if (authState.isAuthenticated && this.getUserKey()) {\n          this.store.dispatch(new LogInSuccess({}));\n        }\n      });\n  }\n\n  setTokenExpiration() {\n    const expiration = new Date().getTime() + 1000 * 60 * 60 * 3; // set 3 hours expiration token time.\n    localStorage.setItem('token_expiration', expiration.toString());\n  }\n\n  refreshToken(): Observable<any> {\n    if (this.doesHttpOnlyCookieExist(JWT_AUTH_COOKIE)) {\n      const body = {};\n      const url = `${apiUrl}auth/refresh/`;\n      return this.http.post<any>(url, body).pipe(\n        tap(() => {\n          this.setTokenExpiration();\n        }),\n      );\n    }\n    return of({});\n  }\n\n  isTokenExpired() {\n    return +localStorage.getItem('token_expiration') < new Date().getTime();\n  }\n\n  signIn(body: any): Observable<any> {\n    const requestData: any = { ...body };\n    requestData.username = this.trimUsername(requestData.username);\n    requestData.password = this.hashData(requestData);\n    const url = `${apiUrl}auth/sign-in/`;\n    return this.http.post<any>(url, requestData).pipe(\n      tap(data => {\n        if (data.token) {\n          this.setLoginData(body);\n        }\n      }),\n    );\n  }\n\n  trimUsername(username: string) {\n    username = username.toLowerCase();\n    if (username.split('@')[1] === PRIMARY_DOMAIN) {\n      username = username.split('@')[0];\n    }\n    return username;\n  }\n\n  private hashData(requestData: any, field = 'password'): string {\n    const username = requestData.username.toLowerCase();\n    const salt = this.createSalt('$2a$10$', username);\n    return bcrypt.hashSync(requestData[field], salt);\n  }\n\n  private createSalt(salt: string, username: string): any {\n    username = username.replace(/[^ A-Za-z]/g, '');\n    username = username || 'test';\n    if (salt.length < 29) {\n      return this.createSalt(salt + username, username);\n    }\n    return salt.slice(0, 29);\n  }\n\n  private setLoginData(requestData: any) {\n    this.userKey = btoa(requestData.password);\n    this.setTokenExpiration();\n    localStorage.setItem('user_key', this.userKey);\n    localStorage.removeItem(PROMO_CODE_KEY);\n    localStorage.removeItem(REFFERAL_CODE_KEY);\n  }\n\n  signOut() {\n    this.router.navigateByUrl('/signin');\n    localStorage.removeItem('token_expiration');\n    localStorage.removeItem('user_key');\n    localStorage.removeItem('ctemplar_mail');\n    sessionStorage.removeItem('ctemplar_mail');\n    localStorage.removeItem(PROMO_CODE_KEY);\n    localStorage.removeItem(REMEMBER_ME);\n  }\n\n  expireSession() {\n    this.userKey = null;\n    localStorage.removeItem('user_key');\n    localStorage.removeItem('ctemplar_mail');\n    sessionStorage.removeItem('ctemplar_mail');\n    localStorage.removeItem(REMEMBER_ME);\n    this.router.navigateByUrl('/signin');\n    return this.http.get(`${apiUrl}auth/sign-out/`);\n  }\n\n  onBeforeLoader(e: any) {\n    const confirmationMessage =\n      \"If you close the window now all the progress will be lost and your account won't be created.\";\n    (e || window.event).returnValue = confirmationMessage; // Gecko + IE\n    return confirmationMessage; // Gecko + Webkit, Safari, Chrome etc.\n  }\n\n  signUp(user: any): Observable<any> {\n    const requestData = { ...user, timezone_offset: new Date().getTimezoneOffset() };\n    const referralCode = localStorage.getItem(REFFERAL_CODE_KEY);\n    if (referralCode) {\n      requestData[REFFERAL_CODE_KEY] = referralCode;\n    }\n    requestData.password = this.hashData(requestData);\n    return this.http.post<any>(`${apiUrl}auth/sign-up/`, this.updateSignupDataWithPromo(requestData)).pipe(\n      tap(() => {\n        this.setLoginData(user);\n      }),\n    );\n  }\n\n  recoverPassword(data: any): Observable<any> {\n    return this.http.post<any>(`${apiUrl}auth/recover/`, data);\n  }\n\n  resetPassword(data: any): Observable<any> {\n    const requestData = { ...data };\n    requestData.password = this.hashData(requestData);\n    return this.http.post<any>(`${apiUrl}auth/reset/`, requestData).pipe(\n      tap(() => {\n        this.setLoginData(data);\n      }),\n    );\n  }\n\n  changePassword(data: any): Observable<any> {\n    const requestData = { ...data };\n    requestData.old_password = this.hashData(requestData, 'old_password');\n    requestData.password = this.hashData(requestData, 'password');\n    requestData.confirm_password = this.hashData(requestData, 'confirm_password');\n    delete requestData.username;\n    return this.http.post<any>(`${apiUrl}auth/change-password/`, requestData).pipe(\n      tap(() => {\n        this.setLoginData(data);\n      }),\n    );\n  }\n\n  verifyToken(): Observable<any> {\n    const body = { token: localStorage.getItem('token') };\n    const url = `${apiUrl}auth/verify/`;\n    return this.http.post<any>(url, body);\n  }\n\n  getUserKey(): string {\n    return this.userKey || localStorage.getItem('user_key');\n  }\n\n  getNecessaryTokenUrl(url: string) {\n    url = url.replace(apiUrl, '');\n    const authenticatedUrls: string[] = [\n      'users/myself/',\n      'users/users/',\n      'users/payment-method/',\n      'users/payment-method/add/',\n      'users/payment-method/delete/',\n      'users/whitelist/',\n      'users/blacklist/',\n      'users/contact',\n      'users/bulk-contact/create/',\n      'users/filters/',\n      'emails/messages/',\n      'emails/mailboxes',\n      'emails/custom-folder',\n      'emails/unread/',\n      'emails/customfolder-message-count/',\n      'users/settings',\n      'emails/attachments',\n      'emails/keys',\n      'auth/upgrade',\n      'auth/change-password',\n      'auth/delete',\n      'emails/domains',\n      'search/messages',\n      'domains/verify',\n      'emails/mailbox-order',\n      'emails-forward/send-verification-code',\n      'emails-forward/verify-verification-code',\n      'emails/folder-order',\n      'emails/empty-folder',\n      'users/autoresponder',\n      'users/invoices',\n      'auth/sign-out/',\n      'auth/add-user/',\n      'auth/update-user/',\n      'emails/domain-users/',\n      'auth/otp-secret/',\n      'auth/enable-2fa/',\n      'users/contact-bulk-update/',\n      'emails/delete-message/',\n      'users/prorated',\n      'btc-wallet/create/',\n      'promo-code/validate',\n      'users/invites/',\n      'notifications',\n    ];\n    if (authenticatedUrls.includes(url)) {\n      return true;\n    }\n    let authenticated = false;\n    authenticatedUrls.forEach(item => {\n      if (url.includes(item)) {\n        authenticated = true;\n      }\n    });\n    return authenticated;\n  }\n\n  getAccounts(id: string) {\n    return this.http.get<any>(`${apiUrl}users/users/${id}/`);\n  }\n\n  getAccountDetails() {\n    return this.http.get<any>(`${apiUrl}users/myself/`).pipe(map(data => data.results));\n  }\n\n  getWhiteList(limit = 0, offset = 0) {\n    const url = `${apiUrl}users/whitelist/?limit=${limit}&offset=${offset}`;\n    const body = {};\n    return this.http.get<any>(url, body);\n  }\n\n  addWhiteList(email: string, name: string) {\n    const url = `${apiUrl}users/whitelist/`;\n    const body = { email, name };\n    return this.http.post<any>(url, body);\n  }\n\n  updateSettings(data: Settings) {\n    return this.http.patch<any>(`${apiUrl}users/settings/${data.id}/`, data);\n  }\n\n  deleteWhiteList(id: number) {\n    const url = `${apiUrl}users/whitelist/${id}/`;\n    const body = {};\n    return this.http.delete<any>(url, body);\n  }\n\n  getBlackList(limit = 0, offset = 0) {\n    const url = `${apiUrl}users/blacklist/?limit=${limit}&offset=${offset}`;\n    const body = {};\n    return this.http.get<any>(url, body);\n  }\n\n  addBlackList(email: string, name: string) {\n    const url = `${apiUrl}users/blacklist/`;\n    const body = { email, name };\n    return this.http.post<any>(url, body);\n  }\n\n  deleteBlackList(id: number) {\n    const url = `${apiUrl}users/blacklist/${id}/`;\n    const body = {};\n    return this.http.delete<any>(url, body);\n  }\n\n  getContact(limit = 0, offset = 0, query = '') {\n    return this.http.get<any>(`${apiUrl}users/contacts/?limit=${limit}&offset=${offset}&q=${query}`);\n  }\n\n  getEmailContacts() {\n    return this.http.get<any>(`${apiUrl}users/contacts-v1/`);\n  }\n\n  updateBatchContacts(data: any) {\n    return this.http.post<any>(`${apiUrl}users/contact-bulk-update/`, data);\n  }\n\n  getInvoices() {\n    return this.http.get<any>(`${apiUrl}users/invoices/`);\n  }\n\n  getUpgradeAmount(data: any) {\n    return this.http.post<any>(`${apiUrl}users/prorated/`, data);\n  }\n\n  validatePromoCode(data: any) {\n    return this.http.post<any>(`${apiUrl}promo-code/validate/`, data);\n  }\n\n  getInviteCodes() {\n    return this.http.get<any>(`${apiUrl}users/invites/`).pipe(map(response => response.results));\n  }\n\n  generateInviteCodes() {\n    return this.http.post<any>(`${apiUrl}users/invites/`, {});\n  }\n\n  addContact(payload: Contact) {\n    const url = `${apiUrl}users/contacts/`;\n    if (payload.id) {\n      return this.http.patch<any>(`${url}${payload.id}/`, payload);\n    }\n    return this.http.post<any>(url, payload);\n  }\n\n  deleteContact(ids: string) {\n    if (ids === 'all') {\n      return this.http.delete<any>(`${apiUrl}users/contacts/?selectAll=true`);\n    }\n    return this.http.delete<any>(`${apiUrl}users/contacts/?id__in=${ids}`);\n  }\n\n  notifyContact(payload: any) {\n    return this.http.post<any>(`${apiUrl}notify-contacts/`, payload);\n  }\n\n  importContacts(data: any) {\n    const formData = new FormData();\n    formData.append('csv_file', data.file);\n    formData.append('provider', data.provider);\n\n    const request = new HttpRequest('POST', `${apiUrl}users/bulk-contact/create/`, formData);\n\n    return this.http.request(request);\n  }\n\n  checkUsernameAvailability(username: string): Observable<any> {\n    return this.http.post<any>(`${apiUrl}auth/check-username/`, { username });\n  }\n\n  addOrganizationUser(data: any): Observable<any> {\n    data.password = this.hashData(data, 'password');\n    return this.http.post<any>(`${apiUrl}auth/add-user/`, data);\n  }\n\n  updateOrganizationUser(data: any): Observable<any> {\n    return this.http.post<any>(`${apiUrl}auth/update-user/`, {\n      user_id: data.user_id,\n      recovery_email: data.recovery_email,\n    });\n  }\n\n  deleteOrganizationUser(data: any): Observable<any> {\n    return this.http.post<any>(`${apiUrl}auth/delete-user/`, { username: data.username });\n  }\n\n  getOrganizationUsers(limit = 0, offset = 0) {\n    const url = `${apiUrl}emails/domain-users/?limit=${limit}&offset=${offset}`;\n    return this.http.get<any>(url);\n  }\n\n  upgradeAccount(data: any) {\n    return this.http.post<any>(`${apiUrl}auth/upgrade/`, this.updateSignupDataWithPromo(data));\n  }\n\n  private updateSignupDataWithPromo(data: any = {}) {\n    // Get cookie for cjevent\n    const referralId = document.cookie.split('; ').find(row => row.startsWith(REFFERAL_ID_KEY));\n    if (referralId) {\n      data[REFFERAL_ID_KEY] = referralId.split('=')[1];\n    }\n    return data;\n  }\n\n  getFilters(limit = 0, offset = 0) {\n    const url = `${apiUrl}users/filters/?limit=${limit}&offset=${offset}`;\n    return this.http.get<any>(url);\n  }\n\n  createFilter(data: Filter) {\n    const url = `${apiUrl}users/filters/`;\n    if (data.id) {\n      return this.http.patch<any>(`${url}${data.id}/`, data);\n    }\n    return this.http.post<any>(url, data);\n  }\n\n  deleteFilter(filterId: number) {\n    return this.http.delete<any>(`${apiUrl}users/filters/${filterId}/`);\n  }\n\n  updateFilterOrder(data: any) {\n    return this.http.post<any>(`${apiUrl}emails/filter-order/`, data);\n  }\n\n  deleteAccount(data: any) {\n    const requestData = { ...data };\n    requestData.password = this.hashData(requestData);\n    delete requestData.username;\n    return this.http.post<any>(`${apiUrl}auth/delete/`, requestData);\n  }\n\n  getDomains(limit = 0, offset = 0) {\n    const url = `${apiUrl}emails/domains/?limit=${limit}&offset=${offset}`;\n    const body = {};\n    return this.http.get<any>(url, body);\n  }\n\n  createDomain(domain: string) {\n    const body = { domain };\n    return this.http.post<any>(`${apiUrl}emails/domains/`, body);\n  }\n\n  updateDomain(domain: Domain) {\n    return this.http.patch<any>(`${apiUrl}emails/domains/${domain.id}/`, domain);\n  }\n\n  readDomain(id: number) {\n    const url = `${apiUrl}emails/domains/${id}/`;\n    const body = {};\n    return this.http.get<any>(url, body);\n  }\n\n  deleteDomain(id: number) {\n    return this.http.delete<any>(`${apiUrl}emails/domains/${id}/`);\n  }\n\n  verifyDomain(id: number) {\n    const url = `${apiUrl}domains/verify/${id}/`;\n    const body = {};\n    return this.http.get<any>(url, body);\n  }\n\n  sendEmailForwardingCode(email: string): Observable<any> {\n    const body = { email };\n    return this.http.post(`${apiUrl}emails-forward/send-verification-code/`, body);\n  }\n\n  verifyEmailForwardingCode(email: string, code: number): Observable<any> {\n    const body = { email, code };\n    return this.http.post(`${apiUrl}emails-forward/verify-verification-code/`, body);\n  }\n\n  saveAutoResponder(autoResponder: AutoResponder): Observable<any> {\n    if (autoResponder.id) {\n      return this.http.patch<any>(`${apiUrl}users/autoresponder/${autoResponder.id}/`, autoResponder);\n    }\n    return this.http.post<any>(`${apiUrl}users/autoresponder/`, autoResponder);\n  }\n\n  getCaptcha(): Observable<any> {\n    return this.http.get<any>(`${apiUrl}auth/captcha/`);\n  }\n\n  get2FASecret(): Observable<any> {\n    return this.http.get<any>(`${apiUrl}auth/otp-secret/`);\n  }\n\n  update2FA(data: any): Observable<any> {\n    data.password = this.hashData(data);\n    return this.http.post<any>(`${apiUrl}auth/enable-2fa/`, data);\n  }\n\n  verifyCaptcha(data: any): Observable<any> {\n    return this.http.post<any>(`${apiUrl}auth/captcha-verify/`, data);\n  }\n\n  getUserNotifications() {\n    return this.http.get<any>(`${apiUrl}notifications`);\n  }\n\n  getPaymentMethods() {\n    return this.http.get<any>(`${apiUrl}users/payment-method/`);\n  }\n\n  addPaymentMethod(data: any) {\n    return this.http.post<any>(`${apiUrl}users/payment-method/add/`, { stripe_token: data });\n  }\n\n  deletePaymentMethod(data: any) {\n    return this.http.post<any>(`${apiUrl}users/payment-method/delete/`, { card_id: data });\n  }\n\n  makePaymentPrimary(data: any) {\n    return this.http.post<any>(`${apiUrl}users/payment-method/make-primary/`, { card_id: data });\n  }\n\n  contactFetchKeys(data: any) {\n    return this.http.get<any>(`${apiUrl}users/contact-keys/?contact_id=${data.id}`);\n  }\n\n  contactAddKeys(data: any) {\n    if (data.id) {\n      return this.http.patch<any>(`${apiUrl}users/contact-keys/${data.id}/`, data);\n    }\n    return this.http.post<any>(`${apiUrl}users/contact-keys/`, data);\n  }\n\n  contactRemoveKeys(data: any) {\n    return this.http.delete<any>(`${apiUrl}users/contact-keys/${data.id}/`);\n  }\n\n  contactBulkUpdateKeys(data: any) {\n    return this.http.post<any>(`${apiUrl}users/contact-key-bulk-update/`, { contact_key_list: data });\n  }\n\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      // TODO: send the error to remote logging infrastructure\n      Sentry.captureException(error.originalError || error);\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n\n  // TODO\n  // This part is almost trick, but would work perfectly, needs to update later\n  doesHttpOnlyCookieExist(cookiename: string) {\n    const d = new Date();\n    d.setTime(d.getTime() + 1000);\n    const expires = `expires=${d.toUTCString()}`;\n\n    document.cookie = `${cookiename}=new_value;path=/;${expires}`;\n    if (!document.cookie.includes(`${cookiename}=`)) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { RouterStateSerializer, StoreRouterConnectingModule } from '@ngrx/router-store';\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\nimport { StoreModule, ActionReducer, MetaReducer, INIT } from '@ngrx/store';\n\nimport { AppConfig } from '../../environments/environment';\n\nimport { logoutReducer } from './reducers/auth.reducers';\n\nimport { CustomSerializer, effects, reducers } from '.';\n\nimport { REMEMBER_ME, SYNC_DATA_WITH_STORE } from '../shared/config';\n\nimport { MailActionTypes } from '../store/actions/mail.actions';\n\nexport function localStorageSyncReducer(reducer: ActionReducer<any>): ActionReducer<any> {\n  return function (state, action: any) {\n    const nextState = reducer(state, action);\n\n    if (\n      action.type === MailActionTypes.UPDATE_PGP_DECRYPTED_CONTENT &&\n      action['payload'].isDecryptingAllSubjects &&\n      !action['payload'].isPGPInProgress\n    ) {\n      const isNeedSync = localStorage.getItem(SYNC_DATA_WITH_STORE) === 'true' ? true : false;\n      if (isNeedSync) {\n        const isRememberMe = localStorage.getItem(REMEMBER_ME) === 'true' ? true : false;\n        const strDecryptedSubjects = JSON.stringify({ decryptedSubjects: nextState.mail.decryptedSubjects });\n        if (isRememberMe) {\n          localStorage.setItem('ctemplar_mail', strDecryptedSubjects);\n        } else {\n          sessionStorage.setItem('ctemplar_mail', strDecryptedSubjects);\n        }\n      }\n    }\n    return nextState;\n  };\n}\n\nexport function rehydrateMetaReducer(reducer: ActionReducer<any>): ActionReducer<any> {\n  return function (state, action) {\n    const nextState = reducer(state, action);\n    if (action.type === INIT) {\n      const isNeedSync = localStorage.getItem(SYNC_DATA_WITH_STORE) === 'true' ? true : false;\n      const isRememberMe = localStorage.getItem(REMEMBER_ME) === 'true' ? true : false;\n      if (isNeedSync) {\n        const storageValue = isRememberMe\n          ? localStorage.getItem('ctemplar_mail')\n          : sessionStorage.getItem('ctemplar_mail');\n        try {\n          const parsedStorageValue = JSON.parse(storageValue);\n          if (parsedStorageValue && parsedStorageValue['decryptedSubjects']) {\n            const retVal = { ...nextState, mail: { ...nextState.mail, ...parsedStorageValue } };\n            return retVal;\n          }\n        } catch {\n          if (isRememberMe) {\n            localStorage.removeItem('ctemplar_mail');\n          } else {\n            sessionStorage.removeItem('ctemplar_mail');\n          }\n        }\n      } else {\n        if (isRememberMe) {\n          localStorage.removeItem('ctemplar_mail');\n        } else {\n          sessionStorage.removeItem('ctemplar_mail');\n        }\n      }\n    }\n\n    return nextState;\n  };\n}\n\nconst metaReducers: Array<MetaReducer<any, any>> = [rehydrateMetaReducer, localStorageSyncReducer, logoutReducer];\n@NgModule({\n  imports: [\n    EffectsModule.forRoot(effects),\n    StoreModule.forRoot(reducers, { metaReducers }),\n    StoreDevtoolsModule.instrument({ maxAge: 100, logOnly: AppConfig.production }),\n    StoreRouterConnectingModule.forRoot(),\n  ],\n  providers: [{ provide: RouterStateSerializer, useClass: CustomSerializer }],\n})\nexport class AppStoreModule {}\n","import { Action } from '@ngrx/store';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { EMPTY } from 'rxjs/internal/observable/empty';\nimport { Injectable } from '@angular/core';\nimport { map, switchMap } from 'rxjs/operators';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { of } from 'rxjs/internal/observable/of';\n\nimport { Message } from '../shared/services/websocket.service';\n\nexport enum WebSocketActionTypes {\n  WEB_SOCKET_NEW_MESSAGE = '[WEB_SOCKET] New Message',\n  WEB_SOCKET_CLOSE = '[WEB_SOCKET] Close',\n}\n\nexport class WebSocketNewMessage implements Action {\n  readonly type = WebSocketActionTypes.WEB_SOCKET_NEW_MESSAGE;\n\n  constructor(public payload: any) {}\n}\n\nexport class WebSocketClose implements Action {\n  readonly type = WebSocketActionTypes.WEB_SOCKET_CLOSE;\n\n  constructor(public payload: any) {}\n}\n\nexport type WebSocketActionAll = WebSocketNewMessage | WebSocketClose;\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WebSocketEffects {\n  constructor(private actions: Actions) {}\n\n  @Effect()\n  webSocketNewMessage: Observable<any> = this.actions.pipe(\n    ofType(WebSocketActionTypes.WEB_SOCKET_NEW_MESSAGE),\n    map((action: WebSocketNewMessage) => action.payload),\n    switchMap(payload => {\n      return of(EMPTY);\n    }),\n  );\n\n  @Effect()\n  webSocketClose: Observable<any> = this.actions.pipe(\n    ofType(WebSocketActionTypes.WEB_SOCKET_CLOSE),\n    map((action: WebSocketClose) => action.payload),\n    switchMap(() => {\n      return of(EMPTY);\n    }),\n  );\n}\n\nexport interface WebSocketState {\n  message?: Message;\n  isClosed?: boolean;\n}\n\nexport function reducer(state: WebSocketState = {}, action: WebSocketActionAll) {\n  switch (action.type) {\n    case WebSocketActionTypes.WEB_SOCKET_NEW_MESSAGE: {\n      return { message: action.payload, isClosed: false };\n    }\n\n    case WebSocketActionTypes.WEB_SOCKET_CLOSE: {\n      return { isClosed: true, message: null };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","<!-- PAGE SECTION -->\n<section class=\"l-block l-block-text l-block-h-600 gap-p-eq position-relative has-cover decrypt-block\">\n  <div class=\"container position-static\">\n    <div class=\"go-back-holder\">\n      <a routerLink=\"/\" class=\"text-white\" role=\"button\"\n        ><i class=\"icon icon-arrow-left icon-sm mr-2\"></i>Go to ctemplar.com</a\n      >\n    </div>\n    <header\n      *ngIf=\"isMessageExpired; else messageNotExpired\"\n      class=\"l-block-header text-center position-relative mb-md-2\"\n    >\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 px-sm-5 px-md-0\">\n          <h1 class=\"l-block-title text-white text-uppercase\">\n            <strong>This message has expired</strong>\n          </h1>\n        </div>\n      </div>\n    </header>\n\n    <ng-template #messageNotExpired>\n      <ng-container *ngIf=\"!message || !decryptedContent; else displayMessage\">\n        <header class=\"l-block-header text-center position-relative mb-md-2\">\n          <div class=\"row justify-content-center\">\n            <div class=\"col-sm-12 col-md-10 px-sm-5 px-md-0\">\n              <h1 class=\"l-block-title text-white text-uppercase\">\n                <strong>Decrypt Message</strong>\n              </h1>\n            </div>\n          </div>\n        </header>\n        <div class=\"l-block-body px-xs\">\n          <div class=\"l-content-holder l-form-content-holder mx-auto mt-md-0\">\n            <div class=\"form\">\n              <form\n                class=\"decrypt-form position-relative\"\n                [formGroup]=\"decryptForm\"\n                (submit)=\"onSubmit(decryptForm.value)\"\n              >\n                <div class=\"form-group\">\n                  <label for=\"password\" class=\"d-block text-faded text-left hidden-sm-up\">Message password</label>\n                  <div class=\"input-group\">\n                    <input\n                      #passwordInput\n                      formControlName=\"password\"\n                      class=\"form-control form-control-lg border-right-0\"\n                      id=\"password\"\n                      placeholder=\"Message password\"\n                      type=\"password\"\n                      name=\"password\"\n                      aria-describedby=\"passwordToggle\"\n                    />\n                    <span\n                      class=\"input-group-addon password-toggle bg-white text-muted\"\n                      id=\"passwordToggle\"\n                      (click)=\"passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password'\"\n                    >\n                      <i class=\"fa fa-eye\"></i>\n                    </span>\n                  </div>\n                  <span *ngIf=\"decryptForm.controls['password'].errors && showFormErrors\" class=\"validate-message\">\n                    <span\n                      *ngIf=\"decryptForm.controls['password'].errors.required\"\n                      [translate]=\"'login.password_required'\"\n                      >Message password is required.</span\n                    >\n                  </span>\n                </div>\n                <div *ngIf=\"errorMessage\" class=\"login-form__failed l-alert l-alert-danger\">{{ errorMessage }}</div>\n                <div class=\"form-group form-user-actions mt-4 pt-sm-2 text-center\">\n                  <button\n                    class=\"btn btn-gradient-primary btn-lg login-btn\"\n                    role=\"button\"\n                    type=\"submit\"\n                    [disabled]=\"isLoading\"\n                  >\n                    Decrypt\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </ng-container>\n\n      <ng-template #displayMessage>\n        <app-display-secure-message\n          *ngIf=\"!isReplying; else replyMessage\"\n          [message]=\"message\"\n          [decryptedContent]=\"decryptedContent\"\n          [decryptedSubject]=\"decryptedSubject\"\n          [hash]=\"hash\"\n          [secret]=\"secret\"\n          [password]=\"password\"\n          (reply)=\"onReply()\"\n          (expired)=\"onExpired()\"\n        ></app-display-secure-message>\n\n        <ng-template #replyMessage>\n          <app-reply-secure-message\n            [sourceMessage]=\"message\"\n            *ngIf=\"message?.is_subject_encrypted === false || decryptedSubject\"\n            [hash]=\"hash\"\n            [secret]=\"secret\"\n            [senderId]=\"senderId\"\n            (cancel)=\"onCancelReply()\"\n            (replySuccess)=\"onReplySuccess()\"\n          ></app-reply-secure-message>\n        </ng-template>\n      </ng-template>\n    </ng-template>\n  </div>\n</section>\n\n<img *ngIf=\"isLoading\" class=\"loading-icon\" src=\"assets/icons/spinner.svg\" />\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { GetMessage } from '../../store/actions';\nimport { AppState, SecureContent, SecureMessageState } from '../../store/datatypes';\nimport { Mail } from '../../store/models';\nimport { OpenPgpService, SharedService } from '../../store/services';\nimport { DateTimeUtilService } from '../../store/services/datetime-util.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-decrypt-message',\n  templateUrl: './decrypt-message.component.html',\n  styleUrls: ['./decrypt-message.component.scss'],\n})\nexport class DecryptMessageComponent implements OnInit, OnDestroy {\n  decryptForm: FormGroup;\n\n  hash: string;\n\n  secret: string;\n\n  senderId: string;\n\n  message: Mail;\n\n  decryptedContent: string;\n\n  showFormErrors: boolean;\n\n  errorMessage: string;\n\n  isLoading: boolean;\n\n  isMessageExpired: boolean;\n\n  isReplying: boolean;\n\n  decryptedSubject: string;\n\n  secureMessageState: SecureMessageState;\n\n  password = '';\n\n  constructor(\n    private route: ActivatedRoute,\n    private store: Store<AppState>,\n    private formBuilder: FormBuilder,\n    private sharedService: SharedService,\n    private openPgpService: OpenPgpService,\n    private dateTimeUtilService: DateTimeUtilService,\n  ) {}\n\n  ngOnInit() {\n    this.sharedService.hideEntireFooter.emit(true);\n    this.sharedService.isExternalPage.emit(true);\n\n    this.decryptForm = this.formBuilder.group({\n      password: ['', [Validators.required]],\n    });\n\n    this.route.params.pipe(untilDestroyed(this)).subscribe(parameters => {\n      this.hash = parameters.hash;\n      this.secret = parameters.secret;\n      this.senderId = decodeURIComponent(parameters.senderId);\n      this.store.dispatch(new GetMessage({ hash: this.hash, secret: this.secret }));\n    });\n\n    this.store\n      .select(state => state.secureMessage)\n      .pipe(untilDestroyed(this))\n      .subscribe((state: SecureMessageState) => {\n        this.isLoading = state.inProgress || state.isContentDecryptionInProgress;\n        this.errorMessage = state.errorMessage;\n        if (!this.message && state.message) {\n          // message is loaded so check if it has expired\n          if (this.dateTimeUtilService.isDateTimeInPast(state.message.encryption.expires)) {\n            this.isMessageExpired = true;\n          }\n        }\n        this.message = state.message;\n        if (state.decryptedContent) {\n          if (state.decryptedContent.content) {\n            this.decryptedContent = state.decryptedContent.content || '';\n          }\n          if (this.message && this.message.is_subject_encrypted && state.decryptedContent.subject) {\n            this.decryptedSubject = state.decryptedContent.subject || '';\n            this.message.subject = state.decryptedContent.subject || '';\n          }\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideEntireFooter.emit(false);\n    this.sharedService.isExternalPage.emit(false);\n  }\n\n  onSubmit(data: any) {\n    this.showFormErrors = true;\n    this.password = data.password;\n    if (this.decryptForm.valid && this.message) {\n      this.isLoading = true;\n      this.openPgpService.decryptWithOnlyPassword(new SecureContent(this.message), data.password);\n    }\n  }\n\n  onReply() {\n    this.isReplying = true;\n  }\n\n  onCancelReply() {\n    this.isReplying = false;\n  }\n\n  onReplySuccess() {\n    this.isReplying = false;\n  }\n\n  onExpired() {\n    this.isMessageExpired = true;\n  }\n}\n","<div class=\"modal-header justify-content-sm-center align-items-center\">\n  <h3 class=\"modal-title w-100 text-dark title\"><strong>Welcome to CTemplar</strong></h3>\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n    <span aria-hidden=\"true\">&times;</span>\n  </button>\n</div>\n<form [formGroup]=\"changeDisplayNameForm\">\n  <div class=\"modal-body bg-faded\">\n    <div class=\"mb-4 text-holder text-dark text-medium\">\n      <h4 class=\"font-weight-bold\">Backup Your Recovery Key</h4>\n      <p>\n        Please save this recovery key in a safe place, if you forget your password, you can use it to reset your\n        password even if you don't remember your recovery email.\n        <a href=\"https://ctemplar.com/help/answer/what-is-a-recovery-key/\" target=\"_blank\" rel=\"noopener noreferrer\"\n          >Learn more</a\n        >\n      </p>\n      <div class=\"bg-white px-3 py-3\">\n        <span class=\"text-dark\"><b>Recovery key: </b>{{ recoveryKey }}</span>\n        <button mat-icon-button (click)=\"copyToClipboard(recoveryKey)\" class=\"copy-btn\">\n          <i class=\"fas fa-copy font-20px\" ngbTooltip=\"Copy to clipboard\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"text-holder text-dark text-medium\">\n      <h4 class=\"font-weight-bold\" [translate]=\"'create_account.change_display_name'\">Change Your Display Name</h4>\n      <p [translate]=\"'create_account.with_email_address'\">\n        This is the display name that will be shown next to your email address.\n      </p>\n      <div class=\"form\">\n        <div class=\"form-group form-group\">\n          <input\n            class=\"form-control text-dark display-name-input\"\n            id=\"displayName\"\n            autocomplete=\"off\"\n            maxlength=\"32\"\n            [placeholder]=\"'create_account.enter_display_name' | translate\"\n            type=\"text\"\n            name=\"displayName\"\n            formControlName=\"username\"\n          />\n          <span\n            *ngIf=\"\n              changeDisplayNameForm.controls['username'].errors && changeDisplayNameForm.controls['username'].touched\n            \"\n            class=\"validate-message\"\n            [translate]=\"'create_account.display_name_req'\"\n            >Enter a valid display name with maximum 32 characters.\n          </span>\n        </div>\n      </div>\n      <p>\n        <span [translate]=\"'common.email'\">Email</span>: \"{{\n          email | emailFormat: changeDisplayNameForm.controls['username'].value\n        }}\". <br /><span [translate]=\"'create_account.can_change_settings'\"\n          >You can change this in the settings page later.</span\n        >\n      </p>\n    </div>\n  </div>\n  <div class=\"modal-footer justify-content-center\">\n    <div class=\"skip-btn\" (click)=\"activeModal.dismiss()\">SKIP</div>\n    <button\n      class=\"btn btn-danger submit-display-name-btn\"\n      type=\"submit\"\n      (click)=\"submitDisplayNameForm()\"\n      [disabled]=\"!changeDisplayNameForm.valid || inProgress\"\n      [translate]=\"'settings.compose.confirm'\"\n    >\n      Confirm\n    </button>\n    <app-loading-spinner [showSpinner]=\"inProgress\"></app-loading-spinner>\n  </div>\n</form>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { NgbModal, NgbActiveModal, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, AuthState, MailBoxesState } from '../../../store/datatypes';\nimport { Mailbox } from '../../../store/models';\nimport { MailboxSettingsUpdate } from '../../../store/actions';\nimport { SharedService } from '../../../store/services';\nimport { NoWhiteSpaceValidator } from '../../../shared/validators/no-whitespace.validator';\nimport { NOT_FIRST_LOGIN } from '../../../shared/config';\nimport { UseCacheDialogComponent } from '../use-cache-dialog/use-cache-dialog.component';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-display-name-dialog',\n  templateUrl: './display-name-dialog.component.html',\n  styleUrls: ['./display-name-dialog.component.scss'],\n})\nexport class DisplayNameDialogComponent implements OnInit, OnDestroy {\n  changeDisplayNameForm: FormGroup;\n\n  email = 'username@ctemplar.com';\n\n  inProgress: boolean;\n\n  recoveryKey: string;\n\n  private selectedMailbox: Mailbox;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    private store: Store<AppState>,\n    private sharedService: SharedService,\n    private formBuilder: FormBuilder,\n    private modalService: NgbModal,\n  ) {}\n\n  ngOnInit() {\n    this.changeDisplayNameForm = this.formBuilder.group({\n      username: ['', [Validators.required, NoWhiteSpaceValidator.noWhiteSpaceValidator]],\n    });\n\n    this.store\n      .select(state => state.mailboxes)\n      .pipe(untilDestroyed(this))\n      .subscribe((mailboxesState: MailBoxesState) => {\n        this.inProgress = mailboxesState.inProgress;\n        this.selectedMailbox = mailboxesState.currentMailbox;\n        if (this.selectedMailbox) {\n          this.email = this.selectedMailbox.email;\n        } else if (mailboxesState.mailboxes && mailboxesState.mailboxes[0]) {\n          this.email = mailboxesState.mailboxes[0].email;\n        }\n      });\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        this.recoveryKey = authState.recovery_key;\n      });\n  }\n\n  submitDisplayNameForm() {\n    if (!this.selectedMailbox) {\n      this.close();\n      return;\n    }\n    const dispName = this.changeDisplayNameForm.controls.username.value;\n    if (this.changeDisplayNameForm.valid && dispName !== '') {\n      this.selectedMailbox.display_name = dispName;\n      this.store.dispatch(\n        new MailboxSettingsUpdate({ ...this.selectedMailbox, successMsg: 'Display name saved successfully.' }),\n      );\n      this.close();\n    }\n  }\n\n  copyToClipboard(text: string) {\n    this.sharedService.copyToClipboard(text);\n  }\n\n  private close() {\n    this.activeModal.dismiss();\n  }\n\n  openUseCacheConfirmDialog() {\n    const ngbModalOptions: NgbModalOptions = {\n      backdrop: 'static',\n      keyboard: false,\n      centered: true,\n      windowClass: 'modal-sm users-action-modal',\n    };\n    this.modalService.open(UseCacheDialogComponent, ngbModalOptions);\n  }\n\n  ngOnDestroy(): void {\n    /**\n     * Check if first login or fresh login\n     */\n    if (localStorage.getItem(NOT_FIRST_LOGIN) !== 'true') {\n      this.openUseCacheConfirmDialog();\n    }\n  }\n}\n","import { Component } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\nimport { NOT_FIRST_LOGIN, SYNC_DATA_WITH_STORE } from '../../../shared/config';\n\n@Component({\n  selector: 'app-use-cache-dialog',\n  templateUrl: './use-cache-dialog.component.html',\n  styleUrls: ['./use-cache-dialog.component.scss'],\n})\nexport class UseCacheDialogComponent {\n  constructor(public activeModal: NgbActiveModal) {}\n\n  onFlagSaveDecryptedSubject() {\n    localStorage.setItem(SYNC_DATA_WITH_STORE, 'true');\n    localStorage.setItem(NOT_FIRST_LOGIN, 'true');\n    this.activeModal.dismiss();\n  }\n\n  onDismissSaveDecryptedSubject() {\n    localStorage.setItem(NOT_FIRST_LOGIN, 'true');\n    localStorage.setItem(SYNC_DATA_WITH_STORE, 'false');\n    this.activeModal.dismiss();\n  }\n}\n","<!-- Confirm to use cache starts -->\n<div class=\"modal-header\">\n  <h3 class=\"modal-title w-100 text-dark\">\n    <strong>Temporary store decrypted data</strong>\n  </h3>\n</div>\n<div class=\"modal-body bg-faded\">\n  <div class=\"mail-actions-form-holder modal-mail-actions-form-holder\">\n    <div class=\"form-group\">\n      We provide a feature to temporarily store some decrypted data on your local storage for improved speed. If you\n      trust your device, you can safely enable this feature.\n      <a\n        href=\"https://ctemplar.com/help/answer/temporary-store-decrypted-data/\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        >Learn more</a\n      >.\n    </div>\n    <div class=\"form-group text-right mb-0\">\n      <button\n        (click)=\"onDismissSaveDecryptedSubject()\"\n        class=\"btn btn-secondary btn-sm mr-2\"\n        role=\"button\"\n        [translate]=\"'common.no'\"\n      >\n        No\n      </button>\n      <button\n        (click)=\"onFlagSaveDecryptedSubject()\"\n        class=\"btn btn-danger btn-sm\"\n        role=\"button\"\n        [translate]=\"'common.yes'\"\n      >\n        Yes\n      </button>\n    </div>\n  </div>\n</div>\n<!-- /.Confirm to use cache ends -->\n","<div class=\"modal-body bg-faded account-creation\">\n  <img src=\"assets/images/account-creation-img.jpg\" alt=\"\" />\n  <app-progress-bar [active]=\"true\"></app-progress-bar>\n  <div class=\"account-creation-info\">\n    <div\n      class=\"info-box1\"\n      @pageAnimation1\n      (@pageAnimation1.start)=\"onAnimationStart()\"\n      (@pageAnimation1.done)=\"onAnimationDone()\"\n    >\n      <h3 [translate]=\"'account_init.creation_init'\">Account Creation Initiated</h3>\n      <ul>\n        <li [translate]=\"'account_init.encrypted_conn_being'\">\n          Encrypted connection between user and website being verified\n        </li>\n        <li [innerHTML]=\"'account_init.account_creation' | translate\">\n          Account creation in user&apos;s browser initiated\n        </li>\n        <li [innerHTML]=\"'account_init.mailbox_creation' | translate\">\n          Mailbox creation in user&apos;s browser initiated\n        </li>\n      </ul>\n    </div>\n    <div\n      class=\"info-box2\"\n      @pageAnimation2\n      (@pageAnimation2.start)=\"onAnimationStart()\"\n      (@pageAnimation2.done)=\"onAnimationDone()\"\n      *ngIf=\"step >= 1\"\n    >\n      <h3>Account Creation in User's Browser Completed</h3>\n      <ul>\n        <li>\n          <i class=\"fas fa-check\"></i\n          ><span [translate]=\"'account_init.encrypted_conn'\"\n            >Encrypted connection between user and website verified</span\n          >\n        </li>\n        <li>\n          <i class=\"fas fa-check\"></i\n          ><span [innerHTML]=\"'account_init.acc_creation_complete' | translate\"\n            >Account creation in user&apos;s browser complete</span\n          >\n        </li>\n        <li>\n          <i class=\"fas fa-check\"></i\n          ><span [innerHTML]=\"'account_init.mail_creation_comp' | translate\"\n            >Mailbox creation in user&apos;s browser complete</span\n          >\n        </li>\n      </ul>\n    </div>\n    <div\n      class=\"info-box3\"\n      @pageAnimation3\n      (@pageAnimation3.start)=\"onAnimationStart()\"\n      (@pageAnimation3.done)=\"onAnimationDone()\"\n      *ngIf=\"step >= 2\"\n    >\n      <h3 [translate]=\"'account_init.crypto_protect'\">Cryptographic Protection Initiated</h3>\n      <ul>\n        <li [translate]=\"'account_init.gen_pgp_key'\">Generate 4096 bit PGP Encryption Key</li>\n        <li [translate]=\"'account_init.crypto_hash_pass'\">Apply Cryptographic hash to password</li>\n        <li [translate]=\"'account_init.rec_hash_value'\">Receive hash value from cryptographic hash</li>\n        <li [translate]=\"'account_init.crypto_salt'\">Apply cryptographic salt to hash value</li>\n        <li [translate]=\"'account_init.mailbox_encrypted'\">Your mailbox is now encrypted and password protected</li>\n      </ul>\n    </div>\n    <div\n      class=\"info-box4\"\n      @pageAnimation4\n      (@pageAnimation4.start)=\"onAnimationStart()\"\n      (@pageAnimation4.done)=\"onAnimationDone()\"\n      *ngIf=\"step >= 3\"\n    >\n      <h3 [translate]=\"'account_init.creation_finished'\">Account Creation Finished</h3>\n      <ul>\n        <li [translate]=\"'account_init.mailbox_saved'\">Mailbox sent and saved to Icelandic server</li>\n        <li [innerHTML]=\"'account_init.secured_with_hash' | translate\">\n          Mailbox secured with user&apos;s hash & Salted value.\n        </li>\n        <li [translate]=\"'account_init.encypt_secure'\">Encrypted, Secure & Anonymous</li>\n        <li [translate]=\"'account_init.max_strength'\">Welcome to your Maximum strength mailbox</li>\n      </ul>\n    </div>\n  </div>\n</div>\n","import { animate, query, stagger, style, transition, trigger } from '@angular/animations';\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { NgbActiveModal, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, AuthState, SignupState } from '../../../store/datatypes';\nimport { Mailbox } from '../../../store/models';\nimport { DisplayNameDialogComponent } from '../display-name-dialog/display-name-dialog.component';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-user-account-init-dialog',\n  templateUrl: './user-account-init-dialog.component.html',\n  styleUrls: ['./user-account-init-dialog.component.scss'],\n  providers: [],\n  animations: [\n    trigger('pageAnimation1', [\n      transition(':enter', [\n        query('h3, li', [\n          style({ opacity: 0, transform: 'translateY(-100%)' }),\n          stagger(833, [animate('833ms', style({ opacity: 1, transform: 'none' }))]),\n        ]),\n      ]),\n    ]),\n    trigger('pageAnimation2', [\n      transition(':enter', [\n        query('li', [\n          style({ opacity: 0, transform: 'translateY(-100%)' }),\n          stagger(833, [animate('833ms', style({ opacity: 1, transform: 'none' }))]),\n        ]),\n      ]),\n    ]),\n    trigger('pageAnimation3', [\n      transition(':enter', [\n        query('h3, li', [\n          style({ opacity: 0, transform: 'translateY(-100%)' }),\n          stagger(833, [animate('833ms', style({ opacity: 1, transform: 'none' }))]),\n        ]),\n      ]),\n    ]),\n    trigger('pageAnimation4', [\n      transition(':enter', [\n        query('h3, li', [\n          style({ opacity: 0, transform: 'translateY(-100%)' }),\n          stagger(833, [animate('833ms', style({ opacity: 1, transform: 'none' }))]),\n        ]),\n      ]),\n    ]),\n  ],\n})\nexport class UserAccountInitDialogComponent implements OnInit, OnDestroy {\n  @Input() isPgpGenerationComplete: boolean;\n\n  mailboxes: Mailbox[];\n\n  step = 0;\n\n  emails: string;\n\n  private signupState: SignupState;\n\n  private isAccountCreationComplete: boolean;\n\n  private isDisplayNameOpened: boolean;\n\n  constructor(public activeModal: NgbActiveModal, private modalService: NgbModal, private store: Store<AppState>) {}\n\n  ngOnInit() {\n    this.isDisplayNameOpened = false;\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        if (this.signupState && this.signupState.inProgress && !authState.signupState.inProgress) {\n          if (authState.errorMessage || this.step === 4) {\n            this.isDisplayNameOpened = authState.errorMessage ? true : this.isDisplayNameOpened;\n            this.close();\n          } else {\n            this.isAccountCreationComplete = true;\n            setTimeout(() => {\n              this.close();\n            }, 5000);\n          }\n        }\n        this.signupState = { ...authState.signupState };\n      });\n    setTimeout(() => {\n      this.close();\n    }, 120000);\n  }\n\n  pgpGenerationCompleted() {\n    this.isPgpGenerationComplete = true;\n    if (this.step === 2) {\n      // move animation to page 4\n      setTimeout(() => {\n        this.step++;\n      }, 1000);\n    }\n  }\n\n  ngOnDestroy() {}\n\n  onAnimationStart() {}\n\n  onAnimationDone() {\n    if (this.step === 2 && !this.isPgpGenerationComplete) {\n      // pause animation because pgp key generation is not complete\n    } else if (this.step === 3) {\n      setTimeout(() => {\n        this.step++;\n        if (this.isAccountCreationComplete) {\n          this.close();\n        }\n      }, 2000);\n    } else {\n      setTimeout(() => {\n        this.step++;\n      }, 2000);\n    }\n  }\n\n  close() {\n    if (this.activeModal) {\n      this.activeModal.close();\n    }\n    if (!this.isDisplayNameOpened) {\n      this.isDisplayNameOpened = true;\n      this.modalService.open(DisplayNameDialogComponent, {\n        centered: true,\n        windowClass: 'modal-sm',\n        backdrop: 'static',\n      });\n    }\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { take } from 'rxjs/operators';\n\nimport { FilenamePipe } from '../../shared/pipes/filename.pipe';\nimport { SnackErrorPush } from '../../store/actions';\nimport { AppState } from '../../store/datatypes';\nimport { Attachment, Mail } from '../../store/models';\nimport { MailService, OpenPgpService, SharedService } from '../../store/services';\nimport { DateTimeUtilService } from '../../store/services/datetime-util.service';\n\n@Component({\n  selector: 'app-display-secure-message',\n  templateUrl: './display-secure-message.component.html',\n  styleUrls: ['./display-secure-message.component.scss'],\n})\nexport class DisplaySecureMessageComponent implements OnInit, OnDestroy {\n  @Input() message: Mail;\n\n  @Input() decryptedContent: string;\n\n  @Input() decryptedSubject: string;\n\n  @Input() decryptedKey: any;\n\n  @Input() hash: any;\n\n  @Input() secret: any;\n\n  @Input() password: string;\n\n  @Output() reply: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  @Output() expired: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  expiryDurationInSeconds: number;\n\n  decryptedAttachments: any = {};\n\n  constructor(\n    private dateTimeUtilService: DateTimeUtilService,\n    private store: Store<AppState>,\n    private mailService: MailService,\n    private shareService: SharedService,\n    private pgpService: OpenPgpService,\n  ) {}\n\n  ngOnInit() {\n    this.expiryDurationInSeconds = this.dateTimeUtilService.getDiffFromCurrentDateTime(\n      this.message.encryption.expires,\n      'seconds',\n    );\n  }\n\n  ngOnDestroy() {}\n\n  onExpired() {\n    this.expired.emit(true);\n  }\n\n  onReply() {\n    this.reply.emit(true);\n  }\n\n  // TODO: Merge with mail-detail and compose-mail components\n  decryptAttachment(attachment: Attachment) {\n    if (this.decryptedAttachments[attachment.id]) {\n      if (!this.decryptedAttachments[attachment.id].inProgress) {\n        this.downloadAttachment(this.decryptedAttachments[attachment.id]);\n      }\n    } else {\n      this.decryptedAttachments[attachment.id] = { ...attachment, inProgress: true };\n      this.mailService.getSecureMessageAttachment(attachment, this.hash, this.secret).subscribe(\n        response => {\n          if (!attachment.name) {\n            attachment.name = FilenamePipe.tranformToFilename(attachment.document);\n          }\n          const fileInfo = { attachment, type: response.file_type };\n          this.pgpService\n            .decryptAttachmentWithOnlyPassword(response.data, fileInfo, this.password)\n            .pipe(take(1))\n            .subscribe(\n              (decryptedAttachment: Attachment) => {\n                this.decryptedAttachments[attachment.id] = { ...decryptedAttachment, inProgress: false };\n                this.downloadAttachment(decryptedAttachment);\n              },\n              error =>\n                this.store.dispatch(\n                  new SnackErrorPush({ message: 'Failed to decrypt the attachment with the password.' }),\n                ),\n            );\n        },\n        errorResponse =>\n          this.store.dispatch(\n            new SnackErrorPush({\n              message: errorResponse.error || 'Failed to download the attachment.',\n            }),\n          ),\n      );\n    }\n  }\n\n  downloadAttachment(attachment: Attachment) {\n    this.shareService.downloadFile(attachment.decryptedDocument);\n  }\n}\n","<div class=\"l-block-body px-xs\">\n  <div id=\"secure-message-card\" class=\"ui-card\">\n    <div class=\"ui-card-header bg-primary text-sm-center\">\n      <h6 class=\"ui-card-title mb-0 fw-light text-white pr-4 px-sm-0\">\n        Expiring in\n        <strong>\n          <app-countdown-timer [duration]=\"expiryDurationInSeconds\" (finished)=\"onExpired()\"></app-countdown-timer>\n        </strong>\n      </h6>\n      <button role=\"button\" class=\"close ui-card-dismiss hidden-md-up\">\n        <i class=\"icon icon-cross text-white\"></i>\n      </button>\n    </div>\n    <div class=\"ui-card-body\">\n      <div class=\"msg-reply-card\">\n        <div class=\"msg-reply-card-header d-sm-flex justify-content-sm-start align-items-sm-center\">\n          <h5 class=\"text-dark mb-3 mb-sm-0\">\n            <strong *ngIf=\"message?.is_subject_encrypted; else plainSubject\">{{ decryptedSubject }}</strong>\n            <ng-template #plainSubject\n              ><strong>{{ message.subject }}</strong></ng-template\n            >\n          </h5>\n          <button class=\"btn btn-disabled btn-sm btn-reply ml-sm-auto\" role=\"button\" (click)=\"onReply()\">\n            <i class=\"icon icon-reply mr-2\"></i><strong>Reply Securely</strong>\n          </button>\n        </div>\n        <div class=\"msg-reply-address-row\">\n          <div class=\"msg-reply-address\">\n            <span class=\"text-muted\">From: </span>\n            <span class=\"text-muted\">&lt;{{ message.sender }}&gt;</span>\n          </div>\n          <div class=\"msg-reply-address\">\n            <span class=\"text-muted\">To: </span>\n            <ng-container *ngFor=\"let receiver of message.receiver; let i = index\">\n              <span class=\"text-muted\">&lt;{{ receiver }}&gt;</span>\n              <!--Comma as a separator-->\n              <span *ngIf=\"i < message.receiver?.length - 1\">, </span>\n            </ng-container>\n          </div>\n        </div>\n        <div class=\"msg-reply-card-body\">\n          <div class=\"msg-reply-content text-dark\" [innerHTML]=\"decryptedContent | safe: 'html'\"></div>\n          <div>\n            <ul class=\"list-style-none mt-3\">\n              <ng-container *ngFor=\"let attachment of message.attachments\">\n                <li class=\"download-attachment-wrapper mr-1\" *ngIf=\"!attachment.is_inline\">\n                  <app-progress-bar [active]=\"decryptedAttachments[attachment.id]?.inProgress\"></app-progress-bar>\n                  <a\n                    *ngIf=\"!attachment.is_encrypted; else encryptedAttachment\"\n                    class=\"download-attachment\"\n                    [href]=\"attachment.document\"\n                    placement=\"top\"\n                    [ngbTooltip]=\"attachment.name ? attachment.name : (attachment.document | filename)\"\n                    target=\"_blank\"\n                    rel=\"noopener\"\n                  >\n                    <div class=\"attachment-icon\">\n                      <i class=\"icon icon-attachment\"></i>\n                    </div>\n                    <div class=\"attachment-name\">\n                      {{ attachment.name ? attachment.name : (attachment.document | filename) }}\n                    </div>\n                  </a>\n                  <ng-template #encryptedAttachment>\n                    <a\n                      class=\"download-attachment\"\n                      (click)=\"decryptAttachment(attachment)\"\n                      href=\"javascript:void(0)\"\n                      placement=\"top\"\n                      [ngbTooltip]=\"attachment.name ? attachment.name : (attachment.document | filename)\"\n                    >\n                      <div class=\"attachment-icon\">\n                        <i class=\"icon icon-attachment\"></i>\n                      </div>\n                      <div class=\"attachment-name\">\n                        {{ attachment.name ? attachment.name : (attachment.document | filename) }}\n                      </div>\n                    </a>\n                  </ng-template>\n                </li>\n              </ng-container>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","<div class=\"l-block-body px-xs\">\n  <div id=\"secure-message-reply-card d-block\" class=\"ui-card\">\n    <div class=\"ui-card-body\">\n      <div class=\"msg-reply-card\">\n        <div class=\"msg-reply-card-header position-relative d-sm-flex justify-content-sm-start align-items-sm-center\">\n          <h5 class=\"text-dark mb-0\">\n            <strong>{{ sourceMessage.subject }}</strong>\n          </h5>\n          <button role=\"button\" class=\"close ui-card-dismiss ml-sm-auto hidden-md-up\">\n            <i class=\"icon icon-cross text-dark\"></i>\n          </button>\n        </div>\n        <div class=\"msg-reply-address-row\">\n          <div class=\"msg-reply-address\">\n            <span class=\"text-muted\">To: </span>\n            <span class=\"text-muted\">&lt;{{ sourceMessage.sender }}&gt;</span>\n          </div>\n        </div>\n        <div class=\"msg-reply-card-body\">\n          <div class=\"msg-reply-card-innerbody has-custom-scroll has-custom-scroll-sm\">\n            <div class=\"secure-message-editor mail-compose-editable-box\">\n              <div #editor></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"ui-card-footer mail-composer-footer\">\n      <div class=\"mail-composer-actions-row d-flex align-items-center\">\n        <div class=\"mail-composer-actions-col mail-composer-actions-col-lg\">\n          <ul class=\"mail-composer-actions d-flex align-items-center\">\n            <li class=\"send-mail-item\">\n              <button\n                class=\"btn btn-sm btn-secondary btn-mail-send btn-xs-rounded\"\n                (click)=\"onSend()\"\n                [disabled]=\"inProgress\"\n                role=\"button\"\n                placement=\"top\"\n                ngbTooltip=\"{{ inProgress ? 'Sending...' : 'Send Mail' }}\"\n              >\n                <i class=\"hidden-sm-up icon icon-paper-plane\"></i><span class=\"hidden-xs-down\">Send</span>\n              </button>\n            </li>\n            <li>\n              <div ngbDropdown [autoClose]=\"'outside'\" placement=\"top-left\" class=\"dropdown\">\n                <button\n                  ngbDropdownToggle\n                  class=\"actions-btn mail-typo-btn hide-arrow\"\n                  id=\"typoDropdownMenu\"\n                  role=\"button\"\n                  placement=\"top\"\n                  ngbTooltip=\"Text formatting\"\n                >\n                  <i class=\"icon icon-text-color\"></i>\n                </button>\n                <div ngbDropdownMenu class=\"typo-actions-dropdown-menu\" aria-labelledby=\"typoDropdownMenu\">\n                  <div #toolbar class=\"mail-comopser-typo-actions-holder\">\n                    <ul class=\"mail-composer-actions d-flex align-items-center justify-content-end\">\n                      <li class=\"pr-0\">\n                        <div ngbDropdown placement=\"top\" class=\"dropup\">\n                          <button\n                            ngbDropdownToggle\n                            role=\"button\"\n                            class=\"actions-btn mail-font-family-btn border-right-0 border-radius-r-0\"\n                            id=\"typoFamilyDropdownMenu\"\n                          >\n                            <i class=\"icon icon-text-size\"></i>\n                          </button>\n                          <div\n                            ngbDropdownMenu\n                            class=\"typo-family-dropdown-menu\"\n                            aria-labelledby=\"typoFamilyDropdownMenu\"\n                          >\n                            <div class=\"typo-holder\">\n                              <ul class=\"typo-list list-styled\">\n                                <li *ngFor=\"let font of fonts\">\n                                  <button [value]=\"font\" class=\"ql-font typo-select-link text-capitalize\">\n                                    {{ font }}\n                                  </button>\n                                </li>\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      </li>\n                      <li class=\"pl-0\">\n                        <div ngbDropdown placement=\"top\" class=\"dropup\">\n                          <button\n                            ngbDropdownToggle\n                            role=\"button\"\n                            class=\"actions-btn mail-font-family-btn\"\n                            id=\"typoSizeDropdownMenu\"\n                          >\n                            <i class=\"icon icon-text-size-alt\"></i>\n                          </button>\n                          <div ngbDropdownMenu class=\"typo-size-dropdown-menu\" aria-labelledby=\"typoSizeDropdownMenu\">\n                            <div class=\"typo-holder\">\n                              <ul class=\"typo-list list-styled\">\n                                <li *ngFor=\"let size of sizes\">\n                                  <button [value]=\"size\" class=\"ql-size typo-select-link\">\n                                    {{ size }}\n                                  </button>\n                                </li>\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      </li>\n\n                      <li class=\"pr-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-bold actions-btn mail-bold-btn border-right-0 border-radius-r-0\"\n                        >\n                          <i class=\"icon icon-bold\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-italic actions-btn mail-italic-btn border-right-0 border-radius-0\"\n                        >\n                          <i class=\"icon icon-italic\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-underline actions-btn mail-underline-btn border-right-0 border-radius-0\"\n                        >\n                          <i class=\"icon icon-underline\"></i>\n                        </button>\n                      </li>\n                      <li class=\"pl-0\">\n                        <div ngbDropdown placement=\"top\" class=\"dropdown\">\n                          <button\n                            ngbDropdownToggle\n                            class=\"actions-btn mail-font-color-btn border-radius-l-0\"\n                            id=\"typoColorDropdownMenu\"\n                            role=\"button\"\n                          >\n                            <i class=\"icon icon-text-color\"></i>\n                          </button>\n                          <div ngbDropdownMenu class=\"left-0\" aria-labelledby=\"typoColorDropdownMenu\">\n                            <div class=\"color-picker-holder\">\n                              <div class=\"row\">\n                                <div class=\"col-sm-6 mb-3 mb-sm-0\">\n                                  <div class=\"color-picker\">\n                                    <div class=\"color-picker-title\"><strong>Background Color</strong></div>\n                                    <ul class=\"color-picker-list d-flex flex-wrap\">\n                                      <li *ngFor=\"let color of colors\">\n                                        <button\n                                          class=\"ql-background color-shape\"\n                                          [class.border-lightgrey]=\"color === '#ffffff'\"\n                                          [value]=\"color\"\n                                          [style.background]=\"color\"\n                                        ></button>\n                                      </li>\n                                    </ul>\n                                  </div>\n                                </div>\n\n                                <div class=\"col-sm-6 mb-3 mb-sm-0\">\n                                  <div class=\"color-picker\">\n                                    <div class=\"color-picker-title\"><strong>Text Color</strong></div>\n                                    <ul class=\"color-picker-list d-flex flex-wrap\">\n                                      <li *ngFor=\"let color of colors\">\n                                        <button\n                                          class=\"ql-color color-shape\"\n                                          [class.border-lightgrey]=\"color === '#ffffff'\"\n                                          [value]=\"color\"\n                                          [style.background]=\"color\"\n                                        ></button>\n                                      </li>\n                                    </ul>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </li>\n\n                      <li class=\"pr-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-align actions-btn mail-align-right-btn border-right-0 border-radius-r-0\"\n                          value=\"right\"\n                        >\n                          <i class=\"icon icon-text-align-right\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-align actions-btn mail-align-center-btn border-right-0 border-radius-0\"\n                          value=\"center\"\n                        >\n                          <i class=\"icon icon-text-align-center\"></i>\n                        </button>\n                      </li>\n                      <li class=\"pl-0\">\n                        <button role=\"button\" class=\"ql-align actions-btn mail-align-left-btn border-radius-l-0\">\n                          <i class=\"icon icon-text-align-left\"></i>\n                        </button>\n                      </li>\n\n                      <li class=\"pr-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-list actions-btn mail-unorder-list-btn border-right-0 border-radius-r-0\"\n                          value=\"bullet\"\n                        >\n                          <i class=\"icon icon-unorder-list\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-list actions-btn mail-order-list-btn border-right-0 border-radius-0\"\n                          value=\"ordered\"\n                        >\n                          <i class=\"icon icon-ordered-list\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-indent actions-btn mail-indent-decrease-btn border-right-0 border-radius-0\"\n                          value=\"-1\"\n                        >\n                          <i class=\"icon icon-indent-decrease\"></i>\n                        </button>\n                      </li>\n                      <li class=\"px-0\">\n                        <button\n                          role=\"button\"\n                          class=\"ql-indent actions-btn mail-indent-increase-btn border-right-0 border-radius-0\"\n                          value=\"+1\"\n                        >\n                          <i class=\"icon icon-indent-increase\"></i>\n                        </button>\n                      </li>\n                      <li class=\"pl-0\">\n                        <button role=\"button\" class=\"ql-blockquote actions-btn mail-quote-right-btn border-radius-l-0\">\n                          <i class=\"icon icon-quote-right\"></i>\n                        </button>\n                      </li>\n\n                      <li>\n                        <button role=\"button\" class=\"ql-clean actions-btn mail-format-clear-btn\">\n                          <i class=\"icon icon-format-clear\"></i>\n                        </button>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <div class=\"mail-composer-actions-col mail-composer-actions-col-sm\">\n          <ul class=\"mail-composer-actions d-flex align-items-center justify-content-end\">\n            <li class=\"pr-1\" *ngIf=\"inProgress\">\n              <span>Sending...</span>\n            </li>\n            <li class=\"pl-0\">\n              <button\n                role=\"button\"\n                (click)=\"onCancel()\"\n                [disabled]=\"inProgress\"\n                class=\"btn btn-sm btn-outline-danger\"\n                placement=\"top\"\n                ngbTooltip=\"Cancel\"\n              >\n                Cancel\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import {\n  AfterViewInit,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  ViewChild,\n  ChangeDetectionStrategy,\n} from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport * as QuillNamespace from 'quill';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { COLORS, FONTS, SIZES } from '../../shared/config';\nimport { GetSecureMessageUserKeys, SendSecureMessageReply } from '../../store/actions';\nimport { AppState, SecureMessageState } from '../../store/datatypes';\nimport { Attachment, Mail } from '../../store/models';\nimport { OpenPgpService } from '../../store/services';\n\nconst Quill: any = QuillNamespace;\n\nconst FontAttributor = Quill.import('attributors/style/font');\nFontAttributor.whitelist = [...FONTS];\nQuill.register(FontAttributor, true);\n\nconst SizeAttributor = Quill.import('attributors/style/size');\nconst updatedSizes = SIZES.map(size => `${size}px`);\nSizeAttributor.whitelist = updatedSizes;\nQuill.register(SizeAttributor, true);\nQuill.register(Quill.import('attributors/style/align'), true);\nQuill.register(Quill.import('attributors/style/background'), true);\nQuill.register(Quill.import('attributors/style/color'), true);\n\nconst QuillBlockEmbed = Quill.import('blots/block/embed');\n\nclass ImageBlot extends QuillBlockEmbed {\n  static create(value: any) {\n    const node: any = super.create(value);\n    node.setAttribute('src', value.url);\n    if (value.content_id) {\n      node.setAttribute('data-content-id', value.content_id);\n    }\n    return node;\n  }\n\n  static value(node: any) {\n    return {\n      content_id: node.getAttribute('data-content-id'),\n      url: node.getAttribute('src'),\n    };\n  }\n}\n\nImageBlot.blotName = 'image';\nImageBlot.tagName = 'img';\n\nQuill.register(ImageBlot);\n\n@UntilDestroy()\n@Component({\n  selector: 'app-reply-secure-message',\n  templateUrl: './reply-secure-message.component.html',\n  styleUrls: ['./reply-secure-message.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReplySecureMessageComponent implements OnInit, AfterViewInit {\n  @Input() sourceMessage: Mail;\n\n  @Input() hash: string;\n\n  @Input() secret: string;\n\n  @Input() senderId: string;\n\n  @Output() cancel: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  @Output() replySuccess: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  @ViewChild('editor') editor: any;\n\n  @ViewChild('toolbar') toolbar: any;\n\n  colors = COLORS;\n\n  fonts = FONTS;\n\n  sizes = updatedSizes;\n\n  attachments: Attachment[] = [];\n\n  inProgress: boolean;\n\n  private message: Mail;\n\n  private quill: any;\n\n  private secureMessageState: SecureMessageState;\n\n  constructor(private store: Store<AppState>, private openPgpService: OpenPgpService) {}\n\n  ngOnInit() {\n    this.store\n      .select(state => state.secureMessage)\n      .pipe(untilDestroyed(this))\n      .subscribe((state: SecureMessageState) => {\n        this.inProgress = state.inProgress || state.isEncryptionInProgress;\n        if (this.secureMessageState) {\n          if (this.secureMessageState.getUserKeyInProgress && !state.getUserKeyInProgress) {\n            const keys = [\n              ...state.usersKeys\n                .filter(item => this.message.receiver.includes(item.email) && item.is_enabled)\n                .map(item => item.public_key),\n            ];\n            this.openPgpService.encryptSecureMessageContent(this.message.content, keys);\n          } else if (this.secureMessageState.isEncryptionInProgress && !state.isEncryptionInProgress) {\n            this.message.content = state.encryptedContent;\n            this.store.dispatch(\n              new SendSecureMessageReply({ hash: this.hash, secret: this.secret, message: this.message }),\n            );\n          } else if (this.secureMessageState.inProgress && !state.inProgress) {\n            if (!state.errorMessage) {\n              this.replySuccess.emit(true);\n            }\n          }\n        }\n        this.secureMessageState = state;\n      });\n  }\n\n  ngAfterViewInit() {\n    this.initializeQuillEditor();\n  }\n\n  initializeQuillEditor() {\n    this.quill = new Quill(this.editor.nativeElement, {\n      modules: {\n        toolbar: this.toolbar.nativeElement,\n      },\n    });\n  }\n\n  onSend() {\n    if (this.hasData()) {\n      this.message = {\n        receiver: [this.sourceMessage.sender],\n        subject: this.sourceMessage.subject,\n        content: this.editor.nativeElement.firstChild.innerHTML,\n        sender: this.senderId,\n        parent: this.sourceMessage.id,\n      };\n      this.store.dispatch(new GetSecureMessageUserKeys({ hash: this.hash, secret: this.secret }));\n    }\n  }\n\n  onCancel() {\n    this.cancel.emit(true);\n  }\n\n  private hasData() {\n    // using >1 because there is always a blank line represented by \\n (quill docs)\n    return this.quill.getLength() > 1;\n  }\n}\n","<!-- PAGE SECTION -->\n<section class=\"l-block l-block-text bg-white gap-p-eq main-container\">\n  <div class=\"container container-sm\">\n    <header class=\"l-block-header position-relative text-center\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 position-sm-static px-sm-5 px-md-0\">\n          <h1 class=\"l-block-title text-uppercase text-secondary mb-3 pb-2\">\n            <strong [translate]=\"'create_account.name'\">Create your account</strong>\n          </h1>\n        </div>\n      </div>\n    </header>\n    <div class=\"l-block-body px-md\">\n      <div class=\"form-card-holder mx-auto\">\n        <div class=\"info-card bg-faded text-sm-center\">\n          <p class=\"text-medium\">\n            <span [translate]=\"'create_account.take_back_liberty'\">Take Back Your Liberty! </span>\n            <br />\n            <span [innerHTML]=\"'create_account.class_encrypted_email' | translate\"\n              >Best in class encrypted email <br />\n              Account creation in only minutes</span\n            >\n          </p>\n        </div>\n        <div class=\"ml-1 row selected-plan\">\n          <h3 class=\"mt-3 text-dark\">\n            <strong>Plan : {{ this.selectedPlan | uppercase }}</strong>\n          </h3>\n        </div>\n        <div class=\"form\">\n          <form class=\"signup-form\" [formGroup]=\"signupForm\" #form=\"ngForm\" (ngSubmit)=\"signup()\">\n            <div *ngIf=\"errorMessage\" class=\"l-alert l-alert-danger my-3 reset-form__failed text-center\">\n              {{ errorMessage }}\n            </div>\n            <div class=\"form-step-card-holder\">\n              <div class=\"form-step-card\">\n                <h3 class=\"form-step-card-title text-dark mb-0\">\n                  <strong [translate]=\"'create_account.username_and_domain'\">Username and domain</strong>\n                </h3>\n                <div class=\"form-step-card-subtitle\">\n                  <small [translate]=\"'create_account.new_email_address'\"\n                    >This will be your new CTemplar email address.\n                  </small>\n                </div>\n                <div class=\"form-group\">\n                  <div\n                    class=\"form-inline userame-field-group\"\n                    [ngClass]=\"{\n                      'is-validate':\n                        signupForm.controls.username.invalid && (signupForm.controls.username.touched || submitted)\n                    }\"\n                  >\n                    <label\n                      for=\"username\"\n                      class=\"d-block text-muted text-left hidden-sm-up\"\n                      [translate]=\"'create_account.choose_username'\"\n                      >Choose username</label\n                    >\n                    <input\n                      class=\"form-control text-dark mb-3 mb-sm-0\"\n                      id=\"username\"\n                      [placeholder]=\"'create_account.choose_username' | translate\"\n                      type=\"text\"\n                      name=\"username\"\n                      formControlName=\"username\"\n                    />\n                    <span class=\"domain-separator text-center text-dark\">@</span>\n                    <input\n                      class=\"form-control text-dark is-readonly border-0 px-0 email-input\"\n                      value=\"ctemplar.com\"\n                      type=\"text\"\n                      readonly\n                      tabindex=\"-1\"\n                    />\n                    <ng-container *ngIf=\"signupState?.inProgress; else showIcons\">\n                      <app-loading-spinner\n                        class=\"username-availability-spinner\"\n                        [showSpinner]=\"true\"\n                      ></app-loading-spinner>\n                    </ng-container>\n                    <ng-template #showIcons>\n                      <i\n                        class=\"fas fa-check green\"\n                        *ngIf=\"signupState.usernameExists === false && !signupForm.controls['username'].errors\"\n                      ></i>\n                      <i\n                        class=\"fas fa-times text-danger\"\n                        *ngIf=\"\n                          signupState.usernameExists === true ||\n                          (signupForm.controls['username'].errors &&\n                            (signupForm.controls['username'].touched || submitted))\n                        \"\n                      ></i>\n                    </ng-template>\n                  </div>\n                  <ng-container\n                    *ngIf=\"\n                      signupForm.controls['username'].errors && (signupForm.controls['username'].touched || submitted);\n                      else usernameExistsBlock\n                    \"\n                  >\n                    <span\n                      class=\"validate-message\"\n                      *ngIf=\"signupForm.controls['username'].errors; else usernameRequiredError\"\n                    >\n                      <ng-container *ngIf=\"signupForm.controls['username'].errors.pattern; else usernameLengthBlock\">\n                        The username must start with a letter and end with a letter or number.It may only contain\n                        <em>a-z</em>, <em>A-Z</em>, <em>0-9</em> or <em>._-</em> characters and minimum length is 4\n                        characters.\n                      </ng-container>\n                      <ng-template #usernameLengthBlock>\n                        <ng-container\n                          *ngIf=\"\n                            signupForm.controls['username'].errors.minlength ||\n                            signupForm.controls['username'].errors.maxlength\n                          \"\n                        >\n                          The username must be between 4 and 64 characters.\n                        </ng-container>\n                      </ng-template>\n                    </span>\n                    <ng-template #usernameRequiredError>\n                      <span class=\"validate-message\">The username is required.</span>\n                    </ng-template>\n                  </ng-container>\n                  <ng-template #usernameExistsBlock>\n                    <span *ngIf=\"signupState.usernameExists === true\" class=\"validate-message\"\n                      >Username already exists.\n                    </span>\n                  </ng-template>\n                </div>\n              </div>\n              <div class=\"form-step-card\">\n                <h3 class=\"form-step-card-title text-dark mb-0\">\n                  <strong [translate]=\"'settings.password'\">Password</strong>\n                </h3>\n                <div class=\"form-group\">\n                  <label for=\"choosePassword\" class=\"d-block text-muted text-left hidden-sm-up\">Choose Password</label>\n                  <div class=\"input-group\">\n                    <input\n                      #input\n                      class=\"form-control border-right-0\"\n                      id=\"choosePassword\"\n                      [placeholder]=\"'create_account.choose_password' | translate\"\n                      type=\"password\"\n                      aria-describedby=\"passwordToggle\"\n                      name=\"password\"\n                      formControlName=\"password\"\n                    />\n                    <span\n                      class=\"input-group-addon password-toggle bg-white text-muted\"\n                      id=\"passwordToggle\"\n                      (click)=\"togglePassword(input)\"\n                    >\n                      <i class=\"fa fa-eye\"></i>\n                      <i class=\"fa fa-eye-slash\"></i>\n                    </span>\n                  </div>\n                  <i\n                    class=\"fas fa-check green input-ok\"\n                    *ngIf=\"\n                      signupForm.controls['password']?.value?.length > 0 &&\n                      signupForm.controls['password']?.value?.length <= 128\n                    \"\n                  ></i>\n                  <div\n                    *ngIf=\"\n                      signupForm.controls['password'].errors && (signupForm.controls['password'].touched || submitted)\n                    \"\n                    class=\"validate-message\"\n                  >\n                    <ng-container *ngIf=\"signupForm.controls['password'].errors.required\"\n                      >The password is required.\n                    </ng-container>\n                    <ng-container *ngIf=\"signupForm.controls['password'].errors.maxlength\"\n                      >The password must be between 1 and 128 characters.\n                    </ng-container>\n                  </div>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"confirmPassword\" class=\"d-block text-muted text-left hidden-sm-up\"\n                    >Confirm Password</label\n                  >\n                  <div\n                    class=\"input-group\"\n                    [ngClass]=\"{\n                      'is-validate': signupForm.controls.confirmPwd.invalid && !signupForm.controls.confirmPwd.pristine\n                    }\"\n                  >\n                    <input\n                      #input2\n                      class=\"form-control border-right-0\"\n                      id=\"confirmPassword\"\n                      [placeholder]=\"'create_account.confirm_password' | translate\"\n                      type=\"password\"\n                      aria-describedby=\"cofirmpasswordToggle\"\n                      name=\"confirmPwd\"\n                      formControlName=\"confirmPwd\"\n                    />\n                    <span\n                      class=\"input-group-addon password-toggle bg-white text-muted\"\n                      id=\"cofirmpasswordToggle\"\n                      (click)=\"togglePassword(input2)\"\n                    >\n                      <i class=\"fa fa-eye\"></i>\n                      <i class=\"fa fa-eye-slash\"></i>\n                    </span>\n                  </div>\n                  <i class=\"fas fa-check green input-ok\" *ngIf=\"!signupForm.controls['confirmPwd'].errors\"></i>\n                  <span\n                    *ngIf=\"\n                      signupForm.controls['confirmPwd'].errors &&\n                      (!signupForm.controls.confirmPwd.pristine || submitted)\n                    \"\n                    class=\"validate-message\"\n                  >\n                    <span [translate]=\"'create_account.passwords_not_match'\">Passwords do not match.</span>\n                  </span>\n                </div>\n                <div class=\"form-group\">\n                  <div class=\"info-card d-flex bg-faded\">\n                    <span class=\"fancy-field-group mr-3\">\n                      <input\n                        class=\"d-none fancy-field-control fancy-field-control-lg\"\n                        id=\"moreInfoCheckbox\"\n                        name=\"[]\"\n                        type=\"checkbox\"\n                        [(ngModel)]=\"isRecoveryEmail\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                      />\n                      <label for=\"moreInfoCheckbox\" class=\"fancy-field-empty\"></label>\n                    </span>\n                    <div class=\"checkbox-text lh-sm\" [ngClass]=\"{ 'd-none': isTextToggled }\">\n                      <span class=\"info-text\">\n                        <small [translate]=\"'create_account.checking_box'\"\n                          >By checking this box you understand that If you lose your password and do not set a recovery\n                          email your account will not be recoverable.</small\n                        >\n                      </span>\n                      <a href=\"javascript:void(0);\" (click)=\"toggleText()\">\n                        <u>\n                          <small [translate]=\"'create_account.more_info'\">More info</small>\n                        </u>\n                      </a>\n                    </div>\n                    <div class=\"checkbox-text lh-sm\" [ngClass]=\"{ 'd-none': !isTextToggled }\">\n                      <span class=\"info-text\">\n                        <small>\n                          <span [translate]=\"'create_account.checking_box'\"\n                            >By checking this box you understand that If you lose your password and do not set a\n                            recovery email your account will not be recoverable.</span\n                          ><br /><span [translate]=\"'create_account.password_connected'\"\n                            >Your password is connected to your encryption key, if you change your password then you\n                            will be issued a new encryption key and ALL contents of your account will be lost except for\n                            your email address.</span\n                          ></small\n                        >\n                      </span>\n                      <a href=\"javascript:void(0);\" (click)=\"toggleText()\">\n                        <u>\n                          <small [translate]=\"'create_account.less'\">Less</small>\n                        </u>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n                <div\n                  *ngIf=\"\n                    isRecoveryEmail !== null &&\n                    !isRecoveryEmail &&\n                    (!signupForm.get('recoveryEmail').value || signupForm.get('recoveryEmail').invalid)\n                  \"\n                  class=\"l-alert l-alert-danger\"\n                  role=\"alert\"\n                >\n                  Please agree to above terms or enter recovery email.\n                </div>\n              </div>\n              <div\n                class=\"form-step-card\"\n                [ngClass]=\"{\n                  'is-validate': signupForm.get('recoveryEmail').invalid && signupForm.controls['recoveryEmail'].touched\n                }\"\n                *ngIf=\"!isRecoveryEmail\"\n              >\n                <h3 class=\"form-step-card-title text-dark mb-0\">\n                  <strong [translate]=\"'create_account.recovery_email_optional'\">Recovery email (optional)</strong>\n                </h3>\n                <div class=\"form-step-card-subtitle\">\n                  <small [translate]=\"'create_account.recover_account'\"\n                    >This is used to recover your account if you forget your password\n                  </small>\n                </div>\n                <div class=\"form-group\">\n                  <label\n                    for=\"recoveryEmail\"\n                    class=\"d-block text-muted text-left hidden-sm-up\"\n                    [translate]=\"'settings.recovery_email'\"\n                    >Recovery email\n                  </label>\n                  <input\n                    class=\"form-control text-dark\"\n                    id=\"recoveryEmail\"\n                    [placeholder]=\"'settings.recovery_email' | translate\"\n                    type=\"email\"\n                    name=\"recoveryEmail\"\n                    formControlName=\"recoveryEmail\"\n                  />\n                  <span\n                    *ngIf=\"signupForm.controls['recoveryEmail'].errors && signupForm.controls['recoveryEmail'].touched\"\n                    id=\"email-valid1\"\n                    class=\"validate-message\"\n                    [translate]=\"'settings.email_invalid'\"\n                    >The email is invalid.\n                  </span>\n                </div>\n              </div>\n\n              <div\n                class=\"form-step-card\"\n                [ngClass]=\"{ 'is-validate': !inviteCode && submitted }\"\n                *ngIf=\"selectedPlan === planType.FREE\"\n              >\n                <h3 class=\"form-step-card-title text-dark mb-0\">\n                  <strong [translate]=\"'create_account.invite_code'\">Invitation code</strong>\n                </h3>\n                <div class=\"form-step-card-subtitle\">\n                  <small [translate]=\"'create_account.invite_code_explanation'\"\n                    >You can get invitation code from any existing paid customer or you can request from us.</small\n                  ><br />\n                  <small [translate]=\"'create_account.about_invite_code'\">Why invite codes and how to get one?</small>\n                  <small\n                    ><a\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href=\"{{ primaryWebsite }}/email-creation-restriction/\"\n                      >{{ 'mail_header.learn_more' | translate }}</a\n                    ></small\n                  >\n                </div>\n                <div class=\"form-group\">\n                  <label\n                    for=\"inviteCode\"\n                    [translate]=\"'create_account.invite_code'\"\n                    class=\"d-block text-muted text-left hidden-sm-up\"\n                    >Invitation code\n                  </label>\n                  <input\n                    class=\"form-control text-dark\"\n                    id=\"inviteCode\"\n                    required\n                    [placeholder]=\"'create_account.invite_code' | translate\"\n                    type=\"text\"\n                    name=\"inviteCode\"\n                    [(ngModel)]=\"inviteCode\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                  />\n                </div>\n              </div>\n\n              <div\n                class=\"info-card d-flex align-items-center bg-faded mb-3\"\n                [ngClass]=\"{ 'is-validate': isConfirmedPrivacy == false }\"\n              >\n                <span class=\"fancy-field-group mr-3\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-lg\"\n                    id=\"termsConditionCheckbox\"\n                    name=\"[]\"\n                    type=\"checkbox\"\n                    [(ngModel)]=\"isConfirmedPrivacy\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                  />\n                  <label for=\"termsConditionCheckbox\" class=\"fancy-field-empty\"></label>\n                </span>\n                <div class=\"checkbox-text lh-sm\">\n                  <span class=\"info-text\">\n                    <small>\n                      <span [translate]=\"'create_account.check_box'\"\n                        >Please check this box if you agree to abide by our\n                      </span>\n                      <a href=\"{{ primaryWebsite }}/terms\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        <u [innerHTML]=\"'create_account.terms_and_conditions' | translate\">Terms &amp; Conditions</u>\n                      </a>\n                    </small>\n                  </span>\n                </div>\n              </div>\n              <div\n                *ngIf=\"isConfirmedPrivacy !== null && !isConfirmedPrivacy\"\n                class=\"l-alert l-alert-danger mb-4\"\n                role=\"alert\"\n              >\n                Please abide by our Terms &amp; Conditions\n              </div>\n\n              <div class=\"form-group text-center\">\n                <button class=\"btn btn-lg btn-secondary\" [disabled]=\"signupInProgress\" type=\"submit\" role=\"button\">\n                  <span [translate]=\"'login.create_account'\">Create Account</span>\n                </button>\n              </div>\n\n              <div class=\"text-holder text-center\">\n                <a routerLink=\"/signin\">\n                  <u [translate]=\"'create_account.already_have_account'\">Already have an Account?</u>\n                </a>\n\n                <!-- Please remove the html structure below -->\n                <div class=\"mb-3\"></div>\n                <!-- Please remove the html structure above -->\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <app-loading-spinner [showSpinner]=\"generatingKeys\"></app-loading-spinner>\n  </div>\n  <div *ngIf=\"submitted\" class=\"text-center form-group mt-4\">\n    <div class=\"col-sm col-sm-6 mx-auto\">\n      <div *ngIf=\"errorMessage\" class=\"reset-form__failed l-alert l-alert-danger mb-3\">\n        {{ errorMessage }}\n      </div>\n    </div>\n    <app-loading-spinner [showSpinner]=\"signupInProgress\"></app-loading-spinner>\n  </div>\n  <div></div>\n  <!-- /.Site container ends -->\n</section>\n<!-- /.PAGE SECTION ENDS -->\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AbstractControl, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { debounceTime } from 'rxjs/operators';\nimport { NgbModalRef } from '@ng-bootstrap/ng-bootstrap/modal/modal-ref';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { AppState, AuthState, PaymentType, PlanType, SignupState } from '../../store/datatypes';\nimport { CheckUsernameAvailability, FinalLoading, SignUp, UpdateSignupData } from '../../store/actions';\nimport { OpenPgpService, SharedService, UsersService } from '../../store/services';\nimport { NotificationService } from '../../store/services/notification.service';\nimport { PRIMARY_WEBSITE, VALID_EMAIL_REGEX, LANGUAGES } from '../../shared/config';\nimport { UserAccountInitDialogComponent } from '../dialogs/user-account-init-dialog/user-account-init-dialog.component';\n\nexport class PasswordValidation {\n  static MatchPassword(AC: AbstractControl): any {\n    const password = AC.get('password').value; // to get value in input tag\n    const confirmPassword = AC.get('confirmPwd').value; // to get value in input tag\n    if (password !== confirmPassword) {\n      AC.get('confirmPwd').setErrors({ MatchPassword: true });\n    } else {\n      return null;\n    }\n  }\n}\n\n@UntilDestroy()\n@Component({\n  selector: 'app-users-create-account',\n  templateUrl: './users-create-account.component.html',\n  styleUrls: ['./users-create-account.component.scss'],\n})\nexport class UsersCreateAccountComponent implements OnInit, OnDestroy {\n  isTextToggled = false;\n\n  signupForm: FormGroup;\n\n  isRecoveryEmail: boolean = null;\n\n  isConfirmedPrivacy: boolean = null;\n\n  errorMessage = '';\n\n  selectedPlan: PlanType;\n\n  planType = PlanType;\n\n  data: any = null;\n\n  signupInProgress = false;\n\n  signupState: SignupState;\n\n  submitted = false;\n\n  userKeys: any;\n\n  generatingKeys: boolean;\n\n  modalRef: NgbModalRef;\n\n  inviteCode: string;\n\n  primaryWebsite = PRIMARY_WEBSITE;\n\n  private paymentType: PaymentType;\n\n  constructor(\n    private modalService: NgbModal,\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private store: Store<AppState>,\n    private openPgpService: OpenPgpService,\n    private sharedService: SharedService,\n    private activatedRoute: ActivatedRoute,\n    private authService: UsersService,\n    private notificationService: NotificationService,\n    private translate: TranslateService,\n  ) {}\n\n  ngOnInit() {\n    this.handleUserState();\n    this.sharedService.hideFooter.emit(true);\n\n    this.signupForm = this.formBuilder.group(\n      {\n        username: [\n          '',\n          [\n            Validators.required,\n            Validators.pattern(/^[a-z]+([\\da-z]*[._-]?[\\da-z]+)+$/i),\n            Validators.minLength(4),\n            Validators.maxLength(64),\n          ],\n        ],\n        password: ['', [Validators.required, Validators.maxLength(128)]],\n        confirmPwd: ['', [Validators.required, Validators.maxLength(128)]],\n        recoveryEmail: ['', [Validators.pattern(VALID_EMAIL_REGEX)]],\n      },\n      {\n        validator: PasswordValidation.MatchPassword,\n      },\n    );\n\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((state: AuthState) => {\n        const { queryParams } = this.activatedRoute.snapshot;\n        this.selectedPlan = state.signupState.plan_type || queryParams.plan || PlanType.PRIME;\n        this.paymentType = state.signupState.payment_type || queryParams.billing || PaymentType.ANNUALLY;\n        if (Object.keys(queryParams).length !== 0 && !queryParams.billing) {\n          if (!Object.values(PlanType).includes(this.selectedPlan)) {\n            this.selectedPlan = PlanType.FREE;\n            this.router.navigateByUrl(`/create-account?plan=${this.selectedPlan}`);\n          }\n        } else if (\n          Object.keys(queryParams).length !== 0 &&\n          (!Object.values(PlanType).includes(this.selectedPlan) ||\n            !Object.values(PaymentType).includes(this.paymentType))\n        ) {\n          this.selectedPlan = PlanType.PRIME;\n          this.paymentType = PaymentType.ANNUALLY;\n          this.router.navigateByUrl(`/create-account?plan=${this.selectedPlan}&billing=${this.paymentType}`);\n        } else if (Object.keys(queryParams).length === 0) {\n          this.router.navigateByUrl(`/create-account?plan=${this.selectedPlan}&billing=${this.paymentType}`);\n        }\n        this.errorMessage = state.errorMessage;\n      });\n\n    setTimeout(() => this.store.dispatch(new FinalLoading({ loadingState: false })));\n    this.handleUsernameAvailability();\n    this.sharedService.loadPricingPlans();\n    window.addEventListener('beforeunload', this.authService.onBeforeLoader, true);\n  }\n\n  // == Toggle password visibility\n  togglePassword(input: any): any {\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n\n  // == Is text toggled\n  toggleText(): void {\n    const bool = this.isTextToggled;\n    this.isTextToggled = bool === false;\n  }\n\n  signup() {\n    this.submitted = true;\n    if (this.isConfirmedPrivacy === null) {\n      this.isConfirmedPrivacy = false;\n    }\n\n    if (this.isRecoveryEmail === null) {\n      this.isRecoveryEmail = false;\n    }\n\n    if (\n      this.signupState.usernameExists !== false ||\n      this.signupForm.invalid ||\n      !this.isConfirmedPrivacy ||\n      (!this.isRecoveryEmail &&\n        (!this.signupForm.get('recoveryEmail').value || this.signupForm.get('recoveryEmail').invalid))\n    ) {\n      return false;\n    }\n\n    if (this.selectedPlan !== PlanType.FREE) {\n      this.navigateToBillingPage();\n    } else {\n      if (!!this.inviteCode?.match(/^[0-9]{4}-[0-9]{5,6}$/)) {\n        this.signupFormCompleted();\n      } else {\n        this.errorMessage = this.translate.instant('create_account.insert_valid_inviteCode');\n      }\n    }\n  }\n\n  openAccountInitModal() {\n    this.modalRef = this.modalService.open(UserAccountInitDialogComponent, {\n      centered: true,\n      windowClass: 'modal-sm',\n      backdrop: 'static',\n      keyboard: false,\n    });\n  }\n\n  private navigateToBillingPage() {\n    this.store.dispatch(\n      new UpdateSignupData({\n        recovery_email: this.signupForm.get('recoveryEmail').value,\n        username: this.signupForm.get('username').value,\n        password: this.signupForm.get('password').value,\n        recaptcha: this.signupForm.value.captchaResponse,\n      }),\n    );\n    this.router.navigateByUrl(`/billing-info?plan=${this.selectedPlan}&billing=${this.paymentType}`);\n  }\n\n  signupFormCompleted() {\n    if (this.selectedPlan !== PlanType.FREE) {\n      this.navigateToBillingPage();\n    } else {\n      this.signupInProgress = true;\n      this.openAccountInitModal();\n      this.openPgpService.generateUserKeys(\n        this.signupForm.get('username').value,\n        this.signupForm.get('password').value,\n      );\n      this.waitForPGPKeys();\n    }\n  }\n\n  waitForPGPKeys() {\n    setTimeout(() => {\n      this.userKeys = this.openPgpService.getUserKeys();\n      if (this.userKeys) {\n        this.pgpKeyGenerationCompleted();\n        return;\n      }\n      this.waitForPGPKeys();\n    }, 1000);\n  }\n\n  pgpKeyGenerationCompleted() {\n    if (this.modalRef) {\n      this.modalRef.componentInstance.pgpGenerationCompleted();\n    }\n    const currentLocale = this.translate.currentLang ? this.translate.currentLang : 'en';\n    const currentLang = LANGUAGES.find(lang => {\n      if (lang.locale === currentLocale) {\n        return true;\n      }\n    });\n    this.data = {\n      ...this.userKeys,\n      recovery_email: this.signupForm.get('recoveryEmail').value,\n      username: this.signupForm.get('username').value,\n      password: this.signupForm.get('password').value,\n      invite_code: this.inviteCode,\n      language: currentLang.name,\n    };\n    this.store.dispatch(new SignUp(this.data));\n  }\n\n  private handleUserState(): void {\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        if (this.signupInProgress && !authState.inProgress) {\n          if (authState.errorMessage) {\n            this.notificationService.showSnackBar(`Failed to create account.${authState.errorMessage}`);\n          }\n          this.signupInProgress = false;\n        }\n        this.signupState = authState.signupState;\n      });\n  }\n\n  handleUsernameAvailability() {\n    this.signupForm\n      .get('username')\n      .valueChanges.pipe(debounceTime(500))\n      .subscribe(username => {\n        if (!this.signupForm.controls.username.errors) {\n          this.store.dispatch(new CheckUsernameAvailability(username));\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideFooter.emit(false);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { UsersBillingInfoComponent } from '../shared/components/users-billing-info/users-billing-info.component';\nimport { AuthGuard } from '../store/services';\n\nimport { UsersSignInComponent } from './users-sign-in/users-sign-in.component';\nimport { UsersSignUpComponent } from './users-sign-up/users-sign-up.component';\nimport { UsersCreateAccountComponent } from './users-create-account/users-create-account.component';\nimport { DecryptMessageComponent } from './decrypt/decrypt-message.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: 'signin', pathMatch: 'full' },\n  { path: 'signin', component: UsersSignInComponent, canActivate: [AuthGuard] },\n  { path: 'signup', component: UsersSignUpComponent },\n  { path: 'create-account', component: UsersCreateAccountComponent },\n  { path: 'billing-info', component: UsersBillingInfoComponent },\n  { path: 'message/:hash/:secret/:senderId', component: DecryptMessageComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule],\n})\nexport class UsersRoutingModule {}\n","<!-- PAGE SECTION -->\n<section\n  class=\"l-block l-block-text bg-white text-center text-white gap-p-eq has-cover login-main\"\n  id=\"login-main\"\n  style=\"background-image: url(assets/images/user-actions/login-bg.jpg)\"\n>\n  <div\n    class=\"container container-xs\"\n    *ngIf=\"(!authState.isAuthenticated || authState.anti_phishing_phrase) && !isLoading\"\n  >\n    <header class=\"l-block-header position-relative mb-md-2\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 px-sm-5 px-md-0\">\n          <h1\n            *ngIf=\"!authState.auth2FA.show2FALogin && !authState.isAuthenticated\"\n            class=\"l-block-title text-white text-uppercase\"\n          >\n            <strong [translate]=\"'login.user_login'\" *showInIE=\"false\">User Login</strong>\n          </h1>\n          <h2 *ngIf=\"authState.auth2FA.show2FALogin\" class=\"l-block-title text-white text-uppercase\">\n            <strong>2 Factor Authentication</strong>\n          </h2>\n          <h4 class=\"l-block-title text-white\">\n            <strong *showInIE=\"true\"\n              >IE has limited support. For better experience use Chrome, Firefox, Safari, Opera, Edge etc.</strong\n            >\n          </h4>\n        </div>\n      </div>\n    </header>\n    <div class=\"l-block-body px-xs\" *showInIE=\"false\">\n      <div class=\"l-content-holder l-form-content-holder mx-auto mt-md-0\">\n        <div class=\"form\">\n          <form\n            *ngIf=\"!authState.auth2FA.show2FALogin && !authState.isAuthenticated\"\n            class=\"login-form position-relative\"\n            [formGroup]=\"loginForm\"\n            #form=\"ngForm\"\n            (ngSubmit)=\"login(loginForm.value)\"\n          >\n            <div\n              class=\"form-group\"\n              [ngClass]=\"{\n                'is-validate': loginForm.controls.username.invalid && showFormErrors\n              }\"\n            >\n              <label\n                for=\"loginUsername\"\n                class=\"d-block text-faded text-left hidden-sm-up\"\n                [translate]=\"'settings.username'\"\n                >Username</label\n              >\n              <div class=\"input-group\">\n                <span\n                  class=\"input-group-addon password-toggle bg-white text-muted\"\n                  id=\"passwordToggle\"\n                  (click)=\"openOSK(inputFields.USERNAME)\"\n                >\n                  <i class=\"fa fa-keyboard\"></i>\n                </span>\n                <input\n                  #usernameVC\n                  class=\"form-control form-control-lg border-right-0\"\n                  id=\"username_noSpan\"\n                  [placeholder]=\"'settings.username' | translate\"\n                  type=\"text\"\n                  (click)=\"onInputFocusChange(inputFields.USERNAME)\"\n                  name=\"username\"\n                  formControlName=\"username\"\n                  required\n                />\n              </div>\n              <span\n                *ngIf=\"loginForm.controls['username'].errors && showFormErrors\"\n                id=\"email-valid\"\n                class=\"validate-message\"\n              >\n                <span *ngIf=\"loginForm.controls['username'].errors.required\" [translate]=\"'settings.username_required'\"\n                  >A username is required.</span\n                >\n              </span>\n            </div>\n            <div\n              class=\"form-group\"\n              [ngClass]=\"{\n                'is-validate': loginForm.controls.password.invalid && showFormErrors\n              }\"\n            >\n              <label\n                for=\"loginPassword\"\n                class=\"d-block text-faded text-left hidden-sm-up\"\n                [translate]=\"'settings.password'\"\n                >Password</label\n              >\n              <div class=\"input-group\">\n                <span\n                  class=\"input-group-addon password-toggle bg-white text-muted\"\n                  id=\"keyboardToggle\"\n                  (click)=\"openOSK(inputFields.PASSWORD)\"\n                >\n                  <i class=\"fa fa-keyboard\"></i>\n                </span>\n                <input\n                  #passwordVC\n                  formControlName=\"password\"\n                  class=\"form-control form-control-lg border-right-0\"\n                  (click)=\"onInputFocusChange(inputFields.PASSWORD)\"\n                  type=\"password\"\n                  id=\"password_noSpan\"\n                  [placeholder]=\"'settings.password' | translate\"\n                  aria-describedby=\"passwordToggle\"\n                  name=\"password\"\n                  required\n                />\n                <span\n                  class=\"input-group-addon password-toggle bg-white text-muted\"\n                  id=\"passwordToggle\"\n                  (click)=\"togglePassword(passwordVC)\"\n                >\n                  <i class=\"fa fa-eye\"></i>\n                  <i class=\"fa fa-eye-slash\"></i>\n                </span>\n              </div>\n              <span *ngIf=\"loginForm.controls['password'].errors && showFormErrors\" class=\"validate-message\">\n                <span *ngIf=\"loginForm.controls['password'].errors.required\" [translate]=\"'login.password_required'\"\n                  >A password is required.</span\n                >\n              </span>\n            </div>\n\n            <div class=\"form-group remember-me\">\n              <div class=\"d-flex\">\n                <span class=\"fancy-field-group mr-3\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-lg\"\n                    id=\"moreInfoCheckbox\"\n                    name=\"[]\"\n                    type=\"checkbox\"\n                    formControlName=\"rememberMe\"\n                  />\n                  <label for=\"moreInfoCheckbox\" class=\"fancy-field-empty\"></label>\n                </span>\n                <div class=\"checkbox-text lh-sm cursor-pointer\" (click)=\"toggleRememberMe()\">\n                  <span class=\"info-text\" [translate]=\"'login.remember_me'\"> Remember me on this device. </span>\n                </div>\n              </div>\n            </div>\n            <div *ngIf=\"errorMessage\" class=\"login-form__failed l-alert l-alert-danger\">\n              {{ errorMessage }}\n            </div>\n            <div class=\"form-group form-user-actions mt-4 pt-sm-2\">\n              <button class=\"btn btn-gradient-primary btn-lg login-btn\" role=\"button\" type=\"submit\">\n                <span [translate]=\"'login.name'\">Login</span>\n              </button>\n            </div>\n          </form>\n        </div>\n        <!--dd*****************-->\n\n        <div>\n          <div *ngIf=\"authState.anti_phishing_phrase\">\n            <div class=\"mb-4 text-justify\" style=\"margin-top: -20px\">\n              Please verify your Anti-Phishing phrase. If it is missing or incorrect, you may be the victim of phishing.\n              You should immediately confirm that you are visiting\n              <a href=\"https://ctemplar.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://ctemplar.com</a>. If not,\n              a malicious site may have your login credentials to your CTemplar account. To prevent more harm, visit\n              <a href=\"https://ctemplar.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://ctemplar.com</a> and\n              change your password.\n              <div class=\"mt-2\">\n                Your Anti-Phishing Phrase:\n                <b style=\"font-size: 20px\">{{ authState.anti_phishing_phrase }}</b>\n              </div>\n            </div>\n            <div class=\"form-group form-user-actions mt-4 pt-sm-2\" *ngIf=\"!authState.auth2FA.show2FALogin\">\n              <button (click)=\"continueLogin()\" class=\"btn btn-gradient-primary btn-lg login-btn\" role=\"button\">\n                Continue Login\n              </button>\n            </div>\n          </div>\n          <div *ngIf=\"authState.auth2FA.show2FALogin\">\n            <div class=\"mb-1 text-left\">Enter code generated by app</div>\n            <div class=\"form-group\">\n              <label for=\"code2FA\" class=\"d-block text-faded text-left hidden-sm-up\">2FA Code</label>\n              <div class=\"input-group\">\n                <input\n                  class=\"form-control form-control-lg border-right-0\"\n                  id=\"code2FA\"\n                  type=\"text\"\n                  #otpInput\n                  [(ngModel)]=\"otp\"\n                  (keyup.enter)=\"login(loginForm.value, otp, true)\"\n                  placeholder=\"2FA Code\"\n                  required\n                />\n              </div>\n              <div *ngIf=\"errorMessage\" class=\"login-form__failed l-alert l-alert-danger my-2\">\n                {{ errorMessage }}\n              </div>\n              <div class=\"form-group form-user-actions mt-4 pt-sm-2\">\n                <button\n                  (click)=\"login(loginForm.value, otp, true)\"\n                  [disabled]=\"!otp\"\n                  class=\"btn btn-gradient-primary btn-lg login-btn\"\n                  role=\"button\"\n                >\n                  <span [translate]=\"'billing_info.submit'\">Submit</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div>\n          <div class=\"form-alternative-content\">\n            <div class=\"reset-password mb-0 mb-sm-1\">\n              <a class=\"text-faded\" (click)=\"openResetPasswordModal()\" role=\"button\">\n                <small>\n                  <u [translate]=\"'login.reset_password'\">Reset Password</u>\n                </small>\n              </a>\n            </div>\n            <div class=\"create-account\">\n              <a routerLink=\"/signup\" class=\"text-white\">\n                <strong>\n                  <u [translate]=\"'login.create_account'\">Create Account</u>\n                </strong>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- /.Site container ends -->\n  <div class=\"simple-keyboard\" [style.visibility]=\"isKeyboardOpened ? 'visible' : 'hidden'\"></div>\n\n  <div align=\"center\" class=\"logged-in-spinner\" *ngIf=\"authState.isAuthenticated && !authState.anti_phishing_phrase\">\n    <img class=\"logo\" style=\"width: 400px; height: 300px\" [src]=\"loadingImage | safe: 'url'\" />\n    <p class=\"quote\">Loading your mailbox...</p>\n  </div>\n  <div align=\"center\" class=\"logged-in-spinner\" *ngIf=\"isLoading && !authState.isAuthenticated\">\n    <img class=\"logo\" style=\"width: 400px; height: 300px; margin-top: 70px\" [src]=\"loadingImage | safe: 'url'\" />\n    <p class=\"quote\">Logging in...</p>\n  </div>\n</section>\n<!-- /.PAGE SECTION ENDS -->\n\n<ng-template #resetPasswordModal let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header text-center justify-content-center\">\n    <h3 class=\"modal-title w-100 text-dark\" id=\"resetPasswordModalLabel\">\n      <strong>Reset Password</strong>\n    </h3>\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"d()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body bg-faded\">\n    <div class=\"text-holder text-dark text-medium\">\n      <ng-container *ngIf=\"!isRecoveryCodeSent; else recoveryCodeSent\">\n        <p>We will send a recovery code to your <b>recovery email</b> to reset your password.</p>\n        <p>\n          Your encryption key is bound to your password, therefore you will not be able to decrypt old emails if you\n          reset your password.\n        </p>\n        <p>\n          If you did not set a recovery email then you can use your\n          <b>recovery key</b>\n          to reset your password. If you do not have either a recovery email or a recovery code, your account will not\n          be recoverable.\n          <br />\n          <a\n            (click)=\"\n              isRecoveryCodeSent = isRecoveryKeyMode = true;\n              showResetPasswordFormErrors = false;\n              resetPasswordErrorMessage = null\n            \"\n          >\n            Reset password using recovery key</a\n          >\n        </p>\n\n        <div class=\"login-content-holder mx-auto mt-4 pt-sm-2\">\n          <div class=\"form\">\n            <form\n              [formGroup]=\"recoverPasswordForm\"\n              #form=\"ngForm\"\n              (submit)=\"recoverPassword(recoverPasswordForm.value)\"\n            >\n              <div class=\"form-group\">\n                <label for=\"recoverPasswordUsername\" class=\"d-block text-muted text-left\">Username</label>\n                <input\n                  class=\"form-control form-control-lg\"\n                  id=\"recoverPasswordUsername\"\n                  placeholder=\"Username\"\n                  type=\"text\"\n                  formControlName=\"username\"\n                  required\n                />\n                <span\n                  *ngIf=\"recoverPasswordForm.controls['username'].errors && showResetPasswordFormErrors\"\n                  id=\"recover-username-valid\"\n                  class=\"validate-message\"\n                >\n                  <span *ngIf=\"recoverPasswordForm.controls['username'].errors.required\">A username is required.</span>\n                </span>\n              </div>\n\n              <div class=\"form-group\">\n                <label\n                  for=\"recoverPasswordemail\"\n                  class=\"d-block text-muted text-left\"\n                  [translate]=\"'settings.recovery_email'\"\n                  >Recovery Email\n                </label>\n                <input\n                  class=\"form-control form-control-lg\"\n                  id=\"recoverPasswordemail\"\n                  [placeholder]=\"'settings.recovery_email' | translate\"\n                  type=\"email\"\n                  formControlName=\"recovery_email\"\n                  required\n                />\n                <span\n                  *ngIf=\"recoverPasswordForm.controls['recovery_email'].errors && showResetPasswordFormErrors\"\n                  id=\"recovery-email-valid\"\n                  class=\"validate-message\"\n                >\n                  <span *ngIf=\"recoverPasswordForm.controls['recovery_email'].errors.email\"\n                    >The recovery email is invalid.</span\n                  >\n                </span>\n              </div>\n              <div *ngIf=\"resetPasswordErrorMessage\" class=\"reset-form__failed l-alert l-alert-danger mb-3\">\n                {{ resetPasswordErrorMessage }}\n              </div>\n\n              <div\n                class=\"d-flex align-items-baseline bg-faded mb-3\"\n                [ngClass]=\"{ 'is-validated': isConfirmedPrivacy == false }\"\n              >\n                <span class=\"fancy-field-group mr-3\">\n                  <input\n                    class=\"d-none fancy-field-control fancy-field-control-lg\"\n                    id=\"termsConditionCheckbox\"\n                    name=\"[]\"\n                    type=\"checkbox\"\n                    [(ngModel)]=\"isConfirmedPrivacy\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                  />\n                  <label for=\"termsConditionCheckbox\" class=\"fancy-field-empty\"></label>\n                </span>\n                <div class=\"checkbox-text lh-sm\">\n                  <p [translate]=\"'settings.reset_password'\">\n                    I understand that all data will be deleted irrevocably and a new encryption key will be generated.\n                  </p>\n                </div>\n              </div>\n              <div\n                *ngIf=\"isConfirmedPrivacy !== null && !isConfirmedPrivacy\"\n                class=\"l-alert l-alert-danger mb-4\"\n                role=\"alert\"\n              >\n                Please agree to above condition to reset your password.\n              </div>\n\n              <div class=\"form-group form-user-actions text-center mb-0\">\n                <button\n                  class=\"btn btn-gradient-primary btn-sm reset-btn\"\n                  role=\"button\"\n                  type=\"submit\"\n                  [disabled]=\"isLoading\"\n                >\n                  Reset Password\n                </button>\n                <app-loading-spinner [showSpinner]=\"isLoading\"></app-loading-spinner>\n              </div>\n            </form>\n            <div class=\"text-center mt-2\">\n              <a\n                (click)=\"\n                  isRecoveryCodeSent = true; showResetPasswordFormErrors = false; resetPasswordErrorMessage = null\n                \"\n                role=\"button\"\n              >\n                <small>\n                  <u>Already have the code</u>\n                </small>\n              </a>\n            </div>\n          </div>\n        </div>\n      </ng-container>\n      <ng-template #recoveryCodeSent>\n        <p *ngIf=\"!isRecoveryKeyMode\">We have sent a recovery code to your recovery email.</p>\n        <p>Please enter the {{ isRecoveryKeyMode ? 'recovery key' : 'code' }} and your new password below.</p>\n\n        <div class=\"login-content-holder mx-auto mt-4 pt-sm-2\">\n          <div class=\"form\">\n            <form [formGroup]=\"resetPasswordForm\" #form=\"ngForm\" (submit)=\"resetPassword(resetPasswordForm.value)\">\n              <div class=\"form-group\">\n                <label for=\"resetCode\" class=\"d-block text-muted text-left\">{{\n                  isRecoveryKeyMode ? 'Recovery key' : 'Code'\n                }}</label>\n                <input\n                  class=\"form-control form-control-lg\"\n                  id=\"resetCode\"\n                  placeholder=\"Code\"\n                  type=\"text\"\n                  formControlName=\"code\"\n                  required\n                />\n                <span\n                  *ngIf=\"resetPasswordForm.controls['code'].errors && showResetPasswordFormErrors\"\n                  id=\"reset-code-valid\"\n                  class=\"validate-message\"\n                >\n                  <span *ngIf=\"resetPasswordForm.controls['code'].errors.required\">A recovery code is required.</span>\n                </span>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"resetPasswordUsername\" class=\"d-block text-muted text-left\">Username</label>\n                <input\n                  class=\"form-control form-control-lg\"\n                  id=\"resetPasswordUsername\"\n                  placeholder=\"Username\"\n                  type=\"text\"\n                  formControlName=\"username\"\n                  required\n                />\n                <span\n                  *ngIf=\"resetPasswordForm.controls['username'].errors && showResetPasswordFormErrors\"\n                  id=\"username-valid\"\n                  class=\"validate-message\"\n                >\n                  <span *ngIf=\"resetPasswordForm.controls['username'].errors.required\">A username is required.</span>\n                </span>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"resetPassword\" class=\"d-block text-muted text-left\" [translate]=\"'settings.new_password'\"\n                  >New Password</label\n                >\n                <div class=\"input-group\">\n                  <input\n                    #resetPasswordInput\n                    class=\"form-control form-control-lg\"\n                    id=\"resetPassword\"\n                    [placeholder]=\"'settings.password' | translate\"\n                    type=\"password\"\n                    aria-describedby=\"resetPasswordToggle\"\n                    name=\"password\"\n                    formControlName=\"password\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    id=\"resetPasswordToggle\"\n                    (click)=\"togglePassword(resetPasswordInput)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <span\n                  *ngIf=\"resetPasswordForm.controls['password'].errors && showResetPasswordFormErrors\"\n                  id=\"reset-password-valid\"\n                  class=\"validate-message\"\n                >\n                  <span *ngIf=\"resetPasswordForm.controls['password'].errors.required\">A password is required.</span>\n                </span>\n              </div>\n              <div class=\"form-group\">\n                <label\n                  for=\"resetConfirmPassword\"\n                  class=\"d-block text-muted text-left\"\n                  [translate]=\"'settings.confirm_new_password'\"\n                  >Confirm New Password</label\n                >\n                <div class=\"input-group\">\n                  <input\n                    #resetConfirmPasswordInput\n                    class=\"form-control form-control-lg\"\n                    id=\"resetConfirmPassword\"\n                    [placeholder]=\"'create_account.confirm_password' | translate\"\n                    type=\"password\"\n                    aria-describedby=\"resetConfirmPasswordToggle\"\n                    name=\"confirm-password\"\n                    formControlName=\"confirmPwd\"\n                  />\n                  <span\n                    class=\"input-group-addon password-toggle bg-white text-muted\"\n                    id=\"resetConfirmPasswordToggle\"\n                    (click)=\"togglePassword(resetConfirmPasswordInput)\"\n                  >\n                    <i class=\"fa fa-eye\"></i>\n                    <i class=\"fa fa-eye-slash\"></i>\n                  </span>\n                </div>\n                <span\n                  *ngIf=\"resetPasswordForm.controls['confirmPwd'].errors && showResetPasswordFormErrors\"\n                  id=\"reset-confirm-password-valid\"\n                  class=\"validate-message\"\n                >\n                  <span [translate]=\"'create_account.passwords_not_match'\">Passwords do not match.</span>\n                </span>\n              </div>\n              <div *ngIf=\"resetPasswordErrorMessage\" class=\"reset-form__failed l-alert l-alert-danger mb-3\">\n                {{ resetPasswordErrorMessage }}\n              </div>\n              <div class=\"form-group form-user-actions text-center mb-0\">\n                <button\n                  class=\"btn btn-gradient-primary btn-sm reset-btn\"\n                  role=\"button\"\n                  type=\"submit\"\n                  [disabled]=\"isGeneratingKeys\"\n                >\n                  Submit\n                </button>\n                <app-loading-spinner [showSpinner]=\"isGeneratingKeys\"></app-loading-spinner>\n              </div>\n            </form>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-template>\n","import { AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Store } from '@ngrx/store';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { Router } from '@angular/router';\nimport Keyboard from 'simple-keyboard';\nimport { filter } from 'rxjs/operators';\n\nimport { AppState, AuthState } from '../../store/datatypes';\nimport { ClearAuthErrorMessage, FinalLoading, LogIn, RecoverPassword, ResetPassword } from '../../store/actions';\nimport { LOADING_IMAGE, OpenPgpService, SharedService, UsersService } from '../../store/services';\nimport { ESCAPE_KEYCODE } from '../../shared/config';\nimport { PasswordValidation } from '../users-create-account/users-create-account.component';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-users-sign-in',\n  templateUrl: './users-sign-in.component.html',\n  styleUrls: ['./users-sign-in.component.scss'],\n})\nexport class UsersSignInComponent implements OnDestroy, OnInit, AfterViewInit {\n  loginForm: FormGroup;\n\n  recoverPasswordForm: FormGroup;\n\n  resetPasswordForm: FormGroup;\n\n  showFormErrors = false;\n\n  showResetPasswordFormErrors = false;\n\n  errorMessage = '';\n\n  resetPasswordErrorMessage = '';\n\n  isLoading = false;\n\n  isConfirmedPrivacy: boolean = null;\n\n  // == NgBootstrap Modal stuffs\n  resetModalRef: any;\n\n  username = '';\n\n  password = 'password';\n\n  layout = 'alphanumeric';\n\n  isKeyboardOpened: boolean;\n\n  isRecoverFormSubmitted: boolean;\n\n  isGeneratingKeys: boolean;\n\n  isRecoveryCodeSent: boolean;\n\n  authState: AuthState;\n\n  otp: string;\n\n  loadingImage = LOADING_IMAGE;\n\n  isRecoveryKeyMode: boolean;\n\n  @ViewChild('usernameVC') usernameVC: ElementRef;\n\n  @ViewChild('passwordVC') passwordVC: ElementRef;\n\n  @ViewChild('resetPasswordModal') resetPasswordModal: any;\n\n  @ViewChild('otpInput') otpInput: ElementRef;\n\n  keyboard: Keyboard;\n\n  currentInput: InputFields;\n\n  inputFields = InputFields;\n\n  constructor(\n    private modalService: NgbModal,\n    private formBuilder: FormBuilder,\n    private store: Store<AppState>,\n    private sharedService: SharedService,\n    private userService: UsersService,\n    private router: Router,\n    private openPgpService: OpenPgpService,\n  ) {\n    document.querySelector('#main').classList.add('visible-signin');\n    document.querySelector('#app-outer-id').classList.add('visible-signin');\n  }\n\n  ngOnInit() {\n    this.store.dispatch(new ClearAuthErrorMessage());\n    setTimeout(() => {\n      this.store.dispatch(new FinalLoading({ loadingState: false }));\n    });\n\n    this.sharedService.hideFooter.emit(true);\n\n    this.loginForm = this.formBuilder.group({\n      username: ['', [Validators.required]],\n      password: ['', [Validators.required]],\n      rememberMe: [false],\n    });\n\n    this.recoverPasswordForm = this.formBuilder.group({\n      username: ['', [Validators.required]],\n      recovery_email: ['', [Validators.required, Validators.email]],\n    });\n    this.resetPasswordForm = this.formBuilder.group(\n      {\n        code: ['', [Validators.required]],\n        password: ['', [Validators.required]],\n        confirmPwd: ['', [Validators.required]],\n        username: ['', [Validators.required]],\n      },\n      {\n        validator: PasswordValidation.MatchPassword,\n      },\n    );\n\n    this.store\n      .select(state => state.auth)\n      .pipe(untilDestroyed(this))\n      .subscribe((authState: AuthState) => {\n        if (!authState.isAuthenticated) {\n          this.isLoading = authState.inProgress;\n        } else {\n          this.isLoading = false;\n        }\n        this.errorMessage = authState.errorMessage;\n        this.isRecoveryCodeSent = authState.isRecoveryCodeSent;\n        this.resetPasswordErrorMessage = authState.resetPasswordErrorMessage;\n        if (authState.errorMessage) {\n        }\n        if (\n          this.isRecoverFormSubmitted &&\n          this.authState.inProgress &&\n          !authState.inProgress &&\n          !authState.resetPasswordErrorMessage\n        ) {\n          this.resetModalRef.dismiss();\n        }\n        if (authState.auth2FA.show2FALogin) {\n          setTimeout(() => {\n            this.otpInput.nativeElement.focus();\n          }, 200);\n        }\n        this.authState = authState;\n      });\n  }\n\n  ngOnDestroy() {\n    document.querySelector('#main').classList.remove('visible-signin');\n    document.querySelector('#app-outer-id').classList.remove('visible-signin');\n    this.store.dispatch(new ClearAuthErrorMessage());\n    this.sharedService.hideFooter.emit(false);\n  }\n\n  openResetPasswordModal() {\n    this.isRecoverFormSubmitted = false;\n    this.isRecoveryCodeSent = false;\n    this.isRecoveryKeyMode = false;\n    this.showResetPasswordFormErrors = false;\n    this.resetPasswordErrorMessage = '';\n    this.recoverPasswordForm.reset();\n    this.resetPasswordForm.reset();\n    this.resetModalRef = this.modalService.open(this.resetPasswordModal, {\n      centered: true,\n      windowClass: 'modal-md',\n      backdrop: 'static',\n    });\n  }\n\n  // == Toggle password visibility\n  togglePassword(input: any): any {\n    if (!input.value) {\n      return;\n    }\n    input.type = input.type === 'password' ? 'text' : 'password';\n  }\n\n  login(user: any, otp?: string, isOtp?: boolean) {\n    this.showFormErrors = true;\n    if (isOtp && !otp) {\n      return;\n    }\n    if (this.loginForm.valid) {\n      this.store.dispatch(new LogIn({ ...user, otp }));\n    }\n  }\n\n  toggleRememberMe() {\n    this.loginForm.controls.rememberMe.setValue(!this.loginForm.controls.rememberMe.value);\n  }\n\n  continueLogin() {\n    this.authState.anti_phishing_phrase = '';\n    this.router.navigateByUrl('/mail');\n  }\n\n  recoverPassword(data: any) {\n    this.showResetPasswordFormErrors = true;\n    if (this.isConfirmedPrivacy === null) {\n      this.isConfirmedPrivacy = false;\n    }\n    if (this.recoverPasswordForm.valid && this.isConfirmedPrivacy) {\n      data.username = this.userService.trimUsername(data.username);\n      this.store.dispatch(new RecoverPassword(data));\n      this.resetPasswordForm.get('username').setValue(data.username);\n      this.showResetPasswordFormErrors = false;\n    }\n  }\n\n  resetPassword(data: any) {\n    this.showResetPasswordFormErrors = true;\n    if (this.resetPasswordForm.valid) {\n      data.username = this.userService.trimUsername(data.username);\n      this.isGeneratingKeys = true;\n      this.openPgpService.generateUserKeys(data.username, data.password);\n      if (this.openPgpService.getUserKeys()) {\n        this.resetPasswordConfirmed(data);\n      } else {\n        this.waitForPGPKeys(data);\n      }\n    }\n  }\n\n  waitForPGPKeys(data: any) {\n    setTimeout(() => {\n      if (this.openPgpService.getUserKeys()) {\n        this.resetPasswordConfirmed(data);\n        return;\n      }\n      this.waitForPGPKeys(data);\n    }, 1000);\n  }\n\n  resetPasswordConfirmed(data: any) {\n    this.isGeneratingKeys = false;\n    const requestData = {\n      code: data.code,\n      username: data.username,\n      password: data.password,\n      ...this.openPgpService.getUserKeys(),\n    };\n    this.isRecoverFormSubmitted = true;\n    this.store.dispatch(new ResetPassword(requestData));\n  }\n\n  // On screen keyboard handling\n  ngAfterViewInit() {\n    this.keyboard = new Keyboard({\n      onChange: input => this.onChange(input),\n      onKeyPress: button => this.onKeyPress(button),\n    });\n    this.loginForm\n      .get(InputFields.USERNAME)\n      .valueChanges.pipe(\n        untilDestroyed(this),\n        filter(value => this.isKeyboardOpened && value !== this.keyboard.getInput()),\n      )\n      .subscribe(value => {\n        this.onInputChange(value);\n      });\n    this.loginForm\n      .get(InputFields.PASSWORD)\n      .valueChanges.pipe(\n        untilDestroyed(this),\n        filter(value => this.isKeyboardOpened && value !== this.keyboard.getInput()),\n      )\n      .subscribe(value => {\n        this.onInputChange(value);\n      });\n  }\n\n  onChange(input: string) {\n    this.loginForm.get(this.currentInput).setValue(input);\n  }\n\n  onKeyPress(button: string) {\n    /**\n     * If you want to handle the shift and caps lock buttons\n     */\n    if (button === '{shift}' || button === '{lock}') {\n      this.handleShift();\n    }\n  }\n\n  onInputChange(value: string) {\n    this.keyboard.setInput(value);\n  }\n\n  handleShift() {\n    const currentLayout = this.keyboard.options.layoutName;\n    const shiftToggle = currentLayout === 'default' ? 'shift' : 'default';\n\n    this.keyboard.setOptions({\n      layoutName: shiftToggle,\n    });\n  }\n\n  openOSK(input: any) {\n    if (!(this.isKeyboardOpened && this.currentInput !== input)) {\n      this.isKeyboardOpened = !this.isKeyboardOpened;\n    }\n    this.currentInput = input;\n    if (this.isKeyboardOpened) {\n      if (this.currentInput === InputFields.PASSWORD) {\n        this.passwordVC.nativeElement.focus();\n      } else {\n        this.usernameVC.nativeElement.focus();\n      }\n      this.onInputChange(this.loginForm.get(this.currentInput).value);\n    }\n  }\n\n  onInputFocusChange(input: any) {\n    if (this.isKeyboardOpened) {\n      this.isKeyboardOpened = false;\n      this.openOSK(input);\n    }\n  }\n\n  @HostListener('document:keydown', ['$event'])\n  onKeydownHandler(event: KeyboardEvent) {\n    if (event.keyCode === ESCAPE_KEYCODE) {\n      this.isKeyboardOpened = false;\n    }\n  }\n}\n\nenum InputFields {\n  USERNAME = 'username',\n  PASSWORD = 'password',\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\n\nimport { Storage, StorageData } from '../../store/models';\nimport { SharedService } from '../../store/services';\nimport { FinalLoading } from '../../store/actions';\nimport { PRIMARY_WEBSITE } from '../../shared/config';\n\n@Component({\n  selector: 'app-users-sign-up',\n  templateUrl: './users-sign-up.component.html',\n  styleUrls: ['./users-sign-up.component.scss'],\n})\nexport class UsersSignUpComponent implements OnDestroy, OnInit {\n  public storageList: Storage[];\n\n  public selectedStorage: Storage;\n\n  public mainPayments: any[];\n\n  public selectedPayment = 0;\n\n  // == Defining public property as boolean\n  public selectedIndex = -1; // Assuming no element are selected initially\n\n  public primaryWebsite = PRIMARY_WEBSITE;\n\n  constructor(private sharedService: SharedService, private store: Store<any>) {}\n\n  ngOnInit() {\n    this.sharedService.hideFooter.emit(true);\n    this.storageList = StorageData;\n    this.selectedStorage = this.storageList[0];\n    this.mainPayments = [\n      {\n        id: 'pay-monthly',\n        title: 'Pay Monthly',\n        checked: true,\n        moMoney: 0,\n        totalMoney: 0,\n      },\n      {\n        id: 'pay-annullay',\n        title: 'Pay Annually',\n        checked: false,\n        moMoney: 0,\n        totalMoney: 0,\n      },\n    ];\n    this.makePayments();\n    this.store.dispatch(new FinalLoading({ loadingState: false }));\n  }\n\n  makePayments() {\n    this.mainPayments[0].moMoney = this.selectedStorage.price;\n    this.mainPayments[1].moMoney = (this.selectedStorage.price * 0.8).toFixed(1);\n    this.mainPayments[1].totalMoney = (this.selectedStorage.price * 9.6).toFixed(1);\n  }\n\n  onChangePayment(index: number) {\n    this.selectedPayment = index;\n  }\n\n  ngOnDestroy() {\n    this.sharedService.hideFooter.emit(false);\n  }\n}\n","<!-- PAGE SECTION -->\n<section class=\"l-block l-block-text bg-white gap-p-eq\">\n  <div class=\"container\">\n    <header class=\"l-block-header position-relative text-center\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-sm-12 col-md-10 position-sm-static px-sm-5 px-md-0\">\n          <h1 class=\"l-block-title text-uppercase text-secondary\">\n            <strong [translate]=\"'page_pricing.select_account_type'\">Select account type</strong>\n          </h1>\n          <h4\n            class=\"l-block-subtitle mb-0 text-dark fw-light pb-3\"\n            [innerHTML]=\"'page_pricing.do_not_show_ads' | translate\"\n          >\n            <p>\n              CTemplar is the world's most secure & private email service based on an analysis of technical\n              specifications. <br />**CTemplar can not be used for sending spam or bulk emails\n            </p>\n          </h4>\n          <p class=\"mt-3\">\n            14 Day Money back Guarantee (Cryptocurrency excluded)<br />\n            <a href=\"{{ primaryWebsite }}/why-the-price/\" target=\"_blank\" rel=\"noopener noreferrer\"\n              >Pricing explained</a\n            >\n          </p>\n        </div>\n      </div>\n    </header>\n    <app-pricing-plans hideHeader=\"true\" blockGapsZero=\"true\"></app-pricing-plans>\n  </div>\n  <!-- /.Site container ends -->\n</section>\n<!-- /.PAGE SECTION ENDS -->\n","import { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NgbModalModule, NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { SharedModule } from '../shared/shared.module';\nimport { UsersService } from '../store/services';\n\nimport { DecryptMessageComponent } from './decrypt/decrypt-message.component';\nimport { DisplaySecureMessageComponent } from './display-secure-message/display-secure-message.component';\nimport { UsersCreateAccountComponent } from './users-create-account/users-create-account.component';\nimport { UsersSignInComponent } from './users-sign-in/users-sign-in.component';\nimport { UsersSignUpComponent } from './users-sign-up/users-sign-up.component';\nimport { UsersRoutingModule } from './users-routing.module';\nimport { DisplayNameDialogComponent } from './dialogs/display-name-dialog/display-name-dialog.component';\nimport { ReplySecureMessageComponent } from './reply-secure-message/reply-secure-message.component';\nimport { UserAccountInitDialogComponent } from './dialogs/user-account-init-dialog/user-account-init-dialog.component';\nimport { UseCacheDialogComponent } from './dialogs/use-cache-dialog/use-cache-dialog.component';\n\n@NgModule({\n  entryComponents: [DisplayNameDialogComponent, UserAccountInitDialogComponent],\n  declarations: [\n    DecryptMessageComponent,\n    DisplayNameDialogComponent,\n    DisplaySecureMessageComponent,\n    ReplySecureMessageComponent,\n    UserAccountInitDialogComponent,\n    UsersCreateAccountComponent,\n    UsersSignInComponent,\n    UsersSignUpComponent,\n    UseCacheDialogComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    NgbModalModule,\n    NgbModule,\n    ReactiveFormsModule,\n    SharedModule,\n    TranslateModule,\n    UsersRoutingModule,\n  ],\n  exports: [UsersRoutingModule],\n  providers: [UsersService],\n})\nexport class UsersModule {}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const AppConfig = {\n  debug: true,\n  production: false,\n  local: false,\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { AppConfig } from './environments/environment';\n\nif (AppConfig.production) {\n  enableProdMode();\n  if (window) {\n    window.console.log = function () {};\n    window.console.error = function () {};\n  }\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule, {\n    preserveWhitespaces: false,\n  })\n  .catch(error => console.error(error));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"]}